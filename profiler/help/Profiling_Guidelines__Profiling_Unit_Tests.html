<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>配置文件单元测试-帮助| dotTrace</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Profiling_Guidelines__Profiling_Unit_Tests" data-article-props="
                {
                
            &quot;seeAlso&quot;:{
                                             
                &quot;&quot;: [
                
                ],                                 
                &quot;How tos&quot;: [
                
        {&quot;href&quot;:&quot;http://www.jetbrains.com/resharper/documentation/&quot;,&quot;title&quot;:&quot;ReSharper&quot;}
                ]
            }
        
                }
            " data-disqus-id="Profiling_Guidelines__Profiling_Unit_Tests_dt"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索dotTrace帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>dotTrace 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="rs" data-group="secondary">ReSharper 2.x / IntelliJ IDEA</option><option value="vs" data-group="primary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Profiling_Guidelines__Profiling_Unit_Tests.xml" data-toc="Profiling_Guidelines__Profiling_Unit_Tests">配置文件单元测试</h1>    <aside class="warning " rel="Profiling_Guidelines__Profiling_Unit_Tests.xml" id="56691e49" data-title="">        <p id="ff994fe3">            <b id="81bdddd6">*</b>请注意，如果使用<a href="Profiling_Guidelines__Advanced_Profiling_Using_dotTrace_API.html">API</a>控制配置文件，则分析单元测试的唯一可能方法是使用独立的dotTrace。</p>    </aside>    <p id="e93a6956">有三种分析单元测试的方法：</p><ul class="list _bullet"><li class="list__item" id="d1007116"><p>使用集成在Visual Studio中的dotTrace。<br>这是最方便的方法。</p></li><li class="list__item" id="4d46fa51"><p>使用dotTrace和ReSharper（仅当您的计算机上安装了ReSharper或ReSharper Ultimate时）。</p></li><li class="list__item" id="bb9a68bd"><p>使用独立的dotTrace。<b id="abcd4ff2">*</b>            </p></li></ul>        <section class="procedure-steps"><h3 id="c0ad38ee">使用Visual Studio中集成的dotTrace分析单元测试</h3><ol class="list _decimal"><li class="list__item" id="998ec2e6"><p>在Visual Studio中打开一个解决方案。</p></li><li class="list__item" id="b0133cc1"><p>用单元测试打开一个文件。</p></li><li class="list__item" id="1d8e620b"><p>选择测试类别或测试方法。</p></li><li class="list__item" id="5a8ce0fb"><p>单击左侧装订线中的相应侧栏标记。</p></li><li class="list__item" id="91eeba80"><p>在上下文菜单中，选择<span class="control">Profile</span> ：<br>            </p><figure><img alt="使用单元测试运行器进行性能分析测试" title="使用单元测试运行器进行性能分析测试" src="/help/img/dotnet/2019.2/Profiling_Tests_with_Unit_Test_Runner.png" id="5db01def" width="406" height="268"></figure>        </li><li class="list__item" id="70ea0191"><p>打开<span class="control">单元测试会话</span>窗口。</p></li><li class="list__item" id="baeaf7b2"><p>在“ <span class="control">Profiler配置”</span>窗口中指定<a href="Profiler_Options.html">分析选项</a> 。</p></li><li class="list__item" id="8e0d6124">测试执行完成后，将在相应的查看器中打开快照。<aside class="note " rel="8e0d6124" id="42dca8c9" data-title="">                <p id="1000bb85">如果dotTrace设置（ <span class="control">如管理员</span>选项在应用程序<span class="control">兼容性</span>性能使<span class="control">运行此程序</span> ）以管理员权限运行，Visual Studio是在标准帐户下运行，dotTrace将不会收到快照数据。在这种情况下，请以管理员身份重新运行Visual Studio或将dotTrace设置为以标准帐户运行。</p>            </aside>        </li></ol></section>    <aside class="note " rel="c0ad38ee" id="c7c3fec9" data-title=""><p>如果您的计算机上安装了多个版本的dotTrace，则会自动选择最新版本。</p></aside>    <p id="153f517b">您还可以从ReSharper启动单元测试配置文件。选择<span class="menupath" data-skip-index="skip">ReSharper |单元测试|配置文件单元测试</span>或<span class="menupath" data-skip-index="skip">ReSharper |单元测试|</span>在菜单栏上<span class="menupath" data-skip-index="skip">配置“从解决方案中</span>进行的<span class="menupath" data-skip-index="skip">所有测试”</span> 。</p>    <section class="procedure-steps"><h3 id="480e05b8">要从ReSharper的“单元测试会话”窗口中分析单元测试，请执行以下操作：</h3><ol class="list _decimal"><li class="list__item" id="03ad62cf"><p>在“ <span class="control">单元测试会话”</span>窗口的树视图中选择一个节点。</p></li><li class="list__item" id="b835db70"><p>点击<span class="control">配置文件单元测试</span> <img alt="ThemedIcon UtrProfile屏幕灰色" title="ThemedIcon UtrProfile屏幕灰色" src="/help/img/dotnet/2019.2/ThemedIcon.UtrProfile.Screen.[Gray].png" id="18a9e9ba" width="16" height="16" class="inline-icon-16">在工具栏中。</p></li><li class="list__item" id="21216888"><p>在“ <span class="control">Profiler配置”</span>窗口中指定<a href="Profiler_Options.html">分析选项</a> 。</p></li><li class="list__item" id="64dec150"><p>测试执行完成后，将显示快照。</p></li></ol></section>    <a name="profile_unit_test"></a>    <section class="procedure-steps"><h3 id="1bbeebcd">使用独立的dotTrace分析单元测试</h3><ol class="list _decimal"><li class="list__item" id="05b6eac0"><p>作为独立应用程序运行dotTrace。</p></li><li class="list__item" id="c14bbef4"><p>选择<span class="control">新会话|本地</span>标签。</p></li><li class="list__item" id="f6cabefd"><p>在<span class="control">Profile Application</span>的中央面板中，选择<span class="control">Standalone</span> 。</p></li><li class="list__item" id="d12e8d80">根据您使用的单元测试框架，在“ <span class="control">应用程序”</span>字段中指定其可执行文件的路径。您可以使用以下框架/可执行文件：<ul class="list _ul"><li class="list__item" id="fea633d7"><p>                    NUnit的<span class="filepath">nunit.exe</span> 。</p></li><li class="list__item" id="5dc555f7"><p>                    NUnit的<span class="filepath">nunit-console.exe</span> 。</p></li><li class="list__item" id="4407f4db"><p>                    <span class="filepath">MSTest.exe</span>的MSTest的。</p></li><li class="list__item" id="7983a92d"><p>                    <span class="filepath">xUnit的xUnit-console.exe</span> 。</p></li></ul>        </li><li class="list__item" id="954b9356"><p>使用单元测试指定<span class="filepath">.dll</span>文件的路径，并在<span class="control">Arguments</span>字段中添加参数（如果需要）。</p></li><li class="list__item" id="64c556ad">（可选）选择“ <span class="control">高级”</span>选项以配置其他选项，例如“ <span class="control">工作目录”</span>和“ <span class="control">配置文件”子进程</span> 。<br>例如，如果您需要分析在<span class="filepath">nunit-console.exe</span>下运行的NUnit测试，请注意，NUnit测试运行器会创建一个单独的进程来运行测试。因此，您需要从配置文件中排除<span class="filepath">nunit-console.exe</span>进程。去做这个：<ol class="list _decimal"><li class="list__item" id="710b0d21"><p>选择<span class="control">高级</span> 。</p></li><li class="list__item" id="ba687d78"><p>单击“ <span class="control">筛选过程”</span> 。</p></li><li class="list__item" id="04ed6971"><p>在打开的“ <span class="control">过滤器进程”</span>窗口中，添加<code class="code">nunit-console*</code>过滤器。</p></li></ol>        </li><li class="list__item" id="dc5a506f"><p>在“ <span class="control">Profiler配置”</span>窗口中指定<a href="Profiler_Options.html">分析选项</a> 。</p></li><li class="list__item" id="e7cd0c89"><p>点击<span class="control">运行</span> 。</p></li></ol></section>    <div class="table-wrapper"><table class=" wide" width="100%" id="856b6e75"><thead><tr id="77fb17c0" class="ijRowHead"><th id="f84e38c9" width="20%"><p>测试亚军</p></th><th id="76e3f253" width="40%"><p>应用</p></th><th id="b09cf29d" width="40%"><p>争论</p></th></tr></thead><tbody><tr id="73ff3e8d" class="ijRowOdd"><td id="63ef11c0"><p>nUnit的nunit.exe</p></td><td id="32ac0c02"><p>测试运行器可执行文件的路径。<br>示例： <i id="ff64cf15" index="noindex">“ C：\ Program Files（x86）\ NUnit 2.5.3 \ bin \ net-2.0 \ nunit.exe”</i>            </p></td><td id="9af16173"><p>具有单元测试的dll文件的路径。<br>示例： <i id="2ec117e8" index="noindex">“ C：\ Projects \ ConsoleApplication1 \ ConsoleApplication1Test \ bin \ Debug \ ConsoleApplication1Test.dll”</i>            </p></td></tr><tr id="ff206c10" class="ijRowEven"><td id="2f920077"><p>nUnit的nunit-console.exe</p></td><td id="2d997aff"><p>测试运行程序可执行文件的路径。<br>示例： <i id="9ed37d35" index="noindex">“ C：\ Program Files（x86）\ NUnit 2.5.3 \ bin \ net-2.0 \ nunit-console.exe”</i>            </p></td><td id="6ba14104"><p>具有单元测试的dll文件的路径以及存储测试结果的xml文件的名称。<br>示例： <i id="6746ad70" index="noindex">“ C：\ Test progs \ ConsoleApplication1nUnit \ ConsoleApplication1nUnitTest.dll” /xml:C:\Temp\1.xml</i>            </p></td></tr><tr id="7a657a64" class="ijRowOdd"><td id="c141bb28"><p>用于MSTest的MSTest.exe</p></td><td id="f3acf9d6"><p>测试运行程序可执行文件的路径。<br>示例： <i id="88078126" index="noindex">“ C：\ Program Files（x86）\ Microsoft Visual Studio 9.0 \ Common7 \ IDE \ MSTest.exe”</i>            </p></td><td id="5f446bd1">参数：<ul class="list _ul"><li class="list__item" id="78bddaaf"><p>                        <i id="f376f5e4">/ noisolation-</i>在MSTest.exe进程中运行测试。</p></li><li class="list__item" id="2180e891"><p>                        <i id="91317146">/ testcontainer-</i>加载包含要运行的测试的文件。</p></li></ul>示例： <i id="fdc68aba" index="noindex">/ noisolation /testcontainer：“C:\Projects\ConsoleApplication1\ConsoleApplication1Test\bin\Debug\ConsoleApplication1Test.dll”</i>            </td></tr><tr id="5c87a538" class="ijRowEven"><td id="7a21f175"><p>xUnit的xUnit-console.exe</p></td><td id="1f670eb1"><p>测试运行程序可执行文件的路径。<br>示例： <i id="977b8821" index="noindex">“ C：\ Prog \ xunit-1.5 \ xunit.console.exe”</i>            </p></td><td id="185f8ffd"><p>具有单元测试的dll文件的路径以及存储测试结果的xml文件的名称。<br>示例： <i id="de715cea" index="noindex">“ C：\ Projects \ ConsoleApplication1 \ ConsoleApplication1xUnit \ bin \ Debug \ ConsoleApplication1xUnit.dll” / xml 1.xml</i>            </p></td></tr></tbody></table></div>    <p id="1e5fc688">生成的快照包含许多信息，这些信息不仅与您要分析的单元测试有关，而且与框架本身有关，这使得提取有关单元测试的信息变得很困难。如果您根本没有在快照中找到单元测试代码，请确保测试实际上正在运行。在某些情况下，由于权限不足，MSTest在运行测试之前会停止。在这种情况下，请尝试以管理员身份运行dotTrace。</p>                            <div class="last-modified" data-skip-index="skip">上次修改时间：2019年9月19日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Profiling_Guidelines__XBAP.html">Profile XBAP应用程序</a> <a class="navigation-links__next" href="Profile_Static_Method.html">配置文件静态方法</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>