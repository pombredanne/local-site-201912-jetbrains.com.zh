{"data":{"resource":{"html":"<p>Our counter component has local state, but doesn't respond to clicks. We\nneed to add event handlers, which we first introduced in\n<a href=\"../tsx_es6/\">TSX and ES6</a>.</p>\n<p>We'll do so, of course, by writing tests first. This requires a small\naddition to our flow of test writing, but once mastered, it's easy and useful.</p>\n<p>Like in previous steps, start with the following setup:</p>\n<ul>\n<li>\n<p><code class=\"language-text\">Counter.tsx</code> and <code class=\"language-text\">Counter.test.tsx</code> in side-by-side tabs</p>\n</li>\n<li>\n<p>Start the <code class=\"language-text\">Jest</code> run configuration</p>\n</li>\n<li>\n<p>Stop the <code class=\"language-text\">start</code> run configuration</p>\n</li>\n</ul>\n<h2>Code</h2>\n<p>The finished code for this tutorial step is\n<a href=\"https://github.com/JetBrains/pycharm_guide/tree/master/demos/tutorials/react_typescript_tdd/rich_events_and_testing\">in the repository</a>.</p>\n<h2>First Failing Test</h2>\n<p>Let's start with a failing test that clicks on the div and checks if the\nnumber is updated. In <code class=\"language-text\">Counter.test.tsx</code>, clone the first test and change\nit as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'should increment the count by one'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> wrapper <span class=\"token operator\">=</span> <span class=\"token function\">shallow</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>Counter<span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.counter span'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.counter'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">simulate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.counter span'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This test makes a component instance, checks its initial value, pretends to\nclick using <code class=\"language-text\">simulate</code>, then checks the final value.</p>\n<p><code class=\"language-text\">simulate</code>, what's that? It's the big idea in this tutorial step. You can\npretend to click, or dispatch other DOM events, even without a real\nbrowser or \"mouse\". JSDOM can \"simulate\" the event.</p>\n<p>This new test fails: the number didn't increment. Which is good!</p>\n<p>What's really good: that was dead simple. In one line we automated doing a\nclick and checking the result. Much more pleasurable than switching to the\nbrowser and clicking everything in your app to see if your change works\nwithout breaking the universe.</p>\n<h2><code class=\"language-text\">onClick</code> Handler</h2>\n<p>The component doesn't handle clicks. Let's head to <code class=\"language-text\">Counter.tsx</code> and add\na click handler:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n    <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>counter<span class=\"token punctuation\">\"</span></span> \n    <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n<span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>label<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Our test passes. But that's putting some logic into the component, plus\nwe discussed that arrow functions inside the <code class=\"language-text\">render</code> can have performance\nimpacts. Let's move it out into a click handler, which also makes that\nbehavior easier to test in isolation:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>div\n            className<span class=\"token operator\">=</span><span class=\"token string\">\"counter\"</span>\n            onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>label<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>label<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>span<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Advance By Ten with Shift-Click</h2>\n<p>Let's add one more feature: if you click with the Shift key pressed, you\nincrease by 10. Along the way, let's add more type information to better\nbenefit from TypeScript.</p>\n<p>The <code class=\"language-text\">handleClick</code> arrow function actually gets an event passed, which\nwe aren't using. Let's add it in:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This works but TypeScript gives a compiler error. Our <code class=\"language-text\">tsconfig.json</code>\ndisallows implicit <code class=\"language-text\">any</code>. </p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/pycharm/guide/static/56c138c1ac3e95629920aa5be02f80c7/8eeed/implicit_any.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 407px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 35.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABW0lEQVQozz2R6ZaiUAyEeZpulssOtrQ2Y6NHaTZRNnve/z2+CaDzo27l5KZykooW+SaeY2HbNo6thFcopbAsYYkttbJS1poXtqwVpvWKTUzTRCu/bXYbRXWKuV1imlPE5RCSHyI+P0MudcrxfCDLt+z/bNhu90RRjOO4uI5D4Ap8VxAQBiHa8fxDUdZUVUFT5fTXnLLMubUFQ1fS3hru95bm2lALyrqmKCqpaURXcC1PMpDHJkyEU7SrFE+/D9qup+1H+unBMI3c+p5unBae/v7SDYPkJ/px5D7MfwPjYxJdh+t5GIaxrmwYJoauk8Q2+w9b1vFRjrd4pevvGFKky/8smKE/eYmf+bnRjNlLbX5ms7OvgCrzaY4RXx+++CGNbee/aGH9KTaeWBqtB3kdSXsFb++SlILQ1skSRf4dyAE2JElCmqZkWcZuv8ML5QixRyC+BbG7DPOabsY//dnnjrSOlZ0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Implicit Any\"\n        title=\"\"\n        src=\"/pycharm/guide/static/56c138c1ac3e95629920aa5be02f80c7/8eeed/implicit_any.png\"\n        srcset=\"/pycharm/guide/static/56c138c1ac3e95629920aa5be02f80c7/4ca17/implicit_any.png 270w,\n/pycharm/guide/static/56c138c1ac3e95629920aa5be02f80c7/8eeed/implicit_any.png 407w\"\n        sizes=\"(max-width: 407px) 100vw, 407px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>That's easy enough to solve:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>But that's cheating. What type is that event? It's a <code class=\"language-text\">MouseEvent</code>. Let's\nput the correct typing on the argument:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">:</span> React<span class=\"token punctuation\">.</span>MouseEvent<span class=\"token operator\">&lt;</span>HTMLElement<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Ugh, that's a lot of keystrokes. Is it worth it? Let's show why. First, in\n<code class=\"language-text\">handleClick</code>, let's determine the value to increment by, first as a mistake:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">:</span> React<span class=\"token punctuation\">.</span>MouseEvent<span class=\"token operator\">&lt;</span>HTMLElement<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> inc <span class=\"token operator\">=</span> <span class=\"token number\">10</span> <span class=\"token operator\">?</span> event<span class=\"token punctuation\">.</span>shiftKey <span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> inc<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>TypeScript told us that we were trying to add a boolean to a number. Let's\nset the type of <code class=\"language-text\">inc</code> explicitly, instead of inferring it. Our first fix:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> inc<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span> <span class=\"token operator\">?</span> event<span class=\"token punctuation\">.</span>shiftKey <span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>That's closer. TypeScript now moves the error to the correct line:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Error:(28, 31) TS2365: Operator &#39;+&#39; cannot be applied to types \n&#39;number&#39; and &#39;boolean | 1&#39;.</code></pre></div>\n<p>We see that we have the order wrong on the ternary...a frequent, maddening,\neasy-to-miss error. </p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/pycharm/guide/static/643a26f90fc170b347282037cba9e8ed/8e7c5/wrong_ternary.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 581px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 31.325301204819272%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABRElEQVQY022R6XKCQBCEeRthQUBAzmWV9UJzVIw5NBGP93+IL4tJ/qTyo2umZ6amenqscZoTxhGuN8Qb+tiOwBEujuMghGBgO4abmm3faraJv3DE94z90+tzKx6nxFlIEgpUEbJUIXMZkI0jkiRlWpekSUJRKfKyQqoGWTeUhiulTT6lqhVpVhBFMVZPVFOiJxl5UXA/y9k0KXftktV8ym5ds9QKvWjRsxWbzT3tYsa00szrFllMkKUiMcLyosTa7nacLhc+T2c+uo5Dd2Z/7PjsjhzPJ46XK6frlf3HgZe3V9727zw+PeJ5Hp7rMeytMtF1XXw/wNKLBj3XRr5i+6A5PC9Yr1smjaaS0sCcWUtzYkWW57crevQLes/+woqNT34YGWMHN2MT30YmgjQOjIoho9GIIAjM04R5mnuL/Vy/8D98Adb0x8y2FzDeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Wrong Ternary\"\n        title=\"\"\n        src=\"/pycharm/guide/static/643a26f90fc170b347282037cba9e8ed/8e7c5/wrong_ternary.png\"\n        srcset=\"/pycharm/guide/static/643a26f90fc170b347282037cba9e8ed/4ca17/wrong_ternary.png 270w,\n/pycharm/guide/static/643a26f90fc170b347282037cba9e8ed/22492/wrong_ternary.png 540w,\n/pycharm/guide/static/643a26f90fc170b347282037cba9e8ed/8e7c5/wrong_ternary.png 581w\"\n        sizes=\"(max-width: 581px) 100vw, 581px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Here's the correct version:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> inc<span class=\"token punctuation\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>shiftKey <span class=\"token operator\">?</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Our click-handler test now fails, though. It needs a fake event object passed\ninto <code class=\"language-text\">handleClick</code>, with <code class=\"language-text\">shiftKey</code> in the object. Let's fix that test,\nthen clone to cover the with-shift case:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'should increment the count by one'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> wrapper <span class=\"token operator\">=</span> <span class=\"token function\">shallow</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>Counter<span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.counter span'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.counter'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">simulate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>shiftKey<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.counter span'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'should shift-click increment the count by ten'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> wrapper <span class=\"token operator\">=</span> <span class=\"token function\">shallow</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>Counter<span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.counter span'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.counter'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">simulate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>shiftKey<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.counter span'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'10'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Our tests pass. We have a test to handle the new shift-click implementation.\nMoreover, we have type information to help us when we pass in the wrong data,\neven from a test.</p>\n<p>As we have been doing, give this a try in the browser by firing up the\n<code class=\"language-text\">start</code> run configuration and clicking, then shift-clicking, in the browser.\nWhen done, terminate the <code class=\"language-text\">start</code> process.</p>","id":"cfb5f195-6fa2-5379-828d-2dc0f8f13d91","fields":{"slug":"/tutorials/react_typescript_tdd/rich_events_and_testing/"},"frontmatter":{"type":"tutorialstep","date":"July 7th, 2017","title":"Rich Events and Testing","subtitle":"Add event handling to a stateful class component by writing tests during development.","author":"pauleveritt","technologies":["react","typescript","jest"],"topics":[],"leadin":null,"seealso":null,"longVideo":{"url":"https://www.youtube.com/watch?v=2gvjVVEtkfc","poster":{"publicURL":"/pycharm/guide/static/poster_long-b5dd8e0d8b31cf3c3d96c05d3f3515a4.png","childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAB30lEQVQoz4VS2XKjQAzka2xjYIA5ue8YMHZS2ez//0qvNKna8r5kH7okNKhH6p5Aao04CiHiK+JrhCiKcKWYJAmESBHHMSGBsg5aSRhrCRqFzaB1CqVzgqQ8Q54mCMZ5wn2f8X4seB4rjvuG++Md87RQUw1jHKSUUMYSYQ7nLKzTKF0Oa4jUSEiV0n8Kli4LumHEOA3Ybxwn9OOIpq2gqPlyCWnaK9KUGgpHNZ5EexImU0SUSYEsE1AypzOFQGqL8/mCKDyjrRR6QmU0RYvSpgjDkAhpktLRBAbDOKDvKnSNRlUrNDWTKzj7jUDTSqyRSGLSIEYSR/QtKHIt8hOyltoY5FKRfs4TKJkhzVKqpV4KQxoWhUGgtIEiIpURYS69CTwVE4UENokvZDLO+YzrfB5dvw1khCGZSkaShqzbgrafULUj6rantWZ0/Yi2G2itFkVZo6iavyhf8tda3XYIhuWGYX+iXQ4UwwpXtd4t65yPaZZBkCk/gU1LhKCeAsE0L9geO359/cbxeJJzGqfTiRy+ePgV/wNe/0w9RVEiaPoBy7bh4/MLx/PDi846CroxSYR/4P9C+Glewf9yT1nVCJbbhnW/Y93uYD0b0u0nDPTgJ5JpfmOsPjLHQvnbuuMPLMxkvu5lP7cAAAAASUVORK5CYII=","aspectRatio":1.7777777777777777,"src":"/pycharm/guide/static/b5dd8e0d8b31cf3c3d96c05d3f3515a4/c2a4f/poster_long.png","srcSet":"/pycharm/guide/static/b5dd8e0d8b31cf3c3d96c05d3f3515a4/a3004/poster_long.png 250w,\n/pycharm/guide/static/b5dd8e0d8b31cf3c3d96c05d3f3515a4/90fcb/poster_long.png 500w,\n/pycharm/guide/static/b5dd8e0d8b31cf3c3d96c05d3f3515a4/c2a4f/poster_long.png 1000w,\n/pycharm/guide/static/b5dd8e0d8b31cf3c3d96c05d3f3515a4/062d3/poster_long.png 1280w","sizes":"(max-width: 1000px) 100vw, 1000px"}}}}}},"tutorials":{"edges":[{"node":{"fields":{"slug":"/tutorials/react_typescript_tdd/"},"frontmatter":{"title":"React, TypeScript, and TDD","steps":["project_setup","project_cleanup","testing","nodejs_debugging","chrome_debugging","tsx_es6","functional_components","props","class_props","class_state","rich_events_and_testing","presentation_components"]}}}]},"tutorialsteps":{"edges":[{"node":{"fields":{"slug":"/tutorials/react_typescript_tdd/chrome_debugging/"},"frontmatter":{"title":"Debugging TSX With Chrome"}}},{"node":{"fields":{"slug":"/tutorials/react_typescript_tdd/class_state/"},"frontmatter":{"title":"Model Class State With TypeScript Interfaces"}}},{"node":{"fields":{"slug":"/tutorials/react_typescript_tdd/class_props/"},"frontmatter":{"title":"Class Components With Props"}}},{"node":{"fields":{"slug":"/tutorials/react_typescript_tdd/functional_components/"},"frontmatter":{"title":"Functional React Components in TypeScript"}}},{"node":{"fields":{"slug":"/tutorials/react_typescript_tdd/nodejs_debugging/"},"frontmatter":{"title":"Debugging During Testing With NodeJS"}}},{"node":{"fields":{"slug":"/tutorials/react_typescript_tdd/project_cleanup/"},"frontmatter":{"title":"Project Cleanup"}}},{"node":{"fields":{"slug":"/tutorials/react_typescript_tdd/project_setup/"},"frontmatter":{"title":"Project Setup"}}},{"node":{"fields":{"slug":"/tutorials/react_typescript_tdd/rich_events_and_testing/"},"frontmatter":{"title":"Rich Events and Testing"}}},{"node":{"fields":{"slug":"/tutorials/react_typescript_tdd/props/"},"frontmatter":{"title":"Sharing Props Using Type Information"}}},{"node":{"fields":{"slug":"/tutorials/react_typescript_tdd/testing/"},"frontmatter":{"title":"Testing"}}},{"node":{"fields":{"slug":"/tutorials/react_typescript_tdd/presentation_components/"},"frontmatter":{"title":"Presentation and Container Components"}}},{"node":{"fields":{"slug":"/tutorials/react_typescript_tdd/tsx_es6/"},"frontmatter":{"title":"TSX and ES6"}}}]},"authors":{"edges":[{"node":{"fields":{"slug":"/authors/pwe/"},"frontmatter":{"title":"Paul Everitt","label":"pauleveritt","headshot":{"publicURL":"/pycharm/guide/static/headshot-844cb975614ea03b2ca3b25e5e3ee531.jpg","childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwT/xAAXAQEBAQEAAAAAAAAAAAAAAAADAgAB/9oADAMBAAIQAxAAAAGLZWJOZDHrzjd2FT//xAAcEAEAAgIDAQAAAAAAAAAAAAABAgMAERIhIjH/2gAIAQEAAQUCp1KVsQH7Ug2dZsx8jJ5BvP/EABcRAAMBAAAAAAAAAAAAAAAAAAEQIUH/2gAIAQMBAT8BAixf/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQAQEf/aAAgBAgEBPwHEuF//xAAaEAACAgMAAAAAAAAAAAAAAAAAARARIjEy/9oACAEBAAY/AqMXDRzRotQz/8QAGxAAAwEBAAMAAAAAAAAAAAAAAAERITFBUWH/2gAIAQEAAT8hTG8U6sRsPwrVhFVMRDUwluiVHI+URp7P/9oADAMBAAIAAwAAABBUPzz/xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQMBAT8QJbZC6tv/xAAXEQEBAQEAAAAAAAAAAAAAAAAAASFh/9oACAECAQE/EGoSxyf/xAAeEAEAAgICAwEAAAAAAAAAAAABABEhMVFhQXGRof/aAAgBAQABPxAggaHh81G1RFNov0gWVlbWxbXetRkggVXdBiJD9ZhDaYF9MyBQ6+Y+hkph6J//2Q==","aspectRatio":1,"src":"/pycharm/guide/static/844cb975614ea03b2ca3b25e5e3ee531/7ef6a/headshot.jpg","srcSet":"/pycharm/guide/static/844cb975614ea03b2ca3b25e5e3ee531/80b6c/headshot.jpg 250w,\n/pycharm/guide/static/844cb975614ea03b2ca3b25e5e3ee531/7ef6a/headshot.jpg 400w","sizes":"(max-width: 400px) 100vw, 400px"}}}}}},{"node":{"fields":{"slug":"/authors/wht/"},"frontmatter":{"title":"Bill Tucker","label":"wht","headshot":{"publicURL":"/pycharm/guide/static/headshot-5772649565abb3a7a67f9dbf9afba0c5.png","childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsSAAALEgHS3X78AAAFOUlEQVQ4y12U2U9jVRzH778wRl+MyzjAbJTCDFA6UAbosAxrodCW0tvbhVK60n1jClJgyjplpiyzu4xb4iSauERjog9Goy8mRs08zIMx+uSD/gfm42k1E+PDN+fm5nc+5/tbzpHGp0wYzRampq1YZmxMV2SzYVdkXM4ZFJsZuzyN7FCwKXZmZFtVVpuIt05jspiZNE0ybjQwahhBqkBmZAW7w4msOJmd8xCPzJOPyESUISb7tYzqtcxMjuB2zODyzKI4HSJeEfGy2DvzL1gYm5pAkp0unG5PVbF4hN2raXIRBx5zL3pNPepTJ+jpaKWjpZHWs7XYzRPMzXtxe9w4XA4Bt2OzVxxPY542IbnnvCLAj9cf5Pb+GrmglWmDns5WFaqaF7hQfxJd01mef+YpVC89h76lgYmhfrHHg8c7i2vWWYXKSiVTK5IvGGI+GCa3mCEXczF6qQ39hXNM6M7jH+oiPTlI3HCJ8TYVPQ216BrEAY1nGB8ZJBAKVKFuTyXLShlkpHA0RkhoaXmRQsaLTtNEl9iQnejnmmLkzZCTjxdDvJvysGzuw9R5DqOo6Yi+A5/fiy/oq7qdnXNXoVI0mSKWypBJRxnr06FpUqH068gb+ygrk3ySDfDVepKfyqs8ulXk89Ii7jE9A50aPCLdcDSMX0C9vrkqVEpksmSu5AmIn3UvPU+bAM4NXmRl6jK3XdN8mlvgu80lfn9wxF+fvQdff8gbmzmmBruxW01EYguEFoJPoFJuabkKXCoUGBnqo1V9BmefltnedibbWwj2XuAtzxQF4wA3Ay4eP9hhP2ZHsRjwzzkIL4RYEC5D4UAVKi0VVsmvFFheXcXnkTl/uoaJDhW9jSdpqjnOgLqGDyI23Do1js5WPsi7eTvrImkaYS0mYPEYkejCP1DhVFpZv8rLq2usbG6Sd8lYNGpChm7RWR1zPc042tR8v1Xg0f4qbwUt/Pxgg1/e2ecjr43ygo9wKkksFq2mHo6EkFaLGxTW11m7tktyyoi7RUV4tIdFMYthfRtDZ+oomsb4cjHGo1KBP997nd9e2+OHl+NsZZOEhMNYIlYFVlxKV7e2Wd/c4OruLsuVAnc1ExzuInG5G/9FLYbGelbHh/l2bYkfS0X+ePgav75a4pd7JfLpBJFEBRglKm5ZBSpt7u6wsbP9jzaLZGwTBC7r8OvbMbWokVub2Rkb5aEo+JHDzONbu/x8e4sbKVE/AUsk/wfc2SuxXbrGVgUstFZcx9nfibuzBUXcmGCnlptiPL5dyYoxMvHFWpJvdvMkRVfj6RSJVIL4f6DStRvX2b2+RwVccbstvgOKmYHGU9hFV9N9Xbwf9PL4aIeHuSD7XgsPMh7SiXnSuSwpkXYiFX8Clfb2y5TKN6iAd4TTHbFeSUXpUtVyUX2SHrFONtezbBkiM9XLumwgnxxjY17PYi5NMpt5Aq0Cy0eH3Dg84PpBWUD32Ds4IJsOMiyerovqOprqnqOx7lkM2rNERsQoxYYJu7UcuTRsh8bICJfxtFClOZWUD2/f4uDmkQAecHjnLqmkH237CcYuNNB7/ox4A4/TfvpFDN1qRr06uidUFK3NbCqtrFvPUfQNi0clQDKdFEMeR7p59w4HAnT/lTtsLMdo1hyn5sQxjNp69E21XKo/wcjlRgbjXbSa1Th7T1L2tJM1NrAwfJYVS6OAayhFxliKzyLduneP+4dFyosyfZdOc7z+aepeOIZNXDVFyGrSMpjsRiM3MaSvJTOupmhvwddfy/zAKTJGNUmDcC2f52C+g78B0GmUF3puLDAAAAAASUVORK5CYII=","aspectRatio":0.9515859766277128,"src":"/pycharm/guide/static/5772649565abb3a7a67f9dbf9afba0c5/e29da/headshot.png","srcSet":"/pycharm/guide/static/5772649565abb3a7a67f9dbf9afba0c5/a3004/headshot.png 250w,\n/pycharm/guide/static/5772649565abb3a7a67f9dbf9afba0c5/90fcb/headshot.png 500w,\n/pycharm/guide/static/5772649565abb3a7a67f9dbf9afba0c5/e29da/headshot.png 570w","sizes":"(max-width: 570px) 100vw, 570px"}}}}}}]},"technologies":{"edges":[{"node":{"fields":{"slug":"/technologies/angular/"},"frontmatter":{"label":"angular"}}},{"node":{"fields":{"slug":"/technologies/cra/"},"frontmatter":{"label":"cra"}}},{"node":{"fields":{"slug":"/technologies/emmet/"},"frontmatter":{"label":"emmet"}}},{"node":{"fields":{"slug":"/technologies/enzyme/"},"frontmatter":{"label":"enzyme"}}},{"node":{"fields":{"slug":"/technologies/jest/"},"frontmatter":{"label":"jest"}}},{"node":{"fields":{"slug":"/technologies/nodejs/"},"frontmatter":{"label":"nodejs"}}},{"node":{"fields":{"slug":"/technologies/pytest/"},"frontmatter":{"label":"pytest"}}},{"node":{"fields":{"slug":"/technologies/typescript/"},"frontmatter":{"label":"typescript"}}},{"node":{"fields":{"slug":"/technologies/react/"},"frontmatter":{"label":"react"}}}]},"topics":{"edges":[{"node":{"fields":{"slug":"/topics/debugging/"},"frontmatter":{"label":"debugging"}}},{"node":{"fields":{"slug":"/topics/editing/"},"frontmatter":{"label":"editing"}}},{"node":{"fields":{"slug":"/topics/database/"},"frontmatter":{"label":"database"}}},{"node":{"fields":{"slug":"/topics/ide/"},"frontmatter":{"label":"ide"}}},{"node":{"fields":{"slug":"/topics/navigation/"},"frontmatter":{"label":"navigation"}}},{"node":{"fields":{"slug":"/topics/navigationbar/"},"frontmatter":{"label":"navigationbar"}}},{"node":{"fields":{"slug":"/topics/python/"},"frontmatter":{"label":"python"}}},{"node":{"fields":{"slug":"/topics/javascript/"},"frontmatter":{"label":"javascript"}}},{"node":{"fields":{"slug":"/topics/running/"},"frontmatter":{"label":"running"}}},{"node":{"fields":{"slug":"/topics/speedsearch/"},"frontmatter":{"label":"speedsearch"}}},{"node":{"fields":{"slug":"/topics/vcs/"},"frontmatter":{"label":"vcs"}}},{"node":{"fields":{"slug":"/topics/web/"},"frontmatter":{"label":"web"}}},{"node":{"fields":{"slug":"/topics/testing/"},"frontmatter":{"label":"testing"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false}}