<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>为您的语言构建独立的IDE-帮助|帮助MPS</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Building+standalone+IDEs+for+your+languages.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索MPS帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected>默认</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_mac_os_x" data-group="primary">Eclipse（Mac OS X）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_mac_os_x" data-group="primary">Mac OS X</option><option value="primary_mac_os_x_10.5_" data-group="primary">Mac OS X 10.5以上</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_default" data-group="secondary">默认</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_jbuilder" data-group="secondary">JBuilder的</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5以上</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="building-standalone-ides-for-your-languages.xml" data-toc="Building+standalone+IDEs+for+your+languages.html">为您的语言构建独立的IDE</h1>   <h2 id=""></h2>   <h2 id="introduction">介绍</h2>   <p id="a63b347b">术语独立IDE是指IDE的精简版本，其中仅包含给定业务目的所需的那些工件。独立的IDE提供了一种将DSL分发给最终用户的便捷方法，最终用户将能够使用语言，包括由语言设计人员在舒适的专用IDE中编写的所有IDE支持，重构和代码分析。所有与分心语言设计相关的功能和不必要的语言都将被删除。</p>   <p id="f5059351">设计语言之后，MPS可以帮助您构建精简的MPS版本，其中仅包含使用这些特定于域的语言所必需的工件。可以删除或自定义MPS的各个方面，以为给定的用户组提供自定义的用户体验。本文介绍了如何。</p>   <p id="b325b0a4">特别是，可以定制MPS的以下方面：</p>   <ul class="list _ul"><li class="list__item" id="9347298e"><p>各种图标，标语，初始屏幕和图像</p></li><li class="list__item" id="7a2e7b92"><p>帮助网址</p></li><li class="list__item" id="c00ffe97"><p>用户可用的语言集</p></li><li class="list__item" id="bfa48e74"><p>MPS中可用的插件集</p></li></ul>   <h2 id="processoverview">工艺概述</h2>   <p id="36303708">要构建MPS的自定义RCP版本，您必须创建一个包含所谓的<b id="996d8a63">build script</b>的解决方案。使用MPS的构建语言编写构建脚本，该脚本针对构建RCP应用程序（以及IntelliJ和MPS插件）进行了优化。在为该构建脚本运行生成器时，MPS会生成一个用于创建实际RCP分发的<i id="47b2f752">ant</i>文件。</p>   <h2 id="buildinganexamplercpbuild">构建示例RCP构建</h2>   <p id="050583be">在本文档中，我们描述了与MPS发行版捆绑在一起的机器人Kaja示例的RCP构建脚本的开发。您可以在MPS中打开项目，然后按照此处说明进行操作。</p>   <h3 id="creatingthesolutionandthebuildscript">创建解决方案和构建脚本</h3>   <h4 id="thewizardway">向导方式</h4>   <p id="9dcbe56f">创建必要的构建脚本的首选方法是在当前项目上运行“ <b id="74d2504c">构建解决方案向导</b> ”。您可以从“ <b id="e9a959b7">项目视图”</b>工具窗口中启动它：</p>   <p id="2819b7cf">      </p><figure><img alt="sa1" title="sa1" src="/help/img/idea/2019.2/sa1.png" id="1ee9a716" width="1160" height="548"></figure>   <p></p>   <p id="bee6bce3">该向导将创建一个新的解决方案和一个模型来保存脚本并设置必要的导入以及使用的语言。您可以指示向导重用现有的解决方案或模型，而不是创建新的解决方案或模型。然后，您需要选择<b id="a69b657b">Standalone IDE</b>选项：</p>   <p id="5e152a31">      </p><figure><img alt="sa2" title="sa2" src="/help/img/idea/2019.2/sa2.png" id="1d91770e" width="1136" height="792"></figure> <p></p>   <p id="96a25f5c">      </p><figure><img alt="sa3" title="sa3" src="/help/img/idea/2019.2/sa3.png" id="505fc7ca" width="1134" height="788"></figure>   <p></p>   <p id="dce3476f">在向导的最后一页上，取消选择不应包含在IDE中的模块。通常，您跳过沙盒模块，保留语言以及插件和运行时解决方案。</p>   <p id="e9417705">现在，新解决方案应在“ <b id="7bd1e955">项目视图”中</b>列出，并应包含两个新的构建脚本：</p>   <p id="997203f4">      </p><figure><img alt="sa4" title="sa4" src="/help/img/idea/2019.2/sa4.png" id="2e6121a2" width="1226" height="576"></figure>   <p></p>   <p id="e47deb93">依赖项也已正确设置：</p>   <p id="9cf6027e">      </p><figure><img alt="sa5" title="sa5" src="/help/img/idea/2019.2/sa5.png" id="4222da60" width="926" height="284"></figure>   <p></p>   <p id="879b4d52">      </p><figure><img alt="sa6" title="sa6" src="/help/img/idea/2019.2/sa6.png" id="3e695207" width="914" height="298"></figure>   <p></p>   <h4 id="themanualway">手动方式</h4>   <p id="f1b051fa">另外，您可以手动创建脚本。您必须创建一个内部带有新模型的新解决方案。在模型中，配置使用的语言</p>   <ul class="list _ul"><li class="list__item" id="a91f2495">         <i id="83b867da">jetbrains.mps.build</i>      </li><li class="list__item" id="31b80908">         <i id="5b4c92b9">jetbrains.mps.build.mps</i>      </li></ul>   <p id="1741285f">还要导入<i id="b5768fb9">jetbrains.mps.ide.build</i>模型。您现在可以在模型中创建一个新的<i id="77f96c64">构建项目</i> （名称令人困惑：它实际上不是一个新的构建<b id="693db678">项目</b> ，只是一个构建脚本）。</p>   <p id="9f9677cd">      </p><figure><img alt="sa7" title="sa7" src="/help/img/idea/2019.2/sa7.png" id="08e69f3d" width="1188" height="468"></figure>   <p></p>   <h3 id="investigatingthebuildscripts">研究构建脚本</h3>   <p id="b68643c8">构建脚本包含几个部分，我们可以在一个空的构建脚本上观察这些部分：</p>   <p id="fe0eb0da">      </p><figure><img alt="sa15" title="sa15" src="/help/img/idea/2019.2/sa15.png" id="aa4ba038" width="2338" height="1216"></figure>   <p></p>   <p id="bf6333de">让我们看一下构建脚本的各个部分：</p>   <ul class="list _ul"><li class="list__item" id="50bbb1a5"><p>         <b id="b2b654d4">基本目录</b>基本目录定义相对于所有其他路径的绝对路径。默认情况下，这是将在其中生成结果<i id="8dbe8061">ant</i>文件并在其中执行该目录的目录。</p></li></ul>   <ul class="list _ul"><li class="list__item" id="ca288ad8"><p>         <b id="0ca3096e">使用插件</b>可以通过插件扩展构建语言本身（请注意，这些<b id="cf64b6af">不是</b> MPS本身的插件；稍后将对其进行配置）。这些插件提供了其他构建语言语法。通常，需要<i id="a60a6180">java</i>和<i id="95b33230">mps</i>插件。我们将在下面使用这些插件提供的语法。</p></li></ul>   <ul class="list _ul"><li class="list__item" id="07bbb646"><p>         <b id="a72e5c2e">宏</b>宏本质上是名称-值对。在“宏”部分中，定义了这些名称并指定了值。在构建脚本的其余部分中，将使用这些宏变量。MPS支持两种宏： <i id="f1256b6a">var</i>宏是字符串，可以分配任何值。 <i id="bdeb42d2">文件夹</i>表示相对于上面定义的基本目录和/或基于其他宏的路径。请注意，MPS为<i id="fc988ca3">文件夹</i>宏中的路径组件提供代码完成。</p></li></ul>   <ul class="list _ul"><li class="list__item" id="edede16a"><p>         <b id="4d61ee7a">依赖关系</b>本节定义对其他构建脚本的依赖关系。MPS捆绑了一组构建脚本（例如<i id="c85f5907">buildStandalone</i> ， <i id="5bffd4c2">buildWorkbench</i>或<i id="78031176">buildMPS</i> ）。通过建立对其中任何一个的依赖关系，可以在引用构建脚本中使用该引用构建脚本中定义的结构。例如，可以使用在引用的构建脚本中定义的宏。</p></li></ul>   <ul class="list _ul"><li class="list__item" id="bcb5d28d"><p>         <b id="058ea447">项目结构</b>本节定义了要构建的RCP应用程序的实际内容。这样的内容可能是MPS模块（语言，解决方案，devkit），Java库，IDEA品牌和插件。</p></li></ul>   <ul class="list _ul"><li class="list__item" id="d9a3441a"><p>         <b id="c2a4b27d">默认布局</b>本节定义输出的文件，它创建新RCP发行版的目录，文件和JAR结构。它引用并包括在项目结构部分以及该项目所依赖的其他构建脚本中定义的工件。</p></li></ul>   <p id="e8ecb841">该向导创建了两个构建脚本，每个脚本都有各自的用途：</p>   <ol class="list _decimal"><li class="list__item" id="c6d7a74a"><p>         <b id="d81ccdfc">Kajak-</b>生成模块，编译生成的源并将其打包到IDEA插件（用于IntelliJ IDEA平台的插件）中</p></li><li class="list__item" id="62a05b5a"><p>         <b id="08f72a74">KajakDistribution-</b>根据<b id="5222da56">Kajak</b>创建的艺术品创建特定于平台的发行版      </p></li></ol>   <h3 id="editingthebuildscripts">编辑构建脚本</h3>   <p id="602ef571">让我们首先关注<b id="5298a0d4">Kajak</b>构建脚本。</p>   <h4 id="nameofthegeneratedbuildscript">生成的构建脚本的名称</h4>   <p id="81bff480">从每个MPS构建脚本生成的ant xml文件的默认名称为<i id="fee90c6b">build.xml</i> 。建议更改名称，以免多个构建脚本之间发生冲突：</p>   <p id="b1860218">      </p><figure><img alt="sa8" title="sa8" src="/help/img/idea/2019.2/sa8.png" id="11faaef8" width="1008" height="286"></figure>   <p></p>   <p id="9590333f">      </p><figure><img alt="sa9" title="sa9" src="/help/img/idea/2019.2/sa9.png" id="3e0b5770" width="1070" height="308"></figure>   <p></p>   <h4 id="basedirectory">基本目录</h4>   <p id="0a814c1d">指定将在其中生成构建脚本的目录。</p>   <h4 id="useplugins">使用插件</h4>   <p id="d4f6d66c">构建语言将其功能打包到插件中。构建脚本中<i id="1959cf8f">使用的插件</i>在其<i id="1959cf8f">使用插件</i>部分列出。</p>   <ul class="list _ul"><li class="list__item" id="be43f375"><p>         <b id="66f7cf1f">java-</b>包含编译Java源代码的功能</p></li><li class="list__item" id="a4b9f022"><p>         <b id="56e19510">mps-</b>包含生成MPS模型的功能</p></li><li class="list__item" id="a267fd9c"><p>         <b id="e4c10ace">module-</b> <i id="68a0af40">tests-</i>添加了在构建脚本中运行测试的功能（您需要导入<i id="68a0af40">jetbrains.mps.build.mps.tests</i>语言）</p></li></ul>   <p id="3b8daf80">该向导已经为我们预先设置了<b id="e7dc424b">Java</b>和<b id="7c6e75b8">mps</b> 。</p>   <h4 id="macros">巨集</h4>   <p id="588d5a02">我们应该定义几个宏以在脚本中重用。前两个代表我们将在构建中使用的字符串变量，文件夹集代表MPS本身的目录以及两个存储MPS语言的根目录。这些语言将成为RCP发行版的一部分。请注意所有这些文件夹如何相对于基本目录。</p>   <div class="code-block" data-lang="none">宏：var date = date 20150422 var build.number = Kajak-139。SNAPSHOT文件夹mps_home =。/ ../ ../ ../ ../ Applications / MPS 3.2.app/Contents</div>   <p id="7faf3619">请注意，您可以保留未定义的宏（即仅指定名称），然后在“ <b id="2bf2f426">项目设置”</b>对话框的“ MPS <b id="25c60032">路径变量”</b>部分中定义它，或者在使用属性定义调用<i id="4f9d1701">ant</i>时定义它：</p>   <div class="code-block" data-lang="none">ant -Dsome.variable = a.value</div>   <h4 id="dependencies">依存关系</h4>   <p id="022cd3e6">接下来，我们定义依赖关系。依赖性表示此脚本还依赖于其他构建脚本和平台。</p>   <p id="facc246b">我们需要依赖于<i id="42838094">mpsStandalone</i> （它代表独立MPS安装的最小集合）以及可选的<i id="28e10d9f">mpsMakePlugin</i> ，它们可以在独立IDE中创建构建脚本， <i id="3fe647b0">mpsDebuggerPlugin</i> （因为机器人Kaja示例需要调试器和Java执行集成）和mps <i id="9ab5dbe3">ExecutionPlugin</i> （因为一种机器人Kaja示例语言使用执行框架来运行外部可执行文件。大多数RCP可能仅使用mps <i id="1f4a527a">Standalone</i> 。</p>   <div class="code-block" data-lang="none">依赖项：mpsStandalone（工件位置$ mps_home）mpsMakePlugin（工件位置$ mps_home / plugins）mpsDebuggerPlugin（工件位置$ mps_home / plugins）mpsExecutionPlugin（工件位置$ mps_home / plugins）</div>   <p id="cfde9b8c"><i id="0db9a1c8">工件位置</i>指定了从何处复制工件。构建脚本通过复制现有MPS安装中的代码来工作，因此您不必检出MPS源。因此， <i id="90f6d8d1">工件位置</i>应指向MPS主目录。</p>   <h4 id="projectstructure">项目结构</h4>   <p id="7921e70c"><b id="d2bf6a6c">使用插件</b>部分中指定的<b id="d2bf6a6c">插件会</b>影响此处可用的选项。启用<b id="5bb45593">java</b> ， <b id="a7038cbd">mps</b>和<b id="51bdb7e4">module-tests</b>插件，我们得到以下插件：</p>   <ul class="list _ul"><li class="list__item" id="0ec809a3"><p>         <b id="3c4b12b1">生成器选项</b> -配置生成器</p></li><li class="list__item" id="62161713"><p>         <b id="c146d4e4">创意品牌</b> -配置独立IDE的视觉外观，例如图标，初始屏幕，URL，图像等</p></li><li class="list__item" id="bef03197"><p>         <b id="509bf459">创意插件</b> -详细信息以将生成的工件连接到底层IntelliJ IDEA平台</p></li><li class="list__item" id="4ac913ce"><p>         <b id="250aab7e">Java库</b> -将jar和类分组，以便可以将它们称为一个单元</p></li><li class="list__item" id="7a6427cf"><p>         <b id="637c1f09">Java模块</b> -对Java源进行分组，因此可以将它们称为一个单元</p></li><li class="list__item" id="610aba33"><p>         <b id="c7403360">Java选项</b> -配置Java编译器过程</p></li><li class="list__item" id="c02051d4"><p>         <b id="fade3f3c">mps group-将</b> MPS模块（解决方案，语言，devkits）分组，以便可以将它们称为一个单元</p></li><li class="list__item" id="396f4056"><p>         <b id="dcdf21d5">解决方案</b> -代表解决方案</p></li><li class="list__item" id="7df63e2f"><p>         <b id="0b334e30">语言</b> -代表一种语言</p></li><li class="list__item" id="68b0b6ad"><p>         <b id="2068c88b">devkit-</b>代表一个devkit</p></li></ul>   <p id="8231d1c1">在项目结构中，我们从品牌化开始。<i id="de4b0c3d">构思品牌</i>部分支持定义各种图标，初始屏幕等。一个好主意是从MPS发行版中获取这些图片并修改图片以适合您的需求，同时保留大小和透明度值。您还可以指定帮助文件和更新网站。</p>   <div class="code-block" data-lang="none">想法品牌Kajak代号Kajak公司<no company="">版本1.0，eap假全名Kajak内部版本号$ {build.number}，日期$ {date}图标16x16 ./icons/MPS16.png 32x32 ./icons/MPS32.png 32x32不透明./icons /MPS32.png 128x128 <no icon128="">初始屏幕./icons/splash.png文本颜色002387关于屏幕./icons/about.png对话框图像./icons/dialogImage.png欢迎屏幕字幕./icons/caption.png口号./icons/slogan .png徽标./icons/logo.png <no updatewebsite="">插件<no plugins="">什么是新的<no whatsnew=""><no stats=""><no help="">反馈网址<no feedbackurl=""> 
</no></no></no></no></no></no></no></no></div>   <p id="4bc2cb02">在示例中，我们已经复制了MPS图标进入<i id="dea180e6">./icons</i>文件夹，并改变了他们因此不改变名称-这就是为什么大多数人开始与<i id="42e62455">国会议员</i> 。</p>   <p id="768b8724">接下来，我们定义一个<i id="44aa3621">想法插件</i> ，其中包含要捆绑的语言和解决方案。<i id="50a0a357">创意插件</i>是构建MPS的IDEA平台的插件。</p>   <div class="code-block" data-lang="none">想法插件Kajak名称Kajak简称（文件夹）名称Kajak描述<no description="">版本1.0 <<没有供应商>>内容：Kajak依赖项：jetbrains.mps.core << ... >></no></div>   <p id="223cbdb0">您可以定义名称和版本，对其他插件的依赖关系以及实际内容。每当RCP包含语言时，您都将需要<i id="8063171f">jetbrains.mps.core，</i>因为它提供了诸如<i id="ba992f03">BaseConcept</i>或<i id="b05661ab">INamedConcept</i>接口之类的东西。内容中的<i id="a6f85706">Kajak</i>条目是对下面定义的<i id="7d88c5f1">mps组</i>的引用。<i id="7531a196">mps组</i>是一组MPS工件。由于我们已经包含了<i id="9c6b2dbe">mps</i>插件（在构建脚本的最顶部），因此我们可以使用特定于MPS的语言构造。 <i id="b013ab8b">mps组</i>就是一个例子。</p>   <p id="934ac84f">让我们看看<i id="44aa147e">Kajak</i>小组。它引用了一组语言和解决方案。<i id="2e3962bf">语言</i>参考指向MPS项目中定义的语言。组中的语言引用由名称（必须与实际语言的名称相同）和指向相应<i id="0865718f">mpl</i>文件的指针组成。输入它的最简单方法是从<i id="a2e03cb2">mpl</i>文件的路径开始，然后使用<i id="3db48bbb">来自文件</i>意图的<i id="3db48bbb">所需加载信息</i> （ <b id="a88726c2">Alt + Enter</b> ）来调整引用的名称。</p>   <div class="code-block" data-lang="none">mps组Kajak解决方案jetbrains.mps.samples。从./solutions/JavaKajak/JavaKajak.msd语言jetbrains.mps.samples加载JavaKaja。KajaAndOr从./languages/KajaAndOr/KajaAndOr.mpl语言jetbrains.mps.samples加载。来自./languages/Kajak/Kajak.mpl语言jetbrains.mps.samples的Kaja加载。来自./languages/KajaSceneConstruction/KajaSceneConstruction.mpl的KajaSceneConstruction加载</div>   <p id="82ada7ac">请注意，组必须包含所有语言的及物闭包。例如，如果您引用的语言A引用了另一种语言B，则B中也必须包含B。这是有道理的，因为否则，由于无法解决依赖关系，最终的RCP应用程序将无法运行。如果缺少一种语言，则将在构建脚本中报告错误（红色波浪线）。添加所需的语言后，您可能必须重新运行针对该语言的<i id="ccb1d7a4">文件</i>意图（ <b id="55812634">Alt + Enter</b> ） <i id="ccb1d7a4">所需</i>的<i id="ccb1d7a4">加载信息，</i>并出现错误，以使其“注意到”某些更改。</p>   <p id="98b109b8">除了语言之外，您还可以使用<i id="627e5e3d">解决方案</i>构造引用解决方案，并使用<i id="6a3c30c0">devkit</i>构造引用<i id="6a3c30c0">devkit</i> 。</p>   <aside class="tip sideblock" rel="98b109b8" id="6528439a" data-title="">      <p id="c8892014"><b id="ea13257d">Inspector</b>工具窗口包含有关所选语言，解决方案或devkit的依赖项的更多详细信息。</p>   </aside>   <h4 id="defaultlayout">默认布局</h4>   <p id="4c088e4e">该布局构造了RCP发行版的目录和文件结构。它从各种来源（尤其是上一部分中讨论的项目结构）复制文件。如果需要，它还会编译，构建和打包这些文件。它还可以引用此脚本所依赖的其他构建脚本中定义的工件。我们从以下代码开始：</p>   <div class="code-block" data-lang="none">默认布局：import mpsStandalone :: languages导入mpsStandalone :: license</div>   <p id="91ff5449">导入的那两个是引用的<i id="d271b583">mpsStandalone</i>构建脚本中的<i id="07d06351">文件夹</i>元素。通过导入它们，这些文件夹的内容将导入（即复制到）我们的RCP发行版中。</p>   <p id="207a391a">该向导添加了代码来创建<i id="1e656be4">bin</i>文件夹，并将常用的配置和属性文件复制到其中。您可以进一步对其进行自定义，也可以保持不变。</p>   <div class="code-block" data-lang="none">从mpsStandalone :: bin文件夹bin导入文件include log.xml include log4j.dtd文件$ mps_home / bin / idea.properties替换正则表达式“ \”。MPS（\ w +）“ / g-> \。$ {build.number}</div>   <p id="f16c3b76">接下来，我们创建一个新的文件夹<i id="f02c0124">lib</i> ， <i id="d598ab32">从中将mpsStandalone :: lib中的</i>所有内容导入<i id="d598ab32">MPsStandalone :: lib中，</i>除了MPS源和现有的<i id="00299816">branding.jar</i> （其中包含默认的MPS初始屏幕等）。然后，我们创建一个新的jar文件<i id="72c362bd">branding.jar</i> （它必须具有此名称才能起作用； IDEA平台希望这样），将上面定义的项目结构的<i id="81a5280d">branding</i>部分中定义的所有文件放入其中。</p>   <div class="code-block" data-lang="none">从buildStandalone :: lib文件夹lib导入文件排除MPS-src.zip排除想法品牌Kajak的branding.jar jar branding.jar文件</div>   <p id="b0ab91c9">然后，我们创建一个文件夹<i id="6003d355">插件</i> 。<i id="13111f7b">mps-core</i>插件在任何RCP应用中都是必需的，因此无论如何都需要将其导入。然后，我们导入在<i id="54c9aecf">mpsStandalone</i>构建脚本中定义的各种版本控制插件（CVS，SVN和git）。出于明显的原因，独立的Kaja IDE需要版本控制支持，因此导入这些插件是有意义的。最后，我们包括调试器插件，因为Kaja还与MPS调试器集成。</p>   <div class="code-block" data-lang="none">文件夹插件导入mpsStandalone :: plugins / svn4idea导入mpsStandalone :: plugins / cvsIntegration导入mpsStandalone :: plugins / git4idea导入mpsStandalone :: plugins / mps-core导入mpsDebuggerPlugin :: plugins / mps-debugger-api</div>   <p id="665a63ef">然后，我们将前面在项目结构中定义的Kajak插件集成在一起。使用<i id="2b403d73">插件</i>构造，我们可以导入之前定义的插件的完整定义。</p>   <div class="code-block" data-lang="none">插件Kajak <empty> 
</empty></div>   <p id="45759383">在插件内部，我们定义了包含各种库jar的其他子目录。这些jar文件会自动显示在插件类路径中。使用<i id="8c5e4b8a">文件</i>构造，我们使用前面定义的宏将各种文件复制到插件目录中。</p>   <div class="code-block" data-lang="none">插件Kajak文件夹库文件./solutions/JavaKajak/images/kaja_images.jar ...
</div>   <p id="a7c5adcc">请注意，此插件不仅包含我们复制到的jar，而且还包含所有必需的语言工件。这是通过定义这些<i id="fc8d6db7">mps组</i>并从插件引用它们来完成的。我们可以使用这些<i id="60cb1b3b">mps组</i>的事实要归功于<i id="c0602264">mps</i>构建语言插件。它直接支持MPS工件，并且所有必需的文件和元数据都会自动处理。</p>   <p id="85ddf3b1">我们也可以导入mps-make：</p>   <div class="code-block" data-lang="none">＃可选插件导入mpsMakePlugin :: mps-make</div>   <h4 id="propertyfiles">属性文件</h4>   <p id="68dceee1">最后，我们创建一个名为<i id="3ffdf523">build.number</i>的属性文件，其中包含正在运行的RCP应用程序中使用的一堆元数据。基础IntelliJ平台需要它。</p>   <div class="code-block" data-lang="none">属性文件build.number build.number = $ {build.number}日期= $ {date}版本= 1.0</div>   <h3 id="creatingtheplatform-specificdistributions">创建特定于平台的发行版</h3>   <p id="20a4cd1b">至此，生成的目录结构构成了精简的MPS发行版的平台无关核心，该发行版包含您已配置到其中的所有工件，包括自定义品牌。但是，您无法运行它，因为仍然缺少特定于平台的方面。</p>   <p id="433a7bd5">现在是时候看看第二个生成的构建脚本<b id="65e11be0">-KajakDistribution</b> 。</p>   <div class="code-block" data-lang="none">build KajakDistribution生成buildDistribution.xml基本目录：../ ../使用插件：<< ... >>宏：文件夹mps_home =。/ ../../work/MPS 3.2 var version = 1.0依赖关系：Kajak项目结构：<< ... >>默认布局：tar $ {build.number} -linux.tar.gz（压缩gzip）文件夹Kajak $ {version }从Kajak :: / <any>文件夹bin文件$ mps_home / bin / linux / fsnotifier（755）导入文件$ mps_home / bin / linux / fsnotifier64（755）文件$ mps_home / bin / mps.vmoptions（644）修复eol：转换到单个LF，删除eof（Ctrl-Z）：正确的文件$ mps_home / bin / mps64.vmoptions（644）修复eol：转换为单个LF，删除eof（Ctrl-Z）：从$ mps_home / bin的真实文件/ linux exclude ** / fsnotifier exclude ** / fsnotifier64文件$ mps_home / mps.sh（755）修复eol：转换为单个LF，删除eof（Ctrl-Z）：true zip $ {build.number} .zip。 ..
</any></div>   <p id="4b4b2e94">构建脚本取决于<b id="da828a46">Kajak，</b>因此它可以将与平台无关的伪像正确打包到特定于平台的发行版中。<b id="9fa646be">mps_home</b>宏指向<b id="2112b544">通用的</b> MPS安装，因为针对单个平台（MacOS，Linux或Windows）的发行版可能会遗漏其他平台所需的伪像。通用发行版也可从MPS网站下载。</p>   <h3 id="creatingawindowsdistribution">创建Windows发行版</h3>   <p id="f22dadb6">构建脚本不会生成特定于Windows的分发。要在Windows上运行生成的独立IDE，您需要使用生成的<b id="b40241ad">通用</b> zip文件，将<i id="e6ca3f4e">win</i>目录的内容复制到<i id="eb9decc8">bin</i>目录中，并使用<i id="0e2dc11a">mps.bat</i>文件启动IDE。</p>   <p id="98e5303e">      </p><figure><img alt="sa14" title="sa14" src="/help/img/idea/2019.2/sa14.png" id="71952a38" width="1646" height="448"></figure>   <p></p>   <h3 id="tips&tricks">提示与技巧</h3>   <p id="e9029520">所有基于MPS的独立IDE都可以为用户提供“提示与技巧”对话框，其中包含有用的提示，可帮助用户熟悉该工具。</p>   <p id="f70d8b11">      </p><figure><img alt="blxx6" title="blxx6" src="/help/img/idea/2019.2/blxx6.png" id="af1e0f17" width="500" height="1410"></figure>   <p></p>   <p id="c2c1d6d8">可以自定义MPS的提示与技巧的内容。这可以通过构建脚本新的提示和技巧概念来完成：</p>   <p id="db66c6d6">      </p><figure><img alt="blxx7" title="blxx7" src="/help/img/idea/2019.2/blxx7.png" id="7f9522ad" width="500" height="159"></figure>   <p></p>   <p id="0db1c767">提示可以从MPS常规发行版中重新使用，也可以从目录或解决方案中导入：</p>   <p id="941423a6">      </p><figure><img alt="blxx8" title="blxx8" src="/help/img/idea/2019.2/blxx8.png" id="f8511157" width="500" height="133"></figure>   <p></p>   <ul class="list _ul"><li class="list__item" id="afc390af"><p>第一个选项只是将所有MPS提示添加到分发中。这是使用构建脚本向导生成的构建脚本的默认选项。</p></li><li class="list__item" id="d6313317"><p>第二个需要手动创建的文件夹，其中包含正确的提示结构。可以从<b id="a169ee92">mps-tips.jar</b>文件本身获得所需的结构。您需要一个包含所有html文件以及css和image文件夹的文件夹。</p></li><li class="list__item" id="79bb0986"><p>最后一个选项允许使用MPS本身中的<b id="f0b73971">jetbrains.mps.build.tips</b>和<b id="189cceac">jetbrains.mps.core.xml</b>语言定义提示。</p></li></ul>   <p id="8f05b8c7">最后，技巧必须打包到<i id="47793080">lib</i>文件夹的构建脚本布局中。在使用向导生成的生成脚本中，MPS提示和技巧默认情况下打包到lib文件夹中：</p>   <p id="43f61bd1">      </p><figure><img alt="blxx9" title="blxx9" src="/help/img/idea/2019.2/blxx9.png" id="5538a989" width="500" height="150"></figure>   <p></p>   <h3 id="thetips&trickslanguage">提示与技巧</h3>   <p id="ddf05101">要从解决方案中导入提示和技巧，请使用模型创建解决方案，并将模型<b id="137abc56">jetbrains.mps.build.tips</b>和<b id="b0574cab">jetbrains.mps.core.xml</b>添加到模型使用的语言中。然后，您可以创建<b id="7772fb96">MPSTipsAndTricks</b>概念的实例，可以在其中创建多个提示。每个技巧都是HTML格式的文本。可以向每个提示添加一个图像：</p>   <p id="d9652a4a">      </p><figure><img alt="xx" title="blxx10" src="/help/img/idea/2019.2/blxx10.png" id="9343fb60" width="369" height="282"></figure>   <p></p>   <p id="0a18a1a5">通过从<b id="1b114ffc">MPSTipsAndTricks</b>概念指向解决方案和生成的xml，可以完成从解决方案到构建脚本的<b id="ae4cdf79">提示和技巧</b>的<b id="1b114ffc">导入</b> ：</p>   <p id="609601ca">      </p><figure><img alt="blxx11" title="blxx11" src="/help/img/idea/2019.2/blxx11.png" id="e7c9cf1c" width="1216" height="76"></figure>   <p></p>   <h2 id="thefinalrobotkajaidebuildscripts">最终的Robot Kaja IDE构建脚本</h2>   <h3 id="kajak">卡贾克</h3>   <div class="code-block" data-lang="none">build Kajak生成myBuild.xml基本目录：../ ../使用插件：java mps宏：var date =日期20150422 var build.number = Kajak-139。SNAPSHOT文件夹mps_home =。/ ../ ../ ../ ../ Applications / MPS 3.2.app/Contents依赖项：mpsStandalone（工件位置$ mps_home）mpsMakePlugin（工件位置$ mps_home / plugins）项目结构：想法品牌化Kajak代号Kajak公司<no company="">版本1.0，错误的全名Kajak内部版本号$ {build。数字}，日期$ {date}图标16x16 ./icons/MPS16.png 32x32 ./icons/MPS32.png 32x32不透明./icons/MPS32.png 128x128 <no icon128="">启动画面./icons/splash.png文本颜色002387关于屏幕./图标/about.png对话框图像./icons/dialogImage.png欢迎屏幕字幕./icons/caption.png口号./icons/slogan.png徽标./icons/logo.png <no updatewebsite="">插件<no plugins="">什么是新<no whatsnew=""><no stats=""><no help="">反馈URL <no feedbackurl="">想法插件Kajak名称Kajak短（文件夹）名称Kajak描述<no description="">版本1.0 << no vendor >>内容：Kajak依赖项：jetbrains.mps.core << ... >> mps组Kajak解决方案jetbrains.mps.samples。从./solutions/JavaKajak/JavaKajak.msd语言jetbrains.mps.samples加载JavaKaja。KajaAndOr从./languages/KajaAndOr/KajaAndOr.mpl语言jetbrains.mps.samples加载。来自./languages/Kajak/Kajak.mpl语言jetbrains.mps.samples的Kaja加载。从./languages/KajaSceneConstruction/KajaSceneConstruction.mpl默认布局加载的KajaSceneConstruction加载：import mpsStandalone :: languages从mpsStandalone :: license文件夹bin导入文件mpsStandalone :: bin包括log.xml包括log4j.dtd文件$ mps_home / bin / idea。属性替换正则表达式“ \。MPS（\ w +）“ / g-> \。$ {build.number}文件夹lib从mpsStandalone :: lib导入文件排除MPS-src.zip排除branding.jar jar商标品牌Kajak文件夹插件的branding.jar文件导入mpsStandalone :: plugins / svn4idea导入mpsStandalone :: plugins / cvsIntegration导入mpsStandalone :: plugins / git4idea导入mpsStandalone :: plugins / mps-core插件Kajak文件夹libs文件./solutions/JavaKajak/images/kaja_images.jar＃可选插件导入mps ：mps-make属性文件build.number build.number = $ {build.number} date = $ {date} version = 1.0 < <additional aspects="">></additional></no></no></no></no></no></no></no></no></no></div>   <h3 id="kajakdistribution">Kajak发行</h3>   <div class="code-block" data-lang="none">build KajakDistribution生成buildDistribution.xml基本目录：../ ../使用插件：<< ... >>宏：文件夹mps_home =。/ ../../work/MPS 3.2 var version = 1.0依赖关系：Kajak项目结构：<< ... >>默认布局：tar $ {build.number} -linux.tar.gz（压缩gzip）文件夹Kajak $ {version }从Kajak :: / <any>文件夹bin文件$ mps_home / bin / linux / fsnotifier（755）导入文件$ mps_home / bin / linux / fsnotifier64（755）文件$ mps_home / bin / mps.vmoptions（644）修复eol：convert到单个LF，删除eof（Ctrl-Z）：正确的文件$ mps_home / bin / mps64.vmoptions（644）修复eol：转换为单个LF，删除eof（Ctrl-Z）：从$ mps_home / bin的真实文件/ linux排除** / fsnotifier排除** / fsnotifier64文件$ mps_home / mps.sh（755）修复eol：转换为单个LF，删除eof（Ctrl-Z）：true zip $ {build.number} .zip文件夹Kajak $ {version}从Kajak :: / <any>文件夹bin文件$ mps_home / bin / mps.vmoptions（644）导入文件$ mps_home / bin / mps64.vmoptions（644）文件$ mps_home / bin / mps.exe.vmoptions（ 644）文件$ mps_home / bin / mps64.exe.vmoptions（644）文件夹win文件来自$ mps_home / bin / win，不包括** / *。exe文件模式文件夹： <default (755)="">，文件： $ mps_home / bin / win中的755个文件包括** / *。exe文件夹$ mps_home / bin / linux中的linux文件排除** / fsnotifier排除** / fsnotifier64文件$ mps_home / bin / linux / fsnotifier（755）文件$ mps_home / bin / linux / fsnotifier64（755）文件夹nix filemode文件夹： <default (755)="">，文件：$ mps_home / bin / nix文件夹中的755个文件mac文件$ mps_home / bin / mac / libbreakgen.jnilib（644）文件$ mps_home / bin / mac /libbreakgen64.jnilib（644）文件$ mps_home / bin / mac / restarter（755）文件$ mps_home / bin / mac / fsnotifier（755）文件夹Contents文件夹资源文件$ mps_home / bin / mac / Contents / Resources / mps.icns （644）文件夹MacOS文件$ mps_home / bin / mac / Contents / MacOS / mps（755）文件$ mps_home / bin / mac / Contents / Info.plist（644）文件$ mps_home / mps.sh（755）文件$ mps_home /mps.bat（755）zip $ {build.number} -macos.zip文件夹Kajak $ {version} .app文件夹内容从Kajak导入文件：: / <any>文件夹资源文件$ mps_home / bin / mac / Contents / Resources / mps .icns（644）文件夹MacOS文件$ mps_home / bin / mac / Contents / MacOS / mps（755）文件$ mps_home / bin / mac /Contents/Info.plist（644）文件夹bin文件$ mps_home / bin / mac / libbreakgen.jnilib（644）文件$ mps_home / bin / mac / libbreakgen64.jnilib（644）文件$ mps_home / bin / mac / restarter（755 ）文件$ mps_home / bin / mac / fsnotifier（755）文件$ mps_home / bin / mps.vmoptions（644）修复eol：转换为单个LF，删除eof（Ctrl-Z）：真实文件$ mps_home / bin / mps64 .vmoptions（644）修复eol：转换为单个LF，删除eof（Ctrl-Z）：真实文件$ mps_home / mps.sh（755）修复eol：转换为单个LF，删除eof（Ctrl-Z）：真实< <additional aspects="">></additional></any></default></default></any></any></div>   <h2 id="generatingandrunningthebuildscript">生成并运行构建脚本</h2>   <p id="da2a133f">假设构建脚本没有错误，则可以生成它们（ <i id="12f15f98">Rebuild Model</i>或<i id="60cbb1fa">Ctrl-F9</i> ）。这将创建一个具有在构建脚本顶部提到的名称的<i id="20d89f97">ant</i>文件：</p>   <div class="code-block" data-lang="none">构建Kajak生成myBuild.xml</div>   <p id="f12a8632">这个<i id="f15135b2">myBuild.xml</i> （在这种情况下）直接位于您的项目目录中。您可以从命令行运行该文件（使用<i id="2c409b00">ant -buildfile myBuild.xml</i> ），也可以直接在MPS内部运行该文件（通过项目资源管理器中构建脚本上的上下文菜单）。</p>   <p id="7bc84cdf">      </p><figure><img alt="sa10" title="sa10" src="/help/img/idea/2019.2/sa10.png" id="34626c6e" width="860" height="1326"></figure>   <p></p>   <aside class="tip sideblock" rel="7bc84cdf" id="8ce3be69" data-title="">      <p id="1f530c93">请注意，构建脚本会编译和打包所有语言，但<b id="c7b2a7dd">不会</b>重新生成它们！因此，您必须通过其他方式确保您的语言定义已完全生成并且是最新的。</p>   </aside>   <h2 id="inspectingthegenerateddirectorystructure">检查生成的目录结构</h2>   <p id="19fea005">下图显示了运行构建脚本后的项目结构。特别是在<i id="f8397536">build / artifacts</i>目录中，已经创建了在构建脚本的<i id="02c86286">默认布局</i>部分中定义的结构。</p>   <p id="5de8970e">      </p><figure><img alt="sa13" title="sa13" src="/help/img/idea/2019.2/sa13.png" id="c0168e6f" width="2054" height="270"></figure>   <p></p>   <p id="864c1895">      </p><figure><img alt="sa12" title="sa12" src="/help/img/idea/2019.2/sa12.png" id="3ba969ad" width="824" height="194"></figure>   <p></p>   <p id="de2b3f3d">我们建议您浏览目录和文件结构，以将看到的内容连接到构建脚本中的定义。</p><div class="last-modified" data-skip-index="skip">上次修改时间：2019年8月30日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="building-mps-language-plugins.html">构建MPS语言插件</a> <a class="navigation-links__next" href="removing-bootstrapping-dependency-problems.html">消除引导依赖性问题</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>