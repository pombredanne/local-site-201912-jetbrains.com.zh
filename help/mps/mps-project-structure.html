<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>MPS项目结构-帮助|帮助MPS</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="MPS+project+structure.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索MPS帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected>默认</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_mac_os_x" data-group="primary">Eclipse（Mac OS X）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_mac_os_x" data-group="primary">Mac OS X</option><option value="primary_mac_os_x_10.5_" data-group="primary">Mac OS X 10.5以上</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_default" data-group="secondary">默认</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_jbuilder" data-group="secondary">JBuilder的</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5以上</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="mps-project-structure.xml" data-toc="MPS+project+structure.html">MPS项目结构</h1>      <p id="1bf9f9ee">在设计语言和编写代码时，良好的结构可帮助您四处浏览并将各部分组合在一起。在这方面，MPS与其他IDE相似。</p>   <h2 id="project">项目</h2>   <p id="075d8599">项目是MPS中的主要组织单位。项目包含一个或多个模块，而模块本身也包含模型。模型是用于生成/编译的最小单元。我们将在下面详细描述这些概念。</p>   <h2 id="models">楷模</h2>   <p id="1bd4efa0">MPS带来的主要区别是-程序不是文本形式。曾经<br>您可能已经习惯了所有编程都是以文本形式进行的事实。您编辑文本。然后，由解析器解析文本以构建AST。语法通常用于定义解析器。然后，AST被用作核心数据结构，以进一步与您的程序一起使用，编译器生成可运行代码，IDE则使用AST为您提供巧妙的代码帮助，重构和静态代码分析。<br>现在，看到AST是一个有用，灵活且功能强大的数据结构，如果我们从一开始就可以使用AST，并且完全避免使用文本，语法和解析器，它将对您有什么帮助？好吧，这正是MPS所做的。</p>   <p id="f3e3c84a">为了给您的代码一些结构，MPS中的程序被组织成<b id="cad1aecb">模型</b> 。将模型视为与基于文本的语言中的编译单元有些相似。例如，基于Java并以多种方式扩展MPS的底线语言<i id="cd3158e9">BaseLanguage</i> ，它使用模型，以便每个模型都表示一个Java包。模型通常包括<b id="82563645">根节点</b> ，其代表顶层声明和<b id="cf039faa">非根节点</b>的。例如，在<i id="f2589861">BaseLanguage</i>类中，接口和枚举是根节点。（您可以<a href="basic-notions.html">在此处</a>阅读有关节点的更多信息）。</p>   <p id="0f9e2071">模型需要保留其元信息：</p>   <ul class="list _ul"><li class="list__item" id="99e4f543"><p>他们使用的模型（导入的模型）</p></li><li class="list__item" id="435927f6"><p>使用的语言（以及devkit）（在“使用的语言”部分中）</p></li><li class="list__item" id="5209fd9b"><p>一些额外的参数，例如模型文件和特殊的生成器参数</p></li></ul>   <p id="bbfbf915">可以在模型的弹出菜单的“ <i id="62d59369">模型属性”</i>中更改此元信息，也可以在放置在模型上时使用<i id="bd1313fa">Alt + Enter</i>进行更改。</p>   <h2 id="modules">模组</h2>   <p id="d336148c">模型本身是最细粒度的分组元素。<b id="3f465111">模块将</b>模型组织到更高级别的实体中。一个模块通常由几个模型组成，并带有描述模块属性和依赖性的元信息。MPS区分几种类型的模块： <i id="84defe06">解决方案</i> ， <i id="c599c981">语言</i> ， <i id="c9775725">devkit</i>和<i id="5047fb6b">generators</i> 。<br>现在，我们将详细讨论元信息结构以及各个模块类型。</p>   <h3 id="modulemetainformation">模块元信息</h3>   <p id="cabb0e43">现在，当我们将内容组织到模块中时，我们需要一种将模块组合在一起以达到更好的效果的方法。模块之间的关系通过它们所保存的元信息来描述。模块之间的可能关系可以分为几类：</p>   <ul class="list _ul"><li class="list__item" id="ac98dafc"><p>         <b id="4d8db112">依赖性</b> -如果一个模块依赖于另一个模块，则前者内部的模型可以从后者导入模型。依赖关系的<b id="f416ec03">reexport</b>属性指示依赖项是否可传递。如果模块A依赖于模块B，且<i id="8de34672">reexport</i>属性设置为true，则每个其他声明对A依赖的模块也将自动依赖于B。</p></li><li class="list__item" id="8042cbec"><p>         <b id="834bf18c">扩展的</b>语言依赖性-如果语言L扩展了语言M，则M中的每个概念都可以在L内部用作角色或扩展概念的目标。同样，语言M的所有方面都可以在语言L的相应方面中使用和扩展。</p></li><li class="list__item" id="0c9a430e"><p>         <b id="8c6fa15d">生成目标</b>依赖关系-两种语言（L2和L1）之间的一种关系，当一种语言需要指定L2的生成器生成为L1并因此需要L1的运行时依赖关系时。</p></li><li class="list__item" id="38052179"><p>         <b id="6ecec1af">使用的语言</b> -如果模块A使用语言L，则A内部的模型可以使用语言L。</p></li><li class="list__item" id="7e14c905"><p>         <b id="b88b28e1">使用过的devkit-</b>如果模块A使用devkit D，则A中的模型可以使用devkitD。</p></li><li class="list__item" id="7d27d96d"><p>         <b id="9bba886c">生成器输出路径</b> -生成器输出路径是将放置所有新生成的文件的文件夹。在这里，您可以找到MPS为您生成的东西。</p></li></ul>   <p id="78bd2312">现在，我们将介绍可在MPS中找到的不同类型的模块。</p>      <h3 id="solutions">解决方案</h3>   <p id="eb5ca559">解决方案是MPS中最简单的模块。它只是一组保存代码的模型，并以通用名称统一。解决方案有几种类型：</p>   <ul class="list _ul"><li class="list__item" id="b3297a27"><p>         <b id="607a12a1">沙盒解决方案</b> -这些解决方案包含最终用户代码。IDE不会以任何特殊方式处理代码。</p></li><li class="list__item" id="1e76beb1"><p>         <b id="61626207">运行时</b> <b id="2830c87f">解决方案</b> -这些解决方案包含其他模块（解决方案，语言或生成器）所依赖的代码。该代码可以包含MPS模型以及Java类，源文件或jar文件。每当在外部对其进行编译或更改时，IDE都会重新加载这些类。</p></li><li class="list__item" id="5b817b68"><p>         <b id="586074b6">插件解决方案</b> <b id="7c6844de">的S</b> -这些解决方案以某种方式扩展IDE的功能。他们可以提供新的菜单项，添加侧面工具面板窗口，从“项目设置”对话框定义自定义首选项屏幕，等等。同样，只要更改，MPS就会继续重新加载类。此外，IDE功能将相应更新。</p></li></ul>      <h3 id="languages">语言能力</h3>   <p id="7e2f679a">语言是比解决方案更复杂的模块，代表可重用的语言。它由几个模型组成，每个模型都定义语言的某个方面： <i id="3183e525">结构</i> ， <i id="076f5dfb">编辑器</i> ， <i id="c8bf0596">操作</i> ， <i id="3f9c9dfe">类型系统</i>等。<br>语言可以扩展其他语言。扩展语言可以使用扩展语言中的所有概念-派生自己的概念，使用继承的概念作为引用的目标，也可以将继承的概念直接作为子代放置在其自身的概念中。</p>   <p id="a23ea1e3">语言通常与第三方库或解决方案具有运行时依赖关系。例如，您可以创建一种包装任何Java库的语言，例如Hibernate或Swt。然后，您的语言将为用户提供这些库随附的标准Java API更好更好的替代方案。<br>现在，为了使您的语言起作用，您需要在语言中包含包装的库。您可以通过<i id="a66507e6">运行时类路径</i>或<i id="c777cf9c">运行时解决方案来执行此操作</i> 。运行时类路径适用于典型情况，例如Java编写的库，而更复杂的情况下应首选运行时解决方案。</p>   <ul class="list _ul"><li class="list__item" id="c3ae2432"><p>运行时类路径-使库类可用作<i id="daced28c">存根</i>语言生成器</p></li><li class="list__item" id="13cdaa72"><p>运行时解决方案-这些模型对于生成器内部的所有模型都是可见的</p></li></ul>      <h4 id="languageaspects">语言方面</h4>   <p id="0231237f">语言方面描述了语言的不同方面：</p>   <ul class="list _ul"><li class="list__item" id="2ea91429"><p>结构-描述AST语言的节点和结构。这是任何语言的唯一强制性方面。</p></li><li class="list__item" id="891e4a54"><p>编辑器-描述如何在编辑器中显示和编辑语言</p></li><li class="list__item" id="9839bc93"><p>动作-描述特定于某种语言的完成菜单自定义，即当您键入<i id="94a3462e">Control + Space</i>时会发生什么      </p></li><li class="list__item" id="af6d7dd9"><p>约束-描述对AST的约束：节点适用的位置，允许的属性和引用等。</p></li><li class="list__item" id="d7facae7"><p>行为-描述AST的行为方面，即AST方法</p></li><li class="list__item" id="fc70bfc8"><p>类型系统-描述用于计算语言类型的规则</p></li><li class="list__item" id="1d38aea3"><p>意图-描述意图（当灯泡弹出或用户键入<i id="50e84286">Alt + Enter</i>时，上下文相关的动作可用）</p></li><li class="list__item" id="6e711ab9"><p>插件-允许将语言集成到MPS IDE</p></li><li class="list__item" id="73777757"><p>数据流-描述代码中的数据意图流。它允许您查找不可达的语句，未初始化的读取等。</p></li></ul>   <p id="702cf36a">您可以在本指南的相应部分中详细了解各个方面。</p>   <aside class="tip sideblock" rel="702cf36a" id="eacecd5a" data-title="">      <p id="a6697086">要了解有关设置模块和模型之间的依赖关系的所有信息，请查看“ <a href="getting-the-dependencies-right.html">获取依赖关系”正确</a>页面。</p>   </aside>      <h3 id="generators">发电机</h3>   <p id="da990a13">生成器定义了一种语言到另一种语言（通常是另一种语言）的可能转换。发电机可能依赖于其他发电机。由于将生成器应用于代码的顺序很重要，因此可以在生成器上设置排序约束。您可以在<a href="mps-generator.html">相应部分中</a>阅读有关生成的更多信息。</p>      <h3 id="devkits">开发套件</h3>   <p id="7a2c6746">开发工具包的目的是使您的生活更轻松。如果您有大量相互关联的语言，那么您肯定会喜欢一种将它们视为一个整体的方法。例如，您可能想导入它们而不列出所有单独的语言。DevKits使这成为可能。构建DevKit时，您只需列出要包括的语言。<br>正如预期的那样，DevKit可以扩展其他DevKit。然后，扩展的DevKit将携带所有继承的语言，就像它们是自己的一样。</p>      <h2 id="projects">专案</h2>   <p id="55f1aab0">这很容易。一个项目只是包装了您需要组合在一起并作为一个单元使用它们的模块。您可以打开项目的<b id="9e8daccf">属性</b> （“ <b id="79663b3e">项目视图”</b>面板中“ <b id="79663b3e">项目”</b>节点上的<i id="de0f7311">Alt + Enter</i> ），然后添加或删除应包含在项目中的模块。您也可以从项目节点的上下文弹出菜单中创建新模块。</p>      <h3 id="javacompilation">Java编译</h3>   <p id="830ad2bc">MPS源自Java，并且经常在Java环境中使用。由于MPS模型通常生成到Java文件中，因此在运行程序之前需要一种编译Java的方法。通常有两种选择：</p>   <ul class="list _ul"><li class="list__item" id="5acacbd0"><p>在MPS中编译（推荐）</p></li><li class="list__item" id="f0f9acfd"><p>在IntelliJ IDEA中进行编译（需要IntelliJ IDEA）</p></li></ul>   <p id="7711d2c7">在MPS中编译类时，必须设置模块的<i id="aac7ebb9">源路径</i> 。每次生成模块时，或者通过make或rebuild操作手动调用编译时，都会编译源文件。<br>    </p><div class="last-modified" data-skip-index="skip">上次修改时间：2019年8月30日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="basic-notions.html">基本概念</a> <a class="navigation-links__next" href="glossary.html">术语</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>