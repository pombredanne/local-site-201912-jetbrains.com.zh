<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>MPS project structure - Help | MPS</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="MPS+project+structure.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search MPS Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Default</option><option data-group="primary" value="primary_default_for_gnome">Default for GNOME</option><option data-group="primary" value="primary_default_for_kde">Default for KDE</option><option data-group="primary" value="primary_default_for_xwin">Default for XWin</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="primary" value="primary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_jbuilder">JBuilder</option><option data-group="primary" value="primary_mac_os_x">Mac OS X</option><option data-group="primary" value="primary_mac_os_x_10.5_">Mac OS X 10.5+</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_default">Default</option><option data-group="secondary" value="secondary_default_for_gnome">Default for GNOME</option><option data-group="secondary" value="secondary_default_for_kde">Default for KDE</option><option data-group="secondary" value="secondary_default_for_xwin">Default for XWin</option><option data-group="secondary" value="secondary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="secondary_emacs">Emacs</option><option data-group="secondary" value="secondary_jbuilder">JBuilder</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Mac OS X 10.5+</option><option data-group="secondary" value="secondary_netbeans">NetBeans</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="MPS+project+structure.html" id="mps-project-structure.xml">MPS project structure</h1>      <p id="1bf9f9ee">When designing languages and writing code, good structure helps you navigate around and combine the pieces together. MPS is similar to other IDEs in this regard.</p>   <h2 id="project">Project</h2>   <p id="075d8599">Project is the main organizational unit in MPS. Projects consist of one or more modules, which themselves consist of models. Model is the smallest unit for generation/compilation. We describe these concepts in detail right below.</p>   <h2 id="models">Models</h2>   <p id="1bd4efa0">Here's a major difference that MPS brings along - programs are not in text form. Ever.<br> You might be used to the fact that any programming is done in text. You edit text. The text is than parsed by a parser to build an AST. Grammars are typically used to define parsers. AST is then used as the core data structure to work with your program further, either by the compiler to generate runnable code or by an IDE to give you clever code assistance, refactorings and static code analysis.<br> Now, seeing that AST is such a useful, flexible and powerful data structure, how would it help if we could work with AST from the very beginning, avoiding text, grammar and parsers altogether? Well, this is exactly what MPS does.</p>   <p id="f3e3c84a">To give your code some structure, programs in MPS are organized into <b id="cad1aecb">models</b>. Think of models as somewhat similar to compilation units in text based languages. To give you an example, <i id="cd3158e9">BaseLanguage</i>, the bottom-line language in MPS, which builds on Java and extends it in many ways, uses models so that each model represents a Java package. Models typically consist of <b id="82563645">root nodes</b>, which represent top level declarations, and <b id="cf039faa">non-root nodes</b>. For example, in <i id="f2589861">BaseLanguage</i> classes, interfaces, and enums are root nodes. (You can read more about nodes <a href="basic-notions.html">here</a> ).</p>   <p id="0f9e2071">Models need to hold their meta information:</p>   <ul class="list _ul"><li class="list__item" id="99e4f543"><p>models they use (imported models)</p></li><li class="list__item" id="435927f6"><p>languages (and also devkits) they are written in (in used languages section)</p></li><li class="list__item" id="5209fd9b"><p>a few extra params, such as the model file and special generator parameters</p></li></ul>   <p id="bbfbf915">This meta information can be altered in <i id="62d59369">Model Properties</i> of the model's pop-up menu or using <i id="bd1313fa">Alt + Enter</i> when positioned on the model.</p>   <h2 id="modules">Modules</h2>   <p id="d336148c">Models themselves are the most fine-grained grouping elements. <b id="3f465111">Modules</b> organize models into higher level entities. A module typically consists of several models acompanied with meta information describing module's properties and dependencies. MPS distinguishes several types of modules: <i id="84defe06">solutions</i>, <i id="c599c981">languages</i>, <i id="c9775725">devkits</i>, and <i id="5047fb6b">generators</i>.<br> We'll now talk about the meta-information structure as well as the individual module types in detail.</p>   <h3 id="modulemetainformation">Module meta information</h3>   <p id="cabb0e43">Now when we have stuff organized into modules, we need a way to combine the modules together for better good. Relationships between modules are described through meta information they hold. The possible relationships among modules can be categorized into several groups:</p>   <ul class="list _ul"><li class="list__item" id="ac98dafc"><p>         <b id="4d8db112">Dependency</b> - if one module depends on another, and so models inside the former can import models from the latter. The <b id="f416ec03">reexport</b> property of the dependency relationship indicates whether the dependency is transitive or not. If module A depends on module B with the <i id="8de34672">reexport</i> property set to true, every other module that declares depency on A automatically depends on B as well.</p></li><li class="list__item" id="8042cbec"><p>         <b id="834bf18c">Extended</b> language dependency - if language L extends language M, then every concept from M can be used inside L as a target of a role or an extended concept. Also, all the aspects from language M are available for use and extension in the corresponding aspects of language L.</p></li><li class="list__item" id="0c9a430e"><p>         <b id="8c6fa15d">Generation Target</b> dependency - a&nbsp;relation between two languages (L2 and L1), when one needs to specify that Generator of L2 generates into L1 and thus needs L1's runtime dependencies.</p></li><li class="list__item" id="38052179"><p>         <b id="6ecec1af">Used language</b> - if module A uses language L, then models inside A can use language L.</p></li><li class="list__item" id="7e14c905"><p>         <b id="b88b28e1">Used devkit</b> - if module A uses devkit D, then models inside A can use devkit D.</p></li><li class="list__item" id="7d27d96d"><p>         <b id="9bba886c">Generator output path</b> - generator output path is a folder where all newly generated files will be placed. This is the place you can look for the stuff MPS generates for you.</p></li></ul>   <p id="78bd2312">Now we'll look at the different types of modules you can find in MPS.</p>      <h3 id="solutions">Solutions</h3>   <p id="eb5ca559">Solution is the simplest possible kind of module in MPS. It is just a set of models holding code and unified under a common name. There are several types of solutions:</p>   <ul class="list _ul"><li class="list__item" id="b3297a27"><p>         <b id="607a12a1">Sandbox solutions</b> - these solutions hold an end user code. The IDE does not treat the code in any special way.</p></li><li class="list__item" id="1e76beb1"><p>         <b id="61626207">Runtime</b>         <b id="2830c87f"> solutions</b> - these solutions contain code that other modules (Solutions, Languages or Generators) depend on. The code can consist of MPS models as well as of Java classes, sources or jar files. The IDE will reload the classes, whenever they get compiled or changed externally.</p></li><li class="list__item" id="5b817b68"><p>         <b id="586074b6">Plugin solution</b>         <b id="7c6844de">s</b> - these solutions extend the IDE functionality in some way. They can contribute new menu entries, add side tool panel windows, define custom preference screens fro the&nbsp;Project settings dialog, etc. Again, MPS will keep reloading the classes, whenever they change. Additionally the IDE functionality will be updated accordingly.</p></li></ul>      <h3 id="languages">Languages</h3>   <p id="7e2f679a">Language is a module that is more complex than a solution and represents a reusable language. It consists of several models, each defining a certain aspect of the language: <i id="3183e525">structure</i>, <i id="076f5dfb">editor</i>, <i id="c8bf0596">actions</i>, <i id="3f9c9dfe">typesystem</i>, etc.<br> Languages can extend other languages. An extending language can then use all concepts from the extended language - derive its own concepts, use inherited concepts as targets for references and also place inherited concepts directly as children inside its own concepts.</p>   <p id="a23ea1e3">Languages frequently have runtime dependencies on third-party libraries or solutions. You may, for example, create a language wrapping any Java library, such as Hibernate or Swt. Your language will then give the users a better and smoother alternative to the standard Java API that these libraries come with.<br> Now, for your language to work, you need to include the wrapped library with your language. You do it either through a <i id="a66507e6">runtime classpath</i> or through <i id="c777cf9c">a runtime solution</i>. Runtime classpath is suitable for typical scenarios, such as Java-written libraries, while runtime solutions should be prefered for more complex scenarios.</p>   <ul class="list _ul"><li class="list__item" id="c3ae2432"><p>Runtime classpath - makes library classes available as <i id="daced28c">stubs</i> language generators</p></li><li class="list__item" id="13cdaa72"><p>Runtime solutions - these models are visible to all models inside the generator</p></li></ul>      <h4 id="languageaspects">Language aspects</h4>   <p id="0231237f">Language aspects describe different facets of a language:</p>   <ul class="list _ul"><li class="list__item" id="2ea91429"><p>structure - describes the nodes and structure of the language AST. This is the only mandatory aspect of any language.</p></li><li class="list__item" id="891e4a54"><p>editor - describes how a language will be presented and edited in the editor</p></li><li class="list__item" id="9839bc93"><p>actions - describes the completion menu customizations specific to a language, i.e. what happens when you type <i id="94a3462e">Control + Space</i>      </p></li><li class="list__item" id="af6d7dd9"><p>constraints - describes the constraints on AST: where a node is applicable, which property and reference are allowed, etc.</p></li><li class="list__item" id="d7facae7"><p>behavior - describes the behavioral aspect of AST, i.e. AST methods</p></li><li class="list__item" id="fc70bfc8"><p>typesystem - describes the rules for calculating types in a language</p></li><li class="list__item" id="1d38aea3"><p>intentions - describes intentions (context dependent actions available when light bulb pops up or when the user types <i id="50e84286">Alt + Enter</i>)</p></li><li class="list__item" id="6e711ab9"><p>plugin - allows a language to integrate into MPS IDE</p></li><li class="list__item" id="73777757"><p>data flow - describes the intented flow of data in code. It allows you to find unreachable statements, uninitialized reads etc.</p></li></ul>   <p id="702cf36a">You can read more about each aspect in the corresponding section of this guide.</p>   <aside class="tip sideblock" data-title="" rel="702cf36a" id="eacecd5a">      <p id="a6697086">To learn all about setting dependencies between modules and models, check out the <a href="getting-the-dependencies-right.html">Getting the dependencies right</a> page.</p>   </aside>      <h3 id="generators">Generators</h3>   <p id="da990a13">Generators define possible transformations of a language into something else, typically into another languages. Generators may depend on other generators. Since the order in which generators are applied to code is important, ordering constraints can be set on generators. You can read more about generation in the <a href="mps-generator.html">corresponding section</a>.</p>      <h3 id="devkits">DevKits</h3>   <p id="7a2c6746">DevKits have been created to make your life easier. If you have a large group of interconnected languages, you certainly appreciate a way to treat them as a single unit. For example, you may want to import them without listing all of the individual languages. DevKits make this possible. When building a DevKit, you simply list languages to include.<br> As expected, DevKits can extend other DevKits. The extending DevKit will then carry along all the inherited languages as if they were its own ones.</p>      <h2 id="projects">Projects</h2>   <p id="55f1aab0">This one is easy. A project simply wraps modules that you need to group together and work with them as a unit. You can open the <b id="9e8daccf">Properties</b>&nbsp;of a project (<i id="de0f7311">Alt + Enter</i> on the Project node in the <b id="79663b3e">Project View</b>&nbsp;panel) and add or remove modules that should be included in the project. You can also create new modules from the project nodes' context pop-up menu.</p>      <h3 id="javacompilation">Java compilation</h3>   <p id="830ad2bc">MPS was born from Java and is frequently used in Java environment. Since MPS models are often generated into java files, a way to compile java is needed before we can run our programs. There are generally two options:</p>   <ul class="list _ul"><li class="list__item" id="5acacbd0"><p>Compiling in MPS (recommended)</p></li><li class="list__item" id="f0f9acfd"><p>Compiling in IntelliJ IDEA (requires IntelliJ IDEA)</p></li></ul>   <p id="7711d2c7">When you compile your classes in MPS, you have to set the module's <i id="aac7ebb9">source path</i>. The source files will be compiled each time the module gets generated, or whenever you invoke compilation manually by the make or rebuild actions.<br>    </p><div class="last-modified" data-skip-index="skip">Last modified: 30 August 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="basic-notions.html">Basic notions</a><a class="navigation-links__next" href="glossary.html">Glossary</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>