<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>SModel language Modification operations - Help | MPS</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="SModel+language+Modification+operations.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search MPS Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Default</option><option data-group="primary" value="primary_default_for_gnome">Default for GNOME</option><option data-group="primary" value="primary_default_for_kde">Default for KDE</option><option data-group="primary" value="primary_default_for_xwin">Default for XWin</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="primary" value="primary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_jbuilder">JBuilder</option><option data-group="primary" value="primary_mac_os_x">Mac OS X</option><option data-group="primary" value="primary_mac_os_x_10.5_">Mac OS X 10.5+</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_default">Default</option><option data-group="secondary" value="secondary_default_for_gnome">Default for GNOME</option><option data-group="secondary" value="secondary_default_for_kde">Default for KDE</option><option data-group="secondary" value="secondary_default_for_xwin">Default for XWin</option><option data-group="secondary" value="secondary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="secondary_emacs">Emacs</option><option data-group="secondary" value="secondary_jbuilder">JBuilder</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Mac OS X 10.5+</option><option data-group="secondary" value="secondary_netbeans">NetBeans</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="SModel+language+Modification+operations.html" id="smodel-language-modification-operations.xml">SModel language Modification operations</h1>   <h2 id="modificationoperations">Modification operations</h2>   <h3 id="featurechanges">Feature changes</h3>   <p id="2b738398">The most commonly used change operation in SModel is the act of changing a feature. In order to set a value of a property, or assign a child or reference node of 0..1 or 1 cardinality, you can use straight assignment (with <i id="fd75e3a7">=</i>) or the <b id="9368f3d4">set</b> operation. In order to add a child to 0..n or 1..n children collection, you can either use the.add operation from the collection language or call <b id="3d8dae6e">add next-sibling</b>/<b id="6166a607">add prev-sibling</b> operations on a <i id="d93f2163">node&lt;&gt;</i> passing another node as a parameter.</p>   <p id="0efc865b">For example,</p>   <ul class="list _ul"><li class="list__item" id="77f26b78"><p>classDef.name = "NewClassName";</p></li><li class="list__item" id="e42e59af"><p>classDef.name.set( "NewClassName");</p></li><li class="list__item" id="049dffa7"><p>myNode.condition = trueConstant;</p></li><li class="list__item" id="4572ad89"><p>node&lt;InstanceMethodDeclaration&gt; method = classDef.member.add new initialized(InstanceMethodDeclaration);</p></li></ul>   <p id="8771e70f">When setting a target to a reference link, there is no need to access a target node. Having a pointer to the target is enough. This is&nbsp;possible with the <b id="9bfde9cc">set ptr</b>&nbsp;operation, which is applicable to reference link access expressions.</p>   <div class="code-block"><code class="code-block__wrapper">node.instanceMethodDeclaration.set ptr(Object-&gt;equals)</code></div>   <p id="288be652">Similarly, to check that a node is a specific one, there is the "is"&nbsp;operation available.</p>   <div class="code-block"><code class="code-block__wrapper">node.parent.is(Object-&gt;equals);<br>
   </code></div>   <h3 id="newnodecreation">New node creation</h3>   <p id="a6191e0a">There are several ways to create a new node:</p>   <ul class="list _ul"><li class="list__item" id="950a2729"><p>new operation: <b id="b311deda">new node&lt;Concept&gt;()</b>      </p></li><li class="list__item" id="ffee1300"><p>new instance operation on a model: <b id="c51aa816">model.newInstance()</b>      </p></li><li class="list__item" id="757a35d8"><p>new instance operation on a concept:&nbsp;<b id="51b503d3">concept.newInstance()</b>      </p></li><li class="list__item" id="3f0cb5ec"><p>         <b id="a303f213">add new(Concept)</b> and <b id="b31e390e">set new(Concept)</b> operations applied to feature expressions</p></li><li class="list__item" id="804e1fd2"><p>         <b id="341c984f">replace with new(Concept)</b> operation</p></li><li class="list__item" id="ace300d1"><p>         <b id="d19d8022">new root node(Concept)</b> operation applied to a model. In this case the concept should be rootable</p></li><li class="list__item" id="a0329a4b">         <p id="bbc00d47">            <b id="b06123cd">new next-sibling&lt;Concept&gt;</b>/<b id="1aa5540f">new prev-sibling&lt;Concept&gt;</b> operations adding new sibling to an existing node</p>         <aside class="tip sideblock" data-title="" rel="bbc00d47" id="24e79727">            <p id="a924e9fe">Note that the&nbsp;<i id="b0ab5f18">jetbrains.mps.lang.actions</i>&nbsp;language adds the possibility to initialize the newly created nodes using the rules specified in&nbsp;<b id="a345b8d0">NodeFactories</b>. Upon importing the&nbsp;<i id="3af0d609">jetbrains.mps.lang.actions</i>&nbsp;language you are able to call:</p>            <ul class="list _ul"><li class="list__item" id="4f97c769"><p>new initialized node&lt;Concept&gt;()</p></li><li class="list__item" id="0f769113"><p>model.new initialized node(Concept)</p></li><li class="list__item" id="180bb6d6"><p>node.new initialized next/previous sibling(Concept)</p></li><li class="list__item" id="178d9c78"><p>add new initialized(Concept)</p></li><li class="list__item" id="97a34e4c"><p>set new initialized(Concept)</p></li><li class="list__item" id="10b77696"><p>replace with new initialized(Concept)</p></li><li class="list__item" id="4871f521"><p>replace with initialized next/previous-sibling(Concept)</p></li></ul>         </aside>      </li></ul>   <h3 id="copy">Copy</h3>   <p id="031b822f">To preserve the tree shape of the model, a node can only have at most one parent. As soon as you add a node as a child to a parent node, the node is detached automatically from any previous parent node that it may have had. Creating copies of nodes, including their sub-trees, may thus come handy. To create a copy of an existing node, you can use the copy operation. E.g., <i id="c36517b5">node&lt;&gt;&nbsp;yourNode =&nbsp;myNode.copy</i>   </p>   <h3 id="replacewith">Replace with</h3>   <p id="6feaa7f1">To replace a node in the AST with an instance of another node, you can use the <i id="62bfce7d">'replace with'</i> operation. If you want to replace and create at the same time, there is a shortcut operation <i id="d7a15bb0">'replace with new(Concept)'</i>, which takes a concept as a parameter.</p>   <h3 id="deleteanddetachoperations">Delete and detach operations</h3>   <p id="6aeec7f7">If you want to delete a node from the model, you can use the <b id="5526d9d9">detach</b> operation. You can still add the detached node to the model later.</p><div class="last-modified" data-skip-index="skip">Last modified: 30 August 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="smodel-language.html">SModel language</a><a class="navigation-links__next" href="smodel-language-types.html">SModel language Types</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>