<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>SModel语言修改操作-帮助|帮助MPS</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="SModel+language+Modification+operations.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索MPS帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected>默认</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_mac_os_x" data-group="primary">Eclipse（Mac OS X）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_mac_os_x" data-group="primary">Mac OS X</option><option value="primary_mac_os_x_10.5_" data-group="primary">Mac OS X 10.5以上</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_default" data-group="secondary">默认</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_jbuilder" data-group="secondary">JBuilder的</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5以上</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="smodel-language-modification-operations.xml" data-toc="SModel+language+Modification+operations.html">SModel语言修改操作</h1>   <h2 id="modificationoperations">修改操作</h2>   <h3 id="featurechanges">功能变更</h3>   <p id="2b738398">SModel中最常用的更改操作是更改功能的动作。为了设置属性值，或分配0..1或1基数的子节点或参考节点，可以使用直接分配（带有<i id="fd75e3a7">=</i> ）或<b id="9368f3d4">set</b>操作。为了将子代添加到0..n或1..n子代集合中，您可以使用集合语言中的.add操作，也可以在<i id="d93f2163">节点<>上</i>通过传递另一个<i id="d93f2163">节点的</i>调用<b id="3d8dae6e">add next-sibling</b> / <b id="6166a607">add prev-sibling</b>操作。节点作为参数。</p>   <p id="0efc865b">例如，</p>   <ul class="list _ul"><li class="list__item" id="77f26b78"><p>classDef.name =“ NewClassName”;</p></li><li class="list__item" id="e42e59af"><p>classDef.name.set（“ NewClassName”）;</p></li><li class="list__item" id="049dffa7"><p>myNode.condition = trueConstant;</p></li><li class="list__item" id="4572ad89"><p>节点<instancemethoddeclaration>方法= classDef.member.add新的initialized（InstanceMethodDeclaration）;</instancemethoddeclaration></p></li></ul>   <p id="8771e70f">将目标设置为参考链接时，无需访问目标节点。拥有指向目标的指针就足够了。使用<b id="9bfde9cc">set ptr</b>操作可以做到这一点，该操作适用于参考链接访问表达式。</p>   <div class="code-block"><code class="code-block__wrapper">node.instanceMethodDeclaration.set ptr(Object->equals)</code></div>   <p id="288be652">同样，要检查节点是否为特定节点，可以使用“ is”操作。</p>   <div class="code-block"><code class="code-block__wrapper">node.parent.is(Object->equals);<br></code></div>   <h3 id="newnodecreation">新节点创建</h3>   <p id="a6191e0a">有几种创建新节点的方法：</p>   <ul class="list _ul"><li class="list__item" id="950a2729"><p>新操作： <b id="b311deda">新节点<concept>（）</concept></b>      </p></li><li class="list__item" id="ffee1300"><p>在模型上的新实例操作： <b id="c51aa816">model.newInstance（）</b>      </p></li><li class="list__item" id="757a35d8"><p>概念上的新实例操作： <b id="51b503d3">concept.newInstance（）</b>      </p></li><li class="list__item" id="3f0cb5ec"><p>         <b id="a303f213">添加new（Concept）</b>并<b id="b31e390e">设置</b>应用于特征表达式的<b id="b31e390e">new（Concept）</b>操作</p></li><li class="list__item" id="804e1fd2"><p>         <b id="341c984f">用new（Concept）</b>操作<b id="341c984f">替换</b></p></li><li class="list__item" id="ace300d1"><p>         <b id="d19d8022">新的根节点（概念）</b>操作应用于模型。在这种情况下，这个概念应该是可以扎根的</p></li><li class="list__item" id="a0329a4b">         <p id="bbc00d47">            <b id="b06123cd">新的下一个兄弟姐妹<concept></concept></b> / <b id="1aa5540f">新上级<concept></concept></b>向现有节点添加新同级的操作</p>         <aside class="tip sideblock" rel="bbc00d47" id="24e79727" data-title="">            <p id="a924e9fe">请注意， <i id="b0ab5f18">jetbrains.mps.lang.actions</i>语言增加了使用<b id="a345b8d0">NodeFactories中</b>指定的规则初始化新创建的节点的可能性。导入<i id="3af0d609">jetbrains.mps.lang.actions</i>语言后，您可以调用：</p>            <ul class="list _ul"><li class="list__item" id="4f97c769"><p>新的初始化节点<concept>（）</concept></p></li><li class="list__item" id="0f769113"><p>model.new初始化的节点（概念）</p></li><li class="list__item" id="180bb6d6"><p>node.new初始化的下一个/上一个同级（概念）</p></li><li class="list__item" id="178d9c78"><p>添加新的初始化（概念）</p></li><li class="list__item" id="97a34e4c"><p>设置新的初始化（概念）</p></li><li class="list__item" id="10b77696"><p>用新的初始化替换（概念）</p></li><li class="list__item" id="4871f521"><p>替换为已初始化的next / previous-sibling（Concept）</p></li></ul>         </aside>      </li></ul>   <h3 id="copy">复制</h3>   <p id="031b822f">为了保留模型的树形形状，一个节点最多只能有一个父节点。将一个节点作为子节点添加到父节点后，该节点会自动从其先前拥有的任何父节点分离。因此，创建节点的副本（包括其子树）可能会很方便。要创建现有节点的副本，可以使用复制操作。例如， <i id="c36517b5">node <> yourNode = myNode.copy</i>   </p>   <h3 id="replacewith">用。。。来代替</h3>   <p id="6feaa7f1">要将AST中的一个节点替换为另一个节点的实例，可以使用<i id="62bfce7d">“替换为”</i>操作。如果要同时替换和创建，则有一个快捷操作<i id="d7a15bb0">“用new（Concept）替换”</i> ，它将概念作为参数。</p>   <h3 id="deleteanddetachoperations">删除和分离操作</h3>   <p id="6aeec7f7">如果要从模型中删除节点，则可以使用<b id="5526d9d9">分离</b>操作。以后您仍然可以将分离的节点添加到模型中。</p><div class="last-modified" data-skip-index="skip">上次修改时间：2019年8月30日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="smodel-language.html">SModel语言</a> <a class="navigation-links__next" href="smodel-language-types.html">SModel语言类型</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>