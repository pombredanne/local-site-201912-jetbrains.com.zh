<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>SModel查询语言-帮助|帮助MPS</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="SModel+Query+language.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索MPS帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected>默认</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_mac_os_x" data-group="primary">Eclipse（Mac OS X）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_mac_os_x" data-group="primary">Mac OS X</option><option value="primary_mac_os_x_10.5_" data-group="primary">Mac OS X 10.5以上</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_default" data-group="secondary">默认</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_jbuilder" data-group="secondary">JBuilder的</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5以上</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="smodel-query-language.xml" data-toc="SModel+Query+language.html">SModel查询语言</h1>   <h2 id="smodel.querylanguage">smodel.query语言</h2>   <p id="f6f80861"><i id="80a24154">jetbrains.mps.lang.smodel.query</i>语言启用与<b id="225fc1bd">MPS控制台</b>使用的相同类型的查询：</p>   <p id="fabe25f6">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/console-query.png"><img alt="控制台查询" title="控制台查询" src="/help/img/idea/2019.2/console-query.png" id="c72162b3" width="500" height="192"></a></figure>   <p></p>   <p id="0be040de">允许将此语言<b id="a1702496">与</b> -statement一起使用，它限制了执行查询的范围。</p>   <p id="4cccbea0">      </p><figure><img alt="smodelquery1" title="smodelquery1" src="/help/img/idea/2019.2/smodelquery1.png" id="2eb571f5" width="938" height="101"></figure>   <p></p>   <p id="b9e85278"> </p>   <p id="ff061448">范围可以限制为项目，模块，模型或其中的一系列。</p>   <h3 id="operationparameters">操作参数</h3>   <p id="e94c2a8f">可以使用操作参数对smodel.query操作的行为进行轻微更改，该操作参数可以在操作名称之后指定。</p>   <p id="1202badd">      </p><figure><img alt="smodelquery2" title="smodelquery2" src="/help/img/idea/2019.2/smodelquery2.png" id="7069d2cf" width="938" height="107"></figure>   <p></p>   <p id="ca01f302">可能的参数包括：</p>   <p id="ef3e9655">      <b id="315796cb">范围</b> -每个命令在<b id="5d177296">与</b>语句来周围指定范围进行操作。<b id="5dbc64da">scope</b>参数更改单个命令的操作范围。</p>   <p id="6bbf7091">      <b id="8d4794bd">精确</b> -可以在<b id="730485d0">#instances</b>操作中使用，以查找指定概念的实例，但不包括后代概念的实例</p>   <p id="a8e7d7fd"> </p>   <h3 id="scopespecification">范围规格</h3>   <p id="62c04204">可以使用<b id="8a40ef5b">scope</b>参数为单个查询显式指定执行查询的<b id="8a40ef5b">范围。</b>此选项将覆盖从<b id="1965d76c">with</b>语句派生的范围。</p>   <p id="cf3e5edc">scope参数可以由模型或模块序列组成，也可以是SearchScope类型的任意表达式。</p>   <p id="f1919e76">      </p><figure><img alt="smodelquery3" title="smodelquery3" src="/help/img/idea/2019.2/smodelquery3.png" id="8036f942" width="938" height="96"></figure>      <br>   <p></p>   <p id="4445c9ad">如果未指定查询的<b id="947d0c9c">scope</b>参数，则在由<b id="1dcf7f4b">with</b>语句引起的<b id="1dcf7f4b">合并</b>范围内执行查询。为避免混淆，不支持<b id="2eb73006">带</b>嵌套语句。<b id="d2218f0b">With</b>语句可以从模型，模块，这些序列，从现有SearchScope对象的项目中构造范围。<br>       <br>用<b id="91c5697a">with</b>语句构造的作用域仅包括可编辑模型，以便可以在该范围内安全地执行修改操作。</p>   <p id="4d988831">      </p><figure><img alt="smodelquery4" title="smodelquery4" src="/help/img/idea/2019.2/smodelquery4.png" id="bfeac437" width="938" height="117"></figure>      <br>   <p></p>   <aside class="note " rel="4d988831" id="a529da04" data-title="">      <p id="36d164be">当将范围明确设置为查询参数时，查询将按原样使用它，并且不会丢弃只读模型，因此以下两个查询显示不同的行为：</p><figure><img alt="smodelquery5" title="smodelquery5" src="/help/img/idea/2019.2/smodelquery5.png" id="bfcc5a41" width="938" height="141"></figure>         <br>      <p></p>   </aside>   <p id="d308e097">      <b id="0892cc1d">在控制台插件中使用smodel查询</b>   </p>   <p id="1eec7884">可以在控制台中使用查询，而无需使用<b id="13bcaa86">with</b>换行。此处未指定查询的默认范围明确包含当前项目中的所有可编辑模型。此外，在明确指定范围时，一些其他选项可用。<br>      <br>   </p>   <h3 id="queriesdefinedinthesmodel.querylanguage">smodel.query语言中定义的查询</h3>   <p id="902bc2cb">      <b id="4ec6b800">#</b> instances-快速搜索指定概念的实例</p>   <p id="78859186">      <b id="ae6ec2f9">#usages-</b>快速搜索指定节点的使用情况</p>   <p id="6fc6d694">      <b id="a71b20d0">#modules-作用域中的</b>所有模块</p>   <p id="5f49b821">      <b id="a5841c51">#models-</b>范围内的所有模型</p>   <p id="4cda2c5c">      <b id="87551917">#nodes-</b>范围内的所有节点</p>   <p id="b2ce7f68">      <b id="e5935040">#</b> references-范围内的所有引用</p>   <p id="6981663f"> </p><div class="last-modified" data-skip-index="skip">上次修改时间：2019年8月30日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="smodel-language-queries-references.html">SModel语言查询参考</a> <a class="navigation-links__next" href="open-api-accessing-models-from-code.html">Open API-从代码访问模型</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>