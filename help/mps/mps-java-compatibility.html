<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>MPS Java compatibility - Help | MPS</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="MPS+Java+compatibility.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search MPS Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Default</option><option data-group="primary" value="primary_default_for_gnome">Default for GNOME</option><option data-group="primary" value="primary_default_for_kde">Default for KDE</option><option data-group="primary" value="primary_default_for_xwin">Default for XWin</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="primary" value="primary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_jbuilder">JBuilder</option><option data-group="primary" value="primary_mac_os_x">Mac OS X</option><option data-group="primary" value="primary_mac_os_x_10.5_">Mac OS X 10.5+</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_default">Default</option><option data-group="secondary" value="secondary_default_for_gnome">Default for GNOME</option><option data-group="secondary" value="secondary_default_for_kde">Default for KDE</option><option data-group="secondary" value="secondary_default_for_xwin">Default for XWin</option><option data-group="secondary" value="secondary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="secondary_emacs">Emacs</option><option data-group="secondary" value="secondary_jbuilder">JBuilder</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Mac OS X 10.5+</option><option data-group="secondary" value="secondary_netbeans">NetBeans</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="MPS+Java+compatibility.html" id="mps-java-compatibility.xml">MPS Java compatibility</h1>   <h2 id="configuration">Configuration</h2>   <p id="b1815e85">The&nbsp;<b id="ca7cada3">Java Compiler</b> configuration tab in the preferences window&nbsp;only holds a single setting - <i id="afeda1e9">Project bytecode version</i>.</p>   <p id="4505fb8e">      <figure><a class="lightbox" href="/help/img/idea/2019.2/Screen-Shot-2015-01-30-at-17-20-40.png"><img alt="Screen Shot 2015 01 30 at 17 20 40" title="Screen Shot 2015 01 30 at 17 20 40" src="/help/img/idea/2019.2/Screen-Shot-2015-01-30-at-17-20-40.png" id="e38f9cb9" width="600" height="434"></a></figure>   </p>   <p id="d87f939b">This setting defines the bytecode version of all Java classes compiled by MPS. These classes include classes generated from languages aspects, classes of the runtime solutions, classes of the sandbox solutions, and so on.</p>   <p id="7fb4257c">By default, the bytecode version is set to JDK Default. This means that the version of the compiled classes will be equal to the version of Java, which MPS is running under. For example, if you run MPS under JDK 1.8 and JDK Default is selected, the bytecode version will be 1.8.</p>   <p id="2fa9bb0c">The other options for project bytecode version are 1.6, 1.7 and 1.8.</p>   <aside class="tip sideblock" data-title="" rel="2fa9bb0c" id="0e9812fb">      <p id="98a42c7e">Note that MPS since version 3.4 can only run on JDK 1.8 and later, so when compiling languages or MPS plugins you have to set the <b id="64917128">bytecode version</b> to 1.8, otherwise your languages/plugins wont be loaded. Setting the <b id="bd05eb66">byte code</b>         <b id="0546bf06"> version</b> to earlier JDK versions is only useful for solution-only projects, which are generated into Java sources that you then compile and use outside of MPS.</p>   </aside>   <h2 id="buildscripts">Build scripts</h2>   <p id="279b340e">Also, dont forget to set java compliance level in the&nbsp;<b id="710d3f8a">build scripts</b>&nbsp;of your project. It should be the same as the project bytecode version.</p>   <p id="f7e15ea5">      <figure><img alt="Screen Shot 2015 01 29 at 18 08 28" title="Screen Shot 2015 01 29 at 18 08 28" src="/help/img/idea/2019.2/Screen-Shot-2015-01-29-at-18-08-28.png" id="528de560" width="600" height="175"></figure>   </p>   <h2 id="usingjavaclassescompiledwithjdk1.8">Using java classes compiled with JDK 1.8</h2>   <p id="efd6c862">In the MPS modules pool you can find the JDK solution, which holds the classes of the running Java. So when you start MPS under JDK 1.8, the latest Java Platform classes will be available in the JDK solution.</p>   <p id="1f5d9a07">You can also use any&nbsp;<b id="331cb1f4">external Java classes</b>, compiled under JDK 1.8 by adding them as Java&nbsp;<b id="1452de74">stubs</b>.</p>   <p id="aed93dd3">Since version 1.8, Java&nbsp;<b id="b394d655">interfaces</b>&nbsp;can contain&nbsp;<b id="5cd8bbf1">default</b>&nbsp;and&nbsp;<b id="cb311476">static</b>&nbsp;methods. At present, MPS does not support creating them in your&nbsp;<i id="69bd8a55">BaseLanguage</i>&nbsp;code, but you can call static and default methods defined in external Java classes, for example, classes of the Java Platform.</p>   <h3 id="staticinterfacemethodcall">Static interface method call</h3>   <p id="537c57dd">      <figure><a class="lightbox" href="/help/img/idea/2019.2/Screen-Shot-2015-01-22-at-02-52-51.png"><img alt="Screen Shot 2015 01 22 at 02 52 51" title="Screen Shot 2015 01 22 at 02 52 51" src="/help/img/idea/2019.2/Screen-Shot-2015-01-22-at-02-52-51.png" id="cf425f48" width="600" height="244"></a></figure>   </p>   <p id="ce32a544">In the example, we sort a list with the&nbsp;<i id="3bbf1243">Comparator.reverseOrder()</i>.&nbsp;<i id="ed4b6803">Comparator</i>&nbsp;is an interface from&nbsp;<i id="5aba6963">java.util</i>, and&nbsp;<i id="d70849ab">reverseOrder()</i>&nbsp;is its static method, which was introduced in Java 1.8.</p>   <h3 id="defaultinterfacemethods">Default interface methods</h3>   <p id="c600ed21">Java 8 introduced also default methods. These are methods implemented directly in the interface. You can read about default methods here:&nbsp;<a href="http://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html" data-external="true" target="_blank" rel="noopener noreferrer">http://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html</a>   </p>   <p id="75887489">These methods can be called just like the usual instance methods.&nbsp;Sometimes, however, you need to call the default method directly from an interface that your class is implementing. For example, in case of multiple inheritance when a class implements several interfaces, each containing a default method with the same signature.</p>   <div class="code-block" data-lang="none">public interface A {
&nbsp;&nbsp;public default void foo()&nbsp;{
 &nbsp;&nbsp;&nbsp;&nbsp;System.out.println("A"); &nbsp;&nbsp;
  }
}

public interface B {
&nbsp;&nbsp;public default void foo()&nbsp;{
 &nbsp;&nbsp;&nbsp;&nbsp;System.out.println("B"); &nbsp;&nbsp;
  }
}
</div>   <p id="4a9b8e3b">In that case foo() can be called explicitly on one of the interfaces via a&nbsp;<i id="12c71ef5">SuperInterfaceMethodCall</i>&nbsp;construction, which is newly located in the&nbsp;<i id="056e1d17">jetbrains.mps.baseLanguage.jdk8</i>&nbsp;language.</p>   <p id="b2cb8236">      <figure><a class="lightbox" href="/help/img/idea/2019.2/Screen-Shot-2015-01-29-at-20-39-29.png"><img alt="Screen Shot 2015 01 29 at 20 39 29" title="Screen Shot 2015 01 29 at 20 39 29" src="/help/img/idea/2019.2/Screen-Shot-2015-01-29-at-20-39-29.png" id="bf18e919" width="600" height="180"></a></figure>   </p>   <p id="8dc8fd94">The&nbsp;<i id="2f85c898">jetbrains.mps.baseLanguage.jdk8</i>&nbsp;language allows users to create the 'default' methods in BaseLanguage interfaces.</p>   <p id="6edb4f16">      <figure><img alt="comx1" title="comx1" src="/help/img/idea/2019.2/comx1.png" id="85d3dc56" width="1004" height="177"></figure>   </p>   <p id="c3d93b66">The 'default' keyword is implemented by the <i id="3810b4ad">DefaultModifier</i> concept which extends the <i id="ffc7e560">Modifier</i> concept in the BaseLanguage.</p>   <p id="8f46a600">The transformation/substitute menu + some cosy intentions are also supplied.</p>   <p id="b016a632">      <figure><img alt="comx2" title="comx2" src="/help/img/idea/2019.2/comx2.png" id="b94dc2a7" width="1006" height="111"></figure>      <figure><img alt="comx3" title="comx3" src="/help/img/idea/2019.2/comx3.png" id="c6320206" width="1003" height="230"></figure>   </p>   <h2 id="usingjavaplatformapi">Using Java platform API</h2>   <p id="99ce32f5">Java 8 introduced lambda expressions, of which you can learn more here:&nbsp;<a href="http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html" data-external="true" target="_blank" rel="noopener noreferrer">http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html</a>   </p>   <p id="495b8f94">MPS doesnt yet have a language that would be generated into lambda-expressions. Instead, it has its own closure language, which is compatible with the new Java API!</p>   <p id="13a1a012">Heres the example of an interaction with the new JDK 8 Collections API:</p>   <p id="33201c63">      <figure><a class="lightbox" href="/help/img/idea/2019.2/Screen-Shot-2015-01-29-at-18-03-43.png"><img alt="Screen Shot 2015 01 29 at 18 03 43" title="Screen Shot 2015 01 29 at 18 03 43" src="/help/img/idea/2019.2/Screen-Shot-2015-01-29-at-18-03-43.png" id="04a6ff32" width="600" height="139"></a></figure>   </p>   <p id="30f84e2e">The&nbsp;<i id="55043a3d">forEach()</i>&nbsp;method is the new default method of&nbsp;<i id="29a0c315">java.lang.Iterable</i>. It takes a&nbsp;<i id="cff708b3">Consumer</i>&nbsp;interface as a parameter.&nbsp;<i id="8bac4c4f">Consumer</i>&nbsp;is a functional interface as it only has one method. In Java 8 it would be possible to pass a lambda expression to&nbsp;<i id="e32f2029">forEach()</i>. In MPS you can pass the MPS closure. A closure knows the type of the parameter taken by&nbsp;<i id="ce1006cb">forEach()</i>&nbsp;while generating and it will be generated exactly to the correct instance of the&nbsp;<i id="f3bdf53f">Consumer</i>.</p><div class="last-modified" data-skip-index="skip">Last modified: 30 August 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="base-language-extensions-style-guide.html">Base Language Extensions Style Guide</a><a class="navigation-links__next" href="implementing-generators-for-baselanguage-s-extensions.html">Implementing generators for BaseLanguage's extensions</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>