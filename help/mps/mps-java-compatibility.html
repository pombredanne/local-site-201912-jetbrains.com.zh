<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>MPS Java兼容性-帮助|帮助MPS</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="MPS+Java+compatibility.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索MPS帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected>默认</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_mac_os_x" data-group="primary">Eclipse（Mac OS X）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_mac_os_x" data-group="primary">Mac OS X</option><option value="primary_mac_os_x_10.5_" data-group="primary">Mac OS X 10.5以上</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_default" data-group="secondary">默认</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_jbuilder" data-group="secondary">JBuilder的</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5以上</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="mps-java-compatibility.xml" data-toc="MPS+Java+compatibility.html">MPS Java兼容性</h1>   <h2 id="configuration">组态</h2>   <p id="b1815e85">首选项窗口中的<b id="ca7cada3">Java编译器</b>配置选项卡仅包含一个设置- <i id="afeda1e9">项目字节码版本</i> 。</p>   <p id="4505fb8e">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Screen-Shot-2015-01-30-at-17-20-40.png"><img alt="屏幕截图2015年1月30日的17 20 40" title="屏幕截图2015年1月30日的17 20 40" src="/help/img/idea/2019.2/Screen-Shot-2015-01-30-at-17-20-40.png" id="e38f9cb9" width="600" height="434"></a></figure>   <p></p>   <p id="d87f939b">此设置定义MPS编译的所有Java类的字节码版本。这些类包括从语言方面生成的类，运行时解决方案的类，沙箱解决方案的类，等等。</p>   <p id="7fb4257c">默认情况下，字节码版本设置为JDK Default。这意味着已编译类的版本将与运行MPS的Java版本相同。例如，如果在JDK 1.8下运行MPS并选择了JDK Default，则字节码版本将为1.8。</p>   <p id="2fa9bb0c">项目字节码版本的其他选项是1.6、1.7和1.8。</p>   <aside class="tip sideblock" rel="2fa9bb0c" id="0e9812fb" data-title="">      <p id="98a42c7e">请注意，从3.4版开始的MPS只能在JDK 1.8和更高版本上运行，因此在编译语言或MPS插件时，必须将<b id="64917128">字节码版本</b>设置为1.8，否则将不会加载您的语言/插件。将<b id="bd05eb66">字节代码</b> <b id="0546bf06">版本</b>设置为早期JDK版本仅对仅解决方案的项目有用，这些项目将生成为Java源，然后在MPS之外进行编译和使用。</p>   </aside>   <h2 id="buildscripts">构建脚本</h2>   <p id="279b340e">另外，不要忘记在项目的<b id="710d3f8a">构建脚本</b>中设置Java遵从级别。它应该与项目字节码版本相同。</p>   <p id="f7e15ea5">      </p><figure><img alt="屏幕截图2015年1月29日在18 08 28" title="屏幕截图2015年1月29日在18 08 28" src="/help/img/idea/2019.2/Screen-Shot-2015-01-29-at-18-08-28.png" id="528de560" width="600" height="175"></figure>   <p></p>   <h2 id="usingjavaclassescompiledwithjdk1.8">使用通过JDK 1.8编译的Java类</h2>   <p id="efd6c862">在MPS模块池中，您可以找到JDK解决方案，其中包含正在运行的Java的类。因此，当您在JDK 1.8下启动MPS时，JDK解决方案中将提供最新的Java平台类。</p>   <p id="1f5d9a07">您还可以使用在JDK 1.8下编译的任何<b id="331cb1f4">外部Java类</b> ，方法是将它们添加为Java <b id="1452de74">存根</b> 。</p>   <p id="aed93dd3">从1.8版开始，Java <b id="b394d655">接口</b>可以包含<b id="5cd8bbf1">默认</b>方法和<b id="cb311476">静态</b>方法。当前，MPS不支持在<i id="69bd8a55">BaseLanguage</i>代码中创建它们，但是您可以调用在外部Java类（例如，Java Platform的类）中定义的静态和默认方法。</p>   <h3 id="staticinterfacemethodcall">静态接口方法调用</h3>   <p id="537c57dd">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Screen-Shot-2015-01-22-at-02-52-51.png"><img alt="屏幕截图2015年01月22日在02 52 51" title="屏幕截图2015年01月22日在02 52 51" src="/help/img/idea/2019.2/Screen-Shot-2015-01-22-at-02-52-51.png" id="cf425f48" width="600" height="244"></a></figure>   <p></p>   <p id="ce32a544">在示例中，我们使用<i id="3bbf1243">Comparator.reverseOrder（）</i>对列表进行排序。<i id="ed4b6803">Comparator</i>是<i id="5aba6963">java.util</i>的接口， <i id="d70849ab">reverseOrder（）</i>是其静态方法，该方法在Java 1.8中引入。</p>   <h3 id="defaultinterfacemethods">默认接口方法</h3>   <p id="c600ed21">Java 8还引入了默认方法。这些是直接在界面中实现的方法。您可以在此处阅读有关默认方法的信息： <a href="http://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html" rel="noopener noreferrer" data-external="true" target="_blank">http</a> : <a href="http://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html" rel="noopener noreferrer" data-external="true" target="_blank">//docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html</a>   </p>   <p id="75887489">可以像通常的实例方法一样调用这些方法。但是，有时您需要直接从您的类正在实现的接口中调用默认方法。例如，在多继承的情况下，一个类实现多个接口，每个接口都包含具有相同签名的默认方法。</p>   <div class="code-block" data-lang="none">公共接口A {公共默认void foo（）{System.out.println（“ A”）; }}公共接口B {公共默认void foo（）{System.out.println（“ B”）; }}</div>   <p id="4a9b8e3b">在那种情况下，可以通过<i id="12c71ef5">SuperInterfaceMethodCall</i>构造在接口之一上显式调用foo（），该构造新位于<i id="056e1d17">jetbrains.mps.baseLanguage.jdk8</i>语言中。</p>   <p id="b2cb8236">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Screen-Shot-2015-01-29-at-20-39-29.png"><img alt="屏幕截图2015年1月29日在20 39 29" title="屏幕截图2015年1月29日在20 39 29" src="/help/img/idea/2019.2/Screen-Shot-2015-01-29-at-20-39-29.png" id="bf18e919" width="600" height="180"></a></figure>   <p></p>   <p id="8dc8fd94"><i id="2f85c898">jetbrains.mps.baseLanguage.jdk8</i>语言允许用户在BaseLanguage接口中创建“默认”方法。</p>   <p id="6edb4f16">      </p><figure><img alt="comx1" title="comx1" src="/help/img/idea/2019.2/comx1.png" id="85d3dc56" width="1004" height="177"></figure>   <p></p>   <p id="c3d93b66">“ default”关键字由<i id="3810b4ad">DefaultModifier</i>概念实现，该概念在BaseLanguage中扩展了<i id="ffc7e560">Modifier</i>概念。</p>   <p id="8f46a600">还提供了转换/替换菜单+一些舒适的意图。</p>   <p id="b016a632">      </p><figure><img alt="comx2" title="comx2" src="/help/img/idea/2019.2/comx2.png" id="b94dc2a7" width="1006" height="111"></figure>      <figure><img alt="comx3" title="comx3" src="/help/img/idea/2019.2/comx3.png" id="c6320206" width="1003" height="230"></figure>   <p></p>   <h2 id="usingjavaplatformapi">使用Java平台API</h2>   <p id="99ce32f5">Java 8引入了lambda表达式，您可以在此处了解更多信息： <a href="http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html" rel="noopener noreferrer" data-external="true" target="_blank">http</a> : <a href="http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html" rel="noopener noreferrer" data-external="true" target="_blank">//docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html</a>   </p>   <p id="495b8f94">MPS尚没有可生成为lambda表达式的语言。相反，它具有自己的关闭语言，该语言与新的Java API兼容！</p>   <p id="13a1a012">以下是与新的JDK 8 Collections API进行交互的示例：</p>   <p id="33201c63">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Screen-Shot-2015-01-29-at-18-03-43.png"><img alt="屏幕截图2015年1月29日在18 03 43" title="屏幕截图2015年1月29日在18 03 43" src="/help/img/idea/2019.2/Screen-Shot-2015-01-29-at-18-03-43.png" id="04a6ff32" width="600" height="139"></a></figure>   <p></p>   <p id="30f84e2e"><i id="55043a3d">forEach（）</i>方法是<i id="29a0c315">java.lang的新默认方法<i id="29a0c315">。可迭代的</i> 。它以<i id="cff708b3">使用者</i>接口作为参数。<i id="8bac4c4f">消费者</i>是一种功能接口，因为它只有一种方法。在Java 8中，可以将lambda表达式传递给<i id="e32f2029">forEach（）</i> 。在MPS中，您可以传递MPS闭包。一个闭包在生成时就知道<i id="ce1006cb">forEach（）</i>所采用的参数的类型，并且该闭包将完全根据<i id="f3bdf53f">Consumer</i>的正确实例生成。</i></p><div class="last-modified" data-skip-index="skip"><i id="29a0c315">上次修改时间：2019年8月30日</i></div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><i id="29a0c315"><a class="navigation-links__prev" href="base-language-extensions-style-guide.html">基本语言扩展样式指南</a> <a class="navigation-links__next" href="implementing-generators-for-baselanguage-s-extensions.html">为BaseLanguage扩展实现生成器</a></i></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>