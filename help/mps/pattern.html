<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Pattern - Help | MPS</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Pattern.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search MPS Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Default</option><option data-group="primary" value="primary_default_for_gnome">Default for GNOME</option><option data-group="primary" value="primary_default_for_kde">Default for KDE</option><option data-group="primary" value="primary_default_for_xwin">Default for XWin</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="primary" value="primary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_jbuilder">JBuilder</option><option data-group="primary" value="primary_mac_os_x">Mac OS X</option><option data-group="primary" value="primary_mac_os_x_10.5_">Mac OS X 10.5+</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_default">Default</option><option data-group="secondary" value="secondary_default_for_gnome">Default for GNOME</option><option data-group="secondary" value="secondary_default_for_kde">Default for KDE</option><option data-group="secondary" value="secondary_default_for_xwin">Default for XWin</option><option data-group="secondary" value="secondary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="secondary_emacs">Emacs</option><option data-group="secondary" value="secondary_jbuilder">JBuilder</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Mac OS X 10.5+</option><option data-group="secondary" value="secondary_netbeans">NetBeans</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Pattern.html" id="pattern.xml">Pattern</h1>   <h2 id="thepatternlanguage">The Pattern language</h2>   <p id="7cb83750">The pattern language has a single purpose - to define patterns of model structures. Those patterns form visual representations of nodes you want to match. A pattern matches a node if the node's property values are equal to those specified in the pattern, node's references point to the same targets that the ones of the pattern do and the corresponding children match the appropriate children of the pattern.</p>   <p id="652e334d">Also patterns may contain variables for nodes, references and properties, which then match any node/reference/property. On top of that the variables will hold the actual values upon a successful match.</p>   <h2 id="patternexpression">PatternExpression</h2>   <p id="847eab81">The single most important concept of the pattern language is <i id="daec1399">PatternExpression</i>. It contains a pattern as its single arbitrary node. Also, the node can specify the following variables:</p>   <ul class="list _ul"><li class="list__item" id="19a04054"><p>#name - a node variable, a placeholder for a node. Stores the matching node</p></li><li class="list__item" id="48e47b06"><p>#name - a reference variable, a placeholder for a reference. Stores the reference's target, i.e. a node.</p></li><li class="list__item" id="5c3bc17a"><p>$name - a property variable, a placeholder for a property value. Stores the property value, i.e. a string.</p></li><li class="list__item" id="d310006f"><p>*name - a list variable, a placeholder for nodes in the same role. Stores the list of nodes.</p></li></ul>   <p id="d295ac94">Antiquotations may be in particular useful when used inside a pattern, just like inside quotations (see <a href="typesystem.html#antiquotations">Antiquotations</a>).</p>   <h2 id="examples">Examples</h2>   <p id="50deb8da">      <b id="43e13e5c">1.</b> The following pattern matches against any <i id="7b8db594">InstanceMethodDeclaration</i> without parameters and a return type:<br>       <figure><img alt="pattern0" title="pattern0" src="/help/img/idea/2019.2/pattern0.png" id="7e81555a" width="226" height="74"></figure>   </p>   <p id="bdb45f8b">Captured variables:</p>   <div class="table-wrapper"><table class=" wide" width="100%" id="97482d79"><thead><tr id="34a6e1f9" class="ijRowHead"><th id="48bfad13">            <p id="25a9b528">$methodName</p>         </th><th id="0a33182a">            <p id="a73aa1da">               <i id="6303de68">string</i>            </p>         </th><th id="2870a560">            <p id="1031dbf8">method's name</p>         </th></tr></thead><tbody><tr id="41d5dc28" class="ijRowOdd"><td id="df1ee427">            <p id="1d1c3fe7">#statementList</p>         </td><td id="e33687d8">            <p id="9401cb38">               <i id="e978957a">node&lt;StatementList&gt;</i>            </p>         </td><td id="96006fb9">            <p id="89f2cb14">statements</p>         </td></tr></tbody></table></div>   <p id="92cbb932">      <b id="ea34e761">2.</b> The following pattern matches against a <i id="8315dc06">ClassifierType</i> with the actual classifier specified inside an antiquotation expression and with any quantity of any type parameters:<br>       <img alt="pattern" title="pattern" src="/help/img/idea/2019.2/pattern.png" id="e2337b58" width="369" height="22" class="inline-icon-369">   </p>   <p id="a643de29">Captured variables:</p>   <div class="table-wrapper"><table class=" wide" width="100%" id="afa01bd4"><thead><tr id="47be8ca0" class="ijRowHead"><th id="461bae9d">            <p id="e87223b0">*l</p>         </th><th id="0ce0bae5">            <p id="188076a8">               <i id="99adade7">nlist&lt;Type&gt;</i>            </p>         </th><th id="5d113490">            <p id="1b71afbd">class type's parameters</p>         </th></tr></thead><tbody><tr id="79a78b79" class="ijRowOdd"><td id="1fc2dfaa">            <p id="280a5d19">#ignored</p>         </td><td id="6f79344e">            <p id="08a79c7f">               <i id="91271d7e">node&lt;Type&gt;</i>            </p>         </td><td id="10cf2f49">            <p id="b11bc0d1">used as wildcard, its contents is ignored. Means that parameters are arbitrary</p>         </td></tr></tbody></table></div>   <h2 id="usingpatterns">Using patterns</h2>   <h3 id="matchstatement">Match statement</h3>   <p id="f0c96113">Patterns are typically used as conditions in match statements. Pattern variables can be referenced from inside of the match statement.<br> For example:<br>       <figure><img alt="Pattern2" title="Pattern2" src="/help/img/idea/2019.2/Pattern2.png" id="35d294f2" width="368" height="209"></figure>      <br> this piece of code examines a node <i id="3ec9a4de">n</i> and checks whether it satisfies the first or the second condition. Then the statement in the corresponding (matching) block is executed. A pattern variable <i id="851e9aaf">$name</i> is used in a first block to print out the name of a node. In our case the node holds a variable declaration.</p>   <h3 id="otherusages">Other usages</h3>   <p id="c943eb2a">Patterns are also used in several other language constructs in MPS. They may appear:</p>   <ul class="list _ul"><li class="list__item" id="74cb1768"><p>as conditions on applicable nodes of typesystem/replacement/subtyping/other rules of typesystem language (See <a href="typesystem.html#inferencerules">Inference rules</a>)</p></li><li class="list__item" id="a7c8bb36"><p>as supertype patterns in coerce statement and coerce expression (See <a href="using-typesystem.html#coerceexpression">Coerce</a>)</p></li><li class="list__item" id="e2ac70cc"><p>as conditions on node in generator rules</p></li><li class="list__item" id="fd64ad27"><p>as pattern in <i id="198dbedd">TransformStatement</i>&nbsp;used to define language migrations (See <a href="migrations.html">Migrations</a>)</p></li></ul>   <p id="28b8387e">You can also use patterns in your own languages.<br> Basically what&nbsp; happens is that a class is generated from a <i id="f955cb44">PatternExpression</i> and the expression itself is reduced to a constructor of this class. This class extends <i id="38f323ff">GeneratedMatchingPattern</i> and has a boolean method <i id="29c7eda6">match(SNode)</i>, which returns a boolean value indicating whether the node matches the pattern. It also holds a method <i id="f7fcfd05">getFieldValue(Stirng)</i> to get the values stored in pattern variables after a successful match.<br> So to develop your own language constructs using patterns, you can call these two methods in the generator template for your constructs.</p>   <hr id="d7520871"><div class="last-modified" data-skip-index="skip">Last modified: 30 August 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="open-api-accessing-models-from-code.html">Open API - accessing models from code</a><a class="navigation-links__next" href="build-language.html">Build Language</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>