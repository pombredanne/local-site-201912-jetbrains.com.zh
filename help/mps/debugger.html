<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>调试器-帮助| MPS</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Debugger.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索MPS帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected>默认</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_mac_os_x" data-group="primary">Eclipse（Mac OS X）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_mac_os_x" data-group="primary">Mac OS X</option><option value="primary_mac_os_x_10.5_" data-group="primary">Mac OS X 10.5以上</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_default" data-group="secondary">默认</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_jbuilder" data-group="secondary">JBuilder的</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5以上</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="debugger.xml" data-toc="Debugger.html">调试器</h1>   <p id="8fc06e4a">MPS提供了一个API，用于创建自定义调试器以及与Java调试器集成。有关MPS调试器功能的说明，请参见“ <a href="using-mps-debugger.html">调试器使用情况”页面</a> 。</p>   <p id="19c1aa1c">      </p><ul data-skip-index="skip"><li class="list__item"><a href="#thefundamentals">基本面</a></li><li class="list__item"><a href="#debuggingbaselanguageanditsextensions-integrationwiththejavadebugger">调试BaseLanguage及其扩展-与Java调试器集成</a></li><li class="list__item"><a href="#startupofarunconfigurationunderjavadebugger">在Java调试器下启动运行配置</a></li><li class="list__item"><a href="#customviewers">自定义观众</a></li><li class="list__item"><a href="#creatingcustomdebugger">创建自定义调试器</a></li><li class="list__item"><a href="#traceablenodes">可追踪节点</a></li><li class="list__item"><a href="#breakpointcreators">断点创作者</a></li></ul>   <p></p>      <h3 id="thefundamentals">基本面</h3>   <p id="e45fed82">为了调试从用户模型生成的代码，MPS需要：</p>   <ul class="list _ul"><li class="list__item" id="41f3386b"><p>跟踪用户模型中的节点，直到生成的代码，以便能够在调试器中无缝匹配两个世界</p></li><li class="list__item" id="f7580160"><p>了解，可以在哪些节点上创建哪种类型的断点</p></li><li class="list__item" id="a4039d98"><p>知道在调试器中启动调试代码的选项</p></li><li class="list__item" id="822bce72"><p>（可选）还具有一组定制的查看器，以向用户显示已调试程序的内存中的数据的当前值</p></li></ul>   <p id="48026fb9">MPS尝试使尽可能多的过程自动化，但是，在某些情况下，语言设计人员还必须承担举重的责任。假设您有一种语言，我们称其为<b id="7cddbcdf">high.level</b> ，它以某种语言<b id="86fb6db9">low.level</b>生成代码，而语言又直接生成为文本（ <b id="19529893">high.level</b>和<b id="89f6cc68">low.level</b>之间可能还有其他几个步骤）。假设从<b id="05ff56a4">low.level</b>生成的文本包含java类，并且您希望将<b id="ce7ab576">高层</b>语言与MPS java调试器引擎集成在一起。请参阅以下说明表：</p>   <div class="table-wrapper"><table width="100%" id="832818ad"><thead><tr id="cefe5ccf" class="ijRowHead"><th id="8701d98f">            <p id="1002d2fa">               <b id="b433bbbb">高级</b>扩展或生成为<i id="4365b93d">BaseLanguage</i>            </p>         </th><th id="a1a1bcea">            <p id="f135af7a">不必做任何事情。</p>         </th></tr></thead><tbody><tr id="cfe0a78f" class="ijRowOdd"><td id="2fa8122d">            <p id="94a9f85c">               <b id="e423d810">high.level</b>不会扩展也不会生成<i id="30f102b2">BaseLanguage</i>            </p>         </td><td id="4569e16b">            <p id="1198d549">指定<b id="3d4ad9e4">low.level</b>中的哪些概念是可追溯的。<br>使用<code class="code">breakpoint creators</code>能够为<b id="5aba690c">high.level</b>设置断点。</p>         </td></tr></tbody></table></div>      <h3 id="debuggingbaselanguageanditsextensions-integrationwiththejavadebugger">调试BaseLanguage及其扩展-与Java调试器集成</h3>   <p id="aabff47b">要将您的<i id="2a86317d">BaseLanguage</i>生成的语言与MPS Java调试器引擎集成在一起，几乎不需要指定任何内容。MPS可以在<i id="14e0bd74">trace.info</i>文件中跟踪生成跟踪，因此可以按预期设置断点，并且调试器可以正确地逐步执行DSL代码。</p>   <aside class="tip sideblock" rel="aabff47b" id="4ebaa97a" data-title="">      <p id="f9eefed2">当节点通过<b id="125af950">归约规则</b>进行转换时，自动跟踪会识别情况，并将转换的跟踪记录保留在适当模型的<i id="e96226a8">trace.info</i>文件中。对于没有通过自己的<b id="62338ad5">归约规则进行归约的</b>概念，您可以明确指出，应将生成的代码的哪一部分保留在<i id="2e86511a">trace.info</i>文件中。<b id="4eccb257">$ TRACE $</b>宏用于此目的。</p>      <p id="adae5eb3">有关更多详细信息和<b id="60d69936">$ TRACE $</b>宏用法的示例，请参见可<a href="#traceablenodes">跟踪节点</a> 。</p>   </aside>   <h4 id="startupofarunconfigurationunderjavadebugger">在Java调试器下启动运行配置</h4>   <p id="243ad379">MPS提供了一种特殊的语言来为Java中生成的语言创建运行配置– <b id="528ffb09">jetbrains.mps.baseLanguage.runConfigurations</b> 。这些运行配置能够在调试器下自动启动。有关详细信息，请参见<a href="run-configurations.html#introduction">运行生成为Java的语言的配置</a> 。</p>      <h4 id="customviewers">自定义观众</h4>   <p id="80584592">当一个人在一个变量视图中查看变量和字段时，可能想要定义自己的方式来显示某些值。例如，集合可以显示为元素的集合，而不是具有其内部结构的普通对象。</p>   <p id="b702165b">为了创建自定义查看器，MPS具有<b id="fa160250">jetbrains.mps.debugger.java.customViewers</b>语言。</p>   <p id="40353869"><i id="f1268c8f">jetbrains.mps.debugger.java.customViewers</i>语言使人们可以编写自己的查看器来获取某种形式的数据。</p>   <p id="d5ee077b">customViewers语言的主要概念是自定义数据查看器。它接收原始的java值（堆栈中的对象），并返回所谓的watchable列表。可监视对象是一对值及其标签（将值分类的字符串，例如，值是否是方法，字段，元素，大小等），用于可监视对象的标签在<code class="code">custom watchables container</code> 。每个标签可以被分配一个图标。</p>   <p id="5bec0a7a">特定类型的查看器在<code class="code">custom viewer</code>根。在下表中<code class="code">custom viewer</code>部分描述：</p>   <div class="table-wrapper"><table width="100%" id="bf2fd1db"><thead><tr id="dd485912" class="ijRowHead"><th id="4b1131b3">            <p id="31bb5c7a">部分</p>         </th><th id="3f08ea45">            <p id="a2b3b158">描述</p>         </th></tr></thead><tbody><tr id="ca23c50d" class="ijRowOdd"><td id="1ecd487c">            <p id="1243c18c">               <b id="5116fd0c">用于类型</b>            </p>         </td><td id="193a5a8f">            <p id="dbdedb37">该查看器的目标类型。</p>         </td></tr><tr id="7145f50f" class="ijRowEven"><td id="32554623">            <p id="9b633e6d">               <b id="487190d8">可以包装</b>            </p>         </td><td id="f9ba2559">            <p id="21f20b2d">用于查看对象的附加过滤器。</p>         </td></tr><tr id="2d0a4109" class="ijRowOdd"><td id="92f5c957">            <p id="8ecd791a">               <b id="26c1fe9f">取得简报</b>            </p>         </td><td id="d77e0f09">            <p id="70a40372">对象的字符串表示形式。</p>         </td></tr><tr id="5afc4344" class="ijRowEven"><td id="e10d2d2e">            <p id="a7e6a4fd">               <b id="43a2b467">获得自定义的观看对象</b>            </p>         </td><td id="8ac589ec">            <p id="da2bcd10">此对象的子值。此函数的结果必须为类型<code class="code">watchable list</code> 。</p>         </td></tr></tbody></table></div>   <p id="a577e674">自定义查看器语言引入了两种新类型： <code class="code">watchable list</code>和<code class="code">watchable</code> 。</p>   <p id="61890313">这是针对的自定义查看器规范<code class="code">java.util.Map.Entry</code>类：</p>   <p id="8b620878">      </p><figure><img alt="地图条目查看器" title="地图条目查看器" src="/help/img/idea/2019.2/map-entry-viewer.png" id="dad34bf9" width="924" height="456"></figure>   <p></p>   <p id="c25c28a4">在这里，我们看到映射条目如何在调试器视图中显示：</p>   <p id="dd4c5252">      </p><figure><img alt="地图输入" title="地图输入" src="/help/img/idea/2019.2/map-entry.png" id="719d5529" width="260" height="58"></figure>   <p></p>   <aside class="tip sideblock" rel="dd4c5252" id="aadf70cb" data-title="">      <p id="22caa023">请注意，必须将<i id="30cf23a7">JDT-tools</i>解决方案导入您的插件解决方案中，才能编译您的自定义查看器。</p>   </aside>      <h3 id="creatingcustomdebugger">创建自定义调试器</h3>   <p id="6008576f">如果您的语言生成避免使用<i id="bc7e3496">BaseLanguage</i> ，则需要手动进行节点跟踪和断点指定。此外，如果要生成Java以外的语言，则必须将目标平台调试器附加到MPS中。 MPS提供的<b id="078e8e33">调试器API</b>允许您创建此类非Java调试器。所有必需的类均位于“ MPS调试器API”插件中。另请参见<a href="debugger-api.html">Debugger API说明</a> 。</p>   <p id="d250fd34">总而言之，当您定位<i id="f2c779d3">BaseLanguage</i>以外的语言时，通常需要指定：</p>   <ul class="list _ul"><li class="list__item" id="c2bacd9b"><p>应该跟踪的<a href="#traceablenodes">节点</a> （请参阅可跟踪的<a href="#traceablenodes">节点</a> ）</p></li><li class="list__item" id="f4f05add"><p>在哪些节点上可以创建<a href="#breakpointcreators">断点</a> （请参见<a href="#breakpointcreators">断点创建器</a> ）</p></li><li class="list__item" id="570db38c"><p>如何编译生成的源（请参阅<a href="howto-integrating-into-the-mps-make-framework.html">制作构面</a> ）</p></li><li class="list__item" id="6a9c8d7a"><p>如何在调试下启动应用程序（请参阅<a href="run-configurations.html#introduction">针对Java生成的语言运行配置</a> ）</p></li></ul>   <p id="c01c900d">并非所有这些步骤都是绝对必要的-其中哪些取决于实际语言。</p>   <aside class="tip sideblock" rel="c01c900d" id="630df0ca" data-title="">      <p id="73e967d8">与MPS捆绑在一起的<b id="1d8b720d">customizedDebugger</b>示例项目将为您提供一个易于<i id="4e60d0c1">理解</i>的非<i id="4e60d0c1">BaseLanguage</i> Java生成语言示例，该语言可自定义断点和节点跟踪以支持调试。</p>   </aside>   <p id="afc32e5e"> </p>      <h4 id="traceablenodes">可追踪节点</h4>   <p id="e453aa63">本节描述如何指定需要在<span class="filepath">跟踪.info</span>文件中保存一些其他信息的节点（例如，有关从节点生成的位置文本，可见变量，生成节点的文件名等信息）。 <span class="filepath">trace.info</span>文件包含允许使用生成的文本连接MPS中的节点的信息。例如，如果命中了断点，则Java调试器将告诉MPS源文件中的行号，并从该信息中获取实际的节点，MPS使用来自<span class="filepath">跟踪.info</span>文件的信息。</p>   <p id="5df9d5de">具体来说， <span class="filepath">trace.info</span>文件包含以下信息：</p>   <ul class="list _ul"><li class="list__item" id="fd7be7d3"><p>位置信息：文本文件的名称以及在其中生成节点的位置；</p></li><li class="list__item" id="56e139c6"><p>作用域信息：对于每个“作用域”节点（具有一些与其关联并在该节点的作用域中可见的变量）–作用域中可见的变量的名称和ID；</p></li><li class="list__item" id="d8dee8a0"><p>单元信息：对于每个“单元节点”（代表某种语言的某种单元，例如Java中的类）–节点所生成到的单元的名称。</p></li></ul>   <p id="042b9167">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/tracex1.png"><img alt="跟踪" title="跟踪" src="/help/img/idea/2019.2/tracex1.png" id="c26cd597" width="500" height="2216"></a></figure>   <p></p>   <p id="7dd5405b">概念<code class="code">TraceableConcept</code> ， <code class="code">ScopeConcept</code>和<code class="code">UnitConcept</code>语言的<code class="code">jetbrains.mps.lang.traceable</code>用于此目的。要将某些信息保存到<span class="filepath">trace.info</span>文件中，用户应从这些概念之一中派生并实现特定的行为方法。下表中描述了这些概念。</p>   <div class="table-wrapper"><table class=" wide" width="100%" id="71144259"><thead><tr id="b3433da1" class="ijRowHead"><th id="99e0a57c">            <p id="3dac33cb">概念</p>         </th><th id="af9a80a9">            <p id="9953e830">描述</p>         </th><th id="a1c7c2bc">            <p id="7ae44ccc">行为方法的实现</p>         </th><th id="8a3911a6">            <p id="40fae25f">例</p>         </th></tr></thead><tbody><tr id="5bfb101f" class="ijRowOdd"><td id="7a84c772">            <p id="1da26d4f">               <code class="code">TraceableConcept</code>            </p>         </td><td id="e3c35bf8">            <p id="79011f89">保存文本位置以及可以创建断点的概念。</p>         </td><td id="beddac26">            <p id="e622933d">               <code class="code">getTraceableProperty</code> –一些属性要保存到<span class="filepath">trace.info</span>文件中。</p>         </td><td id="0713e1db">            <p id="70ef1d56">               </p><figure><img alt="职位信息" title="职位信息" src="/help/img/idea/2019.2/positionInfo.png" id="54cdad79" width="462" height="207"></figure>            <p></p>         </td></tr><tr id="9d379ff4" class="ijRowEven"><td id="e4fd6360">            <p id="228fa72d">               <code class="code">ScopeConcept</code>            </p>         </td><td id="42e53f0e">            <p id="87225ea1">具有局部变量的概念，在范围内可见。</p>         </td><td id="31e6194b">            <p id="0e089609">               <code class="code">getScopeVariables</code> –范围中的变量声明。</p>         </td><td id="b5536aca">            <p id="8bfc9268">               </p><figure><img alt="范围信息" title="范围信息" src="/help/img/idea/2019.2/scopeInfo.png" id="f5b97585" width="607" height="181"></figure>            <p></p>         </td></tr><tr id="854fd1fb" class="ijRowOdd"><td id="e1a248d2">            <p id="c6fb629d">               <code class="code">UnitConcept</code>            </p>         </td><td id="dfbb23e6">            <p id="71a39892">生成到单独单元中的概念，例如Java中的类或内部类。</p>         </td><td id="040061c2">            <p id="e9f2e1a4">               <code class="code">getUnitName</code> –生成单位的名称。</p>         </td><td id="9d17d6f2">            <p id="9d72e116">               </p><figure><img alt="单位信息" title="单位信息" src="/help/img/idea/2019.2/unitInfo.png" id="06df02b1" width="611" height="322"></figure>            <p></p>         </td></tr></tbody></table></div>   <p id="30a3730d">      在生成文本的最后阶段，将创建<span class="filepath">trace.info</span>文件。因此，所描述的概念仅用于生成文本的语言中。每当通过<b id="6d534c93">简化规则</b>生成<i id="b9c20702">TraceableConcept</i> ， <i id="4a88133a">ScopeConcept</i>或<i id="987c49ac">UnitConcept</i>时，条目都会自动填充。</p>   <p id="7bab5ad9">当不可能进行自动跟踪时，可以使用$ TRACE $宏，以便将<b id="e8c12c85">language.high中</b>概念的所需输入节点与生成的代码明确匹配。<br>       </p><figure><img alt="跟踪马可" title="跟踪马可" src="/help/img/idea/2019.2/traceMacro.png" id="4a9c213b" width="741" height="343"></figure>   <p></p>      <h4 id="breakpointcreators">断点创作者</h4>   <p id="ed892e11">要指定如何在各个节点上创建断点，请root <code class="code">breakpoint creators</code>用来。这是概念的根源<code class="code">BreakpointCreator</code>从<code class="code">jetbrains.mps.debugger.api.lang</code>语言。根目录应位于语言插件模型中。它包含一个列表<code class="code">BreakpointableNodeItem</code> ，它们每个都指定要为其创建断点的概念列表以及实际创建断点的方法。 <code class="code">jetbrains.mps.debugger.api.lang</code>提供了几个与调试器一起使用的概念，特别是创建断点的概念。如下所述。</p>   <ul class="list _ul"><li class="list__item" id="cee6e787"><p>         <b id="c6d1adcc">DebuggerReference</b> –对特定调试器的引用，例如java调试器；</p></li><li class="list__item" id="0f430e09"><p>         <b id="25a97092">CreateBreakpointOperation</b> –为给定项目在给定节点上创建指定种类的位置断点的操作；</p></li><li class="list__item" id="4d13bf71"><p>         <b id="332a5ccc">DebuggerType</b> –引用调试器的特殊类型。</p></li></ul>   <p id="07cbb1fb">在下面的例子中<code class="code">breakpoint creators</code>来自的节点<code class="code">baseLanguage</code>显示。</p>   <p id="7fa9c05a">      </p><figure><img alt="断点创建器" title="断点创建器" src="/help/img/idea/2019.2/breakpoint-creators.png" id="81065dfb" width="734" height="262"></figure>   <p></p>   <p id="660d3c38">为了提供更复杂的过滤行为，创建者可以使用断点代替普通的复杂列表<code class="code">isApplicable</code>功能。打算切换到使用此功能。</p>   <p id="e2f97e07"> </p><div class="last-modified" data-skip-index="skip">上次修改时间：2019年8月30日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="mps-console.html">控制台</a> <a class="navigation-links__next" href="debugger-api.html">调试器API</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>