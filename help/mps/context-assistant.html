<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Context Assistant - Help | MPS</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Context+Assistant.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search MPS Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Default</option><option data-group="primary" value="primary_default_for_gnome">Default for GNOME</option><option data-group="primary" value="primary_default_for_kde">Default for KDE</option><option data-group="primary" value="primary_default_for_xwin">Default for XWin</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="primary" value="primary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_jbuilder">JBuilder</option><option data-group="primary" value="primary_mac_os_x">Mac OS X</option><option data-group="primary" value="primary_mac_os_x_10.5_">Mac OS X 10.5+</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_default">Default</option><option data-group="secondary" value="secondary_default_for_gnome">Default for GNOME</option><option data-group="secondary" value="secondary_default_for_kde">Default for KDE</option><option data-group="secondary" value="secondary_default_for_xwin">Default for XWin</option><option data-group="secondary" value="secondary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="secondary_emacs">Emacs</option><option data-group="secondary" value="secondary_jbuilder">JBuilder</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Mac OS X 10.5+</option><option data-group="secondary" value="secondary_netbeans">NetBeans</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Context+Assistant.html" id="context-assistant.xml">Context Assistant</h1>   <h2 id="overview">Overview</h2>   <p id="d6f0798f">      <ul data-skip-index="skip"><li class="list__item"><a href="#overview">Overview</a></li><li class="list__item"><a href="#description">Description</a></li><li class="list__item"><a href="#usingcontextassistantui">Using Context Assistant UI</a></li><li class="list__item"><a href="#usingcontextassistantframework">Using Context Assistant Framework</a></li><li class="list__item"><a href="#placeholdercells">Placeholder Cells</a></li><li class="list__item"><a href="#menulookup">Menu Lookup</a></li><li class="list__item"><a href="#placeholderlookup">Placeholder Lookup</a></li></ul>   </p>   <p id="8bcd9a02">MPS provides several mechanisms for performing an action in a context: completion, intentions, refactorings, and various other popup menus. These mechanisms have in common that they are not immediately visible to new, inexperienced users. They also usually offer many possible choices and reveal the entire available functionality, which helps advanced users but may overwhelm the beginners.</p>   <p id="dd0d836e">To better guide the new users through the process of creating a script in your DSL, the <i id="927c657c">context assistant</i>&nbsp;has become available. A context assistant shows a dynamically constructed menu with actions that are the most appropriate for a given context. The language author specifies where the menu should be shown by putting placeholders in the editor definition. The placeholders reserve screen space for the menu in advance so that the edited content does not shift around as the menu is being shown and hidden.</p>   <p id="70b1bbb0">As an example consider the <b id="6a5f4d20">RobotKaja</b> sample language which is bundled with MPS. The initial editor for a new script looks as follows (without a context assistant):</p>   <p id="0432891b">      <figure><img alt="image2016 2 2 12 30 59" title="image2016 2 2 12 30 59" src="/help/img/idea/2019.2/image2016-2-2-12-30-59.png" id="a6587ebb" width="151" height="63"></figure>   </p>   <p id="244499d2">With a context assistant this initial UI might look like this:</p>   <p id="8884f866">      <figure><img alt="image2016 2 3 14 40 34" title="image2016 2 3 14 40 34" src="/help/img/idea/2019.2/image2016-2-3-14-40-34.png" id="85c5595d" width="332" height="61"></figure>   </p>   <p id="ed8d8e37">and the menu now suggests several possible next steps to the user.</p>   <h3 id="description">Description</h3>   <p id="70c49fe5">The context assistant is a menu for invoking specific actions on particular big cell&nbsp;(cells whose parents are of a different concept).&nbsp;It's the same everywhere inside a big&nbsp;cell.<br>It's shown in a fixed position of the big&nbsp;cell&nbsp;(there may be multiple such positions though, then only the closest is shown).</p>   <p id="dfeaed45">The menu is not available, if there is no content for it. Besides straight actions the menu can contain hierarchical sub-menus.</p>   <aside class="tip sideblock" data-title="" rel="dfeaed45" id="03c39f4b">      <p id="28e60d8a">We've also shot a short <a href="https://youtu.be/5tVjgqvTwZc" data-external="true" target="_blank" rel="noopener noreferrer">video illustrating use and definition of Context Assistant</a>. You might also like to check out a <a href="https://youtu.be/tZC_Sf6F958" data-external="true" target="_blank" rel="noopener noreferrer">screen-cast</a> on how context assistant is being utilized for the language definition languages.</p>   </aside>   <h2 id="usingcontextassistantui">Using Context Assistant UI</h2>   <p id="722d5d51">If there is a context assistant available for your current cursor position, show it with <i id="9b2e4cb2">Ctrl/⌘ + Alt + Enter</i>&nbsp;or wait for 2 seconds.</p>   <ul class="list _ul"><li class="list__item" id="c3694588"><p>Jump to the context assistant by pressing <i id="92483589">Ctrl/⌘ + Alt + Enter</i>.</p></li><li class="list__item" id="a86310b4"><p>Navigate through the menu by using arrow keys, <i id="35250dc1">Tab</i> or mouse.</p></li><li class="list__item" id="e520c7ac"><p>Invoke the selected menu item using <i id="6a417ede">Space</i> or <i id="49fed10c">Enter</i>. or mouse click.</p></li><li class="list__item" id="d430c285"><p>Unlike the intentions menu, there is no typing-based item selection.</p></li><li class="list__item" id="6c7bc2ec"><p>Press <i id="9965289b">Escape</i> to jump back to the editor.</p></li><li class="list__item" id="61bd403a"><p>Unlike other menus, context assistant does not prevent typing into the document while open (except for when an item in the menu is selected).</p></li></ul>   <h2 id="usingcontextassistantframework">Using Context Assistant Framework</h2>   <p id="93c30d8d">To add context assistant to a language, you as the language author have to do two things:</p>   <ol class="list _decimal"><li class="list__item" id="441a46ce"><p>Place&nbsp;<i id="c1968654">context assistant placeholders</i> (a special kind of cell) at appropriate spots in the editor. The context assistant menus will be shown in these placeholders.</p></li><li class="list__item" id="240b7722"><p>Define the menu hierarchy using the&nbsp;<a href="transformation-menu-language.html">Transformation Menu Language</a>&nbsp;(specifying location <b id="e94fbb0d">context assistant</b>).</p></li></ol>   <p id="647df86b">The MPS editor runtime will take care of building the appropriate menu at the appropriate point in time and showing it in the appropriate context assistant placeholder.</p>   <h3 id="placeholdercells">Placeholder Cells</h3>   <p id="fc5a14d5">Placeholder cells are added by choosing "context assistant menu placeholder" from the substitution menu when adding a new cell:</p>   <p id="d8024926">      <figure><img alt="image2016 2 18 17 57 44" title="image2016 2 18 17 57 44" src="/help/img/idea/2019.2/image2016-2-18-17-57-44.png" id="4b794216" width="721" height="143"></figure>   </p>   <p id="e7ccd7c1">The placeholder cell reserves a certain amount of vertical screen space, about the size of one empty line, so that a menu can be shown in its place without shifting surrounding cells around. However, it&nbsp;doesn't reserve any horizontal space. It is therefore best to put the placeholder on a separate line or at the end of a short (or empty) line of text. For example, in the RobotKaja sample the placeholder is added after an empty line in the editor for the EmptyLine concept:</p>   <p id="5a603644">      <figure><img alt="image2016 2 18 17 54 57" title="image2016 2 18 17 54 57" src="/help/img/idea/2019.2/image2016-2-18-17-54-57.png" id="d09683e5" width="481" height="152"></figure>   </p>   <h3 id="menulookup">Menu Lookup</h3>   <p id="9f4d4738">The menu to display is looked up by traversing the cell hierarchy from the currently selected cell to the top. You may specify the menu to show explicitly for a given cell (by setting the&nbsp;<b id="37e7d18d">transformation menu</b>&nbsp;property in the Inspector). In this case that menu is used. Otherwise, if the cell is a&nbsp;<i id="57872e5c">big cell</i> (a cell that has no parent or whose parent is associated with a different node), an attempt is made to look up the menu based on the cell's node. The node's concept inheritance hierarchy is traversed in breadth-first order. If a non-empty menu is defined for the node's concept or one of its super-concepts and super-interfaces, this menu is used.</p>   <p id="5699d739">For example, consider a BaseLanguage&nbsp;<code class="code">PlusExpression</code>&nbsp;which extends&nbsp;<code class="code">BinaryOperation</code>, which in turn extends&nbsp;<code class="code">Expression</code>&nbsp;and implements&nbsp;<code class="code">IBinaryLike</code>. If&nbsp;during the traversal we reach the big cell of a&nbsp;<code class="code">PlusExpression</code>, then menus of&nbsp;<code class="code">PlusExpression</code>,&nbsp;<code class="code">BinaryOperation</code>,&nbsp;<code class="code">Expression</code>,&nbsp;<code class="code">IBinaryLike</code>, and finally&nbsp;<code class="code">BaseConcept</code>&nbsp;are checked, in that order, and the first non-empty menu definition is used. If all menu definitions are empty, the search continues from the parent cell of the big cell (if any).</p>   <p id="b7cd45b3">Note that a non-empty menu definition, although chosen, may still produce an empty menu. This may happen if none of its menu parts produce any items (for example if no defined actions are currently applicable).</p>   <h3 id="placeholderlookup">Placeholder Lookup</h3>   <p id="9a66d729">The place where a menu should be displayed is looked up by traversing the cell hierarchy from the currently selected cell to the root until a collection cell is reached that contains a context assistant placeholder cell, either directly or indirectly (but only belonging to the same node as the collection).&nbsp;The first cell found during this search is chosen and the menu is displayed in this placeholder cell.</p><div class="last-modified" data-skip-index="skip">Last modified: 30 August 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="transformation-menu-language.html">Transformation Menu Language</a><a class="navigation-links__next" href="context-actions-tool.html">Context actions tool</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>