<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>转换菜单语言-帮助|帮助MPS</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Transformation+Menu+Language.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索MPS帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected>默认</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_mac_os_x" data-group="primary">Eclipse（Mac OS X）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_mac_os_x" data-group="primary">Mac OS X</option><option value="primary_mac_os_x_10.5_" data-group="primary">Mac OS X 10.5以上</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_default" data-group="secondary">默认</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_jbuilder" data-group="secondary">JBuilder的</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5以上</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="transformation-menu-language.xml" data-toc="Transformation+Menu+Language.html">转换菜单语言</h1>   <h2 id="overview">总览</h2>   <p id="8bbe32e3">      </p><ul data-skip-index="skip"><li class="list__item"><a href="#overview">总览</a></li><li class="list__item"><a href="#definingamenu">定义菜单</a></li><li class="list__item"><a href="#defaultmenu">默认菜单</a></li><li class="list__item"><a href="#namedmenu">命名菜单</a></li><li class="list__item"><a href="#menucontributions">菜单贡献</a></li><li class="list__item"><a href="#sectionlocations">节位置</a></li><li class="list__item"><a href="#menuparts">菜单部分</a></li><li class="list__item"><a href="#sidetransformations">侧面转换</a></li><li class="list__item"><a href="#substitutemenus">替代菜单</a></li><li class="list__item"><a href="#defaultbehaviorforcode-completion">代码完成的默认行为</a></li><li class="list__item"><a href="#substitutemenu(default)">替代菜单（默认）</a></li><li class="list__item"><a href="#substitutemenu(named)">替代菜单（命名）</a></li><li class="list__item"><a href="#substitutemenucontribution">替代菜单贡献</a></li><li class="list__item"><a href="#options">选件</a></li><li class="list__item"><a href="#interactionofcellmenuandcell-specifictransformationmenu">单元格菜单和特定于单元格的转换菜单的交互</a></li><li class="list__item"><a href="#includetransformationmenufortheproperty/reference">包括属性/引用的转换菜单</a></li><li class="list__item"><a href="#exampleonreferences">参考示例</a></li><li class="list__item"><a href="#exampleonproperties">属性示例</a></li><li class="list__item"><a href="#showitemtrace">显示项目跟踪</a></li></ul>   <p></p>   <p id="02ab8eb6">转换菜单语言用于定义<i id="5380946a">转换菜单</i> ，这些<i id="5380946a">菜单</i>描述将出现在编辑器中各个<i id="aaa94414">位置</i>的子菜单和操作的层次结构。当前，在几个可能的位置显示了转换菜单： <a href="editor-actions.html">侧面转换菜单</a> ， <a href="editor-actions.html">替代菜单</a> ， <a href="context-assistant.html">上下文助手</a>和<a href="context-actions-tool.html">上下文操作工具</a> 。语言设计人员和插件作者可以定义其他位置，并为每个位置指定必需或可选的<i id="00cc95c6">功能</i> （例如图标或工具提示），如<a href="extending-the-transformation-menu-language.html">扩展转换菜单语言中所述</a> 。</p>   <aside class="tip sideblock" rel="02ab8eb6" id="7a871399" data-title=""><b id="4b7f8260">转换菜单语言</b>提供了一种描述MPS中的辅助转换和替代操作的方法。新方法的核心功能包括：<ul class="list _ul"><li class="list__item" id="53f6d653"><p>能够在编辑器中为特定单元格明确指定侧变换/替换菜单内容的功能</p></li><li class="list__item" id="d6412ce6"><p>无需“删除默认设置”指令，该指令过去常常无法可靠地运行</p></li><li class="list__item" id="a9ef1971"><p>轻松将替代DSL中的替代操作与任意/低级/ UI操作混合</p></li><li class="list__item" id="8cdb30d1"><p>在编辑器的不同位置（部分）可以看到相同的动作</p></li><li class="list__item" id="d1c7584c"><p>支持其他演示文稿（编辑/投影）的不同操作集</p></li><li class="list__item" id="bd439e27"><p>现在在语言的编辑器方面定义了动作</p></li></ul>         </aside>   <h2 id="definingamenu">定义菜单</h2>   <p id="f1e68815">转换菜单定义将在不同位置显示的UI操作。在设计时，菜单被指定为部分列表，每个部分都包含针对特定位置集的菜单部分列表。在运行时，菜单部分和位置用于生成菜单（菜单项）的内容。</p>   <p id="8fb80b4c">菜单定义有两种形式： <b id="ffa7125b">default</b>和<b id="e48e28ad">named</b> 。菜单定义也可以通过<b id="4955665b">菜单贡献</b>来扩展。</p>   <p id="bdae7c07">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/transformx1.png"><img alt="变换x1" title="变换x1" src="/help/img/idea/2019.2/transformx1.png" id="33ae3fe2" width="500" height="380"></a></figure>   <p></p>   <h3 id="defaultmenu">默认菜单</h3>   <p id="4e818247">每个概念都有一个关联的默认转换菜单。如果语言设计者未明确提供，则假定为最接近的超级概念定义了一个转换菜单。如果没有为任何超级概念指定任何内容，则使用在<i id="ec2cbc37">BaseConcept</i>上定义的超级概念，其中包含适合该位置的替代动作（请参见替代动作部分下面的内容）。</p>   <p id="21c53984">在语言设计者未指定要显示哪个菜单的情况下，将使用默认菜单。</p>   <p id="ee03bd8f">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/tml1.png"><img alt="tml1" title="tml1" src="/help/img/idea/2019.2/tml1.png" id="ba768485" width="500" height="724"></a></figure>   <p></p>   <h3 id="namedmenu">命名菜单</h3>   <p id="9192f163">命名菜单是概念的附加菜单。像默认菜单一样，它也指定了适用的概念并包含部分列表。顾名思义，命名菜单具有明确设置的名称。命名菜单应设置为单元格的转换菜单，或通过“ <b id="ca24d4f7">包含菜单”菜单部分</b>包含到另一个菜单中。</p>   <p id="fd5516aa">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/tml2.png"><img alt="tml2" title="tml2" src="/help/img/idea/2019.2/tml2.png" id="034ad8dd" width="500" height="286"></a></figure>   <p></p>   <p id="ac43415b">将命名菜单附加到编辑器单元：</p>   <p id="5f83ca1b">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/image2016-5-30-17-9-40.png"><img alt="image2016 5 30 17 9 40" title="image2016 5 30 17 9 40" src="/help/img/idea/2019.2/image2016-5-30-17-9-40.png" id="0cff5057" width="500" height="990"></a></figure>   <p></p>   <p id="7228aa14">注意：默认转换菜单也可以与命名菜单相同的方式附加到单个单元格。</p>   <h3 id="menucontributions">菜单贡献</h3>菜单贡献通过向其贡献其他菜单部分来扩展给定菜单。当扩展语言需要将条目添加到以扩展语言定义的菜单中时，这特别有用。实际上，贡献只能用除了要添加菜单的语言之外的其他语言来定义。在运行时请求菜单时，将合并原始定义和所有贡献，并使用组合的定义创建菜单。有关贡献的一些重要说明：<ol class="list _decimal"><li class="list__item" id="2e57e388"><p>当前未指定合并各个定义的顺序。</p></li><li class="list__item" id="f7fadfb6"><p>贡献无法从其贡献的菜单中删除菜单部分。</p></li><li class="list__item" id="a239bfff"><p>可以为概念的隐式默认菜单定义内容。</p></li></ol>      <p id="89c8239d">         </p><figure><a class="lightbox" href="/help/img/idea/2019.2/tml3.png"><img alt="tml3" title="tml3" src="/help/img/idea/2019.2/tml3.png" id="77bf2da8" width="500" height="265"></a></figure>      <p></p>      <h3 id="sectionlocations">节位置</h3>   <p id="ad762fc0">通过指定菜单中某个部分的位置，您可以指示将操作插入到UI的哪一部分：</p>   <ul class="list _ul"><li class="list__item" id="393f799a"><p>         <b id="2ea40fa6">完成</b> -完成菜单</p></li><li class="list__item" id="396cf71e"><p>         <b id="5fb3a449">上下文操作工具</b> - <a href="context-actions-tool.html">上下文操作工具</a> （需要导入<i id="a386d247">jetbrains.mps.editor.contextActionsTool.lang.menus</i>语言）</p></li><li class="list__item" id="4371ab67"><p>         <b id="342330f5">上下文助手</b> - <a href="context-assistant.html">上下文助手</a>      </p></li><li class="list__item" id="5c78b38b"><p>         <b id="0c9f742a">侧面变换</b> -左或右变换</p></li></ul>   <p id="b091f7af">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Locations1.png"><img alt="地点1" title="地点1" src="/help/img/idea/2019.2/Locations1.png" id="74c15b21" width="500" height="340"></a></figure>   <p></p>   <h3 id="menuparts">菜单部分</h3>   <p id="fae4ab67">以下标准菜单部分可用：</p>   <ul class="list _ul"><li class="list__item" id="e548f9fc">         <p id="27459e7f">            <b id="b096eff2">操作</b> –一个简单的菜单项，指定要执行的操作，其相应的菜单文本和适用性。</p>      </li><li class="list__item" id="07f0f308"><p>         <b id="15437317">组</b> -菜单项的集合。</p></li><li class="list__item" id="198f824c"><p>         <b id="4609c9be">包括</b> -包括一个特定的默认菜单或命名菜单（及其贡献，如果有的话）。在运行时检测到包含周期，并生成错误消息。</p></li><li class="list__item" id="e8ff6bd5"><p>         <b id="06f671ab">包括替代菜单</b> -包括默认或命名的替代菜单以用作此菜单的一部分。</p></li><li class="list__item" id="ff9e539f"><p>         <b id="599485da">参数化</b> -具有多个值的参数化操作。</p></li><li class="list__item" id="e544b055"><p>         <b id="17db1ccb">子菜单</b> –包含其他部分的子菜单。</p></li><li class="list__item" id="248746d3"><p>         <b id="a0244cfd">superconcepts菜单</b> –包括适用概念的超级概念的默认菜单，因为默认情况下不包括这些菜单。</p></li><li class="list__item" id="5503ed13"><p>         <b id="6d3b1c55">包装替代菜单</b> -使用提供的处理程序包装指定的概念</p></li></ul>   <p id="480f2228">语言<code class="code">jetbrains.mps.lang.editor.menus.extras</code>包含适配器，以包含来自转换菜单的各种类似于动作的实体：</p>   <ul class="list _ul"><li class="list__item" id="341cd42c"><p>         <b id="a2c59839">意图</b> –包装意图（的子概念<code class="code">BaseIntentionDeclaration</code>从<code class="code">jetbrains.mps.lang.intentions</code> ）。</p></li><li class="list__item" id="203261af"><p>         <b id="317997c0">重构</b> –包装重构<code class="code">Refactoring</code>从<code class="code">jetbrains.mps.lang.refactoring</code> 。</p></li><li class="list__item" id="fb4794b8"><p>         <b id="f304fcb7">插件动作</b> –包装插件动作<code class="code">ActionDeclaration</code>从<code class="code">jetbrains.mps.lang.plugin</code> 。</p></li></ul>   <p id="0a1f399d">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Oprions5.png"><img alt="Oprions5" title="Oprions5" src="/help/img/idea/2019.2/Oprions5.png" id="37bf86c0" width="500" height="632"></a></figure>   <p></p>   <aside class="tip sideblock" rel="0a1f399d" id="8e677f55" data-title="">      <p id="ecd416db">您可能还想查看<a href="https://youtu.be/mK40e7bde_Y" rel="noopener noreferrer" data-external="true" target="_blank">有关“转换菜单语言”</a>的<a href="https://youtu.be/mK40e7bde_Y" rel="noopener noreferrer" data-external="true" target="_blank">视频</a> 。</p>   </aside>   <h2 id="sidetransformations">侧面转换</h2>   <p id="f14aa3cd">在文本编辑器中编辑代码时，可以从左到右输入：</p>   <div class="code-block" data-lang="none">1_按+ 1 + _按2 1 + 2_</div>   <p id="fb200955">或从右到左</p>   <div class="code-block" data-lang="none">_1按2 2_1按+ 2 + _1</div>   <p id="2e9d09dd">为了模拟此行为，MPS具有侧面转换动作：左和右转换。它们使您可以创建在单元格的左侧或右侧键入内容时可用的操作。例如，在MPS中，您可以执行以下操作：</p>   <div class="code-block" data-lang="none">1_按下+（出现带有+的红色单元格）1 + _按下2（红色单元格消失）1 + 2_</div>   <p id="6901ab22">或以下内容：</p>   <div class="code-block" data-lang="none">_1按+（出现带有+的红格）+ _1按2（红单元消失）2_ + 1</div>   <p id="844da990">第一种情况称为右变换。第二种情况称为左变换。</p>   <p id="8782264a">通过选择该部分的<b id="b362f318">侧面变换</b>位置，可以在“变换”菜单中定义侧面变换：</p>   <p id="ef02ed8d">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/SideTransforms100.png"><img alt="SideTransforms100" title="SideTransforms100" src="/help/img/idea/2019.2/SideTransforms100.png" id="86ebe503" width="500" height="766"></a></figure>   <p></p>   <p id="afdacb34">该语言还使语言设计人员可以将侧转换菜单的项目包括到<b id="2124ca3f">特定单元格</b>的完成菜单中。为此，您可以将包含<b id="5f714099">完成</b>部分的转换菜单附加到所需的单元格上。该完成部分将<b id="45da4bfa">包含</b>一个<b id="45da4bfa">包含菜单</b>部分，并指定侧面变换的位置。侧面转换菜单的项目将包括在内。</p>   <p id="70113420">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/cellmenu1.png"><img alt="细胞菜单1" title="细胞菜单1" src="/help/img/idea/2019.2/cellmenu1.png" id="5aba8a32" width="500" height="140"></a></figure>   <p></p>   <p id="e6140c3f">可以使用意图“指定位置”来指定所包含菜单的位置。</p>   <h2 id="substitutemenus">替代菜单</h2>   <p id="52d35c47">替代动作定义了用户调用的模型某些部分的转换，在此期间，一个节点被另一节点替换。然后通过“转换”菜单完成这些替代操作到可视化UI元素（完成菜单等）的实际映射（请参见上文）。</p>   <p id="5f6110b1">通常，替换操作是通过在编辑器中按<i id="ef6cd842">Ctrl +空格键</i>触发的。出现的完成菜单包含一些选项，当用户选择这些选项时，这些选项将替换插入符号下的节点。与<b id="5358bab1">侧转换</b> ， <b id="0283aa54">上下文助手</b>或<b id="7b5c1a59">上下文动作工具不同</b> ， <b id="ccb2e653">替换</b>具有默认行为，除非语言作者另行定义，否则默认行为会生效。</p>   <h3 id="defaultbehaviorforcode-completion">代码完成的默认行为</h3>   <p id="47d8eb92">在没有语言作者明确实现的任何菜单的情况下，在以下两种情况中的任何一种情况下，MPS仍将提供一个替换当前节点的完成菜单：</p>   <ul class="list _ul"><li class="list__item" id="53057c1b"><p>光标位于单单元格编辑器的前面</p><figure><a class="lightbox" href="/help/img/idea/2019.2/transforms10.png"><img alt="变形10" title="变形10" src="/help/img/idea/2019.2/transforms10.png" id="17f18a90" width="100" height="277"></a></figure>         <figure><a class="lightbox" href="/help/img/idea/2019.2/transforms11.png"><img alt="转换11" title="转换11" src="/help/img/idea/2019.2/transforms11.png" id="2e3bd889" width="100" height="553"></a></figure>      <p></p></li><li class="list__item" id="f3abf1a0"><p>用户已选择节点的整个编辑器</p><figure><a class="lightbox" href="/help/img/idea/2019.2/transforms12.png"><img alt="转换12" title="转换12" src="/help/img/idea/2019.2/transforms12.png" id="b2150074" width="100" height="288"></a></figure>         <figure><a class="lightbox" href="/help/img/idea/2019.2/transforms13.png"><img alt="转换13" title="转换13" src="/help/img/idea/2019.2/transforms13.png" id="52159e61" width="100" height="488"></a></figure>      <p></p></li></ul>   <p id="8fdd3c3d">在这些情况下，按<i id="a919b781">Control + Space</i>将显示一个菜单，其中包含适用于给定上下文的导入语言中的所有概念，该菜单可以替代模型中的当前节点。</p>   <p id="65eaaa74">MPS遵循以下步骤来填充默认的完成菜单：</p>   <ol class="list _decimal"><li class="list__item" id="bc14d270"><p>如果您的选择位于允许概念A的位置之内，则在完成菜单中将提供A的所有已启用子概念。</p></li><li class="list__item" id="39113dca"><p>排除所有抽象概念</p></li><li class="list__item" id="09b81a8a"><p>排除所有可能成为孩子的约束条件返回false的概念</p></li><li class="list__item" id="1ed92c67"><p>排除父节点的“可以成为父节点”约束返回false的所有概念</p></li><li class="list__item" id="696f924b"><p>如果概念包含1：1引用，则不会将其添加到完成菜单本身。而是为该引用范围内的每个元素添加一个项目。我们为此类项目使用名称<b id="f16ac34e">智能参考</b> 。</p></li></ol>   <p id="603bc330">要自定义节点替换，请使用<b id="a9aeace7">替换菜单</b> 。</p>   <h3 id="substitutemenu(default)">替代菜单（默认）</h3>   <p id="bbfba54e">通过为概念定义默认的替代菜单，您可以自定义完成菜单的内容，该菜单在用户按下<i id="4415079b">Control + Space</i>时显示。除非这些子概念定义了自己的默认替代菜单，否则它也影响该概念的子概念。</p>   <p id="052ada48">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Substitution-menu-2.png"><img alt="替代菜单2" title="替代菜单2" src="/help/img/idea/2019.2/Substitution-menu-2.png" id="075ac81f" width="500" height="112"></a></figure>   <p></p>   <aside class="warning " rel="052ada48" id="7e470eab" data-title="">      <p id="bd2fea2a">如果为概念定义默认的替代菜单并将其留空，则该概念将不会包含在完成菜单中。这等效于在<i id="1e878a59">早期</i>版本的MPS中使用<i id="1e878a59">IDontSubstituteByDefault</i>接口。</p>      <p id="8e1dc046">         </p><figure><a class="lightbox" href="/help/img/idea/2019.2/EmptyMenu1.png"><img alt="空菜单1" title="空菜单1" src="/help/img/idea/2019.2/EmptyMenu1.png" id="b07be73d" width="500" height="130"></a></figure>      <p></p>   </aside>   <p id="cb947a8f">但是，如果要将替代菜单分配给编辑器的特定单元格，则需要在转换菜单中包括替代菜单，因为只有转换菜单可以附加到编辑器单元格。</p>   <p id="401acab9">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/IncludeDefaultSubstitute1.png"><img alt="IncludeDefaultSubstitute1" title="IncludeDefaultSubstitute1" src="/help/img/idea/2019.2/IncludeDefaultSubstitute1.png" id="c0523fa9" width="500" height="178"></a></figure>   <p></p>   <h3 id="substitutemenu(named)">替代菜单（命名）</h3>   <p id="e4622fda">命名替换菜单使您可以灵活地创建多个替换菜单，并在不同的上下文中使用它们。必须先将命名的替代菜单包含在另一个替代菜单或转换菜单中才能生效。</p>   <h3 id="substitutemenucontribution">替代菜单贡献</h3>   <p id="785e0fc5">就像“转换”菜单一样，“替代”菜单贡献将新条目贡献给以扩展语言定义的替代菜单。</p>   <h3 id="options">选件</h3>   <ul class="list _ul"><li class="list__item" id="04622d77"><p>添加概念-向菜单添加一个概念</p></li><li class="list__item" id="f1a8310a"><p>概念列表-添加概念集合</p></li><li class="list__item" id="3abddb0e"><p>组-如果满足条件，则添加一组条目</p></li><li class="list__item" id="2df3913c"><p>包含-包含指定的菜单</p></li><li class="list__item" id="15a55a36"><p>参数化-添加参数化的替代动作</p></li><li class="list__item" id="674d6113"><p>参考动作-包括并自定义参考可能目标的外观</p></li><li class="list__item" id="ee1e53c7"><p>子概念菜单-包括概念的所有子概念</p></li><li class="list__item" id="e155e0dc"><p>替代动作-添加一个替代动作</p></li><li class="list__item" id="731ca9e6"><p>包装替代菜单-使用提供的处理程序包装指定的概念</p></li></ul>   <h2 id="interactionofcellmenuandcell-specifictransformationmenu">单元格菜单和特定于单元格的转换菜单的交互</h2>   <p id="73b8e07c">如果单元格同时具有“菜单”和“转换菜单”，则两个菜单中的适用条目将合并。某些单元格菜单部分（后代<code class="code">CellMenuPart_Abstract</code>如<code class="code">CellMenuPart_PropertyPostfixHints</code> ）还没有等效的转换/替换菜单部分。</p>   <h2 id="includetransformationmenufortheproperty/reference">包括属性/引用的转换菜单</h2>   <p id="3a0326f6">可以使用<b id="b086b5c4">属性/引用转换菜单部件</b>来完成属性/引用单元格菜单的定制。假设您要自定义引用/属性单元格的完成菜单。以前，可以通过在检查器中定义“内联菜单”来完成。现在，也可以通过“ <b id="6f8ccb00">转换菜单”</b>完成此操作。我们已经介绍了属性和参考转换菜单部分。<b id="b56f3120">参考转换菜单部分</b>包括将目标节点设置为特定参考的操作。目标节点来自该引用的范围。属性菜单部分也是如此：它接受属性类型的值并包括将值设置为特定属性的操作。</p>   <h3 id="exampleonreferences">参考示例</h3>   <p id="e172d615">假设我们要为参考单元构建完成菜单。菜单应包含范围内引用的常规目标，以及一些其他自定义操作。这可以通过将以下命名的转换菜单附加到参考单元格来完成：</p>   <p id="a97be10a">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/ClassCreator-CompletionMenu.png"><img alt="ClassCreator CompletionMenu" title="ClassCreator CompletionMenu" src="/help/img/idea/2019.2/ClassCreator-CompletionMenu.png" id="487e4d5f" width="700" height="682"></a></figure>      <br>   <p></p>   <p id="2e031e80">因此，我们将在完成时收到所有标准参考操作以及自定义操作：</p>   <p id="033b8945">      </p><figure><img alt="完成时间" title="完成时间" src="/help/img/idea/2019.2/Completion.png" id="79ba757f" width="700" height="94"></figure>   <p></p>   <p id="5098d04c">如您所见，参考菜单部分类似于“内联菜单”中“主要选择参考菜单”部分的类似物，但更具可定制性。另外，如果没有菜单附加到单元格，则默认情况下将使用其参考菜单。</p>   <h3 id="exampleonproperties">属性示例</h3>   <p id="27966288">另一个示例-假设当光标位于该属性单元格旁边的<b id="68806032">标签</b>单元格上时，您想在上下文助手中查看该属性的所有可能值。让我们看一下Kaja语言中的一段代码：</p>         <figure><a class="lightbox" href="/help/img/idea/2019.2/kaja-code.png"><img alt="卡哈码" title="卡哈码" src="/help/img/idea/2019.2/kaja-code.png" id="3e7271d0" width="300" height="252"></a></figure>      <p id="0aea433e">当我们将插入符号放入查看单元时，我们希望查看查看方向的所有变体。因此，我们将以下菜单附加到该标签单元：</p>         <figure><img alt="展望方向" title="展望方向" src="/help/img/idea/2019.2/looking-direction.png" id="c0621f61" width="950" height="154"></figure>      <br>            <br>并得到结果：<br>            <figure><a class="lightbox" href="/help/img/idea/2019.2/dir-cont-assist-result.png"><img alt="目录续帮助结果" title="目录续帮助结果" src="/help/img/idea/2019.2/dir-cont-assist-result.png" id="6c2058c4" width="500" height="252"></a></figure>            <br>            <p id="e25a3086">这些菜单部分优于“内联菜单”的优点包括：</p>      <ol class="list _decimal"><li class="list__item" id="9d31629f"><p>它们可以连接到任何单元，而不仅仅是参考/属性单元。</p></li><li class="list__item" id="a5117695"><p>它们可以在任何菜单位置（上下文助手，上下文菜单）使用，而不仅仅是完成。</p></li><li class="list__item" id="c3f419ef"><p>参考菜单更可定制（属性菜单也将很快可定制）。</p></li></ol>               <br>菜单发现算法<p id="9b8e7be2">了解MPS如何选择转换菜单的过程将帮助您更加自信地设计菜单。</p>   <p id="ca95c7da">发现转换菜单的内置行为是包括当前概念的超概念菜单，因此默认情况下，MPS会为当前概念寻找一个转换，名为<i id="d9d47b64"><currentconcept></currentconcept></i> _TransformationMenu，然后是其超级概念的菜单，依此类推，直到BaseConcept_TransformationMenu。</p>   <aside class="tip sideblock" rel="ca95c7da" id="f26a7c55" data-title="">      <p id="91ca7b97">         <i id="07b689ca">BaseConcept_TransformationMenu</i>确实存在于MPS中，并且包含一条指令，以包括当前链接的适当概念的替代菜单。因此，您为概念定义的替代菜单将包含在内，并且无需明确定义转换菜单即可使用。</p>      <p id="38c4aa46"> </p>   </aside>   <p id="322dee10">替代菜单与转换菜单相似，但是它们的发现却朝相反的方向进行：概念A的转换菜单包括其超级概念的菜单（直至BaseConcept），即在层次结构中向上移动，替代菜单的A包括菜单它的子概念，因为只有子概念才能安全地替换模型中的A。请注意，替代菜单与转换菜单有些不同，因为替代菜单的查找不是基于现有节点的概念，而是基于链接的目标概念。</p>   <h2 id="showitemtrace">显示项目跟踪</h2>   <p id="bf38f3e0">要跟踪哪个转换或替代菜单对完成菜单或上下文助手做出了特定的动作，用户只需在完成菜单项上按<i id="28ff11c8">Control / Cmd + Alt + B</i> ，就会显示交互式跟踪报告。</p>有时，由于存在很多相互替代和转换的菜单，因此很难跟踪动作在完成或上下文助手中的显示方式。现在，您可以选择完成操作（通过箭头）或在上下文助手中（通过按cmd / ctrl + alt + Enter），然后按cmd / ctrl + alt + B。您将在项目工具中看到跟踪。这是菜单和菜单部件声明的踪迹，它们从顶层菜单开始，以动作声明结束，彼此包括在内。如果菜单或菜单部件声明是显式的并且在项目中，则它在工具中具有粗体样式，您可以单击它并转到声明。<br>在这里，当我们将插入符号放在语句上，显示变量引用的完成情况，然后调用“ Show Item Trace”时，它的样子：<figure><a class="lightbox" href="/help/img/idea/2019.2/ActionTrace.png"><img alt="动作追踪" title="动作追踪" src="/help/img/idea/2019.2/ActionTrace.png" id="6b2607b2" width="500" height="462"></a></figure>我们看到完成时看到的是Statement的默认转换菜单，其中包括superconcept的菜单，即BaseConcept。它依次包括Statement的替代菜单，而该菜单又包装了Expression的菜单。然后是表达式的子概念，其中之一是VariableReference。VariableReference是“智能引用”概念，因此它尝试查找Variable概念的所有可见目标。这就是变量引用在语句菜单中显示的方式。<div class="last-modified" data-skip-index="skip">上次修改时间：2019年8月30日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="editor-actions.html">编辑器操作</a> <a class="navigation-links__next" href="context-assistant.html">上下文助手</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>