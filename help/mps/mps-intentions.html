<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>意图-帮助| MPS</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Intentions.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索MPS帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected>默认</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_mac_os_x" data-group="primary">Eclipse（Mac OS X）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_mac_os_x" data-group="primary">Mac OS X</option><option value="primary_mac_os_x_10.5_" data-group="primary">Mac OS X 10.5以上</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_default" data-group="secondary">默认</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_jbuilder" data-group="secondary">JBuilder的</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5以上</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="mps-intentions.xml" data-toc="Intentions.html">意向</h1>   <p id="52f490f1">意图是MPS如何使语言作者使使用其语言的人们的用户体验更加流畅的一个很好的例子。意图通过语言的语法结构提供对最常用操作的快速访问，例如“取反布尔值”，“条件反转”，“从使用中创建”等。如果您曾经使用过IntelliJ IDEA的意图或类似意图任何现代IDE的功能，您都会发现MPS的意图非常熟悉。</p>   <h2 id="usingintentions">使用意图</h2>   <p id="748d8e60">      </p><figure><img alt="意向菜单" title="意向菜单" src="/help/img/idea/2019.2/intentions-menu.PNG" id="d2253dc4" width="343" height="166"></figure>   <p></p>   <p id="2cfe5c77">像在IDEA中一样，如果在当前位置有适用于该代码的意图，则会显示一个灯泡。要查看可用意图列表，请按Alt + Enter或单击灯泡。要应用意图，请单击它或选择它，然后按Enter。这将触发意图并相应地更改代码。<br>       <i id="28d4d487">示例：适用意图清单</i>   </p>   <p id="77885add">意向菜单通常包含1到20个项目，按标签组排序。它比单元菜单更友好，因为它显示了所有可用项目。不过，仅使用键盘很方便。只能使用鼠标，但需要等待灯泡图标出现。打开“意图”菜单后，您可以开始键入内容以在容忍的，尊重差异的搜索中过滤列表元素。与代码完成菜单不同，它最初未经过滤。</p>   <p id="c57072bd">使用<i id="328498d8">Alt + Enter</i>或单击当前行左侧的“即将出现”的灯泡图标将其打开。输入要过滤的内容。用箭头键选择一个项目或将其悬停。单击<i id="bbe88553">Enter</i>或单击完成。中止它的操作与单元格菜单相同，请使用<i id="99ce7b1b">Escape</i> ，在菜单外单击或更改为其他应用程序。</p>         <br>      <h3 id="intentiontypes">意向类型</h3>   <p id="24303071">所有意图都是某种“捷径”，使节点结构上的某些操作更接近用户。可以区分两种意图：常规意图（可能带有参数）和“包围”意图。<br>一般来说，这些类型的意图之间没有技术上的区别。它们仅在用户通常使用它们的方式上有所不同。</p>   <p id="d9f50e7e">      <b id="200a91c5">常规意向</b>列在意向列表（灯泡）上，它们直接在节点上执行转换，而无需询问用户自定义操作的参数。</p>   <p id="4d7d444e">      <b id="15407a03">“带有包围”意图</b>用于实现一种特殊的转换-用另一个构造将某些节点包围（例如，“带有括号的包围”）。除非用户在节点上按<i id="8f857ba7">ctrl-alt-T</i> （ <i id="d1a1b3c9">带有</i>命令的<i id="d1a1b3c9">环绕</i> ），否则不会向用户提供这些意图。它们都没有显示在“常规意图”弹出菜单中。</p>   <p id="45dabf3e">      <b id="673c37ec">通用意图</b>是3.4中引入的一项新的实验功能，可以统一意图和参数化意图。此外，它允许添加方法和其他类成员以达到预期目的，并具有更像Java的编辑器。由于该功能仍处于试验阶段，因此我们决定不完全取代旧功能。我们仍然建议您使用旧的意图，但是那些更喜欢新编辑器的人可以尝试新的意图。通用意图的结构与旧意图非常相似，使用起来非常简单。</p>   <h3 id="commonintentionstructure">共同意图结构</h3>   <div class="table-wrapper"><table width="100%" id="501ed9e4"><thead><tr id="78d83dec" class="ijRowHead"><th id="cb577343">            <h4 id="name">名称</h4>         </th><th id="d94d3059">            <p id="6f645b84">意图的名称。您可以选择任何喜欢的名称，唯一明显的限制是名称在模型范围内必须唯一。</p>         </th></tr></thead><tbody><tr id="353d30b9" class="ijRowOdd"><td id="4233e792">            <h4 id="forconcept">对于概念</h4>         </td><td id="620dcd27">            <p id="ee794f57">将仅针对作为此概念及其子概念实例的节点测试意图的适用性。</p>         </td></tr><tr id="4bb10181" class="ijRowEven"><td id="78c69e1d">            <h4 id="availableinchildnodes">在子节点中可用</h4>         </td><td id="c7b35de9">            <p id="56671fd8">假设N是可以对其应用意图的节点。如果将此标志设置为false，则仅当光标位于节点N本身上方时，意图才可见。如果设置为true，它将在N的后代中也可见（但仍将应用于N）</p>         </td></tr><tr id="f2857793" class="ijRowOdd"><td id="1b7ec206">            <h4 id="childfilter">子过滤器</h4>         </td><td id="0fabd99c">            <p id="16abdf5c">用于仅在某些孩子中表现出意图。例如，“使方法最终化”的意图最好不要显示在方法主体内部，而最好显示在整个标头中，包括“公共”子级。</p>         </td></tr><tr id="8fe5a58e" class="ijRowEven"><td id="5000941a">            <h4 id="description">描述</h4>         </td><td id="2013360f">            <p id="08b970f1">用户将在意图列表中看到此函数返回的值。</p>         </td></tr><tr id="241ccd35" class="ijRowOdd"><td id="0e98b6db">            <h4 id="isapplicable">isApplyable</h4>         </td><td id="cf6c564b">            <p id="741d0386">通过“用于概念”测试的意图将测试对当前节点的适用性。如果此方法返回“ true”，则该意图将显示在列表中并可以应用。否则，意图不会显示在列表中。确保此方法的<b id="9150cd32">node</b>参数是“ for concept”中指定的概念的实例或其子概念之一。</p>         </td></tr><tr id="75c36db5" class="ijRowEven"><td id="f2f448f2">            <h4 id="execute">执行</h4>         </td><td id="8f07326e">            <p id="386b39e7">此方法执行代码转换。可以确保<b id="13461658">node</b>参数已通过“针对概念”和“适用”测试。</p>         </td></tr></tbody></table></div>   <h4 id="regularintentions">定期意图</h4>   <p id="96e601c7">      <b id="ae12a073">是错误意图</b> -此标志负责意图的表示。它区分两种类型的意图-纠正代码中某些错误（例如丢失的“ cast”）的“错误”意图和旨在帮助用户执行某些真正代码转换的“常规”意图。为了从视觉上区分这两种类型，错误意图用红色的灯泡显示，而不是橙色的灯泡，并且在适用的意图列表中置于常规意图之上。</p>   <h4 id="parameterizedregularintentions">参数化的常规意图</h4>   <p id="8573da94">意图有时可能非常接近。他们可能都需要对节点执行相同的转换，只是略有不同。例如，生成器中的所有“添加...宏”意图最终都会添加一个宏，但是对于不同的意图，所添加的宏本身是不同的。当需要<b id="2d2b1fc8">参数化意图</b>时就是这种情况。您无需创建单独的意图，而可以创建单个意图并对其进行参数化。意图具有<b id="6a4ee37b">参数</b>函数，该函数返回参数值的列表。基于该列表，创建了多个意图，每个意图具有不同的参数值。然后几乎可以使用每种意图的方法来访问参数值。</p>   <aside class="tip sideblock" rel="8573da94" id="2bae69e8" data-title="">      <p id="d084c681">您无权访问<i id="6ca96288">isApplicable</i>函数中的<i id="3dcdfef1">参数</i> 。这是由于性能原因。由于<i id="abcb0fc9">isApplicable</i>经常执行，并且延迟很快就会被用户注意到，因此您应该只在<i id="d10f2f7c">isApplicable中</i>执行基本检查。所有与参数相关的检查都应在<i id="3ff9c3e7">参数</i>函数中执行，并且如果未通过检查，则不应返回此参数</p>   </aside>   <h4 id="surroundwith-intentions">环绕-意图</h4>   <p id="0e9698ac">这种意图与常规意图非常相似，所有提及的细节也适用于这些意图。</p>   <h3 id="wheretostoremyintentions?">我的意图存放在哪里？</h3>   <p id="4c26cb51">您可以通过导入意图语言在任何模型中创建意图。但是，MPS仅从<b id="7ab616b6">意图</b>语言方面收集意图。如果您希望MPS意向子系统使用您的意向，则必须将其存储在您语言的<b id="b374b6d9">意向</b>方面。</p><div class="last-modified" data-skip-index="skip">上次修改时间：2019年8月30日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="typesystem-debugging.html">类型系统调试</a> <a class="navigation-links__next" href="data-flow.html">数据流</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>