<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Shapes-MPS入门教程-帮助|帮助MPS</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Shapes+-+an+introductory+MPS+tutorial.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索MPS帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected>默认</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_mac_os_x" data-group="primary">Eclipse（Mac OS X）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_mac_os_x" data-group="primary">Mac OS X</option><option value="primary_mac_os_x_10.5_" data-group="primary">Mac OS X 10.5以上</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_default" data-group="secondary">默认</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_jbuilder" data-group="secondary">JBuilder的</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5以上</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="shapes-an-introductory-mps-tutorial.xml" data-toc="Shapes+-+an+introductory+MPS+tutorial.html">形状-MPS入门教程</h1>   <p id="b0285d70">如果您是MPS的新手，并且想快速尝试一下，那么这是适合您的教程。在<b id="b3e76af5">两个小时内，</b>您将获得一种新的语言和使用该语言的功能代码。在本教程中，您将从头开始，并沿着安全便捷的道路走，设计新语言的核心元素。我们将避免使用高级概念，复杂的构造和黑暗的角落，以便快速到达终点线。最后，您将了解MPS的全部含义以及其所基于的原理。</p>   <p id="7b0200ef">因此，请系紧安全带。我们正在快速兜风。</p>   <aside class="tip sideblock" rel="7b0200ef" id="b3c50d15" data-title="">      <p id="c269fe79">您也可以在线<a href="http://www.youtube.com/watch?v=Mb1QzHx83M4" rel="noopener noreferrer" data-external="true" target="_blank">观看本教程</a>的屏幕广播。请检查一下。</p>   </aside>   <p id="248ac532">      </p><ul data-skip-index="skip"><li class="list__item"><a href="#prerequisities">先决条件</a></li><li class="list__item"><a href="#goal">目标</a></li><li class="list__item"><a href="#createanewproject">创建一个新项目</a></li><li class="list__item"><a href="#languagesandprogramsunderthehood">内在的语言和程序</a></li><li class="list__item"><a href="#graphicalshape">图形形状</a></li><li class="list__item"><a href="#circle">圈</a></li><li class="list__item"><a href="#square">广场</a></li><li class="list__item"><a href="#canvas">帆布</a></li><li class="list__item"><a href="#anearlytestride">早期试乘</a></li><li class="list__item"><a href="#editors">编者</a></li><li class="list__item"><a href="#shape">形状</a></li><li class="list__item"><a href="#circle">圈</a></li><li class="list__item"><a href="#square">广场</a></li><li class="list__item"><a href="#canvas">帆布</a></li><li class="list__item"><a href="#thesecondrun">第二次</a></li><li class="list__item"><a href="#coloring">染色</a></li><li class="list__item"><a href="#conceptforcolors">颜色的概念</a></li><li class="list__item"><a href="#pre-definedcolors">预定义的颜色</a></li><li class="list__item"><a href="#createcolors">创建颜色</a></li><li class="list__item"><a href="#thefirsttouchondependencies">第一次依赖</a></li><li class="list__item"><a href="#conceptforcolorreference">颜色参考的概念</a></li><li class="list__item"><a href="#updatingshape">更新形状</a></li><li class="list__item"><a href="#embeddingtheeditorcomponent">嵌入编辑器组件</a></li><li class="list__item"><a href="#athirdrun">第三轮</a></li><li class="list__item"><a href="#generator">发电机</a></li><li class="list__item"><a href="#parametrizingthetemplate">参数化模板</a></li><li class="list__item"><a href="#drawingshapes">绘图形状</a></li><li class="list__item"><a href="#generatingcircles">产生圈子</a></li><li class="list__item"><a href="#parametrization">参数化</a></li><li class="list__item"><a href="#reducingsquares">减少正方形</a></li><li class="list__item"><a href="#generatingcode">产生程式码</a></li><li class="list__item"><a href="#amorerobustgenerationforsquares">Squares更强大的一代</a></li><li class="list__item"><a href="#runningthecode">运行代码</a></li><li class="list__item"><a href="#analternativegenerator-generatingxml">备用生成器-生成XML</a></li><li class="list__item"><a href="#whattodonext">接下来做什么</a></li></ul>   <p></p>   <h2 id="prerequisities">先决条件</h2>   <p id="2b3b80d4">我们假设您已经完成了<a href="fast-track-to-mps.html">MPS教程快速入门</a>的初始部分，因此熟悉MPS环境，了解语言的概念和解决方案并可以<a href="commanding-the-editor.html">命令MPS投影编辑器</a> 。如果不是这样，请考虑花费您前30分钟左右的时间进行检查。特别是这些键盘快捷键是您生存的关键：</p>   <ul class="list _ul"><li class="list__item" id="942dbfa2"><p>         <i id="1120d4d1">Control + Space-</i>完成不完整的单词或将无效的（红色）标识符变成正确的（黑色）标识符</p></li><li class="list__item" id="2a761ba7"><p>         <i id="888fae7c">Alt + Enter-</i>显示弹出菜单，其中包含适用于当前编辑器位置的便捷选项</p></li><li class="list__item" id="36d5e4e1"><p>         <i id="1964ab42">Control / Cmd +向上箭头/向下箭头</i> -扩展/缩小所选文本的区域</p></li><li class="list__item" id="03d7a796"><p>         <i id="15a28e66">标签</i> -在编辑器中的可编辑元素之间导航</p></li><li class="list__item" id="d97f863c"><p>         <i id="0cdc1d2b">Control / Cmd + Z-</i>撤消</p></li></ul>   <p id="b1e94b18">我们还假设您已经安装了MPS，并且在您面前运行它。所以现在我们可以出发了。</p>   <aside class="tip sideblock" rel="b1e94b18" id="fc6e0001" data-title="">      <p id="bc10cb7f">本教程的结果已作为示例项目与MPS分发捆绑在一起。如果您随时遇到困难，请随时从MPS的<i id="f1d63f1a">主文件夹/ MPSSamples</i>中打开它，并查看实现。但是，请尽量避免粘贴粘贴，因为您不会从中学到很多东西。（顺便说一句，该示例还包含《 <a href="building-an-interpreter-cookbook.html">构建解释器食谱》中</a>介绍的其他功能，以后您可以从中获得一些乐趣。）</p>   </aside>   <h2 id="goal">目标</h2>   <p id="437b7411">您将实现一种用于指定图形形状的示例语言。该语言将允许其用户在平面画布上布置可视的二维形状。然后将定义转换为Java Swing应用程序，该应用程序将在屏幕上可视化布局。</p>   <p id="ce7bc36e">      </p><figure><img alt="图1" title="图1" src="/help/img/idea/2019.2/Tut1.png" id="95b922e1" width="373" height="69"></figure>      <br>       <figure><img alt="图2" title="图2" src="/help/img/idea/2019.2/Tut2.png" id="6b00f7f3" width="500" height="451"></figure>   <p></p>   <p id="f86bc6b8">该语言可以使非程序员无需Java，Swing或2D Graphics API的任何知识即可构建Java应用程序。另一方面，您将扮演语言设计者的角色，他将基于他或她的Java知识来编写这种易于使用的语言。通过提供一种语言和生成器来覆盖UI程序员当前必须手动解决的某些情况，可以使UI程序员的工作自动化。<br>如果您不精通Java或Swing，请不要过早担心。我们假设了这种可能性，并制作了教程来仔细指导您。您将可以轻松通过。</p>   <h2 id="createanewproject">创建一个新项目</h2>   <p id="37145ec7">我们将从一个新的项目开始。在欢迎屏幕上，单击“ <i id="6f8e2e60">创建新项目”</i> ，然后按照向导进行操作。</p>   <p id="96717b4e">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/welcome20173.png"><img alt="欢迎20173" title="欢迎20173" src="/help/img/idea/2019.2/welcome20173.png" id="62d15cc5" width="500" height="962"></a></figure>   <p></p>   <p id="2ff9f739">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Sh2.png"><img alt="Sh2" title="Sh2" src="/help/img/idea/2019.2/Sh2.png" id="e7be8d03" width="500" height="604"></a></figure>   <p></p>   <p id="27c635d6">您将得到一个包含一个空的<i id="f913ce25">Language Definition</i>和一个空的<i id="b8c7e24b">Solution</i>的空项目。</p>   <p id="fbfe97ec">      </p><figure><img alt="Sh4" title="Sh4" src="/help/img/idea/2019.2/Sh4.png" id="6743dd13" width="983" height="627"></figure>      <br>       <i id="c0fa57be">解决方案</i>保留您的程序。要编写这些程序，请使用在同一项目中定义的语言或导入的语言。在我们的教程中，将首先定义一种语言，然后使用它来编写我们可以执行的代码。<p></p>   <h2 id="languagesandprogramsunderthehood">内在的语言和程序</h2>   <p id="ab3853ca">首先，在继续之前，您需要了解一些背景知识。这是完全实现Shapes语言后就可以创建的一段代码。<br>       </p><figure><img alt="图1" title="图1" src="/help/img/idea/2019.2/Tut1.png" id="7682af5f" width="373" height="69"></figure>   <p></p>   <p id="dbfdc710">我们正在构建的语言必须允许绘画定义，该绘画定义由各个命令组成，每个命令位于单独的行上，每个命令都定义一个要绘制的形状。我们的语言需要用<i id="b9f02759">Concept</i>覆盖每个这样的命令。<i id="8268b75d">概念</i>定义了一种语言的抽象语法，即允许的语言逻辑结构集。然后，程序由<i id="f5edd6be">抽象语法树组成</i> ，这些<i id="f5edd6be">语法树</i>包含这些<i id="9e07d403">概念的</i>实例。</p>   <p id="0597c577">      </p><figure><img alt="Sh5" title="Sh5" src="/help/img/idea/2019.2/Sh5.png" id="e9278909" width="500" height="472"></figure>   <p></p>   <p id="bcff7cf0">以上示出了短程序抽象语法的AST -它由<i id="e317acfb">节点</i> ，每个<i id="f503a734">节点</i>是一个<i id="afffbe7c">概念</i> ，该语言定义了一个实例。<i id="bc058028">概念</i>定义属性，子代和引用，然后<i id="877b1b54">节点</i>给出具体值。</p>   <p id="c701b8de">在这里总结一点理论：</p>   <ul class="list _ul"><li class="list__item" id="6f819b0f"><p>         <i id="8cf9da49">语言</i>由<i id="822d7d22">概念</i>组成      </p></li><li class="list__item" id="4a639d3f"><p>         <i id="b39c46d4">概念</i>使用其<i id="a55433ce">属性</i> ， <i id="cc853c23">子级</i>和<i id="4f69205d">引用</i>定义逻辑（抽象）元素      </p></li><li class="list__item" id="3d36c07f"><p>         <i id="0c135c2d">程序（解决方案）</i>由AST组成，而AST由<i id="2e770531">节点</i>组成      </p></li><li class="list__item" id="7d23bdca"><p>         <i id="483efb79">节点</i>是<i id="cd23162f">概念的</i>实例，可为<i id="015127cf">属性</i> ， <i id="49760162">子对象</i>及其<i id="d9c5610a">概念的</i> <i id="ce4f6327">引用</i>提供具体的值      </p></li></ul>   <h2 id="graphicalshape">图形形状</h2>   <p id="6e6f9d8c">我们的语言将非常简单。我们只需要几个概念：</p>   <ul class="list _ul"><li class="list__item" id="8dbac5f7"><p>         <i id="19de324c">画布</i> -定义代表整个<b id="9442aa34">绘画定义</b>并包含所有<i id="16fad62c">形状</i>的最顶层节点      </p></li><li class="list__item" id="f6f214fd"><p>         <i id="ccf2fb1c">形状</i> -表示在<i id="76e721ff">Canvas</i>上绘制形状的命令，它将用作所有混凝土形状（例如圆形或正方形）的通用<i id="dd110fa5">超级概念</i></p></li><li class="list__item" id="d116e81e"><p>         <i id="8dfb593c">圆</i> -表示绘制圆的命令</p></li><li class="list__item" id="b3442b7b"><p>         <i id="d1d846ee">正方形</i> -表示绘制正方形的命令</p></li><li class="list__item" id="754dd3af"><p>         <i id="b32e1289">ColorReference-</i>表示<i id="38675d3f">java.awt中定义的几种预定义颜色之一<i id="38675d3f">。颜色</i>      </i></p></li></ul><i id="38675d3f">   <p id="202e2f39">我们将从<i id="a72c42e8">Shape</i>概念开始实际练习。就像在面向对象的编程中一样， <i id="14c8e3c4">Concepts</i>可以相互扩展，从而继承其<i id="be11df84">超级概念的功能</i> 。<i id="b4569203">Shape</i>概念将用作此类通用<i id="646a9efc">概念</i> ，并保留<i id="a6756583">color</i>属性，因为我们语言中的所有形状都需要<i id="60fba03e">color</i>属性，因此我们可以方便地继承它。</p>   <p id="7d88037b">      </p><figure><img alt="Sh6" title="Sh6" src="/help/img/idea/2019.2/Sh6.png" id="745d7bec" width="987" height="627"></figure>   <p></p>   <p id="76657c17">右键单击语言的“ <i id="04d90efa">结构”</i>方面，然后创建一个新的<i id="0867489b">概念</i> 。您将在编辑器中打开一个新的<i id="49e27ae2">Concept</i>定义。</p>   <p id="5f6bf064">      </p><figure><img alt="Sh7" title="Sh7" src="/help/img/idea/2019.2/Sh7.png" id="ccd856d7" width="986" height="625"></figure>   <p></p>   <p id="43d43e95">我们应该给<i id="ccf253b2">Concept指定</i>一个描述性的名称，在我们的案例中<i id="003f9eb5">Shape</i>可以正常工作。<br>因此，只需键入<b id="ddf5b7a4">Shape</b> ，其中MPS表示缺少名称-红色<i id="437e1d78"><no name=""></no></i>领域。</p>   <p id="8abe98aa">      </p><figure><img alt="Sh8" title="Sh8" src="/help/img/idea/2019.2/Sh8.png" id="951c25ed" width="986" height="624"></figure>   <p></p>   <p id="f75a0970">我们将<i id="c7b8b5d2">Shape</i>概念创建为我们语言中所有形状的通用<i id="cab033de">超级概念</i> ，并且<i id="14e25a96">Shape</i>本身不会直接在AST中使用。我们将<i id="b634b7bb">Shape</i> <b id="cfb9de00">抽象</b>标记为明确表示不能创建<i id="a233e1b7">Shape的</i>实例（ <i id="6f3666c6">节点</i> ）。</p>   <aside class="tip sideblock" rel="f75a0970" id="1aaac0a7" data-title="">      <p id="32e56c0f">如果您拼错了概念的名称并决定更改它，请继续进行更改。重命名MPS中的内容同样容易。</p>   </aside>   <p id="cb259513">现在是时候练习<i id="29cac699">Alt + Enter</i>键盘快捷键了。</p>   <p id="e2cb95d2">您可以在概念声明的第一行看到灯泡符号吗？（您可能需要将光标移动到第一行，才能显示灯泡。有点害羞。）灯泡正在隐藏上下文菜单，其中包含在光标位置可以对代码执行的操作的提示。<i id="df434c37">Alt + Enter键</i>使您可以从键盘访问灯泡菜单（我们称为“ <b id="ee313fe1">意图菜单”</b> ）。</p>   <p id="6ae929a3">      </p><figure><img alt="Sh17" title="Sh17" src="/help/img/idea/2019.2/Sh17.png" id="c04300c7" width="421" height="245"></figure>       <figure><img alt="Sh18" title="Sh18" src="/help/img/idea/2019.2/Sh18.png" id="513ac15e" width="409" height="243"></figure>      <br>当定位在<i id="8d8b1157">Concept</i>的名称上时， <i id="9cc0db15">Alt + Enter</i>键盘快捷键将弹出一个上下文弹出菜单，您可以选择将“ Make Abstract”意图应用到<i id="3ed61081">Concept上</i> 。选择该选项后，该概念将标记为<b id="cd0aafdd">abstract</b> 。现在，我们可以添加应由<i id="bf44ecf3">Shape</i>的所有子概念共享的属性，子代和引用，但我们将其留待以后使学习曲线平坦。<p></p>   <p id="9051c627">这是我们的第一个概念！欢呼！是时候添加另一个了。<i id="33deb47c">圈子</i>怎么样？当然，通过右键单击<i id="e80d4cbb">Structure</i>方面，我们创建了另一个<i id="b8b452ab">Concept</i>并为其命名<i id="4be2f280">-Circle</i> 。</p>   <h2 id="circle">圈</h2>   <p id="aee9e399">按照相同的步骤，您需要右键单击语言的“ <i id="46863c95">结构”</i>方面并添加一个新概念。将其命名为<i id="a3ad571c">Circle</i> 。</p>   <p id="3d856fad">      </p><figure><img alt="Sh9" title="Sh9" src="/help/img/idea/2019.2/Sh9.png" id="169c5278" width="985" height="624"></figure>   <p></p>   <p id="504fd175">圆应该从<i id="f9885fc5">Shape</i>继承功能，因此我们需要在<b id="aae9ac22">extends</b>子句中进行指示。将光标定位在小区举办“BaseConcept”文本的开头并创下MPS最有用的键盘快捷键- <i id="148730e5">控制+空间</i> -以调用代码完成。MPS将向您显示适用于替代“ BaseConcept”文本的选项列表。我们需要在此处选择<i id="4c00f45d">Shape</i>以使<i id="442d5b57">Circle</i>扩展<i id="a2876117">Shape</i> 。<br>       </p><figure><img alt="Sh10" title="Sh10" src="/help/img/idea/2019.2/Sh10.png" id="f9dc2da3" width="988" height="624"></figure>   <p></p>   <p id="10263582">如果您在完成菜单中没有看到“ <i id="c0a99b41">形状</i> ”，那是因为您的光标不在单词的第一个位置。</p>   <p id="5984e2ff">      </p><figure><img alt="尼克·奥布拉佐夫斯基（Sni mek obrazovky）2018 12 06 v 10 42 17" title="尼克·奥布拉佐夫斯基（Sni mek obrazovky）2018 12 06 v 10 42 17" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-06-v-10-42-17.png" id="b8a73994" width="500" height="496"></figure>   <p></p>   <p id="a8f710d4">光标左侧的字符用作过滤器，以仅显示与这些字符匹配的选项。光标向右移动得越远，完成菜单中显示的选项就越少。</p>   <p id="a0675530">      </p><figure><img alt="尼克·奥布拉佐夫斯基2018 12 06 v 10 41 46" title="尼克·奥布拉佐夫斯基2018 12 06 v 10 41 46" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-06-v-10-41-46.png" id="dd7d72b8" width="500" height="318"></figure>   <p></p>   <p id="4210c006">您必须使用向左箭头移动光标，或者，如果再次按<i id="b7b5084f">Control + Space</i> ，则MPS将为您将光标移动到当前单词的最左侧。</p>   <p id="cf5122d7">      <br>       </p><figure><img alt="Sh11" title="Sh11" src="/help/img/idea/2019.2/Sh11.png" id="55722adb" width="986" height="627"></figure>   <p></p>   <p id="01edaf65">因此，这是我们的语言用户将使用的第一个具体概念。为了在代码补全对话框中为该概念提供漂亮的文本表示，并使MPS在用户每次键入“ circle”时创建一个<i id="7ee09bda">Circle</i>实例方面<i id="7ee09bda">都很</i>聪明，您需要给该概念加上别名“ circle”。</p>   <p id="d0cbd14d">      </p><figure><img alt="Sh12" title="Sh12" src="/help/img/idea/2019.2/Sh12.png" id="fb2c0881" width="410" height="285"></figure>   <p></p>   <aside class="tip sideblock" rel="d0cbd14d" id="839fefef" data-title="">      <p id="5ed5a762">注意， <b id="bbee0e63">Tab</b>键可以帮助您在编辑器中的可编辑元素之间导航。经常使用<b id="f534ecdf">Tab</b>键。</p>   </aside>   <p id="24922dcc">每个圆都需要在屏幕上指定其坐标和半径。我们将创建将包含这些整数值的属性。导航到<b id="440dd5c1">属性</b>部分，将光标放在表示空值集合的“ << ... >>”符号上，然后按<i id="125e031a">Enter</i> 。这将创建一个空属性。</p>   <p id="2599e6d3">      </p><figure><img alt="Sh13" title="Sh13" src="/help/img/idea/2019.2/Sh13.png" id="c63ec3c7" width="431" height="308"></figure>       <figure><img alt="Sh14" title="Sh14" src="/help/img/idea/2019.2/Sh14.png" id="c59a5bef" width="419" height="299"></figure>      <br>您给属性命名为“ x”，然后点击<b id="d67646bd">Tab键</b>并提供属性的类型-“整数”。键入“整数”时，您可以按<i id="2044d4da">Control + Space</i>键盘快捷键，以使MPS完成类型的名称。<p></p>   <p id="781879da">      </p><figure><img alt="Sh15" title="Sh15" src="/help/img/idea/2019.2/Sh15.png" id="58aa5e58" width="431" height="289"></figure>       <figure><img alt="Sh16" title="Sh16" src="/help/img/idea/2019.2/Sh16.png" id="b35a598c" width="423" height="319"></figure>      <br>然后添加“ Y”和“半径”的属性，您将完成第一个具体概念。<p></p>   <h2 id="square">广场</h2>   <p id="c4e16ff6">现在，您应该尝试创建正方形的概念。只需重复我们对<i id="72469050">Circle</i>所做的步骤，只需创建不同的属性<i id="b5a70f98">-upperLeftX</i>和<i id="2640029b">upperLeftY</i>来保存左上角的坐标，然后是<i id="36a585ce">size</i>以指定正方形的边长。最终，您应该了解以下内容：</p>   <p id="d03ad598">      </p><figure><img alt="Sh19" title="Sh19" src="/help/img/idea/2019.2/Sh19.png" id="89ebed22" width="985" height="627"></figure>   <p></p>   <p id="107b6077">不要忘记在第一行上扩展<i id="6dd197dc">Shape</i>概念。您可能已经注意到，在显示完成菜单（ <i id="9d507fda">Control + Space</i> ）的同时，您仍然可以键入字符，它们将用于过滤出完成菜单中的可用条目。</p>   <h2 id="canvas">帆布</h2>   <p id="6c1614ef">创建了两个形状后，我们可以继续定义一个概念以将它们全部保留在绘画中。我们将创建另一个名为<i id="d1168714">Canvas的</i>概念，它将表示由形状组成的场景。用户将能够创建多个场景（ <i id="5bd25a00">画布</i> ），它们将相互独立并且不会共享形状。每个<i id="ef784675">画布</i>将包含一个名称和包含的形状列表。</p>   <p id="72f177a0">因此，再次右键单击语言的“ <i id="e73b6bd3">结构”</i>方面以创建一个新概念并将其命名为<i id="2aaab2d3">Canvas</i> 。</p>   <p id="556dc388">      </p><figure><img alt="Sh20" title="Sh20" src="/help/img/idea/2019.2/Sh20.png" id="f3e1f690" width="987" height="625"></figure>   <p></p>   <aside class="tip sideblock" rel="556dc388" id="2f676f18" data-title="">      <p id="19f9a843">请注意，与<i id="dc5dd949">Circle</i>或<i id="bb13eda3">Square</i>不同， <i id="00707b91">Canvas</i> <b id="140825b7">不会扩展</b> <i id="9d7a994c">Shape</i> ，而是<i id="42800187">BaseConcept</i> 。不应将<i id="32829859">Canvas</i>绘制或放置在其他<i id="78b13728">Canvas上</i> ，因此它不应扩展<i id="9d49a1fe">Shape</i> 。</p>   </aside>   <p id="162864a7">导航（使用<b id="efb5a6c1">Tab</b> ）到<none><b id="c29aee46">工具</b>部分的“ <none>”文本，并指定<i id="974e89d2">INamedConcept</i> （在其中键入或使用<i id="214bf55b">Control + Space</i> ）。<i id="da07c73e">INamedConcept</i>是<i id="8b66e291">Canvas</i>现在将实现的<i id="fbb5ecd6">概念接口</i> 。<i id="b2e7f218">概念接口</i> ，就像<i id="60fdd197">概念</i> ，增加新的功能，以实现它们<i id="259d94da">的概念</i> 。在我们的案例中， <i id="a4f1c4a2">InamedConcept</i>通过<i id="2ab8d1f3">name</i>属性丰富了<i id="08a404df">Canvas</i> ，因此<i id="890c1595">Canvas</i>实例（称为<i id="92757844">Nodes</i> ）将具有<i id="f0f5c150">name</i>属性，以便用户可以轻松区分它们。</none></none></p>   <p id="aef9690e">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Sh21.png"><img alt="Sh21" title="Sh21" src="/help/img/idea/2019.2/Sh21.png" id="684cb066" width="500" height="267"></a></figure>       <figure><a class="lightbox" href="/help/img/idea/2019.2/Sh23.png"><img alt="Sh23" title="Sh23" src="/help/img/idea/2019.2/Sh23.png" id="bb16d4ce" width="500" height="255"></a></figure>      <br>由于<i id="f3cab12b">Canvas</i>将代表绘画场景，并且本身不会成为任何其他概念的一部分（模型中将没有任何父对象），因此我们将其标记为<b id="add43289">实例可以是root</b> 。这将使<i id="9513d14f">Canvas</i>实例成为AST的根源。<p></p>   <p id="372aa06b">为了表明<i id="3c2e3c85">画布</i>可容纳<i id="4143b5ad">形状</i> ，我们将创建<b id="b2462dee">形状</b>的子集。再次，在<b id="9ef09777">子级</b>部分的“ << ... >>”单元格中按<i id="fc3c32b5">Enter键</i> ， <i id="fc3c32b5">输入</i>子级名称及其可能包含的节点类型。不要忘记* * <i id="900dad62">Control +空格</i>键快捷方式，以显示代码完成对话框。</p>   <p id="ff3f7dd2">      </p><figure><img alt="Sh24" title="Sh24" src="/help/img/idea/2019.2/Sh24.png" id="53dbbb35" width="426" height="257"></figure>       <figure><img alt="Sh25" title="Sh25" src="/help/img/idea/2019.2/Sh25.png" id="1ab1debc" width="499" height="307"></figure>   <p></p>   <p id="c5c7252c">您应该以这样的概念定义结束：<br>       </p><figure><img alt="Sh26" title="Sh26" src="/help/img/idea/2019.2/Sh26.png" id="f2b55244" width="447" height="274"></figure>   <p></p>   <p id="00b53182">现在，我们已经创建了足够的概念，可以使用一种简约的语言。试一试吧。</p>   <h2 id="anearlytestride">早期试乘</h2>   <p id="b08e9bf6">我们需要先构建语言，然后才能使用它。将来，在更改语言定义后，请记住重复执行“重新构建”的过程，以使更改生效。在“ <i id="1e859d2a">项目”视图中</i>右键单击最高节点（最高根，代表整个项目， <b id="1a11e126">包括语言和解决方案</b> ），然后选择“ <b id="e78fa222">重建项目”</b> 。</p>   <p id="6d6e3059">      </p><figure><img alt="Sh35" title="Sh35" src="/help/img/idea/2019.2/Sh35.png" id="f05425a1" width="986" height="626"></figure>   <p></p>   <p id="d70c566a">构建完成后，该语言将可用于沙箱<i id="8f27cb1b">解决方案</i>内部的模型中。右键单击模型并选择要实例化的根概念，只需创建一个新的<i id="4fb68b0f">Canvas</i> 。请注意，根概念是显示在此菜单中的那些概念，可以在模型的最顶层实例化。<br>       </p><figure><img alt="Sh27" title="Sh27" src="/help/img/idea/2019.2/Sh27.png" id="f7e7826c" width="711" height="271"></figure>   <p></p>   <p id="cbf3c06c">现在给<i id="74cf8d7f">Canvas</i>实例起一个名字，您就拥有了第一幅画。您可以开始使用该语言中定义的概念在画布上放置视觉形状。</p>   <p id="a9d78bba">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Sh28.png"><img alt="Sh28" title="Sh28" src="/help/img/idea/2019.2/Sh28.png" id="a4a0d126" width="900" height="1250"></a></figure>      <br>       <figure><img alt="Sh29" title="Sh29" src="/help/img/idea/2019.2/Sh29.png" id="89247b10" width="499" height="167"></figure>   <p></p>   <aside class="tip sideblock" rel="a9d78bba" id="effc1c93" data-title="">      <p id="0595bcc4">目前，我们的语言以及布局的编辑体验使用的是一些默认设置，我们将尽快对其进行更改，以使代码更具定制化的外观。</p>   </aside>   <p id="5a2b3924">同样， <i id="5c7619ff">Control + Space</i>是在此处大量使用的键盘快捷键。每次犹豫什么时候都要使用它。注意，代码完成对话框为我们提供了用该语言创建的两种形状。<br>       </p><figure><img alt="Sh30" title="Sh30" src="/help/img/idea/2019.2/Sh30.png" id="503b29dc" width="520" height="229"></figure>   <p></p>   <p id="cdaa5863">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Sh31.png"><img alt="Sh31" title="Sh31" src="/help/img/idea/2019.2/Sh31.png" id="e1a5cbdc" width="500" height="456"></a></figure>   <p></p>   <p id="504d41bd">      </p><figure><img alt="Sh32" title="Sh32" src="/help/img/idea/2019.2/Sh32.png" id="8085864c" width="509" height="219"></figure>   <p></p>   <p id="a01d3d01">      <br>您可以通过在形状列表中最后一个形状的末尾按<i id="f5b95518">Enter</i>来插入其他形状，在我们的例子中，这是“圆”的闭合“}”符号。注意， <i id="9ca51d8f">Control + Space</i>可以省去键入形状的名称。</p>   <p id="4679857c">      </p><figure><img alt="Sh33" title="Sh33" src="/help/img/idea/2019.2/Sh33.png" id="52098877" width="526" height="258"></figure>       <figure><img alt="Sh34" title="Sh34" src="/help/img/idea/2019.2/Sh34.png" id="f8817ad3" width="491" height="291"></figure>   <p></p>   <p id="89bbcc58">凉！希望您能成功庆祝自己的成功。现在，如何调整这些编辑器以使代码在屏幕上看起来更好？</p>   <h2 id="editors">编者</h2>   <p id="c2f7feb8">MPS使用投影编辑器。您可能已经注意到，感觉编辑器的行为与您预期的略有不同。与基于文本的语言不同，MPS永远不会将代码表示为纯文本。相反，MPS中的代码表示AST-抽象语法树。总是。</p>   <p id="c8cc90d1">这为语言设计，语言可组合性和不可解析的符号带来了巨大的好处，您可以在MPS文档中了解更多信息。</p>   <p id="9c2c0584">在这里，我们应该专注于投射语言的编辑方面。由于纯文本编辑器不能可靠地表示AST，并且由于直接编辑AST非常不方便，因此投影语言必须为该语言一部分的所有<i id="b2b5f328">概念</i>提供编辑器。有时，即使是一个<i id="c4c69f9e">Concept</i> ，也可能有多个替代编辑器，但这不是我们的目标。MPS在许多情况下都可以很好地为没有提供<i id="60dd9b78">Concepts的Concepts</i>提供默认编辑器。这对于语言原型制作非常好。为了方便最终用户使用，我们应该花一些时间来准备一个明确的编辑器。</p>   <h3 id="shape">形状</h3>   <p id="bf448a92"><i id="d27e0466">Shape</i>概念是一个<b id="501bc10d">抽象概念</b> ，因此不需要编辑器。因此，我们将保持不变。</p>   <h3 id="circle">圈</h3>   <p id="4aaedfec">对于<i id="e080cc93">Circle，</i>我们可以创建一个编辑器，将所有必要的属性很好地放在一行上。我们将在编辑器中打开<i id="a4673f8d">Circle</i>概念，单击左下角的绿色“ +”按钮，然后选择<i id="08c4273e">Editor-> Concept Editor</i> 。</p>   <p id="7a514fb8">      </p><figure><img alt="Sh9a" title="Sh9a" src="/help/img/idea/2019.2/Sh9a.png" id="0d9934e2" width="985" height="624"></figure>      <br>       <figure><img alt="Sh36" title="Sh36" src="/help/img/idea/2019.2/Sh36.png" id="043900ed" width="342" height="144"></figure>      <br>您将获得<i id="acef6fcd">Circle</i>概念的空编辑器定义。请记住，在此处编辑内容将非常需要<i id="c5250931">Control + Space</i> 。<p></p>   <p id="ca12be72">      </p><figure><img alt="Sh37" title="Sh37" src="/help/img/idea/2019.2/Sh37.png" id="17518385" width="544" height="161"></figure>   <p></p>   <p id="df9d12a8">MPS中概念的编辑器由视觉单元组成，每个视觉单元代表属于基础概念的一些信息。由于节点是在AST中按层次结构组成的，因此其编辑器也将在屏幕上组成，并且子节点的编辑器嵌套在其祖先的编辑器中。</p>   <p id="89b78d73">对于<i id="6205ae04">Circle</i> ，我们想显示所有属性的值（ <i id="8e7a699e">x</i> ， <i id="c6e661a2">y</i> ， <i id="77bfe40e">radius</i> ）以及围绕它们的一些任意文本，所有这些都在一行上显示。<br>因此，首先我们将为这些单元格选择一个布局- <i id="a9303b46">缩进布局</i>在这里可以正常工作。因此，在红色单元格中按<i id="3be751a8">Control + Space</i> ，然后从列表中将其选中。您可以通过键入方括号后接减号来加快搜索速度。<br>       </p><figure><img alt="Sh38" title="Sh38" src="/help/img/idea/2019.2/Sh38.png" id="b53a89ac" width="862" height="285"></figure>   <p></p>   <p id="249168be">现在，键入“ circle”以输入常量文本，该文本将放置在行的开头。<br>       </p><figure><img alt="Sh39" title="Sh39" src="/help/img/idea/2019.2/Sh39.png" id="303f2fc2" width="347" height="149"></figure>   <p></p>   <p id="8974d1df">点击<i id="44fa85db">Enter</i>创建一个新的单元格。键入“ x：”以标记以下单元格包含<i id="c730b324">x</i>属性的值。</p>   <p id="cc1ee69b">      </p><figure><img alt="Sh40" title="Sh40" src="/help/img/idea/2019.2/Sh40.png" id="0f6c77f4" width="382" height="150"></figure>       <figure><img alt="Sh41" title="Sh41" src="/help/img/idea/2019.2/Sh41.png" id="d5708cfa" width="388" height="157"></figure>   <p></p>   <p id="f0b19e52">再次按<i id="14d5d6f5">Enter键</i>以创建一个新单元格。记住，每次要添加新单元格时，请先按<i id="eda4fcf0">Enter键</i> ，然后从完成菜单（ <i id="544cd176">Control + Space</i> ）中选择要插入的单元格类型。</p>   <p id="5e155a68">现在，您必须从代码完成菜单中选择<i id="32903420">x</i>属性，以将单元格绑定到正确的属性。<b id="d7d461e4">不要只输入{x}</b> ，使用<i id="d3f99adb">Control + Space</i>来显示完成菜单并从菜单中选择<i id="b7ecdb77">x</i>属性：</p>   <p id="ffa11e5e">      </p><figure><img alt="Sh42" title="Sh42" src="/help/img/idea/2019.2/Sh42.png" id="53f83141" width="511" height="206"></figure>   <p></p>   <p id="ff442f06">现在，您可以继续自己插入包含常量文本以及<i id="f13b7905">y</i>和<i id="bb40d5dc">radius</i>属性值的单元格。请记住， <i id="51a454e7">Enter</i>将插入新的单元格， <i id="e9eb8bf7">Control + Space</i>将调出代码完成菜单。您应该以这样的编辑器结束。</p>   <p id="d0839188">      </p><figure><img alt="Sh43" title="Sh43" src="/help/img/idea/2019.2/Sh43.png" id="f9a50a0a" width="506" height="155"></figure>   <p></p>   <h3 id="square">广场</h3>   <p id="db8c2a37">      <i id="4c523c05">Square</i>也需要编辑器。在编辑器中打开<i id="5152ad32">Square</i>概念，点击左下角的'+'符号并创建一个新的<i id="b6aece65">Concept Editor</i> 。按照上一节中的说明，输入编辑器定义，如下所示：</p>   <p id="b069556e">      </p><figure><img alt="Sh44" title="Sh44" src="/help/img/idea/2019.2/Sh44.png" id="1ff20911" width="615" height="155"></figure>      <br>当然，您可以自己执行此操作。<p></p>   <h3 id="canvas">帆布</h3>   <p id="286f24d0"><i id="d63bf5e3">Canvas</i>概念的编辑器会稍有不同，因为它包含一组需要在屏幕上留出一定空间的形状集合。<i id="04012d2f">画布</i>因此散布在多行中，每行将显示<i id="4101c6a8">Canvas</i>的形状集合中的一个形状。但是，您将以与以前相同的方式开始，打开“ <i id="554ef4a9">画布”</i>概念，单击“ +”符号以创建新的<i id="478356c3">概念编辑器</i> ，插入<i id="67e57184">缩进版式</i>并输入一些文本以获取以下内容：</p>   <p id="355859cc">      </p><figure><img alt="Sh45" title="Sh45" src="/help/img/idea/2019.2/Sh45.png" id="8da52643" width="579" height="143"></figure>      <br>现在将红色单元格绑定到<i id="8ee6c805">name</i>属性。由于该属性是从<i id="8535deb7">INamedConcept</i>概念界面继承的，因此它将在完成菜单（ <i id="abdd0f10">Control + Space）中</i>进一步向下移动，但是肯定在那里。<p></p>   <p id="5a1bbad8">      </p><figure><img alt="Sh46" title="Sh46" src="/help/img/idea/2019.2/Sh46.png" id="893b55ea" width="467" height="134"></figure>   <p></p>   <p id="30655802">如果可以看到大括号将其包裹，请确保已正确插入<i id="a70524a3">name</i>属性。（请注意，您不应该自己插入这些花括号，而是由MPS为所有属性单元添加的。）<br>以下单元格将保存已添加到<i id="bd1e06cd">Canvas中</i>的形状的集合。请注意我们在这里如何组合编辑器- <i id="d9e8b205">画布</i>仅标记一个区域，在该区域中应编辑各个形状，然后将其留给形状以它们如何使用该区域。<br>由于形状应垂直组织，因此每个形状都应在一行上，因此应从完成菜单中选择<i id="ad65342f">垂直集合布局</i> 。</p>   <p id="226cf4e5">      </p><figure><img alt="Sh47" title="Sh47" src="/help/img/idea/2019.2/Sh47.png" id="e9900691" width="1040" height="291"></figure>   <p></p>   <p id="b0262659">小心点如果您选择的布局与<b id="5b6f7322">垂直</b>布局不同，则形状将不会很好地组织在一个接一个的布局中，但是可能会在同一行上将一个接一个的布局组织得很好，尽管这很新颖，但可能不是使用语言最直观的方法。 。</p>   <p id="7543181d">      </p><figure><img alt="尼克·奥布拉佐夫斯基（Sni mek obrazovky）2018 12 06 v 14 51 05" title="尼克·奥布拉佐夫斯基（Sni mek obrazovky）2018 12 06 v 14 51 05" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-06-v-14-51-05.png" id="6c5e9c1f" width="500" height="294"></figure>   <p></p>   <p id="862a23f5">您需要将红色单元格绑定到<i id="6e928283">Canvas</i>的<i id="019db97e">shapes</i> <i id="6e928283">子集合</i> 。</p>   <p id="f5239a21">      </p><figure><img alt="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 06 v 14 51 26" title="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 06 v 14 51 26" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-06-v-14-51-26.png" id="1d17e43f" width="500" height="292"></figure>   <p></p>   <p id="43d6b6c9">      <br>      </p><figure><img alt="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 06 v 14 51 50" title="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 06 v 14 51 50" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-06-v-14-51-50.png" id="2de4701f" width="500" height="294"></figure>      <br>现在，要将集合放置在<i id="414c4ebf">Canvas</i>的名称下方，您应该使用<i id="64e3cca1">Alt + Enter</i>快捷方式（或<b id="b9a2d9ba">灯泡</b>符号），弹出<b id="1ad5c281">意图</b>弹出菜单，然后选择“在新行中添加”。<p></p>   <p id="b7fef37f">      </p><figure><img alt="Sni mek obrazovky 2018 12 06 v 14 52 08" title="Sni mek obrazovky 2018 12 06 v 14 52 08" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-06-v-14-52-08.png" id="4df62324" width="500" height="334"></figure>   <p></p>   <p id="ffe4aa13">如果您不小心按下了“添加新行”，请使用<i id="39ca1463">Control / Cmd + Z</i>撤消该操作<i id="ca3c6a77">。</i>      <br>您将获得最终的编辑器定义：</p>   <p id="173bd7e7">      </p><figure><img alt="Sni mek obrazovky 2018 12 06 v 14 52 24" title="Sni mek obrazovky 2018 12 06 v 14 52 24" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-06-v-14-52-24.png" id="8be7a6b0" width="500" height="420"></figure>   <p></p>   <p id="8ce661b3">如果您的版本看起来不同，则可能有以下几个原因：</p>   <ul class="list _ul"><li class="list__item" id="7086e7b0"><p>您从完成菜单中插入了<i id="f80b5440">name</i>属性。如果仅键入“名称”，则该单元格很可能未绑定到<i id="35c77bd1">名称</i>属性，并且在使用时只会显示文本“名称”。</p></li><li class="list__item" id="55e1934e"><p>您设置了“在新行中添加”的意图。如果您不小心选择了“添加新行”，则<i id="19aa5bbc">形状</i>单元将不会绘制在“ Painting ...”第一行的下方，而是在其旁边。</p></li><li class="list__item" id="50d834c7"><p>如果将“添加新行”属性设置为与<i id="2939b724">形状</i>单元不同的单元，则布局也将与预期的不同。</p></li><li class="list__item" id="4c8f4835"><p>您为<i id="3600db2e">形状</i>集合选择了与垂直不同的布局。不同的布局使用不同的符号。垂直使用“（>”，而“（-”和“（/”分别属于缩进和水平布局。</p></li></ul>   <p id="3a3b6730">在所有这些情况下，重复的<b id="20ce3426">撤消</b> <i id="ddb25c14">（Control / Cmd + Z）</i>都会有所帮助。</p>   <h2 id="thesecondrun">第二次</h2>   <p id="5196a04b">现在，您可以再次重建项目（在“ <i id="769f3bf3">项目视图”中</i>的最顶端的节点上单击鼠标右键），然后查看<i id="8af866f3">MyDrawing</i>中的沙箱代码。</p>   <p id="b5bf6ab2">      </p><figure><img alt="Sh53" title="Sh53" src="/help/img/idea/2019.2/Sh53.png" id="0c0ab5e5" width="663" height="224"></figure>      <br>查看代码布局如何更改：<p></p>   <p id="90aa7daf">      </p><figure><img alt="Sh54" title="Sh54" src="/help/img/idea/2019.2/Sh54.png" id="d8b11e39" width="588" height="113"></figure>   <p></p>   <p id="87b4f260">它是相同的代码（AST），但在屏幕上的组织方式不同。以前它是带有许多花括号的丑陋的树状文本，而现在的代码反映了我们提供给MPS的编辑器定义。</p>   <p id="cf2da49b">如果您的看法不同，请重新访问这三个编辑器。鉴于它们很小，请随意删除然后再做（如果需要）。如果您在<b id="0f19bb22">编辑器</b>方面模型下的“ <b id="057207ca">项目”视图中</b>找到整个编辑器定义，然后按<i id="c748ad69">Delete</i>键或右键单击并在上下文菜单中选择“删除”，则可以删除整个编辑器定义。或者，您可以继续按编辑器定义内的<i id="2b14503e">Delete</i>和<i id="0b667e53">Backspace</i>按钮，直到删除所有看起来可疑的代码。</p>   <h2 id="coloring">染色</h2>   <p id="14968d2f">现在，我们应该回到<i id="26911b0a">Shape</i>并添加对颜色的支持。由于<i id="c9ac0c8d">Circle</i>和<i id="5de6e620">Square都</i>扩展<i id="b97b07a7">Shape</i> ，因此它们都将继承颜色。</p>   <aside class="tip sideblock" rel="14968d2f" id="b0420b50" data-title="">      <p id="b5521218">如果出于任何原因您需要跳到生成器，那么现在正是这样做的好时机。您只需要忽略所有在生成器章节中提到颜色的地方。</p>   </aside>   <p id="b9497131">由于我们希望用户的语言能够从预定义的颜色列表中选择形状的颜色，因此我们不能仅使用文本属性来保存颜色值。相反，我们将添加对<i id="1572afdc">Shape</i>的引用，并使该参考点指向预定义的颜色常量之一。让我们从创建代表预定义颜色的常量开始。</p>   <h3 id="conceptforcolors">颜色的概念</h3>   <p id="2ea615e4">一种方法是使用MPS枚举定义颜色。但是，这将不允许用户定义自己的颜色。所有颜色都将在Shapes语言的一部分枚举中定义。相反，我们将对颜色使用完整的概念，并且该概念的节点将定义各个颜色。这些颜色节点可以定义为语言的一部分（在所谓的附件模型内部），也可以直接在<i id="968b948e">Canvas</i>概念实例旁边的用户模型中定义。</p>   <p id="2f1154ff">首先，我们将创建一个表示颜色常数的概念。我们将其称为<i id="d54b470c">Color</i>并将其可植根，以便将其放置在模型中：</p>   <p id="8fc6519c">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shx1.png"><img alt="shx1" title="shx1" src="/help/img/idea/2019.2/Shx1.png" id="277c8d12" width="900" height="1248"></a></figure>   <p></p>   <p id="6079020e">还需要一个编辑器：</p>   <p id="f5e82632">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shx2.png"><img alt="shx2" title="shx2" src="/help/img/idea/2019.2/Shx2.png" id="467e287e" width="900" height="1246"></a></figure>   <p></p>   <h3 id="pre-definedcolors">预定义的颜色</h3>   <p id="0d96bdcc">现在， <b id="a6c373d3">重新构建</b>您的项目。我们刚刚添加的<i id="7883730a">颜色</i>概念需要进行编译，以便我们可以使用它来创建一些颜色。我们需要提供<i id="d16ef23b">Color</i>概念的具体节点，这些节点将代表各个颜色常量，并且我们语言的用户将能够从其<i id="44e8b3c2">Canvas中</i>引用它们。我们将为此使用<b id="4b54bf0c">附件模型</b> 。<b id="07c98e61">附件模型</b>是语言定义内的模型，其中包含任意节点，这些节点成为语言的一部分，并且对语言用户可见。</p>   <p id="68e16894">因此，首先，我们需要使用以下语言创建一个<b id="ef98a3d7">附件模型</b> ：</p>   <p id="402b3d07">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shx7.png"><img alt="shx7" title="shx7" src="/help/img/idea/2019.2/Shx7.png" id="f4a05b55" width="500" height="660"></a></figure>   <p></p>   <p id="7dc8baf3">该模型需要一个名称。如果MPS未禁用构造<b id="9a860db9">型</b>框，请确保其为空：</p>   <p id="f5dfd28e">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shx8.png"><img alt="shx8" title="shx8" src="/help/img/idea/2019.2/Shx8.png" id="7ad99c88" width="500" height="470"></a></figure>   <p></p>   <p id="4747838f">声明<i id="4115787a">颜色</i>概念的<b id="be776dec">Shapes</b>语言是我们需要在附件模型中导入的唯一语言：</p>   <p id="b4c71b9b">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shx10.png"><img alt="shx10" title="shx10" src="/help/img/idea/2019.2/Shx10.png" id="55acba15" width="300" height="856"></a></figure>   <p></p>   <p id="804e9a1a">切换到“ <b id="78b15e93">使用的语言”</b>选项卡。它是空的或包含我们可以留在列表中的devkit。单击<b id="191e1532">加号，</b>然后从列表中选择<i id="32a9ec6b">Shapes</i>语言。该语言必须已添加到使用的语言列表中。</p>   <p id="e0a75ec2">然后切换到“ <b id="d0763e86">高级”</b>选项卡，然后选择<b id="5f4ea859">“不生成”</b>复选框：</p>   <p id="c226fbf7">      <b id="d97fd2a6">         </b></p><figure><b id="d97fd2a6"><img alt="GenShap" title="GenShap" src="/help/img/idea/2019.2/GenShap.png" id="8065539f" width="500" height="736"></b></figure><b id="d97fd2a6">      </b>   <p></p>   <p id="9ec85878">然后单击“ <b id="5159e418">确定”</b>关闭对话框。</p>   <h3 id="createcolors">创建颜色</h3>   <p id="f4c0ee2d">现在，您应该能够在新创建的附件模型中创建颜色常量：</p>   <p id="e38e6c52">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shx11.png"><img alt="shx11" title="shx11" src="/help/img/idea/2019.2/Shx11.png" id="c7ac252f" width="500" height="792"></a></figure>   <p></p>   <p id="7adde342">如果在“ <b id="7bf858f2">新建”</b>菜单中没有看到“ <i id="d53f095e">颜色”</i> ，则很可能忘记了重新构建语言。或者，您错过了<i id="5a43dfcc">Color</i>概念的<b id="09c37b5a">can be root</b>属性，该属性必须设置为<b id="c49e3077">true</b> 。</p>   <p id="5c410eca">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shx12.png"><img alt="shx12" title="shx12" src="/help/img/idea/2019.2/Shx12.png" id="0eeae35e" width="900" height="1244"></a></figure>   <p></p>   <h3 id="thefirsttouchondependencies">第一次依赖</h3>   <p id="7d9bb918">MPS中的关键知识是如何处理依赖关系和导入的语言。要显示模块或模型的依赖关系，必须在左侧的“ <b id="4f6cc5cf">项目视图”</b>面板中导航至该模块（使用<i id="68bb2709">Alt / Cmd +1</i>打开面板）。尝试使用<i id="29544193">Shapes</i>语言。在树中选择它：</p>   <p id="0886210a">      </p><figure><img alt="Sh70" title="Sh70" src="/help/img/idea/2019.2/Sh70.png" id="2d311061" width="314" height="320"></figure>      <br>点击<i id="22e3ffbf">Alt + Enter</i> （或右键单击它并选择<b id="f95a4f32">Module / Model Properties</b> ），您将看到一个包含<b id="f95a4f32">模块/模型属性</b>的对话框。“ <i id="3972cd5b">依赖关系”</i>选项卡显示了当前模块/模型所依赖的模块/模型（在Java中为aka导入，在Ruby中为require等）。<p></p>   <p id="3a101962">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shx100.png"><img alt="Shx100" title="Shx100" src="/help/img/idea/2019.2/Shx100.png" id="ddc64981" width="500" height="968"></a></figure>   <p></p>   <p id="44843be0">您现在很可能是空的。您可以使用“ +”按钮添加元素。在小的搜索对话框中，键入所需依赖项名称的几个字符以缩小搜索范围，并在找到正确的依赖项时按<i id="38f29c92">Enter键</i> 。</p>   <p id="60923630">      </p><figure><img alt="Sh72" title="Sh72" src="/help/img/idea/2019.2/Sh72.png" id="28d9d315" width="352" height="267"></figure>   <p></p>   <p id="28a2f9c8">在“ <i id="3788b566">使用的语言”</i>部分中，您指示要在模块/模型中使用的语言（语法）。</p>   <p id="f61ffa8d">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shx101.png"><img alt="shx101" title="shx101" src="/help/img/idea/2019.2/Shx101.png" id="34927119" width="500" height="964"></a></figure>   <p></p>   <p id="d6bbe466">我们不需要在此处进行任何更改，因此让我们单击“ <b id="488994a9">确定”</b>按钮继续。</p>   <aside class="tip sideblock" rel="d6bbe466" id="e8d0132f" data-title="">      <p id="b27eaed8">如果您在使用MPS的任何时候都无法键入本教程中建议的代码，则很可能是您没有正确设置依赖项。因此，请注意本教程中提到依赖项的地方，并建议您添加依赖项或导入语言。</p>   </aside>   <h3 id="conceptforcolorreference">颜色参考的概念</h3>   <p id="ff0baaae">现在，我们的语言需要一种方法来指示代码中所需形状的颜色。因此， <i id="9ac0f22a">Shape</i>应该引用<b id="63cc0b56">Shapes</b>语言的<b id="e6ac4f7a">附件模型</b>中的颜色常量之一。每当用户要为<i id="50a66a6b">Shape</i>指定颜色时，MPS就会自动使用所有可用的颜色常量填充完成菜单。</p>   <p id="43be1e84">在<b id="dd163440">Structure</b>方面模型中创建一个新概念，并将其命名为<i id="30511f7d">ColorReference</i> ：</p>   <p id="4145b445">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shx3.png"><img alt="shx3" title="shx3" src="/help/img/idea/2019.2/Shx3.png" id="a460c7b5" width="900" height="1252"></a></figure>   <p></p>   <p id="3c61e437">      <i id="10d97a28">ColorReference</i>保留指向单个颜色常量（ <i id="d4a75cdb">Color</i>概念的节点）的引用（跨AST层次结构的指针）。</p>   <p id="31fcac29">为了显示和编辑颜色，我们还需要<i id="46d3c11e">ColorReference</i>的编辑器。</p>   <p id="6d8b4ca9">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shx4.png"><img alt="shx4" title="shx4" src="/help/img/idea/2019.2/Shx4.png" id="3e68d832" width="900" height="1252"></a></figure>   <p></p>   <p id="732a2b42">引用应该只显示它所引用的颜色常量的名称，因此我们从代码完成菜单中选择<i id="67df0d10">目标</i> ，并指定颜色常量的<i id="a9b2abb0">name</i>属性就是我们要向用户显示的属性。</p>   <p id="058b59da">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shx5.png"><img alt="shx5" title="shx5" src="/help/img/idea/2019.2/Shx5.png" id="7b83ef87" width="900" height="1242"></a></figure>   <p></p>   <p id="07562a9e">您应该获得如下的编辑器定义：</p>   <p id="752ae4ec">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shx6.png"><img alt="shx6" title="shx6" src="/help/img/idea/2019.2/Shx6.png" id="459166af" width="900" height="1248"></a></figure>   <p></p>   <h3 id="updatingshape">更新形状</h3>   <p id="a3731321"><i id="762b850e">Shape</i>概念是放置我们新的<i id="41eedf74">ColorReference</i>的好地方，因为<i id="a531c445">Circle</i>和<i id="aaada0f9">Square</i>都将继承它。在编辑器中将其打开并进行更改：</p>   <p id="d9b28968">      </p><figure><img alt="Sh96" title="Sh96" src="/help/img/idea/2019.2/Sh96.png" id="215082fe" width="672" height="580"></figure>      <br>       <i id="d3648e2d">Shape</i>可能还会定义一个<b id="3d49453f">编辑器组件</b>来定义颜色和<i id="9bb165c0">圆形</i>的编辑器， <i id="e2e39afb">Square</i>也将能够在其编辑<b id="3595fecf">器</b>中重用该<b id="3595fecf">编辑器组件</b> ，从而避免重复。<p></p>   <p id="b96963d7">点击'+'符号并创建一个新的<i id="5d462987">Editor Component</i> 。</p>   <p id="60b580ff">      </p><figure><img alt="Sh97" title="Sh97" src="/help/img/idea/2019.2/Sh97.png" id="5fb22aa1" width="343" height="109"></figure>      <br>       <figure><img alt="Sh98" title="Sh98" src="/help/img/idea/2019.2/Sh98.png" id="050d49fb" width="672" height="214"></figure>      <br>编辑器组件定义了您已经熟悉的一种语言，因此您可以轻松地指定缩进版式，定义一个常量文本单元格，然后再绑定到<i id="b2139984">color</i>属性的单元格。<p></p>   <h2 id="embeddingtheeditorcomponent">嵌入编辑器组件</h2>   <p id="c222945d">现在应将为<i id="aebaf62e">Shape</i>定义的编辑器组件添加到<i id="fd6eef3a">Circle</i>和<i id="b9d1d1b3">Square</i>的编辑器中。</p>   <p id="0b07e796">      </p><figure><img alt="Sh99" title="Sh99" src="/help/img/idea/2019.2/Sh99.png" id="bcd54c88" width="679" height="301"></figure>      <br>       <figure><img alt="Sh100" title="Sh100" src="/help/img/idea/2019.2/Sh100.png" id="7a74eeb7" width="671" height="173"></figure>      <br>       <figure><img alt="Sh101" title="Sh101" src="/help/img/idea/2019.2/Sh101.png" id="e6c310fb" width="671" height="205"></figure>      <br><b id="611d6063">编辑器组件</b>仅成为编辑器布局中的另一个单元格。<p></p>   <h2 id="athirdrun">第三轮</h2>   <p id="bc9e543a">现在是重建语言的最佳时机。在<i id="efa96504">项目视图中的</i> “语言”节点上单击鼠标右键，然后选择“重建语言”。</p>   <aside class="tip sideblock" rel="bc9e543a" id="dc68d779" data-title="">      <p id="a7d5e880">如果您重建整个项目而不是这里的语言，则会遇到一些错误，因为解决方案现在会丢失新定义的颜色属性。我们将立即添加它们。</p>   </aside>   <p id="6efd026f">打开<i id="e1a2c5f7">MyDrawing</i>程序应显示红色的空单元格。尝试在其中使用<i id="ce574861">Control + Space</i> ，您将获得可以选择的颜色列表。</p>   <p id="344c3aa7">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shx13.png"><img alt="shx13" title="shx13" src="/help/img/idea/2019.2/Shx13.png" id="4d375f07" width="900" height="1248"></a></figure>   <p></p>   <p id="283d2023">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shx14.png"><img alt="shx14" title="shx14" src="/help/img/idea/2019.2/Shx14.png" id="33e51dd9" width="500" height="240"></a></figure>      <br>      <br>现在我们的语言已经完全定义。我们可以创建一个<i id="4c55b7da">画布，</i>并在其中添加<i id="260403bc">圆</i>和<i id="36dc470a">正方形</i> ，并指定其位置，大小和颜色。在这么短的时间内，这是一个相当大的成就。<p></p>   <p id="a6961369">我们还缺少的是将这些程序转换为Java，以便我们可以运行它们并在屏幕上看到漂亮的形状。如果您继续，您将很快意识到我们已经快到了。</p>   <h2 id="generator">发电机</h2>   <p id="31adf278">我们的语言现在需要一个生成器，以便我们可以生成可以编译和运行的代码。我们将选择<i id="14ba03da">BaseLanguage</i>作为DSL的目标。 <i id="659bbf99">BaseLanguage</i>是随MPS分发的Java的副本，因此可以轻松地将其转换为文本Java源代码，以供Java编译器编译为二进制文件。我们可以选择任何其他目标平台和语言，只要您将目标语言的定义插入项目中即可。</p>   <p id="7581ae86">生成器将非常简单，只需几个规则和单个映射配置即可。</p>   <p id="7b7487a2">      </p><figure><img alt="Tg1" title="Tg1" src="/help/img/idea/2019.2/Tg1.png" id="f9557a3e" width="986" height="625"></figure>   <p></p>   <p id="79037f23">您的语言已经包含一个空生成器的框架。您可以打开映射配置，该配置将指定何时应用什么规则。我们将在这里逐步添加配置条目。</p>   <p id="d2dde5d4">这是我们将要实现的生成器背后的想法：</p>   <ul class="list _ul"><li class="list__item" id="e5f45e4f"><p><i id="e86d5e8e">Canvas</i>被翻译成Java类，它将扩展Java的<i id="f9b48e32">JFrame</i>类并保留一个将绘制所有形状的<i id="2876dbdb">JPanel</i></p></li><li class="list__item" id="9f5f49b7"><p>每个<i id="b1079fe5">Shape</i>都会转换为<i id="b25a6f30">Graphics</i>对象上的方法调用，以在<i id="c92fe85b">JPanel</i>上绘制形状      </p></li><li class="list__item" id="07f098e4"><p><i id="f06dc251">ColorReference</i>被转换为对<i id="5a69a2d4">java.awt中适当的颜色常量的引用<i id="5a69a2d4">。颜色</i>分类。</i></p></li></ul><i id="5a69a2d4">   <p id="2367172d">让我们从<i id="d6553fea">Canvas</i>的类开始。您需要在<i id="f62dcb3e">根映射角色中</i>添加新条目，因为<i id="502d7dfa">Canvas</i>是根概念。点击<i id="58cc3724">Enter</i>插入一个新的空规则：</p>   <p id="01679aba">      </p><figure><img alt="Tg2" title="Tg2" src="/help/img/idea/2019.2/Tg2.png" id="ff64ae11" width="988" height="623"></figure>   <p></p>   <p id="dd335833">您需要使用一个<b id="b1c10bbb">Intent</b> （ <i id="ee879d6c">Alt + Enter）键</i> ，然后才能从弹出菜单中选择“ New Root Template”。</p>   <p id="e04f280e">该规则定义了<i id="d2cf540f">Canvas</i>节点应替换为Java类。模板定义了什么类：<br>       </p><figure><img alt="Tg3" title="Tg3" src="/help/img/idea/2019.2/Tg3.png" id="be7a3fdb" width="634" height="337"></figure>   <p></p>   <p id="8d6737a8">根模板应该正在生成Java类，因此您需要选择“类”。</p>   <p id="a46484ee">      </p><figure><img alt="Tg4" title="Tg4" src="/help/img/idea/2019.2/Tg4.png" id="760440d2" width="364" height="147"></figure>   <p></p>   <p id="20fd422c">这是完成根映射规则。<i id="dce2efe7">map_Canvas</i>是在生成器中创建的根模板的名称。您应该打开它，以便我们对其进行更改。<br>       </p><figure><img alt="Tg5" title="Tg5" src="/help/img/idea/2019.2/Tg5.png" id="ac2da1a1" width="986" height="625"></figure>   <p></p>   <p id="4ad09146">首先，我们需要将<b id="98937857">生成器模块</b>的依赖项设置为依赖于<b id="51fd3ea0">JDK</b>模块。没有这种依赖性，您将最终无法编译沙箱。</p>   <p id="8631ad99">      <b id="ae690741">注意：</b>请记住， <i id="4fe22929">Alt + Enter</i>将调出在左侧<i id="4cf6e254">项目视图中</i>选择的节点的属性。</p>   <p id="2c14ec7e">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shxx4.png"><img alt="Shxx4" title="Shxx4" src="/help/img/idea/2019.2/Shxx4.png" id="14d3a59c" width="900" height="1406"></a></figure>   <p></p>   <p id="6ac04a4a">其次， <b id="ae461e94">生成器模型</b>必须依赖于<i id="4c8d8552">java.swing</i>和<i id="d05af65d">java.awt</i> ，如下所示。没有这些依赖项，您将无法键入实现生成器模板所需的Java Swing代码：</p>   <p id="46d70e64"> </p>   <p id="09e019a1">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shxx3.png"><img alt="Shxx3" title="Shxx3" src="/help/img/idea/2019.2/Shxx3.png" id="ea6c7fc5" width="900" height="1322"></a></figure>   <p></p>   <p id="31ebbd11">使用依赖项，您可以开始键入将成为生成的Java类的一部分的Java代码。然后，我们将使用<i id="fc8c6284">Canvas中的</i>值对代码进行参数设置，以使其反映用户的意图。</p>   <p id="72f23ec9">该类需要扩展<i id="303a5a35">JFrame</i> 。</p>   <p id="e097a6e4">      </p><figure><img alt="Tg8" title="Tg8" src="/help/img/idea/2019.2/Tg8.png" id="8b1e3370" width="458" height="139"></figure>   <p></p>   <p id="5eed1a26">现在，您将添加<i id="ad81095d">main</i>方法以获得可运行的Java类。您可以使用“ psvm”实时模板快速输入方法。</p>   <p id="69d13dae">      </p><figure><img alt="Tg9" title="Tg9" src="/help/img/idea/2019.2/Tg9.png" id="b64c0394" width="454" height="174"></figure>   <p></p>   <p id="eda48dbf">      </p><figure><img alt="Tg10" title="Tg10" src="/help/img/idea/2019.2/Tg10.png" id="c1afd34f" width="406" height="178"></figure>   <p></p>   <p id="dedbb8ff">在方法内部，我们需要实例化<i id="04aef589">map_Canvas</i> 。</p>   <p id="d8a9f95a">      </p><figure><img alt="Tg11" title="Tg11" src="/help/img/idea/2019.2/Tg11.png" id="f0d9f8dc" width="424" height="215"></figure>   <p></p>   <p id="ea4ce729">我们还需要一种方法来初始化框架。输入“方法”并使用<i id="9951608a">Control + Space</i>来完成方法定义：</p>   <p id="28d421d8">      </p><figure><img alt="Tg12" title="Tg12" src="/help/img/idea/2019.2/Tg12.png" id="b66a118d" width="509" height="251"></figure>   <p></p>   <p id="f8a1e2b0">调用方法<i id="a721194f">Initialize（）</i>并确保从<i id="d8426b8f">main</i> <b id="0100ff1c">调用该方法</b> 。</p>   <p id="d2b9dd35">      </p><figure><img alt="Tg13" title="Tg13" src="/help/img/idea/2019.2/Tg13.png" id="47c103cf" width="423" height="260"></figure>   <p></p>   <aside class="tip sideblock" rel="d2b9dd35" id="06ea4fc7" data-title="">      <p id="922205e1">注意<i id="2ae1d3cb">main（）</i>方法中的<i id="af2e11a9">canvas.initialize（）</i>调用。你加了吗？</p>   </aside>   <p id="abd818cf">所有形状都将绘制在<i id="73353667">JPanel上</i> ，因此我们现在需要添加一个形状作为字段。</p>   <p id="9aa6f0fd">      </p><figure><img alt="Tg14" title="Tg14" src="/help/img/idea/2019.2/Tg14.png" id="d293f12d" width="511" height="258"></figure>   <p></p>   <p id="52ad74d2">      </p><figure><img alt="Tg15" title="Tg15" src="/help/img/idea/2019.2/Tg15.png" id="7c5a4d08" width="410" height="278"></figure>   <p></p>   <p id="3be95d82">注意，我们使用一个<b id="eed8a5a3">匿名内部类</b>来自定义<i id="5989605a">JPanel</i> 。</p>   <p id="b4411cd4">      <b id="a1261e89">重要：</b>要在BaseLanguage中创建一个匿名内部类，请将光标定位在<i id="972bd3fe">新JPanel（）之后</i>和结束分号之前。然后按“ {”（左花括号）键，MPS将添加结尾的“}”符号。现在，将光标置于这些“ {”和“}”符号之间，以向面板的匿名内部类添加方法。</p>   <p id="6a797720">我们将重写<i id="50b7728a">JPanel</i>的<i id="1947059b">paintComponent</i>方法，因为这是Java允许我们轻松地在<i id="d389cc75">JPanel</i>上绘制形状的方法。当光标位于<i id="7301bf40">JPanel</i>的匿名类主体中的“ {”和“}”符号之间时，单击<i id="d2c3b32c">Control / Cmd + O</i> ，以调用<i id="ae1406a7">JPanel</i>的<b id="0ab9f3a7">Override方法对话框</b>并选择<b id="0c640560">paintComponent</b>方法。</p>   <p id="128bbf0e">      </p><figure><img alt="Tg16" title="Tg16" src="/help/img/idea/2019.2/Tg16.png" id="d2856fb9" width="502" height="471"></figure>   <p></p>   <p id="64fef9bf">确保您的<i id="74e30ae7">paintComponent（）</i>方法正确嵌套在<i id="404f53a5">JPanel</i>的匿名内部类中，如屏幕截图所示。还要确保它被称为<b id="02336d85">paintComponent</b> ，而不是<b id="fda2b761">paintComponents</b> 。</p>   <p id="b62e124d">在方法中输入以下代码：<br>       </p><figure><img alt="Tg17" title="Tg17" src="/help/img/idea/2019.2/Tg17.png" id="eb82ed06" width="505" height="337"></figure>   <p></p>   <p id="2a314c8a">现在，请填写<i id="719e2340">initialize</i>方法，我们已经准备好模板：</p>   <p id="1ad8d838">      </p><figure><img alt="Tg18" title="Tg18" src="/help/img/idea/2019.2/Tg18.png" id="d54c6079" width="547" height="422"></figure>   <p></p>   <h3 id="parametrizingthetemplate">参数化模板</h3>   <p id="9edaf920">模板中的代码当前不使用输入模型中的任何值。它只是对代码进行硬编码，因此无论用户模型中创建了什么形状，模板生成的代码将始终相同。这必须改变。模板必须对输入模型做出反应，并且生成的代码必须反映形状，大小和颜色。<i id="54883f90">Canvas</i>的属性和子级应该通过<b id="38fb554d">宏</b>插入到模板中。MPS为您提供了三种类型的宏：</p>   <ul class="list _ul"><li class="list__item" id="2f8933b1"><p>         <b id="35951516">属性宏</b> -从输入模型插入属性</p></li><li class="list__item" id="5502d438"><p>         <b id="0123aa48">节点宏</b> -用输入模型中的节点替换模板中的节点</p></li><li class="list__item" id="6b455762"><p>         <b id="aaddebeb">引用宏</b> -调整模板中的引用以指向输入模型中的节点</p></li></ul>   <p id="2861f1f0">我们将逐步使用所有这些。</p>   <p id="fc6572fe">首先，我们将使用<i id="eb825795">Canvas</i>的<b id="e4f9f535">名称</b>自定义生成的类的<b id="4885f83a">名称</b>和框架的<b id="4885f83a">Title</b> 。将光标放在类名<i id="be2847f8">map_Canvas上，</i>然后<i id="05969c7d">按Alt + Enter</i> 。</p>   <p id="ba1e1c95">      </p><figure><img alt="Tg19" title="Tg19" src="/help/img/idea/2019.2/Tg19.png" id="ad63679b" width="490" height="194"></figure>      <br>       <figure><img alt="Tg20" title="Tg20" src="/help/img/idea/2019.2/Tg20.png" id="b0522ab8" width="605" height="277"></figure>      <br>现在，从弹出菜单中选择<b id="13c63b56">node.name</b>属性宏。<p></p>   <p id="f48a570e">      </p><figure><img alt="Tg21" title="Tg21" src="/help/img/idea/2019.2/Tg21.png" id="8d901a30" width="987" height="628"></figure>   <p></p>   <p id="2a11e1bd">现在，使用<b id="57b0fb09">属性宏</b>将“ map_Canvas”文本包装（注释），该<b id="57b0fb09">宏</b>将<b id="a14bf92d">name</b>属性更改为<i id="9a1c44f1">Canvas</i>的<b id="8ff667d0">名称</b> 。<b id="83f72fb3">检查器</b>面板（ <i id="c1cc68ad">Alt + 2</i> ）也可以用于输入或修改属性宏。当前，它返回<i id="d479139f">node.name</i>的值，即当前<i id="ed484ff7">Canvas</i>的名称。</p>   <p id="8b293e3f">现在，您可以包装“标题”文本以自定义框架的标题。使用<i id="7fb801e8">Control / Cmd +向上箭头</i>键快捷方式，选择文本“ Title”， <b id="691bbc5a">不</b>包含周围的“”字符，并使用<i id="2ecf9c4c">Alt + Enter</i>插入正确的属性宏：</p>   <p id="1f5fad31">      </p><figure><img alt="Tg22" title="Tg22" src="/help/img/idea/2019.2/Tg22.png" id="d136b31b" width="603" height="368"></figure>   <p></p>   <p id="bc076011">现在，代码应如下所示：</p>   <p id="f9085e1b">      </p><figure><img alt="Tg23" title="Tg23" src="/help/img/idea/2019.2/Tg23.png" id="ceffb479" width="987" height="626"></figure>   <p></p>   <h3 id="drawingshapes">绘图形状</h3>   <p id="8e197dc4">我们的模板假定绘制形状的代码应放置在<i id="ae15aaf4">JPanel</i>字段的<i id="0556b41c">paintComponent</i>方法内。语句“ System.out.println（“在此处绘制”）;“充当将绘制所有形状的真实代码的占位符。我们将使用<b id="92194365">COPY_SRC</b>宏将占位符语句替换为绘制单个形状的语句，并将利用<b id="7e49498b">LOOP</b>宏对当前<i id="fa3fd70b">Canvas中</i>定义的所有形状重复该操作。</p>   <p id="6ad9a9cc">现在，请使用<i id="7a99d6c2">Control / Cmd +向上箭头</i>键快捷方式选择占位符语句， <b id="7e195825">包括其结束分号</b> ，然后<i id="b884029e">按Alt + Enter，</i>然后选择适当的<b id="2932ad11">Node宏</b>选项以插入<b id="828cfcdb">LOOP宏，</b>以循环浏览当前<i id="302e67f2">Canvas的</i>所有子<i id="1ab3bfb9">Shapes</i> 。</p>   <p id="5d7b4a66">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shxx1.png"><img alt="Shxx1" title="Shxx1" src="/help/img/idea/2019.2/Shxx1.png" id="a2385baa" width="500" height="878"></a></figure>   <p></p>   <p id="386d0911">同样， <b id="450a0bd2">检查器</b> （ <i id="497160c1">Alt + 2</i> ）显示绑定代码。</p>   <p id="31f13c11">      </p><figure><img alt="Tg25" title="Tg25" src="/help/img/idea/2019.2/Tg25.png" id="999146fe" width="987" height="625"></figure>   <p></p>   <p id="79d640df">如果<b id="e60a584b">LOOP宏</b>用红色下划线，则很可能是您在应用此意图之前未选择整行。撤消，选择包括分号在内的整行，然后再次应用“ <b id="e0cd13e3">添加循环”宏</b>意图。<br><b id="9bb22ad0">LOOP宏</b>将重复“ System.out.println（“在此处绘制”）;“对<i id="4ca4ab39">node.shapes中</i>列出的每个形状的<i id="4ca4ab39">声明</i> 。</p>   <p id="a73c6c56">但是，我们需要具有“ System.out.println（“在此处绘制”）;“语句替换为绘制每种形状的代码。<b id="747049b8">COPY_SRC宏</b>将执行此操作。请再次在<b id="bb3fa2a2">LOOP宏中</b>选择整个语句， <b id="55daade9">包括分号</b> ，然后<i id="325d33aa">按Alt + Enter</i>并选择<b id="1819a389">Node宏</b> 。</p>   <p id="6e027a83">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shxx2.png"><img alt="Shxx2" title="Shxx2" src="/help/img/idea/2019.2/Shxx2.png" id="c0cf2cac" width="500" height="642"></a></figure>   <p></p>   <p id="8e67f4b6">输入<b id="301cb0cf">COPY_SRC</b> （ <i id="785b2e5f">Control + Space</i> ），您将获得一个宏，它将替换“ System.out.println（“ Draw here”）;“ <b id="6088440d">LOOP宏</b>提供的所有形状的当前形状。</p>   <p id="00640bee">      </p><figure><img alt="Tg27" title="Tg27" src="/help/img/idea/2019.2/Tg27.png" id="39229a21" width="478" height="231"></figure>      <br>       <figure><img alt="Tg28" title="Tg28" src="/help/img/idea/2019.2/Tg28.png" id="17d7430b" width="498" height="343"></figure>   <p></p>   <p id="0b004f62">确保您的<i id="2c481f62">COPY_SRC</i>宏包装了整个语句，包括分号，就像它在图片中显示的一样。如果不是，请撤消，选择整个语句，然后再次插入<i id="b2f6f0f2">COPY_SRC</i>宏。</p>   <h3 id="generatingcircles">产生圈子</h3>   <p id="c5702c8b">现在，我们将<i id="f11dbd87">Canvas</i>转换为Java类，并且还为<i id="0d0bab6f">Shapes</i>添加了绘制它们的代码。现在是时候为<i id="66b4b59a">Shapes</i>定义实际的转换规则了，这样我们就可以在生成的代码中插入一个“ graphics.drawCircle（）”方法，以替换<i id="72dc6f2f">Circle</i>形状。您需要打开<i id="8b523744">主</i>映射配置，并将新条目添加到“归约规则”部分：</p>   <p id="f3353326">      </p><figure><img alt="Tg29" title="Tg29" src="/help/img/idea/2019.2/Tg29.png" id="cd8a8b4b" width="986" height="625"></figure>      <br>       <i id="adf1fab5">Alt + Enter</i>创建一个新模板：<p></p>   <p id="29749c55">      </p><figure><img alt="Tg30" title="Tg30" src="/help/img/idea/2019.2/Tg30.png" id="a2581c9d" width="581" height="191"></figure>   <p></p>   <p id="bd428011">新的<i id="30c58ab9">reduct_Circle</i>模板将显示在左侧的<b id="9fab1a9c">Project View中</b> 。</p>   <p id="198d3212">      </p><figure><img alt="Tg31" title="Tg31" src="/help/img/idea/2019.2/Tg31.png" id="b906906a" width="985" height="623"></figure>      <br>您也可以为<i id="367aad3b">Square</i>创建一个简化规则：<p></p>   <p id="a3ccd003">      </p><figure><img alt="Tg32" title="Tg32" src="/help/img/idea/2019.2/Tg32.png" id="d20ba33d" width="986" height="627"></figure>      <br>打开<i id="8acc4fc4">reduce_Circle</i>模板。现在，我们需要指定将替换<i id="d2fdfbfb">Circles</i>的Java代码。请记住，Java代码将放置在<i id="d1638008">paintComponent</i>方法内的<i id="9cf90022">map_Canvas中</i> 。<p></p>   <p id="93ca45be">      </p><figure><img alt="Tg33" title="Tg33" src="/help/img/idea/2019.2/Tg33.png" id="7a50d919" width="987" height="624"></figure>   <p></p>   <p id="6ca3e7a5">首先，我们将输入一个<i id="404384b1">BlockStatement</i> ，它将包装我们的模板：<br>       </p><figure><img alt="Tg34" title="Tg34" src="/help/img/idea/2019.2/Tg34.png" id="3ef3d081" width="449" height="212"></figure>   <p></p>   <p id="ea2f5853">我们将需要<i id="a930c517">Graphics</i>类型的局部变量作为同名的<i id="ed296cff">paintComponent</i>参数的占位符。再一次是<i id="e98e2ae3">BlockStatement</i> 。</p>   <p id="619e459f">      </p><figure><img alt="Tg35" title="Tg35" src="/help/img/idea/2019.2/Tg35.png" id="98c7c77f" width="240" height="186"></figure>      <br>       <figure><img alt="Tg36" title="Tg36" src="/help/img/idea/2019.2/Tg36.png" id="42750165" width="488" height="286"></figure>   <p></p>   <p id="4791c96c">      </p><figure><img alt="Tg37" title="Tg37" src="/help/img/idea/2019.2/Tg37.png" id="4576c951" width="312" height="220"></figure>   <p></p>   <p id="37ae2ef7">要在Java中绘制圆，我们将使用<i id="f1b4a9b7">Graphics</i>对象先设置颜色，然后调用其<i id="06e62aa2">drawOval</i>方法。请输入以下代码：</p>   <p id="369daca8">      </p><figure><img alt="Tg41" title="Tg41" src="/help/img/idea/2019.2/Tg41.png" id="24d056ef" width="327" height="125"></figure>      <br>       <figure><img alt="Tg38" title="Tg38" src="/help/img/idea/2019.2/Tg38.png" id="623076c5" width="495" height="379"></figure>      <br>然后使用<i id="7688deaa">Control / Cmd / Up Arraw</i>选择内部的<i id="0fdf548e">BlockStatement</i> ， <i id="aafcf8eb">按Alt + Enter</i> （ <b id="bdf182be">灯泡</b> ），然后从意图菜单中选择“创建模板片段”。这会将选定的代码片段标记为实际模板，最终将其放置到<i id="6e6f5106">map_Canvas中</i>   <p></p>   <p id="9e267118">      </p><figure><img alt="Tg39" title="Tg39" src="/help/img/idea/2019.2/Tg39.png" id="24da9488" width="441" height="230"></figure>   <p></p>   <p id="0983e8ff"> </p>   <aside class="tip sideblock" rel="0983e8ff" id="21425f9e" data-title="">      <p id="26cc73df"><i id="6afd1438">图形</i>局部变量需要我们特别注意。到目前为止，我们构建的当前模板依赖于<i id="10f57bcb">reduce_Circle</i>模板（该模板引用<i id="f4a96786">图形</i>局部变量）与<i id="c2772c84">map_Canvas</i>模板（该模板在<i id="3b1b9c8d">paintComponent</i>方法中定义了<i id="484a59f4">图形</i>方法参数）之间的<b id="30684173">命名匹配</b> 。这是一个可行的解决方案，但是非常脆弱。重命名两个<i id="7c294e0a">图形</i>变量之一将导致生成的代码损坏。将在<b id="f4469ddc">Circle</b>的解决方案下面实施一个更强大的<b id="0f071c65">Squares</b>解决方案。</p>   </aside>   <h3 id="parametrization">参数化</h3>   <p id="e83a1dca">现在，需要使用“ <i id="0a197077">圆形”</i>节点中的实际值对代码进行参数化。<br>       </p><figure><img alt="Tg42" title="Tg42" src="/help/img/idea/2019.2/Tg42.png" id="b5d05a1c" width="597" height="319"></figure>      <br>第一个值“ 10”应替换为“ <i id="357e9944">圆”</i>节点的<i id="15744959">x</i>坐标。<b id="fe04af3f">属性宏</b>将执行此操作。同样，第二个值“ 10”应替换为<i id="8e9e98b7">y</i>坐标。<p></p>   <p id="ecd63981">      </p><figure><img alt="Tg43" title="Tg43" src="/help/img/idea/2019.2/Tg43.png" id="1d8a89e0" width="637" height="310"></figure>   <p></p>   <p id="25a6c63a"><b id="f164ffe9">第三</b>和<b id="647fc210">第四</b>值“ 10”都应替换为<i id="db359c35">圆形</i>节点的<i id="661165c7">半径</i>值。</p>   <p id="9659ae70">      </p><figure><img alt="Tg44" title="Tg44" src="/help/img/idea/2019.2/Tg44.png" id="c5c34e87" width="669" height="402"></figure>   <p></p>   <aside class="tip sideblock" rel="9659ae70" id="a6405cf7" data-title="">      <p id="3fae491f"><i id="24c9d493">drawOval（）</i>方法的第三个和第四个参数分别指定椭圆的<b id="1422a17d">宽度</b>和<b id="c23346d5">高度</b> 。由于我们想画一个<b id="47e6ec1d">圆</b> ，我们需要为两个参数提供相同的值。这就是为什么<b id="15d26e64">第三个</b>和<b id="70e110f4">第四个</b>参数的属性宏都指定<i id="fcc0ebe8">node.radius的原因</i> 。</p>   </aside>   <p id="746d646e">最后，应将“ Color.red”颜色占位符引用替换为<i id="62dcce6b">Circle</i>节点的<i id="2d52ec8a">颜色</i>引用的实际目标。我们将使用<b id="d3c14de3">引用宏</b>替换引用。请将光标放在“红色”字词上，然后<i id="59663a47">按Alt + Enter</i> 。<br>       </p><figure><img alt="Tg45" title="Tg45" src="/help/img/idea/2019.2/Tg45.png" id="a9c5675c" width="604" height="349"></figure>   <p></p>   <p id="3a4b8388">引用宏会将对<b id="6caa2e34">红色</b>的引用替换为对我们在“ <b id="87dda0ab">检查器”</b>窗口中指定的节点的引用：</p>   <p id="86a2c96f">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shx102.png"><img alt="Shx102" title="Shx102" src="/help/img/idea/2019.2/Shx102.png" id="3a3e8c38" width="900" height="1242"></a></figure>   <p></p>   <p id="6a618465"><b id="44c794a8">Referent</b>函数返回一个<i id="cff394ac">字符串</i>值（要引用的所需声明的名称）或<i id="5f884b34">node <staticfielddeclaration></staticfielddeclaration></i> （表示<i id="541e9d38">StaticFieldDeclaration</i>的节点），因为<b id="068fbf32">红色</b>本身是对<i id="15e52846">节点</i>的引用<i id="15e52846"><staticfielddeclaration></staticfielddeclaration></i> 。实际上，所有颜色常量都在<i id="bc590aaf">java.awt中。颜色</i>类被声明为StaticFieldDeclarations。</p>   <aside class="tip sideblock" rel="6a618465" id="4a1ab0f3" data-title="">      <p id="a268fab2">您可以尝试打开<i id="17baa4f9">java.awt。颜色</i> （Control / Cmd + N，输入“ Color”，也可以选中“包括存根和非项目模型”复选框）类，并检查例如“ white”常量是否为<i id="eb6030c5">StaticFieldDeclaration</i> 。</p><figure><img alt="附加1" title="附加1" src="/help/img/idea/2019.2/additional1.png" id="f4e6c65a" width="598" height="373"></figure>      <p></p>   </aside>   <p id="9d7108ca">因此，我们在参考宏中的任务是从<i id="b328035e">Color</i>类中检索<i id="ab5f6fec">StaticFieldDeclaration</i> ，该类与<i id="dff9969e">Circle</i>设置为其<i id="c7b1cb9a">颜色</i>子级的<i id="b328035e">颜色</i>相对应。我们将以编程方式进行此操作，因此我们需要在正确的模块和模型上设置依赖项，这将使我们能够编写所需的代码。</p>   <p id="52ec743f">首先，生成器模块必须依赖<i id="fd8211b5">BaseLanguage</i>才能引用以该语言声明的<i id="edbdd684">StaticFieldDeclaration</i>概念：</p>   <p id="b91d77e0">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shx104.png"><img alt="shx104" title="shx104" src="/help/img/idea/2019.2/Shx104.png" id="9a3c39fd" width="900" height="1250"></a></figure>   <p></p>   <p id="9382893b">其次，生成器模型需要能够引用在<i id="d3fd8c73">Shapes</i>语言的结构中定义的概念：</p>   <p id="a9cebbfb">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Shx105.png"><img alt="shx105" title="shx105" src="/help/img/idea/2019.2/Shx105.png" id="e58bf3be" width="900" height="1248"></a></figure>   <p></p>   <p id="1333cd26">导入这些语言后，我们应该能够输入在<i id="1619239b">Color</i>类中发现正确的静态字段声明的代码：</p>   <p id="361c1de6">      </p><figure><img alt="Sni meb obrazovky 2018 12 07 v 20 29 44" title="Sni meb obrazovky 2018 12 07 v 20 29 44" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-07-v-20-29-44.png" id="60726858" width="500" height="388"></figure>   <p></p>   <p id="fd48695e">使用<i id="b095f414">node-ptr /.../</i>构造，可以在导入的指定概念模型中以给定名称表示的节点。由于JDK中仅存在一个<i id="c80bbfef">Color</i>类，因此标识为<i id="a62fd130">node-ptr / Color /</i>的引用将是唯一的，并将指向模型中的<i id="acc4bb3c">Color</i>类。</p>   <p id="bf80d921">      <b id="cc7b594f">注意：</b>确保从完成菜单中选择正确的<i id="883dfa30">颜色</i>元素。它必须是<i id="5de2631c">java.awt。Color</i> ，而不是<i id="2c7bc533">Shapes</i>语言中的<i id="0c9c4200">Color</i>概念。</p>   <p id="836964da">      </p><figure><img alt="Sni mek obrazovky 2018 12 07 v 20 30 23" title="Sni mek obrazovky 2018 12 07 v 20 30 23" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-07-v-20-30-23.png" id="fac10c0f" width="500" height="678"></figure>   <p></p>   <p id="b86e7c41">节点指针表示对节点的持久引用。要获得对内存中真实节点的引用，必须在模型存储库中解析节点指针。使用以下代码获取存储库并从中解析“ <i id="e368ff20">颜色”</i>节点：</p>   <p id="f474245c">      </p><figure><img alt="尼克·奥布拉佐夫斯基（Sni mek obrazovky）2018 12 07 v 20 31 33" title="尼克·奥布拉佐夫斯基（Sni mek obrazovky）2018 12 07 v 20 31 33" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-07-v-20-31-33.png" id="e9a57a62" width="900" height="370"></figure>   <p></p>   <p id="083b9f71"><b id="027bd4ea">向下</b>运算符使您可以访问基础Java API，这是当前在此位置获取存储库的唯一方法。</p>   <p id="54f92634">      </p><figure><img alt="Sni mek obrazovky 2018 12 07 v 20 44 23" title="Sni mek obrazovky 2018 12 07 v 20 44 23" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-07-v-20-44-23.png" id="e8a7de43" width="900" height="368"></figure>   <p></p>   <p id="19631df8">使用<i id="f8975b34">集合</i>语言，您可以完成一个简洁的查询：</p>   <p id="306eb154">      </p><figure><img alt="尼克·奥布拉佐夫斯基（Sni mek obrazovky）2018 12 07 v 20 33 23" title="尼克·奥布拉佐夫斯基（Sni mek obrazovky）2018 12 07 v 20 33 23" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-07-v-20-33-23.png" id="77a40acf" width="900" height="396"></figure>   <p></p>   <p id="2d9fdef3">由于<i id="e3edf24e">node</i>是<i id="c73318bd">Circle</i>概念的实例，因此<i id="895e55d1">node.color</i>是圆圈对颜色的引用（ <i id="c451290e">ColorReference</i>的实例），而<i id="df7b7fc7">node.color.target</i>是<i id="70cc3da5">Color</i> （Shapes的实例）。颜色概念）从<b id="6149f600">附件模型</b> 。</p>   <p id="6dce8a71">简而言之，该查询在<i id="83551e55">java.awt的静态字段声明中搜索第一个静态字段声明<i id="83551e55">。与为<i id="1cd5c27a">Circle</i>指定的颜色名称相同的颜色</i>类。</i></p><i id="83551e55">   <aside class="tip sideblock" rel="6dce8a71" id="06b65cd6" data-title="">      <p id="ea2d7699"><i id="ac05d671">：eq：</i>运算符是一个空安全的相等比较，等效于（ <a href="http://it.name" rel="noopener noreferrer" data-external="true" target="_blank">it.name</a> ！= null && <a href="http://it.name" rel="noopener noreferrer" data-external="true" target="_blank">it.name</a> .equals（ <a href="http://node.color.target.name" rel="noopener noreferrer" data-external="true" target="_blank">node.color.target.name</a> ））。MPS还提供了<i id="e6365b9d">：ne：</i>运算符，它是对<i id="ab53ff3e">：eq：</i>的否定。</p>   </aside>   <h3 id="reducingsquares">减少正方形</h3>   <p id="ea391dd1">我们将开始模仿<i id="034d70b9">Circles的</i>生成器。相同地为<i id="04f4c9aa">reduce_Square</i>模板提供以下代码。</p>   <p id="e6107507">      <b id="fe12a451">提示：</b>首先插入一个<i id="2e206630">BlockStatement</i>   </p>   <p id="3280f8fd">      <br>       </p><figure><img alt="Tg47" title="Tg47" src="/help/img/idea/2019.2/Tg47.png" id="be7b3507" width="985" height="625"></figure>   <p></p>   <p id="da146a83">传递给“ drawRect”的值应替换为具有<i id="b7aa6494">Square</i>的<i id="c15af9d4">upperLeftX</i> ， <i id="e2e67963">upperLeftY</i>和<i id="7db33c31">size</i>属性的<b id="b6249c1f">属性宏</b> 。</p>   <p id="756006af">      </p><figure><img alt="Tg40" title="Tg40" src="/help/img/idea/2019.2/Tg40.png" id="fe1b5147" width="986" height="625"></figure>   <p></p>   <aside class="tip sideblock" rel="756006af" id="83d35809" data-title="">      <p id="11428677"><i id="ae786c2a">drawRect（）</i>方法的第三个和第四个参数分别指定矩形的<b id="f3d5f2be">width</b>和<b id="adcd0a64">height</b> 。由于我们要绘制一个<b id="e75188be">正方形</b> ，因此我们需要为两个参数提供相同的值。这就是为什么<b id="acdcc68a">第三个</b>和<b id="3670837f">第四个</b>参数的属性宏都指定<i id="37200723">size的原因</i> 。</p>   </aside>   <h2 id="generatingcode">产生程式码</h2>   <p id="7f2abf1b">现在我们完成了定义生成器。如果您要重建语言，请打开<i id="0e1508f8">MyDrawing</i> ，右键单击它，然后选择“预览生成的文本”，</p>   <p id="20df05a5">  </p><figure><img alt="Tg48" title="Tg48" src="/help/img/idea/2019.2/Tg48.png" id="54aba18d" width="537" height="491"></figure>      <br>您将获得一个结构良好的Java代码，该代码正确初始化了<i id="ecadc3bf">JFrame</i>并绘制了所有形状：<p></p>   <p id="3e12b2a4">      </p><figure><img alt="ppview2" title="ppview2" src="/help/img/idea/2019.2/ppview2.png" id="d0bff79d" width="500" height="1478"></figure>   <p></p>   <p id="f2d41792">如果您的代码不同，请查看您的一个生成器模板，它们可能与本教程中介绍的模板不同。也许您的宏未附加到正确的代码段上，或者在“ <b id="552fca9c">检查器”</b>窗口中为宏指定的值与屏幕快照中的值不同。</p>   <p id="f674b8b7">如果代码无法编译，请确保生成器模块依赖于我们先前定义的JDK模块。</p>   <h2 id="amorerobustgenerationforsquares">Squares更强大的一代</h2>   <p id="77d6612e">我们在模板中处理<i id="5cdd7228">图形</i>局部变量的方式不太正确。我们可能过于乐观地依赖于变量名，以使<i id="855d41c8">map_Canvas</i> ， <i id="e98ce197">reduce_Circle</i>和<i id="392e1f65">reduce_Square</i>中的变量名相同。如果这三个模板中的变量名称不相同怎么办？需要一个更强大的解决方案</p>   <p id="5f0c2bf9">如本节前面的“ <i id="c427288f">圆”</i>生成器部分所述，我们将使用<i id="11a7bc6e">reduce_Square</i>模板将<i id="0550e7c3">图形</i>局部变量与<i id="aba2227b">map_Canvas</i>模板生成的<i id="6b806bfe">graphics</i>参数正确关联。依靠名称匹配不是很可靠。</p>   <p id="24669f93">我们基本上需要经历三个步骤：</p>   <ol class="list _decimal"><li class="list__item" id="431ccfb1"><p>为创建的<i id="908c9ff6">图形</i>参数定义存储</p></li><li class="list__item" id="797c2d2f"><p>将<i id="9b1422ee">图形</i>参数存储在<i id="81d4d29a">map_Canvas</i>模板中</p></li><li class="list__item" id="c20dc145"><p>在<i id="6d0205d9">reduce_Square</i>模板中检索适当的<i id="427ef409">图形</i>参数</p></li></ol>   <p id="d9765b39">我们将从在映射配置中创建映射标签开始。这将存储<i id="65da8063">ParameterDeclarations</i> ，每个<i id="65da8063">参数</i>都由生成它的<i id="116c1ed2">Canvas</i>标识。您可能还会将此映射标签视为将<i id="23ec6411">Canvas</i>映射到<i id="daa23450">ParameterDeclarations</i>的字典。</p>   <p id="9a727cf0">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/shapes3001.png"><img alt="形状3001" title="形状3001" src="/help/img/idea/2019.2/shapes3001.png" id="0b31c0a3" width="900" height="632"></a></figure>   <p></p>   <p id="d0e8936d"><i id="44634828">graphicsParam</i>映射标签存储由它们所属的<i id="7090039d">Canvas</i>映射的<i id="4466bf42">ParameterDeclaration</i> 。</p>   <p id="3e12485d">现在， <i id="042e067c">map_Canvas</i>模板需要将<i id="b4cc58d6">图形</i>参数存储在映射标签中。可以成功使用<i id="9fa1f851">MAP_SRC</i>宏：</p>   <p id="edd09a5e">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/shapes3002.png"><img alt="形状3002" title="形状3002" src="/help/img/idea/2019.2/shapes3002.png" id="412042cf" width="900" height="998"></a></figure>   <p></p>   <p id="d0bc9a4e">用<i id="819f459d">MAP_SRC</i>宏（ <i id="717f3349">Alt + Enter</i> ，选择<i id="14489a5c">节点宏</i> ，键入MAP_SRC_）包装参数声明（包括类型） <i id="a3609324">。在_Inspector</i>窗口中，然后选择用于存储生成的参数声明的<b id="9a77aac5">映射标签</b> 。<b id="dff3ae60">当前源节点</b>是<i id="5e881b39">Canvas</i>概念的一个实例，将用作在映射标签中标识生成的<i id="b6024aae">图形</i>参数声明的键。</p>   <p id="2ac8fae9">最后，我们需要从<i id="d44b0737">reduce_Square</i>模板中的映射标签中检索参数声明。为了清楚地表明我们不再依赖命名匹配，我们可以为变量使用与<i id="439093ef">graphics</i>不同的名称。我们将在示例中使用<i id="bbabbb5c">g</i> ：</p>   <p id="69a426ff">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/shapes3003.png"><img alt="形状3003" title="形状3003" src="/help/img/idea/2019.2/shapes3003.png" id="2f63d962" width="900" height="620"></a></figure>   <p></p>   <p id="f0c2f189">如果在<i id="8c321822">g</i>参考并选择<i id="c457e069">参考宏</i>上<i id="c5a5a4c3">按Alt + Enter</i> ，则可以从<b id="95a8fdba">映射标签中</b>检索适当的<i id="ea18645b">图形</i>参数：</p>   <p id="45af1af2">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/shapes3004.png"><img alt="形状3004" title="形状3004" src="/help/img/idea/2019.2/shapes3004.png" id="e9df0cec" width="900" height="614"></a></figure>   <p></p>   <p id="f3bc0c43">然后为第二个<i id="9048a538">g</i>引用重复引用宏的创建。您刚刚创建的<i id="09e4493c">g</i>变量引用附带的<b id="1347b88b">两个</b>引用宏都必须在<b id="c0b8e24f">Inspector中</b>指定有关如何获取所需引用目标的详细信息。<i id="a095e55b">genContext</i>对象可以访问当前会话的有用方法和属性。在<i id="11b72914">genContext</i>上使用“ <b id="64844df5">获取标签和输入的输出</b> ”操作，并提供<i id="7ed0fd9e">graphicsParam</i>映射标签以及保存当前生成的<i id="3dce26b7">Square</i>的<i id="7f0d59a4">Canvas</i> 。</p>   <p id="b4d41c45">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/shapes3005.png"><img alt="形状3005" title="形状3005" src="/help/img/idea/2019.2/shapes3005.png" id="3c0c97b8" width="900" height="984"></a></figure>   <p></p>   <p id="bdb1eacd">现在，我们也可以复制<i id="8b84ae29">reduce_Circle</i>模板的<i id="af334a19">图形</i>参数的检索。</p>   <h2 id="runningthecode">运行代码</h2>   <p id="eef81653">很高兴看到生成的代码，但是您实际上可能更喜欢看到它正在运行。MPS可以轻松地编译和运行生成的Java代码。我们只需要指出<i id="089935aa">Canvas</i>会生成为可运行的Java类，因此<i id="5f5accb2">Canvas</i>本身应被视为可运行的或“主”类。我们只需要使<i id="e6cd3618">Canvas</i>实现<i id="1be55578">IMainClass</i>接口，MPS就会处理其余的工作。 <i id="e29c6337">IMainClass</i>接口来自<i id="4bf3b9ac">jet brains.mps.execution.util</i>语言，因此我们需要将其添加到语言依赖列表中，并将范围设置为<b id="fa3a7535">Extends</b> ：</p>   <p id="1cdd7a16">      </p><figure><img alt="Tg50" title="Tg50" src="/help/img/idea/2019.2/Tg50.png" id="e632f288" width="792" height="539"></figure>   <p></p>   <p id="4bbda858">使用<i id="b961f23f">Alt + Enter</i>获取属性对话框。注意，该语言需要标记为<b id="984a02d6">Extends</b> 。</p>   <p id="969a5a82"><i id="2f200862">Convas</i>概念现在可以将<i id="d62a3dd8">IMainClass</i>接口添加到<i id="d858f66d">工具</i>部分。</p>   <p id="44237768">      </p><figure><img alt="Tg52" title="Tg52" src="/help/img/idea/2019.2/Tg52.png" id="871be02a" width="435" height="287"></figure>      <br>重建语言，然后在<b id="5948dfe4">项目视图中的</b> <i id="f7f87c62">MyDrawing</i>上单击鼠标右键，然后单击“运行”。<p></p>   <aside class="tip sideblock" rel="44237768" id="5088d399" data-title="">      <p id="fef1310e">创建新图形后，您实际上可能首先需要对其进行编译。如果上下文菜单中未显示<i id="00b6b55a">“运行'节点MyDrawing'”</i> ，则表明<i id="79590bf4">MyDrawing</i>尚未编译。请在沙盒解决方案或持有<i id="4d73e255">MyDrawing</i>的模型上单击鼠标右键，然后选择<i id="face1362">Make</i> 。完成后，您应该就可以运行图形了。</p>   </aside>   <p id="59446fb8">      </p><figure><img alt="Tg53" title="Tg53" src="/help/img/idea/2019.2/Tg53.png" id="6ec45bbc" width="446" height="574"></figure>      <br>您将获得一个运行中的Java应用程序，上面带有您的图纸，以此作为您所做工作的回报。<p></p>   <p id="dde42eae">      </p><figure><img alt="Tg54" title="Tg54" src="/help/img/idea/2019.2/Tg54.png" id="ab7c13b4" width="500" height="522"></figure>   <p></p>   <h2 id="analternativegenerator-generatingxml">备用生成器-生成XML</h2>   <p id="de22014c">只是为了给您一个想法，如何使用生成器以声明性语言（例如xml）生成代码，这是一个用于Shapes语言生成xml的简单生成器。我们从一个空的生成器开始。Java模板和规则已全部删除：</p>   <p id="4f7deb7c">      </p><figure><img alt="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 18 v 12 55 47" title="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 18 v 12 55 47" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-12-55-47.png" id="31553cc0" width="500" height="1116"></figure>   <p></p>   <p id="46519cc4">首先，必须导入<i id="d04635aa">jetbrains.mps.core.xml</i>语言（ <i id="ccfb3b6a">Control + L</i> ）。正如我们所知，它与xml等效，就像<i id="2d27cb36">BaseLanguage</i>与Java等效。</p>   <p id="b88dd1c4">根映射规则必须创建<i id="c2e7c7e2">画布</i> <i id="531fc30b">ES</i>转换成<i id="cdfcf4fb">XML文件</i> 。</p>   <p id="6290ac92">      </p><figure><img alt="尼克·奥布拉佐夫斯基2018 12 18 v 12 56 04" title="尼克·奥布拉佐夫斯基2018 12 18 v 12 56 04" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-12-56-04.png" id="51f6ca50" width="500" height="366"></figure>   <p></p>   <p id="f26eccd7">      </p><figure><img alt="尼克·奥布拉佐夫斯基2018 12 18 v 12 56 16" title="尼克·奥布拉佐夫斯基2018 12 18 v 12 56 16" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-12-56-16.png" id="4f2b3cc4" width="500" height="736"></figure>   <p></p>   <p id="d7151043">创建名为<i id="1a33bef0">map_Canvas</i>的模板。</p>   <p id="3e8e2a3e">      </p><figure><img alt="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 18 v 12 56 34" title="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 18 v 12 56 34" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-12-56-34.png" id="8c3f8801" width="500" height="668"></figure>   <p></p>   <p id="43b3af83">Xml代码必须输入到模板中才能创建所需的代码：</p>   <p id="f0b2ddb7">      </p><figure><img alt="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 18 v 12 56 44" title="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 18 v 12 56 44" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-12-56-44.png" id="311605b6" width="500" height="468"></figure>   <p></p>   <p id="8e9dd71a">      </p><figure><img alt="Sni Mek Obrazovky 2018年12月18日v 12 57 01" title="Sni Mek Obrazovky 2018年12月18日v 12 57 01" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-12-57-01.png" id="954bb08e" width="300" height="192"></figure>   <p></p>   <p id="6077451b">为了插入<i id="35cb7fa9">名称</i>属性，请键入“ space”，然后键入“ name =“：</p>   <p id="612299f4">      </p><figure><img alt="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 18 v 12 57 15" title="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 18 v 12 57 15" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-12-57-15.png" id="de6af557" width="300" height="152"></figure>   <p></p>   <p id="261f7849">必须在<i id="1b105f25">名称</i>属性值的内容上设置属性宏：</p>   <p id="07a60342">      </p><figure><img alt="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 18 v 12 57 28" title="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 18 v 12 57 28" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-12-57-28.png" id="44352316" width="500" height="774"></figure>   <p></p>   <p id="632e9b65">      </p><figure><img alt="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 18 v 12 57 48" title="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 18 v 12 57 48" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-12-57-48.png" id="c2af1546" width="500" height="954"></figure>   <p></p>   <p id="f82faf6d">需要插入更多xml：</p>   <p id="d26eafd0">      </p><figure><img alt="Sni Mek Obrazovky 2018年12月18日v 12 58 08" title="Sni Mek Obrazovky 2018年12月18日v 12 58 08" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-12-58-08.png" id="8ba5a2a0" width="500" height="748"></figure>   <p></p>   <p id="ed13aaf1">我们为所有形状创建一个占位符：</p>   <p id="545ad7fa">      </p><figure><img alt="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 18 v 12 58 25" title="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 18 v 12 58 25" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-12-58-25.png" id="61a44e62" width="300" height="243"></figure>   <p></p>   <p id="c140cfaa">使用<i id="d24450ac">Control / Cmd + Up</i>选择占位符xml元素：</p>   <p id="f243854e">      </p><figure><img alt="尼克·奥布拉佐夫斯基2018 12 18 v 12 58 42" title="尼克·奥布拉佐夫斯基2018 12 18 v 12 58 42" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-12-58-42.png" id="ee8e2167" width="300" height="252"></figure>   <p></p>   <p id="d3c9e111">然后插入COPY_SRCL宏以遍历<i id="f4383dd2">Canvas的</i>所有形状并触发其缩小规则：</p>   <p id="7c6b9d24">      </p><figure><img alt="尼克·奥布拉佐夫斯基2018 12 18 v 12 59 28" title="尼克·奥布拉佐夫斯基2018 12 18 v 12 59 28" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-12-59-28.png" id="d1e9615f" width="500" height="660"></figure>   <p></p>   <p id="4ff3caa9">      </p><figure><img alt="尼克·奥布拉佐夫斯基2018 12 18 v 12 59 40" title="尼克·奥布拉佐夫斯基2018 12 18 v 12 59 40" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-12-59-40.png" id="9460077d" width="500" height="984"></figure>   <p></p>   <p id="aa84206a">也可以使用<b id="aedb2655">属性宏来自</b>定义生成的xml文件的<i id="cf49dbb9">名称</i> 。</p>   <p id="6632761e">      </p><figure><img alt="尼克·奥布拉佐夫斯基2018 12 18 v 14 40 49" title="尼克·奥布拉佐夫斯基2018 12 18 v 14 40 49" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-14-40-49.png" id="33912633" width="500" height="704"></figure>   <p></p>   <p id="35618b96">      </p><figure><img alt="尼克·奥布拉佐夫斯基2018 12 18 v 14 40 57" title="尼克·奥布拉佐夫斯基2018 12 18 v 14 40 57" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-14-40-57.png" id="49b58c2b" width="500" height="504"></figure>   <p></p>   <p id="a9465aa1">现在需要创建<i id="0ab92c77">Square</i>和<i id="5d9aee3f">Circle的</i>缩减规则：</p>   <p id="9618573d">      </p><figure><img alt="尼克·奥布拉佐夫斯基2018 12 18 v 12 59 57" title="尼克·奥布拉佐夫斯基2018 12 18 v 12 59 57" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-12-59-57.png" id="1d88cd4a" width="500" height="1520"></figure>   <p></p>   <p id="1c66dbd9">      </p><figure><img alt="尼克·奥布拉佐夫斯基（Sni mek obrazovky）2018 12 18 v 13 00 20" title="尼克·奥布拉佐夫斯基（Sni mek obrazovky）2018 12 18 v 13 00 20" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-13-00-20.png" id="f7d63b60" width="500" height="836"></figure>   <p></p>   <p id="8e9dff07"><i id="642faa73">Circle</i>和<i id="1ee040ae">Square</i>的模板必须以<i id="0cec1a57">XmlElement</i>作为其根：</p>   <p id="5c2baed3">      </p><figure><img alt="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 18 v 13 01 32" title="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 18 v 13 01 32" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-13-01-32.png" id="158b6d36" width="500" height="722"></figure>   <p></p>   <p id="f4093cb4">然后必须完全构造xml模板：</p>   <p id="22db4fce">      </p><figure><img alt="Sni mek obrazovky 2018 12 18 v 13 02 04" title="Sni mek obrazovky 2018 12 18 v 13 02 04" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-13-02-04.png" id="a76a3c4c" width="500" height="794"></figure>   <p></p>   <p id="f00d2c88">必须围绕整个xml代码创建一个<b id="7f490301">模板片段</b> ：</p>   <p id="fafa2144">      </p><figure><img alt="尼克·奥布拉佐夫斯基（Sni mek obrazovky）2018 12 18 v 13 02 48" title="尼克·奥布拉佐夫斯基（Sni mek obrazovky）2018 12 18 v 13 02 48" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-13-02-48.png" id="d1c29dbb" width="500" height="520"></figure>   <p></p>   <p id="2dfcf14f">      </p><figure><img alt="Sni mek obrazovky 2018年12月18日v 13 03 07" title="Sni mek obrazovky 2018年12月18日v 13 03 07" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-13-03-07.png" id="2a8c54a8" width="300" height="227"></figure>   <p></p>   <p id="5fccc03c"><b id="5e1f5bee">TF</b>符号表示<b id="a24327e0">模板片段</b> ：</p>   <p id="3ed0351f">      </p><figure><img alt="尼克·奥布拉佐夫斯基（Sni mek obrazovky）2018 12 18 v 13 03 16" title="尼克·奥布拉佐夫斯基（Sni mek obrazovky）2018 12 18 v 13 03 16" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-13-03-16.png" id="89961d3a" width="500" height="520"></figure>   <p></p>   <p id="8e3f13a1">属性宏应用于参数化模板：</p>   <p id="60e527d1">      </p><figure><img alt="尼克·奥布拉佐夫斯基（Sni mek obrazovky）2018 12 18 v 13 03 27" title="尼克·奥布拉佐夫斯基（Sni mek obrazovky）2018 12 18 v 13 03 27" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-13-03-27.png" id="cd1386e6" width="500" height="640"></figure>   <p></p>   <p id="6c9f8718">必须在<b id="41fa1c37">检查器中</b>进一步指定属性宏，以便使用正确的值并将其从<b id="8ac9e7fb">整数</b>转换为<b id="07f9b5de">string</b> ：</p>   <p id="6f6ac0a0">      </p><figure><img alt="Sni meb obrazovky 2018年12月18日v 13 04 02" title="Sni meb obrazovky 2018年12月18日v 13 04 02" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-13-04-02.png" id="d4712a8a" width="500" height="948"></figure>   <p></p>   <p id="7171e03e"><i id="b5ff1076">y</i> xml属性必须重复相同的操作。</p>   <p id="5d7308f6">对于半径，我们将使用专用的xml元素：</p>   <p id="5b54d52c">      </p><figure><img alt="Sni mek obrazovky 2018年12月18日v 13 05 08" title="Sni mek obrazovky 2018年12月18日v 13 05 08" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-13-05-08.png" id="5a5a42d6" width="500" height="544"></figure>   <p></p>   <p id="f8cebefc">      </p><figure><img alt="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 18 v 13 05 25" title="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 18 v 13 05 25" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-13-05-25.png" id="2b12cc22" width="500" height="942"></figure>   <p></p>   <p id="84fc6f8b">并类似地查询<i id="209522b7">颜色</i>参考：</p>   <p id="a19b0922">      </p><figure><img alt="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 18 v 13 07 31" title="尼克·奥布拉佐夫斯基（Sni Mek Obrazovky）2018 12 18 v 13 07 31" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-13-07-31.png" id="619c8f5f" width="500" height="1024"></figure>   <p></p>   <p id="7cb2a9ad"><i id="9f8541b4">Square</i>的模板将非常相似：</p>   <p id="16817706">      </p><figure><img alt="Sni Mek Obrazovky 2018年12月18日v 13 09 27" title="Sni Mek Obrazovky 2018年12月18日v 13 09 27" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-13-09-27.png" id="8336dd2a" width="500" height="1054"></figure>   <p></p>   <p id="cc304f70">生成器现在应该包含四个根节点：</p>   <p id="e4531a9a">      </p><figure><img alt="Sni Mek Obrazovky 2018年12月18日v 13 09 53" title="Sni Mek Obrazovky 2018年12月18日v 13 09 53" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-13-09-53.png" id="93a9b1d6" width="500" height="328"></figure>   <p></p>   <p id="997acd9b">当您重建语言并预览沙箱生成的代码时，应该得到一个类似于以下内容的xml文件：</p>   <p id="e75316b6">      </p><figure><img alt="尼克·奥布拉佐夫斯基2018 12 18 v 13 10 22" title="尼克·奥布拉佐夫斯基2018 12 18 v 13 10 22" src="/help/img/idea/2019.2/Sni-mek-obrazovky-2018-12-18-v-13-10-22.png" id="997d3d4c" width="500" height="884"></figure>   <p></p>   <h2 id="whattodonext">接下来做什么</h2>   <p id="06930fde">恭喜你！您刚刚完成了MPS入门教程。</p>   <p id="12e0aa38">现在，您可以继续自己添加更多形状的语言。点，线，三角形，矩形或带有彩色填充的形状可能是对我们这种小语言的不错补充。</p>   <p id="76615fda">如果您想更全面地了解MPS，那么最好尝试一下深入的<a href="/help/mps/3.4/mps-calculator-language-tutorial.html" rel="noopener noreferrer" data-external="true" target="_blank">计算器教程</a> ，该<a href="/help/mps/3.4/mps-calculator-language-tutorial.html" rel="noopener noreferrer" data-external="true" target="_blank">教程</a>探讨了许多高级概念，并将教给您更多有关代码生成，类型系统和作用域的知识。</p><div class="last-modified" data-skip-index="skip">上次修改时间：2019年8月30日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="mps-tutorials.html">教程</a> <a class="navigation-links__next" href="mps-calculator-language-tutorial.html">MPS计算器语言教程</a></div></i></i></i></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>