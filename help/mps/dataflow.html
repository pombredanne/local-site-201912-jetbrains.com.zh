<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>数据流-帮助| MPS</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Dataflow.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索MPS帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected>默认</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_mac_os_x" data-group="primary">Eclipse（Mac OS X）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_mac_os_x" data-group="primary">Mac OS X</option><option value="primary_mac_os_x_10.5_" data-group="primary">Mac OS X 10.5以上</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_default" data-group="secondary">默认</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_jbuilder" data-group="secondary">JBuilder的</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5以上</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="dataflow.xml" data-toc="Dataflow.html">数据流</h1>   <p id="1eebecc4">在为您的语言设计数据流时，本菜谱应为您提供快速解答和指南。有关类型系统的详细说明，请参阅用户指南的“ <a href="data-flow.html">数据流”</a>部分。</p>   <h3 id="readingavalue">读取值</h3>   <p id="3e398c02">读取操作指示数据流引擎读取了特定的值：</p>   <div class="code-block" data-lang="none">LocalVariableReference {（node）-> void {if（node.isVariableDefinedInThisMethod（））{读取node.localVariableDeclaration}}的数据流生成器</div>   <h3 id="writingavalue">写一个值</h3>   <p id="8e704399">类似地，写操作指示值被写入。在该示例中，带有初始化程序的变量声明首先通过命令<i id="2f061900">代码</i>执行初始化<i id="2f061900">程序</i> ，然后将节点标记为正在写入初始化程序的结果：</p>   <div class="code-block" data-lang="none">LocalVariableDeclaration的数据流构建器{（node）-> void {如果（node.initializer.isNotNull），则为nop {node.initializer的代码写入node = node.initializer}}}</div>   <h3 id="codefor">代码为</h3>   <p id="aa90bd5e">如上面在<i id="94fe4543">LocalVariableDeclaration</i>数据流中或下面在<i id="3d709bb7">DotExpression</i>数据流中<i id="3d709bb7">所见</i> ，命令<i id="e3c60b00">代码</i>指示执行节点和执行时间。例如，在<i id="8e25e1d6">DotExpression中</i> ，操作数的代码在实际的点运算之前运行：</p>   <div class="code-block" data-lang="none">DotExpression {（节点）-> void {用于node.oper的代码和用于node.operation的代码}的数据流生成器</div>   <h3 id="jump">跳</h3>   <p id="6519c008"><i id="21031f60">TernaryOperatorExpression的</i>数据流是使用条件跳转和无条件跳转的非常简单的示例。一旦条件得到评估，我们可以选择跳转到<i id="5eedf8c5">ifFalse</i>分支。同样，一旦<i id="708b299a">ifTrue</i>分支完成，我们将无条件跳出节点范围：</p>   <div class="code-block" data-lang="none">TernaryOperatorExpression {（节点）-> void {的代码流构建器。node.condition ifjump在node.ifFalse之前的节点代码。ifTrue在node.ifFalse之前的节点代码之后跳转）</div>   <h3 id="ifjump">跳跃</h3>   <p id="c55bb3d7"><i id="3afd138f">WhileStatement</i>显示了更多涉及数据流语言的用法。也不是布尔常量的内置检测。因此，尝试使用<i id="082b9e1d">while（false）</i>将被MPS正确地报告为while循环且主体无法到达。这要归功于常量为<i id="7992234e">false时</i>无条件跳转到<i id="c6f94f3b">after节点</i> 。</p>   <div class="code-block" data-lang="none">WhileStatement的数据流生成器{（node）-> void {if。（node.condition.isInstanceOf（BooleanConstant））{node <booleanconstant>常量= node.condition：BooleanConstant;如果（！（constant.value））{跳转到节点}}否则{if跳转到节点} node.body的代码{跳转到节点}}}</booleanconstant></div>   <h3 id="insertinginstructions">插入说明</h3>   <p id="13160e1a"><i id="3250c360">TryStatement</i>对数据流语言有更多需求。它必须插入额外的<i id="f113ff80">ifjump</i>指令以跳转到catch子句，只要代码中可能抛出特定异常：</p>   <div class="code-block" data-lang="none">TryStatement的数据流生成器{（node）-> void {尝试（node <catchclause>c：node.catchClause）{if if cump before c} node.body的代码（指令：获取（node.body）的代码）{if（指令| isRet ||指令.isJump ||指令.isNop）{继续； } for（节点<catchclause>catchClause：DataFlowTryCatchUtil.getPossibleCatches（instruction.getSource，node.catchClause））{在指令后在catchClause之前插入ifjump}指令后在afterCatches后面插入ifjump} {在（节点<catchclause>c：node.catchClause）</catchclause> }之后跳转<catchclause>{代码对于c {在afterCatches之后跳转}}标签afterCatches最终为node.finallyBody结束代码}}</catchclause></catchclause></catchclause></div>   <p id="eeba446b">注意，我们在这里使用其他一些辅助方法和命令- <i id="14dbc0b0">获取用于</i>检索节点的数据流指令集<i id="d953962f">isRet</i> ， <i id="01270094">isJump</i>和<i id="f7ad25bd">isNop的代码，</i>以排除某些类型的指令（分别为返回，跳转和无操作）， <i id="7cc794c2">标签</i>以在数据流指令集中创建命名的位置，我们可以从其他地方跳转到该位置，最后<i id="815ebd33">插入</i>命令将新命令插入现有数据流指令集中。</p>   <p id="37ebad24"> </p><div class="last-modified" data-skip-index="skip">上次修改时间：2019年8月30日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="regular-expressions.html">正则表达式</a> <a class="navigation-links__next" href="howto-integration-with-the-data-flow-engine.html">HowTo-与数据流引擎集成</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>