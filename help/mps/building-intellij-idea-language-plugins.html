<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>构建IntelliJ IDEA语言插件-帮助|帮助MPS</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Building+IntelliJ+IDEA+language+plugins.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索MPS帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected>默认</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_mac_os_x" data-group="primary">Eclipse（Mac OS X）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_mac_os_x" data-group="primary">Mac OS X</option><option value="primary_mac_os_x_10.5_" data-group="primary">Mac OS X 10.5以上</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_default" data-group="secondary">默认</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_jbuilder" data-group="secondary">JBuilder的</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5以上</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="building-intellij-idea-language-plugins.xml" data-toc="Building+IntelliJ+IDEA+language+plugins.html">构建IntelliJ IDEA语言插件</h1>   <p id="7ffbcb7f">因此，您已经创建了一组语言，并希望将它们提供给IntelliJ IDEA中的Java开发人员使用。在本文档中，我们将研究将一组语言以及可能依赖于它们的运行时打包到有效的IntelliJ IDEA插件中的方法。</p>   <p id="524e4bf7">你喜欢视频吗？然后，您可能还需要查看我们的<a href="https://www.youtube.com/watch?v=6IPu9af7k1o" rel="noopener noreferrer" data-external="true" target="_blank">屏幕广播，其中涉及IntelliJ IDEA语言插件的创建</a> 。</p>   <p id="34d080eb">      <i id="72f357c8">注意：MPS随附的JavaExtensionsSample示例项目包含一个功能齐全的构建脚本，用于将示例Java扩展构建并打包到插件中。您可以从那里获取灵感。</i>   </p>   <h3 id="startingpoint">初始点</h3>   <p id="d47356f4">我认为您已经建立了自己的语言，现在是时候与世界分享它们了。您需要执行几个步骤才能获得一个不错的zip文件，您可以将其上传到服务器以供其他人使用。</p>   <p id="a25057a0">简单来说：</p>   <ul class="list _ul"><li class="list__item" id="e152381c"><p>创建构建脚本（手动或通过向导）</p></li><li class="list__item" id="16c66df9"><p>生成一个Ant构建xml文件</p></li><li class="list__item" id="f5200b3c"><p>运行蚂蚁</p></li><li class="list__item" id="e70e6f13"><p>选择生成的文件并共享</p></li></ul>   <p id="4cdcc1cf">现在，我们将继续详细介绍。另外，您可能想要尝试我们的新屏幕录像，其中涵盖了构建以及使用IntelliJ IDEA语言插件的主题。</p>   <h4 id="createabuildscript">创建一个构建脚本</h4>   <p id="fd953611">首先，我们需要在新创建的构建解决方案中创建一个新的构建脚本。我们有两个选项-使用向导或手动创建构建说明。</p>   <h4 id="usingthewizard">使用向导</h4>   <p id="85fd5ca7">我们可以使用“ <i id="ae30fdcf">构建解决方案”</i>向导为我们生成解决方案</p>   <p id="cb874d90">      </p><figure><img alt="版本1" title="版本1" src="/help/img/idea/2019.2/build1.png" id="0a69a316" width="516" height="205"></figure>      <br>向导将询问新的构建脚本是否应成为现有解决方案的一部分，还是应创建新的解决方案。<p></p>   <p id="06108448">       </p><figure><img alt="版本2" title="版本2" src="/help/img/idea/2019.2/build2.png" id="882eb356" width="567" height="407"></figure>      <br>必须在新解决方案中创建一个模型：<p></p>   <p id="1d34837d">       </p><figure><img alt="版本3" title="版本3" src="/help/img/idea/2019.2/build3.png" id="3a35934c" width="567" height="407"></figure>      <br>您还可以指定是否打算将结果打包为MPS或IntelliJ IDEA插件：<p></p>   <p id="1f7f0053">      </p><figure><img alt="版本5" title="版本5" src="/help/img/idea/2019.2/build5.png" id="4985a52f" width="567" height="407"></figure>      <br>最后，选择要包含在构建规则中的语言和解决方案：<p></p>   <p id="d78fea42">       </p><figure><img alt="版本6" title="版本6" src="/help/img/idea/2019.2/build6.png" id="bff0c796" width="567" height="407"></figure>   <p></p>   <p id="ee4dd711">生成的构建描述脚本将如下所示：</p>   <p id="54e5f34d">      </p><figure><img alt="版本7" title="版本7" src="/help/img/idea/2019.2/build7.png" id="835a7e59" width="935" height="791"></figure>   <p></p>   <h4 id="themanualapproach">手动方式</h4>   <p id="089219cc">为了更好地控制流程，我们可以选择自己创建构建脚本。因此，首先我们必须选择一个现有的解决方案或创建一个新的解决方案。在项目的逻辑视图的根目录中，右键单击并选择“新解决方案”。解决方案存在后，在其中创建一个新模型。该模型应该有<i id="fde83f80">jetbrains.mps.build</i>和上市作为其<i id="da96c785">使用的语文</i>和<i id="4c312d3d">jetbrains.mps.ide.build</i> <i id="5cc7fefb">jetbrains.mps.build.mps</i>应该作为<i id="b53ae575">依赖</i>被提及。</p>   <p id="7f94b93c">       </p><figure><img alt="版本12" title="版本12" src="/help/img/idea/2019.2/build12.png" id="9a820cb7" width="783" height="475"></figure>      <br>      <figure><img alt="版本13" title="版本13" src="/help/img/idea/2019.2/build13.png" id="60d124f4" width="584" height="365"></figure>      <br>准备好解决方案和模型后，您现在可以通过弹出菜单创建一个新的构建项目：<p></p>   <p id="13d26999">      </p><figure><img alt="build14" title="build14" src="/help/img/idea/2019.2/build14.png" id="dd276f50" width="765" height="294"></figure>   <p></p>   <h4 id="editingthebuildscript">编辑构建脚本</h4>   <p id="155562cd">无论采用哪种方式创建构建脚本，现在都可以编辑构建说明。为了能够将您的语言和解决方案打包为IntelliJ IDEA插件，您应该及时获得与此脚本类似的脚本：</p>   <p id="265f2e27">      </p><figure><img alt="版本8" title="版本8" src="/help/img/idea/2019.2/build8.png" id="f58701d9" width="615" height="785"></figure>   <p></p>   <p id="e9c6683e">为两个依赖项定义工件位置非常重要。<i id="9aaa3306">IDEA</i>依赖项需要知道在哪里可以找到IntelliJ IDEA安装。<i id="e77477fd">mpsPlugin</i>依赖项要求知道在哪里可以找到MPS核心IDEA插件。通过添加插件在IntelliJ IDEA中启用MPS后，它通常位于<i id="ea49decd">IntelliJ IDEA安装文件夹/插件</i>文件夹中。或者，该插件也可能已安装在<i id="1c10c8ba">IntelliJ IDEA设置目录folder / config / plugins</i>下的用户主文件<i id="1c10c8ba">夹中</i> 。</p>   <p id="d7e10b31">请查看<a href="build-language.html">Build语言，</a>以获取有关构建语言功能的详细信息。</p>   <h3 id="generateanantbuildxmlfile">生成一个Ant构建xml文件</h3>   <p id="130ec2c0">准备好构建脚本后，您现在可以生成一个Ant <i id="cd2b73d1">build.xml</i>文件。只需<b id="ef8400fd">重建</b>您的构建解决方案，文件就会生成到您在构建脚本的属性中指定的位置，如下图所示：<br>      </p><figure><img alt="build11" title="build11" src="/help/img/idea/2019.2/build11.png" id="ca734297" width="699" height="404"></figure>   <p></p>   <p id="4b7e1bdb">生成的<i id="5ef38f15">build.xml</i>文件应如下所示开始：</p>   <p id="7213d1c7">      </p><figure><img alt="版本10" title="版本10" src="/help/img/idea/2019.2/build10.png" id="99b84ae4" width="746" height="339"></figure>   <p></p>   <p id="1061068b">注意<i id="cf1f53ee">工件。生成的脚本中的IDEA</i>和<i id="d2fd1f20">artifacts.mpsPlugin</i>属性。从命令行运行脚本时，我们必须使它们分别指向IntelliJ IDEA安装和MPS核心插件的位置。</p>   <p id="ec6d6caa">因为在上面的脚本中我们通过<b id="4f14f383">宏</b> （ <b id="779e940f">$ idea_home</b>和<b id="3d66408e">$ plugins_home</b> ）设置了两个工件的位置，所以我们可以设置theese属性（仅当构建机器上的位置与构建脚本中设置的路径不同时才需要）。</p>   <h3 id="runant">运行蚂蚁</h3>   <p id="26888f19">是时候运行构建并获取我们的插件了。同样，我们有两个选择-要么留在MPS内，要么使用命令行。</p>   <h4 id="fromwithinmps">从MPS内部</h4>   <p id="a512e466">只需在项目视图中右键单击构建节点，然后选择运行：</p>   <p id="17f0b141">      </p><figure><img alt="版本9" title="版本9" src="/help/img/idea/2019.2/build9.png" id="b775fa45" width="664" height="416"></figure>   <p></p>   <p id="579281f4">生成的工件将位于您指定为基础的文件夹内的<i id="dc358b9f">build</i>文件夹中。</p>   <h4 id="fromthecommandline">从命令行</h4>   <p id="fc95445f">您需要将命令行导航到<i id="8e28e9b9">build.xml</i>文件所在的文件夹，然后运行<i id="8f284661">ant</i> 。如果MPS核心插件和IntelliJ IDEA在构建计算机上的位置与在构建脚本中设置的路径不同，则应在命令行<i id="3fca2236">ant -Dartifacts.mpsPlugin =“ ...” -Dartifacts上指定实际位置<i id="3fca2236">。IDEA =“ ...”</i> 。由于在上面的示例中，我们使用<i id="7dc20424">$ idea_home</i>指向IntelliJ IDEA安装文件夹，并使用<i id="75fe19e8">$ plugins_home</i>指向MPS核心插件，因此我们可以在命令行上更改<i id="b4083416">theese</i>属性的值： <i id="b4083416">ant -Didea_home =“想法的路径“ -Dplugins_home =” MPS核心插件的路径“</i> 。</i></p><i id="3fca2236">   <p id="d9c7a3de">无论您是从MPS还是从命令行运行脚本，此步骤都将生成一个zip文件，其中包含所有必要的jar文件，这些文件按照我们在构建脚本的布局部分中指定的方式组织，或者使用IntelliJ IDEA插件的默认布局。</p>   <h3 id="pickthegeneratedfilesandsharethem">选择生成的文件并共享</h3>   <p id="055c3cfd">现在，我们需要将生成的文件分发给IntelliJ IDEA用户，以便他们可以将它们添加为插件。请查看<a href="using-mps-inside-intellij-idea.html">IntelliJ IDEA中的MPS使用，</a>以获取有关如何安装用于IntelliJ IDEA的插件的详细说明。</p><div class="last-modified" data-skip-index="skip">上次修改时间：2019年8月30日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="howto-mps-and-ant.html">HowTo-</a> <a class="navigation-links__next" href="using-mps-inside-intellij-idea.html">IntelliJ IDEA中的</a> <a class="navigation-links__prev" href="howto-mps-and-ant.html">MPS和蚂蚁</a> <a class="navigation-links__next" href="using-mps-inside-intellij-idea.html">使用MPS</a></div></i></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>