<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>运行配置-帮助| MPS</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Run+Configurations.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索MPS帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected>默认</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_mac_os_x" data-group="primary">Eclipse（Mac OS X）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_mac_os_x" data-group="primary">Mac OS X</option><option value="primary_mac_os_x_10.5_" data-group="primary">Mac OS X 10.5以上</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_default" data-group="secondary">默认</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_jbuilder" data-group="secondary">JBuilder的</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5以上</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="run-configurations.xml" data-toc="Run+Configurations.html">运行配置</h1>   <p id="fb2312fb">      </p><ul data-skip-index="skip"><li class="list__item"><a href="#introduction">介绍</a></li><li class="list__item"><a href="#settings">设定值</a></li><li class="list__item"><a href="#persistentproperties">持久性</a></li><li class="list__item"><a href="#integratingconfigurationsintooneanother">将配置彼此集成</a></li><li class="list__item"><a href="#templateparameters">模板参数</a></li><li class="list__item"><a href="#commands">指令</a></li><li class="list__item"><a href="#executecommandsections">执行命令部分</a></li><li class="list__item"><a href="#processbuilderexpression">ProcessBuilderExpression</a></li><li class="list__item"><a href="#debuggerintegration">调试器集成</a></li><li class="list__item"><a href="#configurations">构型</a></li><li class="list__item"><a href="#executors">执行者</a></li><li class="list__item"><a href="#debuggerintegration">调试器集成</a></li><li class="list__item"><a href="#producers">生产者</a></li><li class="list__item"><a href="#usefulexamples">有用的例子</a></li><li class="list__item"><a href="#personeditor">人编辑</a></li><li class="list__item"><a href="#execcommand">执行命令</a></li><li class="list__item"><a href="#compilewithgccbeforetask">任务前用gcc编译</a></li><li class="list__item"><a href="#javaexecutor">Java执行器</a></li><li class="list__item"><a href="#javaproducer">Java生产者</a></li><li class="list__item"><a href="#runninganode,generatedintojavaclass">运行一个节点，生成到Java类中</a></li></ul>   <p></p>      <h3 id="introduction">介绍</h3>   <p id="7133cb13">运行配置允许用户定义如何执行使用其语言编写的程序。</p>   <p id="69e15514">可以从主工具栏上的“运行配置”框中执行现有的运行配置，</p>   <p id="2eb18e50">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/runConfig1.png"><img alt="runConfig1" title="runConfig1" src="/help/img/idea/2019.2/runConfig1.png" id="cef9689b" width="300" height="322"></a></figure>   <p></p>   <p id="0af64f75">通过主菜单中的“运行”菜单项</p>   <p id="869ad829">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/runConfig7.png"><img alt="runConfig7" title="runConfig7" src="/help/img/idea/2019.2/runConfig7.png" id="5c405a90" width="300" height="730"></a></figure>   <p></p>   <p id="f0526752">或通过运行/调试弹出窗口（Alt + Shift + F10 / Alt + Shift + F9）。</p>   <p id="83c3b545">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/runConfig6.png"><img alt="runConfig6" title="runConfig6" src="/help/img/idea/2019.2/runConfig6.png" id="897f62ae" width="300" height="440"></a></figure>   <p></p>   <p id="e332c213">还可以为节点，模型，模块和项目执行/创建运行配置。例如，JUnit运行配置可以运行所选项目，模块或模型中的所有测试。请参阅<a href="#producers">生产者，</a>以了解如何针对您自己的运行配置实现这种行为。</p>   <p id="c0885ac5">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/runconfig3.png"><img alt="运行配置3" title="运行配置3" src="/help/img/idea/2019.2/runconfig3.png" id="c20532d2" width="300" height="758"></a></figure>      <figure><a class="lightbox" href="/help/img/idea/2019.2/runconfig4.png"><img alt="运行配置4" title="运行配置4" src="/help/img/idea/2019.2/runconfig4.png" id="cac8b1b6" width="300" height="596"></a></figure>      <figure><a class="lightbox" href="/help/img/idea/2019.2/runconfig5.png"><img alt="运行配置5" title="运行配置5" src="/help/img/idea/2019.2/runconfig5.png" id="da97ccf1" width="300" height="648"></a></figure>   <p></p>   <p id="9565206b">总而言之，运行配置定义以下内容：</p>   <ul class="list _ul"><li class="list__item" id="334db372">在创建阶段：<ul class="list _ul"><li class="list__item" id="2f6f4eaf"><p>配置名称，标题，图标；</p></li><li class="list__item" id="6b2974b3"><p>配置种类；</p></li><li class="list__item" id="5324dbb6"><p>如何从节点，模型，模块，项目中创建配置。</p></li></ul>      </li><li class="list__item" id="804b6752">在配置阶段：<ul class="list _ul"><li class="list__item" id="b8e7e047"><p>持久参数；</p></li><li class="list__item" id="2030683f"><p>持久参数编辑器；</p></li><li class="list__item" id="05594af8"><p>持久参数有效性检查器。</p></li></ul>      </li><li class="list__item" id="a2c1e8ed">在执行阶段：<ul class="list _ul"><li class="list__item" id="959b36c6"><p>实际执行的过程；</p></li><li class="list__item" id="29873cfb"><p>一个带有所有选项卡，操作按钮和实际控制台窗口的控制台；</p></li><li class="list__item" id="aef4500d"><p>调试此配置所需的操作（如果可能）。</p></li></ul>      </li></ul>   <p id="c6c379cb">引入了以下语言来支持MPS中的运行配置。</p>   <ul class="list _ul"><li class="list__item" id="7bb5dd83"><p>         <code class="code">jetbrains.mps.execution.common</code> （通用语言）–包含其他执行语言使用的概念；</p></li><li class="list__item" id="c7b3d161"><p>         <code class="code">jetbrains.mps.execution.settings</code> （设置语言）–用于定义不同设置编辑器的语言；</p></li><li class="list__item" id="53983105"><p>         <code class="code">jetbrains.mps.execution.commands</code> （命令语言）–处理来自Java的调用；</p></li><li class="list__item" id="5235d17e"><p>         <code class="code">jetbrains.mps.execution.configurations</code> （配置语言）–运行配置定义；</p></li></ul>   <h3 id="settings">设定值</h3>   <p id="3a54423e">设置语言允许创建设置编辑器并将它们彼此集成。我们需要的设置编辑器如下：</p>   <ul class="list _ul"><li class="list__item" id="2c78b951"><p>要编辑的字段；</p></li><li class="list__item" id="5a3f37c6"><p>验证字段的正确性；</p></li><li class="list__item" id="5d1fe71a"><p>编辑器UI组件；</p></li><li class="list__item" id="fd887620"><p>应用/重置功能以应用UI组件中的设置并将UI组件中的设置重置为已保存状态；</p></li><li class="list__item" id="c507a6f1"><p>一个dispose函数，用于在不再需要UI组件时销毁它。</p></li></ul>   <p id="58e2018a">如您所见，设置具有UI组件。通常，为多个设置实例创建一个UI组件。在设置中，语言设置通常称为“配置”，其UI组件称为“编辑器”。</p>   <p id="c81fdce1">设置语言的主要概念是<code class="code">PersistentConfigurationTemplate</code> 。它包括以下部分：</p>   <ul class="list _ul"><li class="list__item" id="568ad5da"><p>         <b id="4639b8a6">持久属性</b> -本节介绍了我们正在编辑的实际设置。由于我们还希望保留这些设置（即写入xml /从xml读取）并克隆我们的配置，因此对它们的类型进行了限制：每个属性应为<code class="code">Cloneable</code>要么<code class="code">String</code>或任何原始类型。还有一种叫做<code class="code">template persistent property</code> ，但稍后将进行讨论。</p></li><li class="list__item" id="338a2137"><p>         <b id="b77abf7e">编辑器</b> -本节介绍配置的编辑器。它具有以下功能： <code class="code">create</code> ， <code class="code">apply to</code> ， <code class="code">reset from</code> ， <code class="code">dispose</code> 。一个部分还可以定义字段以存储编辑器的某些对象。一种<code class="code">create</code>函数应该返回一个swing组件-编辑器的主要UI组件。 <code class="code">apply to</code> / <code class="code">reset from</code>函数将编辑器中的设置应用于或重置作为参数给出的配置。 <code class="code">dispose</code>函数配置编辑器。</p></li><li class="list__item" id="2c2e0f6b"><p>         <b id="a27c73ff">检查</b> -在本节中，将检查持久属性的正确性。如果某些属性无效，则<code class="code">report error</code>语句可以使用。本质上，该语句抛出<code class="code">RuntimeConfigurationException</code> 。</p></li><li class="list__item" id="436c3319"><p>         <b id="b34c1cd3">其他方法</b> -本节介绍配置中使用的方法。本质上，这些方法是配置实例方法。</p></li></ul>   <h4 id="persistentproperties">持久性</h4>   <p id="dbf7acb9">上面提到，持久属性可以是<code class="code">Cloneable</code>要么<code class="code">String</code>或任何原始类型。但是，如果在运行配置中使用设置语言，则这些属性也应支持xml持久性。字符串和基元照常保存。对于对象，持久性更加复杂。对象保留两种类型的属性：公共实例字段以及具有setXXX和getXXX方法的属性。因此，如果希望对持久属性使用某种复杂类型，则他应该公开所有重要字段，或者为想要持久化的对象提供setXXX和getXXX方法。</p>   <h4 id="integratingconfigurationsintooneanother">将配置彼此集成</h4>   <p id="c9c9f412">设置语言的两个基本功能之一就是可以轻松地将一种配置集成到另一种配置中。为了那个原因<code class="code">template persistent properties</code>被使用。</p>   <h4 id="templateparameters">模板参数</h4>   <p id="dee9f03b">设置语言的第二个基本功能是模板参数。这些有点类似于Java中的构造函数参数。例如，如果创建了一个用于选择节点的配置，则他可能想用节点概念对配置进行参数化。在这种情况下，该概念不是持久性参数：用户不选择它。这是在配置创建时指定的参数。</p>   <h3 id="commands">指令</h3>   <p id="2de1d305">使用Commands语言，您可以通过从命令行完成代码的方式来启动进程。语言的主要概念是<code class="code">CommandDeclaration</code> 。在声明中，指定了命令参数以及使用此参数启动过程的方式。另外，命令可以具有调试器参数和某些实用程序方法。</p>   <h4 id="executecommandsections">执行命令部分</h4>   <p id="e75d6b3e">每个命令可以有多个<code class="code">execute</code>部分。每个部分都定义了几个执行参数。有两种类型的参数：必需和可选。可选参数可以具有默认值，并且在启动命令时可以被省略，而必需参数则不能具有默认值，它们是必需的。命令的任何两个执行部分应具有不同的（按类型）必需参数列表。一个执行部分可以调用另一个执行部分。每个执行节应返回以下两个值之一<code class="code">process</code>要么<code class="code">ProcessHandler</code>类型。</p>   <h4 id="processbuilderexpression">ProcessBuilderExpression</h4>   <p id="274d521f">从命令执行部分启动进程<code class="code">ProcessBuilderExpression</code>用来。这是命令部分的简单列表。每个部分是<code class="code">ProcessBuilderPart</code> ，由类型的表达式组成<code class="code">string</code>要么<code class="code">list<string></code>或<code class="code">ProcessBuilderKeyPart</code> ，它代表带有键的参数（例如“ -classpath / path / to / classes”）。当代码从<code class="code">ProcessBuilderExpression</code>被调用时，将测试每个部分是否为null或为空，如果为null，则将其省略。然后，将每个部分按空格分为多个部分。因此，如果您打算在命令部件中提供一个空格并且不希望将其拆分（例如，您的文件路径带有空格），则必须将其放在双引号（“）中。可以在<b id="22f0c21c">检查器中</b>指定创建过程的工作目录。</p>   <h4 id="debuggerintegration">调试器集成</h4>   <p id="44d077fe">要将命令与调试器集成在一起，需要指定两项：</p>   <ul class="list _ul"><li class="list__item" id="251771f1"><p>要集成的特定调试器；</p></li><li class="list__item" id="12a094ed"><p>进程的命令行参数。</p></li></ul>   <p id="b57914d7">要指定调试器，您可以使用<code class="code">DebuggerReference</code> –的表达<code class="code">debugger</code>输入<code class="code">jetbrains.mps.debug.apiLang</code> –引用特定的调试器。调试器设置必须是类型的对象<code class="code">IDebuggerSettings</code> 。</p>   <h3 id="configurations">构型</h3>   <p id="b171fe3a">配置语言允许创建运行配置。要创建运行配置，应在上创建一个实例<code class="code">RunConfiguration</code> （本质上是通过设置语言进行配置）并提供<code class="code">RunConfigurationExecutor</code>为了它。一个人可能还需要一个<code class="code">RunConfigurationKind</code>指定这种配置的一种， <code class="code">RunConfigurationProducer</code>提供一种从节点，模型，模块和组件创建此配置的方法<code class="code">BeforeTask</code>指定在执行之前如何准备配置。</p>   <h4 id="executors">执行者</h4>   <p id="4716d49d">执行程序是一个节点，它描述如何为此运行配置启动过程。它接受用户输入的设置并从中创建一个过程。因此，执行者的execute方法应该返回一个类型的实例<code class="code">process</code> 。这是通过<code class="code">StartProcessHandlerStatement</code> 。任何具有类型的东西<code class="code">process</code>要么<code class="code">ProcessHandler</code>可以传递给它。一种<code class="code">process</code>可以通过三种不同方式创建：</p>   <ol class="list _decimal"><li class="list__item" id="6043f92b"><p>通过命令;</p></li><li class="list__item" id="ac2d9862"><p>通过<code class="code">ProcessBuilderExpression</code> （建议仅在命令中使用）；</p></li><li class="list__item" id="568571eb"><p>通过创建<i id="26149b39">ProcessHandler</i>类的新实例；仅当以上两种方法都不适合您时才建议使用此方法，例如，当您创建用于远程调试的运行配置时，并且您实际上不需要启动进程。</p></li></ol>   <p id="0d43bb72">执行程序本身包括以下部分：</p>   <ol class="list _decimal"><li class="list__item" id="b47d426e"><p>“执行”部分，该执行程序用于其配置，并为其指定别名；</p></li><li class="list__item" id="e19ef55e"><p>“可以”部分，其中指定了运行/调试此配置的能力；如果该执行程序未使用该命令，则必须提供以下示例： <code class="code">DebuggerConfiguration</code>这里;</p></li><li class="list__item" id="e2bffbb7"><p>调用任务的“之前”部分，可以在配置运行之前执行，例如Make；</p></li><li class="list__item" id="430e78d2"><p>创建进程本身的“执行”部分。</p></li></ol>   <h4 id="debuggerintegration">调试器集成</h4>   <p id="08b74684">如果使用命令来启动进程，则除了将配置指定为可调试（通过在执行程序中选择“调试”）之外，什么都不要做。但是，如果需要自定义调试器集成，则其完成方式与命令声明中的方式相同。</p>   <h4 id="producers">生产者</h4>   <p id="7a0bbe48">运行配置的生产者描述了如何为各种节点或节点组，模型，模块或项目创建此配置。这使用户易于发现运行配置，因为对于每个生产者，他们将在上下文菜单中看到建议运行所选项目的操作。这也简化了配置，因为它提供了执行某些操作的默认方式，而无需先查看编辑对话框。</p>   <p id="d30e42ff">每个生产者指定一个它创建的运行配置。它可以有<b id="fe039d2b">从</b>每个源种类的结构可以从产生的若干部分<b id="fe039d2b">产生</b> 。该源应为以下之一：node <>，nlist <>，模型，模块，项目。除了源， <b id="da13a153">从</b>部分中的每个<b id="da13a153">产生</b>具有<b id="0b0ab270">创建</b>部分-具有源参数化概念功能。该函数应返回创建的运行配置，如果由于某种原因无法创建，则返回null。</p>   <h3 id="usefulexamples">有用的例子</h3>   <p id="20ea9d62">在本节中，您可以找到一些有用的提示和运行配置用法示例。</p>   <h4 id="personeditor">人编辑</h4>   <p id="57bfca25">在此示例中，创建了“人员”的编辑器。该编辑器编辑一个人的两个属性：姓名和电子邮件地址。</p>   <p id="d5eb503e">      </p><figure><img alt="人员编辑器" title="人员编辑器" src="/help/img/idea/2019.2/personEditor.png" id="899cd42a" width="608" height="702"></figure>   <p></p>   <p id="6298baa8">可以通过以下方式从Java代码使用PersonEditor：</p>   <div class="code-block" data-lang="none">公共类SettingsEditorDialogTest {公共静态void main（string [] args）{SwingUtilities.invokeLater（new Runnable（）{public void run（）{//创建PersonEditor模板配置<personeditor>personEditor = new PersonEditor（）; //创建对话框SettingsEditorDialog对话框= new SettingsEditorDialog（personEditor）; //显示对话框dialog.setVisible（true）; //打印名称和电子邮件，由用户System.out.println（“ name =” + personEditor.myName）; System.out.println（“ email =“ + personEditor.myEmail）;}}）; }}</personeditor></div>   <h4 id="execcommand">执行命令</h4>   <p id="b6b60a25">这是一个简单命令的示例，该命令启动给定<code class="code">executable</code>与<code class="code">programParameters</code>在给定的<code class="code">workingDirectory</code> 。<br>       </p><figure><img alt="执行" title="执行" src="/help/img/idea/2019.2/exec.png" id="9e27f2c8" width="786" height="261"></figure>   <p></p>   <h4 id="compilewithgccbeforetask">任务前用gcc编译</h4>   <p id="154cba49">这是一个例子<code class="code">BeforeTask</code>使用以下命令执行源文件的编译<code class="code">gcc</code>命令。它还演示了如何在运行配置执行程序之外使用命令。</p>   <p id="10eead74">      </p><figure><img alt="编译器" title="编译器" src="/help/img/idea/2019.2/compilegcc.png" id="ab7bb67d" width="738" height="759"></figure>   <p></p>   <p id="66c28091">请注意，这只是一个玩具示例，在现实生活中，例如，任务在编译时应显示进度窗口。</p>   <h4 id="javaexecutor">Java执行器</h4>   <p id="76af61f9">这是MPS中Java运行配置的实际执行程序。</p>   <p id="376e2a0f">      </p><figure><img alt="爪哇" title="爪哇" src="/help/img/idea/2019.2/java.png" id="e9c7ac28" width="819" height="296"></figure>   <p></p>   <h4 id="javaproducer">Java生产者</h4>   <p id="bb181e37">这是MPS中Java运行配置的生产者。</p>   <p id="64c811e9">      </p><figure><img alt="制片人" title="制片人" src="/help/img/idea/2019.2/producer.png" id="007179f6" width="907" height="454"></figure>   <p></p>   <p id="c3747577">您可以在这里看到三个“产生于”部分。在此处从以下节点创建Java运行配置<code class="code">ClassConcept</code> ， <code class="code">StaticMethodDeclaration</code>要么<code class="code">IMainClass</code> 。</p>   <h4 id="runninganode,generatedintojavaclass">运行一个节点，生成到Java类中</h4>   <p id="75d403b4">假设您有一个概念的节点，该节点已通过main方法生成到java类中，并且希望从MPS运行此节点。然后，在这种情况下，您不必创建运行配置，但是您应该执行以下操作：</p>   <ol class="list _decimal"><li class="list__item" id="86061316"><p>您希望运行的概念应该实现<code class="code">IMainClass</code>来自的概念<code class="code">jetbrains.mps.execution.util</code>语言。要指定何时可以执行节点，请覆盖<code class="code">isNodeRunnable</code>方法。</p></li><li class="list__item" id="3f1c98e3">应该为该概念生成单元信息。需要单元信息才能正确确定要执行的类名称。您可以在MPS文档的“ <a href="debugger.html#traceablenodes">调试器”</a>部分中阅读有关单元信息的更多信息以及所有跟踪信息。为确保此检查，确保满足以下条件之一：<ol class="list _decimal"><li class="list__item" id="502eab7a"><p>一种<code class="code">ClassConcept</code>从<code class="code">jetbrains.mps.baseLanguage</code>从节点生成；</p></li><li class="list__item" id="ee9031dc"><p>将节点生成为文本（语言使用<code class="code">textGen</code>生成方面）和节点概念的实现<code class="code">UnitConcept</code>来自的界面<code class="code">jetbrains.mps.traceable</code> ;</p></li><li class="list__item" id="7a36b31c"><p>将节点概括为满足三个指定条件之一的概念。</p></li></ol>      </li></ol><div class="last-modified" data-skip-index="skip">上次修改时间：2019年8月30日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="find-usages.html">查找用法</a> <a class="navigation-links__next" href="suppressing-errors.html">抑制错误</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>