<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>在IntelliJ IDEA中使用MPS-帮助|帮助MPS</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Using+MPS+inside+IntelliJ+IDEA.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索MPS帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected>默认</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_mac_os_x" data-group="primary">Eclipse（Mac OS X）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_mac_os_x" data-group="primary">Mac OS X</option><option value="primary_mac_os_x_10.5_" data-group="primary">Mac OS X 10.5以上</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_default" data-group="secondary">默认</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_jbuilder" data-group="secondary">JBuilder的</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5以上</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="using-mps-inside-intellij-idea.xml" data-toc="Using+MPS+inside+IntelliJ+IDEA.html">在IntelliJ IDEA中使用MPS</h1>   <p id="305ea7c6">在本文档中，我们将展示如何在IntelliJ IDEA中使用MPS语言。您可能还想查看<a href="https://www.youtube.com/watch?v=lhmEg095-4Q" rel="noopener noreferrer" data-external="true" target="_blank">有关此主题的屏幕广播</a> 。</p>   <p id="6e95b247">      <i id="ed300f50">注意：请确保您具有IntelliJ</i> <i id="06b9cd91"></i> <i id="c7851949">已安装。Community Edition和Ultimate Edition均可使用。</i>   </p>   <h3 id="getthempscoreintellijideaplugin">获取MPS核心IntelliJ IDEA插件</h3>   <p id="ea67ef64">从<a href="http://jetbrains.com/mps/download" rel="noopener noreferrer" data-external="true" target="_blank">MPS下载页面</a>下载<b id="37ab4b15">MPS IntelliJ IDEA插件</b> ，或使用IntelliJ IDEA的<b id="15c96e73">插件管理器</b>直接安装。如果手动安装，则必须将下载的插件zip文件解压缩到IDEA的插件文件夹中。</p>   <ul class="list _ul"><li class="list__item" id="00cf85d5"><p>         <b id="717cea1d">Windows和Linux：</b>通常为<i id="69dbf727">USER_HOME / IDEA_version / config / plugins</i>或<i id="912d1270">IDEA_HOME / plugins</i>      </p></li><li class="list__item" id="a6a18b99"><p>         <b id="2264af4f">MacOS：</b> <i id="a8c86c95">〜/ Library / Application Support / Idea_version /</i>或<i id="97b27c0e">IDEA_HOME / plugins</i>      </p></li></ul>   <aside class="warning " rel="d7d8d101" id="c0b91d36" data-title="">      <p id="00da6326">请勿使用插件管理器使用下载的zip从磁盘安装插件，因为zip文件不是有效的插件zip，并且包含几个打包在一起的插件。</p>   </aside>   <p id="e603bff0"> </p>   <p id="7b487974">该zip文件包含几个MPS插件，其中三个是必不可少的：</p>   <ul class="list _ul"><li class="list__item" id="8f021fa9"><p>mps-core-拥有MPS核心功能</p></li><li class="list__item" id="47353c6b"><p>mps-java-启用BaseLanguage及其扩展</p></li><li class="list__item" id="89613fdd"><p>mps-vcs-在IntelliJ IDEA中允许VCS用于MPS模型</p></li></ul>   <aside class="tip sideblock" rel="0c48de6b" id="cd5ffd09" data-title="">      <p id="04d025a0">请记住，每个MPS插件版本仅与IntelliJ IDEA的特定版本兼容。通常，最新发布的MPS插件与MPS发行时最新的IntelliJ IDEA版本以及以下IDEA次要版本兼容。MPS插件的EAP版本通常与当前的IntelliJ IDEA版本兼容。</p>      <p id="bb5030b8">IntelliJ IDEA中的插件管理器仅允许您访问兼容版本的MPS插件，因此，此选项始终是一个安全的选择。</p>      <p id="306617f7">如果您手动安装了不兼容版本的插件，IDEA将在启动过程中拒绝加载它，将记录错误并在插件管理器中将插件标记为红色。</p>   </aside>   <p id="73c0d1c5"> </p>   <p id="786f21b2">安装后，插件目录应如下所示：</p>   <p id="5ab66a56">      </p><figure><img alt="插头1" title="插头1" src="/help/img/idea/2019.2/Plug1.png" id="912f5aed" width="612" height="227"></figure>      <br>重新启动后，这将使IntelliJ IDEA中可以使用MPS和核心语言集。<p></p>   <h3 id="turnmpsonandoff">打开和关闭MPS</h3>   <p id="4ce0c16d">IntelliJ IDEA中的插件管理器现在应该列出几个MPS插件，您可以根据需要打开和关闭它们：</p>   <p id="33d5f373">      </p><figure><img alt="插头2" title="插头2" src="/help/img/idea/2019.2/Plug2.png" id="72fc39d6" width="763" height="313"></figure>   <p></p>   <h3 id="trybaselanguageinsideintellijidea">在IntelliJ IDEA中尝试BaseLanguage</h3>   <p id="8adad6b3">现在，您可以为IntelliJ IDEA项目启用MPS构面：</p>   <p id="953881fc">      </p><figure><img alt="iplug3" title="iplug3" src="/help/img/idea/2019.2/Iplug3.png" id="4cdcadaf" width="514" height="211"></figure>   <p></p>   <p id="66016d3c">构面提供了几个配置点，但是您很可能希望在首次实验时坚持默认设置。</p>   <p id="31f3aefa">      </p><figure><img alt="插头3" title="插头3" src="/help/img/idea/2019.2/Plug3.png" id="2c773245" width="706" height="413"></figure>   <p></p>   <p id="d13e0e2f">将MPS构面添加到项目的模块将在“ <i id="041dbb76">项目视图”中</i>创建<i id="2c24e069">模型</i>节点，并允许您创建MPS模型。如果没有，只需在“ <i id="615e7282">源”</i>选项卡上创建一个：</p>   <p id="0fcc6555">      </p><figure><img alt="插头4" title="插头4" src="/help/img/idea/2019.2/Plug4.png" id="ce52e781" width="706" height="413"></figure>      <br>您需要将其标记为<b id="b78ec19f">模型文件夹</b> （图标到文件夹应该变成蓝色的<i id="7e87a8b3">模型</i>旁边）：<p></p>   <p id="57cd2f9e">      </p><figure><img alt="插头5" title="插头5" src="/help/img/idea/2019.2/Plug5.png" id="376dda42" width="706" height="413"></figure>      <br>最后一步是将<i id="fb8904d2">models</i>文件夹标记为模块的<b id="b31e2088">Sources</b>目录：<p></p>   <p id="a78b6dcb">      </p><figure><img alt="插头6" title="插头6" src="/help/img/idea/2019.2/Plug6.png" id="9ad09d51" width="706" height="413"></figure>   <p></p>   <h3 id="playingwithmpsmodels">玩MPS模型</h3>   <p id="947aef55">一旦配置了MPS构面并具有标记为<b id="37c6bb9f">Model</b>以及<b id="12418b36">Sources Folders的</b>一个或多个<b id="9c20c05a">Model Root</b> ，就可以在其中创建模型：</p>   <p id="a94e5fcd">      </p><figure><img alt="插头7" title="插头7" src="/help/img/idea/2019.2/plug7.png" id="e364ea50" width="644" height="195"></figure>   <p></p>   <p id="35fe6081">创建新模型时，必须指定其名称，然后通过“ <i id="398bbeb4">创建新模型”</i>对话框选择可用的模型<i id="1af739e5">种类</i>之一：</p>   <p id="c50d966b">      </p><figure><img alt="插头8" title="插头8" src="/help/img/idea/2019.2/plug8.png" id="de87ac59" width="366" height="149"></figure>   <p></p>   <p id="08cef828">在这种情况下，每个模型<i id="a7132104">Kind</i>代表该模型的一组预先配置的使用语言。这是一个方便的快捷方式，仍然可以让您随时通过“ <i id="ff50e1bd">模型属性”</i>对话框中的“ <i id="4592587a">项目”视图</i>内的模型节点上按<i id="f91c8df6">F4</i>或<i id="47c041ea">Alt + Enter</i>来手动调整使用的语言列表：种类列表当前设置为包含仅这两个选项（Empty和Java），但将在以后的版本中进行配置。</p>   <p id="240fcc3f">右键单击模型将显示导入的模型和使用的语言：</p>   <p id="f551c760">      </p><figure><img alt="插头9" title="插头9" src="/help/img/idea/2019.2/plug9.png" id="12ade7d3" width="592" height="481"></figure>   <p></p>   <p id="9c19c004">MPS模型使您可以像在MPS本身中一样，从导入的语言创建新节点： <i id="1183aca5">Project View</i>中的<i id="79e8685e">模型节点</i>代表MPS模型的内容，就像在MPS中一样，它们类似于java包。您可以在其中创建模型元素（根）：</p>   <p id="3423fe4c">      </p><figure><img alt="插头10" title="插头10" src="/help/img/idea/2019.2/plug10.png" id="fb84b0a5" width="664" height="363"></figure>   <p></p>   <p id="a732f885">与我们创建新的MPS模型时类似，您为每个根元素命名并指定一个<i id="25b6ad37">kind</i> ，这即表示其MPS <i id="0137dcc1">概念</i> ：<br>       </p><figure><img alt="插头11" title="插头11" src="/help/img/idea/2019.2/plug11.png" id="0949747f" width="366" height="151"></figure>   <p></p>   <p id="423c876b">根节点显示在<i id="8f87946e">项目视图中</i> ，外观与IntelliJ IDEA中其他资源和文件的外观非常相似。可以通过双击根节点或按<i id="75dbc2f3">F4</i>来打开根节点的投影编辑器。</p>   <p id="623ecc96">      </p><figure><img alt="插头12" title="插头12" src="/help/img/idea/2019.2/plug12.png" id="64990dbb" width="493" height="196"></figure>   <p></p>   <h3 id="codegeneration">代码生成</h3>   <p id="0a503b18">MPS模型的代码过程与IntelliJ IDEA的<i id="ca473207">make / rebuild</i>项目动作相关，因此将自动触发。<br>可以配置将生成的源代码存储在何处。通过“ MPS构面设置”对话框进行配置。您可以选择三个选项：</p>   <ul class="list _ul"><li class="list__item" id="75005cd1"><p>生成的代码仅保留在内存中。它仅在编译过程中可用，而根本不会保存到磁盘</p></li><li class="list__item" id="e4bdb881"><p>可以将其保存到该模块的已配置源文件夹中</p></li><li class="list__item" id="82587dd6"><p>可以将其保存到磁盘上任何其他目录中</p></li></ul>   <p id="1e67cc29">      </p><figure><img alt="3 SetGeneratorOutputPath" title="3 SetGeneratorOutputPath" src="/help/img/idea/2019.2/3-SetGeneratorOutputPath.png" id="e7370d6e" width="1144" height="922"></figure>   <p></p>   <h3 id="installthelanguageplugin">安装语言插件</h3>   <p id="5e2e67e7">现在您可能迫不及待想要在IntelliJ IDEA中尝试自己的语言。您需要做的就是将插件zip文件解包到我们之前将核心插件解压缩到的IntelliJ IDEA的plugins文件夹中：</p>   <p id="5da6b9ce">      </p><figure><img alt="iplug6" title="iplug6" src="/help/img/idea/2019.2/Iplug6.png" id="4374f26a" width="497" height="313"></figure>   <p></p>   <p id="d9a48b26">此外，许多插件已通过<a href="http://plugins.intellij.net/?idea" rel="noopener noreferrer" data-external="true" target="_blank">IntelliJ IDEA插件存储库</a>共享，因此可以通过IDEA的插件管理器轻松下载。</p>   <p id="a9a9fc18">重新启动IntelliJ IDEA之后，您将能够将插件附带的语言添加到使用的语言列表中：</p>   <p id="9f746222">      </p><figure><img alt="插头14" title="插头14" src="/help/img/idea/2019.2/plug14.png" id="57e37710" width="786" height="628"></figure>   <p></p>   <p id="7c1a8d80">这应该足以使您的自定义语言在IntelliJ IDEA中使用。</p>   <h3 id="addingruntimelibraries">添加运行时库</h3>   <p id="3d555e15">您的语言通常会附带运行时对其他语言或解决方案的依赖。尽管它们通常打包为zip文件，然后打包为zip文件，但仍需要作为模块依赖项导入到IntelliJ IDEA中。一旦添加了具有运行时相关性的语言，MPS方面就会自动执行此操作。</p>   <p id="bc943fd1">      </p><figure><img alt="插头15" title="插头15" src="/help/img/idea/2019.2/plug15.png" id="67db6c99" width="926" height="647"></figure>   <p></p>   <aside class="tip sideblock" rel="bc943fd1" id="bd8f4f75" data-title="">      <p id="d896cb9d">如果需要手动添加运行时库，则这些依赖项（jar文件）的实际位置在IntelliJ IDEA的插件位置中的特定语言插件文件夹下。</p>   </aside>   <h3 id="interoperabilitybetweenjavaandbaselanguage">Java和BaseLanguage之间的互操作性</h3>   <p id="003c9f54">MPS IDEA插件将您的MPS代码紧密集成到Java项目的其余部分中。MPS代码将无缝参与IDEA的构建和制作，您可以交叉导航到Java和BaseLanguage之间的用法或定义，并且重构将正确地包括所有源。</p>   <h3 id="convertingjavacodetobaselanguage">将Java代码转换为BaseLanguage</h3>   <p id="48c9c730">MPS为您提供了一个方便的选项，可将Java代码快速转换为BaseLanguage并将其迁移到MPS模型中。只需右键单击所需的Java包，然后选择<i id="3ece56ac">Convert Java to MPS</i> 。</p>   <p id="83ae59dd">      </p><figure><img alt="兑换" title="兑换" src="/help/img/idea/2019.2/Convert.png" id="66c40968" width="465" height="243"></figure>   <p></p>   <h3 id="mpsconfiurationoptions">MPS配置选项</h3>   <p id="8297441e">就像MPS本身一样，可以使用“ <i id="d7eeabcd">设置”</i>对话框来配置和自定义MPS插件，您可以通过菜单，工具栏或键盘快捷键（Control + Alt + S / Cmd +，）来调用该对话框。MPS在IntelliJ IDEA的<i id="329bbe0c">“设置”</i>对话框中添加了几个配置屏幕，可让您配置MPS行为的几个方面。</p>   <p id="dec44f43">      <br>       </p><figure><img alt="编辑器配置" title="编辑器配置" src="/help/img/idea/2019.2/EditorConfig.png" id="a6555f25" width="1828" height="1056"></figure>   <p></p>   <p id="4d21b28d">      </p><figure><img alt="StyleConfig" title="StyleConfig" src="/help/img/idea/2019.2/StyleConfig.png" id="bf4b4829" width="909" height="666"></figure>   <p></p>   <h3 id="configurethegenerator">配置生成器</h3>   <p id="2aba2a89">此外，您需要确保<i id="653e7659">IDEA编译器</i>设置中的“ <i id="3984abe1">使用外部构建”</i>标志已关闭，否则您将无法重建项目。</p>   <p id="0105cb58">      </p><figure><img alt="genImg2" title="genImg2" src="/help/img/idea/2019.2/genImg2.png" id="9a37a4b3" width="1222" height="400"></figure>   <p></p><div class="last-modified" data-skip-index="skip">上次修改时间：2019年8月30日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="building-intellij-idea-language-plugins.html">构建IntelliJ IDEA语言插件</a> <a class="navigation-links__next" href="building-mps-language-plugins.html">构建MPS语言插件</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>