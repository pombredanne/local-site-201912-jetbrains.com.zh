<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Using MPS inside IntelliJ IDEA - Help | MPS</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Using+MPS+inside+IntelliJ+IDEA.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search MPS Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Default</option><option data-group="primary" value="primary_default_for_gnome">Default for GNOME</option><option data-group="primary" value="primary_default_for_kde">Default for KDE</option><option data-group="primary" value="primary_default_for_xwin">Default for XWin</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="primary" value="primary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_jbuilder">JBuilder</option><option data-group="primary" value="primary_mac_os_x">Mac OS X</option><option data-group="primary" value="primary_mac_os_x_10.5_">Mac OS X 10.5+</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_default">Default</option><option data-group="secondary" value="secondary_default_for_gnome">Default for GNOME</option><option data-group="secondary" value="secondary_default_for_kde">Default for KDE</option><option data-group="secondary" value="secondary_default_for_xwin">Default for XWin</option><option data-group="secondary" value="secondary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="secondary_emacs">Emacs</option><option data-group="secondary" value="secondary_jbuilder">JBuilder</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Mac OS X 10.5+</option><option data-group="secondary" value="secondary_netbeans">NetBeans</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Using+MPS+inside+IntelliJ+IDEA.html" id="using-mps-inside-intellij-idea.xml">Using MPS inside IntelliJ IDEA</h1>   <p id="305ea7c6">We are going to show how to use MPS languages inside IntelliJ IDEA in this document. You may also like to check out <a href="https://www.youtube.com/watch?v=lhmEg095-4Q" data-external="true" target="_blank" rel="noopener noreferrer">the screen-cast covering this topic</a>.</p>   <p id="6e95b247">      <i id="ed300f50">Note: Please make sure you have IntelliJ</i>       <i id="06b9cd91"></i>&nbsp;<i id="c7851949">installed. Both Community and Ultimate Edition would work.</i>   </p>   <h3 id="getthempscoreintellijideaplugin">Get the MPS core IntelliJ IDEA plugin</h3>   <p id="ea67ef64">Download the <b id="37ab4b15">MPS IntelliJ IDEA plugin</b> from the <a href="http://jetbrains.com/mps/download" data-external="true" target="_blank" rel="noopener noreferrer">MPS download page</a>&nbsp;or install it directly using IntelliJ IDEA's <b id="15c96e73">plugin manager</b>. If installing manually, the downloaded plugin zip file must be unzipped into the IDEA's plugin folder.</p>   <ul class="list _ul"><li class="list__item" id="00cf85d5"><p>         <b id="717cea1d">Windows and Linux:</b> typically <i id="69dbf727">USER_HOME/IDEA_version/config/plugins</i> or <i id="912d1270">IDEA_HOME/plugins</i>      </p></li><li class="list__item" id="a6a18b99"><p>         <b id="2264af4f">MacOS:</b>          <i id="a8c86c95">~/Library/Application Support/Idea_version/</i> or <i id="97b27c0e">IDEA_HOME/plugins</i>      </p></li></ul>   <aside class="warning " data-title="" rel="d7d8d101" id="c0b91d36">      <p id="00da6326">Do not use the plugin manager to install the plugin from disk using the downloaded zip, since the zip file is not a valid plugin zip and it contains several plugins packaged together.</p>   </aside>   <p id="e603bff0">&nbsp;</p>   <p id="7b487974">The zip file holds several MPS plugins, three of which are essential:</p>   <ul class="list _ul"><li class="list__item" id="8f021fa9"><p>mps-core - holds the core MPS functionality</p></li><li class="list__item" id="47353c6b"><p>mps-java - enables BaseLanguage and its extensions</p></li><li class="list__item" id="89613fdd"><p>mps-vcs - allows VCS for MPS models in IntelliJ IDEA</p></li></ul>   <aside class="tip sideblock" data-title="" rel="0c48de6b" id="cd5ffd09">      <p id="04d025a0">Please, bear in mind that each MPS plugin version is compatible only with a particular version of IntelliJ IDEA. Typically, the latest released MPS plugin is compatible with the IntelliJ IDEA version that was latest at the time of the MPS release and the following IDEA minor versions. The EAP versions of the MPS plugin are usually compatible with the current IntelliJ IDEA version.</p>      <p id="bb5030b8">The plugin manager in IntelliJ IDEA will only give you access to a compatible version of the MPS plugin, so this option is always a safe bet.</p>      <p id="306617f7">If you manually install an incompatible version of the plugin, IDEA will refuse to load it during start up, will log an error and mark the plugin in red in the plugin manager.</p>   </aside>   <p id="73c0d1c5">&nbsp;</p>   <p id="786f21b2">After installation, the plugin directory should look something like this:</p>   <p id="5ab66a56">      <figure><img alt="Plug1" title="Plug1" src="/help/img/idea/2019.2/Plug1.png" id="912f5aed" width="612" height="227"></figure>      <br> This will enable MPS and the core set of languages to be available inside IntelliJ IDEA once you restart it.</p>   <h3 id="turnmpsonandoff">Turn MPS on and off</h3>   <p id="4ce0c16d">The Plugin Manager in IntelliJ IDEA should now list several MPS plugins, which you can turn on and off as needed:</p>   <p id="33d5f373">      <figure><img alt="Plug2" title="Plug2" src="/help/img/idea/2019.2/Plug2.png" id="72fc39d6" width="763" height="313"></figure>   </p>   <h3 id="trybaselanguageinsideintellijidea">Try BaseLanguage inside IntelliJ IDEA</h3>   <p id="8adad6b3">You can now enable the MPS facet for your IntelliJ IDEA projects:</p>   <p id="953881fc">      <figure><img alt="Iplug3" title="Iplug3" src="/help/img/idea/2019.2/Iplug3.png" id="4cdcadaf" width="514" height="211"></figure>   </p>   <p id="66016d3c">The facet offers several configuration points, but you most likely want to stick to the default settings for your first experiments.</p>   <p id="31f3aefa">      <figure><img alt="Plug3" title="Plug3" src="/help/img/idea/2019.2/Plug3.png" id="2c773245" width="706" height="413"></figure>   </p>   <p id="d13e0e2f">Adding the MPS facet to a project's module will create a <i id="2c24e069">models</i> node in the <i id="041dbb76">Project View</i> and allow you to create MPS models. If not, just create one on the <i id="615e7282">Sources</i> tab:</p>   <p id="0fcc6555">      <figure><img alt="Plug4" title="Plug4" src="/help/img/idea/2019.2/Plug4.png" id="ce52e781" width="706" height="413"></figure>      <br> You need to mark it as a <b id="b78ec19f">Model Folder</b> (the icon next to the <i id="7e87a8b3">models</i> folder should turn blue):</p>   <p id="57cd2f9e">      <figure><img alt="Plug5" title="Plug5" src="/help/img/idea/2019.2/Plug5.png" id="376dda42" width="706" height="413"></figure>      <br> The final step is to mark the <i id="fb8904d2">models</i> folder as a <b id="b31e2088">Sources</b> directory of the module:</p>   <p id="a78b6dcb">      <figure><img alt="Plug6" title="Plug6" src="/help/img/idea/2019.2/Plug6.png" id="9ad09d51" width="706" height="413"></figure>   </p>   <h3 id="playingwithmpsmodels">Playing with MPS models</h3>   <p id="947aef55">Once the MPS facet is configured and has one or more <b id="9c20c05a">Model Roots</b> marked <b id="37c6bb9f">Model</b> as well as <b id="12418b36">Sources Folders</b>, you can create models in them:</p>   <p id="a94e5fcd">      <figure><img alt="plug7" title="plug7" src="/help/img/idea/2019.2/plug7.png" id="e364ea50" width="644" height="195"></figure>   </p>   <p id="35fe6081">When creating a new model, you have to specify its name and choose one of the available model <i id="1af739e5">Kinds</i> through the <i id="398bbeb4">Create New Model</i> dialog:</p>   <p id="c50d966b">      <figure><img alt="plug8" title="plug8" src="/help/img/idea/2019.2/plug8.png" id="de87ac59" width="366" height="149"></figure>   </p>   <p id="08cef828">Each model <i id="a7132104">Kind</i> in this case represents a preconfigured set of used languages for the model. This is a convenient shorthand that still allows you to tune the list of used languages manually at any time through the <i id="ff50e1bd">Model Properties</i> dialog by pressing <i id="f91c8df6">F4</i> or <i id="47c041ea">Alt+Enter</i> on the model node inside the <i id="4592587a">Project View</i>: The list of Kinds is currently set to contain only these two options (Empty and Java), but will be configurable in the future releases.</p>   <p id="240fcc3f">Right-clicking on a model will display the imported models and used languages:</p>   <p id="f551c760">      <figure><img alt="plug9" title="plug9" src="/help/img/idea/2019.2/plug9.png" id="12ade7d3" width="592" height="481"></figure>   </p>   <p id="9c19c004">The MPS models let you create new nodes from the imported languages the same way you would do it in MPS itself: <i id="79e8685e">Model Nodes</i> in the <i id="1183aca5">Project View</i> represent the content of MPS models and just like in MPS they are similar to java packages. You can create model elements (Roots) in them:</p>   <p id="3423fe4c">      <figure><img alt="plug10" title="plug10" src="/help/img/idea/2019.2/plug10.png" id="fb84b0a5" width="664" height="363"></figure>   </p>   <p id="a732f885">Similarly to when we were creating new MPS models, you give each root element a name and a <i id="25b6ad37">kind</i>, which now means its MPS <i id="0137dcc1">Concept</i>:<br>       <figure><img alt="plug11" title="plug11" src="/help/img/idea/2019.2/plug11.png" id="0949747f" width="366" height="151"></figure>   </p>   <p id="423c876b">The root nodes are displayed in the <i id="8f87946e">Project View</i> and look very similar to how other resources and files look in IntelliJ IDEA. The projectional editor for a root node can be opened by double-clicking on the root node or by pressing <i id="75dbc2f3">F4</i>.</p>   <p id="623ecc96">      <figure><img alt="plug12" title="plug12" src="/help/img/idea/2019.2/plug12.png" id="64990dbb" width="493" height="196"></figure>   </p>   <h3 id="codegeneration">Code generation</h3>   <p id="0a503b18">The code process of MPS models is tied to the IntelliJ IDEA's <i id="ca473207">make/rebuild</i> project actions and so will be triggerred automatically.<br> It's possible to configure where to store the generated source code. This is configured through the MPS facet settings dialog. There are three options you can choose from:</p>   <ul class="list _ul"><li class="list__item" id="75005cd1"><p>The generated code stays in memory only. It will be available during the compilation process only and never saved to disk at all</p></li><li class="list__item" id="e4bdb881"><p>It can be saved into a configured source folder of this module</p></li><li class="list__item" id="82587dd6"><p>It can be saved into any other directory wherever on the disk</p></li></ul>   <p id="1e67cc29">      <figure><img alt="3 SetGeneratorOutputPath" title="3 SetGeneratorOutputPath" src="/help/img/idea/2019.2/3-SetGeneratorOutputPath.png" id="e7370d6e" width="1144" height="922"></figure>   </p>   <h3 id="installthelanguageplugin">Install the language plugin</h3>   <p id="5e2e67e7">Now you probably can't wait to try out your own language inside IntelliJ IDEA. All you need to do is to unpackage the plugin zip file into the same IntelliJ IDEA's plugins folder that we unzipped the core plugin into earlier:</p>   <p id="5da6b9ce">      <figure><img alt="Iplug6" title="Iplug6" src="/help/img/idea/2019.2/Iplug6.png" id="4374f26a" width="497" height="313"></figure>   </p>   <p id="d9a48b26">Additionally, many of the plugins have been shared through the <a href="http://plugins.intellij.net/?idea" data-external="true" target="_blank" rel="noopener noreferrer">IntelliJ IDEA plugin repository</a> and so can be comfortably downloaded through the IDEA's plugin manager.</p>   <p id="a9a9fc18">After you restart IntelliJ IDEA, you will be able to add your language(s) that came through the plugin to the list of used languages:</p>   <p id="9f746222">      <figure><img alt="plug14" title="plug14" src="/help/img/idea/2019.2/plug14.png" id="57e37710" width="786" height="628"></figure>   </p>   <p id="7c1a8d80">This should be enough to enable your custom language(s) for use inside IntelliJ IDEA.</p>   <h3 id="addingruntimelibraries">Adding runtime libraries</h3>   <p id="3d555e15">Your languages will typically come with runtime dependencies on other languages or solutions. Although they typically come bundled as jar files inside the plugin zip file, they need to be imported as module dependencies into IntelliJ IDEA.. The MPS facet does that automatically once you add a language with a runtime dependency.</p>   <p id="bc943fd1">      <figure><img alt="plug15" title="plug15" src="/help/img/idea/2019.2/plug15.png" id="67db6c99" width="926" height="647"></figure>   </p>   <aside class="tip sideblock" data-title="" rel="bc943fd1" id="bd8f4f75">      <p id="d896cb9d">In case you needed to add run-time libraries manually, the real location of these dependencies (jar files) is under the particular language plugin folder in the IntelliJ IDEA's plugins location.</p>   </aside>   <h3 id="interoperabilitybetweenjavaandbaselanguage">Interoperability between Java and BaseLanguage</h3>   <p id="003c9f54">The MPS IDEA plugin integrates your MPS code tightly into the rest of the Java project. MPS code will seamlessly participate in IDEA's build and make, you can cross-navigate to usages or definitions between Java and BaseLanguage as well as refactorings will correctly include all the sources.</p>   <h3 id="convertingjavacodetobaselanguage">Converting Java code to BaseLanguage</h3>   <p id="48c9c730">MPS gives you a convenient option to quickly convert Java code to BaseLanguage and migrate it into an MPS model. Just right-click on the desired Java package and select <i id="3ece56ac">Convert Java to MPS</i>.</p>   <p id="83ae59dd">      <figure><img alt="Convert" title="Convert" src="/help/img/idea/2019.2/Convert.png" id="66c40968" width="465" height="243"></figure>   </p>   <h3 id="mpsconfiurationoptions">MPS confiuration options</h3>   <p id="8297441e">Just like MPS itself, the MPS plugin can be configured and customized using the&nbsp;<i id="d7eeabcd">Settings</i>&nbsp;dialog, which you can invoke through the menu, a toolbar or using a keyboard shortcut (Control + Alt + S / Cmd + ,). MPS has added a couple of configuration screens to the IntelliJ IDEA's <i id="329bbe0c">Settings</i> dialog, which allow you to configure several aspects of how MPS behaves.</p>   <p id="dec44f43">      <br>       <figure><img alt="EditorConfig" title="EditorConfig" src="/help/img/idea/2019.2/EditorConfig.png" id="a6555f25" width="1828" height="1056"></figure>   </p>   <p id="4d21b28d">      <figure><img alt="StyleConfig" title="StyleConfig" src="/help/img/idea/2019.2/StyleConfig.png" id="bf4b4829" width="909" height="666"></figure>   </p>   <h3 id="configurethegenerator">Configure the generator</h3>   <p id="2aba2a89">Additionally, you need to make sure the&nbsp;<i id="3984abe1">Use external build</i>&nbsp;flag in the&nbsp;<i id="653e7659">IDEA Compiler</i>&nbsp;settings is turned off, otherwise you won't be able to rebuild your project.</p>   <p id="0105cb58">      <figure><img alt="genImg2" title="genImg2" src="/help/img/idea/2019.2/genImg2.png" id="9a37a4b3" width="1222" height="400"></figure>   </p><div class="last-modified" data-skip-index="skip">Last modified: 30 August 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="building-intellij-idea-language-plugins.html">Building IntelliJ IDEA language plugins</a><a class="navigation-links__next" href="building-mps-language-plugins.html">Building MPS language plugins</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>