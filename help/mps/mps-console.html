<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Console - Help | MPS</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Console.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search MPS Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Default</option><option data-group="primary" value="primary_default_for_gnome">Default for GNOME</option><option data-group="primary" value="primary_default_for_kde">Default for KDE</option><option data-group="primary" value="primary_default_for_xwin">Default for XWin</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="primary" value="primary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_jbuilder">JBuilder</option><option data-group="primary" value="primary_mac_os_x">Mac OS X</option><option data-group="primary" value="primary_mac_os_x_10.5_">Mac OS X 10.5+</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_default">Default</option><option data-group="secondary" value="secondary_default_for_gnome">Default for GNOME</option><option data-group="secondary" value="secondary_default_for_kde">Default for KDE</option><option data-group="secondary" value="secondary_default_for_xwin">Default for XWin</option><option data-group="secondary" value="secondary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="secondary_emacs">Emacs</option><option data-group="secondary" value="secondary_jbuilder">JBuilder</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Mac OS X 10.5+</option><option data-group="secondary" value="secondary_netbeans">NetBeans</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Console.html" id="mps-console.xml">Console</h1>   <p id="c698917b">      <i id="26fba975">Console</i> is a tool which allows developers to conveniently run DSL code directly in the MPS environment against the active models. It enables you to quickly query the model and change it. You can trigger actions against your models or study statistics about your project.</p>   <p id="c0af9424">For example, you can quickly get all (or some) instances of a (deprecated) concept and migrate them to a new concept:</p>   <div class="code-block" data-lang="none">#instances(TryStatement).where({~it =&gt; it.catchClause.isNotEmpty; }).refactor({~node =&gt; 
  if (node.body.statement.size &gt; 5) { 
    node.replace with new(TryCatchStatement); 
  } 
})</div>   <p id="e9d60b05">The <i id="591c46a8">Console</i>&nbsp;tool window allows line-by-line execution of any DSL construction in the realtime. After the command is written in the console, it is generated by the MPS generator and executed in the IDE's context. This way the code in the console can access and modify the program's AST, display project statistic, execute IDE actions, launch code generation or initiate classes reloading.</p>   <p id="141fd321">For discoverability reasons, most of the console-specific DSL constructs start with symbol '<b id="812ee615">#</b>'. Code-completion (<i id="f8e75ce6">Control + Space</i>) assists developers to insert code in the console.</p>   <aside class="tip sideblock" data-title="" rel="141fd321" id="9f680038">      <p id="b8abfb77">We shot a short informative <a href="https://youtu.be/nPQ-3o7MfPc" data-external="true" target="_blank" rel="noopener noreferrer">screen-cast about using the MPS Console</a> to investigate and update the user models. Check it out!</p>   </aside>   <p id="927190db">&nbsp;</p>   <p id="73ef27ce">In general, there are 3 kinds of commands:</p>   <ol class="list _decimal"><li class="list__item" id="e9627300"><p>         <i id="7131abc3">BaseLanguage</i> statement lists. These commands can contain any <i id="99f2daca">BaseLanguage</i> constructions. If some construction or class is not available in completion, it may not have been imported. Missing imports can easily be added as in the normal editor, using actions 'Add model import', 'Add model import by root', 'Add language import', or by the corresponding keyboard shortcuts.<br>          <figure><img alt="blcommand1" title="blcommand1" src="/help/img/idea/2019.2/blcommand1.png" id="884fced3" width="560" height="251"></figure>         <br>          <figure><img alt="blcommand2" title="blcommand2" src="/help/img/idea/2019.2/blcommand2.png" id="76f2bfc1" width="563" height="313"></figure>      </p></li><li class="list__item" id="39967f8e"><p>         <i id="4ac5fdd0">BaseLanguage</i> expressions. Expression is evaluated and, if its type is not void, printed in console as text, AST, or interactive response.<br>          <img alt="blexpression" title="blexpression" src="/help/img/idea/2019.2/blexpression.png" id="a0eac304" width="125" height="30" class="inline-icon-125">      </p></li><li class="list__item" id="7ffc7ec5"><p>Non-BaseLanguage commands. These are simple non-customizable commands, such as <b id="215bdfa9">#reloadClasses</b>.</p></li></ol>   <h3 id="consolecommands">Console commands</h3>   <p id="e83fb946">There is also a set of languages containing the console commands and <i id="c73cfd1f">BaseLanguage</i> constructions, which allow developers to easily make custom refactorings, complex usages search etc.</p>   <p id="b2639fd6">      <figure><a class="lightbox" href="/help/img/idea/2019.2/ConsoleCommandsHelp.png"><img alt="ConsoleCommandsHelp" title="ConsoleCommandsHelp" src="/help/img/idea/2019.2/ConsoleCommandsHelp.png" id="1657a86d" width="500" height="1482"></a></figure>   </p>   <ol class="list _decimal"><li class="list__item" id="09d6eeef">         <p id="83204956">            <i id="1e08349c">BaseLanguage</i> constructions for iterating over IDE objects (<b id="a82bcd14">#nodes</b>, <b id="d1e4f9cf">#references</b>, <b id="97643d25">#models</b>, <b id="1f406ed6">#modules</b>). These expressions are lazy sequences, including all nodes/references/models/modules in project or in custom scope.<br>             <figure><img alt="nodes" title="nodes" src="/help/img/idea/2019.2/nodes.png" id="700c3409" width="710" height="70"></figure>         </p>         <aside class="tip sideblock" data-title="" rel="83204956" id="ae3a6ffd">            <p id="8a57cd28">               <i id="f7a4e80e">To inspect read-only modules and models, such as imported libraries and used languages, you need to include the</i>                <b id="d2d6c1bf">                  <i id="109f2f49">r/o+</i>               </b>                <i id="75918073">parameter to the desired search scope.</i>            </p>         </aside>      </li><li class="list__item" id="8273c6f1"><p>         <i id="0124c831">BaseLanguage</i> constructions for usages searching (<b id="bde92a92">#usages</b>, <b id="b5c0077a">#instances</b>). These expressions are also sequences, which can be iterated over, but not lazy. When these expressions are evaluated, find usages mechanism is called, so it runs faster then iterating over all nodes or references and then filtering by concept/target.<br>          <figure><img alt="usages" title="usages" src="/help/img/idea/2019.2/usages.png" id="dfbe84d6" width="628" height="62"></figure>      </p></li><li class="list__item" id="abdc1503"><p>Commands for quering data from the IDE (<b id="156cc514">#stat</b>, <b id="88825957">#showBrokenRefs</b>, <b id="b6493d4f">#showGenPlan</b>)</p></li><li class="list__item" id="e7942747">         <p id="d8fd1639">Commands for interacting with the IDE (<b id="2d5e7db1">#reloadClasses</b>, <b id="759b2da7">#make</b>, <b id="ded30fb9">#clean</b>, <b id="674d4dcc">#removeGenSources</b>)&nbsp;</p>         <aside class="tip sideblock" data-title="" rel="d8fd1639" id="a2b36397">            <p id="f98cdff6">Te initiate a <b id="4a10ff1b">rebuild</b> of a model, first invoke #<i id="9ac70d3a">clean</i> followed by <i id="49818c5e">#make</i>.</p>         </aside>      </li><li class="list__item" id="d826a43b">         <i id="4a612556">BaseLanguage</i> constructions for showing results to user<ul class="list _ul"><li class="list__item" id="a805cbec"><p>               <b id="87d3ffaf">#show</b> expression opens usages view and shows there nodes, models or modules from sequence passed to the expression as a parameter.</p></li><li class="list__item" id="980e683f">               <b id="f9ab1231">#print</b> expression writes result to the console. There are also specialized versions of this construction:<ul class="list _ul"><li class="list__item" id="342b9fd6"><p>                     <b id="48f0e4fd">#printText</b> converts result to string and add it to the response.</p></li><li class="list__item" id="cb1e9243"><p>                     <b id="de2bf776">#printNode</b> is applicable only to nodes. This construction adds to response the whole node and its subnodes. Since the response is also part of the AST, the node is displayed with its normal editor.</p></li><li class="list__item" id="e2d8a7b6"><p>                     <b id="818e4b43">#printNodeRef</b> makes sense with only nodes locates in the project models. This construction prints to the console an interactive response, which can be clicked on in order to open the node in the editor.</p></li><li class="list__item" id="28179169"><p>                     <b id="b8b5a964">#printSeq</b> is applicable to collections of nodes, models or modules. This command prints to the console an interactive response, which describes the size of the collection. When the response is clicked on, the usage view opens to show the nodes or the models.</p></li><li class="list__item" id="ba71116d"><p>                     <b id="f9059624">#print</b> expression is a universal construction, which tries to choose the most appropriate way of displaying its argument, according to its type and value</p></li></ul>            </li></ul>      </li><li class="list__item" id="4988a9d3"><p>         <b id="cca2b54e">refactor</b> operation. This operation applies a function to sequence of nodes (like <b id="b08c8140">forEach</b> operation), but before that it opens the found nodes in the usages view, where user can review the nodes before the refactoring is started and manually select the nodes to include/exclude in the refactoring and then apply or cancel the refactoring.<br>          <figure><img alt="refactor" title="refactor" src="/help/img/idea/2019.2/refactor.png" id="03150835" width="770" height="99"></figure>      </p></li></ol>   <p id="a6d67923">Additionally, the console languages can be extended by the user, if needed.</p>   <aside class="tip sideblock" data-title="" rel="a6d67923" id="b1afbce4">      <p id="ca559481">The model-querying commands used in the Console are defined in the <i id="cd157611">jetbrains.mps.lang.smodel.query</i> language. After importing the language you can use the commands in code to programmatically access and query the models, as well. Details can be found in the <a href="smodel-language-queries.html">smodel queries documentation</a>.</p>   </aside>   <h3 id="scopesofconsolequeries">Scopes of Console queries</h3>   <p id="1b6858f8">Queries can have scope specified to constraint the area of the repository to search. The scope is specified in pointy brackets:</p>   <p id="c07f1e33">      <figure><img alt="mps completion" title="mps completion" src="/help/img/idea/2019.2/mps-completion.png" id="67e0b995" width="575" height="191"></figure>      <br>   </p>   <ul class="list _ul"><li class="list__item" id="f0b62c8d"><p>         <b id="743f3b30">project</b> - only the modules in the current project</p></li><li class="list__item" id="db851fd3"><p>         <b id="4f2dea1c">editable</b> - only editable models in the current project (this is the default scope used when no scope is specified explicitly)</p></li><li class="list__item" id="337f16de"><p>         <b id="a2645133">global</b> - the whole module repository&nbsp;</p></li><li class="list__item" id="bc6bfa93"><p>         <b id="17a111d0">visible</b> - only visible modules from global repository&nbsp;</p></li><li class="list__item" id="5100a5af"><p>         <b id="9f28b71c">modules</b> - restrict to the listed modules</p></li><li class="list__item" id="73a16ef4"><p>         <b id="9d22b84c">models</b> - restrict to the listed models</p></li><li class="list__item" id="865dea59"><p>         <b id="62a180a8">custom</b> - use the provided Java Scope class to filter the modules</p></li></ul>   <h3 id="copyingnodesintoconsole">Copying nodes into Console</h3>   <p id="649fd9bd">In order to point to a concrete node in project from the console, this node can be copied from the editor and then pasted into the console. The node will be pasted as a special construction, called&nbsp;<b id="22352611">nodeRef</b>, with is a <i id="8aa528ec">BaseLanguage</i> expression of type <b id="44b259b2">node&lt;&gt;</b>, with value of the pasted node. If there is a necessity to paste the piece of code as is, the 'Paste Original Node' action is available from the context menu.<br>       <figure><img alt="noderef" title="noderef" src="/help/img/idea/2019.2/noderef.png" id="18099e51" width="679" height="428"></figure>   </p><div class="last-modified" data-skip-index="skip">Last modified: 30 August 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="other-languages.html">Other languages</a><a class="navigation-links__next" href="debugger.html">Debugger</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>