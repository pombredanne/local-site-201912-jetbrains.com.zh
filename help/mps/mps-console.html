<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>控制台-帮助| MPS</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Console.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索MPS帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected>默认</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_mac_os_x" data-group="primary">Eclipse（Mac OS X）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_mac_os_x" data-group="primary">Mac OS X</option><option value="primary_mac_os_x_10.5_" data-group="primary">Mac OS X 10.5以上</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_default" data-group="secondary">默认</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_jbuilder" data-group="secondary">JBuilder的</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5以上</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="mps-console.xml" data-toc="Console.html">安慰</h1>   <p id="c698917b">      <i id="26fba975">控制台</i>是使开发人员能够针对活动模型直接在MPS环境中直接方便地运行DSL代码的工具。它使您可以快速查询模型并进行更改。您可以针对模型触发操作或研究有关项目的统计信息。</p>   <p id="c0af9424">例如，您可以快速获取（不建议使用的）概念的所有（或某些）实例并将其迁移到新概念：</p>   <div class="code-block" data-lang="none">#instances（TryStatement）.where（{〜it => it.catchClause.isNotEmpty;}）。refactor（{〜node => if（node.body.statement.size> 5）{node.replace用new（TryCatchStatement） ;}}）</div>   <p id="e9d60b05"><i id="591c46a8">控制台</i>工具窗口允许实时逐行执行任何DSL构建。在控制台中写入命令后，该命令由MPS生成器生成并在IDE的上下文中执行。这样，控制台中的代码可以访问和修改程序的AST，显示项目统计信息，执行IDE操作，启动代码生成或启动类重新加载。</p>   <p id="141fd321">出于可发现性的原因，大多数特定于控制台的DSL构造都以符号“ <b id="812ee615">＃</b> ”开头。代码完成（ <i id="f8e75ce6">Control + Space</i> ）可帮助开发人员在控制台中插入代码。</p>   <aside class="tip sideblock" rel="141fd321" id="9f680038" data-title="">      <p id="b8abfb77">我们拍摄了简短的信息<a href="https://youtu.be/nPQ-3o7MfPc" rel="noopener noreferrer" data-external="true" target="_blank">屏幕</a>快照， <a href="https://youtu.be/nPQ-3o7MfPc" rel="noopener noreferrer" data-external="true" target="_blank">内容涉及使用MPS控制台</a>调查和更新用户模型。看看这个！</p>   </aside>   <p id="927190db"> </p>   <p id="73ef27ce">通常，有3种命令：</p>   <ol class="list _decimal"><li class="list__item" id="e9627300"><p>         <i id="7131abc3">BaseLanguage</i>语句列表。这些命令可以包含任何<i id="99f2daca">BaseLanguage</i>构造。如果无法完成某些构造或类，则可能尚未导入。可以像在普通编辑器中一样，使用“添加模型导入”，“通过根目录添加模型导入”，“添加语言导入”或相应的键盘快捷键轻松添加缺少的导入。<br>          </p><figure><img alt="blcommand1" title="blcommand1" src="/help/img/idea/2019.2/blcommand1.png" id="884fced3" width="560" height="251"></figure>         <br>          <figure><img alt="blcommand2" title="blcommand2" src="/help/img/idea/2019.2/blcommand2.png" id="76f2bfc1" width="563" height="313"></figure>      <p></p></li><li class="list__item" id="39967f8e"><p>         <i id="4ac5fdd0">BaseLanguage</i>表达式。对表达式求值，如果表达式的类型不为空，则将其作为文本，AST或交互式响应打印在控制台中。<br>          <img alt="压抑" title="压抑" src="/help/img/idea/2019.2/blexpression.png" id="a0eac304" width="125" height="30" class="inline-icon-125">      </p></li><li class="list__item" id="7ffc7ec5"><p>非BaseLanguage命令。这些是简单的不可自定义的命令，例如<b id="215bdfa9">#reloadClasses</b> 。</p></li></ol>   <h3 id="consolecommands">控制台命令</h3>   <p id="e83fb946">还有一组包含控制台命令和<i id="c73cfd1f">BaseLanguage</i>构造的语言，使开发人员可以轻松进行自定义重构，复杂的用法搜索等。</p>   <p id="b2639fd6">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/ConsoleCommandsHelp.png"><img alt="ConsoleCommands帮助" title="ConsoleCommands帮助" src="/help/img/idea/2019.2/ConsoleCommandsHelp.png" id="1657a86d" width="500" height="1482"></a></figure>   <p></p>   <ol class="list _decimal"><li class="list__item" id="09d6eeef">         <p id="83204956">            <i id="1e08349c">BaseLanguage</i>构造用于遍历对象<b id="a82bcd14"><b id="d1e4f9cf"><b id="97643d25"><b id="1f406ed6">IDE（#nodes，#references，#models，#modules）。</b></b></b></b>这些表达式是惰性序列，包括项目或自定义范围中的所有节点/引用/模型/模块。<br>             </p><figure><img alt="节点" title="节点" src="/help/img/idea/2019.2/nodes.png" id="700c3409" width="710" height="70"></figure>         <p></p>         <aside class="tip sideblock" rel="83204956" id="ae3a6ffd" data-title="">            <p id="8a57cd28">               <i id="f7a4e80e">要检查只读模块和模型，例如导入的库和使用的语言，您需要将</i> <b id="d2d6c1bf"><i id="109f2f49">r / o +</i></b> <i id="75918073">参数包括在所需的搜索范围内。</i>            </p>         </aside>      </li><li class="list__item" id="8273c6f1"><p>         用于用法搜索的<i id="0124c831">BaseLanguage</i>构造（ <b id="bde92a92">#usages</b> ， <b id="b5c0077a">#instances</b> ）。这些表达式也是序列，可以迭代但不能延迟。对这些表达式进行求值时，将调用find usages机制，因此它运行得更快，然后遍历所有节点或引用，然后按概念/目标进行过滤。<br>          </p><figure><img alt="用法" title="用法" src="/help/img/idea/2019.2/usages.png" id="dfbe84d6" width="628" height="62"></figure>      <p></p></li><li class="list__item" id="abdc1503"><p>用于从IDE <b id="156cc514">查询</b>数据的命令（ <b id="156cc514">#stat</b> ， <b id="88825957">#showBrokenRefs</b> ， <b id="b6493d4f">#showGenPlan</b> ）</p></li><li class="list__item" id="e7942747">         <p id="d8fd1639">对于与IDE交互命令<b id="2d5e7db1">（#reloadClasses，</b> <b id="759b2da7">了<b id="ded30fb9"><b id="674d4dcc">#make，#clean，#removeGenSources）</b></b></b></p>         <aside class="tip sideblock" rel="d8fd1639" id="a2b36397" data-title="">            <p id="f98cdff6">特发起<b id="4a10ff1b">重建</b>模式，首先调用＃ <i id="9ac70d3a">清洁</i>之后<i id="49818c5e">了#make。</i></p>         </aside>      </li><li class="list__item" id="d826a43b">         用于向用户显示结果的<i id="4a612556">BaseLanguage</i>构造<ul class="list _ul"><li class="list__item" id="a805cbec"><p>               <b id="87d3ffaf">#show</b> expression将打开使用情况视图，并在其中显示作为参数传递到表达式的序列中的节点，模型或模块。</p></li><li class="list__item" id="980e683f">               <b id="f9ab1231">#print</b>表达式将结果写入控制台。此构造也有专门的版本：<ul class="list _ul"><li class="list__item" id="342b9fd6"><p>                     <b id="48f0e4fd">#printText</b>将结果转换为字符串，并将其添加到响应中。</p></li><li class="list__item" id="cb1e9243"><p>                     <b id="de2bf776">#printNode</b>仅适用于节点。这种构造增加了对整个节点及其子节点的响应。由于响应也是AST的一部分，因此将使用常规编辑器显示该节点。</p></li><li class="list__item" id="e2d8a7b6"><p>                     <b id="818e4b43">#printNodeRef</b>仅对位于项目模型中的节点有意义。此构造将交互式响应打印到控制台，可以单击该响应以在编辑器中打开该节点。</p></li><li class="list__item" id="28179169"><p>                     <b id="b8b5a964">#printSeq</b>适用于节点，模型或模块的集合。此命令将交互式响应输出到控制台，该响应描述了集合的大小。单击响应后，用法视图将打开以显示节点或模型。</p></li><li class="list__item" id="ba71116d"><p>                     <b id="f9059624">#print</b>表达式是一种通用构造，它试图根据其类型和值选择最合适的方式来显示其参数</p></li></ul>            </li></ul>      </li><li class="list__item" id="4988a9d3"><p>         <b id="cca2b54e">重构</b>操作。此操作将一个函数应用于节点序列（例如<b id="b08c8140">forEach</b>操作），但此操作之前会在用法视图中打开找到的节点，在此视图中，用户可以在重构开始之前查看节点，并手动选择要包含/排除在节点中的节点。重构，然后应用或取消重构。<br>          </p><figure><img alt="重构" title="重构" src="/help/img/idea/2019.2/refactor.png" id="03150835" width="770" height="99"></figure>      <p></p></li></ol>   <p id="a6d67923">此外，如果需要，用户可以扩展控制台语言。</p>   <aside class="tip sideblock" rel="a6d67923" id="b1afbce4" data-title="">      <p id="ca559481">控制台中使用的模型查询命令是在<i id="cd157611">jetbrains.mps.lang.smodel.query</i>语言中定义的。导入语言后，您还可以使用代码中的命令以编程方式访问和查询模型。可以在<a href="smodel-language-queries.html">smodel查询文档中</a>找到详细信息。</p>   </aside>   <h3 id="scopesofconsolequeries">控制台查询范围</h3>   <p id="1b6858f8">可以指定查询范围以限制要搜索的存储库区域。范围在尖括号中指定：</p>   <p id="c07f1e33">      </p><figure><img alt="mps完成" title="mps完成" src="/help/img/idea/2019.2/mps-completion.png" id="67e0b995" width="575" height="191"></figure>      <br>   <p></p>   <ul class="list _ul"><li class="list__item" id="f0b62c8d"><p>         <b id="743f3b30">项目</b> -仅当前项目中的模块</p></li><li class="list__item" id="db851fd3"><p>         <b id="4f2dea1c">editable-</b>当前项目中仅可编辑的模型（这是未明确指定范围时使用的默认范围）</p></li><li class="list__item" id="337f16de"><p>         <b id="a2645133">全局</b> -整个模块存储库</p></li><li class="list__item" id="bc6bfa93"><p>         <b id="17a111d0">可见</b> -仅全局存储库中可见的模块</p></li><li class="list__item" id="5100a5af"><p>         <b id="9f28b71c">模块</b> -限于列出的模块</p></li><li class="list__item" id="73a16ef4"><p>         <b id="9d22b84c">型号</b> -限于所列型号</p></li><li class="list__item" id="865dea59"><p>         <b id="62a180a8">custom-</b>使用提供的Java Scope类过滤模块</p></li></ul>   <h3 id="copyingnodesintoconsole">将节点复制到控制台</h3>   <p id="649fd9bd">为了从控制台指向项目中的具体节点，可以从编辑器复制此节点，然后将其粘贴到控制台中。该节点将被粘贴为名为<b id="22352611">nodeRef</b>的特殊构造，其<i id="8aa528ec">结构</i>为<b id="44b259b2">node <></b>类型的<i id="8aa528ec">BaseLanguage</i>表达式，其值为粘贴节点的值。如果有必要按原样粘贴代码，则可以从上下文菜单中执行“粘贴原始节点”操作。<br>       </p><figure><img alt="节点引用" title="节点引用" src="/help/img/idea/2019.2/noderef.png" id="18099e51" width="679" height="428"></figure>   <p></p><div class="last-modified" data-skip-index="skip">上次修改时间：2019年8月30日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="other-languages.html">其他语言</a> <a class="navigation-links__next" href="debugger.html">调试器</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>