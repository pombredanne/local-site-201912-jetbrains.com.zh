<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta name="robots" content="noindex"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><meta charset="UTF-8"><title>Structure - Help | MPS</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Structure.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search MPS Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Windows/Linux Default</option><option data-group="primary" value="primary_default_for_gnome">GNOME</option><option data-group="primary" value="primary_default_for_kde">KDE</option><option data-group="primary" value="primary_default_for_xwin">XWin</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="secondary_intellij_idea_classic_os_x">IntelliJ IDEA Classic (Mac OS X)</option><option data-group="secondary" value="secondary_xcode">Xcode</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_resharper">ReSharper</option><option data-group="secondary" value="secondary_resharper_osx">ReSharper (Mac OS X)</option><option data-group="secondary" value="secondary_emacs">Emacs (Mac OS X)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Structure.html" id="structure.xml">Structure</h1>   <p id="9777bae1">Since MPS frees you from defining a grammar for your intented languages, you obviously need different ways to specify the structure of your languages. This is where the <i id="4ccd7f14">Structure Language</i> comes in handy. It gives you all the means to define the language structure. As we discussed earlier, when coding in MPS you're effectively building the AST directly, so the structure of your language needs to specify the elements, the bricks, you use to build the AST.</p>   <p id="b65ed65f">The bricks are called <i id="e7654197">Concepts</i> and the <i id="598d292b">Structure Language</i> exposes <i id="81e0e164">concepts</i> and <i id="fd932e33">concept interfaces</i> as well as their members: <i id="4465999c">properties</i>, <i id="8bf35a92">references</i>, and&nbsp;<i id="636e220e">children</i>.</p>         <figure><img alt="concept1" title="concept1" src="/help/img/idea/2019.1/concept1.png" id="b3443e0e" width="564" height="389"></figure>         <h2 id="conceptsandconceptinterfaces">Concepts and Concept Interfaces</h2>   <p id="b108f12d">Now let's look at those in more detail. A <i id="d3f805ef">Concept</i> defines the structure of a concept instance, a node of the future AST representing code written using your language. The <i id="0de4e23c">Concept</i> says which properties the nodes might contain, which nodes may be referred to, and what children nodes are allowed (for more information about nodes see the <a href="basic-notions.html">Basic notions</a>&nbsp;section).</p>   <p id="05c29811">Apart from <i id="edc767ba">Concepts</i>, there are also <i id="01f6536e">Concept Interfaces</i>. <i id="bfb4a1f8">Concept interfaces</i> represent independent traits, which can be inherited and implemented by many different concepts. You typically use them to bring orthogonal concepts together in a single concept. For example, if your <i id="c332130a">Concept</i> instance has a name by which it can be identified, you can implement the INamedConcept interface in your <i id="52381378">Concept</i> and you get the <i id="918bce83">name</i> property plus associated behavior and constraints added to your <i id="e3a809f2">Concept</i>.</p>      <h3 id="conceptsinheritance">Concepts inheritance</h3>   <p id="c57a9702">Just like in OO programming, a <i id="b6c2c33a">Concept</i> can extend another <i id="f5db24b3">Concept</i>, and implement many <i id="efbfc407">Concept Interfaces</i>. A <i id="8b59c2c0">Concept Interface</i> can extend multiple other <i id="5aeb68cd">Concept Interfaces</i>. This system is similar to Java classes, where a class can have only one super-class but many implemented interfaces, and where interfaces may extend many other interfaces.</p>   <p id="075f909a">If a concept extends another concept or implements a concept interface, it transitively inherits all members (i.e if A has member <i id="690b12ca">m</i>, A is extended by B and B is extended by C, then C also has the member <i id="bea0ed23">m</i>)</p>      <h4 id="conceptinterfaceswithspecialmeaning">Concept interfaces with special meaning</h4>   <p id="5262a996">There are several concept interfaces in MPS that have a special meaning or behavior when implemented by your concepts. Here's a list of the most useful ones:</p>   <div class="table-wrapper"><table class="                 " width="100%" id="9dfc4c5a"><thead><tr id="80a31a3c" class="ijRowHead"><th id="4bc7c4e6">            <p id="d8f0af79">Concept Interface</p>         </th><th id="6e4043ff">            <p id="5596b523">Meaning</p>         </th></tr></thead><tbody><tr id="2e668224" class="ijRowOdd"><td id="f8d03f52">            <p id="2cbf0bde">IDeprecatable</p>         </td><td id="50ab3c3c">            <p id="e293181c">Used if instances of your concept can be deprecated. It's&nbsp;<i id="f018e41e">isDeprecated</i>&nbsp;behavior method indicates whether or not the node is deprecated. The editor sets a&nbsp;strikeout&nbsp;style for reference cells if <i id="6b359500">isDeprecated</i> of the target returns true.</p>         </td></tr><tr id="a4896b8f" class="ijRowEven"><td id="f8560aa3">            <p id="125c9755">INamedConcept</p>         </td><td id="f5ce5557">            <p id="ba65ad4b">Used if instances of your concept have an identifying name. This name appears in the code completion list.</p>         </td></tr><tr id="dfcb37ed" class="ijRowOdd"><td id="31745006">            <p id="19753872">IType</p>         </td><td id="0e85fcfd">            <p id="ff0d0707">Is used to mark all concepts representing types</p>         </td></tr><tr id="8ce7bf2f" class="ijRowEven"><td id="797ff479">            <p id="70d0b62e">IWrapper</p>         </td><td id="553bd6b0">            <p id="8ca0bc4d">Deleting a node whose immediate parent is an instance of IWrapper deletes the parent node as well.</p>         </td></tr></tbody></table></div>      <h2 id="conceptmembers">Concept members</h2>      <h3 id="properties">Properties</h3>   <p id="db918032">      <i id="9f036d8d">Property</i> is a value stored inside a concept instance. Each property must have a type, which for properties is limited to: <i id="5df09cc9">primitives</i>, such as boolean, string and integer; <i id="7bb52df5">enumerations</i>, which can have a value from a predefined set; and <i id="c7e0a864">constrained data types</i> (strings constrained by a regular expression).&nbsp;You may define a getter and setter for a property in the&nbsp;<b id="6d179d4c">         <a href="constraints.html">Constraints</a>&nbsp;</b>of a concept.</p>      <h3 id="references">References</h3>   <p id="9ab38279">Holding scalar values would not get as far. To increase expressiveness of our languages nodes are allowed to store <i id="932ce860">references</i> to other nodes. Each reference has a <i id="60cf73a3">name</i>, a <i id="fbd0ed08">type</i>, and a <i id="81957086">cardinality</i>. The type restricts the allowed type of a reference target. Cardinality defines how many references of this kind a node can have. References can only have two types of cardinalities: 1:0..1 and 1:1.</p>   <p id="f21a5138">For&nbsp;references&nbsp;there is no direct way to traverse them in the reverse direction.&nbsp;The&nbsp;<code class="code">jetbrains.mps.lang.findUsages</code>&nbsp;language and the&nbsp;<code class="code">execute finder</code>&nbsp;should be used for that. (These do not work reliably during generation).</p>      <h4 id="smartreferences">Smart references</h4>   <p id="a8638cfa">A node containing a single reference of 1:1 cardinality and with no <i id="526ebfea">alias</i> defined is called a <i id="e2b23393">smart reference</i>. These are somewhat special references. Provided the language author has not specified an alias for them, they do their best to hide from the language user and be as transparent as possible. MPS treats the node as if it was a the actual reference itself, which simplifies code editing and code-completion. For example, default completion items are created whenever the completion menu is required: for each possible reference target, a menu item is created with matching text equal to the presentation of a target node.</p>   <p id="145e5882">In order to make a reference smart when it does not meet the above mentioned criteria for being treated as smart automatically, the concept declaration has to be annotated with the&nbsp;<i id="0fc0d976">@smart reference</i> attribute: A typical use-case would be a concept that&nbsp;customizes the presentation of the reference or holds additional&nbsp;references.</p>         <figure><a class="lightbox" href="/help/img/idea/2019.1/SmartRef1.png"><img alt="SmartRef1" title="SmartRef1" src="/help/img/idea/2019.1/SmartRef1.png" id="e8e68f28" width="500" height="820"></a></figure>         <h3 id="children">Children</h3>   <p id="6ee04ed8">To compose nodes into trees, we need to allow children to be hooked up to them. Each child declaration holds a target concept, its role and cardinality. Target concept specifies the type of children. Role specifies the name for this group of children. Finally, cardinality specifies how many children from this group can be contained in a single node. There are 4 allowed types of cardinality: 1:1, 1:0..1, 1:0..n, and 1:1..n.</p>   <p id="d337ed77">Programatically,&nbsp;<i id="b805fc92">node.children</i> retrieves all nodes that are children to the current node.&nbsp;The reverse of <i id="85621278">node.children</i>&nbsp;is&nbsp;<i id="cabbd71b">node.parent</i> or&nbsp;<i id="acaca9cd">node.ancestor(s)</i>.&nbsp;</p>      <h3 id="specializedreferencesandchildren">Specialized references and children</h3>   <p id="b527daac">Sometimes, when one concept extends another, we not only want to inherit all of its members, but also want to override some of its traits. This is possible with <i id="15425498">children and references specialization</i>. When you specialize a child or reference, you narrow its target type. For example, if you have concept A which extends B, and have a reference r in concept C with target type B, you might narrow the type of reference r in C's subconcepts. It works the same way for concept's children.</p>   <h3 id="alias">Alias</h3>   <p id="9cebf438">The alias, referred to from code as <i id="70f8694a">conceptAlias</i>, optionally specifies a string that will be recognized by MPS as a representation of the <i id="eecc5118">Concept</i>. The <i id="15498352">alias</i>&nbsp;will appear in completion boxes and MPS will instantiate the <i id="9730bd80">Concept</i>, whenever the <i id="5546da3d">alias</i>&nbsp;or a part of it is typed by the user.&nbsp;</p>      <h2 id="constraineddatatypes">Constrained Data Types</h2>   <p id="679f2f65">      <i id="3b5d4b1f">Constrained Data Type</i>&nbsp;allows you to define string-based types constrained with a regular expression. MPS will then make sure all property values with this constrained data type hold values that match the constraint.</p>         <figure><img alt="CustomDataType" title="CustomDataType" src="/help/img/idea/2019.1/CustomDataType.png" id="032ab580" width="419" height="65"></figure>         <h2 id="enumerationdatatypes">Enumeration Data Types</h2>   <p id="d365f869">Enumeration Data Types allow you to use properties that hold values from pre-defined sets.</p>   <p id="daec849a">      <figure><a class="lightbox" href="/help/img/idea/2019.1/Enum1.png"><img alt="Enum1" title="Enum1" src="/help/img/idea/2019.1/Enum1.png" id="bfedc06f" width="700" height="586"></a></figure>      <br> Each enumeration data type member has a <i id="acbcd1a3">value</i> and a <i id="b7a21aa9">presentation</i>. Optionally an <i id="010c3f4e">identifier</i>&nbsp;can be specified explicitly.</p>   <h3 id="presentationvs.valuevs.identifier">Presentation vs. Value vs. Identifier</h3>   <ul class="list _ul"><li class="list__item" id="ac376128"><p>         <b id="631a5eb6">Presentation</b>&nbsp;- &nbsp;this string value will be used to represent the enum members in the UI (completion menu, editor)</p></li><li class="list__item" id="19381faf"><p>         <b id="4ef990f3">Value</b>&nbsp;- this value, the type of which is set by the&nbsp;<b id="8e6d6e53">member type</b>&nbsp;property, will represent the enum members in code</p></li><li class="list__item" id="855eada2"><p>         <b id="f155e971">Identifier</b>&nbsp;- this optional value will be used as the name of the generated Java enum. This value is typically derived from either the presentation or the value, since it is meant to be transparent to the language users and has no meaning in the language. It only needs to be specified when the id deriving process fails to generate unique valid identifiers.</p></li><li class="list__item" id="cae9ede3"><p>         <b id="02873c72">Name</b>&nbsp;- when accessing enum data type's members from code,&nbsp;<b id="47b32bae">name</b>&nbsp;refers to either&nbsp;<b id="85508286">presentation</b>,&nbsp;<b id="eea325bb">value</b>&nbsp;or&nbsp;<b id="29e7a20c">identifier</b>, depending on which option&nbsp;<b id="714460d4">member identifier</b>&nbsp;is active</p></li></ul>   <h3 id="derivingidentifiersautomaticaly">Deriving identifiers automaticaly</h3>   <p id="42f26b28">When deriving identifiers from either presentation or values, MPS will make best efforts to eliminate characters that are not allowed in Java identifiers. If the derived identifiers for multiple enum data type members end up being identical, an error will be reported. Explicit identifiers should be specified in such cases.</p>   <h3 id="programmaticaccess">Programmatic access</h3>   <p id="9008a9cb">To access enumeration data types and their members programmatically, use the <i id="afaf896a">enum operations</i>&nbsp;defined in the&nbsp;<i id="e32aa397">jetbrains.mps.lang.smodel</i> language.</p>         <figure><a class="lightbox" href="/help/img/idea/2019.1/Enum32.png"><img alt="Enum32" title="Enum32" src="/help/img/idea/2019.1/Enum32.png" id="ed0123bf" width="900" height="718"></a></figure>      <aside class="tip sideblock" data-title="" rel="1ca8055c" id="40a3b000">      <p id="40f7555c">Note that the <b id="25c0a23c">name</b>&nbsp;in <b id="a47db915">memberForName</b>&nbsp;and <b id="b9f02308">february.name</b>&nbsp;above means the actual&nbsp;<i id="727db811">member identifier</i>, whether it is set to be <b id="57098884">custom</b>, <b id="ac64c4c0">derive from presentation</b>&nbsp;or <b id="f439398e">derive from internal value</b>.</p>   </aside>   <p id="938f1704">Checking a value of a property against an enum data type value can be done with the <b id="13281b83">is</b>&nbsp;operation. To print out the <b id="0960c94b">presentation</b>&nbsp;of the property value, you need to obtain the corresponding enum member first:&nbsp;</p>         <figure><a class="lightbox" href="/help/img/idea/2019.1/Enum33.png"><img alt="Enum33" title="Enum33" src="/help/img/idea/2019.1/Enum33.png" id="0c2c181e" width="900" height="190"></a></figure>      <h2 id="attributes">Attributes</h2>   <p id="02f040cd">Attributes, sometimes called Annotations, allow language designers to express orthogonal language constructs and apply them to <b id="429f890c">existing</b> languages without the need to modify them. For example, the generator templates allow for special generator marks, such as <i id="01627f59">LOOP</i>, <i id="068bf80c">-&gt;$</i> and <i id="8650403e">$[]</i>, to be embedded within the target language:</p>   <p id="66aefc91">      <figure><img alt="Generator1" title="Generator1" src="/help/img/idea/2019.1/Generator1.png" id="c77bab83" width="784" height="294"></figure>      <br> The target language (BaseLanguage in our example here) does not need to know anything about the MPS generator, yet the generator macros can be added to the abstract model (AST) and edited in the editor. Similarly, anti-quotations and Patterns may get attributed to BaseLanguage concepts.</p>   <p id="85daecc2">MPS provides three types of attributes:</p>   <ul class="list _ul"><li class="list__item" id="2e712583"><p>         <i id="5649bfc0">LinkAttribute</i>&nbsp;- to annotate references</p></li><li class="list__item" id="9c78caa6"><p>         <i id="3d0ea6bd">NodeAttribute</i>&nbsp;- to annotate individual nodes</p></li><li class="list__item" id="00911cc1"><p>         <i id="a9ac94cc">PropertyAttribute</i>&nbsp;- to annotate properties</p></li></ul>   <p id="f3df8ac5">By extending these you can introduce your own additions to existing languages. For good examples of attributes in use, check out the <a href="description-comments.html">Description comments cookbook</a>&nbsp;as well as the <a href="requirement-tracking-language.html">Requirement tracking language cookbook</a>.</p><div class="last-modified" data-skip-index="skip">Last modified: 5 July 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="language-definition.html">Language-definition</a><a class="navigation-links__next" href="editor.html">Editor</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>