<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta name="robots" content="noindex"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><meta charset="UTF-8"><title>Building IntelliJ IDEA language plugins - Help | MPS</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Building+IntelliJ+IDEA+language+plugins.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search MPS Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Windows/Linux Default</option><option data-group="primary" value="primary_default_for_gnome">GNOME</option><option data-group="primary" value="primary_default_for_kde">KDE</option><option data-group="primary" value="primary_default_for_xwin">XWin</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="secondary_intellij_idea_classic_os_x">IntelliJ IDEA Classic (Mac OS X)</option><option data-group="secondary" value="secondary_xcode">Xcode</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_resharper">ReSharper</option><option data-group="secondary" value="secondary_resharper_osx">ReSharper (Mac OS X)</option><option data-group="secondary" value="secondary_emacs">Emacs (Mac OS X)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Building+IntelliJ+IDEA+language+plugins.html" id="building-intellij-idea-language-plugins.xml">Building IntelliJ IDEA language plugins</h1>   <p id="2534c4b3">So you have created a set of languages and would like to make them available to Java developers inside IntelliJ IDEA. In this document we are going to look at ways to package a set of languages, perhaps together with the runtimes they depend on, into a valid IntelliJ IDEA plugin.</p>   <p id="469f7cf8">Do you prefer video? Then you may also like to check out our <a href="https://www.youtube.com/watch?v=6IPu9af7k1o" data-external="true" target="_blank" rel="noopener noreferrer">screen-cast covering the topic of IntelliJ IDEA language plugin creation</a>.</p>         <i id="7572a3e0">Note: The JavaExtensionsSample sample project that comes with MPS contains a fully functional build script to build and package the sample Java extensions into a plugin. You can take inspiration from there.</i>      <h3 id="startingpoint">Starting point</h3>   <p id="d237ca53">I assume you have built your languages and now it is the time share them with the world. There are a couple of steps that you need to follow in order to get a nice zip file, which you can upload to the server for others to grab.</p>   <p id="7827f3f1">In brief:</p>   <ul class="list _ul"><li class="list__item" id="d81e022a"><p>Create a build script (manually or through a wizard)</p></li><li class="list__item" id="8a28d42b"><p>Generate an Ant build xml file</p></li><li class="list__item" id="7c71bbe7"><p>Run Ant</p></li><li class="list__item" id="1ad1431f"><p>Pick the generated files and share them</p></li></ul>   <p id="59853999">Now we'll continue in more detail. Alternatively you may like to try our new screen-casts that covers the topics of building as well as using IntelliJ IDEA language plugins.</p>   <h4 id="createabuildscript">Create a build script</h4>   <p id="f7d958a4">First of all, we need to create a new build script in the newly created build solution. We have two options - using a wizard or creating the build description manually.</p>   <h4 id="usingthewizard">Using the Wizard</h4>   <p id="77cd476c">We can use the <i id="6193cdd6">Build Solution</i> wizard to generate a solution for us</p>   <p id="6a26e02b">      <figure><img alt="build1" title="build1" src="/help/img/idea/2019.1/build1.png" id="7215b3ec" width="516" height="205"></figure>      <br>The wizard will ask whether the new build script should become a part of an existing solution or whether a new one should be created.</p>   <p id="ea081a5c">       <figure><img alt="build2" title="build2" src="/help/img/idea/2019.1/build2.png" id="2e5a4ad7" width="567" height="407"></figure>      <br>A model has to be created inside the new solution:</p>   <p id="d9eeda04">       <figure><img alt="build3" title="build3" src="/help/img/idea/2019.1/build3.png" id="3e856c98" width="567" height="407"></figure>      <br>You can also specify, whether you intend to package the outcome as an MPS or IntelliJ IDEA plugin:</p>   <p id="7888ae41">      <figure><img alt="build5" title="build5" src="/help/img/idea/2019.1/build5.png" id="a65dc9bd" width="567" height="407"></figure>      <br>Finally, you select the languages and solutions to include in the build srcipt:</p>          <figure><img alt="build6" title="build6" src="/help/img/idea/2019.1/build6.png" id="6fb0e52e" width="567" height="407"></figure>      <p id="3e80f978">The generated build description script will look something like this:</p>         <figure><img alt="build7" title="build7" src="/help/img/idea/2019.1/build7.png" id="7027a581" width="935" height="791"></figure>      <h4 id="themanualapproach">The manual approach</h4>   <p id="45596b71">To get more control over the process, we can alternatively create the build script ourselves. So first we will have to pick an existing solution or create a new one. In the root of your project's logical view right-click and pick "New Solution". Once the solution exists, create a new model in it. The model should have&nbsp;<i id="756b8995">jetbrains.mps.build</i> and <i id="cc63b479">jetbrains.mps.build.mps</i> listed as its <i id="c710fda6">Used languages</i> and <i id="a7ae3f66">jetbrains.mps.ide.build</i> should be mentioned as an <i id="6fe04fb5">Dependency</i>.</p>   <p id="4d998f86">       <figure><img alt="build12" title="build12" src="/help/img/idea/2019.1/build12.png" id="a52e048f" width="783" height="475"></figure>      <br>      <figure><img alt="build13" title="build13" src="/help/img/idea/2019.1/build13.png" id="7f6e7b65" width="584" height="365"></figure>      <br>With the solution and the model prepared you can now create a new build project through the pop-up menu:</p>         <figure><img alt="build14" title="build14" src="/help/img/idea/2019.1/build14.png" id="3b750156" width="765" height="294"></figure>      <h4 id="editingthebuildscript">Editing the build script</h4>   <p id="0da29db8">Either way you created the build script, now it is the time to edit your build description. In order to be able to package your languages and solutions as IntelliJ IDEA plugins, you should untimately get a script similar to this one:</p>         <figure><img alt="build8" title="build8" src="/help/img/idea/2019.1/build8.png" id="e7c68ae1" width="615" height="785"></figure>      <p id="36263077">It is important to define artifact locations for both dependencies. The <i id="363fa0da">IDEA</i> dependency needs to know where to find an IntelliJ IDEA installation. The <i id="49ae44e5">mpsPlugin</i> dependency requires to know where to find the MPS core IDEA plugin. After you enabled MPS inside IntelliJ IDEA by adding the plugin, it is typically located in the <i id="39d4c666">IntelliJ IDEA installation folder/plugins</i> folder. Alternatively the plugin may also have been installed into the user home folder, under <i id="2b633108">IntelliJ IDEA setting folder/config/plugins</i>.</p>   <p id="b51811ce">Please check out the <a href="build-language.html">Build language</a> for details on the build language capabilities.</p>   <h3 id="generateanantbuildxmlfile">Generate an Ant build xml file</h3>   <p id="5b67d7e5">With the build script prepared you can now generate an Ant <i id="9ff18623">build.xml</i> file. Just <b id="d0a1753c">rebuild</b> your build solution and the file will be generated into the location that you specified in the properties of your build script as indicated in the following picture:<br>      <figure><img alt="build11" title="build11" src="/help/img/idea/2019.1/build11.png" id="24c0dc4f" width="699" height="404"></figure>   </p>   <p id="fb7ae5f7">The generated <i id="1adbff8a">build.xml</i> file should start something like this:</p>         <figure><img alt="build10" title="build10" src="/help/img/idea/2019.1/build10.png" id="b0fbdabf" width="746" height="339"></figure>      <p id="42c8ed27">Notice the&nbsp;<i id="eb436530">artifacts.IDEA</i> and <i id="ee242156">artifacts.mpsPlugin</i> properties in the generated script. When running the script from the command line, we have to make them point to the IntelliJ IDEA installation and the location of the MPS core plugin respectively.</p>   <p id="3f73eb6f">Since in the script above we set the locations of both artifacts through <b id="56b43a2b">macros</b> (<b id="1460522c">$idea_home</b> and <b id="6d7f4064">$plugins_home</b>),  we may set theese properties instead (necessary only if the locations on  the build machine differ from the paths set in the build script).</p>   <h3 id="runant">Run Ant</h3>   <p id="9f9d0177">Time to run the build and get our plugin. Again, we have two choices - either stay inside MPS or use the command line.</p>   <h4 id="fromwithinmps">From within MPS</h4>   <p id="84b835ff">Just right-click on the build node in the Project View and choose run:</p>         <figure><img alt="build9" title="build9" src="/help/img/idea/2019.1/build9.png" id="58ee8e71" width="664" height="416"></figure>      <p id="d10b5bf7">The generated artifacts will be located in the <i id="79222457">build</i> folder inside the folder you specified as the base.</p>   <h4 id="fromthecommandline">From the command line</h4>   <p id="fd2abf7d">You need to navigate the command line to the folder where the <i id="477f7687">build.xml</i> file is located and run <i id="582e5e5a">ant</i>. If the locations of the MPS core plugin and IntelliJ IDEA on the build machine are different from the path set in the build script, we should specify the actual location on the command line <i id="3b0b5c00">ant -Dartifacts.mpsPlugin="..." -Dartifacts.IDEA="..."</i>. Since in our example above we use <i id="9073b030">$idea_home</i> to point to the IntelliJ IDEA installation folder and <i id="58f5b098">$plugins_home</i> to point to the MPS core plugin, we can instead change the values of theese properties on the command line: <i id="4b785777">ant -Didea_home="path to idea" -Dplugins_home="path to the MPS core plugin"</i>.</p>   <p id="da3f002b">This step, no matter whether you run the script from MPS or the command line, will generate a zip file containing all the necessary jar files organized as we specified in the layout section of our build script or (as in our displayed case) using the default layout of IntelliJ IDEA plugins.</p>   <h3 id="pickthegeneratedfilesandsharethem">Pick the generated files and share them</h3>   <p id="f047c1ac">Now we need to distribute the generated files to the IntelliJ IDEA users so that they can add them as plugins. Check out <a href="using-mps-inside-intellij-idea.html">Using MPS inside IntelliJ IDEA</a> for detailed instructions on how to install the plugin for use in IntelliJ IDEA.</p><div class="last-modified" data-skip-index="skip">Last modified: 5 July 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="howto-mps-and-ant.html">HowTo -- MPS and ant</a><a class="navigation-links__next" href="using-mps-inside-intellij-idea.html">Using MPS inside IntelliJ IDEA</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>