<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta name="robots" content="noindex"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><meta charset="UTF-8"><title>Editor Actions - Help | MPS</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Editor+Actions.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search MPS Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Windows/Linux Default</option><option data-group="primary" value="primary_default_for_gnome">GNOME</option><option data-group="primary" value="primary_default_for_kde">KDE</option><option data-group="primary" value="primary_default_for_xwin">XWin</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="secondary_intellij_idea_classic_os_x">IntelliJ IDEA Classic (Mac OS X)</option><option data-group="secondary" value="secondary_xcode">Xcode</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_resharper">ReSharper</option><option data-group="secondary" value="secondary_resharper_osx">ReSharper (Mac OS X)</option><option data-group="secondary" value="secondary_emacs">Emacs (Mac OS X)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Editor+Actions.html" id="editor-actions.xml">Editor Actions</h1>   <p id="527ddbd6">MPS editor has quite sensible defaults in completion actions, node creation policy. But when you want to customize them, you have to work with the actions language.</p>   <aside class="warning " data-title="" rel="527ddbd6" id="ef7b14cd">      <p id="124b587a">The Side-transformation actions as well as Node substitute actions have been deprecated in MPS 3.4 and replaced by the new <a href="transformation-menu-language.html">Transformation Menu Language</a>.</p>   </aside>   <p id="node_factories">Node Factories</p>      <p id="b27882a7">When a node is replaced with another one, it may be useful to parametrize the process of creation of the replacing node with values held by the node that is being replaced, or perhaps also to reflect the future position of the replacing node in the model.&nbsp;<b id="18b2a124">Node Factories</b> give you exactly that. You write a set of handlers that get invoked whenever a new node needs to be created in a <b id="7d67a085">substitution action</b> or through one of the&nbsp;<b id="35679d83">new initialized node&lt;&gt;</b>,&nbsp;<b id="a93a372d">set new initialized node&lt;&gt;</b>,&nbsp;<b id="1a126503">add new initialized node&lt;&gt;</b>,&nbsp;<b id="1232241b">replace with new initialized node&lt;&gt;</b> and <b id="849bc220">new initialized instance&lt;&gt;</b> methods.</p>   <p id="8eb31a56">In brief, <b id="c3503435">Node Factories</b> allow you to customize instantiation of new nodes. In order to create node factory, you first have to create a new <b id="ea09ccff">Node Factories</b> root node. Inside of this root you can create node factories for concepts. Each node factory consists of node creation block which has the following parameters: newNode (the created node), sampleNode (the currently substituted node; can be null), enclosing node (a node which will be the parent of newNode in the model), and a model. The node factory handler is invoked <b id="39d784a5">before the new node gets inserted into the model</b>.</p>   <p id="90b1d88f">You can leverage the concept inheritance hierarchy in&nbsp;<b id="c47f8a7a">Node Factories</b> to reduce repetition.</p>         <figure><a class="lightbox" href="/help/img/idea/2019.1/Ac6.png"><img alt="Ac6" title="Ac6" src="/help/img/idea/2019.1/Ac6.png" id="b5556aa2" width="500" height="668"></a></figure>      <aside class="tip sideblock" data-title="" rel="e8667955" id="d714488b">      <p id="9606acbc">To leverage node factories when creating nodes from code, use the "<b id="8d0becf3">initialized</b>" variants of "<i id="f1ae51b6">replace with ...</i>"&nbsp;<i id="c362049a">smodel</i>&nbsp;language constructs. See&nbsp;<a href="smodel-language-modification-operations.html">SModel language Modification operations</a>&nbsp;for details.</p>      <p id="bb0689aa">A node factory will be called, whenever:</p>      <ul class="list _ul"><li class="list__item" id="8a340c42"><p>using the code completion menu to create such a node or to replace another one</p></li><li class="list__item" id="38372b1a"><p>calling&nbsp;<b id="b948c42f">add new initialized</b>,&nbsp;<b id="ee8320bf">set new initialized</b>,&nbsp;<b id="5a0f2ef8">replace new initialized</b>, etc.</p></li><li class="list__item" id="f9094bb2"><p>creating such node as a root from the context menu in the project view.</p></li></ul>      <p id="8908959e">A node factory is</p>      <ul class="list _ul"><li class="list__item" id="6f643e53"><p>            <b id="05d6d671">not</b>&nbsp;called when using quotations&nbsp;<code class="code">&lt;Car()&gt;</code>         </p></li><li class="list__item" id="f74640ac"><p>            <b id="c2ed623d">not</b>&nbsp;called when just showing it in the editor</p></li><li class="list__item" id="9e744121"><p>            <b id="a15ad15c">not</b>&nbsp;called when adding it as a root with&nbsp;<code class="code">model.add root(&lt;Car()&gt;)</code>         </p></li><li class="list__item" id="3f917be0"><p>            <b id="bfa5ddbd">not</b>&nbsp;called when adding it as a root with&nbsp;<code class="code">model.add new root(Car)</code>         </p></li></ul>   </aside>   <h2 id="pastewrappers">Paste wrappers</h2>   <p id="c00d4784">These allow you to customize pasting of nodes into other contexts. For example, if you copy a&nbsp;<i id="7827b1fe">LocalVariableDeclaration</i> in&nbsp;<i id="78386a90">BaseLanguage</i> and paste it into a&nbsp;<i id="d13f572b">ClassConcept</i> to make it a field of the class, a simple transformation must be triggered that will create a new&nbsp;<i id="68799f41">FieldDeclaration</i> out of the Local<i id="3d2b21b2">VariableDeclaration</i>.</p>         <figure><a class="lightbox" href="/help/img/idea/2019.1/Ac10.png"><img alt="Ac10" title="Ac10" src="/help/img/idea/2019.1/Ac10.png" id="e9ce266b" width="500" height="683"></a></figure>      <h2 id="copy-pastehandlers">Copy-paste handlers</h2>   <p id="74ae5646">These give you the possibility to customize the part of the models that is being copied to or pasted from the clipboard.</p>         <figure><a class="lightbox" href="/help/img/idea/2019.1/Ac11.png"><img alt="Ac11" title="Ac11" src="/help/img/idea/2019.1/Ac11.png" id="e78f1e0b" width="500" height="153"></a></figure>      <p id="534a070f">The <i id="87136806">copy</i> parameter in a <b id="6cb0647f">copy pre processor</b> block gets contains an exact deep copy of the&nbsp;<i id="5fcd4842">original</i> parameter node. Unlike&nbsp;<i id="859b68a4">original</i>,&nbsp;<i id="f981fc27">copy</i> is detached from the model and so has no parent node.</p>         <figure><a class="lightbox" href="/help/img/idea/2019.1/Ac12.png"><img alt="Ac12" title="Ac12" src="/help/img/idea/2019.1/Ac12.png" id="f0aba21e" width="500" height="209"></a></figure>      <p id="b8f14ae1">The task for the&nbsp;<b id="ce902561">paste post processor</b> typically is to re-resolve references so that they point to declarations valid in the new context.</p>   <p id="83878562">&nbsp;</p><div class="last-modified" data-skip-index="skip">Last modified: 5 July 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="editor.html">Editor</a><a class="navigation-links__next" href="transformation-menu-language.html">Transformation Menu Language</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>