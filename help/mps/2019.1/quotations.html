<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta name="robots" content="noindex"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><meta charset="UTF-8"><title>Quotations - Help | MPS</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Quotations.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search MPS Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Windows/Linux Default</option><option data-group="primary" value="primary_default_for_gnome">GNOME</option><option data-group="primary" value="primary_default_for_kde">KDE</option><option data-group="primary" value="primary_default_for_xwin">XWin</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="secondary_intellij_idea_classic_os_x">IntelliJ IDEA Classic (Mac OS X)</option><option data-group="secondary" value="secondary_xcode">Xcode</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_resharper">ReSharper</option><option data-group="secondary" value="secondary_resharper_osx">ReSharper (Mac OS X)</option><option data-group="secondary" value="secondary_emacs">Emacs (Mac OS X)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Quotations.html" id="quotations.xml">Quotations</h1>   <h2 id="quotations">Quotations</h2>   <p id="0dc4a045">A quotation is a language construct that lets you easily create a node with a required structure. Of course, you can create a node using the&nbsp;<i id="d15860c8">smodelLanguage</i>&nbsp;and then populate it with appropriate children, properties and references by hand, using the same&nbsp;<i id="89d3d170">smodelLanguage</i>. However, there's a simpler - and more visual - way to accomplish this.</p>   <p id="bddd3c90">The two following constructs will build identical nodes, the first one uses quotation, the second plan&nbsp;<i id="5269daf0">model</i> API:</p>   <div class="code-block" data-lang="none">node&lt;IntegerType&gt; node = &lt;int&gt;;
node&lt;IntegerType&gt; node2 = new node&lt;IntegerType&gt;();
</div>   <aside class="tip sideblock" data-title="" rel="8e00c439" id="8eb33847">      <p id="289e9206">When creating a quotation, type the left angle bracket symbol '&lt;' and pick 'quotation' from the completion menu.</p>               <figure><a class="lightbox" href="/help/img/idea/2019.1/quot1.png"><img alt="quot1" title="quot1" src="/help/img/idea/2019.1/quot1.png" id="36ce67f8" width="700" height="562"></a></figure>            <p id="75394125">Alternatively, typing '&lt;q' followed by <i id="242627b4">Control + Space</i>&nbsp;will be even faster.</p>      <p id="eb84cedf">When specifying the top-most concept for the quotation, use the concept name, e.g. <i id="1438da8b">IntegerType</i>, not its alias, e.g. <i id="ae0efc96">int</i>.<br>          <figure><a class="lightbox" href="/help/img/idea/2019.1/quot2.png"><img alt="quot2" title="quot2" src="/help/img/idea/2019.1/quot2.png" id="a3429c3c" width="500" height="608"></a></figure>      </p>   </aside>   <p id="f55a449a">Quotations as well as light quotations are defined int&nbsp;the&nbsp;<i id="4fb05e96">jetbrains.mps.lang.quotation</i>&nbsp;language. You need this language to be set as a <b id="9c894c39">used language</b>&nbsp;in order to be able to use it in your models.</p>   <p id="e77d77d3">A quotation is an expression, whose value is the MPS node written inside the quotation. Think about a quotation as a "node literal", a construction similar to numeric constants and string literals. That is, you write a literal if you statically know what value do you mean. So inside a quotation you don't write an expression, which evaluates to a node, you rather write the node itself. For instance, an expression&nbsp;<code class="code">2 + 3</code>&nbsp;evaluates to&nbsp;<code class="code">5</code>, an expression&nbsp;<code class="code">&lt; 2 + 3 &gt;</code>&nbsp;(angled braces being quotation braces) evaluates to a node&nbsp;<i id="6a45f284">PlusExpression</i>&nbsp;with&nbsp;<i id="7ab6c907">leftOperand</i>&nbsp;being an&nbsp;<i id="bf8d86ae">IntegerConstant 2</i>&nbsp;and&nbsp;<i id="0bfccc23">rightOperand</i>&nbsp;being&nbsp;an <i id="34eed945">IntegerConstant</i>&nbsp;<code class="code">3</code>.</p>   <p id="ee1f033a">The following two constructs again create the same AST, now the quotation approach yields clear benefits in code brevity:</p>   <div class="code-block" data-lang="none">node&lt;PlusExpression&gt; node3 = &lt;2 + 3&gt;;&nbsp;
&nbsp;
node&lt;PlusExpression&gt; node4 = new node&lt;PlusExpression&gt;();&nbsp;
node4.leftExpression = new node&lt;IntegerConstant&gt;();&nbsp;
node4.leftExpression : IntegerConstant.value = 2;&nbsp;
node4.rightExpression = new node&lt;IntegerConstant&gt;();&nbsp;
node4.rightExpression : IntegerConstant.value = 3;
</div>   <p id="c26f4902">Note that using quotation like&nbsp;<code class="code">&lt;Car()&gt;</code>&nbsp;<b id="84cea31d">does</b>&nbsp;<b id="683fa8a9">not</b>&nbsp;call the behavior constructor, while using the smodel constructor like&nbsp;<code class="code">new node&lt;Car&gt;()</code>&nbsp;will&nbsp;<b id="10b04088">do</b>&nbsp;call it.</p>   <h2 id="antiquotations">Antiquotations</h2>   <p id="c83e8542">For it is a literal, a value of quotation should be known statically. On the other hand, in cases when you know some parts (i.e. children, referents or properties) of your node only dynamically, i.e. those parts that can only be evaluated at runtime and are not known at design time, then you can't use just a quotation to create a node with such parts.</p>   <p id="b9394d57">The good news, however, is that if you know the most part of a node statically and you want to replace only several parts by dynamically-evaluated nodes you can use&nbsp;<b id="e8d0cba0">antiquotations</b>. An antiquotation can be of 4 types:&nbsp;<i id="3211e77e">child</i>,&nbsp;<i id="da41ef9d">reference</i>,&nbsp;<i id="eb524c5c">property</i>&nbsp;and&nbsp;<i id="b8a60c10">list</i>&nbsp;antiquotation. They all contain an expression, which evaluates dynamically to replace a part of the quoted node by its result. Child and referent antiquotations evaluate to a node, property antiquotation evaluates to string and list antiquotation evaluates to a list of nodes.</p>   <p id="fbec525d">For instance, you want to create a&nbsp;<i id="40de1726">ClassifierType</i>&nbsp;with the class&nbsp;<i id="b05ab66b">ArrayList</i>, but its type parameter is known only dynamically, for instance by calling a method, say, "computeMyTypeParameter()".</p>   <p id="0728c14b">Thus, you write the following expression:&nbsp;<i id="f10de41b">&lt; ArrayList &lt; %( computeMyTypeParameter() )% &gt; &gt;</i>. The construction&nbsp;<i id="58285c7d">%(...)%</i>&nbsp;here is a node antiquotation.</p>   <p id="5cf152cb">You may also antiquotate reference targets and property values, with&nbsp;<i id="92ffd0da">^(...)^</i>&nbsp;and&nbsp;<i id="ee76d9f3">$(...)$</i>, respectively; or a list of children of one role, using&nbsp;<i id="1a48c14d">*(...)*</i>.</p>   <p id="8031968e">a) If you want to replace a node somewhere inside a quoted node with a node evaluated by an expression, you use node antiquotation, that is %( )%. As you may guess there's no sense to replace the whole quoted node with an antiquotation with an expression inside, because in such cases you could instead write such an expression directly in your program.</p>   <p id="8f9e709b">So node antiquotations are used to replace children, grandchildren, great-grandchildren and other descendants of a quoted node. Thus, an expression inside of antiquotation should return a node. To write such an antiquotation, position your caret on a cell for a child and type "%".</p>   <p id="3a606a46">b) If you want to replace a target of a reference from somewhere inside a quoted node with a node evaluated by an expression, you use reference antiquotation, that is ^(...)^. To write such an antiquotation, position your caret on a cell for a referent and type "^".</p>   <p id="ff6d6af3">c) If you want to replace a child (or some more deeply located descendant), which is of a multiple-cardinality role, and if for that reason you may want to replace it not with a single node but rather with several ones, then use child list (simply list for brevity) antiquotations, *( )<b id="56b03fb0">. An expression inside a list antiquotation should return a list of nodes, that is of type * *</b>      <b id="56bcdd62">         <i id="a2223143">nlist&lt;..&gt;</i>      </b>      <b id="3761cfbe">* * or compatible type (i.e.* **{</b>}<i id="e472cd7a">list&lt;node&lt;..&gt;&gt;</i>* * is ok, too, as well as some others). To write such an antiquotation, position your caret on a cell for a child inside a child collection and type "<b id="85631771">". You cannot use it on an empty child collection, so before you press "</b>" you have to enter a single child inside it.</p>   <p id="c6048ec9">d) If you want to replace a property value of a quoted node by a dynamicаlly calculated value, use property antiquotation $( )$. An expression inside a quotation should return string, which will be a value for an antiquoted property of a quoted node. To write such an antiquotation, position your caret on a cell for a property and type "$".</p>   <h2 id="lightquotations(quotationbuilders)">Light quotations (quotation builders)</h2>   <p id="7ef4ad42">Using quotations has its downsides, though. For example, if you're creating quotations of a language in its own definition, you're creating a bootstrapping cycle that needs special treatment during language compilation (See <a href="removing-bootstrapping-dependency-problems.html">Removing Bootstrapping Dependency</a>). <b id="c91fe997">Light quotations</b>&nbsp;provide an alternative approach that will help you eliminate such issues.<br>       <figure><a class="lightbox" href="/help/img/idea/2019.1/quot3.png"><img alt="quot3" title="quot3" src="/help/img/idea/2019.1/quot3.png" id="77684b95" width="700" height="330"></a></figure>   </p>   <p id="0c949efc">The following two constructs, one using a quotation and the second using a light quotation are equivalent:</p>   <div class="code-block" data-lang="none">node&lt;IntegerType&gt; node1 = &lt;int&gt;;&nbsp;
node&lt;IntegerType&gt; node2 = &lt;IntegerType()&gt;;
</div>   <p id="68a33aad">Unlike direct&nbsp;<i id="14e31531">model</i>&nbsp;API usage,&nbsp;<b id="30461fa2">Light quotations</b> remain conveniently usable for deeper hierarchies:</p>   <div class="code-block" data-lang="none">node&lt;PlusExpression&gt; node3 = &lt;2 + 3&gt;;&nbsp;
node&lt;PlusExpression&gt; node4 = &lt;PlusExpression(&nbsp;
&nbsp; leftExpression: IntegerConstant(value: 2),&nbsp;
&nbsp; rightExpression: IntegerConstant(value: 3))&gt;;
</div><div class="last-modified" data-skip-index="skip">Last modified: 5 July 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="logging.html">Logging</a><a class="navigation-links__next" href="icon-description.html">Icon description</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>