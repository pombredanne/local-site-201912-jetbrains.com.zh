<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta name="robots" content="noindex"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><meta charset="UTF-8"><title>Run Configurations - Help | MPS</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Run+Configurations.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search MPS Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Windows/Linux Default</option><option data-group="primary" value="primary_default_for_gnome">GNOME</option><option data-group="primary" value="primary_default_for_kde">KDE</option><option data-group="primary" value="primary_default_for_xwin">XWin</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="secondary_intellij_idea_classic_os_x">IntelliJ IDEA Classic (Mac OS X)</option><option data-group="secondary" value="secondary_xcode">Xcode</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_resharper">ReSharper</option><option data-group="secondary" value="secondary_resharper_osx">ReSharper (Mac OS X)</option><option data-group="secondary" value="secondary_emacs">Emacs (Mac OS X)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Run+Configurations.html" id="run-configurations.xml">Run Configurations</h1>         <ul data-skip-index="skip"><li class="list__item"><a href="#introduction">Introduction</a></li><li class="list__item"><a href="#settings">Settings</a></li><li class="list__item"><a href="#persistentproperties">Persistent properties</a></li><li class="list__item"><a href="#integratingconfigurationsintooneanother">Integrating configurations into one another</a></li><li class="list__item"><a href="#templateparameters">Template parameters</a></li><li class="list__item"><a href="#commands">Commands</a></li><li class="list__item"><a href="#executecommandsections">Execute command sections</a></li><li class="list__item"><a href="#processbuilderexpression">ProcessBuilderExpression</a></li><li class="list__item"><a href="#debuggerintegration">Debugger integration</a></li><li class="list__item"><a href="#configurations">Configurations</a></li><li class="list__item"><a href="#executors">Executors</a></li><li class="list__item"><a href="#debuggerintegration">Debugger integration</a></li><li class="list__item"><a href="#producers">Producers</a></li><li class="list__item"><a href="#usefulexamples">Useful examples</a></li><li class="list__item"><a href="#personeditor">Person Editor</a></li><li class="list__item"><a href="#execcommand">Exec command</a></li><li class="list__item"><a href="#compilewithgccbeforetask">Compile with gcc before task</a></li><li class="list__item"><a href="#javaexecutor">Java Executor</a></li><li class="list__item"><a href="#javaproducer">Java Producer</a></li><li class="list__item"><a href="#runninganode,generatedintojavaclass">Running a node, generated into java class</a></li></ul>         <h3 id="introduction">Introduction</h3>   <p id="a3822e14">Run configurations allow users to define how to execute programs written in their language.</p>   <p id="eb299dec">An existing run configuration can be executed either from the run configurations box, located on the main toolbar,</p>         <figure><a class="lightbox" href="/help/img/idea/2019.1/runConfig1.png"><img alt="runConfig1" title="runConfig1" src="/help/img/idea/2019.1/runConfig1.png" id="2a634cf1" width="300" height="322"></a></figure>      <p id="9ee3b48b">by the "Run" menu item in the main menu</p>         <figure><a class="lightbox" href="/help/img/idea/2019.1/runConfig7.png"><img alt="runConfig7" title="runConfig7" src="/help/img/idea/2019.1/runConfig7.png" id="222dd72d" width="300" height="730"></a></figure>      <p id="a9d232f5">or through the run/debug popup (Alt+Shift+F10/Alt+Shift+F9).</p>         <figure><a class="lightbox" href="/help/img/idea/2019.1/runConfig6.png"><img alt="runConfig6" title="runConfig6" src="/help/img/idea/2019.1/runConfig6.png" id="906ce027" width="300" height="440"></a></figure>      <p id="d460f1a0">Run configurations could also be executed/created for nodes, models, modules and projects. For example, the JUnit run configuration could run all tests in a selected project, module or model. See <a href="#producers">Producers</a> on how to implement such behavior for your own run configurations.</p>         <figure><a class="lightbox" href="/help/img/idea/2019.1/runconfig3.png"><img alt="runconfig3" title="runconfig3" src="/help/img/idea/2019.1/runconfig3.png" id="7b8a912b" width="300" height="758"></a></figure>      <figure><a class="lightbox" href="/help/img/idea/2019.1/runconfig4.png"><img alt="runconfig4" title="runconfig4" src="/help/img/idea/2019.1/runconfig4.png" id="7b99ce49" width="300" height="596"></a></figure>      <figure><a class="lightbox" href="/help/img/idea/2019.1/runconfig5.png"><img alt="runconfig5" title="runconfig5" src="/help/img/idea/2019.1/runconfig5.png" id="27bc5977" width="300" height="648"></a></figure>      <p id="28d569a4">To summarize, run configurations define the following things:</p>   <ul class="list _ul"><li class="list__item" id="5292ecef">In the creation stage:<ul class="list _ul"><li class="list__item" id="97e75e14"><p>the configurations name, caption, icon;</p></li><li class="list__item" id="bab79639"><p>the configurations kind;</p></li><li class="list__item" id="50d9cba2"><p>how to create a configuration from node(s), model(s), module(s), project.</p></li></ul>      </li><li class="list__item" id="3e17ee1d">In the&nbsp;configuration stage:<ul class="list _ul"><li class="list__item" id="d37d4102"><p>persistent parameters;</p></li><li class="list__item" id="d9361226"><p>an editor for persistent parameters;</p></li><li class="list__item" id="94f64aab"><p>a checker of persistent parameters validity.</p></li></ul>      </li><li class="list__item" id="c45f1ec0">In the&nbsp;execution stage:<ul class="list _ul"><li class="list__item" id="91fb2b87"><p>the process, which is actually executed;</p></li><li class="list__item" id="3e25029c"><p>a console with all its tabs, action buttons and actual console window;</p></li><li class="list__item" id="c07bf6c2"><p>the things required for debugging this configuration (if it is possible).</p></li></ul>      </li></ul>   <p id="0d23da67">The following languages have been introduced to support run configurations in MPS.</p>   <ul class="list _ul"><li class="list__item" id="3c645bba"><p>         <code class="code">jetbrains.mps.execution.common</code> (common language) – contains concepts utilized by the other execution* languages;</p></li><li class="list__item" id="44c5d204"><p>         <code class="code">jetbrains.mps.execution.settings</code> (settings language) – a language for defining different setting editors;</p></li><li class="list__item" id="2afae896"><p>         <code class="code">jetbrains.mps.execution.commands</code> (command languages) – processes invocations from java;</p></li><li class="list__item" id="5cacaf31"><p>         <code class="code">jetbrains.mps.execution.configurations</code> (configurations language) – the run configurations definition;</p></li></ul>   <h3 id="settings">Settings</h3>   <p id="73c5d139">The Settings language allows to create setting editors and integrate them into one another. What we need from a settings editor is the following:</p>   <ul class="list _ul"><li class="list__item" id="34e759c5"><p>the fields to edit;</p></li><li class="list__item" id="78fb838a"><p>validation of fields' correctness;</p></li><li class="list__item" id="5f8746db"><p>an editor UI component;</p></li><li class="list__item" id="1c5a0582"><p>apply/reset functions to apply settings from the UI component and to reset settings in the UI component to the saved state;</p></li><li class="list__item" id="78af918f"><p>a dispose function to destroy the UI component when it is no longer needed.</p></li></ul>   <p id="9f8c1506">As you can see, settings have UI components. Usually, one UI component is created for multiple instances of settings. In the settings language settings are usually called "configurations" and their UI components are called "editors".</p>   <p id="8704132e">The main concept of settings language is <code class="code">PersistentConfigurationTemplate</code>. It has the following sections:</p>   <ul class="list _ul"><li class="list__item" id="88ccd1fc"><p>         <b id="a5729b68">persistent properties</b> - This section describes the actual settings we are editing. Since we want also to persist these settings (i.e. to write to xml/read from xml) and to clone our configurations, there is a restriction on their type: each property should be either <code class="code">Cloneable</code> or <code class="code">String</code> or any primitive type. There is also a special kind of property named <code class="code">template persistent property</code>, but they are going to be discussed later.</p></li><li class="list__item" id="a448174e"><p>         <b id="3d5e0f56">editor</b> - This section describes the editor of the configuration. It holds the following functions:&nbsp;<code class="code">create</code>, <code class="code">apply to</code>, <code class="code">reset from</code>, <code class="code">dispose</code>. A section can also define fields to store some objects of the editor. A&nbsp;<code class="code">create</code> function should return a swing component – the main UI component of the editor. <code class="code">apply to</code>/<code class="code">reset from</code> functions apply or reset settings in the editor to/from configuration given as a parameter. <code class="code">dispose</code> function disposes the editor.</p></li><li class="list__item" id="675597f0"><p>         <b id="23efe9c2">check</b> - In this section persistent properties are checked for correctness. If some properties are not valid, a <code class="code">report error</code> statement can be used. Essentially, this statement throws <code class="code">RuntimeConfigurationException</code>.</p></li><li class="list__item" id="d8582571"><p>         <b id="45ada746">additional methods</b> - This section is for methods, used in the configurations. Essentially, these methods are configuration instance methods.</p></li></ul>   <h4 id="persistentproperties">Persistent properties</h4>   <p id="2d2e3731">It was mentioned above that persistent properties could be either <code class="code">Cloneable</code> or <code class="code">String</code> or any primitive type. But if one uses the Settings language inside run configurations, those properties should also support xml persistence. Strings and primitives are persisted as usual. For objects the persistence is more complicated. Two types of properties are persisted for an object: public instance fields and properties with setXXX and getXXX methods. So, if one wish to use some complex type for a persistent property, he should either make all important fields public or provide setXXX and getXXX methods for whatever he wants to persist.</p>   <h4 id="integratingconfigurationsintooneanother">Integrating configurations into one another</h4>   <p id="0dd2de76">One of the two basic features of the Settings language is easy integration of one configuration into another. For that <code class="code">template persistent properties</code> are used.</p>   <h4 id="templateparameters">Template parameters</h4>   <p id="db1b0ffb">The second basic feature of the Settings language is template parameters. These somewhat resemble constructor parameters in java. For example, if one creates a configuration for choosing a node, he may want to parametrize the configuration with nodes concept. The concept is not a persistent parameter in this case: it is not chosen by the user. This is a parameter specified at configuration creation.</p>   <h3 id="commands">Commands</h3>   <p id="9f65237b">The Commands language allows you to start up processes from the code in a way it is done from a command line. The main concept of the language is <code class="code">CommandDeclaration</code>. In the declaration, command parameters and the way to start process with this parameters are specified. Also, commands can have debugger parameters and some utility methods.</p>   <h4 id="executecommandsections">Execute command sections</h4>   <p id="9d3dcb87">Each command can have several <code class="code">execute</code> sections. Each of this sections defines several execution parameters. There are parameters of two types: required and optional. Optional parameters can have default values and could be ommited when the command is started, while required cannot have default values and they are mandatory. Any two execute sections of the command should have different (by types) lists of required parameters. One execute section can invoke another execute section. Each execute section should return either values of <code class="code">process</code> or <code class="code">ProcessHandler</code> types.</p>   <h4 id="processbuilderexpression">ProcessBuilderExpression</h4>   <p id="46c68136">To start a process from a command execute section <code class="code">ProcessBuilderExpression</code> is used. It is a simple list of command parts. Each part is either <code class="code">ProcessBuilderPart</code>, which consists of an expression of type <code class="code">string</code> or <code class="code">list&lt;string&gt;</code>, or a <code class="code">ProcessBuilderKeyPart</code>, which represents a parameter with a key (like "-classpath /path/to/classes"). When the code generated from <code class="code">ProcessBuilderExpression</code> is invoked, each part is tested for being null or empty and ommited if so. Then, each part is split into multiple parts by spaces. So if you intent to provide a command part with a space in it and do not wish it to be split (for example, you have a file path with spaces), you have to put it into double quotes ("). The working directory of created process could be specified in the <b id="3af15212">Inspector</b>.</p>   <h4 id="debuggerintegration">Debugger integration</h4>   <p id="355c5c3e">To integrate a command with the debugger, two things are required to be specified:</p>   <ul class="list _ul"><li class="list__item" id="b1ef1e5d"><p>the specific debugger to integrate with;</p></li><li class="list__item" id="2a0dc798"><p>the command line arguments for a process.</p></li></ul>   <p id="e7b69fc8">To specify a debugger you can use&nbsp;<code class="code">DebuggerReference</code>&nbsp;– an expression of&nbsp;<code class="code">debugger</code>&nbsp;type in&nbsp;<code class="code">jetbrains.mps.debug.apiLang</code>&nbsp;– to reference a specific debugger. Debugger settings must be an object of type&nbsp;<code class="code">IDebuggerSettings</code>.</p>   <h3 id="configurations">Configurations</h3>   <p id="fc1ec8a9">The Configurations language allows to create run configurations. To create a run configuration, on should create an instance of <code class="code">RunConfiguration</code> (essentially, configuration from the settings language) and provide a <code class="code">RunConfigurationExecutor</code> for it. One also may need a <code class="code">RunConfigurationKind</code> to specify a kind of this configuration, <code class="code">RunConfigurationProducer</code> to provide a way of creating this configuration from nodes, models, modules and a <code class="code">BeforeTask</code> to specify, how to prepare the configuration before execution.</p>   <h4 id="executors">Executors</h4>   <p id="1250e3fe">Executor is a node, which describes how a process is started for this run configuration. It takes the settings that the user entered and creates a process from it. So, the executor's execute methods should return an instance of type <code class="code">process</code>. This is done via <code class="code">StartProcessHandlerStatement</code>. Anything that has a type <code class="code">process</code> or <code class="code">ProcessHandler</code> could be passed to it. A <code class="code">process</code> could be created in three different ways:</p>   <ol class="list _decimal"><li class="list__item" id="ac234572"><p>via command;</p></li><li class="list__item" id="b1d691ea"><p>via <code class="code">ProcessBuilderExpression</code> (recommended to use in commands only);</p></li><li class="list__item" id="fdc8a0ab"><p>by creating new instance of the <i id="241e5e9b">ProcessHandler</i> class; this method is recommended only if the above two do not fit you, for example when you are creating a run configuration for remote debugging and you do not really need to start a process.</p></li></ol>   <p id="480eff9b">The executor itself consists of the following sections:</p>   <ol class="list _decimal"><li class="list__item" id="23c91273"><p>"for" section where the configuration this executor is for and an alias for it is specified;</p></li><li class="list__item" id="9ddfa851"><p>"can" section where the ability of run/debug this configuration is specified; if the command is not used in this executor, one must provide an instance of <code class="code">DebuggerConfiguration</code> here;</p></li><li class="list__item" id="ba7a75b5"><p>"before" section with the call of tasks, which could be executed before this configuration run, such as Make;</p></li><li class="list__item" id="a798cf7d"><p>"execute" section where the process itself is created.</p></li></ol>   <h4 id="debuggerintegration">Debugger integration</h4>   <p id="3b594fab">If a command is used to start a process, nothing should be done apart from specifying a configuration as debuggable (by selecting "debug" in the executor). However, if a custom debugger integration is required, it is done the same way as in the command declaration.</p>   <h4 id="producers">Producers</h4>   <p id="7eac27bb">Producers for a run configuration describe how to create this configuration for various nodes or groups of nodes, models, modules or a project. This makes run configurations easily discoverable for users since for each producer they will see an action in the context menu suggesting to run the selected item. Also this simplifies configuring because it gives a default way to execute something without seeing the editing dialog first.</p>   <p id="7d97d49d">Each producer specifies one run configuration that it creates. It can have several <b id="664b8d42">produce from</b>&nbsp;sections for each kind of source the configuration can be produced from. This source should be one of the following: node&lt;&gt;, nlist&lt;&gt;, model, module, project. Apart from source, each <b id="3b825916">produce from</b>&nbsp;section has a <b id="9f402c72">create</b>&nbsp;section – a concept function parametrized with a source. The function should return either the created run configuration or null if it cannot be created for some reason.</p>   <h3 id="usefulexamples">Useful examples</h3>   <p id="03e3d54d">In this section you can find some useful tips and examples of run configurations usages.</p>   <h4 id="personeditor">Person Editor</h4>   <p id="bf6caee3">In this example an editor for a "Person" is created. This editor edits two properties of a person: name and e-mail address.</p>         <figure><img alt="personEditor" title="personEditor" src="/help/img/idea/2019.1/personEditor.png" id="9251ecb2" width="608" height="702"></figure>      <p id="9f264534">PersonEditor could be used from java code in the following way:</p>   <div class="code-block" data-lang="none">public class SettingsEditorDialogTest { 
  public static void main(string[] args) { 
    SwingUtilities.invokeLater(new Runnable() {
    public void run() {
    // create PersonEditor
    template configuration&lt;PersonEditor&gt; personEditor = new PersonEditor();
    // create dialog
    SettingsEditorDialog dialog = new SettingsEditorDialog(personEditor);
    // show dialog
    dialog.setVisible(true);
    // print name and email, specified by user
    System.out.println("name = " + personEditor.myName);
    System.out.println("email = " + personEditor.myEmail);
    }
    }); 
  }
}</div>   <h4 id="execcommand">Exec command</h4>   <p id="97002c39">This is an example of a simple command, which starts a given <code class="code">executable</code> with <code class="code">programParameters</code> in a given <code class="code">workingDirectory</code>.<br>       <figure><img alt="exec" title="exec" src="/help/img/idea/2019.1/exec.png" id="99dd70ae" width="786" height="261"></figure>   </p>   <h4 id="compilewithgccbeforetask">Compile with gcc before task</h4>   <p id="43032eea">This is an example of a <code class="code">BeforeTask</code> which performs compilation of a source file with the&nbsp;<code class="code">gcc</code> command. It also demonstrates how to use commands outside of run configurations executors.</p>         <figure><img alt="compilegcc" title="compilegcc" src="/help/img/idea/2019.1/compilegcc.png" id="cc2d23a4" width="738" height="759"></figure>      <p id="ab31375a">Note that this is just a toy example, in a real-life scenarios the task should show a progress window while compiling, for example.</p>   <h4 id="javaexecutor">Java Executor</h4>   <p id="3575d7bd">This is an actual executor for the Java run configuration from MPS.</p>         <figure><img alt="java" title="java" src="/help/img/idea/2019.1/java.png" id="967a64ac" width="819" height="296"></figure>      <h4 id="javaproducer">Java Producer</h4>   <p id="309fcdce">This is a producer for Java run configuration from MPS.</p>         <figure><img alt="producer" title="producer" src="/help/img/idea/2019.1/producer.png" id="d52c2249" width="907" height="454"></figure>      <p id="343cd622">You can see here three "produce from" sections. A Java run configuration is created here from nodes of <code class="code">ClassConcept</code>, <code class="code">StaticMethodDeclaration</code> or <code class="code">IMainClass</code>.</p>   <h4 id="runninganode,generatedintojavaclass">Running a node, generated into java class</h4>   <p id="da654ca3">Lets suppose you have a node of a concept which is generated into a java class with a main method and you wish to run this node from MPS. Then you do not have to create a run confgiuration in this case, but you should do the following:</p>   <ol class="list _decimal"><li class="list__item" id="87d81eeb"><p>The concept you wish to run should implement <code class="code">IMainClass</code> concept from <code class="code">jetbrains.mps.execution.util</code> language. To specify when the node can be executed, override <code class="code">isNodeRunnable</code> method.</p></li><li class="list__item" id="870e6db9">Unit information should be generated for the concept. Unit information is required to correctly determine the class name which is to be executed. You can read more about unit information, as whell as about all trace information, in <a href="debugger.html#traceablenodes">Debugger </a> section of MPS documentation. To ensure this check that one of the following conditions are satisfied:<ol class="list _decimal"><li class="list__item" id="bbed37b3"><p>a <code class="code">ClassConcept</code> from <code class="code">jetbrains.mps.baseLanguage</code> is generated from the node;</p></li><li class="list__item" id="5cb5cc24"><p>a node is generated into text (the language uses <code class="code">textGen</code> aspect for generation) and the concept of the node implements <code class="code">UnitConcept</code> interface from <code class="code">jetbrains.mps.traceable</code>;</p></li><li class="list__item" id="6ab4831d"><p>a node is genearted into a concept for which one of the three specified conditions is satisfied.</p></li></ol>      </li></ol><div class="last-modified" data-skip-index="skip">Last modified: 5 July 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="find-usages.html">Find usages</a><a class="navigation-links__next" href="suppressing-errors.html">Suppressing Errors</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>