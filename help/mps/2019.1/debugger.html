<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta name="robots" content="noindex"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><meta charset="UTF-8"><title>Debugger - Help | MPS</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Debugger.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search MPS Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Windows/Linux Default</option><option data-group="primary" value="primary_default_for_gnome">GNOME</option><option data-group="primary" value="primary_default_for_kde">KDE</option><option data-group="primary" value="primary_default_for_xwin">XWin</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="secondary_intellij_idea_classic_os_x">IntelliJ IDEA Classic (Mac OS X)</option><option data-group="secondary" value="secondary_xcode">Xcode</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_resharper">ReSharper</option><option data-group="secondary" value="secondary_resharper_osx">ReSharper (Mac OS X)</option><option data-group="secondary" value="secondary_emacs">Emacs (Mac OS X)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Debugger.html" id="debugger.xml">Debugger</h1>   <p id="7130b584">MPS provides an API for creating custom debuggers as well as integrating with debugger for java. See <a href="using-mps-debugger.html">Debugger Usage page</a> for a description of the MPS debugger features.</p>         <ul data-skip-index="skip"><li class="list__item"><a href="#thefundamentals">The fundamentals</a></li><li class="list__item"><a href="#debuggingbaselanguageanditsextensions-integrationwiththejavadebugger">Debugging BaseLanguage and its extensions - integration with the java debugger</a></li><li class="list__item"><a href="#startupofarunconfigurationunderjavadebugger">Startup of a run configuration under java debugger</a></li><li class="list__item"><a href="#customviewers">Custom viewers</a></li><li class="list__item"><a href="#creatingcustomdebugger">Creating custom debugger</a></li><li class="list__item"><a href="#traceablenodes">Traceable Nodes</a></li><li class="list__item"><a href="#breakpointcreators">Breakpoint Creators</a></li></ul>         <h3 id="thefundamentals">The fundamentals</h3>   <p id="d2163020">In order to debug code that gets generated from the user models, MPS needs to:</p>   <ul class="list _ul"><li class="list__item" id="e09e4c57"><p>track nodes in user models down to the generated code, in order to be able to match the two worlds seamlessly in the debugger</p></li><li class="list__item" id="e5798b79"><p>understand, which types of breakpoints can be created on what nodes</p></li><li class="list__item" id="37f45107"><p>know the options for starting the debugged code in the debugger</p></li><li class="list__item" id="230d307c"><p>optionally also have a set of customized viewers to display the current values of data in memory of the debugged program to the user</p></li></ul>   <p id="b515ee6b">MPS tries to automate as much of it as possible, however, in some scenarios the language designer also has to do her share of weight-lifting. Suppose you have a language, let's call it&nbsp;<b id="81603515">high.level</b>, which generates code in some language&nbsp;<b id="17af9fb4">low.level</b>, which in turn is generated directly into text (there can be several other steps between&nbsp;<b id="905046fc">high.level</b>&nbsp;and&nbsp;<b id="550365fd">low.level</b>). Suppose that the text generated from&nbsp;<b id="7e59376f">low.level</b>&nbsp;consists of java classes, and you want to have your&nbsp;<b id="fcc832d6">high.level</b>&nbsp;language integrated with MPS java debugger engine. See the following explanatory table:</p>   <div class="table-wrapper"><table class="                 " width="100%" id="e0a9daee"><thead><tr id="d5afa957" class="ijRowHead"><th id="7041c412">            <p id="12bce94c">               <b id="01580dce">high.level</b> extends or generates into <i id="f9fb794e">BaseLanguage</i>            </p>         </th><th id="e8040124">            <p id="dda86823">Do not have to do anything.</p>         </th></tr></thead><tbody><tr id="71a5ecff" class="ijRowOdd"><td id="9fbdbf85">            <p id="fb58f7a6">               <b id="95669afe">high.level</b> does not extend nor generates into <i id="3bc8402d">BaseLanguage</i>            </p>         </td><td id="ab34a02b">            <p id="77ff71d5">Specify which concepts in <b id="58cf1c12">low.level</b> are traceable. <br>Use <code class="code">breakpoint creators</code> to be able to set breakpoints for <b id="2ce04ae3">high.level</b>.</p>         </td></tr></tbody></table></div>      <h3 id="debuggingbaselanguageanditsextensions-integrationwiththejavadebugger">Debugging BaseLanguage and its extensions - integration with the java debugger</h3>   <p id="64a5c667">To integrate your <i id="849e98bf">BaseLanguage</i>-generated language with the MPS java debugger engine, you rarely need to specify anything. MPS can keep track of the generation trace in the <i id="27cc780d">trace.info</i> files, so breakpoints can be set as expected and the debugger correctly steps through your DSL code.&nbsp;</p>   <aside class="tip sideblock" data-title="" rel="64a5c667" id="8e29f061">      <p id="86092374">The automatic tracing recognizes situations, when a node gets transformed through a <b id="5065af8a">reduction rule</b>, and keeps a tracking record of the transformation in an appropriate model's <i id="577816df">trace.info</i> file. For concepts that do not get reduced through their own <b id="9609e9f7">reduction rules</b>, you may, however, indicate explicitly, which part of the generated code should be preserved in the <i id="f203ae48">trace.info</i> file. The <b id="73001428">$TRACE$</b> macro serves this purpose.</p>      <p id="85f5a425">See&nbsp;<a href="#traceablenodes">Traceable nodes</a> for more details and an example on the <b id="9b7f0bad">$TRACE$</b> macro usage.</p>   </aside>   <h4 id="startupofarunconfigurationunderjavadebugger">Startup of a run configuration under java debugger</h4>   <p id="246a7046">MPS provides a special language for creating run configurations for languages generated into java – <b id="eab2a48f">jetbrains.mps.baseLanguage.runConfigurations</b>. Those run configurations are able to start under debugger automatically. See <a href="run-configurations.html#introduction">Run configurations for languages generated into java</a> for details.</p>      <h4 id="customviewers">Custom viewers</h4>   <p id="298802fd">When one views variables and fields in a variable view, one may want to define one's own way to show certain values. For instance, collections could be shown as a collection of elements rather than as an ordinary object with all its internal structure.</p>   <p id="659208e1">For creating custom viewers MPS has <b id="cc23597c">jetbrains.mps.debugger.java.customViewers</b> language.</p>   <p id="fcd5a8de">The <i id="24039087">jetbrains.mps.debugger.java.customViewers</i> language&nbsp;enables one to write one's own viewers for data of certain form.</p>   <p id="4a095902">A main concept of customViewers language is a custom data viewer. It receives a raw java value (an objects on stack) and returns a list of so-called watchables. A watchable is a pair of a value and its label (a string which categorizes a value, for example, whether a value is a method, a field, an element, a size, and so on) Labels for watchables are defined in <code class="code">custom watchables container</code>. Each label could be assigned an icon.</p>   <p id="cc9b8f71">The viewer for a specific type is defined in a <code class="code">custom viewer</code> root. In the following table <code class="code">custom viewer</code> parts are described:</p>   <div class="table-wrapper"><table class="                 " width="100%" id="d3f2616c"><thead><tr id="f9c77d92" class="ijRowHead"><th id="0b633b06">            <p id="7c7c2d60">Part</p>         </th><th id="1d5bf730">            <p id="7ae93818">Description</p>         </th></tr></thead><tbody><tr id="2747fe08" class="ijRowOdd"><td id="20942bbb">                           <b id="74c5a15a">for type</b>                     </td><td id="2153e8ae">            <p id="2624d498">A type for which this viewer is intended.</p>         </td></tr><tr id="a340e203" class="ijRowEven"><td id="3738088d">                           <b id="7666c3d3">can wrap</b>                     </td><td id="7a2caf75">            <p id="d01651fe">An additional filter for viewed objects.</p>         </td></tr><tr id="539989f4" class="ijRowOdd"><td id="4ff142b7">                           <b id="d6d9b1f0">get presentation</b>                     </td><td id="785c7980">            <p id="341e09ed">A string representation of an object.</p>         </td></tr><tr id="77ab4fa1" class="ijRowEven"><td id="a7fc4569">                           <b id="522374ae">get custom watchables</b>                     </td><td id="c0863140">            <p id="93951e1a">Subvalues of this object. Result of this function must be of type <code class="code">watchable list</code>.</p>         </td></tr></tbody></table></div>   <p id="c0028784">Custom Viewers language introduces two new types: <code class="code">watchable list</code> and <code class="code">watchable</code>.</p>   <p id="a31aa069">This is the custom viewer specification for <code class="code">java.util.Map.Entry</code> class:</p>         <figure><img alt="Map entry viewer" title="Map entry viewer" src="/help/img/idea/2019.1/map-entry-viewer.png" id="a362e45d" width="924" height="456"></figure>      <p id="18101d7f">And here we see how a map entry is displayed in debugger view:</p>         <figure><img alt="Map entry" title="Map entry" src="/help/img/idea/2019.1/map-entry.png" id="4b4313cd" width="260" height="58"></figure>      <aside class="tip sideblock" data-title="" rel="3ab8aebb" id="25845d80">      <p id="15be1a17">Note that the <i id="a1ff2579">JDT-tools</i> solution must be imported into your plugin solution in order to compile your custom viewers.</p>   </aside>      <h3 id="creatingcustomdebugger">Creating custom debugger</h3>   <p id="848b0385">If generation of your language avoids&nbsp;<i id="e252d7af">BaseLanguage</i>, you'll need to take care of node tracing and breakpoint specification manually. Additionally, if you are generating languages other than Java, you'll have to attach the target platform debugger into MPS. The <b id="e95686c0">Debugger API</b> provided by MPS allows you to create such non-java debuggers. All the necessary classes are located in the "Debugger API for MPS" plugin. See also <a href="debugger-api.html">Debugger API description</a>.</p>   <p id="2eb2ee45">To summarize, when you target a language other than <i id="692db212">BaseLanguage</i>, you typically need to specify:</p>   <ul class="list _ul"><li class="list__item" id="53ae16b7"><p>nodes which should be traced (see&nbsp;<a href="#traceablenodes">Traceable nodes</a>)</p></li><li class="list__item" id="596d813a"><p>on which nodes breakpoints could be created (see&nbsp;<a href="#breakpointcreators">Breakpoint creators</a>)</p></li><li class="list__item" id="fbd49b0a"><p>how to compile your generated sources (see <a href="howto-integrating-into-the-mps-make-framework.html">Make facets</a>)</p></li><li class="list__item" id="c764bf5b"><p>how to start your application under debug (see <a href="run-configurations.html#introduction">Run configurations for languages generated into java</a>)</p></li></ul>   <p id="ead5cb60">Not all of those steps are absolutely necessary - which of them are depends on the actual language.</p>   <aside class="tip sideblock" data-title="" rel="ead5cb60" id="3976ceae">      <p id="fc408bde">The <b id="25bd30d3">customizedDebugger</b> sample project bundled with MPS will give you an easy-to-follow example of a non-<i id="1ea0135f">BaseLanguage</i> Java-generating language that customizes the breakpoints as well as node traces in order to support debugging.</p>   </aside>   <p id="03debc33">&nbsp;</p>      <h4 id="traceablenodes">Traceable Nodes</h4>   <p id="853eee9e">This section describes how to specify which nodes require to save some additional information in <span class="filepath">trace      .info</span> file (like information about positions text, generated from the node, visible variables, name of      the file the node was generated into, and so on). <span class="filepath">trace.info</span> files contain information allowing to      connect nodes in MPS with generated text. For example, if a breakpoint is hit, java debugger tells MPS the line      number in source file and to get the actual node from this information MPS uses information from <span class="filepath">trace         .info</span> files.</p>   <p id="f6b5571e">Specifically, <span class="filepath">trace.info</span> files contain the following information:</p>   <ul class="list _ul"><li class="list__item" id="bb17fb50"><p>position information: name of text file and position in it where the node was generated;</p></li><li class="list__item" id="e52e9152"><p>scope information: for each "scope" node (such that has some variables, associated with it and visible in the scope of the node) – names and ids of variables visible in the scope;</p></li><li class="list__item" id="d32223a4"><p>unit information: for each "unit node" (such that represent some unit of a language, for example a class in java) – name of the unit the node is generated into.</p></li></ul>         <figure><a class="lightbox" href="/help/img/idea/2019.1/tracex1.png"><img alt="trace" title="trace" src="/help/img/idea/2019.1/tracex1.png" id="8c09b372" width="500" height="2216"></a></figure>      <p id="40e805f1">Concepts <code class="code">TraceableConcept</code>, <code class="code">ScopeConcept</code> and <code class="code">UnitConcept</code> of language <code class="code">jetbrains.mps.lang.traceable</code> are used for that purpose. To save some information into <span class="filepath">trace.info</span> file, user should derive from one of those concepts and implement the specific behavior method. The concepts are described in the table below.</p>   <div class="table-wrapper"><table class=" wide                 " width="100%" id="fc145169"><thead><tr id="08b580dc" class="ijRowHead"><th id="f932036c">            <p id="6b901d49">Concept</p>         </th><th id="4ed3d8bc">            <p id="d6f0df96">Description</p>         </th><th id="0c9aaa87">            <p id="26ec2807">Behavior method to implement</p>         </th><th id="ef00032c">            <p id="45519e2d">Example</p>         </th></tr></thead><tbody><tr id="b7d0e4ea" class="ijRowOdd"><td id="51aa55df">                           <code class="code">TraceableConcept</code>                     </td><td id="8d6b8669">            <p id="a272d013">Concepts for which location in text is saved and for which breakpoints could be created.</p>         </td><td id="0fffb6c7">            <p id="1be0c8a6">               <code class="code">getTraceableProperty</code> – some property to be saved into <span class="filepath">trace.info</span> file.</p>         </td><td id="dc0c3db6">                           <figure><img alt="Position info" title="Position info" src="/help/img/idea/2019.1/positionInfo.png" id="0fac202f" width="462" height="207"></figure>                     </td></tr><tr id="2840bffa" class="ijRowEven"><td id="ee35317d">                           <code class="code">ScopeConcept</code>                     </td><td id="87ddbe92">            <p id="cc8d996d">Concepts which have some local variables, visible in the scope.</p>         </td><td id="4dd2258a">            <p id="279f783b">               <code class="code">getScopeVariables</code> – variable declarations in the scope.</p>         </td><td id="5bae97c8">                           <figure><img alt="Scope info" title="Scope info" src="/help/img/idea/2019.1/scopeInfo.png" id="f7aac483" width="607" height="181"></figure>                     </td></tr><tr id="f44428ca" class="ijRowOdd"><td id="d74337a1">                           <code class="code">UnitConcept</code>                     </td><td id="8328c102">            <p id="68448b8c">Concepts which are generated into separate units, like classes or inner classes in java.</p>         </td><td id="b08c7550">            <p id="0f1dc5bc">               <code class="code">getUnitName</code> – name of the generated unit.</p>         </td><td id="e0599a37">                           <figure><img alt="Unit info" title="Unit info" src="/help/img/idea/2019.1/unitInfo.png" id="88c47e48" width="611" height="322"></figure>                     </td></tr></tbody></table></div>   <p id="25fb22f4">      <span class="filepath">trace.info</span> files are created on the last stage of generation – while generating text. So the      described concepts are only to be used in languages generated into text. The entries are filled in automatically, whenever a&nbsp;<i id="6c06436b">TraceableConcept</i>,&nbsp;<i id="f3cd623d">ScopeConcept</i> or <i id="84b90306">UnitConcept</i> are being generated through a&nbsp;<b id="91b399fb">reduction rule</b>.</p>   <p id="0cf751b5">When automatic tracing is impossible, the $TRACE$ macro can be used in order to match the desired input node of a concept from <b id="7656a4c5">language.high</b> with the generated code explicitly.<br>       <figure><img alt="Trace marco" title="Trace marco" src="/help/img/idea/2019.1/traceMacro.png" id="d7d1c3c8" width="741" height="343"></figure>   </p>      <h4 id="breakpointcreators">Breakpoint Creators</h4>   <p id="78a75822">To specify how breakpoints are created on various nodes, root <code class="code">breakpoint creators</code> is used. This is a root of concept <code class="code">BreakpointCreator</code> from <code class="code">jetbrains.mps.debugger.api.lang</code> language. The root should be located in the language plugin model. It contains a list of <code class="code">BreakpointableNodeItem</code>, each of them specify a list of concept to create breakpoint for and a method actually creating a breakpoint. <code class="code">jetbrains.mps.debugger.api.lang</code>&nbsp;provides several concepts to operate with debuggers, and specifically to create breakpoints. They are described below.</p>   <ul class="list _ul"><li class="list__item" id="94cdfeac"><p>         <b id="2cda5f3d">DebuggerReference</b> – a reference to a specific debugger, like java debugger;</p></li><li class="list__item" id="652753bd"><p>         <b id="ab215c69">CreateBreakpointOperation</b> – an operation which creates a location breakpoint of specified kind on a given node for a given project;</p></li><li class="list__item" id="65a363d7"><p>         <b id="f5998743">DebuggerType</b> – a special type for references to debuggers.</p></li></ul>   <p id="a8e779ae">On the following example <code class="code">breakpoint creators</code> node from <code class="code">baseLanguage</code> is shown.</p>         <figure><img alt="breakpoints creator" title="breakpoints creator" src="/help/img/idea/2019.1/breakpoint-creators.png" id="89ef395d" width="734" height="262"></figure>      <p id="2cde8845">In order to provide more complex filtering behavior, instead of a plain complex list breakpoint creators can use <code class="code">isApplicable</code> function. There is an intention to switch to using this function.</p>   <p id="4624c146">&nbsp;</p><div class="last-modified" data-skip-index="skip">Last modified: 5 July 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="mps-console.html">Console</a><a class="navigation-links__next" href="debugger-api.html">Debugger API</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>