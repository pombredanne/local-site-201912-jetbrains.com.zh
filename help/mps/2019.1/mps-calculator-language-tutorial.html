<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta name="robots" content="noindex"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><meta charset="UTF-8"><title>MPS Calculator Language Tutorial - Help | MPS</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="MPS_Calculator_Language_Tutorial"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search MPS Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Windows/Linux Default</option><option data-group="primary" value="primary_default_for_gnome">GNOME</option><option data-group="primary" value="primary_default_for_kde">KDE</option><option data-group="primary" value="primary_default_for_xwin">XWin</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="secondary_intellij_idea_classic_os_x">IntelliJ IDEA Classic (Mac OS X)</option><option data-group="secondary" value="secondary_xcode">Xcode</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_resharper">ReSharper</option><option data-group="secondary" value="secondary_resharper_osx">ReSharper (Mac OS X)</option><option data-group="secondary" value="secondary_emacs">Emacs (Mac OS X)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="MPS_Calculator_Language_Tutorial" id="MPS_Calculator_Language_Tutorial.xml">MPS Calculator Language Tutorial</h1>    <p id="d78ba07c">In this tutorial</p>    <ul data-skip-index="skip"><li class="list__item"><a href="#fd1b633e">Introduction</a></li><li class="list__item"><a href="#1698c834">Implementing the template</a></li></ul>    <h3 id="fd1b633e">Introduction</h3>    <p id="dff6015a">This tutorial will guide through many areas of language design in MPS. You'll define an abstract structure of a        simple standalone language, design editors for them, constrain types, scopes and finally prepare a generator        that generates Java code. Depending on your prior exposure to MPS, the tutorial may require about a day of your        time to complete.        The tutorial primarily targets language designers, who need to evaluate MPS and want to see more than just a        bare-bone example. Basic knowledge of Java will help you complete the generator more easily.    </p>    <h4 id="b00a8961">Prerequisities</h4>    <p id="2b283067">The experience shows that if you want to avoid unnecessary glitches on your way throughout this tutorial, you need        to familiarize yourself with the MPS projectional editor. If you followed <a href="fast-track-to-mps.html">the Fast Track to MPS            tutorial</a>, you        are well prepared. If you didn't, do it now.<br>        It will guide you through the very basics of MPS and projectional editing, serving you new information        gradually in digestible chunks, so that when you eventually come back to this Calculator tutorial, you will        have the knowledge to benefit from the tutorial best.    </p>    <h4 id="Our_goal">Our goal</h4>    <p id="a76f579a">In this tutorial we will create a calculator language. The language will define a couple of simple entities that        describe some sort of computation. We call these entities<i id="9802e5c7">calculators</i>. A calculator has a set of        input and output values, plus it defines one or more math formulas to calculate output values using        the available input values.    </p>    <p id="624df8a7">We take an artificial use-case: a Java/PHP        <i id="0199769d">Developer</i>        who wants to quickly calculate her earnings by simply        entering the number of hours spent on Java and PHP projects. The resulting application would look as follows        (        <b id="5c6d1e65">Output</b>        value is calculated automatically from the hour values):    </p>    <figure><img alt="image001" title="image001" src="/help/img/idea/2019.1/image001.png" id="77aeaff3" width="245" height="146"></figure>    <p id="94723059">Our goal is to make it possible for our        <i id="3dab0e49">Developer</i>        to create such an application by writing only the        following 4 lines of code ("10" and "5" are just constants that denote corresponding payment rates for Java        and PHP):    </p>    <code class="code">calculator MySalary input PHP Hours input Java Hours output Java Hours*10 + PHP Hours*5</code>    <p id="40bf0515">The whole Swing-based application will be generated from these four lines of DSL code.</p>    <aside class="note " data-title="" rel="40bf0515" id="996ad449">        <p id="23151986">You may also watch this tutorial as a screen-cast.            <a href="https://www.youtube.com/watch?v=T1RErEvbgRc" data-external="true" target="_blank" rel="noopener noreferrer">Episode 1</a>            covers the tutorial core, while            <a href="https://www.youtube.com/watch?v=SOUrdcvUOtA" data-external="true" target="_blank" rel="noopener noreferrer">episode 2</a>            focuses on constraints and type-system definitions.        </p>    </aside>        <h4 id="Major_Steps">Major Steps</h4>    <p id="da7d87bb">In this tutorial, we:</p>    <ul class="list _ul"><li class="list__item" id="34143076"><p>Create a language which allows us to implement a calculator using the previously mentioned syntax. Our            language            will define the basic logical concepts that comprise a calculator, their construct specifications,            relationships, and individual behavior.        </p></li><li class="list__item" id="f91bc44f"><p>Create a generator that will define the rules for building swing applications from calculators.</p></li><li class="list__item" id="38c8ba6c"><p>Implement a calculator in our language.</p></li></ul>    <aside class="note " data-title="" rel="a41b1a4c" id="913332b2">        <p id="bc2552e9">It might seem that language creation takes too much effort for such a simple            application. Obviously, it can be created by means of any existing language much faster than with MPS.            However, our            goal is to demonstrate how MPS can help when you need a very specific functionality that is supposed to be            re-implemented multiple times. It also shows how straight-forward and simple development can be, when one            uses a            proper language for a particular task. In our case, people who only know how to write simple expressions can            create            such calculators, without knowing how to use Swing.        </p>    </aside>    <h4 id="Creating_a_project">Creating a project</h4>    <p id="990cea30">A project in MPS may consist of languages, solutions, or both. A bit further, you will see how it is        structured.    </p>    <p id="b38c0a32">First, we start MPS.</p>    <p id="0dff34a5">You see a welcome screen with different options: you can quickly open samples from here, start browsing        documentation, etc.    </p>    <p id="b658f335">Since we are going to create a new language, we need to create a new project first.</p>    <p id="0ef3c914">Click<b id="7a41f50f">File | New Project</b>. The wizard appears:    </p>    <figure><img alt="image002" title="image002" src="/help/img/idea/2019.1/image002.png" id="dbfbd715" width="736" height="605"></figure>    <p id="e028e15d">Let's name our project "calculator":</p>    <figure><img alt="image003" title="image003" src="/help/img/idea/2019.1/image003.png" id="1e2a2bd4" width="736" height="605"></figure>    <p id="5b60b685">Now we need to name the language (DSL) that we want to get created:</p>    <figure><img alt="image004" title="image004" src="/help/img/idea/2019.1/image004.png" id="9afcc9e8" width="736" height="605"></figure>    <p id="d25c73e1">We recommend the following naming convention for your languages. This convention is similar to that used for Java        packages:<i id="b34b0be1">companyName.meaningful.name</i>. So let's name our language        <i id="0066adff">jetbrains.mps.tutorial.calculator</i>.    </p>    <p id="1799a674">Additionally, check the        <i id="fa42cfcb">Create sandbox solution</i>        checkbox. A solution is a set of models written in specified        languages. We will be using the solution to test our newly created language right away.    </p>    <p id="2a4ffa9c">Ideally, you would have separate projects for languages and solutions that use those languages. However, we        recommend        that your project contains a "sandbox" solution for the language you are developing, so that you can instantly        test        your new language by writing sample applications.    </p>    <p id="be2d06bd">Now it is the time to hit<b id="32c30993">OK</b>.    </p>    <p id="491ac748">In the        <b id="c8088bd2">Project View</b>        that opens, expand the        <b id="48b875e5">            <i id="c8119281">jetbrains.mps.tutorial.calculator</i>        </b>        tree node marked with the        <i id="c3ac6376">language</i>        sign (<img alt="image007" title="image007" src="/help/img/idea/2019.1/image007.gif" id="9108abb6" width="16" height="16" class="inline-icon-16">):    </p>    <figure><img alt="image007 1" title="image007 1" src="/help/img/idea/2019.1/image007_1.png" id="d606c27c" width="1186" height="746"></figure>    <p id="4503fb6b">The "S"-marked tree node above it (<img alt="image009" title="image009" src="/help/img/idea/2019.1/image009.gif" id="e030ade8" width="16" height="16" class="inline-icon-16">) represents our        solution, and the        <b id="eee176d6">            <i id="6b3fad5d">Modules Pool</i>        </b>        node (<img alt="image010" title="image010" src="/help/img/idea/2019.1/image010.gif" id="640a2cfb" width="16" height="16" class="inline-icon-16">)        contains a collection of all available languages and solutions, for your reference. We'll take a closer look        at these items in further chapters.    </p>        <p id="d4261f17">Let us first explore the structure of the        <i id="a577cd5d">language</i>        node. This will also help us realize the basic ideas        behind MPS.    </p>    <p id="3eea4415">We see the child nodes of the language marked with the "M" diamond-shaped icon. They are called<i id="fa078c7d">aspect        models</i>. Unlike other languages where programs are usually stored in text files, in MPS they are stored        inside models. Each model represents a tree of<i id="d91a9321">nodes</i>, where each node may have a parent, child nodes,        properties and references to other nodes. Each node is defined by its<i id="3caa78ee">concept</i>.    </p>    <aside class="note " data-title="" rel="3eea4415" id="5e15f363">        <p id="d1bd2878">            <i id="41e65322">Concept</i>            is a basic term in MPS and one of its main structural            elements.        </p>    </aside>    <p id="0b9ab622">Aspect models comprising our language describe different features of a language (their icons differ by color).        For        now, we consider the 4 basic aspect models that we will need for our language:    </p>    <ul class="list _ul"><li class="list__item" id="09e064bb"><p>            <i id="12a3684f">structure</i> — describes the syntax of a language        </p></li><li class="list__item" id="65e43735"><p>            <i id="84a62849">editor</i> — describes how a model written in the language looks in the editor        </p></li><li class="list__item" id="fd750f3a"><p>            <i id="534bf5c8">constraints</i> — describes things like which name is appropriate for a node, which variable a            variable reference can point to, etc        </p></li><li class="list__item" id="90243a38"><p>            <i id="1fdc2efb">type system</i> — describes how to compute types of nodes        </p></li></ul>    <h4 id="Calculator_concept">Calculator concept</h4>    <p id="4cddd54b">Let's start working on our language.</p>    <p id="2b679daf">First, we need to create a top level concept, in our case<i id="0dd6933e">calculator</i>. Each instance of this concept will        contain input and output fields.    </p>    <p id="793dee89">To create a concept, right click the        <b id="a281fd06">            <i id="eff64fad">structure</i>        </b>        aspect model and choose        <b id="8974906a">New | concept</b>:    </p>    <figure><img alt="image008" title="image008" src="/help/img/idea/2019.1/image008.png" id="b751d428" width="1076" height="701"></figure>    <p id="e9c732a9">The concept declaration opens in the editor:</p>    <img alt="image009" title="image009" src="/help/img/idea/2019.1/image009.gif" id="1a0cbce8" width="16" height="16" class="inline-icon-16">    <p id="30dfe6f3">A concept declaration defines the class of nodes and specifies the structure of nodes in that class.</p>    <aside class="note " data-title="" rel="30dfe6f3" id="09bf287d">        <p id="4a81f09f">If you have worked with XML schemas or DTD, it can serve as a good analogy to help you understand            the approach used in MPS in defining node concepts and their individual elements.        </p>        <p id="47a7ab89">Limited analogy can be drawn with objects and classes in object oriented languages. Like class declares            structure            of its instances with fields, methods and other members, concept specifies its instances' structure with            property, reference and children declarations.        </p>    </aside>    <aside class="note " data-title="" rel="MPS_Calculator_Language_Tutorial.xml" id="95e2ed4f">        <p id="38c36b49">Unlike objects, which exist only during run time and don't exist within program code, node            instances exist during design time — as the program is being edited. A program source code consists            of node instances.        </p>    </aside>    <br>    <p id="d75059e4">A node can have the following elements, which are defined in the corresponding sections of the concept        declaration:    </p>    <ul class="list _ul"><li class="list__item" id="bd28b76f"><p>            <b id="5a97be98">Properties</b>            store primitive values inside a node. For example, you can define a node's name as a            property.        </p></li><li class="list__item" id="e337a453"><p>            <b id="aa24d655">References</b>            store links to other nodes. For example, we can use them to store a reference to a            local variable.        </p></li><li class="list__item" id="0ffe32cd"><p>            <b id="7fa9fa20">Children</b>            store aggregated nodes, i.e. nodes which are physically contained inside a current            node. For example, method declaration aggregates its return type and arguments. In our case these would be            input and output fields.        </p></li><li class="list__item" id="77ce717b"><p>            <b id="aa97740f">Other sections</b>            are quite advanced and we won't discuss them in this tutorial. You can read            about them in the MPS User's Guide.        </p></li></ul>    <p id="b9e151ff">Concept declarations form an inheritance hierarchy. By default, every concept extends the        <i id="7b379662">BaseConcept</i>        concept (you can see it immediately after the extends keyword). You can, however, specify another direct parent        instead as necessary. If a concept extends another, it inherits all properties, children, and references from        its parent.    </p>    <aside class="note " data-title="" rel="b9e151ff" id="4b4ebbad">        <p id="b907de7f">To edit an element in the editor, position the caret at its placeholder surrounded by grey            <b id="5674c531">                <i id="34a1d24a">&lt;                    &gt;</i>            </b>            symbols. To quickly navigate between the placeholders, press            <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Tab/Shift+Tab</span></kbd>.        </p>        <p id="bf3155b6">When within a placeholder, don't forget to use <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+Space</span></kbd>, as in most cases MPS would            have a list of relevant suggestions for auto-completion.        </p>        <p id="318d6cc9">            <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+Space</span></kbd>            is applicable almost everywhere in MPS editor. If you simply want to know            what can be entered at a particular place, just press <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+Space</span></kbd>. Possible options            will be displayed in the completion menu. You may consider checking out an            <a href="https://www.youtube.com/watch?v=zlVA60NhzWE" data-external="true" target="_blank" rel="noopener noreferrer">introductory screen-cast</a>            covering the            fundamental principals of working with the MPS projectional editor.        </p>    </aside>    <br>    <p id="45b18a76">So, let's name our concept<i id="72900ed2">Calculator</i>.    </p>    <p id="2541b100">Press        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Tab</span></kbd>        until you get to the 'instance can be root' placeholder, and press        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+Space</span></kbd>        to set its value to<b id="7f542ee1">true</b>. You can also type true directly,        you don't have to press        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+Space</span></kbd>        everywhere. This will let us create Calculator        instances through the        <b id="1ce47948">Create Root Node</b>        menu item in the        <b id="a7711cad">Project View</b>        (right as we did for our Calculator concept itself):    </p>    <img alt="image010" title="image010" src="/help/img/idea/2019.1/image010.gif" id="821fac9c" width="16" height="16" class="inline-icon-16">    <p id="858d5dc6">We will further need to reference our calculators by name. We could create a property        <i id="648a4721">name</i>        inside it;        however, there is a better way (and the recommended practice) to do so. We have to make our concept implement        the        <i id="bea89028">INamedConcept</i>        interface. This concept interface contains only one property — <i id="a0303682">name</i>.        MPS IDE knows about this interface and allows for more advanced support for concepts which implement it.        For example, if you want to create references to        <i id="1191afda">            <u id="01716e33">INamedConcept</u>        </i>        s, their names will be displayed        in completion menu; or when you explore your nodes in the<b id="5ae871f4">Project View</b>, you will see the        names of<i id="4ed05fc6">INamedConcept</i>s in the tree.    </p>    <p id="8e4763a9">Position the caret at the        <b id="d4529959">            <i id="7a22149e">&lt;none&gt;</i>        </b>        placeholder after the implements keyword,        and press        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+Space</span></kbd>        (for more details about effectively using the editor, please see        <a href="#Appendix_A">Appendix&nbsp;A</a>):    </p>    <img alt="image011" title="image011" src="/help/img/idea/2019.1/image011.gif" id="a47bbf23" width="16" height="16" class="inline-icon-16">    <p id="d0ace7f0">Choose        <i id="3960b0f6">INamedConcept</i>        and press <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Enter</span></kbd>:    </p>    <figure><img alt="image012" title="image012" src="/help/img/idea/2019.1/image012.png" id="f8dfe904" width="1186" height="746"></figure>    <p id="37cc1838">We have defined syntax for a node. Now we need to define its aspects. Let's create an editor.</p>    <h4 id="Creating_an_editor_for_Calculator">Creating an editor for Calculator</h4>    <p id="a21fb76b">MPS editor looks like a text editor but it isn't one exactly. It is a structural editor that works with the        syntax        tree directly.    </p>    <p id="47ea0f4b">You might wonder why someone would want to use a structural editor when almost all existing languages are        text-based.        Text based languages are good until we want to extend them. Text-based languages usually have a parser. In order        to        make parsing deterministic, the grammar should be carefully designed, which proves almost impossible in case of        language extensions. If we extend a language, we should extend its grammar, but since we don't know what other        extensions might do, we can't be sure whether this grammar is sufficient. Consider two language extensions which        add        monetary-value support for Java. Both of them would add the money keyword. When we parse some code that uses        these        two language extensions, we don't know how to interpret the money keyword. Should it be interpreted as a keyword        from the first language or from the second one? In case of the structural editor, where a program is stored        directly        as a syntax tree without intermediate text presentation, there's no such problem.    </p>    <p id="e52953a5">The structural editor in MPS uses cells to represent nodes. Like nodes, cells form a tree. There are several        types of cells:    </p>    <ul class="list _ul"><li class="list__item" id="44d61dcb"><p>            <b id="5c5e6a02">property cells</b>            are used to edit node's properties        </p></li><li class="list__item" id="92442737"><p>            <b id="1562caa6">constant cells</b>            always show the same value        </p></li><li class="list__item" id="ffa7c333"><p>            <b id="2a9bee13">collection cells</b>            are used to layout other cells inside of them        </p></li></ul>    <p id="340fcc44">We want the editor for our calculator to look as follows:</p>    <p id="377f9993">        <b id="154017f7">calculator</b>        name    </p>    <p id="6fa30d2a">To implement such a design, we do the following (keep using <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+Space</span></kbd>):    </p>    <ul class="list _ul"><li class="list__item" id="a074860d"><p>create an indent collection cell. Indent collection layouts cells text like way.</p></li><li class="list__item" id="bcd5bd85"><p>create a constant cell and property cells inside of the collection.</p></li></ul>    <p id="afb36018">To define new editor for Calculator concept you have to select        <b id="39dde438">Editor</b>        tab in the bottom line of        editor tabs — empty tab with        <b id="a3edda99">No Editor</b>        label on it will be displayed since editor        aspect was not defined yet for this concept. You can click onto this empty editor pane and choose        <b id="5b8a7165">concept editor</b>        from the assistance menu    </p>    <figure><img alt="image012 1" title="image012 1" src="/help/img/idea/2019.1/image012_1.png" id="15987c9f" width="1076" height="635"></figure>    <p id="8915ba75">to create a new editor</p>    <figure><img alt="image013" title="image013" src="/help/img/idea/2019.1/image013.png" id="7c4c8a8f" width="1186" height="746"></figure>    <p id="6619da83">Let's create a root indent collection cell. Press        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+Space</span></kbd>        and choose [- there:    </p>    <figure><img alt="image014" title="image014" src="/help/img/idea/2019.1/image014.png" id="dc40e98c" width="1075" height="635"></figure>    <p id="681999ac">Now, let's create a constant cell:</p>    <figure><img alt="image015" title="image015" src="/help/img/idea/2019.1/image015.png" id="2469dc83" width="1076" height="636"></figure>    <p id="dc6ed99e">and type        <i id="5654ecd2">calculator</i>        inside of it:    </p>    <figure><img alt="image016" title="image016" src="/help/img/idea/2019.1/image016.png" id="4508866c" width="1186" height="746"></figure>    <p id="99ac4e3f">You can enter this constant in one step if you type: "calculator. The        <b id="7b978c60">"</b>        symbol will make the cell        a constant cell.    </p>    <p id="24390627">Now we need a property cell for the        <i id="4a1f1c0f">name</i>        property (from the        <i id="8d37d0e2">INamedConcept</i>        concept interface).        To insert another cell at the end of the horizontal list, press        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Enter</span></kbd>        at the end        of calculator word and choose        <b id="ef3a74e9">            <i id="2544fc36">{name}</i>        </b>        in completion:    </p>    <figure><img alt="image017" title="image017" src="/help/img/idea/2019.1/image017.png" id="6dfd2163" width="1209" height="635"></figure>    <p id="44bcdbfc">Now, when the basics have been defined, we can Build our language and try to create an        instance of its concept. To build a language, choose the        <b id="abd521f8">Make Language</b>        action from our language's        popup menu in the<b id="630c28cb">Project View</b>.    </p>    <aside class="note " data-title="" rel="44bcdbfc" id="984ff83d">        <p id="6d2c3cb4">Make a language</p>        <p id="66209577">After you implement a change in the language, you need to "make" the language for the changes to take effect.            Remember in the future to run 'make' or alternatively a full 'rebuild' using the "Make Language"/"Rebuild            Language" commands from the pop-up menu before trying to use the updated language in your programs.        </p>    </aside>    <figure><img alt="image018" title="image018" src="/help/img/idea/2019.1/image018.png" id="96044fce" width="1077" height="636"></figure>    <p id="cd4a5842">The code was generated, so you can create and edit instances of this concept in MPS models.        MPS probably created an empty solution model for you already during the initial project creation.        If you for some reason do not have a model, we can create a new MPS model in        <i id="e82625c3">jetbrains.mps.tutorial.calculator.sandbox</i>        now: right-click on sandbox node in project tree        and choose        <i id="47f4b0a0">New | Model</i>        from the pop-up menu.    </p>    <figure><img alt="image018 1" title="image018 1" src="/help/img/idea/2019.1/image018_1.png" id="2ae43815" width="1073" height="635"></figure>    <p id="4e52c108">Type        <b id="a819d473">jetbrains.mps.tutorial.calculator.sandbox</b>        in the        <b id="749890ee">Model name</b>        field        of New Model dialog    </p>    <figure><img alt="image018 2" title="image018 2" src="/help/img/idea/2019.1/image018_2.png" id="7450a2bd" width="777" height="348"></figure>    <p id="9a2b8ea9">and press        <b id="b59f2172">Ok</b>        button. In order to use        <b id="f59e3c58">jetbrains.mps.tutorial.calculator</b>        language        inside this model you have to import it by pressing        <b id="fb0a1e82">+</b>        button in        <b id="ea77e5b0">Used Languages</b>        section of the displayed        <b id="82a9ee72">Model Properties</b>        dialog and choosing jetbrains.mps.tutorial.calculator        language:    </p>    <figure><img alt="image018 3" title="image018 3" src="/help/img/idea/2019.1/image018_3.png" id="b95697e8" width="948" height="428"></figure>    <p id="903209b5">Now you can press        <b id="61e9a3da">OK</b>        in the        <b id="119a2dbb">Model Properties</b>        dialog to finally create a sandbox        model and start working with Calculator instances there.    </p>    <h4 id="Define_your_first_calculator">Define your first calculator</h4>    <p id="87d1884a">Click the sandbox model, and then choose Calculator from the New menu:</p>    <figure><img alt="image019" title="image019" src="/help/img/idea/2019.1/image019.png" id="2aade988" width="1075" height="673"></figure>    <p id="44d57211">You will have a simple calculator where you can type in a name:</p>    <figure><img alt="image020" title="image020" src="/help/img/idea/2019.1/image020.png" id="c9c446a1" width="1186" height="746"></figure>    <p id="d0a93333">Type the name in the property cell. For our example, we took the        <i id="615bf755">MyCalc</i>        name.    </p>    <p id="0e8eec6f">As you can see, the calculator's editor is quite similar to what we have written in the        <i id="7eaf80dc">editor</i>        aspect.    </p>    <h4 id="Input_Fields">Input Fields</h4>    <p id="fdad67e4">Now let's create concepts for input fields. The field will implement        <i id="1f935389">INamedConcept</i>        since we want to        reference it in the output fields. We need it since when we reference a node, we need to see it in the        completion        menu. In case of        <i id="19b52395">INamedConcept</i>        instances, their names are correctly displayed, since MPS understands        what names these instances have. It is certainly possible to reference concepts other than        <i id="ee475942">INamedConcept</i>, but        <i id="216f9cdc">INamedConcept</i>        is the easiest way to do so.    </p>    <figure><img alt="image021" title="image021" src="/help/img/idea/2019.1/image021.png" id="c0f11e76" width="1186" height="746"></figure>    <p id="84045f76">Let's create an editor for it:</p>    <figure><img alt="image022" title="image022" src="/help/img/idea/2019.1/image022.png" id="47eb5974" width="1186" height="746"></figure>    <p id="5a62e225">In order for the calculator to contain input fields, we need to adapt its structure        and editor a little. Let's create a child of type InputField to Calculator with 0..n cardinality.        To do so, put a caret on children section and press        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Enter</span></kbd>        or <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Insert</span></kbd>. After that, specify InputField as a target Concept, set child        name to inputField and cardinality to 0..n:    </p>    <figure><img alt="image023" title="image023" src="/help/img/idea/2019.1/image023.png" id="42739a89" width="1186" height="746"></figure>    <p id="fd16ef13">Now we add a new line to name cell. A light bulb will appear when you position the cursor on the name cell.        Actions that can be invoked with a light bulb are called<i id="8f2a2842">intentions</i>. There are a lot of them        in different languages. In case you don't know how to enter something, in addition to pressing        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+Space</span></kbd>        you can press        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Alt+Enter</span></kbd>        and use corresponding        intention. Now press        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Alt+Enter</span></kbd>        and apply the        <i id="3319f0e7">Add New Line</i>        intention.    </p>    <figure><img alt="image024" title="image024" src="/help/img/idea/2019.1/image024.png" id="276955fe" width="1073" height="633"></figure>    <p id="384f9ebd">Now we want to show a vertical list of input fields in editor. Press        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Enter</span></kbd>        in the end of        {name} label and then press <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+Space</span></kbd>. Choose %inputField% there:    </p>    <figure><img alt="image025" title="image025" src="/help/img/idea/2019.1/image025.png" id="64a21734" width="1156" height="637"></figure>    <p id="323d6222">We want input field to be placed verticaly. So, a new line should be added after every cell. This can be done        with an        intention: press        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Alt+Enter</span></kbd>        and choose<i id="0c729494">Add New Line for Children</i>.    </p>    <figure><img alt="image026" title="image026" src="/help/img/idea/2019.1/image026.png" id="56f36d06" width="1074" height="633"></figure>    <p id="acaeac88">Now let's make our language using the pop-up menu on the        <i id="071555f1">Language</i>        node in the left-hand side        <i id="eb201121">Project View</i>        panel (you can also press        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl/Cmd+F9</span></kbd>        to do it) and take a look at our        sandbox:    </p>    <figure><img alt="image027" title="image027" src="/help/img/idea/2019.1/image027.png" id="0ab8b968" width="1186" height="746"></figure>    <p id="b26678dd">The editor has been updated. Now we have the cell below the line with a name where we can add new input fields.        Let's add a couple        of input fields:    </p>    <figure><img alt="image028" title="image028" src="/help/img/idea/2019.1/image028.png" id="61a13a97" width="1186" height="746"></figure>    <h4 id="Output_fields">Output fields</h4>    <p id="2ed1a3d3">Let's create a concept for output field. It doesn't need to contain a property name since we want to reference        values        in input fields only (compare with InputField that implements INamedConcept):    </p>    <figure><img alt="image029" title="image029" src="/help/img/idea/2019.1/image029.png" id="3e785f35" width="1186" height="746"></figure>    <p id="fc838e72">Let's create an editor for it:</p>    <figure><img alt="image030" title="image030" src="/help/img/idea/2019.1/image030.png" id="fc342b35" width="1186" height="746"></figure>    <p id="85a4360d">Let's add a child of type OutputField to the calculator concept:</p>    <figure><img alt="image031" title="image031" src="/help/img/idea/2019.1/image031.png" id="ea0d661f" width="1186" height="746"></figure>    <p id="d5c1bef8">Now we change its editor. You can use copy/paste here; use        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+Up/Down</span></kbd>        to select cells,        then        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+C/V</span></kbd>        to copy/paste. In order to paste a node after %inputField% collection, press        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+V</span></kbd>        on the closing "-)" parenthesis. Replace inputField with outputField.    </p>    <figure><img alt="image032" title="image032" src="/help/img/idea/2019.1/image032.png" id="0bd89fee" width="1186" height="746"></figure>    <p id="4d0af132">We separated input fields from the output field with an empty cell.        To add it, position the caret after inputField's cell and press Enter,        choose constant, then using        <b id="96f1db15">Add new line</b>        intention add line separator after this constant.    </p>    <figure><img alt="image033" title="image033" src="/help/img/idea/2019.1/image033.png" id="e4aea1f3" width="1186" height="746"></figure>    <p id="a4025138">Now, let's make our language (right-click on the        <i id="6a2ebdfb">Language</i>        or hit<i id="6d59b9b7">Control/Cmd + F9</i>) and take a look at our sandbox concept:    </p>    <figure><img alt="image034" title="image034" src="/help/img/idea/2019.1/image034.png" id="6009ba86" width="1186" height="746"></figure>    <p id="51b84b55">We can add output fields but we can't type any expressions inside it since we haven't declared anything to allow        storing expressions:    </p>    <figure><img alt="image035" title="image035" src="/help/img/idea/2019.1/image035.png" id="fdaa23a9" width="1186" height="746"></figure>    <h4 id="Adding_expressions_support">Adding expressions support</h4>    <p id="890474fa">In MPS we have BaseLanguage, the MPS's counterpart of Java. When we create a new language, we often extend it or        reuse concepts from the BaseLanguage. Let's reuse its expression language for our output fields. To do so, we        need        to make our language extend BaseLanguage. Language extension in MPS means that you can use and extend concepts        from        extended language. We want to use the Expression concept from BaseLanguage, so we need to add it to the extended        languages section. Open the language properties dialog:    </p>    <figure><img alt="image036" title="image036" src="/help/img/idea/2019.1/image036.png" id="4e274185" width="1075" height="668"></figure>    <p id="7f9b3ff4">Let's add BaseLanguage to the list of extended languages. To do this, select the        <b id="43da0133">Dependencies</b>        tab,        click        the Add button (<img alt="image011" title="image011" src="/help/img/idea/2019.1/image011.gif" id="e2381643" width="16" height="16" class="inline-icon-16">) and choose        <i id="a3f37e23">jetbrains.mps.baseLanguage</i>. Then select        <b id="5005386c">Extends</b>        from the drop-down box for<i id="ae14c5aa">Scope</i>.    </p>    <figure><img alt="image037" title="image037" src="/help/img/idea/2019.1/image037.png" id="0ec263e1" width="924" height="690"></figure>    <p id="67766d0e">BaseLanguage contains an        <i id="81b80dd6">Expression</i>        concept. It represents expressions of the form: "2", "2+3", "abc+abc",        etc. It's exactly what we need for our output field expression. Let's take a look at it. Press        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+N</span></kbd>        and choose Expression from the BaseLanguage there:    </p>    <figure><img alt="image038" title="image038" src="/help/img/idea/2019.1/image038.png" id="33d8c986" width="1074" height="635"></figure>    <p id="2f9f9143">Expression itself is an abstract concept. Let's take a look at it:</p>    <figure><img alt="image039" title="image039" src="/help/img/idea/2019.1/image039.png" id="498f2740" width="1186" height="746"></figure>    <p id="23aff7bc">An expression has no properties of its own. So let's take a look at its subconcepts in order to understand which        kinds of expressions we have in MPS. Choose 'Show Concept in Hierarchy' action in popup menu:    </p>    <figure><img alt="image040" title="image040" src="/help/img/idea/2019.1/image040.png" id="21aaa076" width="1076" height="635"></figure>    <p id="d714b7b3">As you can see, there are a lot of different expressions in different languages. Expression is extended very        widely:    </p>    <figure><img alt="image041" title="image041" src="/help/img/idea/2019.1/image041.png" id="277acccc" width="1186" height="746"></figure>    <p id="93915e36">Now let's add a child of type expression to the OutputField:</p>    <figure><img alt="image042" title="image042" src="/help/img/idea/2019.1/image042.png" id="325bcbb6" width="1186" height="746"></figure>    <p id="24b579da">And change its editor accordingly (you can use        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+Space</span></kbd>        here):    </p>    <figure><img alt="image043" title="image043" src="/help/img/idea/2019.1/image043.png" id="bb358471" width="1186" height="746"></figure>    <p id="bced1fe9">Now let's make the language (right-click on the        <i id="90e126bd">Language</i>        or hit<i id="a3d26e73">Control/Cmd + F9</i>) and take a look at what we've got:    </p>    <figure><img alt="image044" title="image044" src="/help/img/idea/2019.1/image044.png" id="6791791c" width="1186" height="746"></figure>    <p id="0ee1c772">You may need to add BaseLanguage to the dependencies of your model:</p>    <figure><img alt="image044 1" title="image044 1" src="/help/img/idea/2019.1/image044_1.png" id="27ec865b" width="1077" height="698"></figure>    <figure><img alt="image044 2" title="image044 2" src="/help/img/idea/2019.1/image044_2.png" id="c423685c" width="1060" height="538"></figure>    <p id="29e24f20">Now we can type expressions in output fields, but, unfortunately, we still can't reference the input fields        there:    </p>    <figure><img alt="image045" title="image045" src="/help/img/idea/2019.1/image045.png" id="e67e7446" width="1186" height="746"></figure>    <h4 id="Extending_Expressions_concept">Extending Expressions concept</h4>    <p id="1456b102">In order to support references to input fields, we need to create our own kinds of Expression. Let's name it        "InputFieldReference" and make it extend<i id="87abb01f">Expression</i>. Let's create it:    </p>    <figure><img alt="image046" title="image046" src="/help/img/idea/2019.1/image046.png" id="d66bbbdc" width="1186" height="746"></figure>    <p id="ac93cf4f">We added a reference here. It has type InputField, and 1-cardinality. Concepts, which have exactly one reference        of        1-cardinality, are called smart references and have special support in the editor. You will learn more about it        a        little bit later. Now let's create an editor for it. Choose %field%-&gt;:    </p>    <figure><img alt="image047" title="image047" src="/help/img/idea/2019.1/image047.png" id="314865c2" width="1106" height="634"></figure>    <p id="3035e1a8">And inside of the rightmost cell, choose {name}:</p>    <figure><img alt="image048" title="image048" src="/help/img/idea/2019.1/image048.png" id="2243842e" width="1186" height="746"></figure>    <p id="636d40dd">We use %field%-&gt; {name} to show a name of a node that is referenced by the field reference.</p>    <p id="bf820919">Now make our language, and take a look at what we've got. We can now type input field for our nodes:</p>    <figure><img alt="image049" title="image049" src="/help/img/idea/2019.1/image049.png" id="42b5d591" width="1075" height="635"></figure>    <p id="d88e3f00">This is possible because of smart references. Here's how they work. If a concept which is a smart reference is        available in the current context, MPS takes a look at a list of possible nodes, which it can reference, and adds        one        completion item for each such a node. That's why we have width, height, depth in the completion menu.    </p>    <h4 id="Creating_a_generator">Creating a generator</h4>    <p id="81d490ae">Let's create a generator for our language — we want to generate an implementation in Java. MPS might have        created        one already for you, but if it didn't, choose        the        <b id="9112942b">New-&gt;Generator</b>        menu item in the Language        pop-up menu:    </p>    <figure><img alt="image050" title="image050" src="/help/img/idea/2019.1/image050.png" id="f6f9f4bf" width="899" height="598"></figure>    <p id="809b51b2">Leave generator name empty:</p>    <figure><img alt="image051" title="image051" src="/help/img/idea/2019.1/image051.png" id="03aaef2d" width="736" height="289"></figure>    <p id="70302fe2">Now your language contains a new generator:</p>    <figure><img alt="image052" title="image052" src="/help/img/idea/2019.1/image052.png" id="2a220a25" width="1186" height="746"></figure>    <p id="2883003b">The entry point of a generator is a mapping configuration. It specifies which nodes are transformed and how:</p>    <figure><img alt="image053" title="image053" src="/help/img/idea/2019.1/image053.png" id="16ab87c7" width="1186" height="746"></figure>    <h4 id="Deciding_what_to_generate">Deciding what to generate</h4>    <p id="518f529b">Before we start developing a generator, we need to think about what kind of code we want to generate. We might        want        to generate something like this:    </p>    <code class="code">public class Sandbox extends JFrame { private JTextField myInput1 = new JTextField(); private JTextField myOutput = new JTextField(); private MyListener myListener = new MyListener(); public Sandbox() { setTitle("Sandbox"); setLayout(new GridLayout(0, 2)); myInput1.getDocument().addDocumentListener(myListener); add(new JLabel("Input 1")); add(myInput1); add(new JLabel("Output")); add(myOutput); update(); setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); pack(); setVisible(true); } private void update() { int i1 = 0; try { i1 = Integer.parseInt(myInput1.getText()); } catch (NumberFormatException e) { } myOutput.setText("" + (i1)); } private class MyListener implements DocumentListener { public void insertUpdate(DocumentEvent e) { update(); } public void removeUpdate(DocumentEvent e) { update(); } public void changedUpdate(DocumentEvent e) { update(); } } public static void main(String[] args) { SwingUtilities.invokeLater(new Runnable() { public void run() { new Sandbox(); } }); } }</code>    <br>    <p id="79c621d5">Here's how our application looks when executed:</p>    <figure><img alt="image054" title="image054" src="/help/img/idea/2019.1/image054.png" id="4d907454" width="170" height="91"></figure>    <p id="3ac558ee">Now let's implement it.</p>    <h4 id="Implementing_generator">Implementing generator</h4>    <p id="43ef1312">Let's first create a skeleton for the main class. We need to create a class with the update method, main method        and        DocumentListener that invokes the update method etc. Let's choose a new class from the new menu:    </p>    <figure><img alt="image055" title="image055" src="/help/img/idea/2019.1/image055.png" id="9d092aa7" width="1074" height="652"></figure>    <p id="a72327f5">And you will get this:</p>    <figure><img alt="image056" title="image056" src="/help/img/idea/2019.1/image056.png" id="54a87834" width="1186" height="746"></figure>    <p id="feebce20">As you can see, MPS added a root template annotation on the top of a class. Every non generator language node        inside        of generator model is treated as template. Every template should have an input node, the node which is used to        generate from. A root template annotation is required in order to specify the type of this input node. Let's set        input to Calculator:    </p>    <figure><img alt="image057" title="image057" src="/help/img/idea/2019.1/image057.png" id="e7d8d972" width="1186" height="746"></figure>    <p id="5a86f6c4">Let's give a name to the class:</p>    <figure><img alt="image058" title="image058" src="/help/img/idea/2019.1/image058.png" id="0825a1cf" width="1186" height="746"></figure>    <p id="e771e65a">Now let's create a rule in mapping, which will generate a class with this template from each calculator in our        input        model. Let's add this to the mapping:    </p>    <figure><img alt="image059" title="image059" src="/help/img/idea/2019.1/image059.png" id="5a2ec44b" width="1186" height="746"></figure>    <p id="c18e1d21">This rule instructs to take each        <i id="cfdf8027">Calculator</i>        from the input model and apply to it to the<i id="08d5d4cf">Calculator template</i>. Let's        rebuild our language (right-click on the        <i id="a21184d2">Language</i>        and choose<i id="8b54cc2d">Rebuild Language</i>) and then preview the text generated from our model:    </p>    <figure><img alt="image060" title="image060" src="/help/img/idea/2019.1/image060.png" id="5dc8cf87" width="1076" height="690"></figure>    <p id="520787d0">We will obtain the output into a new editor tab, labelled with the name of the generated Java file:</p>    <figure><img alt="image061" title="image061" src="/help/img/idea/2019.1/image061.png" id="c0d636f4" width="1186" height="746"></figure>    <p id="6118059c">As you can see, there is one class with the name CalculatorImpl in the output.</p>    <h3 id="1698c834">Implementing the template</h3>    <aside class="note " data-title="" rel="1698c834" id="80fe68f3">        <p id="be901f46">Why is this so tedious?</p>        <p id="17a46ef7">You might be asking this question now or later in the process of building the generator, especially if you            are not versed in Java programming. Remember, this tutorial was not created as a motivation example that            gives you quick reward of having a functional application with minimum effort. Its purpose is to expose you            to a wide range of core principles so that you better understand the underlying machinery. Language            implementers, who realize languages in MPS, need to understand the MPS generator as well as Java, since Java            is the most frequent target of code generation in MPS.            We can give you three advices:        </p>        <ol class="list _decimal"><li class="list__item" id="c8d8d8ab"><p>For quick and funny examples, feel free to turn to the<a href="fast-track-to-mps.html">Fast Track to MPS                tutorial</a>, watch the screen-casts and try the samples bundled with MPS. You may get back to this                tutorial once you are certain that MPS can give you the solutions that you are looking for.            </p></li><li class="list__item" id="ba94167c"><p>Open the calculator-tutorial sample project that has been installed in your home folder during MPS                installation and continue in this tutorial while playing with the already implemented language.            </p></li><li class="list__item" id="1fa33d81"><p>Do it the hard and brave way - continue in this tutorial and get your own language implementation in the                end.            </p></li></ol>    </aside>    <p id="00809d53">Let's make our template use the name of the Calculator node that we give it in the source model. Put the caret on        the        class name. Press        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Alt+Enter</span></kbd>        and choose the<i id="6574a7f5">Add Property Macro</i>:    </p>    <figure><img alt="image062" title="image062" src="/help/img/idea/2019.1/image062.png" id="58689ded" width="1074" height="635"></figure>    <p id="205208af">Property macros allow us to specify a value for a property, which depends on an input node. Let's type this into        the        inspector:    </p>    <figure><img alt="image063" title="image063" src="/help/img/idea/2019.1/image063.png" id="aa63e8ca" width="1186" height="746"></figure>    <p id="6d0b820d">Now let's rebuild the language again (right-click on the        <i id="1863d585">Language</i>        and choose<i id="3949bafe">Rebuild Language</i>) and then preview the code generated from our sandbox model.        You will see a class with the correct name corresponding to the name of the Calculator instance:    </p>    <figure><img alt="image064" title="image064" src="/help/img/idea/2019.1/image064.png" id="a1fafd44" width="1186" height="746"></figure>    <p id="8e3243ee">Now, let's enter the rest of the class skeleton into the template. To do so, we need to import models        corresponding        to Java classes. If one model imports another, an importing model can reference nodes from another. In order to        simplify interoperation with Java, MPS can create models corresponding to jar-files or folders with classes.        These        models have names of the package.name@java_stub form and can be added from the model properties dialog:    </p>    <figure><img alt="image065" title="image065" src="/help/img/idea/2019.1/image065.png" id="b3bd25bd" width="1196" height="679"></figure>    <p id="a57b4332">Let's import javax.swing@java_stub, javax.swing.event@java_stub, java.awt@java_stub and        javax.swing.text@java_stub        models into the template model:    </p>    <figure><img alt="image066" title="image066" src="/help/img/idea/2019.1/image066.png" id="f1fe7898" width="934" height="597"></figure>    <p id="613090a9">Let's inherit our class from JFrame, create a main method, a documentListener field, and an update method in the        Calculator template. Note that you should create the update method before you create calls to it.    </p>    <figure><img alt="image067" title="image067" src="/help/img/idea/2019.1/image067.png" id="21e29642" width="1187" height="746"></figure>    <p id="2c167500">Now let's create code that will set up a frame for us:</p>    <figure><img alt="image068" title="image068" src="/help/img/idea/2019.1/image068.png" id="d39c4ec5" width="1066" height="712"></figure>    <p id="740c8a84">Put a property macro on "Calculator" string and add node.name to the inspector so as the title reflexes the name        of        the calculator:    </p>    <figure><img alt="image069" title="image069" src="/help/img/idea/2019.1/image069.png" id="80cdb851" width="1066" height="712"></figure>    <p id="1c97f14e">Now let's create a visual text field component for each input field. First, we need to add a single text field of        the        JTextField type:    </p>    <figure><img alt="image070" title="image070" src="/help/img/idea/2019.1/image070.png" id="f3b485da" width="1066" height="712"></figure>    <p id="47929afd">Now we'll make sure such a text field gets created for each calculator's input field. Let's select the whole        field        declaration (use        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+Up/Down</span></kbd>        shortcuts) and choose Add Node        Macro:    </p>    <figure><img alt="image071" title="image071" src="/help/img/idea/2019.1/image071.png" id="e6e6b2d4" width="954" height="600"></figure>    <p id="b40ba35c">We get the following:</p>    <figure><img alt="image072" title="image072" src="/help/img/idea/2019.1/image072.png" id="5da37d17" width="1066" height="712"></figure>    <p id="2d9ede3a">Choose loop from the completion menu:</p>    <figure><img alt="image073" title="image073" src="/help/img/idea/2019.1/image073.png" id="609bad84" width="953" height="602"></figure>    <p id="f543f5bc">The Loop macro allows you to repeat a construct under macro many times: one time for each node in a collection        that        is returned by a code in inspector.    </p>    <p id="66cf7d64">In the loop's inspector type the following:</p>    <figure><img alt="image074" title="image074" src="/help/img/idea/2019.1/image074.png" id="8661b660" width="1066" height="712"></figure>    <p id="770a0ec5">This means that we want to have a field in a class for each inputField that we have in the source calculator.</p>    <p id="d66dcb02">Let's give each visual text field a unique name. We need to add a property macro to its name and type this piece        of        code inside the macro:    </p>    <figure><img alt="image075" title="image075" src="/help/img/idea/2019.1/image075.png" id="e9652378" width="1066" height="712"></figure>    <p id="a6c6527a">This code will give our variables        <b id="c5f67dbe">unique</b>        names like inputField_a, inputField_b, etc.    </p>    <p id="44f0a2ef">We also need to do the same for outputFields:</p>    <figure><img alt="image076" title="image076" src="/help/img/idea/2019.1/image076.png" id="6666ccb9" width="1066" height="712"></figure>    <p id="fd4371a3">The only difference is that we use node.outputField in $LOOP$ and use "outputField" as a base name. In order to        make        your changes available to MPS, make the language.    </p>    <p id="bd827408">Let's make our sandbox and take a look at what we have:</p>    <figure><img alt="image077" title="image077" src="/help/img/idea/2019.1/image077.png" id="c237a277" width="1066" height="712"></figure>    <p id="3ebffb06">As you can see, the fields have been generated. Now we want to add these fields to the visual frame. Type this:    </p>    <figure><img alt="image078" title="image078" src="/help/img/idea/2019.1/image078.png" id="94fe2d8b" width="1066" height="712"></figure>    <p id="1214b399">Essentially, you create a        <i id="9edaecb2">BlockStatement</i>        (code wrapped in {}), so as we can treat the content of the        BlockStatement as a single unit belonging to a single InputField. Then we can easily repeat the block for each        calculator's InputField. Surround the block and the code inside it with a        <i id="29a179e9">$LOOP$</i>        and use        <i id="ec486b44">node.inputField</i>        as the value in the        inspector:    </p>    <figure><img alt="image079" title="image079" src="/help/img/idea/2019.1/image079.png" id="0f50ea62" width="1066" height="712"></figure>    <p id="0937c011">Add a property macro to the JLabel's constructor's parameter so that the label will have the same text as the        corresponding input field's name:    </p>    <figure><img alt="image080" title="image080" src="/help/img/idea/2019.1/image080.png" id="2fccff3c" width="1066" height="712"></figure>    <p id="79966514">The situation is more complicated with creating a reference to a field declaration, in which the current field is        stored. From the reference to an inputField, we need to generate a reference to the corresponding JTextField        generated from current inputField. To do so, we need to label the field declaration and use this label to find        the        field.    </p>    <p id="87018350">Go to mapping and add this:</p>    <figure><img alt="image081" title="image081" src="/help/img/idea/2019.1/image081.png" id="c2ea9ff3" width="1066" height="712"></figure>    <p id="b4218522">Now we have a storage for generated        <i id="5c4ef8aa">FieldDeclarations</i>        indexed by the original <i id="b9a44dd7">InputFields</i>. This        means that the        <i id="bdb30761">inputField</i>        label will reference a node of type        <i id="13d3c2ca">FieldDeclaration</i>        generated from the        <i id="44d6739e">InputField</i>. Now let's add the label to the generated field's LOOP macro:    </p>    <figure><img alt="image082" title="image082" src="/help/img/idea/2019.1/image082.png" id="1dbf1286" width="955" height="601"></figure>    <p id="34736faa">Now we need to change the reference to an inputField to a reference found by using the lookup via the label. In        order        to do so we need to add a reference macro to the field reference:    </p>    <figure><img alt="image083" title="image083" src="/help/img/idea/2019.1/image083.png" id="c7c3f2c4" width="956" height="599"></figure>    <p id="af027817">Go to the inspector and type this:</p>    <figure><img alt="image084" title="image084" src="/help/img/idea/2019.1/image084.png" id="298476be" width="899" height="596"></figure>    <p id="5f1dee8b">You will have:</p>    <figure><img alt="image085" title="image085" src="/help/img/idea/2019.1/image085.png" id="92072b97" width="1066" height="712"></figure>    <p id="fc80019e">Do the same with the second reference:</p>    <figure><img alt="image086" title="image086" src="/help/img/idea/2019.1/image086.png" id="7762e824" width="1066" height="712"></figure>    <p id="be52d558">Now, let's make our language (right-click on the        <i id="f7e48c81">Language</i>        and choose <i id="63a717cb">Rebuild Language</i>) and take a look at what we get generated from our sandbox model:    </p>    <figure><img alt="image087" title="image087" src="/help/img/idea/2019.1/image087.png" id="54c6859c" width="1066" height="712"></figure>    <p id="eec954a9">As you can see, the references are set correctly.</p>    <p id="315514b0">Now let's do the same thing with output fields. Again, we need to create the initialization code, and surround it        with a        <i id="0eef0683">$LOOP$</i>        macro. Create a label for field declaration and put it on outputField's $LOOP$. Then we need        to use this label to create a reference. Your code in the template should look like this after making        these changes:    </p>    <figure><img alt="image088" title="image088" src="/help/img/idea/2019.1/image088.png" id="43697ae2" width="1066" height="712"></figure>    <p id="b4cd3c1d">Now let's implement the only thing that's left: the code that updates the result with a calculated value. We want        to        have something like this:    </p>    <code class="code">public void update() { int i1 = 0; try { i1 = Integer.parseInt(myInput1.getText()); } catch (NumberFormatException e) { } myOutput.setText("" + (i1)); }</code>    <br>    <p id="90eba40e">We create an int local variable for each input node and assign it a value in that field. Let's create a loop        macro        for such variables. Make sure that ";" is inside the $LOOP$ macro:    </p>    <figure><img alt="image089" title="image089" src="/help/img/idea/2019.1/image089.png" id="8d567dfa" width="1066" height="712"></figure>    <p id="a5e95de3">Let's generate a unique name for each of these variables:</p>    <figure><img alt="image090" title="image090" src="/help/img/idea/2019.1/image090.png" id="4467d7eb" width="1066" height="712"></figure>    <p id="5989c3cf">Let's initialize these variables. In order to reference our variables, we need to create yet another label:</p>    <figure><img alt="image091" title="image091" src="/help/img/idea/2019.1/image091.png" id="004e60db" width="1066" height="712"></figure>    <p id="f84b9a77">And assign it to the local variable declaration. To do so, you need to surround the local variable with a        <i id="0a67fe65">$MAP_SRC$</i>        macro. In most cases, this macro is used just to add labels to nodes, which we want to reference and which don't        have any other macros associated.    </p>    <p id="a7e05858">Make sure to select LocalVariableDeclaration, not LocalVariableDeclarationStatement. To check this, take a look        at        the semicolon. If it's outside of the macro bracket, then choose the right node:    </p>    <figure><img alt="image092" title="image092" src="/help/img/idea/2019.1/image092.png" id="039f7610" width="1066" height="712"></figure>    <p id="7059afe3">Another LOOP will be needed to properly initialize these local variables with values from the calculator's input        fields. First, add a try ... catch block. You will have this:    </p>    <figure><img alt="image093" title="image093" src="/help/img/idea/2019.1/image093.png" id="036dece1" width="1066" height="712"></figure>    <p id="b82311d9">Surround it with a LOOP macro:</p>    <figure><img alt="image094" title="image094" src="/help/img/idea/2019.1/image094.png" id="b2ff625d" width="1066" height="712"></figure>    <p id="bdaedbe4">Please make sure the        <b id="640b479f">whole statement</b>        (the line including the ending semicolon) is wrapped by the LOOP macro. Then create reference macros and use the        labels to find corrent targets (i.e. LocalVariableDeclarations and        InputFields, respectively) for these references. With local variable:    </p>    <figure><img alt="image095" title="image095" src="/help/img/idea/2019.1/image095.png" id="3a10c8f4" width="1066" height="712"></figure>    <p id="f30f95f1">With field reference:</p>    <figure><img alt="image096" title="image096" src="/help/img/idea/2019.1/image096.png" id="22446699" width="1066" height="712"></figure>    <p id="3f55805e">Now we need to set output values into the text fields that represent the calculated outputs. Type the following        code:    </p>    <figure><img alt="image097" title="image097" src="/help/img/idea/2019.1/image097.png" id="9c9658bd" width="1066" height="712"></figure>    <p id="4a16d3cb">Surround it with a LOOP macro:</p>    <figure><img alt="image098" title="image098" src="/help/img/idea/2019.1/image098.png" id="c36bab61" width="1066" height="712"></figure>    <p id="3f10c55b">Again, please make sure the        <b id="48c23a97">whole statement including the ending semicolon</b>        is wrapped in the LOOP macro. Then add a reference macro to the outputField:    </p>    <figure><img alt="image099" title="image099" src="/help/img/idea/2019.1/image099.png" id="3048097b" width="1066" height="712"></figure>    <p id="875843e0">Now we need to set the text so that it will display the calculated result. So we need to generate the output        field's        expression to where the null value is. Remove null argument of setText() method and type: "" + (null).        Use Ctrl+Space on each step. We add parentheses here to make sure        that the output code will be correct. If we didn't have parentheses and expression is 2—3, the output code        will be "" + 2 — 3, which isn't correct. On the other hand, "" + (2 — 3) is correct:    </p>    <figure><img alt="image100" title="image100" src="/help/img/idea/2019.1/image100.png" id="93d146e5" width="1066" height="712"></figure>    <p id="35d7f642">Add a node macro to the null value and change it to a $COPY_SRC$ macro. $COPY_SRC$ macro replaces a node under        the macro with a copy of the node returned by the code in the inspector. We return node.expression:    </p>    <figure><img alt="image101" title="image101" src="/help/img/idea/2019.1/image101.png" id="b759af4c" width="1066" height="712"></figure>    <p id="bb2009b3">The only thing that's left is handling the InputFieldReference. We don't have a generator for it yet. We need to        replace the reference with the value retrieved from the JTextField corresponding to the refered input field. So        assentially the corresponding        <i id="1177e42a">i</i>        variable stored in the        <i id="591a92dc">LocalVar</i>        label. To create a generator for        an InputFieldReference,        we need to define a reduction rule. Reduction rules are applied to all the nodes that are copied during        generation,        for example, in $COPY_SRC$ macro. Let's create the corresponding reduction rule in the mapping configuration:    </p>    <figure><img alt="image102" title="image102" src="/help/img/idea/2019.1/image102.png" id="f9650698" width="1066" height="712"></figure>    <p id="29d6abd1">Since the template will not be very long, we will use an in-line        template with context. Chose &lt;in-line template with context&gt; from        completion list.    </p>    <figure><img alt="image103 1" title="image103 1" src="/help/img/idea/2019.1/image103_1.png" id="ad69e899" width="1121" height="602"></figure>    <p id="c923d01a">We translate the InputNodeReference to a local variable reference, so        we have to create valid context node that would contain such a local variable        reference. Let's use BlockStatement as a context node:    </p>    <figure><img alt="image103 2" title="image103 2" src="/help/img/idea/2019.1/image103_2.png" id="127eabd5" width="955" height="601"></figure>    <p id="e75f274b">Inside this BlockStatement let's define local variable i and create simple expression referencing it:</p>    <figure><img alt="image103 3" title="image103 3" src="/help/img/idea/2019.1/image103_3.png" id="76143e23" width="1066" height="712"></figure>    <p id="8363e3e9">This reference to a local variable        <i id="de95f13f">i</i>        is what we will use as a result of the in-line template, so we should        mark it as a template fragment. Press        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Alt+Enter</span></kbd>        and choose "Create Template Fragment"        intention:    </p>    <figure><img alt="image103 4" title="image103 4" src="/help/img/idea/2019.1/image103_4.png" id="a15d3426" width="994" height="600"></figure>    <p id="7976802f">Now let's create reference macro for this local variable reference:</p>    <figure><img alt="image103 5" title="image103 5" src="/help/img/idea/2019.1/image103_5.png" id="54b6c7a2" width="1032" height="601"></figure>    <p id="537172c0">and specify proper reference query to get the correct        <i id="306e21cc">i</i>        from<i id="e4dfd2ed">LocalVar</i>:    </p>    <figure><img alt="image103 6" title="image103 6" src="/help/img/idea/2019.1/image103_6.png" id="530a4824" width="1066" height="712"></figure>    <p id="99144097">Now, let's rebuild our language (right-click on the        <i id="2a25eedf">Language</i>        and choose<i id="3e77aa8f">Rebuild Language</i>) and take a look at what happens with the sandbox model. As you can see, MPS        generates exactly the code that we wanted:    </p>    <figure><img alt="image106" title="image106" src="/help/img/idea/2019.1/image106.png" id="014e3a06" width="1066" height="712"></figure>    <h4 id="Entering_Salar_program">Entering Salary program</h4>    <p id="439df98f">Having finished the language and its generator, we can enter salary program. Here it is:</p>    <figure><img alt="image107" title="image107" src="/help/img/idea/2019.1/image107.png" id="34fa3f83" width="1243" height="747"></figure>    <h4 id="Running_generated_code">Running generated code</h4>    <p id="e7ebd411">In order to run code, you need to make your solution model:</p>    <figure><img alt="image108" title="image108" src="/help/img/idea/2019.1/image108.png" id="e723e298" width="1131" height="668"></figure>    <p id="04eb4e7b">Your sources will be available in solution source_gen directory. (Don't forget to switch to File System View):    </p>    <figure><img alt="image109" title="image109" src="/help/img/idea/2019.1/image109.png" id="50d22a65" width="1243" height="747"></figure>    <p id="1bb3abab">You can run them with your favorite Java IDE.</p>    <p id="de9c54c5">We finished the main part of our language, now let's do some polishing.</p>    <h4 id="Creating_a_scope_for_InputFieldReference">Creating a scope for InputFieldReference</h4>    <p id="1bc04001">If we create another Calculator root in the sandbox model, we will be        able to reference input fields from the first calculator, which isn't        correct:    </p>    <figure><img alt="image110" title="image110" src="/help/img/idea/2019.1/image110.png" id="41fa0ec0" width="1140" height="636"></figure>    <p id="bdf67abc">Let's fix it. To do so, we need to define the scope for the        <i id="5f2c3c54">InputFieldReference</i>        concept.        We do that by defining a constraint: open <i id="404ff944">InputFieldReference</i>, go to the        <i id="e2a50510">Constraints</i>        tab,        and create a constraints root for it:        We will use the new hierarchical (<i id="e43c3c51">inherited</i>) mechanism of scope resolution.        This mechanism delegates scope resolution to the ancestors, who implement <i id="44e4bc02">ScopeProvider</i>.        Our        <i id="3b7ebfe2">InputFieldReference</i>        thus searches for        <i id="612fe1df">InputField</i>        nodes and relies on its ancestors to build a        list of those.    </p>    <figure><img alt="image111" title="image111" src="/help/img/idea/2019.1/image111.png" id="887b0bc6" width="1243" height="747"></figure>    <p id="31d94e86">Add a        <i id="65e0bb64">referent constraint</i>        and choose field as its link:    </p>    <figure><img alt="image112" title="image112" src="/help/img/idea/2019.1/image112.png" id="34e22e60" width="1165" height="636"></figure>    <p id="595fcaf4">Now let's create a scope for this link. Go to the        <i id="c1e94a04">scope</i>        section and hit        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+Space</span></kbd>. We need to specify how to resolve elements that the        <i id="0abf6bc8">InputFieldReference</i>        can link to:    </p>        <figure><img alt="image113 1" title="image113 1" src="/help/img/idea/2019.1/image113_1.png" id="ee78dd04" width="1243" height="747"></figure>    <p id="c395626a">Once we have specified that the scope for        <i id="11990edc">InputFieldReference</i>        when searching for an        <i id="c9eed2d5">InputField</i>        is <i id="c9894bba">inherited</i>, we must indicate that        <i id="40d1e0fd">Calculator</i>        is a <i id="e2971d7e">ScopeProvider</i>.        This ensures that        <i id="85646088">Calculator</i>        will have say in building the scope for all        <i id="e8d7a439">InputFieldReferences</i>        that        are placed as its descendants.    </p>    <p id="71c46b3a">The        <i id="3ccd24d2">Calculator</i>        in our case should return a list of all its        <i id="fd1310e0">InputFields</i>        whenever queried for        scope of <i id="670dcfa3">InputField</i>. So in the        <i id="b8595dd6">Behavior</i>        aspect of        <i id="039c1adb">Calculator</i>        we override        (<kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+O</span></kbd>) the        <i id="4f5d168a">getScope()</i>        method:    </p>    <figure><img alt="image113 3" title="image113 3" src="/help/img/idea/2019.1/image113_3.png" id="3d9957f6" width="494" height="684"></figure>    <p id="f9545add">If        <i id="a20440f1">Scope</i>        remains unresolved, we need to import the model (<kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+R</span></kbd>) that        contains it (<i id="574a68a0">jetbrains.mps.scope</i>):    </p>    <p id="38ee4d47">We also need        <i id="8811aafc">BaseLanguage</i>        since we need to encode some functionality.        The        <i id="7890157b">smodel</i>        language needs to be imported in order to query nodes.        These languages should have been imported for you automatically.        If not, you can import them using the        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+L</span></kbd>        shortcut.    </p>    <p id="0bce092b">Now we can finally complete the scope definition code, which, in essence, returns all input fields from within        the        calculator:    </p>    <figure><img alt="image114" title="image114" src="/help/img/idea/2019.1/image114.png" id="023911af" width="1077" height="747"></figure>            <i id="1d3054d5">A quick tip: Notice the use of SimpleRoleScope class.            It is one of several helper classes that can help you build your own custom scopes.            Check them out by Navigating to SimpleRoleScope (<kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+N</span></kbd>) and opening up the            containing            package structure (<kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Alt+F1</span></kbd>).        </i>        <p id="23600b2a">After you make the language (right-click on the        <i id="7cd74d7a">Language</i>        and choose <i id="1928da62">Make Language</i>), you will no longer be able to access a field from the first calculator        in the second one:    </p>    <figure><img alt="image115" title="image115" src="/help/img/idea/2019.1/image115.png" id="b8b73653" width="1019" height="506"></figure>    <p id="6cd28be8">But you can still access fields in the first calculator:</p>    <figure><img alt="image116" title="image116" src="/help/img/idea/2019.1/image116.png" id="0f38e1c5" width="1107" height="508"></figure>    <h4 id="Creating_a_type_system_rule_for_InputFieldReference">Creating a type system rule for InputFieldReference
    </h4>    <p id="bb7572fe">We can now type something like this:</p>    <figure><img alt="image117" title="image117" src="/help/img/idea/2019.1/image117.png" id="018af2c0" width="1027" height="644"></figure>    <p id="9d9d58a2">This code isn't correct because width must be Boolean, since it's used as part of a ternary operator's condition.        In        order to make this error visible, we need to create a type system rule for our concept. Let's do it. Open the        InputFieldReference and go to        <i id="36bf135e">Typesystem</i>        tab. Create an InferenceRule there:    </p>    <figure><img alt="image118" title="image118" src="/help/img/idea/2019.1/image118.png" id="f2a72746" width="1027" height="644"></figure>    <p id="b14b3653">Our typesytem engine operates on type equations and inequations. Equations specify which nodes' types should be        equals. In equation, specify which nodes' type should be subtypes of each other. We need to add an equation that        states that the type of our reference is always <i id="7cd19209">int</i>. Let's define equation. Choose the equals sign in        the        completion menu:    </p>    <figure><img alt="image119" title="image119" src="/help/img/idea/2019.1/image119.png" id="73842b90" width="918" height="534"></figure>    <p id="229d4a13">Choose typeOf in its left part:</p>    <figure><img alt="image120" title="image120" src="/help/img/idea/2019.1/image120.png" id="d8442bc5" width="915" height="534"></figure>    <p id="79e2091b">Type 'inputFieldReference' inside of typeof:</p>    <figure><img alt="image121" title="image121" src="/help/img/idea/2019.1/image121.png" id="50f02c51" width="1027" height="644"></figure>    <p id="26dd5680">Choose &lt;quotation&gt; on the right part of the equation:</p>    <figure><img alt="image122" title="image122" src="/help/img/idea/2019.1/image122.png" id="9234526a" width="916" height="534"></figure>    <p id="f6e3be3a">Quotation is a special construct that allows us to get a node inside of quotation as a value. Usually nodes we        want        to create are quite complicated, so creating them with sequential property/children/reference assignments is an        error-prone and boring activity. Quotations simplify such a task significantly.    </p>    <p id="d1656c82">Type IntegerType inside of it:</p>    <figure><img alt="image123" title="image123" src="/help/img/idea/2019.1/image123.png" id="7087aaa6" width="916" height="533"></figure>    <p id="0c7397d4">Now our rule is complete:</p>    <figure><img alt="image124" title="image124" src="/help/img/idea/2019.1/image124.png" id="0bb2148d" width="1027" height="644"></figure>    <p id="88e4bf0b">Let's make the language (right-click on the        <i id="ad4b5992">Language</i>        and choose <i id="7756b417">Make Language</i>) and take a look at code with error:    </p>    <figure><img alt="image125" title="image125" src="/help/img/idea/2019.1/image125.png" id="6147038e" width="1027" height="644"></figure>    <p id="bdb7721e">It's now highlighted. You can press Ctrl+F1 and see the error message: "type int is not subtype of        Boolean".    </p>    <h4 id="Appendix_A">How to use the MPS editor</h4>    <p id="f2943a05">Despite looking like a text editor, MPS editor isn't one exactly. Because of this, working with it is        different from        working with text editor. In this section we will describe the basics of working with MPS editor.    </p>    <p id="99db214e">Navigation works similar to that of a text editor. You can use the arrow keys, <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">page up/down</span></kbd>,        and <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">home/end</span></kbd>, and they behave the same way as in text editors. Selection        works differently:        you can't select an arbitrary interval in the editor, since there is no such thing in MPS. You can        only select a        cell or a set of adjacent cells. To select the parent of the current cell, press <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+Up</span></kbd>.        To select a child of the current cell, press <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+Down</span></kbd>. If you want to        select adjacent        cells, use <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Shift+Left/Right</span></kbd>.    </p>    <p id="be1b2f93">Unlike text editors where code completion is optional, MPS gives you this feature out of the box. You        can press        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+Space</span></kbd>        almost everywhere and see a list of possible items at the current position. If you        want to explore a language's features, the best way to do so is to use this shortcut in the place        which you are        interested in and look at the contents of the completion menu.    </p>    <p id="1005e143">Another commonly used feature of MPS is intentions. Intentions are actions which can be applied to a        node in the        editor. You can apply intentions if you see a light bulb in the editor. If you press        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Alt+Enter</span></kbd>, the light bulb will be expanded to a menu so you can choose the        actions you        want.    </p>    <p id="280e377a">In MPS we often want to add a new element to a place where multiple such elements are possible. For        example, we might        add a new statement in a method body, a new method in a class declaration, etc. To do so, you can        use two shortcuts:        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Insert</span></kbd>        and <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Enter</span></kbd>. The former adds a new item before the current        item. The latter adds a new item after the current one. In order to remove the current item, press        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Ctrl+Delete</span></kbd>.    </p><div class="last-modified" data-skip-index="skip">Last modified: 5 July 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="shapes-an-introductory-mps-tutorial.html">Shapes - an introductory MPS tutorial</a><a class="navigation-links__next" href="scopes.html">Scopes</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>