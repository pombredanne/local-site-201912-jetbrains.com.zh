<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta name="robots" content="noindex"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><meta charset="UTF-8"><title>Generator cookbook - Help | MPS</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Generator+cookbook.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search MPS Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Windows/Linux Default</option><option data-group="primary" value="primary_default_for_gnome">GNOME</option><option data-group="primary" value="primary_default_for_kde">KDE</option><option data-group="primary" value="primary_default_for_xwin">XWin</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="secondary_intellij_idea_classic_os_x">IntelliJ IDEA Classic (Mac OS X)</option><option data-group="secondary" value="secondary_xcode">Xcode</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_resharper">ReSharper</option><option data-group="secondary" value="secondary_resharper_osx">ReSharper (Mac OS X)</option><option data-group="secondary" value="secondary_emacs">Emacs (Mac OS X)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Generator+cookbook.html" id="generator-cookbook.xml">Generator cookbook</h1>   <p id="6ea06b43">This document is intended to give answers to the most common questions related to the MPS generator. You may alternatively consult the <a href="mps-generator.html">Generator documentation</a> and check out the <a href="generator-demos.html">Generator demos</a>.</p>         <ul data-skip-index="skip"><li class="list__item"><a href="#howdoesthegeneratorprocesstherules?">How does the generator process the rules?</a></li><li class="list__item"><a href="#canihavemoregeneratorsforasinglelanguage?">Can I have more generators for a single language?</a></li><li class="list__item"><a href="#canihavemultiplemappingconfigurationspergenerator?">Can I have multiple mapping configurations per generator?</a></li><li class="list__item"><a href="#howtogeneratemultipletargetsfromsinglesource?">How to generate multiple targets from single source?</a></li><li class="list__item"><a href="#whatmacrosareavailableinthetemplates?">What macros are available in the templates?</a></li><li class="list__item"><a href="#whereshallipututilityclasses?">Where shall I put utility classes?</a></li><li class="list__item"><a href="#whereshalliputruntimeclasses?">Where shall I put runtime classes?</a></li><li class="list__item"><a href="#howdoigenerateuniquenames?">How do I generate unique names?</a></li><li class="list__item"><a href="#howtogenerateenumerationdatatypes?">How to generate enumeration datatypes?</a></li><li class="list__item"><a href="#howtoichangepackagesofthegeneratedjavaclasses?">How to I change packages of the generated Java classes?</a></li><li class="list__item"><a href="#whatisthedifferencebetweenrootmappingrulesandreductionrules?">What is the difference between root mapping rules and reduction rules?</a></li><li class="list__item"><a href="#whathappenstountransformedroots?">What happens to untransformed roots?</a></li><li class="list__item"><a href="#howtogeneratemultiplenodesforasinglenode?">How to generate multiple nodes for a single node?</a></li><li class="list__item"><a href="#whyiseditingthemacrossoweird?">Why is editing the macros so weird?</a></li><li class="list__item"><a href="#howcanigeneraterootnodesfornon-rootnodes?">How can I generate root nodes for non-root nodes?</a></li><li class="list__item"><a href="#howtoremoveno-longerneededrootsfromthemodel?">How to remove no-longer needed roots from the model?</a></li><li class="list__item"><a href="#howdoigeneratenodesfornodesinaccessorymodels?">How do I generate nodes for nodes in accessory models?</a></li><li class="list__item"><a href="#howtousemappinglabels?">How to use mapping labels?</a></li><li class="list__item"><a href="#howtohandlereferencesduringgeneration?">How to handle references during generation?</a></li><li class="list__item"><a href="#canidebugthegenerationprocess?">Can I debug the generation process?</a></li><li class="list__item"><a href="#howdoifigureouttheactualgenerationsteps?">How do I figure out the actual generation steps?</a></li><li class="list__item"><a href="#canispecifytheorderinwhichgeneratorsshouldberun?">Can I specify the order in which generators should be run?</a></li><li class="list__item"><a href="#howtocheckthatthemodelhasnoerrorsbeforestartingthegenerator?">How to check that the model has no errors before starting the generator?</a></li><li class="list__item"><a href="#howtoextendanexistinggenerator?">How to extend an existing generator?</a></li><li class="list__item"><a href="#howtobuildanextensiblegenerator?">How to build an extensible generator?</a></li><li class="list__item"><a href="#whatshalliusetextgenfor?">What shall I use TextGen for?</a></li><li class="list__item"><a href="#howtogeneratemultiplefilesperrootnode?">How to generate multiple files per root node?</a></li></ul>      <h3 id="howdoesthegeneratorprocesstherules?">How does the generator process the rules?</h3>   <p id="497913f4">Generation gradually converts an input model into an output model, which may or may not be then turned into text with TextGen. The generation process itself consists of steps. Each step has three phases:</p>   <ol class="list _decimal"><li class="list__item" id="92c33d7a"><p>Executing pre-mapping scripts</p></li><li class="list__item" id="b44b4fe6"><p>Template-based model transformation</p></li><li class="list__item" id="3b598763"><p>Executing post-mapping scripts</p></li></ol>   <p id="dea1f43e">The template-based model transformation phase consists of one or more micro-steps. A micro-step is a single-pass model transformation of and input model into a transient (output) model. The generator during a generation step will iterate over the model and search in the generators of all&nbsp;languages involved in this step for rules applicable to the nodes in the input model. When no applicable rules are found, the generation step stops. The next generation step (if any) will receive the output model of previous generation step as its input.</p>   <p id="b53ccb95">You can check out <a href="mps-generator.html">full description of the generator algorithm</a> in the generator documentation.</p>   <h3 id="canihavemoregeneratorsforasinglelanguage?">Can I have more generators for a single language?</h3>   <p id="6f33150d">No, MPS only allows one generator per language at the moment. If you need several generators for a language, it is advisable to create empty languages that extend your language and in each of these extending languages to define the desired alternative generators.</p>   <h3 id="canihavemultiplemappingconfigurationspergenerator?">Can I have multiple mapping configurations per generator?</h3>   <p id="2ae7972f">Yes, they will all be treated as equal during the generation process. Additionally, each <i id="e47d723b">mapping configuration</i>&nbsp;can have its generation process <b id="15b82481">priority</b> specified separately, which gives you more flexibility to tune the generation.</p>   <h3 id="howtogeneratemultipletargetsfromsinglesource?">How to generate multiple targets from single source?</h3>   <p id="ff25688e">You may want to generate code for several target platforms from the same code-base. There are at least two ways you can achieve that:</p>   <ul class="list _ul"><li class="list__item" id="46131c58"><p>Put all the generation rules for different platforms into a single generator, perhaps logically separated into virtual packages and multiple mapping configurations, and use the&nbsp;<i id="7e8cc485">condition</i>&nbsp;of each rule to activate the rule based on the currently selected target. The developer will indicate the intended target platform by setting a&nbsp;<b id="28451987">flag</b>&nbsp;in her code</p></li><li class="list__item" id="d6a28835"><p>Have no generator in you language directly and provide generators for each target platform in a separate&nbsp;<b id="4faea41c">empty</b>&nbsp;language, which extends the original language. The developer will select the desired target platform by importing the appropriate extension language.</p></li></ul>   <h3 id="whatmacrosareavailableinthetemplates?">What macros are available in the templates?</h3>   <ul class="list _ul"><li class="list__item" id="4ef531b3"><p>         <b id="e2167555">property macro</b>&nbsp;- computes a value for a property</p></li><li class="list__item" id="59b0d47f"><p>         <b id="a78ee96d">reference macro</b>&nbsp;- computes the target (node) of a reference</p></li><li class="list__item" id="cea436bc">         <b id="18a0130a">node macro</b>&nbsp;- is used to control template filling at generation time<ul class="list _ul"><li class="list__item" id="283c0fcd"><p>$IF$ - conditional generation</p></li><li class="list__item" id="5f8d541b"><p>$CALL$ - insert another template at the current position and process it passing in the current node</p></li><li class="list__item" id="0e416394"><p>$LOOP$ - iterate over a collection of nodes and set the current node for each iteration</p></li><li class="list__item" id="5dcb9584"><p>$COPY_SRC$ - copies the specified node and replaces the wrapped node. Reduction rules are applied to the copied node and its children during the process</p></li><li class="list__item" id="82d8729a"><p>$COPY_SRCL$ -&nbsp;copies the specified collection of nodes and replaces the wrapped code. Reduction rules are applied to the copied nodes and their children during the process</p></li><li class="list__item" id="a69db48e"><p>$MAP_SRC$ - sets a node to be used as the current node inside the wrapped code</p></li><li class="list__item" id="50174eef"><p>$MAP_SRCL$ -&nbsp;sets a collection of nodes, each of which should to be used in turn as the current nodes inside the wrapped code</p></li><li class="list__item" id="d46cb768"><p>$SWITCH$ - chooses the template to use for generation from multiple choices</p></li><li class="list__item" id="51dad504"><p>$LABEL$ - stores the wrapped node in a&nbsp;<i id="be47c21a">mapping label</i>&nbsp;for easy discovery by other macros</p></li><li class="list__item" id="9e389b00"><p>$VAR$ - sets a value into a variable, which will then be accessible in the wrapped nodes through&nbsp;<i id="ea9e9887">genContext.varName</i>            </p></li><li class="list__item" id="ce80617f"><p>$TRACE$ - stores information required to trace back the original node for the wrapped node and stores the mapping between a source node and the resulting generated text into the <i id="b29399fd">trace.info</i> file - when <i id="54a60861">Save Transient Models</i>&nbsp;is on, this enables the <b id="f6803563">Reveal Origin Node</b>&nbsp;option in the <b id="ef497cdd">Debug</b>&nbsp;pop-up menu item in transient models</p></li><li class="list__item" id="c1caebf6"><p>$WEAVE$ - invokes a specific weaving rule</p></li><li class="list__item" id="0de62af8"><p>$INSERT$ - inserts a node into the output model at the current position</p></li></ul>      </li></ul>   <h3 id="whereshallipututilityclasses?">Where shall I put utility classes?</h3>   <p id="cbcaa45a">Create a new model inside the generator. Make sure it does not have the <i id="e081d342">generator</i>&nbsp;stereotype attached to it.&nbsp;The model should typically depend on&nbsp;<i id="b5942865">BaseLanguage</i>&nbsp;so that you can create classes in it. The original <i id="27e8930a">generator</i>&nbsp;model should then import the utility model.</p>   <h3 id="whereshalliputruntimeclasses?">Where shall I put runtime classes?</h3>   <p id="8955efb5">Classes and libraries that the generated code relies on should be put into separate&nbsp;<b id="1027076c">runtime solutions</b>, as described in the "<a href="getting-the-dependencies-right.html">Adding external Java classes and jars to a project - runtime solutions</a>" section of <a href="getting-the-dependencies-right.html">Getting the dependencies right</a>.</p>   <h3 id="howdoigenerateuniquenames?">How do I generate unique names?</h3>   <p id="1d9fbaaa">Use the <i id="9e599363">genContext</i>&nbsp;parameter, which gives you access to the generator context object and call:</p>         <i id="15b371eb">unique name from &lt;base name&gt; in context &lt;node&gt;</i>      <p id="2b662569">      <i id="c6b4f5d6">base name</i>&nbsp;- is an arbitrary string that must be part of the generated name</p>   <p id="549351e1">      <i id="5415cf55">context node</i>&nbsp;-&nbsp;If specified, then MPS tries its best to generated names 'contained' in a scope (usually a root node). Then when names are re-calculated (due to changes in input model or in generator model), this won't affect other names outside the scope.&nbsp;The&nbsp;<b id="553eb9f0">context node</b>&nbsp;parameter is optional, though we recommend to specify it to guarantee generation stability.</p>   <p id="342a2694">The uniqueness of generated names is secured throughout the whole generation session.<br>  &nbsp;Clashing with names that weren't generated using this service is still possible.</p>   <h3 id="howtogenerateenumerationdatatypes?">How to generate enumeration datatypes?</h3>   <p id="718a3d31">Having to reduce an enumeration datatype into a Java enum, using the <i id="5e48e1a0">$SWITCH$</i>&nbsp;macro is usually the best option.</p>         <figure><img alt="Generator1" title="Generator1" src="/help/img/idea/2019.1/Generator1.png" id="e23085a9" width="784" height="294"></figure>            <figure><img alt="Generator2" title="Generator2" src="/help/img/idea/2019.1/Generator2.png" id="dfa1137b" width="721" height="347"></figure>      <p id="9cc5b200">Notice the way the actual enumeration datatype is tested for equality using the <i id="9e1a80d3">is()</i>&nbsp;method:</p>         <figure><img alt="Generator3" title="Generator3" src="/help/img/idea/2019.1/Generator3.png" id="4d30f765" width="1034" height="579"></figure>      <h3 id="howtoichangepackagesofthegeneratedjavaclasses?">How to I change packages of the generated Java classes?</h3>   <p id="9ea16050">When generating complex Java code, Java classes, interfaces and enums frequently need to be organized into packages. By default, the MPS generator reflects the structure of MPS models in the structure of the packages of the generated Java code. Each BaseLanguage model translates into a Java package with the same name. If you need to manipulate the structure of the generated Java packages, use the&nbsp;<i id="c2f72fcc">packageName</i> property of the&nbsp;<code class="code">Classifier</code>&nbsp;concept. The property is available for root classifiers:</p>         <figure><img alt="cp iface" title="cp iface" src="/help/img/idea/2019.1/cp_iface.png" id="d8c0f870" width="400" height="488"></figure>      <h3 id="whatisthedifferencebetweenrootmappingrulesandreductionrules?">What is the difference between root mapping rules and reduction rules?</h3>   <p id="bc6b73b5">During generation models, which have the form of a tree (Abstract Syntax Tree, see <a href="basic-notions.html">Basic notions</a>), are translated into the generated models, which are also trees. Typically root nodes are generated into root nodes (e.g. a robot <i id="43f7641e">Script</i> into a Java class) and non-root nodes into non-root nodes (e.g. a robot <i id="f59f118f">Step</i> command into a Java <i id="c3769187">BlockStatement</i>). Thus templates for root mapping rules represent a starting point of the generated model and cannot specify template context, unlike reduction templates, which may hold context and indicate the actual generation contents with the&nbsp;<b id="08c6f502">template fragment</b> marks.</p>   <aside class="warning " data-title="" rel="bc6b73b5" id="e14e5681">      <p id="51fb139f">Nodes of rootable concepts, when positioned in a non-root location, will have reduction rules applied to them. Root mapping rules are only applied to nodes in root positions.</p>   </aside>   <h3 id="whathappenstountransformedroots?">What happens to untransformed roots?</h3>   <p id="f6088aab">Roots, for which there are no applicable transformation rules, are carried unchanged over to the next generation step.</p>   <h3 id="howtogeneratemultiplenodesforasinglenode?">How to generate multiple nodes for a single node?</h3>   <p id="074311e3">A template fragment in a template indicates, which node will be replacing the current input node. A template fragment can only be attached to a single node inside the template, but a generator template can contain multiple template fragments, provided the are all attached to nodes in the same role under the same parent. This way multiple nodes can be generated for a single input node.</p>         <figure><a class="lightbox" href="/help/img/idea/2019.1/templateFragments.png"><img alt="templateFragments" title="templateFragments" src="/help/img/idea/2019.1/templateFragments.png" id="0e44e0d1" width="300" height="176"></a></figure>      <h3 id="whyiseditingthemacrossoweird?">Why is editing the macros so weird?</h3>   <p id="fd5c38fe">Indeed, the generator macros and template fragment marks are a bit rough to edit at first. But once you understand the underlying principles of how they work, you'll be able to use them efficiently.</p>   <p id="a23e0bfc">The macros have been implemented as&nbsp;<b id="5b992b40">Node/property/reference attributes</b> (see&nbsp;the&nbsp;<b id="be21de25">Attributes</b>&nbsp;section of the&nbsp;<a href="structure.html">Structure</a>&nbsp;chapter). As such, they can be used in any language and do not require any up-front support to be available in that language. This is important, because any language can be used as a generation target in MPS. Macros are thus attributes attached to the node that they wrap. Deleting or replacing the node wrapped by a macro will delete the macro as well and you have to re-enter the macro to attach it to a new node. A recommended approach is to enter the code for the template first and then start adding macros. If you need to change the node wrapped by a macro, you can at least preserve the&nbsp;<b id="c53009d7">Inspector</b> window contents on the macro on the old node by copy-pasting it into the macro on the new node.</p>   <h3 id="howcanigeneraterootnodesfornon-rootnodes?">How can I generate root nodes for non-root nodes?</h3>   <p id="b79b5c7e">Simply create a <b id="440f326a">root mapping rule</b> for the concept, perhaps further restrict it with a condition. The rule is called <b id="ee790dd9">root</b>, because it generates a root node, not necessarily that it takes a root as input.</p>   <p id="3002fcaa">Alternatively you can either use&nbsp;<b id="ca0a1b2d">conditional root rules</b>, which insert root nodes based on evaluating a boolean predicate, or with&nbsp;<b id="3c5e2f82">pre-processing scripts</b>, which can inspect the input model and create root nodes as needed.</p>   <h3 id="howtoremoveno-longerneededrootsfromthemodel?">How to remove no-longer needed roots from the model?</h3>   <p id="11d95248">Root nodes are removed automatically once they have been transformed using root mapping rules. For roots that are not directly transformed use the <b id="aaa35fc4">abandon root</b> rule to prevent them from being propagated into the next generation step.</p>   <h3 id="howdoigeneratenodesfornodesinaccessorymodels?">How do I generate nodes for nodes in accessory models?</h3>   <p id="6860935a">Nodes in the accessory models are not handled by the generator in any way. In order to generate nodes based on nodes in accessory models, you can leverage either the&nbsp;<b id="5a0b7b25">conditional root rules</b>, or&nbsp;<b id="bf91430b">pre-procesing scripts</b>.</p>         <figure><a class="lightbox" href="/help/img/idea/2019.1/accessoryGeneration.png"><img alt="accessoryGeneration" title="accessoryGeneration" src="/help/img/idea/2019.1/accessoryGeneration.png" id="577d98c2" width="500" height="496"></a></figure>      <p id="a02e152f">Reduction rules can then be used to further generate the "inserted nodes" into the desired target language.</p>   <h3 id="howtousemappinglabels?">How to use mapping labels?</h3>   <p id="a103b7fd">Mapping labels are defined in mapping configurations (e.g.&nbsp;<i id="bc5b1aab">main</i>). They must then be populated by wrapping the node that you want to be stored with macros, such as $LOOP$, $LABEL$, $COPY_SRC$ and others.</p>   <h3 id="howtohandlereferencesduringgeneration?">How to handle references during generation?</h3>   <p id="996b7ff4">Reference macros should be used to set proper target nodes on generated references. You typically use reference macros together with&nbsp;<b id="146f5f52">mapping&nbsp;</b>      <b id="357e7db7">labels</b>.</p>   <p id="3d45a28a">The fundamental task here is that for a reference&nbsp;<b id="90d07789">R</b> that points to a node&nbsp;<b id="474d7c75">N</b>, we need to ensure that a reference <b id="434ffcfe">G(R)</b> generated from&nbsp;<b id="684cc8ae">R</b> must point to a node&nbsp;<b id="3f29b8a7">G(N)</b> that was generated from&nbsp;<b id="2d3694fc">N</b>.</p>         <i id="b3e4a789">if R -&gt; N, N generates to G(N), R generates into G(R)</i>      <i id="8c53dfeb">then G(R) -&gt; G(N)</i>      <p id="1974d19c">Mapping labels serve as dictionaries, which store nodes as keys and whatever they have been generated into as values - <b id="cf405749">N -&gt; G(N)</b> in our example here. The generator has to be instructed explicitly to store the mapping between a node and its generated node into a mapping label. Template fragments as well as node macros allow the user to specify a mapping label into which the generated node should be saved.</p>   <p id="871acaf3">When reducing&nbsp;<b id="5bc34212">R</b> into <b id="f4467f1d">G(R)</b>, a reference macro on&nbsp;<b id="6aca37d6">G(R)</b> can retrieve&nbsp;<b id="c29859d3">G(N)</b> from the mapping label using&nbsp;<b id="29754b4e">N</b> as a key when calling the generator context in <i id="1d001d02">genContext.get output by label and input</i>.</p>   <p id="7aab80f7">      <a href="generator-user-guide-demo7.html">Chapter 7</a> of the <a href="generator-demos.html">generator tutorial</a> covers mapping labels in more detail.</p>   <h3 id="canidebugthegenerationprocess?">Can I debug the generation process?</h3>   <p id="3a333700">The first option is to enable saving transient models.&nbsp;The intermediate models that MPS creates during generation will be preserved and you can access them in the&nbsp;<i id="f7c7e321">Project View</i>&nbsp;panel on the left-hand side of your screen:</p>         <figure><img alt="transient1" title="transient1" src="/help/img/idea/2019.1/transient1.png" id="3748c608" width="291" height="83"></figure>       <figure><a class="lightbox" href="/help/img/idea/2019.1/transient2.png"><img alt="transient2" title="transient2" src="/help/img/idea/2019.1/transient2.png" id="13d5055a" width="500" height="278"></a></figure>      <p id="772dcf87">The saved transient models allow you to investigate how the models looked like at various stages of the generation process.</p>   <p id="80d40a4b">The second option is using the <b id="5a9eb1ba">Generator Tracer Tool</b>. For this tool the "Save transient models" option also has to be set to <b id="17eadbff">on</b>. The Generator Tracer Tool gives you the ability to investigate in detail&nbsp;the generation process for a selected node.&nbsp;When you select a node in your original model or in any of the transient ones, the context menu gives you the options to either trace the generation process forward or backward. As a result you get a tree-shaped report giving you access to all the stages, through which the particular node went during generation and the rules that influence its generation.</p>         <figure><a class="lightbox" href="/help/img/idea/2019.1/tracer1.png"><img alt="tracer1" title="tracer1" src="/help/img/idea/2019.1/tracer1.png" id="486e6514" width="300" height="988"></a></figure>            <figure><a class="lightbox" href="/help/img/idea/2019.1/transient2.png"><img alt="transient2" title="transient2" src="/help/img/idea/2019.1/transient2.png" id="26fa40cf" width="300" height="278"></a></figure>      <p id="1dac7f54">Additionally, the <i id="3afad2a8">$TRACE$</i>&nbsp;generator macro gives you the option to mark parts of your templates for tracing, so that you will be able to navigate back from a generated node in a <b id="25eb58c0">transient model</b> to its original node using the <b id="9a07beff">Reveal origin node</b>&nbsp;option in the <i id="ac2247d9">Context menu -&gt; Language Debug</i>&nbsp;menu:</p>         <figure><img alt="Trace2" title="Trace2" src="/help/img/idea/2019.1/Trace2.png" id="a41a6356" width="1418" height="1094"></figure>            <figure><img alt="Trace1" title="Trace1" src="/help/img/idea/2019.1/Trace1.png" id="0e694331" width="1770" height="1078"></figure>      <h3 id="howdoifigureouttheactualgenerationsteps?">How do I figure out the actual generation steps?</h3>   <p id="b5775420">Use the <i id="7c8e9d3a">Show Generation Plan</i>&nbsp;action from the generator context menu. This will give a detailed report showing all the planned generation phases and listing the mapping configurations run in each phase.</p>         <figure><a class="lightbox" href="/help/img/idea/2019.1/genplan1.png"><img alt="genplan1" title="genplan1" src="/help/img/idea/2019.1/genplan1.png" id="aa65fb72" width="300" height="197"></a></figure>            <figure><a class="lightbox" href="/help/img/idea/2019.1/genplan2.png"><img alt="genplan2" title="genplan2" src="/help/img/idea/2019.1/genplan2.png" id="31d94b65" width="500" height="565"></a></figure>      <h3 id="canispecifytheorderinwhichgeneratorsshouldberun?">Can I specify the order in which generators should be run?</h3>   <p id="b03b2bba">The <i id="8e73fb59">Generator priorities</i>&nbsp;tab in the generator's <i id="bcd194af">Module properties dialog</i> enables you to specify ordering rules between two distinct <i id="8404802b">mappings configurations</i>.</p>         <figure><a class="lightbox" href="/help/img/idea/2019.1/Priorities2.png"><img alt="Priorities2" title="Priorities2" src="/help/img/idea/2019.1/Priorities2.png" id="867c5967" width="300" height="550"></a></figure>      <p id="7ffd1168">For more complex scenarios, the new functionality of <a href="generation-plan.html">Generation plans</a> gives you full control over the generator process.</p>   <h3 id="howtocheckthatthemodelhasnoerrorsbeforestartingthegenerator?">How to check that the model has no errors before starting the generator?</h3>   <p id="cf9f0b4e">Run the <i id="f856713e">Check model (language/solution)</i>&nbsp;context-menu action on the model/language/solution to check.</p>         <figure><img alt="Generator101" title="Generator101" src="/help/img/idea/2019.1/Generator101.png" id="0f7f3bc4" width="526" height="289"></figure>      <p id="1ec8580c">The&nbsp;<i id="b2bffcdc">Preferences -&gt; Build, Execution, Deployment -&gt; Generator -&gt; Check models for errors before generation</i> configuration flag specifies whether the model checker should be run automatically each time the generator is triggered.</p>   <h3 id="howtoextendanexistinggenerator?">How to extend an existing generator?</h3>   <p id="62662d36">There is one rule to follow - make sure your extending generator is run before the extended one - give it higher priority in the generator order priority dialog.</p>   <h3 id="howtobuildanextensiblegenerator?">How to build an extensible generator?</h3>   <p id="0935b099">By extending the generator, extensions can alter the semantics of the original language. The MPS generator is extensible by design – it resolves all generator rules and mapping configurations from all involved languages and builds a global generation plan. Any language that is attached to the project will have its rules included. The plan specifies the execution order for the generator rules based on their mutual relative priorities expressed in mapping configurations. This enables language extensions to inject their own desired generation rules into the most suitable generation phase. Since priorities are expressed as a collection of relative ordering between mapping configurations, a language extension does not need to know about all other generators involved in generation in order to work. Potential (and rare) clashes are detected and left up to the developer to resolve. Once created, the generation plan is used to iteratively invoke the generators, potentially leveraging parallelism of the underlying hardware for mutually independent rules.</p>   <p id="08c79cfd">Providing additional reduction rules is one way to extend a language. Using a Generator Switch is another option. If the parent language uses a generator switch to choose the right reduction rules, the language extension may extend that generator switch with its additional logic for picking the reduction rules – typically to include new rules contributed by extension languages.</p>   <h3 id="whatshalliusetextgenfor?">What shall I use TextGen for?</h3>   <p id="c105e85c">While the generator performs model-to-model transformations, TextGen does mapping to text. This is typically the last step in generation and is fully managed by the generator. Roots are picked by the generator and converted to files. The TextGen intentionally offers very little flexibility to the language designer. It is the Generator, where the generation process should primarily be configured and handled. If you feel a need to workaround the limitations of TextGen, you're most likely trying things the wrong way. Generator is the place where you have the most flexibility.</p>   <h3 id="howtogeneratemultiplefilesperrootnode?">How to generate multiple files per root node?</h3>   <p id="72796eff">TextGen only allows one file per root node. Also, you can only have one TextGen component per concept. The flexibility should be encoded into the generator, instead. You get the generator create multiple copies of the node, maybe wrapping each of them in a new node of different concepts. These new nodes then have their TextDef defined to perform the desired model-to-file conversions.</p>   <p id="ed9a6d19">&nbsp;</p><div class="last-modified" data-skip-index="skip">Last modified: 5 July 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="howto-integration-with-the-data-flow-engine.html">HowTo -- Integration with the Data Flow Engine</a><a class="navigation-links__next" href="editor-cookbook.html">Editor cookbook</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>