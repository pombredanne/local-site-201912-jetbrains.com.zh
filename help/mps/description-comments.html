<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>说明注释-帮助| MPS</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Description+comments.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索MPS帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected>默认</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_mac_os_x" data-group="primary">Eclipse（Mac OS X）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_mac_os_x" data-group="primary">Mac OS X</option><option value="primary_mac_os_x_10.5_" data-group="primary">Mac OS X 10.5以上</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_default" data-group="secondary">默认</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_jbuilder" data-group="secondary">JBuilder的</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5以上</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="description-comments.xml" data-toc="Description+comments.html">说明注释</h1>   <p id="cd18cb28">我们将学习如何利用向节点添加属性的功能。该功能在“ <a href="structure.html">结构”</a>一章的“ <b id="0605e35f">属性”</b>部分中进行了详细说明。在本手册中，我们将为“ <b id="b49a3a8b">计算器”</b>教程语言创建一个简单的补充，使<b id="b49a3a8b">计算器</b>定义的输入和输出字段可以附加描述性注释。这些描述性注释将以“弹出工具提示”的形式传播到生成的Java代码中，该“工具提示”附在与输入和输出字段相对应的Swing文本字段上。</p>   <aside class="tip sideblock" rel="cd18cb28" id="2d4dc8ec" data-title="">      <p id="73fda966">由于MPS 2018.2文档注释可以以任何语言无缝插入代码中，而无需语言本身的明确支持。<a href="generic-placeholders-and-generic-comments.html">通用占位符和通用注释中</a>介绍了此功能。除非您要极大地定制注释的使用方式，否则不再需要为注释添加语言支持。但是，本食谱着重于属性，并且仍然具有很高的相关性。</p>   </aside>   <h2 id="thecalculatorlanguage">计算器语言</h2>   <p id="54bbc6d2">我们选择<a href="/help/mps/2019.1/mps-calculator-language-tutorial.html" rel="noopener noreferrer" data-external="true" target="_blank">计算器教程</a>语言作为我们实验的测试平台。您可以找到MPS分发随附的示例项目集中包含的<i id="15f983a1">计算器教程</i>项目。我建议您先略读本教程以熟悉该语言，然后再继续。</p>   <h2 id="changestothefields">更改字段</h2>   <p id="3c87b8c3">让我们开始构建用于向输入和输出字段添加描述性注释的机制。我们的方法将基于批注，当批注添加到节点时，批注将对其节点的视觉外观以及所生成的代码产生影响。有几个至关重要的组件将实现我们所需的功能：</p>   <ul class="list _ul"><li class="list__item" id="a03f517a"><p>标记界面，指示哪些节点可以保存描述注释</p></li><li class="list__item" id="072cdaf5"><p>注释本身，用于指示节点是否持有描述注释以及描述是什么</p></li><li class="list__item" id="17784725"><p>提供键盘快捷方式的操作，用于快速向插入符下的节点添加和/或删除描述注释</p></li><li class="list__item" id="e31bd6e3"><p>更新代码生成过程，以便为所描述的组件生成可视的“工具提示”</p></li></ul>   <p id="0f845e7f">我们从一个新界面开始，以标记所有可注释节点：</p>   <p id="b1bd4e1c">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/DC1.png"><img alt="标记节点" title="标记节点" src="/help/img/idea/2019.2/DC1.png" id="ca45a76e" width="700" height="1036"></a></figure>   <p></p>   <p id="a9c07eed"> </p>   <p id="f9baf7a0">现在， <i id="908d5b11">InputField</i>和<i id="02523fc1">OutputField</i>概念都必须实现新的<i id="eb34f1e6">ICanHaveDescription</i>接口。</p>   <p id="e157eb98"> </p>   <p id="81d1120d">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/DC3.png"><img alt="实现ICanHaveDescription接口" title="实现ICanHaveDescription接口" src="/help/img/idea/2019.2/DC3.png" id="fc853607" width="700" height="1054"></a></figure>   <p></p>   <h2 id="thedescriptionannotationconcept">DescriptionAnnotation概念</h2>   <p id="48773dfd">我们仍然缺少我们难题的核心内容-实际的注释将归因于输入和输出字段以指定描述注释。现在创建它：</p>   <p id="4297a1aa">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/DC4.png"><img alt="创建描述" title="创建描述" src="/help/img/idea/2019.2/DC4.png" id="5f09edd7" width="700" height="1006"></a></figure>   <p></p>   <p id="520fb15d">      <br>将概念扩展为<i id="dab4e0d7">NodeAttribute之后</i> ，MPS会提示您提供详细的归属信息。通过<i id="3adde97d">Alt + Enter</i>调用快速修复将添加必要的信息以供您自定义：</p>   <p id="200c2504">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/DC5.png"><img alt="调用快速修复" title="调用快速修复" src="/help/img/idea/2019.2/DC5.png" id="ced3a9b1" width="600" height="580"></a></figure>   <p></p>   <p id="98d6ccde">      <br>您需要通过设置<i id="617beb79">角色</i>和<i id="3c9aeb4c">属性概念的</i>值来指定新注释的其他质量。我们将注释的<i id="840f9f3d">角色</i>设置为<i id="7730cad6">descriptionComment</i> 。这是在查询中使用的名称，用于找出节点是否已使用<i id="633fc0a4">DescriptionAnnotation</i>进行了注释。我们还指出，注释只能<i id="b8d2609d">归因</i>于实现<i id="65b21482">ICanHaveDescription的</i>节点，在我们的例子中为<i id="43ae0fc4">InputField</i>和<i id="59edf259">OutputField</i> 。</p>   <p id="00f18f7c">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/DC6.png"><img alt="指定其他质量" title="指定其他质量" src="/help/img/idea/2019.2/DC6.png" id="2cd1d8a7" width="600" height="1148"></a></figure>   <p></p>   <p id="6a2f7317"><i id="581b7c98">DescriptionAnnotation</i>还必须存储<i id="581b7c98">描述</i>的实际文本-为此，我们将使用<i id="163e67e7">字符串</i>属性<i id="fec345e1">descriptionText</i> ：</p>   <p id="9ea1ff48">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/DC7.png"><img alt="添加描述文字" title="添加描述文字" src="/help/img/idea/2019.2/DC7.png" id="2403f366" width="600" height="1146"></a></figure>   <p></p>   <p id="34f26916"> </p>   <p id="6f2807c8"><i id="c5be3fc7">DescriptionAnnotation</i>的编辑器是定义带有描述注释的节点的视觉行为的关键元素。我们在带注释的节点前添加<i id="a85e8b2e">“描述的”</i>常量，并在括号中附加实际的描述文本。<i id="56dccab4">属性节点</i>单元代表实际节点（属性附加到的节点）的编辑器。</p>   <p id="fd9f7376">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/DC8.png"><img alt="附加到节点" title="附加到节点" src="/help/img/idea/2019.2/DC8.png" id="cd8085b9" width="600" height="494"></a></figure>   <p></p>   <h2 id="furthereditorenhancements">进一步的编辑器增强</h2>   <p id="b6fbdc76">为了打开和关闭节点的描述注释，我们将创建新的<i id="816317a0">KeyMap</i> 。</p>   <p id="f77285fd">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/DC20.png"><img alt="创建一个新的按键图" title="创建一个新的按键图" src="/help/img/idea/2019.2/DC20.png" id="ac9fbf1c" width="600" height="1068"></a></figure>   <p></p>   <p id="51f3bd82"> </p>   <p id="a9bb9629">为了编辑代码，我们将使用<i id="1a997a51">BaseLanguage</i>和<i id="dfb4e22a">smodel中的</i>概念，默认情况下应可用。如果没有，请通过<i id="6c427434">Control / Cmd + L</i>导入它们<i id="6c427434">。</i>我们还需要<i id="483e6285">动作</i>语言才能轻松创建初始化的节点。这很可能需要显式导入（ <i id="f4318d90">Control + L</i> ）。</p>   <p id="ffbb106b">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/DC10.png"><img alt="添加导入语句" title="添加导入语句" src="/help/img/idea/2019.2/DC10.png" id="6d5af164" width="400" height="594"></a></figure>   <p></p>   <p id="f8f072b4">现在我们可以完成操作：</p>   <p id="6cc7feb0">      <br>      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/DC13.png"><img alt="完成动作" title="完成动作" src="/help/img/idea/2019.2/DC13.png" id="73a4a35d" width="600" height="1232"></a></figure>   <p></p>   <p id="e7e70079">每当在实现<i id="e642fd9a">ICanHaveDescription</i>的节点上按下<i id="79bfc5cf">Control + Alt + Shift + D时</i> ，该操作便会向该节点/从该节点添加或删除<i id="88826cbd">DescriptionAnnotation</i> 。</p>   <p id="675eac8d">现在，需要将<i id="4452ed44">KeyMap</i>添加到对<i id="94c2356a">Control + Alt + Shift + D</i> <i id="4452ed44">起作用的</i>所有字段。在我们的示例中，这是<i id="cbe0a90c">InputField</i>和<i id="f77bf977">OutputField</i> 。应对<i id="14aa61ba">Control + Alt + Shift + D</i>组合<i id="14aa61ba">键</i>作出反应的编辑器单元必须具有在<i id="2caeff3a">keycap</i>属性中指定的键映射。</p>   <p id="0b0b4184">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/DC12.png"><img alt="将键映射添加到所有字段" title="将键映射添加到所有字段" src="/help/img/idea/2019.2/DC12.png" id="2c1b7871" width="400" height="1358"></a></figure>   <p></p>   <h2 id="howarewedoingsofar?">到目前为止我们怎么样？</h2>   <p id="853c831b">编译后，您可以在输入字段和输出字段上同时使用<i id="a58727da">Control + Alt + Shift + D</i>来切换描述注释：</p>   <p id="0bfae18a">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/DC14.png"><img alt="切换描述注释" title="切换描述注释" src="/help/img/idea/2019.2/DC14.png" id="4eb041ea" width="500" height="418"></a></figure>      <br>      <br>   <p></p>   <h2 id="updatingthegenerator">更新发电机</h2>   <p id="1bfce26a"><i id="a77bdf7d">DescriptionAnnotation</i>当前在生成过程中丢失。相反，我们想为表示注释的输入和输出字段的文本字段生成Swing“工具提示”。<br>      </p><figure><img alt="更新发电机" title="更新发电机" src="/help/img/idea/2019.2/DC21.png" id="cd5062cf" width="340" height="148"></figure>   <p></p>   <p id="1b725e94">生成代码时，我们目前将所有输入或输出字段都放在计算器中，并为其生成JTextFields。在构造函数中，我们还为每个生成的JTextField生成初始化代码-在这里，我们可以在Swing的“工具提示”中附加JTextField，这些JTextField表示带有描述注释的输入或输出字段。</p>   <p id="a8cacd4e">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/DC15.png"><img alt="创建JTextField" title="创建JTextField" src="/help/img/idea/2019.2/DC15.png" id="42f1e86b" width="700" height="1324"></a></figure>   <p></p>   <p id="4ab82ab0"><i id="72784e69">$ IF $</i>节点宏将确保仅为附加了<i id="cd15b8da">DescriptionComment</i>注释的节点生成“工具提示”。</p>   <p id="3cf5e192"> </p>   <p id="0c46dacd">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/DC16.png"><img alt="添加宏" title="添加宏" src="/help/img/idea/2019.2/DC16.png" id="9055f3bc" width="700" height="1140"></a></figure>   <p></p>   <p id="a4bc9ade">“工具提示”文本的<b id="e7da2197">属性宏</b>将设置附加到当前节点的<i id="ba007e10">DescriptionAnnotation</i>的<i id="2ee0a621">descriptionText</i> ：</p>   <p id="f4b0843c"> </p>   <p id="d6a971fc">      </p><figure><a class="lightbox" href="/help/img/idea/2019.2/DC17.png"><img alt="属性宏" title="属性宏" src="/help/img/idea/2019.2/DC17.png" id="daaa12fb" width="700" height="860"></a></figure>   <p></p>   <p id="0581efa9">重建语言和沙箱解决方案之后，生成的Calculator表单将在附加有<i id="1357cb76">DescriptionAnnotation</i>标记的字段上附加“工具提示”：</p>   <p id="71092afc">      </p><figure><img alt="产生的工具提示" title="产生的工具提示" src="/help/img/idea/2019.2/DC21.png" id="2452ada4" width="288" height="148"></figure>   <p></p>   <h2 id="summary">摘要</h2>   <aside class="tip sideblock" rel="summary" id="f860a5e9" data-title="">      <p id="d2aff5d7">现在，您可以考虑查看<a href="requirement-tracking-language.html">Requirement跟踪语言食谱</a> ，该<a href="requirement-tracking-language.html">手册</a>在Requirement跟踪示例项目中提供了带注释的导览，该示例项目显示了节点属性的另一种实际用法以及多个投影和作用域。</p>   </aside>   <p id="7d8cf15f"> </p>   <p id="f9d90ba0">我们可以在这里完成游览。输入字段和输出字段都可以用<i id="3b7f1d9f">DescriptionAnnotation描述</i> ，并且生成的代码包含每个此类描述的“工具提示”。</p><div class="last-modified" data-skip-index="skip">上次修改时间：2019年8月30日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="scopes.html">范围</a> <a class="navigation-links__next" href="requirement-tracking-language.html">需求跟踪语言</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>