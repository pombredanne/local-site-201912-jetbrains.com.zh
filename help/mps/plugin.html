<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>插件-帮助| MPS</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Plugin.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索MPS帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected>默认</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_mac_os_x" data-group="primary">Eclipse（Mac OS X）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_mac_os_x" data-group="primary">Mac OS X</option><option value="primary_mac_os_x_10.5_" data-group="primary">Mac OS X 10.5以上</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_default" data-group="secondary">默认</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_jbuilder" data-group="secondary">JBuilder的</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5以上</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="plugin.xml" data-toc="Plugin.html">插入</h1>   <p id="70094375">      </p><ul data-skip-index="skip"><li class="list__item"><a href="#plugininstantiation">插件实例化</a></li><li class="list__item"><a href="#actionsandactiongroups">行动和行动小组</a></li><li class="list__item"><a href="#actionstructure">动作结构</a></li><li class="list__item"><a href="#actionproperties">动作属性</a></li><li class="list__item"><a href="#constructionparameters">施工参数</a></li><li class="list__item"><a href="#enable/disableactioncontrol">启用/禁用动作控制</a></li><li class="list__item"><a href="#groupstructure">组结构</a></li><li class="list__item"><a href="#presentation">介绍</a></li><li class="list__item"><a href="#when" ispopu="istrue:" ="">当“是弹出窗口”为true时：</a></li><li class="list__item"><a href="#contents">内容</a></li><li class="list__item"><a href="#modificationsandlabels">修改和标签</a></li><li class="list__item"><a href="javascript:void(0);">actionGroup <...>表达式</a></li><li class="list__item"><a href="#bootstrapgroups">引导程序组</a></li><li class="list__item"><a href="#touchbarsupportonmacos">MacOS上的触控栏支持</a></li><li class="list__item"><a href="#displayingprogressindicators">显示进度指示器</a></li><li class="list__item"><a href="#keymapchanges">键映射更改</a></li><li class="list__item"><a href="#nondumbawareactions">NonDumbAware动作</a></li><li class="list__item"><a href="#editortabs">编辑器标签</a></li><li class="list__item"><a href="#editortabstructure">编辑器标签结构</a></li><li class="list__item"><a href="#tools">工具类</a></li><li class="list__item"><a href="#toolstructure">工具结构</a></li><li class="list__item"><a href="#tooloperation">工具操作</a></li><li class="list__item"><a href="#tabbedtools">选项卡式工具</a></li><li class="list__item"><a href="#toolstructure">工具结构</a></li><li class="list__item"><a href="#preferencescomponents">首选项组件</a></li><li class="list__item"><a href="#preferencescomponentstructure">首选项组件结构</a></li><li class="list__item"><a href="#preferencespagestructure">首选项页面结构</a></li><li class="list__item"><a href="#preferencecomponentexpression">PreferenceComponent表达式</a></li><li class="list__item"><a href="#custompluginparts(projectplugin,applicationplugin)">自定义插件部分（ProjectPlugin，ApplicationPlugin）</a></li></ul>   <p></p>   <p id="f60730ea">插件是一种将代码与MPS IDE功能集成的方法。<br><i id="7271185c">jetbrains.mps.lang.plugin</i>和<i id="38415621">jetbrains.mps.lang.plugin.standalone</i>语言为您提供了许多可以在插件中使用的根概念。本章将介绍所有这些内容。</p>      <h2 id="plugininstantiation">插件实例化</h2>   <p id="cbd2fb75">在开发插件时，您有一个解决方案来保存该插件，并且希望该插件类能够自动重新加载，从而不必在每次更改后重新启动MPS即可看到其效果。要正确设置开发阶段，请执行以下操作：</p>   <ol class="list _decimal"><li class="list__item" id="390f9f1d"><p>为您的插件创建新的解决方案</p></li><li class="list__item" id="16ccf54d"><p>在此解决方案中创建一个名为<i id="aac46211"><solution_name>.plugin</solution_name></i>的模型      </p></li><li class="list__item" id="7b38f71f"><p>将<i id="15c830af">jmlang.plugin</i>和<i id="77b6f6c5">jmlang.plugin.standalone</i>语言导入解决方案和模型</p></li><li class="list__item" id="f3df9582"><p>在模型中创建根<i id="e38790e4">StandalonePluginDescriptor</i> （来自<i id="a514885c">jmlang.plugin.standalone</i>语言）</p></li><li class="list__item" id="6d7c4165"><p>将解决方案的“ <i id="0eee1dd9">解决方案类型”设置</i>为“ <i id="2a057a63">其他”</i>         <br>          </p><figure><a class="lightbox" href="/help/img/idea/2019.2/Plug2.png"><img alt="插头2" title="插头2" src="/help/img/idea/2019.2/Plug2.png" id="9b257f99" width="450" height="313"></a></figure>         <br>现在，您可以编辑插件模型，并在生成后立即查看应用于当前MPS实例的更改。您还可以分发解决方案，并使插件成功为用户使用。<p></p></li></ol>      <h2 id="actionsandactiongroups">行动和行动小组</h2>   <p id="779fcfd5">可以使用<b id="c292ed28">操作</b>和<b id="71f01365">操作组</b>实体将自定义操作添加到MPS中的任何菜单。</p>   <p id="3943b422">一个<b id="43bb2957">动作</b>描述了一个具体的动作。<b id="c8e2dd73">动作组</b>被命名为用于构造动作的动作列表-将它们添加到其他组和MPS组（代表菜单本身）中，并将它们组合为弹出菜单。您还可以创建具有动态更改内容的组。</p>   <p id="1af8eca1">如何向现有组添加新动作？</p>   <p id="204a2a45">为了向现有组添加新操作，应执行以下操作：</p>   <ol class="list _decimal"><li class="list__item" id="ed76693c"><p>动作应该描述</p></li><li class="list__item" id="381fd9b5"><p>描述的动作应分组</p></li><li class="list__item" id="86c4a242"><p>这些组应添加到现有组（例如，预定义的MPS组中，以向MPS菜单添加新操作）。</p></li></ol>   <p id="1904006d">预定义的MPS组存储在<i id="a6767e38">jetbrains.mps.ide.actions</i>模型中，该模型是<i id="14cbd914">jetbrains.mps.lang.plugin</i>语言的附件模型，因此您无需将其显式导入到模型中。</p>   <h4 id="actionstructure">动作结构</h4>   <h4 id="actionproperties">动作属性</h4>   <p id="6b22c779">      <b id="b8e945cd">名称</b> -动作的名称。您可以指定任何名称，唯一明显的限制是名称在模型范围内必须唯一。</p>   <p id="03d16f70">      <b id="781784e0">助记符-</b>如果指定了<i id="bb04a809">助记符</i> ，则在显示包含该操作的任何组时，可通过<i id="bb04a809">alt +助记符</i>快捷方式使用该操作。请注意，助记符（如果指定）必须是动作标题中的字符之一。助记符在操作的<b id="96c688fb">标题中</b>显示为带下划线的符号。</p>   <p id="6dfe628e">      <b id="5bf77261">执行外部命令</b> -MPS模型的所有操作都在<i id="5cccba10">命令</i>内执行。<i id="81fe56c3">命令</i>是撤消列表中的一项（您无需手动控制，MPS会为您执行命令），因此用户可以撤消因执行操作而带入模型的更改。同样，在命令中执行的所有代码都具有对模型的读写访问权限。要注意的是，如果您从命令内部向用户显示可视对话框，则可能会由于持有读/写锁而阻塞而导致死锁。因此，仅当您未在操作中使用UI时，才建议将<i id="ed9b44c4">execute outside命令</i>选项设置为false。否则，应将其设置为true，并应使用该<b id="42a1c1fb">操作中</b>的<b id="42a1c1fb">read操作</b>和<b id="18f8e002">命令</b>语句手动执行正确的读/写访问锁定。</p>   <p id="9d2d51c5">      </p><figure><img alt="插头1" title="插头1" src="/help/img/idea/2019.2/Plug1.png" id="1ffff6c1" width="900" height="227"></figure>   <p></p>   <p id="7c80087f">      <b id="f583b7cb">该功能也可在</b> -当前使用，只能设置为“无处不在”，这意味着该操作不仅将在上下文中可用，您可以通过完成菜单调用该上下文，而且还可以在任何其他上下文中使用。例如，如果将某些操作添加到编辑器上下文菜单组中，但作者希望在焦点位于逻辑视图中时或仅在所有编辑器关闭时才可用，则应将“也可用”设置为“所有位置” ”。</p>   <p id="232ea500">      <b id="cffa5eb9">标题-</b>代表菜单中动作的字符串</p>   <p id="abaf9743">      <b id="2706bf8e">描述-</b>当此动作有效时（在任何菜单中选择），该字符串（如果指定）将显示在状态栏中。</p>   <p id="f56d0fce">      <b id="38b1e44f">图标-</b>该图标将显示在所有菜单中操作附近。您可以通过按“ ...”按钮来选择图标文件。请注意，图标必须放在<b id="e907566a">您的语言附近</b> （因为它不是作为图像存储，而是作为相对于语言根目录的路径存储）</p>   <h4 id="constructionparameters">施工参数</h4>   <p id="09734bf5">可以在施工时使用<b id="7530f074">施工参数对</b>每个动作进行参数<b id="7530f074">化</b> 。这可以是确定动作行为的任何数据。因此，使用构造参数的单个动作可以表示多种不同的行为。为了管理动作和处理键映射，MPS需要为动作所代表的每个具体行为提供唯一的标识符。因此，为每个构造参数引入了<b id="72a1655c">toString</b>函数（可以在检查器中看到）。对于原始类型，无需显式指定此功能-MPS可以自动执行此功能。对于更复杂的参数，您需要显式编写此函数，以便对于操作的每种具体行为，都有toString（）函数返回的一组不同的值。</p>   <h4 id="enable/disableactioncontrol">启用/禁用动作控制</h4>   <p id="e71a2586">      <b id="68828051">始终可见标志-</b>如果您希望您的操作即使在禁用状态下也可见（当该操作不适用于当前上下文时），请将其设置为true，否则设置为false。</p>   <p id="74547fc9">      <b id="2ea6fa36">上下文参数-</b>指定在当前上下文中必须存在哪些项目才能执行该动作。它们是在执行任何操作的方法之前从上下文中提取的。上下文参数具有与之相关的条件- <b id="6efdee67">必需</b>和<b id="3459412d">定制</b>是两个最常用的条件。如果未提取某些<b id="d1d96dd9">必需</b>参数，则将动作状态设置为<i id="90ea8741">禁用，</i>并且不执行<b id="bbd27067">isApplicable / update / execute</b>方法。如果提取了所有必需的操作参数，则可以在所有操作方法中使用它们的值。<b id="671d99b8">使用自定义</b>上下文参数，您可以选择使用提供的功能根据情况决定上下文参数是否是必需的。</p>   <p id="0744b599">动作参数有2种类型- <b id="8ae15946">简单</b>动作参数和<b id="7828e148">复杂</b>动作参数。</p>   <ul class="list _ul"><li class="list__item" id="0d337664"><p>         <b id="bdb3617a">简单的</b>动作参数（由<i id="c67c22c9">ActionDataParameterDeclaration</i>表示）允许简单地从当前数据上下文中提取所有可用数据。数据是通过“键”提供的，因此您应该在声明中指定<i id="af2f55d7">名称</i>和<i id="a504513e">键</i> 。参数的类型将自动设置。</p></li><li class="list__item" id="10273304">         引入了<b id="74c60032">复杂的</b>动作参数（由<i id="120c01c0">ActionParameterDeclaration</i>表示）来执行一些经常使用的检查和类型转换。现在，有3种类型可用于此类型的context参数：<ul class="list _ul"><li class="list__item" id="9d1b9736"><p>               <b id="fa61e82d">节点<concept></concept></b> <i id="93e337db">-</i>当前选定的节点，它是指定概念的实例。如果所选节点不是此概念的实例，则不会启用操作。</p></li><li class="list__item" id="321f7c3a"><p>               <b id="2984f9f3">列表<concept></concept></b> <i id="9667d33e">-</i>当前选定的节点。检查所有节点都是<b id="a3832264">概念的</b>实例（如果指定）。与<b id="90bb2b6e">节点一样<concept></concept></b> ，如果检查失败，则不会启用该操作。</p></li><li class="list__item" id="f68a764d"><p>               <b id="404b59bf">建模</b> <i id="7c9c2f6a">-</i>当前模型保持所选择的节点</p></li></ul>      </li></ul>   <aside class="tip sideblock" rel="443e3c6d" id="aee66742" data-title="">      <p id="afee8680">用户可以键入到<b id="bfbe2d74">上下文</b> <b id="4855303d">参数</b>声明中的可用<i id="15b2bdd8">键</i>是从所有导入的模型中自动获得的。MPS在导入的模型中搜索<i id="9a3e8719">CommonDataKeys</i> （ <i id="29a9f7cf">com.intellij.openapi.actionSystem</i> ）类的子类。典型的此类子类为：</p>      <ul class="list _ul"><li class="list__item" id="275c8fe8">            <i id="a35cdef6"></i>         </li><li class="list__item" id="f6c45216"><p>            <i id="e2b4d838">PlatformDataKeys</i> （ <i id="e1276107">com.intellij.openapi.actionSystem</i> ）</p></li><li class="list__item" id="dd6f668f"><p>            <i id="58d1007c">MPSCommonDataKeys</i> （ <i id="2864a0d2">jetbrains.mps.ide.actions</i> ）</p></li><li class="list__item" id="462a9dde"><p>            <i id="44e64566">MPSEditorDataKeys</i> （ <i id="1a2fcd85">jetbrains.mps.ide.editor</i> ）</p></li><li class="list__item" id="f8b1a9f0"><p>            <i id="f0080f62">MPSDataKeys</i> （jetbrains.mps.workbench）</p></li></ul>      <p id="b2956ae8">确保导入这些模型（ <i id="82a176b5">Control / Cmd + M</i> ），以便在<b id="770b9b0e">上下文</b>菜单的完成菜单中查看它们。</p>   </aside>   <p id="970a8eb8"> </p>   <p id="4c5df45c">      <b id="7ffe057e">适用/更新</b> -与上下文参数配合使用，此方法控制操作的<i id="e5de1d15">启用/禁用</i>状态。您可以选择以下两个选项之一：</p>   <ul class="list _ul"><li class="list__item" id="1ee1a770"><p><b id="7fc139c8">isApplicable</b>方法返回动作的新状态</p></li><li class="list__item" id="6c552939"><p><b id="e6ffdc0c">更新</b>方法旨在手动更新状态。您还可以通过<i id="25d09253">event.getPresentation（）</i>访问动作的演示文稿来更新动作的任何属性（标题，图标等<i id="25d09253">）</i> 。在操作上调用<i id="d9b113d0">setEnabledState（）</i>方法以手动启用或禁用它。</p></li></ul>   <p id="9ca37c03">仅当已从上下文中成功提取所有<b id="f060a265">必需的</b>上下文参数时，才执行这些方法。</p>   <p id="7185453c">注意： <i id="f4701532">此</i>关键字引用当前操作，使用action <...>来获取代码中任何可见的操作。</p>   <aside class="tip sideblock" rel="7185453c" id="b371334e" data-title="">      <p id="8ab9df62">如果要手动修改演示文稿，请不要使用<i id="f49d2b33">isApplicable（）</i>方法。尽管不会从<i id="384895bf">isApplicable（）</i>内部报告任何错误，但不能保证在所有情况下都能正常工作。<i id="86dc4bad">update（）</i>方法是进行复杂的表示操作的更合适的地方。</p>   </aside>   <p id="bba7f8df"> </p>   <p id="171bb722">      <b id="9c104ac5">执行</b> -执行操作时<b id="9c104ac5">执行</b>此方法。确保只有在同一事件的操作的<b id="ed1cad5e">update</b>方法使该操作处于活动状态（或<b id="0a0c123b">isApplicable</b>返回<b id="ab5b1e5d">true</b> ）并且所有必需的上下文参数都存在于当前上下文中并且已被填充时，才执行该操作。</p>   <p id="2922993b">      <b id="28931b77">方法</b> -在本节中，您可以声明实用程序方法。</p>   <h4 id="groupstructure">组结构</h4>   <p id="67453ec5">组描述了一组操作，并提供了有关如何使用当前组修改其他组的信息。</p>   <h4 id="presentation">介绍</h4>   <p id="7b94592d">      <b id="01286152">名称-</b>组的名称。您可以指定任何名称，唯一明显的限制是名称在模型范围内必须唯一。</p>   <p id="a5761479">      <b id="4803ab5f">是弹出窗口-</b>如果为true，则该组代表一个弹出菜单，否则代表一个动作列表。</p>   <h4 id="when" ispopu="istrue:" ="">当“是弹出窗口”为true时：</h4>   <ul class="list _ul"><li class="list__item" id="683809e4"><p>         <b id="4936d415">标题-</b>将显示为弹出菜单名称的字符串</p></li><li class="list__item" id="6ef2f5f9"><p>         <b id="fc7f6d8c">助记符-</b>如果指定了助记符，则当显示包含<i id="ad2b2653">助记符的</i>任何组时，可通过<i id="ad2b2653">alt +助记符</i>快捷方式使用弹出菜单。请注意，助记符（如果指定）必须是<b id="a757ccb3">标题</b>中的字符之一。助记符在弹出菜单标题中显示为带下划线的符号。</p></li><li class="list__item" id="933246d0"><p>         <b id="25ac31b6">禁用时不可见-</b>如果设置为true，则如果该组没有启用的操作或在<i id="26a998e7">update（）</i>方法中被手动禁用，则不会显示该组。在操作组上调用<i id="076f68e3">enable（）/ disable（）</i>方法以手动启用或禁用它。</p></li></ul>   <h4 id="contents">内容</h4>   <p id="cbadab3e">有三种描述群组内容的可能性：</p>   <p id="5caa49a9">      <b id="a0129f5b">元素列表-</b>这只是动作，组和标签的静态列表（请参阅修改）。可用元素为：</p>   <ul class="list _ul"><li class="list__item" id="26a13139"><p>         <b id="a344b8c6">->名称</b> -锚点。锚用于将一个组与另一个组进行修改。有关详细信息，请参见<b id="d8472826">添加语句</b>部分。</p></li><li class="list__item" id="83316f29"><p>         <b id="3499a05c"><---></b> -分隔符</p></li><li class="list__item" id="e3beb63f"><p>         <b id="6c6f1468">ActionName [parameters]</b> -一个动作。</p></li></ul>   <p id="5322888d">      <b id="8bfe30f1">构建-</b>此替代方法应成组使用，其内容是静态的，但取决于某些初始条件-该组仅构建一次，以后不会更新。使用<b id="6747c18e">add</b>语句在build块内添加元素。</p>   <p id="27d3a66d">      <b id="1b923d87">更新-</b>适用于动态更改的组。每次在渲染组之前都会对其进行更新。</p>   <aside class="tip sideblock" rel="27d3a66d" id="5f7140ed" data-title="">      <p id="6a0902b2">在更新/构建块中，使用<b id="493795b3">add</b>语句添加组成员。</p>   </aside>   <p id="de531b7b"> </p>   <h4 id="modificationsandlabels">修改和标签</h4>   <p id="f13a7998">      <b id="d414e719">添加到<group>位置<position>-</position></group></b>此语句将当前组添加到<i id="aadb1da4"><group></group></i>在给定的位置。每个小组都有一个<i id="804c7880"><default></default></i>位置，指示将当前组添加到目标组的末尾。一些团体可以通过在自己身上添加所谓的<b id="1a420d4c">锚</b>来提供其他职位。<i id="d8fb6606">内容</i>部分中描述了添加锚点。锚点本身是不可见的，表示可以插入组的位置。</p>   <aside class="tip sideblock" rel="f13a7998" id="694d27f9" data-title="">      <ul class="list _ul"><li class="list__item" id="330d745d"><p>您不必在意组的创建顺序和修改顺序-此语句是完全声明性的。</p></li><li class="list__item" id="a3e167ea"><p>如果将A添加到B，将B添加到C，则C将包含A</p></li></ul>   </aside>   <h4 id="actiongroup<...>expression">actionGroup <...>表达式</h4>   <p id="830a2275"><i id="bffc5b7c">jetbrains.mps.lang.plugin</i>语言中有一个特定的表达式可用于访问任何已注册的组<i id="bffc5b7c">-actionGroup</i> <b id="54315e0e"><</b> <b id="d2de8739"><i id="fe0e7fd9">group</i></b> <b id="afe85797">></b>表达式。</p>      <h4 id="bootstrapgroups">引导程序组</h4>   <p id="6b4eef82">引导程序组是使用在MPS之外定义的操作组的一种方法（例如，由IDEA或某些IDEA插件提供的组）。<br>在这种情况下，引导组在MPS中定义，并且其内部ID设置为外部组的ID。完成此操作后，您可以像使用普通引导组一样使用引导组-将其插入组中，反之亦然。<br>普通用户很少需要使用引导程序组。</p>   <aside class="tip sideblock" rel="6b4eef82" id="a7db225b" data-title="">      <p id="7d0b55a8">Federico Tomassetti提供了一个关于如何创建动作并将其显示在上下文菜单中的快速简单的教程：<br>          <a href="http://www.federico-tomassetti.it/tutorial-how-to-add-an-action-to-the-jetbrains-metaprogramming-system/" rel="noopener noreferrer" data-external="true" target="_blank">http://www.federico-tomassetti.it/tutorial-how-to-add-an-action-to-the-jetbrains-metaprogramming-system/</a>      </p>      <p id="2c6d5c74">请记住，本教程使用了较旧的MPS版本，此后MPS中的实际工作方式已经发生了变化。特别是，我们现在建议使用<b id="19868f4b">插件解决方案，</b>而不是语言的<b id="bfaa615c">插件方面</b>来进行操作。该教程可能仍会为您提供一些指导和有用的见解。</p>   </aside>   <h3 id="touchbarsupportonmacos">MacOS上的触控栏支持</h3>   <p id="72141d97">可以通过将预定义的用户<b id="67f856c1">操作</b>和<b id="0f4c4956">操作组</b>添加到预定义的<b id="bc5790c9">InterfaceGroups</b>之一，来将其添加到<i id="a7c7650d">触摸栏中</i> ：</p>   <ul class="list _ul"><li class="list__item" id="b7b44fe5"><p>IDEATouchBar默认</p></li><li class="list__item" id="c0f125a9"><p>IDEATouchBarDefault_alt</p></li><li class="list__item" id="4816b058"><p>IDEATouchBarDefault_cmd</p></li><li class="list__item" id="4834fe26"><p>IDEATouchBarDefault_cmd_alt</p></li><li class="list__item" id="9b8e80aa"><p>IDEATouchBarDefault_shift</p></li><li class="list__item" id="fb38095b"><p>IDEATouchBarDebug</p></li></ul>   <h3 id="displayingprogressindicators">显示进度指示器</h3>   <p id="f17f4c70">长效动作应向用户指示其活动和进度。请查看“ <a href="progress-indicators.html">进度指示器”</a>页面，以获取有关如何使用进度条，如何允许取消以及如何启用在后台运行的操作的详细信息。</p>   <h2 id="keymapchanges">键映射更改</h2>   <p id="8368c56d"><i id="e8a830a7">KeymapChangesDeclaration</i>概念使插件可以将按键快捷方式分配给各个操作，并将其分为快捷方式方案。</p>   <p id="cd5947e8">任何操作都可以具有许多键盘快捷键。可以使用<i id="a44af079">KeyMapChanges</i>概念来指定。对于具有多个“实例”（每个参数值一个实例）的参数化动作，可以指定一个函数，该函数针对不同的参数值返回不同的快捷方式。<br>在MPS中，有一些“默认键盘映射”，可以在<i id="1668680a">Settings-> Keymaps中</i>看到。<b id="3443b775">for keymap</b>部分允许您指定<i id="24398f09">KeyMapChanges</i>定义所贡献的键帽。例如，可以在MacOS和Windows键映射中为同一操作设置不同的快捷方式。</p>   <aside class="tip sideblock" rel="cd5947e8" id="af322d28" data-title="">      <p id="40b227d4">如果将键盘快捷方式添加到“ <b id="e47ab1e2">默认”</b>键盘映射，则所有键盘映射都将使用此快捷方式更改。</p>   </aside>   <aside class="tip sideblock" rel="plugin.xml" id="64e88b8a" data-title="">      <p id="7beff6a5">请注意，默认情况下，在<b id="b02d297a">MacOs键盘映射中</b> <i id="8c0b4eb6">ctrl</i>更改为<i id="45856ea7">cmd</i> 。如果要让操作在MacO上具有<i id="aef687d0">ctrl +</i>快捷键，则应为<b id="4c8264db">MacOs</b>键<b id="4c8264db">映射</b>重新定义此快捷键。</p>   </aside>   <p id="bbe8897b">插件添加的所有操作在<b id="c908c8a6">Settings-> Keymap</b>和<b id="41a368f1">Settings-> Menus和Toolbars</b>中可见。这意味着任何用户都可以自定义用于所有MPS操作的快捷方式。</p>   <p id="4004fe04">      </p><figure><img alt="插头4" title="插头4" src="/help/img/idea/2019.2/Plug4.png" id="f6965fd4" width="900" height="413"></figure>   <p></p>   <p id="3a642ad0">键盘布局变化应给予模型中唯一的名称，它必须指定被改变了<b id="35837913">键盘映射</b> （或<i id="9b56e4fd">默认</i>改变所有的键盘布局），然后分配一个按键来应该有一个动作。击键可以是具有直接指定击键的<i id="10eabe76">SimpleShortcutChange</i> ，也可以是<i id="5e233c52">ParametrizedShortcutChange</i> ，这使您能够处理参数化的动作。</p>      <h2 id="nondumbawareactions">NonDumbAware动作</h2>   <p id="15fdd912">如果您的操作使用平台索引（这种情况很少见），请将其添加到<i id="17f0a531">NonDumbAwareActions中</i> 。这些索引将在构建索引时自动禁用。</p>   <h2 id="editortabs">编辑器标签</h2>   <p id="a34a2926">如果您查看任何概念声明，您肯定会注意到编辑器底部的选项卡。您可以从您的语言向概念添加相同的功能。</p>   <p id="afab97f5">这些标签的含义是什么？答案很简单-它们包含“基本”节点某些<i id="13844053">方面</i>的编辑器。每个选项卡可以是单选项卡（这意味着其中仅显示一个节点，例如， <b id="ef1d43a5">编辑器</b>选项卡），也可以是多选项卡（如果可以为基础节点的这一方面创建多个节点，请参见“ <b id="7934130c">类型系统”</b>选项卡）。 ）。</p>   <p id="42a785e7">如何创建节点的编辑器？当您打开某个节点时，将其称为N，MPS会尝试找到N的“基础”节点。如果没有任何基础节点，MPS只会打开所选节点的编辑器。如果找到该节点（称为B），则MPS将为其打开一些选项卡，其中包含一些下级节点的编辑器。然后，为N选择选项卡，并设置与B对应的顶部图标和标题。</p>   <p id="98ad5ccf">创建<b id="a04df471">选项卡式编辑器时，</b>实际上提供了以下规则：</p>   <ul class="list _ul"><li class="list__item" id="d3fd864e"><p>寻找基础节点</p></li><li class="list__item" id="7d8af303"><p>寻找下属节点</p></li><li class="list__item" id="2e1d0b93"><p>可选地创建从属节点的算法</p></li></ul>   <p id="46a57a0e">根据在各自的<b id="5d7755a4">顺序约束</b>部分中指定的相对顺序规则，显示和组织与请求的基本概念匹配的选项卡。</p>   <h4 id="editortabstructure">编辑器标签结构</h4>   <p id="0345bc13">      <b id="064e53a0">名称-</b>规则的名称。您可以指定任何名称，唯一明显的限制是名称在模型范围内必须唯一。</p>   <p id="1c744bca">      <b id="f5855fe5">图标</b> -此图标将显示在选项卡的标题中。您可以通过按“ ...”按钮来选择图标文件。请注意，图标必须放在<b id="75fe500a">您的语言附近</b> （因为它不是作为图像存储，而是作为相对于语言根目录的路径存储）</p>   <p id="a6b6342a">      <b id="b4e552e2">快捷字符</b> -一种可使用键盘快速导航至选项卡的字符</p>   <p id="b49fb54e">      <b id="2fae758a">订单约束</b> - <i id="9fef0885">订单</i>概念的一个实例。<i id="0ca7afcb">订单</i>指定一个顺序，在该顺序中应相对于其他选项卡显示当前选项卡。您可以参考一个外部订单，也可以指定一个就地订单。</p>   <p id="b2eeeafd">      <b id="56ef7a2b">基础节点概念-</b>此<b id="0dff19b1">基础</b>节点以及所有相关选项卡的概念。</p>   <p id="6bea4635">      <b id="f7595152">基节点</b> -这是用于搜索给定一个已知节点的<b id="587e9863">基本</b>节点的规则。如果未找到<b id="751dd7a3">基本</b>节点或无法应用此<i id="7782f456">TabbedEditor</i> ，则应返回null。</p>   <p id="8d58daa1">      <b id="0d988bf8">适用</b> -指示选项卡是否可用于给定的<b id="7f6667b0">基本</b>节点</p>   <p id="0ac3b2f2">      <b id="edc940f8">命令</b> -指示是否应将节点创建作为命令执行，即是否应将其撤消并且不与用户使用其他UI交互。</p>   <p id="a36dcf04">      <b id="15e67973">getNode / getNodes-</b>应该在此选项卡中返回要编辑的节点或节点列表</p>   <p id="0225c1f7">      <b id="0b2e7493">getConcepts-</b>返回此选项卡可用于编辑的节点的概念</p>   <p id="e423f317">      <b id="6bb0a89c">创建-</b>如果指定，将在用户要求从此选项卡创建新节点时执行。给它一个请求的概念，并将<b id="2858cd1f">基本</b>节点作为参数。</p>      <h2 id="tools">工具类</h2>   <p id="8d2addb5">工具是一种具有图形表示形式的工具，旨在执行某些特定任务。例如，“用法”视图，“待办事项”查看器，“模型”和“模块”存储库查看器都是工具。MPS对工具具有丰富的UI支持-您可以通过将其从窗口的一个边缘拖放到另一边缘，隐藏，显示和执行许多其他操作来将其移动。</p>   <p id="aa5813b8">工具是按“每个项目”创建的。它们在类重载时初始化/处理（在生成语言之后，在“全部重载”操作等上）</p>   <h4 id="toolstructure">工具结构</h4>   <p id="075fa29e">      <b id="d89fcd8e">名称</b> -工具的名称。您可以指定任何名称，唯一明显的限制是名称在模型范围内必须唯一。</p>   <p id="bb6e7e8b">      <b id="22000467">标题-</b>此字符串将显示在工具标题和工具窗格中的工具按钮上</p>   <p id="6851ed8b">      <b id="3800494f">Number-</b>如果指定，则<i id="3b871e9f">alt + number</i>成为显示此工具的快捷方式（如果可用）</p>   <p id="2c3cd32c">      <b id="ecd88eef">图标-</b>要在工具按钮上显示的图标。您可以通过按“ ...”按钮来选择图标文件。请注意，图标必须放在您的语言附近（因为它不是作为图像存储，而是作为相对于语言根目录的路径存储）</p>   <p id="f7c38775">      <b id="afed98b5">位置</b> -位于<i id="5d70d112">顶部/底部/左侧/右侧，</i>以将工具添加到所需的MPS工具栏</p>   <p id="741a24f7">      <b id="ec3f768b">初始化-</b>在此处初始化工具实例</p>   <p id="fc6ef784">      <b id="d598b466">处置-</b>在此处处置所有工具资源</p>   <p id="6f0276ac">      <b id="3af32d30">getComponent-</b>应该返回一个Swing组件（扩展JComponent的类的实例）以显示在工具窗口内。如果您打算在工具中创建选项卡，并且熟悉IDEA中的工具框架，最好使用IDEA对选项卡的支持。使用此框架可以极大地改善选项卡的功能和UI。</p>   <p id="fb0ae078">      <b id="f966a98e">字段和方法-</b>常规字段和方法，您可以在工具和外部代码中使用它们。</p>   <h4 id="tooloperation">工具操作</h4>   <p id="f3941d4f">我们添加了操作（ <i id="64b5fff4">GetToolInProjectOperation</i>概念）以仅访问某些项目中的工具。用作<i id="dfbb2294">project.tool <toolname></toolname></i> ，其中<i id="4b4bd545">project</i>是一个IDEA项目。不要忘记导入<i id="b211311e">jetbrains.mps.lang.plugin.standalone</i>语言才能使用它。</p>   <aside class="note " rel="f3941d4f" id="fee41fa6" data-title="">      <p id="3605f680">当前无法在<i id="2ab08c47">dispose（）</i>方法中使用此操作</p>   </aside>      <h2 id="tabbedtools">选项卡式工具</h2>   <p id="37823717">与工具窗口相同，但可以包含多个选项卡</p>   <h4 id="toolstructure">工具结构</h4>   <p id="9dc4cacc">      <b id="0116be4d">名称</b> -工具的名称。您可以指定任何名称，唯一明显的限制是名称在模型范围内必须唯一。</p>   <p id="064fd77e">      <b id="d2cebb4e">标题-</b>此字符串将显示在工具标题和工具窗格中的工具按钮上</p>   <p id="55070b42">      <b id="8e4c9aec">Number-</b>如果指定，则<i id="15dbbc3e">alt + number</i>成为显示此工具的快捷方式（如果可用）</p>   <p id="953699ee">      <b id="74c9d64f">图标-</b>要在工具按钮上显示的图标。您可以通过按“ ...”按钮来选择图标文件。请注意，图标必须放在您的语言附近（因为它不是作为图像存储，而是作为相对于语言根目录的路径存储）</p>   <p id="2c5aa774">      <b id="c6f39d3d">位置</b> -位于<i id="fa939f88">顶部/底部/左侧/右侧，</i>以将工具添加到所需的MPS工具栏</p>   <p id="1f9f4e4b">      <b id="9a56f150">初始化-</b>在此处初始化工具实例</p>   <p id="2c2dc7a1">      <b id="8d28f8a3">处置-</b>在此处处置所有工具资源</p>   <p id="3e18898d">      <b id="35d7cda6">字段和方法-</b>常规字段和方法，您可以在工具和外部代码中使用它们。</p>   <h2 id="preferencescomponents">首选项组件</h2>   <p id="23cec57b">有时，您可能希望能够在MPS启动之间编辑和保存一些设置（例如，工具的设置）。为此，我们引入了<b id="8cd5d8dc">首选项组件</b> 。</p>   <p id="b3e9c2d2">每个首选项组件都包括多个首选项页面和多个持久字段。首选项页面是用于编辑用户首选项的对话框。可通过<b id="61007595">File-> Settings</b>访问它们。</p>   <p id="dbe8f444">当项目关闭时，永久字段将保存到<i id="8353febc">.iws</i>文件中，并在项目打开时从它们中恢复。保存过程使用反射，因此在大多数情况下，您无需关心序列化/反序列化。</p>   <aside class="tip sideblock" rel="dbe8f444" id="61221358" data-title="">      <p id="facc0a4a">只有原始类型和非抽象类可以用作持久字段的类型。如果要存储一些复杂的数据，请创建<i id="cb326331">org.jdom类型的持久字段<i id="cb326331">。元素</i> （不要忘记导入模型<i id="bf73fdfb">org.jdom</i> ），并使用<i id="aaafa229">com.intellij.util.xmlb.annotations对其进行<i id="aaafa229">注释。读取后/写入前手动标记</i>和序列化/反序列化数据</i></i></p><i id="cb326331"><i id="aaafa229">   </i></i></aside><i id="cb326331"><i id="aaafa229">   <h4 id="preferencescomponentstructure">首选项组件结构</h4>   <p id="0733bdcc">      <b id="ae51baef">名称-</b>组件名称。您可以指定任何名称，唯一明显的限制是名称在模型范围内必须唯一。</p>   <p id="614ef07e">      <b id="1693e07a">字段</b> -这些是持久字段。它们<b id="cdb43013">在读取</b>和创建页面之前进行了初始化，因此它们的值在每次可访问时都是正确的。它们也可以指定默认值。</p>   <p id="912b47de">      <b id="992b9588">读后</b> <b id="9240c7ed">/</b> <b id="53366b6d">写前-</b>这些块用于自定义序列化目的和应用/收集首选项，这些首选项没有相应的首选项页面（例如，工具尺寸）</p>   <p id="cb240db8">      <b id="2d746ad4">页面</b> -首选项页面</p>   <h4 id="preferencespagestructure">首选项页面结构</h4>   <p id="5f3364b6">      <b id="1eeed6cd">名称-</b>字符串被用作<i id="d7d02600">设置</i>页面的标题。名称在模型中必须唯一。</p>   <p id="ce2409da">      <b id="df2379f6">component-</b>用于编辑首选项的UI组件。</p>   <aside class="tip sideblock" rel="ce2409da" id="9fd2a92e" data-title="">      <p id="57ec19c2"><i id="66d7aa4a">uiLanguage</i>组件可以在这里使用</p>   </aside>   <p id="d45143ab">      <b id="3f943fc7">icon-</b>在<i id="74d43218">“设置”</i>窗口中显示的图标。图标的大小最大为32x32</p>   <p id="75605410">      <b id="29132df1">reset-</b>调用此方法时，重置UI组件中的首选项值。</p>   <p id="50fbf385">      <b id="d23add96">commit-</b>在此方法中，应从UI组件收集首选项，并将其<b id="d23add96">提交</b>到使用它们的任何位置。</p>   <p id="1e442dc6">      <b id="d0d72fa3">isModified-</b>如果此方法返回false，则不会执行<b id="7bdb1b10">提交</b> 。这对于具有长时间运行的commit方法的首选项页面通常很有用。</p>   <h4 id="preferencecomponentexpression">PreferenceComponent表达式</h4>   <p id="5a6db007">我们添加了一个表达式以仅访问某些项目中的<i id="a18e8801">PreferenceComponent</i> 。您可以将其作为<i id="5a1cbbf7">project.preferenceComponent</i>进行访问<i id="5a1cbbf7"><componentname></componentname></i> ，其中<i id="1332533c">project</i>是一个IDEA项目。不要忘记导入<i id="2cc35221">jetbrains.mps.lang.plugin.standalone</i>语言来使用它。</p>   <aside class="note " rel="5a6db007" id="64d7ca6b" data-title=""><p>当前无法在<i id="b628dbcc">dispose（）</i>方法中使用此操作</p></aside>      <h2 id="custompluginparts(projectplugin,applicationplugin)">自定义插件部分（ProjectPlugin，ApplicationPlugin）</h2>   <p id="661c2760">自定义插件部分是在插件初始化/处置时执行的自定义操作。它们的行为完全类似于插件。您可以根据需要为您的语言创建任意数量的自定义插件。自定义插件有两种类型-项目和应用程序自定义插件。项目自定义插件每个项目实例化一次，而应用程序自定义插件每个应用程序实例化一次，因此它没有项目参数。</p><div class="last-modified" data-skip-index="skip">上次修改时间：2019年8月30日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="module-dependencies-tool.html">模块依赖工具</a> <a class="navigation-links__next" href="progress-indicators.html">进度指示器</a></div></i></i></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>