<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>发电机用户指南Demo6-帮助| MPS</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Generator+User+Guide+Demo6.html"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索MPS帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>MPS 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default" data-group="primary" selected>默认</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_mac_os_x" data-group="primary">Eclipse（Mac OS X）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_jbuilder" data-group="primary">JBuilder的</option><option value="primary_mac_os_x" data-group="primary">Mac OS X</option><option value="primary_mac_os_x_10.5_" data-group="primary">Mac OS X 10.5以上</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_default" data-group="secondary">默认</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_mac_os_x" data-group="secondary">Eclipse（Mac OS X）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_jbuilder" data-group="secondary">JBuilder的</option><option value="secondary_mac_os_x" data-group="secondary">Mac OS X</option><option value="secondary_mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5以上</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="generator-user-guide-demo6.xml" data-toc="Generator+User+Guide+Demo6.html">发电机用户指南Demo6</h1>   <h2 id="generatoruserguidedemo6">发电机用户指南演示6</h2>   <p id="aa75d3ea">该演示可能是所有演示中最令人兴奋的演示，因为在这里，我们将创建一种“真实”语言，因为该语言实际上将定义几个高级概念。<br>我们还将看到该DSL与现有语言-“ jetbrains.mps.sampleXML”和“ generator_demo.demoLang5”（在<a href="generator-user-guide-demo5.html">演示5的</a>前面创建）的集成非常容易。</p>   <h2 id="thecoreidea">核心思想</h2>   <p id="2cf05bcf">我们将提供一种更方便的语法，以便在测试模型中输入XML <i id="c4322410">元素</i> 。开发人员将对<i id="87be4dc9">button</i>和<i id="be82f9ab">label</i>使用新的语法，这将更加紧凑和直观。同时，我们将能够重用在演示5中构建的<i id="38098fbd">demoLang5</i>语言中定义的生成器。新的<i id="a2feadd9">demoLang6</i>语言会将新概念转换为XML <i id="01cfe847">元素</i> ，然后可以被<i id="251f8d23">demoLang5</i>生成器接受。</p>   <p id="40b523da">      </p><figure><img alt="gdf5" title="gdf5" src="/help/img/idea/2019.2/gdf5.png" id="0d590ddc" width="341" height="135"></figure>   <p></p>   <h2 id="newlanguage">新语言</h2>   <ul class="list _ul"><li class="list__item" id="b7252e87"><p>创建新语言“ generator_demo.demoLang6”</p></li><li class="list__item" id="5f534835"><p>在语言属性对话框中添加<b id="06e0a43e">扩展语言</b> ：'jetbrains.mps.sampleXML'和'jetbrains.mps.baseLanguage'</p></li><li class="list__item" id="dd64644a"><p>如果该语言不存在，请为其创建一个新的生成器（有关详细信息，请参见<a href="generator-user-guide-demo1.html">演示1</a> ）</p></li><li class="list__item" id="4af7c437"><p>在demoLang6 <b id="622d55e0">结构模型中，</b>创建名为“按钮”的新概念，以扩展概念“ ElementPart”（来自“ jetbrains.mps.sampleXML”）</p></li><li class="list__item" id="c5e3e5da"><p>在“按钮”概念中，声明一个名为“文本”的<b id="e33d3bad">属性</b>并设置一个<b id="f36f2da2">别名</b> （我们需要一个别名以使自动完成菜单看起来不错）：</p></li></ul>   <p id="5347a7e2">      </p><figure><img alt="错误1" title="错误1" src="/help/img/idea/2019.2/error1.png" id="5179e59c" width="767" height="312"></figure>   <p></p>   <ul class="list _ul"><li class="list__item" id="3b8ad757"><p>为“按钮”概念创建编辑器：</p></li></ul>   <p id="5343aed9">      </p><figure><img alt="gdf2" title="gdf2" src="/help/img/idea/2019.2/gdf2.png" id="2c32bf19" width="698" height="315"></figure>      <br>该编辑器由三个单元格组成：两个常数单元格（以粗体显示）和一个属性单元格（以{ <code class="code">text</code> }），它将呈现“文本”属性的实际值。<p></p>   <ul class="list _ul"><li class="list__item" id="3c3a2b6b"><p>创建一个名为“标签”的相似概念</p></li><li class="list__item" id="a9e44ee1"><p>重新生成语言（ <i id="eb79da82">Ctrl-F9</i> ）</p></li></ul>   <h2 id="newtestmodel">新的测试模型</h2>   <p id="a1a69c06">现在让我们尝试新的DSL：</p>   <ul class="list _ul"><li class="list__item" id="010e7afe"><p>转到“ test_models”解决方案</p></li><li class="list__item" id="ecfac552"><p>将“ test5”模型克隆到“ test6”中（这一次请勿替换<b id="8d4ab362">使用生成语言</b> <br>generator_demo.demoLang5-> generator_demo.demoLang6，因为我们仍然需要<i id="be9f1314">demoLang5</i>生成器与<i id="3d5f634d">test6</i>一起运行）</p></li><li class="list__item" id="20474505"><p>将“ generator_demo.demoLang6”语言添加到“ <b id="20b5b77b">使用的语言”</b>部分（新！），以便我们可以使用<i id="b313a784">demoLang6</i>语言编辑模型。</p></li></ul>   <p id="36685885">      </p><figure><img alt="gdf3" title="gdf3" src="/help/img/idea/2019.2/gdf3.png" id="b1077d1d" width="531" height="263"></figure>   <p></p>   <ul class="list _ul"><li class="list__item" id="1a67bc29"><p>在“ test6”模型中，打开“面板”文档，并用我们的新<i id="b36c9ef1">按钮</i>和<i id="b17d458b">标签</i>概念替换两个“标签”元素：</p></li></ul>   <p id="dce0c033">      </p><figure><img alt="gdf6" title="gdf6" src="/help/img/idea/2019.2/gdf6.png" id="5c35f010" width="637" height="296"></figure>   <p></p>   <p id="8a988560">有了新的DSL，我们的“代码”变得更清晰，更短，更不容易出错。例如，用户现在不再可以在标签或按钮内添加元素。</p>   <h2 id="generator">发电机</h2>   <p id="25789181">我们可以在<i id="1b7a3296">按钮</i>和<i id="ff7219e1">标签之外</i>生成方法和方法调用，以模仿XML <i id="efbdd930">Elements</i>之前所做的事情。但是，这是不是一个好主意，因为这样一来，我们将介绍<i id="5ad66ea7">demoLang6</i>发电机和发电机<i id="be5367c6">demoLang5（</i>该<i id="c3169075">demoLang6</i>发电机必须了解<i id="5a55a605">demoLang5</i>发生器的实施细则）之间的间接依赖。</p>   <p id="213ca151">幸运的是，我们有一个更好的选择。由于我们现在处于较高的抽象级别（与XML相比），因此我们可以简单地将语义丰富的概念简化为较低级别的概念（XML Elements）。我们不再关心谁以及如何将那些较低级（XML）概念进一步转换为较低级概念。</p>   <h2 id="reductionrules">减少规则</h2>   <p id="dbd1ec39">我们将采用简化规则将新概念转换为XML <i id="6c435f42">Elements</i> 。来自<i id="7eb3d509">sampleXML</i>语言。</p>   <ul class="list _ul"><li class="list__item" id="91b3bd84"><p>在demoLang6生成器中打开（空） <b id="0170852f">映射配置</b> “ main”</p></li><li class="list__item" id="4c922f94"><p>添加适用于<i id="7dd65fb6">Button</i>概念的新<b id="ccd35f06">减少规则</b></p></li><li class="list__item" id="0565da30"><p>选择一个<b id="c138327d">嵌入式模板</b>作为规则结果（ <i id="28e2603b">Control + Space</i> ）：</p></li></ul>   <p id="0ebcb7ed">      </p><figure><img alt="gdf7" title="gdf7" src="/help/img/idea/2019.2/gdf7.png" id="accf33f4" width="927" height="222"></figure>   <p></p>   <p id="179c1f8f">该模板将非常简单明了，并且不需要任何周围的“上下文”。这就是为什么没有必要像我们在其他演示中那样创建成熟的外部模板。</p>   <p id="5fc5ce6c">由于我们要在生成器模板中使用'jetbrains.mps.sampleXML'语言中的XML <i id="62f86196">元素</i> ，因此我们首先必须通过<i id="58ccbf54">main @ generator</i>模型在“ <i id="15876970">二手语言”中</i>声明该语言：</p>   <p id="84152b72">      </p><figure><img alt="gendemo61" title="gendemo61" src="/help/img/idea/2019.2/gendemo61.png" id="e3c9d000" width="1068" height="684"></figure>   <p></p>   <ul class="list _ul"><li class="list__item" id="8df10c2a"><p>回到<i id="8091f3ee">主</i>映射配置中，选择“ <i id="cda5b900">元素”</i>作为模板的内容节点：</p></li></ul>   <p id="40cdad31">      </p><figure><img alt="gdf9" title="gdf9" src="/help/img/idea/2019.2/gdf9.png" id="2ebf9247" width="688" height="207"></figure>   <p></p>   <ul class="list _ul"><li class="list__item" id="845f2f5e"><p>使用“文本”属性创建“按钮” XML元素</p></li><li class="list__item" id="29f6a080"><p>将属性宏附加到属性值</p></li><li class="list__item" id="a9971f45"><p>在宏的<b id="c0957a0f">value</b>函数中输入代码，以使<i id="86156de9">text</i>属性的值传播到XML按钮中：</p></li></ul>   <p id="fe89f9b4">      </p><figure><img alt="gdf10" title="gdf10" src="/help/img/idea/2019.2/gdf10.png" id="38b95241" width="707" height="274"></figure>   <p></p>   <p id="bed31876">而已。我们的高级按钮被简化为具有“文本”属性的“按钮” XML元素。XML元素可能会被其他人进一步转换为Java。</p>   <ul class="list _ul"><li class="list__item" id="c9610b06"><p>添加适用于<i id="3aa8d9fc">标签</i>概念的类似减少规则</p></li></ul>   <h2 id="firsttest(failure)">第一次测试（失败）</h2>   <p id="f161dccb">重新构建生成器并生成“ test6”模型。</p>   <p id="02604d2f">MPS消息视图中将出现一堆错误和警告消息。<br>单击“是输入节点”错误消息。MPS将向您显示生成器试图将失败规则应用到的节点：</p>   <p id="79c84019">      </p><figure><img alt="demo6错误消息" title="demo6错误消息" src="/help/img/idea/2019.2/demo6-errorMessages.png" id="14148989" width="974" height="496"></figure>   <p></p>   <p id="645a110b">这是demoLang5生成器中的简化规则（我们正在使用两个生成器来生成“ test6”模型：demoLang5和demoLang6，还记得吗？）并且它无法通过映射标签<i id="6de83847">方法</i>找到静态方法声明。</p>   <p id="4e728b1a">该<i id="29ab903c">方法</i>标签被分配了<i id="6a862ebf">insert_Button</i>和<i id="9e9c179f">insert_Label</i>模板中生成的静态方法，因此您可能想知道哪里出了问题。为什么我们找不到在<i id="c125b2d7">DempApp</i>类内部创建并存储在映射标签中的方法？</p>   <p id="000219fe">为了回答这个问题，让我们仔细研究整个生成过程。</p>   <hr id="d7d96fb1">   <p id="c9f334cd">第一步，生成器创建一个<b id="1854d579">过渡模型</b> ，该<b id="1854d579">模型</b>将用作当前发电阶段的<b id="a2180d46">输出模型</b> 。该型号名称为“ test6 @ 0”。</p>   <aside class="tip sideblock" rel="c9f334cd" id="3c6198b2" data-title="">      <p id="95466f12">如果您通过MPS框架右下角的按钮启用了“保存瞬态模型”，则实际上您可以自己检查瞬态模型。过渡模型将显示在“ <i id="66e3c0e8">项目视图”</i>面板中。</p>   </aside>   <p id="4cd3d6a2">然后，生成器将应用我们的<b id="d9eb6a2e">条件根规则，</b>并在输出模型中创建“ DemoApp”类。</p>   <p id="ccfe6221">然后，在某个时候，将调用<i id="e0ce7283">insert_Panel</i>模板并执行其<i id="93bc5473">LOOP</i> -macro（我们可以从<i id="b33eaf35">insert_Panel</i>模板中看到包含我们熟悉的面板初始化代码的panel工厂方法）。LOOP宏为“ panel”元素的每个子元素创建一个语句“ component.add（）”，并减少该子元素以生成对“ component.add（）”方法调用的实际参数。</p>   <p id="1ea959dc">我们的“面板”元素包含三个子元素-一个按钮，一个标签和一个文本，这些元素已被预处理生成脚本转换为标签。button和first标签都是<i id="6ff6f8fa">demoLang6</i>引入的高级抽象，它们的简化产生相应的XML <i id="16041d11">Elements</i> 。（我们可以在第一个屏幕截图中清楚地看到它，其中代表按钮的XML元素作为实际参数传递给对component.add（）方法的调用。在早期的跟踪输出中，生成器将其报告为警告（黄色）。</p>   <p id="a24f80de">这样就结束了“ test6 @ 1_1”的生成，并且生成器现在创建了一个名为“ test6 @ 1_2”的新瞬态模型。该模型成为新的<b id="bf372c28">输出模型</b> ，而先前的<b id="354de65f">输出模型</b>成为新的<b id="5ea18987">输入模型</b> 。</p>   <p id="ce8e2f25">生成器开始生成一个新模型“ test6 @ 2_2”，假装之前没有任何内容。生成器没有关于以前活动的记忆，只有一个例外- <b id="4bdb991e">条件根规则</b>永远不会应用两次。因此，这次，通过从输入模型复制'DemoApp'类而不是通过应用<b id="62049bb8">条件根规则</b>来创建输出'DemoApp'类。</p>   <p id="c778e861">在此阶段，生成器尝试进一步减少表示按钮和标签的XML <i id="335ac45c">元素</i> 。唯一的规则可以是从<i id="bf789c56">demoLang5</i>的<i id="8ffa90ba">reduce_Element</i>减少规则。它将尝试用对静态工厂方法声明的引用替换XML <i id="88bd608f">Elements</i> ，但是，由于尚未创建任何XML <i id="88bd608f">元素</i> ，因此在<i id="6388a6a7">方法</i>映射标签中找不到任何内容。方法定义的创建并非仅仅因为在运行<i id="314519b4">DempApp</i>内的<i id="c71bdb3d">LOOP</i>宏时XML <i id="64044da2">元素</i>仍表示为<i id="7640b1e2">Button</i>和<i id="060360e1">Label</i> <i id="d0c05706">demoLang6</i>概念。</p>   <p id="a740ca81">因此，这是<i id="de50a7fa">demoLang5</i>和<i id="31c1a9d8">demoLang6</i>生成器之间的时序问题。后者应首先运行。</p>   <hr id="831f9db1">   <p id="346c736d">现在我们了解了发生了什么，接下来的问题是如何解决它。</p>   <p id="c0ee44c2">我们依赖<i id="c45b72b8">demoLang5</i>生成器，并且我们知道<i id="42c3cff3">demoLang5</i>生成器可以很好地工作，只要输入模型是“有效的XML”（我们已经在Demo 5中对其进行了测试）。<br>在演示6中，我们的输入模型并不完全是“有效XML”。此外，我们目睹了临时模型'test6 @ 1_1'根本不是有效模型-方法调用不能接受XML元素作为参数（您甚至可以找到警告消息<i id="baf4259b">“期望角色'child'Expression' “ actualArgument”，但</i>在MPS消息视图中<i id="baf4259b">为“ Element””</i> 。</p>   <p id="e66c46be">现在我们可能可以返回<i id="a63b125f">demoLang5</i>生成器，并进行一些“改进”以使其处理“无效”的输入模型。<br>幸运的是，有一个更好的选择-我们可以将生成过程分为两步，以便首先将原始输入模型转换为“有效XML”模型，然后由<i id="cca8bca1">demoLang5</i>生成器将此“有效XML”模型转换为Java。在第二步。</p>      <h2 id="dividinggenerationprocessintosteps">将生成过程分为步骤</h2>   <p id="d4e2e0e6">如果将<i id="cde4249f">按钮</i>和<i id="d4e47851">标签</i> （在“ Panel”文档中）简化为XML <i id="9705f84e">Elements，</i>我们肯定会从“ test6”输入模型中获得“有效XML”模型。这种转换必须在<i id="b2b57231">demoLang5</i>开始将XML <i id="edec7863">Elements</i>转换为Java之前进行。换句话说，必须在<i id="cbaed1a7">demoLang5</i>生成器中的任何规则之前应用<i id="5e27e13b">demoLang6</i>生成器中指定的缩减规则。</p>   <p id="d5563045">让我们指定这个约束：</p>   <ul class="list _ul"><li class="list__item" id="d2b8697f"><p>转到generator_demo.demoLang6中的<i id="64ad3db6">生成器，</i>然后打开生成器属性对话框</p></li><li class="list__item" id="7cf6aebe"><p>在<i id="5ffff7ec">demoLang5</i>生成器上添加<b id="f587be18">扩展</b>依赖<i id="5ffff7ec">项</i><br>         </p><figure><img alt="gdf14" title="gdf14" src="/help/img/idea/2019.2/gdf14.png" id="2458ecbe" width="615" height="407"></figure>      <p></p></li></ul>   <ul class="list _ul"><li class="list__item" id="c9fd0dbd"><p>在“ <b id="e18b92e9">发生器优先级”</b>选项卡中，添加所需的优先级规则</p></li></ul>   <p id="8df89e1d">      </p><figure><img alt="Demo6 GeneratorPriorities2" title="Demo6 GeneratorPriorities2" src="/help/img/idea/2019.2/Demo6_GeneratorPriorities2.png" id="cb4eaf03" width="872" height="486"></figure>   <p></p>   <p id="0f543a99">这将确保<i id="b4596b1a">demoLang5</i>发电机前<i id="06dec6ed">demoLang6</i>发电机运行。</p>   <h2 id="secondtest">第二次测试</h2>   <p id="7a23f7ce">重新构建语言并预览“ test6”模型的生成文本。现在，在生成过程中您应该不会遇到任何问题，并且生成的代码将正确包含新的按钮和标签。</p>   <p id="9585208e">      </p><figure><img alt="gdf16" title="gdf16" src="/help/img/idea/2019.2/gdf16.png" id="10984c76" width="346" height="407"></figure>   <p></p>      <h2 id="savingtransientmodels">保存瞬态模型</h2>   <p id="363be46b">我们的<i id="9ce4b4ba">demoLang5</i>和<i id="6a774a94">demoLang6</i>生成器运行良好，因为我们将生成过程分为两个不同的步骤。<br>第一步， <i id="66930e27">demoLang6</i>生成器将我们的高级概念（按钮和标签） <i id="66930e27">简化</i>为相应的XML元素，并生成一个“有效XML”模型作为输出。<br>第二步， <i id="ede452d4">demoLang5</i>生成器从“有效XML”模型生成Java。</p>   <p id="c3077956">因此，在步骤1和步骤2之间应该至少有一个瞬态模型。<br>让我们看一下在生成过程中实际上创建了哪些模型：</p>   <ul class="list _ul"><li class="list__item" id="296dfc52"><p>在“ <i id="ba86d8c9">项目设置”中，</i>启用“ <b id="506b7c5e">保存生成时的瞬态模型”</b>选项：</p></li></ul>   <p id="3ece03fd">      </p><figure><img alt="屏幕截图2017年7月24日晚上11 08 30" title="屏幕截图2017年7月24日晚上11 08 30" src="/help/img/idea/2019.2/Screen-Shot-2017-07-24-at-11-08-30-PM.png" id="8d8b4250" width="633" height="212"></figure>   <p></p>   <ul class="list _ul"><li class="list__item" id="0ff785eb"><p>生成“ test6”模型</p></li><li class="list__item" id="06dcaac8"><p>在项目树中找到并展开名为“瞬态模型”的节点（此节点在底部）<br>（令人惊讶地）有五个瞬态模型。<br>我们可以浏览瞬态模型，我们会发现它们之间有时有些细微的差异，有时甚至是戏剧性的差异。这将为我们提供有关每个步骤进行了何种转换的线索。</p></li></ul>   <p id="2e3f4bfc">例如，打开模型“ test @ 1_0”中的“面板”节点（此模型是在第一步中生成的）。</p>   <p id="3ecccb63">      </p><figure><img alt="gdf18" title="gdf18" src="/help/img/idea/2019.2/gdf18.png" id="02f61563" width="748" height="313"></figure>   <p></p>   <p id="e0b267d2">我们可以看到，高级<i id="546707ae">按钮</i>和<i id="39f25717">标签</i>概念已被其对应的XML代替，但文本为“大家好！还在。</p>   <p id="9e87f631">在下一个模型“ test6 @ 2_0”中，文字“大家好！已被'label'元素替换（由于在<i id="40725b5f">demoLang5</i>生成器中运行了预处理脚本'fix_text'的<i id="40725b5f">结果</i> ）。</p>   <p id="aa379e43">模型“ test6 @ 2_1”包含生成的<i id="7b3cd9c0">DemoApp</i>类。</p>   <p id="9f290023">模型“ test6 @ 2_3”包含相同的类，但字符串“ MPS！”替换为“ JetBrains MPS！”（由于<i id="43a8fed5">demoLang5</i>生成器中的后处理脚本'refine_text'）。</p>   <h2 id="rootnodescopyingandreductionrules">根节点复制和减少规则</h2>   <p id="007ad0a5">我们可以看到，模型“ test6 @ 1_0”与原始输入模型“ test6”相同，除了高级按钮和标签概念已简化为XML元素。<br>这就是我们想要的，但可能尚不清楚，如何在“ test6 @ 1_0”中创建根（我们没有任何可以创建<i id="3c3f32a0">Document的</i> “根规则”）以及为何应用了简化规则。<br>根据我们以前对还原规则的经验，我们记得必须创建<i id="bf6b9eb8">COPY_SRC _macro才能进行还原。但是在_demoLang6</i>生成器中，我们没有任何_COPY_SRC _macros，对吗？</p>   <aside class="tip sideblock" rel="007ad0a5" id="4236cbfe" data-title="">      <p id="142a2ee9">只要生成器遇到输入根节点（适用于任何<b id="024c6a76">根映射规则</b>或<b id="d57947ca">放弃根规则</b> ），生成器都会在输出模型中创建该根的深层副本。<br>在复制节点时，生成器始终尝试查找适用于当前复制节点的<b id="89135353">归约规则</b> 。<br>如果找到合适的归约规则，则将其应用于节点。否则，生成器将创建一个输出节点（实例化相同的概念），复制输入节点的所有属性和引用（重新解析本地引用），并为所有子节点递归重复相同的复制过程。</p>   </aside>   <p id="2665b94a">这种方式，来自“TEST6”已被复制到模型“TEST6 @ 1_0”和减少输入<i id="b8d1c43b">文件</i> （按钮，标签和面板）已应用于是那样的“面板” <i id="bc7e2e00">文献</i>内的<i id="53c3455e">按钮</i>和<i id="02767a7f">标签</i>的概念。</p>   <p id="aadb77cc">返回_COPY_SRC _macro-它不会“调用”还原（可能看起来）。相反，它仅将相同的复制过程应用于<b id="462ef385">映射的节点，</b>并且如果碰巧有任何简化规则，则将发生转换。</p>      <h2 id="usinggenerationtracertool">使用Generation Tracer工具</h2>   <p id="80df344c">我们已经知道<a href="#savingtransientmodels">如何</a>保存和浏览瞬态模型。实际上，通过激活“ <b id="1f1fb435">在生成时保存瞬态模型</b> ”选项，MPS不仅可以保存瞬态模型，而且还可以收集有关转换过程的大量数据。<br>可以使用<b id="1b7011e4">Generation Tracer Tool</b>查看此数据。</p>   <p id="c54ca5a4">例如，在瞬态模型“ test6 @ 1_0”中打开“面板” <i id="d2a0e950">文档</i> ，选择“标签”，然后在弹出菜单中选择“ <i id="69904508">显示生成回溯</i> ”。</p>   <p id="98ee426f">      </p><figure><img alt="gdf19" title="gdf19" src="/help/img/idea/2019.2/gdf19.png" id="9b001a00" width="1019" height="657"></figure>   <p></p>   <p id="37a58565">将打开Generation Tracer View。</p>   <p id="c7af99fa">      </p><figure><img alt="gdf22" title="gdf22" src="/help/img/idea/2019.2/gdf22.png" id="78264460" width="917" height="540"></figure>   <p></p>   <p id="cfffb05f">在此树的根目录中有一个“标签”节点，我们已为其请求了追溯信息（蓝色箭头表示一个<b id="6d0f0bd8">输出节点</b> ），树的其余部分以相反的顺序显示了导致此输出。</p>   <p id="72366700">查看该树并单击其节点（以便在编辑器中将其打开），我们可以将转换过程复制到非常详细的级别。</p>   <p id="0891883d">例如，我们可以看到输出“标签”是由模板在<i id="9f07778d">reduce Label</i>规则中创建的。</p>   <p id="b6ecf87a">      </p><figure><img alt="gdf20" title="gdf20" src="/help/img/idea/2019.2/gdf20.png" id="9bd5391c" width="968" height="532"></figure>   <p></p>   <p id="ef19d3b2">...，并且在复制“面板” <i id="5accdb72">文档</i> （根输入节点）时，将<i id="8e7315c1">缩减标签</i>规则应用于<b id="19222b96">输入节点</b> “标签”。</p>   <p id="c354db47">      </p><figure><img alt="gdf21" title="gdf21" src="/help/img/idea/2019.2/gdf21.png" id="1de3aa65" width="965" height="493"></figure>   <p></p><div class="last-modified" data-skip-index="skip">上次修改时间：2019年8月30日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="generator-user-guide-demo5.html">发电机用户指南Demo5</a> <a class="navigation-links__next" href="generator-user-guide-demo7.html">发电机用户指南Demo7</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>