<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><meta content="&#xA;        dotCover how to, dotCover tutorials, .NET ASP web application coverage, console tools cover web app,&#xA;        unit integration tests web application coverage, IIS and IIS Express coverage&#xA;    " name="description" data-skip-index="skip"><title>Analyze Coverage of Web Applications Using Console Runner - Help | dotCover</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Remotely_Cover_a_Web_Application" data-disqus-id="Remotely_Cover_a_Web_Application_dcv"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search dotCover Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>dotCover 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="secondary" value="rs">ReSharper 2.x/IntelliJ IDEA</option><option data-group="primary" value="vs">Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Remotely_Cover_a_Web_Application" id="Remotely_Cover_a_Web_Application.xml">Analyze Coverage of Web Applications Using Console Runner</h1>            <p id="5501906d">        If you want to automate coverage of a web application (e.g. for the        purpose of continuous integration), you must use the        <a href="Running_Coverage_Analysis_from_the_Command_LIne.html#setting-up-console-runner">dotCover            console runner</a>.    </p>    <p id="6357566b">        Unlike <a href="Profiling_Guidelines__IIS.html">manual coverage</a>,        where you get coverage snapshots by simply clicking the        <span class="control">Get Snapshot</span>        button, the console runner gets a snapshot only once the profiled process correctly finishes its work.        Thus, to get a snapshot, you should either correctly stop IIS in the system or run a second instance of the console runner        and explicitly send the "get snapshot and kill process" command to        the first running instance. How does the second instance know about the first one? It's quite simple: when        running the first instance, you specify its ID using the <code class="code">/Instance=&lt;ID&gt;</code> argument.        Then you can use this ID to send commands to the instance.    </p>    <p id="1c86fbe1">        The coverage process is performed somewhat differently depending on an exact coverage scenario and        whether IIS or IIS Express is used to host the application.        There are three main scenarios:        <ol class="list _decimal"><li class="list__item" id="81c758b6"><p>Get coverage of a web application (<a href="#to-get-coverage-of-a-web-application">IIS Express</a> /                <a href="#to-get-coverage-of-a-web-application-iis">IIS</a>).</p></li><li class="list__item" id="f82fabdb"><p>                <a href="#to-get-coverage-of-tests-when-the-application-and-tests-are-run-separately">Get coverage of                    tests and (optionally) web application. The application and tests are started                    separately</a>.            </p></li><li class="list__item" id="263c5bc5"><p>                <a href="#to-get-coverage-of-tests-when-the-application-is-started-from-tests">Get coverage of                    tests. The application is started by tests</a>.            </p></li></ol>    </p>        <section class="procedure-steps"><h3 id="to-get-coverage-of-a-web-application">To get coverage of a web application (IIS Express)</h3><ol class="list _decimal"><li class="list__item" id="dfbbe17d"><p>                Using the dotCover console runner, start IIS Express and your application under coverage. For example:                <div class="code-block" data-lang="none"><code class="code-block__wrapper">
dotCover.exe cover /TargetExecutable="C:\Program Files (x86)\IIS Express\iisexpress.exe"
/TargetArguments=/site:MyWebApp /systray:false
/Output=coverageReport.xml
/ReportType=XML
/Instance=1
                </code></div>                Here <code class="code">Instance</code> is the ID of the current dotCover.exe instance. You will use                this ID to send commands to this console runner. <br>                The <code class="code">/systray:false</code> argument makes sense in case you launch more                than one IIS Express instance in parallel.            </p></li><li class="list__item" id="82abca67"><p>                In the covered application, go through the desired scenario or execute tests that do this.            </p></li><li class="list__item" id="b0945015"><p>                Run the second console runner instance that sends the "get snapshot and kill process" command to the                first running instance:                <div class="code-block" data-lang="none"><code class="code-block__wrapper">
dotCover.exe send /Command=GetSnapshotAndKillChildren
/Instance=1
                </code></div>                Here <code class="code">Instance</code> is the ID of the first dotCover.exe instance you have                specified in step 1.            </p></li><li class="list__item" id="bf972b84"><p>                After you send the command, IIS Express and dotCover.exe instances will be stopped and the                coverage snapshot will be saved.            </p></li></ol></section>        <section class="procedure-steps"><h3 id="to-get-coverage-of-a-web-application-iis">To get coverage of a web application (IIS)</h3><ol class="list _decimal"><li class="list__item" id="4c1b4935"><p>                Make sure you have administrative privileges on the server.            </p></li><li class="list__item" id="8f559bef"><p>                Using the dotCover console runner, start coverage of the IIS service. For example:                <div class="code-block" data-lang="none"><code class="code-block__wrapper">
dotCover.exe cover-iis
/Output=coverageReport.xml
/ReportType=XML
/Instance=1
                </code></div>                Here <code class="code">Instance</code> is the ID of the current dotCover.exe instance. You will use                this ID to send commands to this console runner.            </p></li><li class="list__item" id="4d5d5cfa"><p>                In the covered application, go through the desired scenario or execute tests that do this.            </p></li><li class="list__item" id="a6f91620"><p>                Run the second console runner instance that sends the "get snapshot and kill process" command to the                first running instance:                <div class="code-block" data-lang="none"><code class="code-block__wrapper">
dotCover.exe send /Command=GetSnapshotAndKillChildren
/Instance=1
                </code></div>                Here <code class="code">Instance</code> is the ID of the first dotCover.exe instance you have                specified in step 2.            </p></li><li class="list__item" id="96df9cf6"><p>                After you send the command, the IIS service and dotCover.exe instances will be stopped and the                coverage snapshot will be saved.            </p></li></ol></section>        <section class="procedure-steps"><h3 id="to-get-coverage-of-tests-when-the-application-and-tests-are-run-separately">To get coverage of tests if the application and tests are run separately</h3><ol class="list _decimal"><li class="list__item" id="dba71362"><p>                Make sure you have administrative privileges on the server.            </p></li><li class="list__item" id="dc0cf059"><p>                Make sure the application is <span class="emphasis">not</span> already running in an instance of IIS Express                or IIS application pool.            </p></li><li class="list__item" id="2e1018df"><p>                Run the application (skip this step if you want to get coverage of the application as well).            </p></li><li class="list__item" id="945a2d0c"><p>                Using the dotCover console runner, start coverage of subsequent .NET processes. For example:                <div class="code-block" data-lang="none"><code class="code-block__wrapper">
dotCover.exe cover-everything
/Output=coverageReport.xml
/ReportType=XML
/Instance=1
                </code></div>                Here <code class="code">Instance</code> is the ID of the current dotCover.exe instance. You will use                this ID to send commands to this console runner. <br>                Note that in the <code class="code">cover-everything</code>                mode, the console runner will get coverage data on <span class="emphasis">all</span> managed processes                that are run after it.            </p></li><li class="list__item" id="5fc8b5c5"><p>                [Only if you skipped step 3] Run the application.            </p></li><li class="list__item" id="81a01ee3"><p>                Run tests.            </p></li><li class="list__item" id="a6ae07d7"><p>                Run the second console runner instance that sends the "get snapshot and kill process" command to the                first running instance:                <div class="code-block" data-lang="none"><code class="code-block__wrapper">
dotCover.exe send /Command=GetSnapshotAndKillChildren
/Instance=1
                </code></div>                Here <code class="code">Instance</code> is the ID of the first dotCover.exe instance you have                specified in step 4.            </p></li><li class="list__item" id="0edb9a78"><p>                After you send the command, IIS Express and dotCover.exe instances will be stopped and the                coverage snapshot will be saved. Note that if the application was run in step 5 instead of step 3,                the console                runner will get two snapshots (one for the application and one for the tests) and merge them into                a single one.            </p></li></ol></section>        <section class="procedure-steps"><h3 id="to-get-coverage-of-tests-when-the-application-is-started-from-tests">To get coverage of tests if the application is run by tests</h3><ol class="list _decimal"><li class="list__item" id="6c2a6fe6"><p>                Using the dotCover console runner, start the tests under coverage. For example, if you                use NUnit:                <div class="code-block" data-lang="none"><code class="code-block__wrapper">
dotcover.exe cover /TargetExecutable="C:\Program Files\NUnit 2.6\bin\nunit-console.exe"
/TargetArguments=C:\MyWebApp\bin\Debug\AppTests.dll
/Output=coverageReport.xml
/ReportType=XML
/Instance=1
                </code></div>                Here <code class="code">Instance</code> is the ID of the current dotCover.exe instance. You will use                this ID to send commands to this console runner.            </p></li><li class="list__item" id="41e9d003"><p>                Test assembly setup must start the application in IIS Express / IIS app pool.            </p></li><li class="list__item" id="8b78cdfe"><p>                Test assembly teardown must run the command:                <div class="code-block" data-lang="none"><code class="code-block__wrapper">
dotCover.exe send /Command=GetSnapshotAndKillChildren
/Instance=1
                </code></div>                Here <code class="code">Instance</code> is the ID of the first dotCover.exe instance you have                specified in step 1.            </p></li><li class="list__item" id="bd24d040"><p>                After the command is sent, IIS Express / IIS app pool, dotCover.exe instances, and the process that executes                the tests will be stopped and the coverage snapshot will be saved.            </p></li></ol></section><div class="last-modified" data-skip-index="skip">Last modified: 30 September 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Coverage_Results_Filters.html">Coverage Results Filters</a><a class="navigation-links__next" href="dotCover__Server_Test_Coverage.html">Analyze Coverage on a Server</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>