<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><meta name="description" content="
        dotTrace tutorial, .NET C# performance profiling tutorial, .NET performance management tutorial,
        .NET performance profiler
    " data-skip-index="skip"><title>性能分析入门-帮助|帮助dotTrace</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Get_Started_with_Performance_Viewer" data-disqus-id="Get_Started_with_Performance_Viewer_dt"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索dotTrace帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>dotTrace 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="rs" data-group="secondary">ReSharper 2.x / IntelliJ IDEA</option><option value="vs" data-group="primary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Get_Started_with_Performance_Viewer.xml" data-toc="Get_Started_with_Performance_Viewer">性能分析入门</h1>        <p id="14814972">dotTrace提供了两种对应用程序进行性能分析的方法： <a href="Performance_Profiling.html">性能</a>和<a href="Concurrency_Profiling_Timeline_.html">时间轴</a> 。在某种程度上，两种方法都是可以互换的。但是，在某些类型的任务中，一种或另一种分析方法更合适。例如，本节中描述的性能分析方法更适合于更直接的“什么是最慢的方法”任务，或者需要深入研究产品的逐行性能的任务。特定的方法或算法。<br>时间线分析方法依次不仅收集堆栈跟踪数据，而且收集有关呼叫分配的及时数据。在事件顺序很重要的问题上，此方法表现出最好的效果：UI冻结，SQL请求缓慢，垃圾回收过多等。有关如何使用时间轴分析的详细信息，请参阅<a href="Get_Started_with_Timeline_Viewer.html">下一个教程</a> 。</p>    <p id="8899a728">现在，让我们看一下最简单的性能分析工作流程。例如，我们有一些应用程序存在或不存在性能问题。因此，我们要做的只是评估其性能，即找出哪种方法花费最多的时间。</p>    <aside class="note " rel="8899a728" id="8929c069" data-title="">        <p id="e93c3f38">在本教程中，我们将使用“ <a href="Get_Started_with_Timeline_Viewer.html#sample_app">时间轴分析入门”</a>教程中使用的相同应用程序。</p>    </aside>    <div class="chapter"><h2 id="5f56f290" data-toc="Get_Started_with_Performance_Viewer#5f56f290">步骤1。运行dotTrace</h2>        <p id="313de808">有两种方法可以开始对应用程序进行性能分析：您可以将dotTrace作为独立工具启动，也可以从Visual Studio启动。</p>        <div class="chapter"><h3 id="72b13288">运行独立的dotTrace</h3>            <p id="94d047a2">对于原始项目或源代码不可用的应用程序，或者要在未安装或启动Visual Studio的情况下运行dotTrace的应用程序，此模式是理想的。要运行独立的dotTrace：</p>            <ol class="list _decimal"><li class="list__item" id="795bdcf0"><p>从Windows“开始”菜单中启动dotTrace。</p><figure><img alt="运行dotTrace 1" title="运行dotTrace 1" src="/help/img/dotnet/2019.2/Running_dotTrace_1.png" id="0c7dd51b" width="175" height="47"></figure>这将运行dotTrace主页窗口。<p></p></li></ol>        </div>        <div class="chapter"><h3 id="15e3d209">从Visual Studio运行dotTrace</h3>            <ol class="list _decimal"><li class="list__item" id="381d9332"><p>运行Visual Studio。</p></li><li class="list__item" id="2352128a"><p>打开您要分析的解决方案。</p></li><li class="list__item" id="23b68a2c"><p>在菜单中，选择<span class="menupath" data-skip-index="skip">ReSharper |。简介|运行启动配置性能分析...。</span></p><figure><img alt="重新分享菜单更新" title="重新分享菜单更新" src="/help/img/dotnet/2019.2/resharper_menu_upd.png" id="fe067221" width="579" height="393"></figure>                <p></p></li></ol>        </div>    </div>    <div class="chapter"><h2 id="86e5ffb0" data-toc="Get_Started_with_Performance_Viewer#86e5ffb0">第2步。配置和运行分析会话</h2>下一步是配置性能分析属性并运行性能分析会话。<ol class="list _decimal"><li class="list__item" id="9ca65369"><p>在左侧面板中，选择<span class="control">Profile Profile App</span> 。这表明，我们要分析此计算机上的应用程序。</p><figure><img alt="T3本地会话" title="T3本地会话" src="/help/img/dotnet/2019.2/t3_local_session.png" id="4b24e85e" width="422" height="305"></figure>            <p></p></li><li class="list__item" id="1138bb9a">                <p id="dacc5bfb">在<span class="control">Profile Application</span>的中央面板中，选择<span class="control">Standalone</span> 。请注意，dotTrace能够分析各种类型的应用程序，包括IIS服务器上托管的Web应用程序，WCF服务以及许多其他*。</p>                <aside class="note " rel="dacc5bfb" id="30aa09ea" data-title=""><p>在本教程中，我们认为您使用独立的dotTrace。 Visual Studio中集成的dotTrace将自动检测应用程序类型。</p></aside>                <p id="02b73cb9">                    </p><figure><img alt="t3应用类型" title="t3应用类型" src="/help/img/dotnet/2019.2/t3_app_type.png" id="dca40ae9" width="449" height="225"></figure>                <p></p>            </li><li class="list__item" id="34399817">                <p id="cd7691df">在右侧面板中，指定分析选项。</p><figure><img alt="T3探查器选项" title="T3探查器选项" src="/help/img/dotnet/2019.2/t3_profiler_options.png" id="83ec78e1" width="422" height="438"></figure>                <p></p>                <ul class="list _alpha-lower"><li class="list__item" id="7e956e3c"><p>在“ <span class="control">应用程序”中</span> ，指定应用程序可执行文件的路径。</p></li><li class="list__item" id="282727ca">                        <p id="58aa6a18">在“ <span class="control">分析类型”中</span> ，指定分析类型。</p>                        <p id="c34d44b9">到目前为止，这是最重要的分析选项。您可以选择：</p>                        <ul class="list _ul"><li class="list__item" id="fbe31d27"><p>                                <span class="control">采样</span> -最快的方法。它可以准确地测量通话时间，但无法获取通话次数数据。这种分析类型使您可以快速了解应用程序的性能。</p></li><li class="list__item" id="5df35f3b"><p>                                <span class="control">跟踪</span> -比<span class="control">采样</span>慢（因此无法精确测量调用时间），但是可以精确测量调用特定方法的次数。当<span class="control">采样</span>数据不足时，请使用此方法，例如，用于评估算法复杂性。</p></li><li class="list__item" id="2a791cbf"><p>                                <span class="control">逐行</span> -衡量每一行代码的最慢方法。仅当您已经知道哪个函数导致问题并希望分析它的每一行时，逐行分析才有意义。</p></li><li class="list__item" id="9997bf1e"><p>                                <span class="control">时间轴</span> -用于执行时间轴分析。在单独的<a href="Get_Started_with_Timeline_Viewer.html">教程中</a>了解它。</p></li></ul>                        <p id="447bf582">如您所见，如果我们只需要评估应用程序的整体性能，则应该使用<span class="control">Sampling</span>方法。</p>                    </li></ul>            </li><li class="list__item" id="7611c2e9"><p>单击<span class="control">运行</span>以开始分析。 dotTrace将附加到您的应用程序的流程，并开始收集性能数据。</p></li></ol>    </div>    <div class="chapter"><h2 id="get_snapshots" data-toc="Get_Started_with_Performance_Viewer#get_snapshots">第三步获取快照</h2>        <p id="adc329e2">一旦运行了概要分析会话，dotTrace不仅将运行概要分析的应用程序，还将运行所谓的“概要分析控制器”（用于控制概要分析会话的单独窗口），以收集性能快照，与概要分析的应用程序分离，等等。 。因此，下一步是使用控制器窗口收集性能分析数据（或换句话说，获取性能快照）。</p><figure><img alt="t1分析控制器" title="t1分析控制器" src="/help/img/dotnet/2019.2/t1_profiling_controller.png" id="41e5ae67" width="550" height="83"></figure>        <p></p>        <ol class="list _decimal"><li class="list__item" id="254fa07a"><p>使用您的应用程序：运行要检查其性能的功能，执行特定的使用场景等。</p></li><li class="list__item" id="98aadf2e">                <p id="f9598854">一旦确定收集的性能分析数据足够，请在控制器窗口中单击“ <span class="control">获取快照并等待</span> ”。</p>                <aside class="note " rel="f9598854" id="dcc76ee2" data-title=""><p>您可能需要收集多个快照（例如，在应用程序中执行某些操作之前和之后）。</p></aside>            </li><li class="list__item" id="81a9dbe7"><p>关闭配置文件的应用程序。这也将关闭控制器窗口。</p></li></ol>    </div>    <div class="chapter"><h2 id="5ed52432" data-toc="Get_Started_with_Performance_Viewer#5ed52432">第四步。分析快照数据</h2>        <p id="fffa3b5c">关闭配置文件的应用程序后，dotTrace将运行一个单独的应用程序-Performance <span class="control">Viewer</span> 。它使您可以使用方便的UI分析收集的性能数据。</p>        <p id="cc78127e">UI由许多视图组成，这些视图使您可以从不同角度查看数据：</p>        <div class="chapter"><h3 id="97f843ef">热点</h3>            <p id="864beddd">您可能<span class="control">要从Hots Spots</span>开始。该视图仅向您显示执行时间最长的功能列表。使用此视图可以一目了然地找到最慢的方法。</p><figure><img alt="t3热点" title="t3热点" src="/help/img/dotnet/2019.2/t3_hot_spots.png" id="2849fcd2" width="819" height="443"></figure>            <p></p>            <p id="8b0cff09">如果要进行更彻底的分析，则可以使用其他<span class="control">Performance Profiler</span>视图： <span class="control">线程树</span> ， <span class="control">调用树</span>和<span class="control">普通列表</span> 。</p>        </div>        <div class="chapter"><h3 id="500d98df">线程树</h3>            <p id="c5918a19">允许您查看和分析应用程序中的线程活动。</p><figure><img alt="t3螺纹" title="t3螺纹" src="/help/img/dotnet/2019.2/t3_threads.png" id="c1037355" width="819" height="474"></figure>            <p></p>        </div>        <div class="chapter"><h3 id="b372da53">呼叫树</h3>            <p id="aea0f173">                <span class="control">调用树</span>显示了所有线程中的所有方法调用。每个顶级节点代表一个由某个线程执行的顶级功能。使用此视图可以快速了解实际的应用程序活动：</p><figure><img alt="t3呼叫树" title="t3呼叫树" src="/help/img/dotnet/2019.2/t3_call_tree.png" id="15a53bd2" width="819" height="474"></figure>            <p></p>        </div>        <div class="chapter"><h3 id="7c4513c9">普通清单</h3>            <p id="eed909d1">显示简单的方法列表。使您能够彻底分析特定方法。</p><figure><img alt="t3普通列表" title="t3普通列表" src="/help/img/dotnet/2019.2/t3_plain_list.png" id="a66022e9" width="819" height="474"></figure>            <p></p>        </div>        <div class="chapter"><h3 id="2c1018d2">源视图</h3>            <p id="893c4450">请注意，无论何时选择一种方法， <span class="control">Performance Viewer</span>都会根据应用程序的调试符号提供的信息为您显示该方法的实际代码。如果没有可用的源代码， <span class="control">Performance Viewer</span>将尝试从程序集中反编译该方法。</p><figure><img alt="t3源视图" title="t3源视图" src="/help/img/dotnet/2019.2/t3_source_view.png" id="5d7aa829" width="572" height="404"></figure>            <p></p>        </div>    </div>    <div class="chapter"><h2 id="bc83d186" data-toc="Get_Started_with_Performance_Viewer#bc83d186">学到更多</h2>        <p id="b3c7932a">掌握了这些基础知识之后，请学习分析探查器数据的各种技术。<span class="control">Performance Viewer</span>包括强大的功能，例如<a href="Starting_Remote_Profiling_Session.html">远程分析</a> ， <a href="Studying_Profiling_Results__Navigation_and_Search.html">导航方法调用</a> ， <a href="Studying_Profiling_Results__Identifying_and_Narrowing_an_Area_of_Interest.html">过滤和折叠</a>以及<a href="Studying_Profiling_Results__Performance_Forecasting.html">估计性能提升</a> 。在本指南的特定部分中阅读有关这些和其他功能的信息。</p>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年9月19日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Other_Profiling_Scenarios.html">如何</a> <a class="navigation-links__next" href="Get_Started_with_Timeline_Profiling_(Basic).html">开始进行时间轴分析</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>