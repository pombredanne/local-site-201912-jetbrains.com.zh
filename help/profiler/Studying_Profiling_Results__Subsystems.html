<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>使用子系统简化分析-帮助|帮助dotTrace</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Studying_Profiling_Results__Subsystems" data-article-props="
                {
                
            " seeals=":{=" concept=":=" hre=":" studying_profiling_results__overview.htm="," titl=":" overvie="}=" studying_profiling_results__call_tree.htm="," call="" tre="}=" studying_profiling_results__threads_tree.htm="," threads="" ="href"="reference__dialog_boxes__subsystem_definition.html" ="title"="dialogs:=" }="" :="" ]="" studying_profiling_results__subsystems_d=""><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索dotTrace帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>dotTrace 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="rs" data-group="secondary">ReSharper 2.x / IntelliJ IDEA</option><option value="vs" data-group="primary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Studying_Profiling_Results__Subsystems.xml" data-toc="Studying_Profiling_Results__Subsystems">使用子系统简化分析</h1>    <p id="bb6fc308">子系统是一种呈现概要分析快照数据的方法，可让您快速了解某些系统组件（.NET Framework的各个部分，外部库，您自己的代码等）所消耗的时间。子系统只是将在特定名称空间或程序集中进行的所有调用分组。例如，您可以为<code class="code">System.Windows.Forms</code>总结所有<code class="code">WinForms</code>调用您的应用。这将显示与应用程序交互需要多少时间。</p>                    <div class="chapter"><h2 id="b16419b6">简介，概念和配置</h2>        <p id="78c275ac">每次选择节点时，dotTrace都会分析所选调用堆栈的收集数据，并显示各个子系统对所选调用堆栈的贡献。为了更好地感知，每个子系统都有其自己的颜色。您可以分配自定义颜色或使用默认颜色。</p>        <p id="2cf4182e">要定义一个新的子系统，您需要定义一个名称，设置颜色并指定一个或多个规则。</p>        <section class="procedure-steps"><h3 id="add">添加新子系统</h3><ol class="list _decimal"><li class="list__item" id="e7ce7838"><p>在菜单栏上，选择“ <span class="menupath" data-skip-index="skip">查看” |“</span>选择<span class="menupath" data-skip-index="skip">”。选项</span> 。将打开“ <span class="control">选项”</span>对话框。</p></li><li class="list__item" id="e2cef941"><p>单击<span class="control">“</span> <span class="control">选项”</span>对话框左窗格上的“ <span class="control">配置文件</span> ”。</p></li><li class="list__item" id="c8ef14b9"><p>点击附近的箭头<img alt="主题图标已添加参数屏幕灰色" title="主题图标已添加参数屏幕灰色" src="/help/img/dotnet/2019.2/ThemedIcon.AddedParameter.Screen.[Gray].png" id="1ab2429b" width="16" height="16" class="inline-icon-16">在“ <span class="control">个人档案”</span>窗格上<span class="control">创建新的子系统</span> ，然后单击<span class="control">添加空子系统</span> 。</p></li><li class="list__item" id="2c941dab">将打开“ <span class="control">子系统定义”</span>对话框。<ul class="list _ul"><li class="list__item" id="a524efca"><p>在“ <span class="control">名称”</span>文本框中输入新名称。</p></li><li class="list__item" id="c867e56d"><p>单击“ <span class="control">颜色”</span>标签右侧的区域以打开“ <span class="control">选择颜色”</span>对话框，然后选择适当的颜色。</p></li><li class="list__item" id="d7fb97d4"><p>如果要禁用<span class="control">当前配置文件</span>中的<span class="control">子系统，</span>请清除“ <span class="control">在当前配置文件</span>中<span class="control">启用子系统”</span>复选框。</p></li><li class="list__item" id="7fb86d60">指定子系统可见性选项：<ul class="list _ul"><li class="list__item" id="5dd21034"><p>                                <span class="control">显示</span> -子系统将显示为单独的条目。</p></li><li class="list__item" id="595334eb"><p>                                <span class="control">Join-</span>子系统的时间将在调用子系统中计算。仅当没有子系统可连接时，子系统才会单独显示。</p></li><li class="list__item" id="fdb49c2b"><p>                                <span class="control">隐藏</span> -子系统将被隐藏。子系统的时间将从计算中排除。</p></li></ul>例如， <code class="code">MethodA</code>属于<code class="code">SubsystemA</code>和电话<code class="code">MethodB</code> （属于<code class="code">SubsystemB</code> ），依次调用<code class="code">MethodC</code> （属于<code class="code">SubsystemC</code> ）。如果所有子系统都设置为<span class="control">Show</span> ，则子系统时间将按以下方式计算：<br>                        <b id="b370343b">子系统A =方法A</b>                        <br>                        <b id="b34f9748">子系统B =方法B</b>                        <br>                        <b id="c2b3eba4">子系统C =方法C</b>                        <br>                        <br>如果您设置<code class="code">SubsystemB</code> <span class="control">加入</span> ，子系统将按以下方式计算：<br>                        <b id="7ac1cba9">子系统A =方法A +方法B</b>                        <br>                        <b id="b4c51829">子系统C =方法C</b>                        <br>                        <br>如果您设置<code class="code">SubsystemB</code>要<span class="control">隐藏</span> ，子系统将按以下方式计算：<br>                        <b id="cfe582d3">子系统A =方法A</b>                        <br>                        <b id="96d61563">子系统C =方法C</b>                        <br>                    </li><li class="list__item" id="7c68d3e2"><p>单击<span class="control">添加</span>并<span class="control">清除</span>以管理规则。所有规则都显示在列表中。</p></li></ul>            </li><li class="list__item" id="c512f96c"><p>单击“ <span class="control">确定”</span>保存更改，然后关闭“ <span class="control">子系统定义”</span>对话框。</p></li></ol></section>        <p id="7c950377">您也可以通过复制现有子系统来创建子系统。</p>        <section class="procedure-steps"><h3 id="duplicate">复制子系统</h3><ol class="list _decimal"><li class="list__item" id="86c62346"><p>在菜单栏上，选择“ <span class="menupath" data-skip-index="skip">查看” |“</span>选择<span class="menupath" data-skip-index="skip">”。选项</span> 。将打开“ <span class="control">选项”</span>对话框。</p></li><li class="list__item" id="afeee337"><p>单击<span class="control">“</span> <span class="control">选项”</span>对话框左窗格上的“ <span class="control">配置文件</span> ”。</p></li><li class="list__item" id="b5c6f88e"><p>点击附近的箭头<img alt="主题图标已添加参数屏幕灰色" title="主题图标已添加参数屏幕灰色" src="/help/img/dotnet/2019.2/ThemedIcon.AddedParameter.Screen.[Gray].png" id="cd683e6e" width="16" height="16" class="inline-icon-16">在“ <span class="control">配置文件”</span>窗格上<span class="control">创建新的子系统</span> ，然后单击“ <span class="control">复制子系统”</span> 。</p></li><li class="list__item" id="2eda1d36">将打开“ <span class="control">子系统定义”</span>对话框。<ul class="list _ul"><li class="list__item" id="34fc84ef"><p>如有必要，请在“ <span class="control">子系统名称”</span>文本框中修改名称。</p></li><li class="list__item" id="367d51cf"><p>单击“ <span class="control">颜色”</span>标签右侧的区域，以打开“ <span class="control">选择颜色”</span>对话框并重新定义颜色。</p></li><li class="list__item" id="59f19fa0"><p>单击<span class="control">添加</span>并<span class="control">清除</span>以管理规则。所有规则都显示在列表中。</p></li></ul>            </li><li class="list__item" id="d6b5d5cd"><p>单击“ <span class="control">确定”</span>保存更改，然后关闭“ <span class="control">子系统定义”</span>对话框。</p></li></ol></section>        <p id="d14a5f3f">您可以随时返回到现有子系统并为它们修改规则。</p>        <p id="08ae5a16">在定义了所有必需的子系统之后，您可以进一步调整设置。可以将所有应考虑的子系统收集到一个配置文件中，并根据其重要性进行排列。因此，概要文件只是一组重要的或活动的子系统。它可以具有名称，也可以不命名。</p>        <p id="601d315f">如果一个方法与来自不同子系统的两个规则匹配，则应用来自子系统的规则，该规则高于子系统列表中另一个规则。</p>        <section class="procedure-steps"><h3 id="add_profile">创建一个新的配置文件</h3><ol class="list _decimal"><li class="list__item" id="3bd17f9c"><p>在菜单栏上，选择“ <span class="menupath" data-skip-index="skip">查看” |“</span>选择<span class="menupath" data-skip-index="skip">”。选项</span> 。将打开“ <span class="control">选项”</span>对话框。</p></li><li class="list__item" id="50959c66"><p>单击<span class="control">“</span> <span class="control">选项”</span>对话框左窗格上的“ <span class="control">配置文件</span> ”。创建一个新的未命名配置文件。</p></li><li class="list__item" id="0b3badef"><p>请点击<img alt="主题图标已添加参数屏幕灰色" title="主题图标已添加参数屏幕灰色" src="/help/img/dotnet/2019.2/ThemedIcon.AddedParameter.Screen.[Gray].png" id="44fa5fd0" width="16" height="16" class="inline-icon-16">在“ <span class="control">配置文件”</span>窗格上<span class="control">添加新的配置</span> <span class="control">文件</span> 。</p></li><li class="list__item" id="13fac292"><p>在配置文件列表中，出现一个活动文本框。在此文本框中输入新配置文件的名称。<br>在子系统列表中，通过选择相应的复选框来配置活动子系统集。</p></li><li class="list__item" id="10daf1ce"><p>（可选）您可以重新排序子系统的顺序。为此，选择要移动的子系统，然后单击<img alt="ThemedIcon上萤幕灰色" title="ThemedIcon上萤幕灰色" src="/help/img/dotnet/2019.2/ThemedIcon.Up.Screen.[Gray].png" id="23e4c4ab" width="16" height="16" class="inline-icon-16"> <span class="control">向上移动所选子系统</span>或<img alt="ThemedIcon萤幕下灰" title="ThemedIcon萤幕下灰" src="/help/img/dotnet/2019.2/ThemedIcon.Down.Screen.[Gray].png" id="1663732c" width="16" height="16" class="inline-icon-16"> <span class="control">向下移动选定的子系统</span> 。</p></li><li class="list__item" id="8890850f"><p>单击<span class="control">确定</span>保存更改。</p></li></ol></section>        <p id="fa5812e4">当您拥有多个概要文件时，可以在“ <span class="control">子系统”</span>视图中在它们之间进行切换，并可视化组件中那些在当前似乎很重要的部分。</p>        <p id="fec67aab">如果您对子系统配置所做的更改不满意，可以使用“ <span class="control">重置默认值”</span>按钮将它们快速重置为出厂默认<span class="control">值</span> 。</p>    </div>    <div class="chapter"><h2 id="fee11398">查看说明</h2>        <p id="7bf33b07">默认情况下，“ <span class="control">子系统”</span>视图是可见的。如果不是这样，请在“ <span class="control">选项”</span>对话框的“ <span class="control">配置文件”</span>页面上选中“ <span class="control">启用子系统分析”</span>复选框。之后，每次选择新的调用堆栈时，dotTrace都会重建视图。</p><figure><img alt="研究分析结果子系统01" title="研究分析结果子系统01" src="/help/img/dotnet/2019.2/Studying_Profiling_Results__Subsystems_01.png" id="38481d4d" width="672" height="254"></figure>        <p></p>        <p id="fa3c4eab">            </p><figure><img alt="研究分析结果子系统02" title="研究分析结果子系统02" src="/help/img/dotnet/2019.2/Studying_Profiling_Results__Subsystems_02.png" id="314c10bc" width="672" height="267"></figure>            <figure><img alt="一" title="一" src="/help/img/dotnet/2019.2/One.png" id="2f16b675" width="32" height="31"></figure>            <br>花费最多时间的子系统占据了最大的块。该块又由代表子子系统的较小块组成。<p></p>        <p id="25608eeb">            </p><figure><img alt="二" title="二" src="/help/img/dotnet/2019.2/Two.png" id="562a0e24" width="32" height="31"></figure>            <br>配置文件切换按钮可帮助您根据构建视图的方式快速更改配置文件，并以其他子系统为重点来重建它。您还可以折叠或展开视图。<p></p>        <p id="c2c1e1fb">            </p><figure><img alt="三" title="三" src="/help/img/dotnet/2019.2/Three.png" id="17390f50" width="32" height="31"></figure>            <br>子系统按时间排序。它们每个都显示为一棵树，其中叶节点是功能。<p></p>        <p id="576dfad9">无论定义的模式和自定义子系统如何，都有四个独立存在的子系统。所有功能都可以根据它们的程序集分为两组，并且可以包含在<span class="control">系统代码</span>或<span class="control">用户代码</span>子系统中：</p><ul class="list _ul"><li class="list__item" id="28b0d204"><p>                    <span class="control">系统代码</span> -与所选活动配置文件中的规则不匹配且属于标准系统库的所有源代码</p></li><li class="list__item" id="6992f537"><p>                    <span class="control">用户代码</span> -与所选活动配置文件中的规则不匹配且不属于标准系统库的所有源代码</p></li></ul>要了解如何将功能从一个组移动到另一个组，请参阅<a href="Studying_Profiling_Results__Creating_and_Applying_Filters.html">创建和应用过滤器</a> 。<p></p>        <p id="da69b0f6">其余两个子系统仅用于有关应用程序中某些活动的信息：</p><ul class="list _ul"><li class="list__item" id="55ff840e"><p>                    <span class="control">垃圾收集</span> -与垃圾收集有关的所有活动</p></li><li class="list__item" id="c19fde85"><p>                    <span class="control">特殊</span> -不属于.NET库的所有函数</p></li></ul>        <p></p>        <p id="09d72948">如果不需要树形视图，则可以切换到智能模式。双击视图顶部并将其折叠。</p>        <p id="0aa8e09e">重要！<span class="menupath" data-skip-index="skip">视图|选项...|子系统| “配置文件”</span>页面包含更多的“特殊”子系统，例如<span class="control">SQL查询</span> ， <span class="control">锁争用</span> ， <span class="control">CPU就绪</span>等。这些子系统基于ETW事件，并且仅在<a href="Subsystems.html">Timeline Viewer</a>中可用。</p>    </div>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年9月19日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Studying_Profiling_Results__Color-Coding_Functions.html">颜色编码功能</a> <a class="navigation-links__next" href="Studying_Profiling_Results__Performance_Forecasting.html">预测性能</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>