<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta name="robots" content="noindex"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta charset="UTF-8"><title>SQL Queries - Help | dotTrace</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="SQL_Client" data-disqus-id="SQL_Client_dt"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search dotTrace Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>dotTrace 2018.3 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="secondary" value="rs">ReSharper 2.x/IntelliJ IDEA</option><option data-group="primary" value="vs" selected>Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="false"><h1 data-toc="SQL_Client" id="SQL_Client.xml">SQL Queries</h1>    <aside class="warning " data-title="" rel="SQL_Client.xml" id="5a10464f">        <p id="c180aa38">            Known limitations:        </p>        <ul class="list _ul"><li class="list__item" id="9900abc8"><p>                .NET Core does not support SQL ETW events: The                <span class="control">SQL Queries</span> filter does not show any data for .NET Core applications.            </p></li><li class="list__item" id="17e90af0"><p>                Windows Vista and Windows Server 2008 do not support SQL ETW events: The                <span class="control">SQL Queries</span> filter does not show any data on these operating systems.            </p></li></ul>    </aside>    <p id="85de41af">        The <span class="control">SQL Queries</span> event indicates time intervals where your application communicates        with an SQL server.        This includes time required for opening and closing connections, running commands, performing queries, and other        SQL activities.        Note that all measurements are performed on the client side - dotTrace measures the time between a client        sending a request        and it receiving a response.    </p>    <p id="7e3aa4c8">        dotTrace collects SQL data from the following data providers:    </p>    <ul class="list _ul"><li class="list__item" id="08be56e4"><p>SQLClient</p></li><li class="list__item" id="54ba2700"><p>OLE DB*        </p></li><li class="list__item" id="6c10ab8a"><p>Entity Framework</p></li><li class="list__item" id="b79a819a"><p>ODBC*</p></li></ul>    <aside class="note " data-title="" rel="7d0c9a37" id="dcb51ee9">        <p id="efc6e3e4">            * dotTrace collects limited data about management commands.            <br>            If you use OLE DB, the following commands will not be shown in the            <span class="control">SQL Queries: Commands</span>            sub-filter:            <ul class="list _ul"><li class="list__item" id="78dcc8df"><p>                    <span class="control">[Open Connection]</span>                </p></li><li class="list__item" id="9e047077"><p>                    <span class="control">[Close Connection]</span>                </p></li></ul>            <br>            For ODBC, these are:            <ul class="list _ul"><li class="list__item" id="afd0bd14"><p>                    <span class="control">[Begin Transaction]</span>                </p></li><li class="list__item" id="625019ba"><p>                    <span class="control">[Commit Transaction]</span>                </p></li><li class="list__item" id="e591f84b"><p>                    <span class="control">[Rollback Transaction]</span>                </p></li></ul>            <br>            In addition, ODBC and OLE DB do not provide connection data, therefore, in both cases the            <span class="control">SQL Queries: Connection String</span>            sub-filter will show <span class="control">[Unknown]</span> instead            of the connection string.        </p>    </aside>    <p id="a0ddd494">        Select the <span class="control">SQL Queries</span> event to analyze how your app accesses data.        For example, a web application may run slow due to a bottleneck in SQL server communication. In such a case,        you can use the <span class="control">SQL Queries</span> filter to determine the slowest queries and methods that run        these queries.    </p>    <p id="33b90ff9">        When the <span class="control">SQL Queries</span> event is selected, the <span class="control">Filters</span> window contains        sub-filters        that allow you to refine the resulting filter:        <span class="control">SQL Queries: Command</span>        and <span class="control">SQL Queries: Connection String</span>.    </p>    <div class="chapter"><h2 id="3e3d0ae4" data-toc="SQL_Client#3e3d0ae4">SQL Queries: Command</h2>        <p id="36080219">            The <span class="control">SQL Queries: Command</span> sub-filter shows distribution of SQL operations time between            SQL commands: queries, opening and closing connection commands, and so on.            Use this sub-filter to determine how much time does a particular command take.        </p>        <figure><img alt="sql client command 1" title="sql client command 1" src="/help/img/dotnet/2018.3/sql_client_command_1.png" id="b23b51d1" width="350" height="199"></figure>        <p id="0be7f7dc">            <img alt="pos 1" title="pos 1" src="/help/img/dotnet/2018.3/pos_1.png" id="3bb41d05" width="32" height="32" class="inline-icon-32">            Command name or query content.        </p>        <p id="b93761c8">            <img alt="pos 2" title="pos 2" src="/help/img/dotnet/2018.3/pos_2.png" id="8795e9bc" width="31" height="31" class="inline-icon-31">            Total time spent on a SQL command summed up for all selected threads.            <br>        </p>        <p id="865d8a30">            <img alt="pos 3" title="pos 3" src="/help/img/dotnet/2018.3/pos_3.png" id="e3eb0143" width="31" height="30" class="inline-icon-31">            The percentage of time spent on a SQL command relative to the total selected time.        </p>        <section class="procedure-steps"><h2 id="05ab31ed">To apply the SQL Queries: Command filter:</h2><ul class="list "><li class="list__item" id="dad39741"><p>Select the desired SQL command in the filter.</p></li></ul></section>        <p id="0320cee0">            After you select a command, other filters will show data only for            the time intervals where the selected command was performed.        </p>        <figure><img alt="sql client command 2" title="sql client command 2" src="/help/img/dotnet/2018.3/sql_client_command_2.png" id="526cab28" width="351" height="365" align="middle"></figure>    </div>    <div class="chapter"><h2 id="d37061c7" data-toc="SQL_Client#d37061c7">SQL Queries window</h2>        <p id="242c8d47">            If a command content is too long to fit the <span class="control">Filters</span> window, it is truncated by width.            To view the entire content of such a command,            open the <span class="control">SQL Queries</span> window.            The window shows the same data as the            <span class="control">SQL Queries: Command</span>            filter but, in addition, it allows finding commands by content and copying the content to clipboard.        </p>        <figure><img alt="sql queries" title="sql queries" src="/help/img/dotnet/2018.3/sql_queries.png" id="10d7e4b7" width="643" height="456"></figure>        <section class="procedure-steps"><h2 id="d5ef35e6">To open the SQL Queries window</h2><ul class="list "><li class="list__item" id="7c1225c6">Do one of the following:                <ul class="list _ul"><li class="list__item" id="d0fc7676"><p>Use the menu <span data-skip-index="skip" class="menupath">View | SQL Queries</span>.                    </p></li><li class="list__item" id="0ba03e7a"><p>Click the                        <img alt="ThemedIcon DatailsTableOpen Screen Gray " title="ThemedIcon DatailsTableOpen Screen Gray " src="/help/img/dotnet/2018.3/ThemedIcon.DatailsTableOpen.Screen.[Gray].png" id="09c31271" width="14" height="14" class="inline-icon-14">                        button in the                        <span class="control">SQL Queries: Command</span>                        filter.                    </p></li></ul>            </li></ul></section>        <p id="be1ba0f7">            As well as the <span class="control">SQL Queries: Command</span> filter, the <span class="control">SQL Queries</span> window            also            can work as a filter by an SQL command.        </p>        <section class="procedure-steps"><h2 id="4023f957">To apply the filter by a particular command (query)</h2><ul class="list "><li class="list__item" id="32b8d834">Do one of the following:                <ul class="list _ul"><li class="list__item" id="f4cf9fcb"><p>Select the desired SQL command.</p></li><li class="list__item" id="92c913e2"><p>Double-click on the desired SQL command.</p></li><li class="list__item" id="2b172577"><p>Select the desired SQL command and press                        <kbd data-bypass="true">Enter</kbd>                    </p></li><li class="list__item" id="8b895fdf"><p>In the context menu of the desired SQL command, choose <span class="control">Select And Clear                        Others</span>.                    </p></li></ul>            </li></ul></section>        <section class="procedure-steps"><h2 id="f71b99d0">To apply the filter by a number of commands (queries)</h2><ul class="list "><li class="list__item" id="788c2fcd">Do one of the following:                <ul class="list _ul"><li class="list__item" id="154510fc"><p>Select the desired SQL command and press <kbd data-bypass="true">Space</kbd>.                    </p></li><li class="list__item" id="fcc368cf"><p>In the context menu of the desired SQL command, choose <span class="control">Select As Filter</span>.                    </p></li></ul>                This will add the SQL command                to selection.            </li></ul></section>        <section class="procedure-steps"><h2 id="e333d04f">To copy command content to the clipboard</h2><ul class="list "><li class="list__item" id="359555d1"><p>                In the context menu of the desired SQL query, choose <span class="control">Copy To Clipboard</span>.            </p></li></ul></section>        <section class="procedure-steps"><h2 id="535bf04f">To find a particular SQL command (query) by content</h2><ul class="list "><li class="list__item" id="e360017f"><p>                In the search text box located on top of the                <span class="control">SQL Queries</span>                window, start typing command (query) content you are looking for.                As you type, the list of SQL commands narrows down, suggesting the ones that match the entered string.            </p></li></ul></section>        <p id="9c70e3bd">            For convenience, large commands consisting of multiple rows are truncated.        </p>        <section class="procedure-steps"><h2 id="de7fce98">To see the full content of a truncated command</h2><ul class="list "><li class="list__item" id="2034f952">                Do one of the following:                <ul class="list _ul"><li class="list__item" id="9f397563"><p>Click the <span class="control">...</span> button in the end of the command.                    </p></li><li class="list__item" id="90651cd8"><p>In the context menu of the desired SQL command, choose <span class="control">Show Full Query</span>.                    </p></li></ul>            </li></ul></section>    </div>    <div class="chapter"><h2 id="5608c60a" data-toc="SQL_Client#5608c60a">SQL Queries: Connection String</h2>        <p id="ff5ff345">            The <span class="control">SQL Queries: Connection String</span> sub-filter shows distribution of            <span class="control">SQL Queries</span>            time between SQL commands with particular connection parameters.            This filter could be useful, for example, if your application communicates with more than one SQL server.        </p>        <figure><img alt="sql client connection string 1" title="sql client connection string 1" src="/help/img/dotnet/2018.3/sql_client_connection_string_1.png" id="5e4de92c" width="348" height="127"></figure>        <p id="7e11d24d">            <img alt="pos 1" title="pos 1" src="/help/img/dotnet/2018.3/pos_1.png" id="1fa4c157" width="32" height="32" class="inline-icon-32">            Connection string.        </p>        <p id="5b8860a4">            <img alt="pos 2" title="pos 2" src="/help/img/dotnet/2018.3/pos_2.png" id="b6bb94b7" width="31" height="31" class="inline-icon-31">            Total time of all SQL commands with these connection parameters.            <br>        </p>        <p id="c9abae6a">            <img alt="pos 3" title="pos 3" src="/help/img/dotnet/2018.3/pos_3.png" id="3efeee84" width="31" height="30" class="inline-icon-31">            The percentage of time spent running SQL commands with these connection parameters            relative to the total selected time.        </p>        <section class="procedure-steps"><h2 id="e8fb96aa">To apply the SQL Queries: Connection String filter</h2><ul class="list "><li class="list__item" id="15d044a7"><p>Select the desired string in the filter.</p></li></ul></section>        <p id="76670c17">            After you select a connection string, other filters will show data only for            the time intervals where threads run SQL commands with corresponding connection parameters.        </p>        <figure><img alt="sql client connection string 2" title="sql client connection string 2" src="/help/img/dotnet/2018.3/sql_client_connection_string_2.png" id="87a38e01" width="411" height="366" align="middle"></figure>    </div><div class="last-modified" data-skip-index="skip">Last modified: 15 March 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="File_I_O.html">File Operations</a><a class="navigation-links__next" href="Thread_State.html">Thread State</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>