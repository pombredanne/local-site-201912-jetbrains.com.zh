<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta name="robots" content="noindex"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta charset="UTF-8"><title>.NET Memory Allocations - Help | dotTrace</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="Memory_Allocation" data-disqus-id="Memory_Allocation_dt"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search dotTrace Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>dotTrace 2018.3 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="secondary" value="rs">ReSharper 2.x/IntelliJ IDEA</option><option data-group="primary" value="vs" selected>Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="false"><h1 data-toc="Memory_Allocation" id="Memory_Allocation.xml">.NET Memory Allocations</h1>    <p id="3c768fe6">        When <span class="control">.NET Memory Allocations</span> is selected in the        <span class="control">Events</span>        filter, Timeline Viewer shows you how your application allocated memory        to the managed heap. For example, <span class="control">Call Tree</span> shows how much memory (in MB) a particular        call has allocated.    </p>    <p id="3693a517">        Select the <span class="control">.NET Memory Allocations</span> event for analyzing excessive memory traffic and garbage        collections.        The latter are one of the main reasons of UI freezes as the main thread can be suspended during a GC.            </p>    <p id="01a2a21a">        Note that allocation point event is raised only after the size of allocated memory exceeds 100 KB in total.        For example, a thread allocates five 50 KB memory blocks during profiling.        In such a case, dotTrace will detect only two allocations of 100 KB.        <br>    </p>    <figure><img alt="memory allocation 1" title="memory allocation 1" src="/help/img/dotnet/2018.3/memory_allocation_1.png" id="16520632" width="268" height="273"></figure>    <p id="6cd4f581">        When you select the <span class="control">.NET Memory Allocations</span> subject, Timeline Viewer adds the auxiliary        <span class="control">.NET Memory Allocations: Heap</span>        filter to the        <span class="control">Filters</span>        window.    </p>    <div class="chapter"><h2 id="f88860c1" data-toc="Memory_Allocation#f88860c1">.NET Memory Allocations: Heap</h2>        <p id="a9ea0c8c">            The <span class="control">.NET Memory Allocations: Heap</span> sub-filter is used to show distribution            of allocated memory between small and large object heaps.            The info about allocations to LOH allows you to evaluate how your application uses large data            collections. This can be important for performance analysis as LOH is not automatically compacted and            becomes            fragmented over time.        </p>        <p id="cd412222">            As a filter, <span class="control">.NET Memory Allocations: Heap</span> can be used to filter out point events            where allocation to a certain heap takes place.            For example, if you want to determine methods that allocate memory in LOH, select            <span class="control">.NET Memory Allocations</span>            in the            <span class="control">Events</span>            filter and <span class="control">Large Object Heap</span> in <span class="control">.NET Memory Allocations: Heap</span>.            The methods will be shown in the <span class="control">Call Stack</span> window in            <span class="control">Methods and Subsystems</span>.        </p>                <figure><img alt="memory allocation 2" title="memory allocation 2" src="/help/img/dotnet/2018.3/memory_allocation_2.png" id="ab7467b2" width="322" height="163"></figure>        <p id="7ec59542">            <img alt="pos 1" title="pos 1" src="/help/img/dotnet/2018.3/pos_1.png" id="8d95f1a2" width="32" height="32" class="inline-icon-32">            Heap name:            <span class="control">Small Object Heap</span>            or <span class="control">Large Object Heap</span>.        </p>        <p id="20feefc3">            <img alt="pos 2" title="pos 2" src="/help/img/dotnet/2018.3/pos_2.png" id="43ebe854" width="31" height="31" class="inline-icon-31">            The size of objects allocated in the heap.        </p>        <p id="2b425432">            <img alt="pos 3" title="pos 3" src="/help/img/dotnet/2018.3/pos_3.png" id="15f23e31" width="31" height="30" class="inline-icon-31">            The percentage of size of objects allocated in the heap relative to the total allocated memory.        </p>        <p id="dba62ad2">            For example, your application has two threads: Thread#1 and Thread#2. During profiling, Thread#1 allocated            8 MB to SOH and 1 MB to LOH. Thread#2 allocated 1 MB to LOH.            The            <span class="control">Events</span>            filter for these two threads will look like follows:        </p>        <p id="236c2b35">            <b id="67e62ccd">...</b>            <br>            <b id="476c29d0">.NET Memory Allocations 10 MB</b>            <br>            <b id="d0fb47bc">...</b>        </p>        <p id="5e15f513">            The <span class="control">.NET Memory Allocations: Heap</span> filter            will look like follows:        </p>        <p id="07212848">            <b id="c8c403b7">Small Object Heap 8 MB 80.00%</b>            <br>            <b id="ba6f6f01">Large Object Heap 2 MB 20.00%</b>        </p>                <section class="procedure-steps"><h2 id="00a12a04">To apply the .NET Memory Allocations: Heap filter</h2><ul class="list "><li class="list__item" id="0d89a87d"><p>Select the desired heap(s) in the filter.</p></li></ul></section>        <p id="368f89f0">            After you select a heap, other filters will show only the            point events where allocation to the selected heap took place. For example,            <span class="control">Top Methods</span>            in the <span class="control">Call Stack</span> window will show the list of methods that            allocated objects in the heap.        </p>        <figure><img alt="memory allocation heap 2" title="memory allocation heap 2" src="/help/img/dotnet/2018.3/memory_allocation_heap_2.png" id="4be511c2" width="387" height="370"></figure>    </div>    <div class="chapter"><h2 id="memory-allocation-type" data-toc="Memory_Allocation#memory-allocation-type">.NET Memory Allocations: Type</h2>        <p id="62b5e1d3">            The <span class="control">.NET Memory Allocations: Type</span> sub-filter is used to show distribution            of allocated memory between objects of a certain type.            This info may help you to identify types of allocated objects on a selected timeframe.        </p>        <p id="b12a1bde">            As a filter, <span class="control">.NET Memory Allocations: Type</span> can be used to filter out point events            where objects of a certain type are allocated.            For example, if you want to determine methods that allocate strings, select            <span class="control">.NET Memory Allocations</span>            in the            <span class="control">Events</span>            filter and <code class="code" data-lang="Java">System.String</code> in <span class="control">.NET Memory Allocations: Type</span>.            The methods will be shown in the <span class="control">Call Stack</span> window in            <span class="control">Methods and Subsystems</span>.        </p>                <figure><img alt="memory allocation type" title="memory allocation type" src="/help/img/dotnet/2018.3/memory_allocation_type.png" id="7b226a44" width="359" height="221"></figure>        <p id="e7ba724b">            <img alt="pos 1" title="pos 1" src="/help/img/dotnet/2018.3/pos_1.png" id="e18ec684" width="32" height="32" class="inline-icon-32">            Type name.        </p>        <p id="d6c322ac">            <img alt="pos 2" title="pos 2" src="/help/img/dotnet/2018.3/pos_2.png" id="668b588e" width="31" height="31" class="inline-icon-31">            The size of objects.        </p>        <p id="779315ea">            <img alt="pos 3" title="pos 3" src="/help/img/dotnet/2018.3/pos_3.png" id="18bed795" width="31" height="30" class="inline-icon-31">            The percentage of size of objects of a certain type relative to the total allocated memory.        </p>                <section class="procedure-steps"><h2 id="91c03c30">To apply the .NET Memory Allocations: Type filter</h2><ul class="list "><li class="list__item" id="d0dea831"><p>Select the desired type(s) in the filter.</p></li></ul></section>        <p id="8597eed6">            After you select a type, other filters will show only the            point events where allocation of objects of this type took place. For example,            <span class="control">Top Methods</span>            in the <span class="control">Call Stack</span> window will show the list of methods that            allocated objects of the selected type.        </p>        <figure><img alt="memory allocation type filter" title="memory allocation type filter" src="/help/img/dotnet/2018.3/memory_allocation_type_filter.png" id="529a38f6" width="396" height="358"></figure>    </div><div class="last-modified" data-skip-index="skip">Last modified: 15 March 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Time.html">Not Selected</a><a class="navigation-links__next" href="Native_Memory_Allocation.html">Unreleased Native Allocations</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>