<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>时间测量方法-帮助|帮助dotTrace</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Profiling_Guidelines__Setting_the_Right_Meter_Kind" data-article-props="
                {
                
            " seeals=":{=" concept=":=" hre=":" profiling_guidelines__choosing_the_right_profiling_mode.htm="," titl=":" profiling="" type="}=" ="" data-disqus-id="Profiling_Guidelines__Setting_the_Right_Meter_Kind_dt"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索dotTrace帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>dotTrace 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="rs" data-group="secondary">ReSharper 2.x / IntelliJ IDEA</option><option value="vs" data-group="primary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Profiling_Guidelines__Setting_the_Right_Meter_Kind.xml" data-toc="Profiling_Guidelines__Setting_the_Right_Meter_Kind">时间测量方法</h1>    <p id="7980efdf">        </p><figure><img alt="时间测量性能分析" title="时间测量性能分析" src="/help/img/dotnet/2019.2/time_measurement_performance_profiling.png" id="d9e09eec" width="254" height="158"></figure>    <p></p>    <p id="fa0ddcd8">dotTrace可以通过几种方式来衡量呼叫执行时间：</p><ul class="list _ul"><li class="list__item" id="998e30d2"><p>实时（性能计数器）</p></li><li class="list__item" id="d1cd877a"><p>实时（CPU指令）</p></li><li class="list__item" id="ec50dec6"><p>线程时间</p></li><li class="list__item" id="b851fffb"><p>线程循环时间</p></li></ul>配置分析会话时，在<a href="Profiler_Options.html">Profiler选项中</a>选择了<span class="control">时间测量</span>方法。<p></p>    <div class="chapter"><h2 id="real-time-cpu-instruction" data-toc="Profiling_Guidelines__Setting_the_Right_Meter_Kind#real-time-cpu-instruction">实时（CPU指令）</h2>        <p id="434f4913">            <span class="control">实时（CPU指令）</span> ，也称为实际时间或挂钟时间，是方法进入和退出之间的时间。在方法消耗CPU并执行有意义的工作的情况与方法处于睡眠，等待或联接的情况之间，这种方法没有区别。这两种情况下，dotTrace都会测量时间。因此，它在方法入口和方法出口读取TSC处理器寄存器的值，然后计算差值。</p>        <aside class="note " rel="434f4913" id="efc7f93a" data-title=""><p>如果处理器不支持CPU指令，则无法使用这种测量方法。</p></aside>    </div>    <div class="chapter"><h2 id="real-time-performance-counter" data-toc="Profiling_Guidelines__Setting_the_Right_Meter_Kind#real-time-performance-counter">实时（性能计数器）</h2>        <p id="75ab2408">            <span class="control">实时（性能计数器）</span>类似于<span class="control">实时（CPU指令），</span>只是它使用的时间间隔测量方式略有不同。 dotTrace使用性能计数器API从操作系统，网络和设备中检索和使用性能计数器数据来测量时间。</p>    </div>    <div class="chapter"><h2 id="thread-time" data-toc="Profiling_Guidelines__Setting_the_Right_Meter_Kind#thread-time">线程时间</h2>        <p id="f3b71d15">            <span class="control">线程时间</span>是由线程专用计时器测量的时间，该线程在线程暂停（等待处理器或睡眠）时暂停。这种测量仅支持采样分析，并且分辨率比其他方法低（约10ms）。</p>    </div>    <div class="chapter"><h2 id="thread-cycle-time" data-toc="Profiling_Guidelines__Setting_the_Right_Meter_Kind#thread-cycle-time">线程循环时间</h2>        <p id="e5b8cfc3">            <span class="control">线程循环时间</span>是由线程专用计时器测量的时间，该计时器在线程暂停（等待处理器或休眠）时暂停。这是计时应用程序代码的更准确的方法。实际上， <span class="control">线程周期时间</span>类似于<span class="control">实时（CPU指令）</span> ，它也使用CPU指令来计算时间，但是没有考虑线程不进行实际工作的时间。</p>        <aside class="note " rel="e5b8cfc3" id="4e4e11b5" data-title=""><p>在Windows Vista或更高版本上可用。</p></aside>    </div>    <div class="chapter"><h2 id="example" data-toc="Profiling_Guidelines__Setting_the_Right_Meter_Kind#example">例</h2>        <p id="758dec61">若要查看实时和线程时间之间的差异，请考虑以下示例。某些功能执行10秒钟。它正在等待网络中的某些数据8秒钟。并且它正在处理数据，而无需休眠或等待剩余的2秒钟。此功能的实时时间为10秒。此功能的线程时间为2秒。</p>        <p id="d9ae33b4">通常，在跟踪性能分析中，由于操作系统的限制，实时测量比线程时间测量快得多（快10倍）。如果使用采样分析，则两种时间的测量消耗相同的开销。</p>    </div>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年9月19日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Profiling_Guidelines__Choosing_the_Right_Profiling_Mode.html">分析类型</a> <a class="navigation-links__next" href="Concurrency_Profiling_Timeline_.html">时间轴分析</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>