<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><meta content="&#xA;        dotTrace tutorial, .NET C# performance profiling tutorial, .NET boosting improving performance,&#xA;        .NET application performance management, ASP.NET performance monitorings, SQL requests performance,&#xA;        HTTP requests performance&#xA;    " name="description" data-skip-index="skip"><title>Get Started with Timeline Profiling - Help | dotTrace</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Get_Started_with_Timeline_Profiling_(Basic)" data-disqus-id="Get_Started_with_Timeline_Profiling_(Basic)_dt"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search dotTrace Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>dotTrace 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="secondary" value="rs">ReSharper 2.x/IntelliJ IDEA</option><option data-group="primary" value="vs">Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Get_Started_with_Timeline_Profiling_(Basic)" id="Get_Started_with_Timeline_Profiling_(Basic).xml">Get Started with Timeline Profiling</h1>        <p id="8abffea2">        Unlike "classic" <a href="Performance_Profiling.html">performance profiling</a>, during timeline profiling        dotTrace collects        temporal call stack and thread state data. You get the same data about call times, but bound to a timeline. This        way, you can analyze not only typical "what is the slowest method?" issues, but also the ones where the order of        events does matter, such as        UI freezes, excessive garbage collections, uneven workload distribution, insufficient file        I/O, and so on.    </p>    <div class="chapter"><h2 id="1542ea8a" data-toc="Get_Started_with_Timeline_Profiling_(Basic)#1542ea8a">Running the profiler and getting snapshots</h2>        <p id="cd8e8e9a">            To start timeline profiling, simply choose the            <span class="control">Timeline</span>            profiling type when <a href="Configuring_Profiling_Session.html">configuring a session</a>.        </p>        <p id="c51809c6">            The process of gathering snapshots is absolutely identical to the            <a href="Get_Started_with_Performance_Viewer.html#get_snapshots">one during performance                profiling</a>.            You simply click the <span class="control">Get Snapshot and Wait</span> button during the application execution.            To analyze            collected timeline profiling snapshots, you should use a separate dotTrace component called            <a href="Timeline_Viewer_Concepts.html">Timeline Viewer</a>.        </p>    </div>    <div class="chapter"><h2 id="83f314df" data-toc="Get_Started_with_Timeline_Profiling_(Basic)#83f314df">First look at the timeline user interface</h2>        <aside class="tip sideblock" data-title="" rel="83f314df" id="4a8014fd">            <p id="08d626a2">dotTrace offers two ways of analyzing timeline profiling results:                <ul class="list _ul"><li class="list__item" id="724d4037"><p>Right in Visual Studio, using the <span class="control">Performance Profiler</span> tool window.                    </p></li><li class="list__item" id="f5a8caca"><p>Using the standalone Timeline Viewer application.</p></li></ul>                From the point of user experience, these two counterparts are almost identical with                <a href="Analyzing_Concurrency_Profiling_Results_Timeline_.html#timeline-viewer-integrated-into-visual-studio">minimal differences</a>.            </p>            <p id="d435bc5b">                In this tutorial, we will use Timeline Viewer.                Nevertheless, all steps of the tutorial can be reproduced in the                <span class="control">Performance Profiler</span>                tool window in Visual Studio as well.            </p>        </aside>        <p id="4bdcda19">            Let's make a little digression and take a look at the user interface of            Timeline Viewer.        </p>        <figure><img alt="timeline first look" title="timeline first look" src="/help/img/dotnet/2019.2/timeline_first_look.png" id="9b9717e0" width="800" height="450"></figure>        <p id="125b72c3">            The analysis workflow in the viewer is quite simple: all you do is slice and dice the collected temporal            data using filters.        </p>        <p id="a97c70e8">            So, where are the filters? Actually, almost all UI elements you see on the screen not only display data but            also            allow applying specific filters. The result of filters' work is always a set of time intervals or            point events selected by a specific condition. For example, clicking            <span class="control">Events | File Operations</span>            will tell dotTrace to <i id="2dc15ea9">Select all time intervals on all threads where the application performed file I/O            operations</i>.            Clicking on the <span class="control">Main</span> thread in the            <span class="control">Threads</span>            list will            <i id="d18f9291">Select lifetime of the Main thread</i>.        </p>        <p id="74c2b889">            Of course, filters can be chained together. If you activate two filters mentioned above one after another,            you will get the resulting filter: <i id="5007ad0b">Select all time intervals where the Main thread performed file I/O            operations</i>.            By carefully combining filters, you can investigate almost every aspect of your application.        </p>    </div>    <div class="chapter"><h2 id="3ea0eb75" data-toc="Get_Started_with_Timeline_Profiling_(Basic)#3ea0eb75">How to</h2>        <p id="ddc91114">            Now let's take a look at the most important Timeline Viewer use cases. In this section, you will find how            to:        </p>        <ul class="list" data-skip-index="skip"><li class="list__item"><a href="#cpu">Find and select an interval with high CPU usage</a></li><li class="list__item"><a href="#call_tree">Find the slowest method and see its call tree</a></li><li class="list__item"><a href="#subsystems">Quickly understand what's going on in a method</a></li><li class="list__item"><a href="#backtraces">See method's parent calls</a></li><li class="list__item"><a href="#find_by_name">Find a method by its name</a></li><li class="list__item"><a href="#ui_freeze">Find the cause of a UI freeze</a></li><li class="list__item"><a href="#allocation">Find the cause of excessive memory allocation</a></li><li class="list__item"><a href="#http">Trace an HTTP request</a></li></ul>        <div class="chapter"><h3 id="cpu" data-toc="Get_Started_with_Timeline_Profiling_(Basic)#cpu">Find and select an interval with high CPU usage</h3>            The intervals with high CPU usage are of the main interest when you need to evaluate the overall            application performance and find methods with the highest own time. You can quickly find and            select such intervals using the            <a href="Process_Overview.html">Process overview</a>            diagram:            <figure data-theme="light" id="f70c2b00" width="960"><img class="js-gif" src="/help/img/dotnet/2019.2/find_cpu_usage.png" data-gif-src="/help/img/dotnet/2019.2/find_cpu_usage.animated.gif" width="960" style="width:960px;"></figure>        </div>        <div class="chapter"><h3 id="call_tree" data-toc="Get_Started_with_Timeline_Profiling_(Basic)#call_tree">Find the slowest method and see its call tree</h3>            Once you found the time interval you are interested in, the next step is to find            the slowest method on this interval and examine method's call tree. The latter will help you to identify            "why the method is slow" or "what exact child calls of the method occupy most of the time".            You can perform both operations by using the <span class="control">Call Stack</span> window            that consists of the <a href="Plain_List.html">Methods and Subsystems</a> list (shows methods with            the highest own/total time on the interval) and            <a href="Call_Tree.html">Call Tree</a>:            <figure data-theme="light" id="86e1aa8e" width="960"><img class="js-gif" src="/help/img/dotnet/2019.2/slowest_method_call_tree.png" data-gif-src="/help/img/dotnet/2019.2/slowest_method_call_tree.animated.gif" width="960" style="width:960px;"></figure>        </div>        <div class="chapter"><h3 id="subsystems" data-toc="Get_Started_with_Timeline_Profiling_(Basic)#subsystems">Quickly understand what's going on in a method</h3>            Since the version 2017.1, Timeline Viewer offers the super-helpful            <a href="Subsystems.html">Subsystems</a>            feature. The purpose of Subsystems is to quickly answer the main question “What the heck is going on in my            app?”, along with more specific questions like “What causes the performance drop?” or “What allocates so            much memory?”. Does the performance drop relate to file operations, JIT, strings processing, or            just some excessive work in my code?            The Subsystems filter is the single place that shows you how time on the selected time            interval is distributed among various activities. In the example below, the Subsystems bar            shows that the main time in the method is occupied by lock contention:            <br>            <figure data-theme="light" id="d44de28b" width="960"><img class="js-gif" src="/help/img/dotnet/2019.2/going_on_method.png" data-gif-src="/help/img/dotnet/2019.2/going_on_method.animated.gif" width="960" style="width:960px;"></figure>        </div>        <div class="chapter"><h3 id="backtraces" data-toc="Get_Started_with_Timeline_Profiling_(Basic)#backtraces">See method's parent calls</h3>            When examining a problematic method, it's important not only to check its child calls but also            understand how the method is called by itself.            For this purpose, you can switch <span class="control">Call Tree</span> to the            <a href="Call_Tree.html#backtraces">Backtraces</a>            mode. In this mode, you can see the execution            path up to the first method in the stack (so, in some sense, <span class="control">Backtraces</span> is the inverted            <span class="control">Call Tree</span>):            <br>            <figure data-theme="light" id="578b95b4" width="960"><img class="js-gif" src="/help/img/dotnet/2019.2/parent_calls.png" data-gif-src="/help/img/dotnet/2019.2/parent_calls.animated.gif" width="960" style="width:960px;"></figure>        </div>        <div class="chapter"><h3 id="find_by_name" data-toc="Get_Started_with_Timeline_Profiling_(Basic)#find_by_name">Find a method by its name</h3>            Sometimes, you need to check the performance of some particular method: how long does it take,            where it is called on the timeline exactly, and so on. In this case, you can find the method you're            interested in by its name. For instance, in the example below, we'll find the            <code class="code">Factorial</code>            method:            <br>            <figure data-theme="light" id="dedb1869" width="960"><img class="js-gif" src="/help/img/dotnet/2019.2/find_by_name.png" data-gif-src="/help/img/dotnet/2019.2/find_by_name.animated.gif" width="960" style="width:960px;"></figure>            <p id="b18035db">                Note that right after Timeline Viewer finds the method, it also automatically applies the filter                by this method.            </p>        </div>        <div class="chapter"><h3 id="ui_freeze" data-toc="Get_Started_with_Timeline_Profiling_(Basic)#ui_freeze">Find the cause of a UI freeze</h3>            The analysis of UI freezes is the field where dotTrace shows its best. The intervals where            the GUI of your application freezes are detected automatically. Typically, all you need is select            a UI freeze and examine the <a href="Plain_List.html">Methods and Subsystems</a> list:            <br>            <figure data-theme="light" id="4102a906" width="960"><img class="js-gif" src="/help/img/dotnet/2019.2/ui_freeze_cause.png" data-gif-src="/help/img/dotnet/2019.2/ui_freeze_cause.animated.gif" width="960" style="width:960px;"></figure>        </div>        <div class="chapter"><h3 id="allocation" data-toc="Get_Started_with_Timeline_Profiling_(Basic)#allocation">Find the cause of excessive memory allocation</h3>            The excessive memory allocation, or more correctly, its consequence in the form of garbage collection            may have a great impact on application performance. Therefore, it's very important for performance analysis            to understand the origin of memory allocations in your application.            The example below shows how to use the <a href="Memory_Allocation.html">Memory Allocation</a> event to            determine            methods and subsystems that allocate the most memory:            <br>            <figure data-theme="light" id="bad10f91" width="960"><img class="js-gif" src="/help/img/dotnet/2019.2/memory_allocation.png" data-gif-src="/help/img/dotnet/2019.2/memory_allocation.animated.gif" width="960" style="width:960px;"></figure>        </div>        <div class="chapter"><h3 id="http" data-toc="Get_Started_with_Timeline_Profiling_(Basic)#http">Trace an HTTP request</h3>            The ability to trace an HTTP request is very important when analyzing performance drawbacks            in a web application. dotTrace allows you to trace a transaction in the same way as in any            Application Performance Management (APM) system, i.e. you can filter requests to particular URLs, see            HTTP methods behind them, as well as all operations your server does in order to process the            request, like SQL transactions or .NET code. Moreover, dotTrace has a significant advantage            over APM systems as it provides full-fledged call tree analysis:            <br>            <figure data-theme="light" id="616c0dd4" width="960"><img class="js-gif" src="/help/img/dotnet/2019.2/http_request_tracing.png" data-gif-src="/help/img/dotnet/2019.2/http_request_tracing.animated.gif" width="960" style="width:960px;"></figure>        </div>    </div><div class="last-modified" data-skip-index="skip">Last modified: 19 September 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Get_Started_with_Performance_Viewer.html">Get Started with Performance Profiling</a><a class="navigation-links__next" href="Get_Started_with_Timeline_Viewer.html">Find the Cause of a UI Freeze</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>