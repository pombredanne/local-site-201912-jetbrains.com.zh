<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta name="robots" content="noindex"></meta><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><title>Hub 2.0 Help :: Upgrade with an MSI Distribution</title><link rel="stylesheet" href="/help/app/app.css"></head><body data-id="Upgrade-with-an-MSI-Distribution"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><div class="wrapper"><section class="panel _nav"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search Hub Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header"><div class="container"><h3>Hub 2.0 Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="false"><div class="navigation-links _top"><a class="navigation-links__prev" href="Upgrade-with-a-ZIP-Distribution.html">Upgrade with a ZIP Distribution</a><a class="navigation-links__next" href="Starting-and-Stopping-Hub.html">Stop and Start the Hub Service</a></div><h1>Upgrade with an MSI Distribution</h1><a name="d77663e3"></a><p>You can use the MSI distribution to upgrade an existing Hub installation that was installed
        with an MSI or ZIP distribution as a Windows Service.</p><a name="d77663e6"></a><p>The following software is bundled with the Hub MSI distribution:</p><ul class="list _ul"><li class="list__item"><a name="d77663e11"></a>Jetty servlet engine and HTTP server</li><li class="list__item"><a name="d77663e14"></a>Java SE Runtime Environment 8 x64</li></ul><a name="d77663e18"></a><p>The MSI distribution does not include JRE x86.
        If you want to install Hub in an x86 environment, you will need to download and install the Java Runtime Environment that is compatible with your operating system.</p><a name="d77663e21"></a><p>The MSI installer requires .NET Framework version 2.0 or later.</p><ul class="list _ul"><li class="list__item"><a name="d73166e27"></a><a href="#Upgrade_MSI">Upgrade an MSI Installation</a></li><li class="list__item"><a name="d73166e30"></a><a href="#UpgradingZipWithMSI">Upgrade a ZIP Installation with an MSI Distribution</a></li><li class="list__item"><a name="d73166e33"></a><a href="#troubleshooting">Troubleshooting</a></li><li class="list__item"><a name="d73166e36"></a><a href="#report-a-problem">Report a Problem with the Upgrade Installation</a></li></ul><a name="d77663e34"></a><h2>Prerequisites</h2>
        <a name="d77663e36"></a><p>Before you upgrade, <a name="d77663e38"></a><a href="Backup-Hub-1-0.html"><span>create a backup of your current database</span></a>.
            Hub does not provide forward database compatibility.
            Your database is migrated to the format that is compatible with the latest version during the upgrade procedure.
            This means that you cannot revert to a previous version and continue to use the database that was processed during the upgrade.</p>
        <a name="d77663e42"></a><p>Copy the backup of your current database to a secure location just in case you encounter problems with the upgrade and need to
            roll back to the previous version.</p>
    <a name="Upgrade_MSI"></a><h2>Upgrade an MSI Installation</h2>
        <a name="d77663e48"></a><p>If your Hub service was previously installed using an MSI distribution,
            you can use the MSI distribution to upgrade to the latest version of Hub.</p>
        <a name="d77663e51"></a><p>The Windows Installer Package handles all of the following upgrade procedures automatically:</p>
        <ul class="list _ul"><li class="list__item"><a name="d77663e56"></a>Stops the currently running service.</li><li class="list__item"><a name="d77663e59"></a>Uninstalls the previous version.</li><li class="list__item"><a name="d77663e62"></a>Installs the new version.</li><li class="list__item"><a name="d77663e65"></a>Restarts the service.</li></ul>

        <a name="d77663e69"></a><a name="dynaProc0"></a><section class="procedure-steps"><h2>To upgrade an existing MSI installation:</h2><ol class=".list _decimal"><li class="list__item">Download the MSI distribution from the <a name="d77663e73"></a><a href="/hub/download/" data-external="true"><span>JetBrains website</span></a>.</li><li class="list__item">Open the Windows Installer Package (MSI file).
                <ul class="list _ul"><li class="list__item"><a name="d77663e81"></a>The <a name="d77663e83"></a><span class="control">JetBrains Hub 2.0 Setup Wizard</span> opens.</li></ul></li><li class="list__item">Follow the instructions in the setup wizard.
                <ul class="list _ul"><li class="list__item"><a name="d77663e92"></a>When the setup wizard is finished, the web-based Configuration Wizard opens in your default browser.
                        <a name="d77663e94"></a><p>If you do not have a web browser installed on the host machine, open the URL that is provided by the setup wizard in a web browser on another workstation.</p>
                    </li></ul>
            </li><li class="list__item">The Configuration Wizard gives you the following options to continue with the upgrade:
                <ul class="list _ul"><li class="list__item"><a name="d77663e104"></a>Upgrade using the settings that were detected in the previous installation.</li><li class="list__item"><a name="d77663e107"></a>Select a different upgrade source. Use this option when you have another backup of your Hub database in a different location or
                        want to use the location of another Hub installation as the upgrade source.</li><li class="list__item"><a name="d77663e110"></a>Discard the detected settings and perform a clean installation.</li></ul>
                <figure><a class="lightbox" href="/help/img/hub/2.0/upgradeSourceMSI.png"><img alt="upgradeSourceMSI" width="351" height="459" title="upgradeSourceMSI" src="/help/img/hub/2.0/upgradeSourceMSI_thumbnail.png"></a></figure>
            </li><li class="list__item">If you select a different upgrade source, verify that the service user account <a name="d77663e119"></a><span class="control">JetBrainsHub</span> has full access permissions to all of the directories that are displayed in the wizard.
                This account is created by the installer to run the Windows service.
                If you continue without granting access to the <a name="d77663e122"></a><span class="control">JetBrainsHub</span> account, you encounter an error.</li><li class="list__item">Once you have selected the settings you want to use for the upgrade, verify the basic system settings:

                <table class="" width="100%" id="ConfigWizSystemSettings"><thead><tr id="d77663e131" class="ijRowHead"><a name="d77663e131"></a><th width="20%"><a name="d77663e133"></a>Setting</th><th><a name="d77663e136"></a>Description</th></tr></thead><tbody><tr id="d77663e140" class="ijRowOdd"><a name="d77663e140"></a><td><a name="d77663e142"></a><a name="d77663e143"></a><span class="control">Base URL</span></td><td><a name="d77663e146"></a>The URL where end users access Hub.</td></tr><tr id="d77663e150" class="ijRowEven"><a name="d77663e150"></a><td><a name="d77663e152"></a><a name="d77663e153"></a><span class="control">Application Listen Port</span></td><td><a name="d77663e156"></a>The port your Hub server listens to after installation.</td></tr><tr id="d77663e160" class="ijRowOdd"><a name="d77663e160"></a><td><a name="d77663e162"></a><a name="d77663e163"></a><span class="control">Language</span></td><td><a name="d77663e166"></a>The default language that is shown in the user interface.</td></tr><tr id="d77663e170" class="ijRowEven"><a name="d77663e170"></a><td><a name="d77663e172"></a><a name="d77663e173"></a><span class="control">Data Directory Location</span></td><td><a name="d77663e176"></a>The directory where Hub stores content data.</td></tr><tr id="d77663e181" class="ijRowOdd"><a name="d77663e181"></a><td><a name="d77663e183"></a><a name="d77663e184"></a><span class="control">Backup Location</span></td><td><a name="d77663e187"></a>The directory where Hub stores backups of the database.</td></tr><tr id="d77663e191" class="ijRowEven"><a name="d77663e191"></a><td><a name="d77663e193"></a><a name="d77663e194"></a><span class="control">Logs Location</span></td><td><a name="d77663e197"></a>The directory where Hub stores log files.</td></tr><tr id="d77663e201" class="ijRowOdd"><a name="d77663e201"></a><td><a name="d77663e203"></a><a name="d77663e204"></a><span class="control">Temp Location</span></td><td><a name="d77663e207"></a>The directory where Hub stores product-specific temporary files.</td></tr></tbody></table>
                <a name="d77663e212"></a><p>To change the location for any of these file types, click the <a name="d77663e214"></a><span class="control">Change</span> button and select a new location.</p>
            </li><li class="list__item">When done, click <a name="d77663e221"></a><span class="control">Upgrade</span>.
                <ul class="list _ul"><li class="list__item"><a name="d77663e226"></a>The configuration is applied to your Hub server.</li></ul>
                <a name="d77663e230"></a><p>Do not close the page in the browser until the setup is complete.
                    When the Hub server is ready, you are redirected to the login page.</p></li><li class="list__item">Enter the credentials for the administrator account and click the <a name="d77663e235"></a><span class="control">Log in</span> button.
                <ul class="list _ul"><li class="list__item"><a name="d77663e240"></a>Hub opens to the <a name="d77663e242"></a><span class="control">Users</span> page.</li></ul>
                <a name="d77663e247"></a><p>That's it. Your Hub instance is upgraded and ready for use.</p>
            </li></ol></section>
    <a name="UpgradingZipWithMSI"></a><h2>Upgrade a ZIP Installation with an MSI Distribution</h2>

        <a name="d77663e255"></a><p>You can upgrade an existing installation that was installed with a ZIP distribution and change the installation type to MSI at the same
            time.</p>
        <a name="d77663e258"></a><p>Before you upgrade, <a name="d77663e260"></a><a href="Backup-Hub-1-0.html"><span>create a backup of your current database</span></a>.</p>

        <aside class="note sideblock">
            <a name="d77663e266"></a><p>All of the commands in this procedure are for Linux and OS X. If you are upgrading Hub on a Windows server,
                replace <code class="code" data-lang="Java">.sh</code> with <code class="code" data-lang="Java">.bat</code> and use the backslash.
            </p>
        </aside>

        <a name="d77663e276"></a><a name="dynaProc1"></a><section class="procedure-steps"><h2>To upgrade a ZIP installation with the MSI distribution:</h2><ol class=".list _decimal"><li class="list__item">Download the MSI distribution from the <a name="d77663e280"></a><a href="/hub/download/" data-external="true"><span>JetBrains website</span></a>.</li><li class="list__item">Stop the Hub service. For specific instructions, see <a name="d77663e286"></a><a href="Starting-and-Stopping-Hub.html"><span>Stop and Start the Hub Service</span></a>.</li><li class="list__item">Use your operating system tools to verify that all Java processes that are launched by Hub are no longer running.
                If there are Hub-related Java processes that are still running, kill the outstanding process trees.</li><li class="list__item">Clear out your <code class="code" data-lang="Java">&lt;hub_home&gt;</code> directory.
                <ul class="list _ul"><li class="list__item"><a name="d77663e299"></a>For a ZIP installation, the <code class="code" data-lang="Java">&lt;hub_home&gt;</code> directory is the location where the ZIP distribution was unpacked during installation.</li></ul>
                <a name="d77663e306"></a><p>We recommend that you perform the following steps:</p>
                <ul class="list _ul"><li class="list__item"><a name="d77663e311"></a>Rename the existing <code class="code" data-lang="Java">&lt;hub_home&gt;</code> directory to <code class="code" data-lang="Java">Hub_old</code> (you can use another name).</li><li class="list__item"><a name="d77663e320"></a>Create a new <code class="code" data-lang="Java">&lt;hub_home&gt;</code> directory in the same location as the previous installation.</li></ul></li><li class="list__item">Open the Windows Installer Package (MSI file).
                <ul class="list _ul"><li class="list__item"><a name="d77663e331"></a>The <a name="d77663e333"></a><span class="control">JetBrains Hub 2.0 Setup Wizard</span> opens.</li></ul></li><li class="list__item">If the setup wizard detects data and configuration files from a previously installed version, select the recommended option to perform a clean installation.
                <a name="d77663e341"></a><p>The setup wizard displays this option when an earlier version of the MSI distribution was installed and later uninstalled on the server.</p>
                <a name="d77663e344"></a><p>When the setup wizard is finished, the web-based Configuration Wizard opens in your default browser.</p>
                <a name="d77663e347"></a><p>If you do not have a web browser installed on the host machine, open the URL that is provided by the setup wizard in a web browser on another workstation.</p>
            </li><li class="list__item">In the <a name="d77663e353"></a><span class="control">Configuration Wizard</span>, click <a name="d77663e356"></a><span class="control">Upgrade</span>.
                <figure><a class="lightbox" href="/help/img/hub/2.0/upgradeHub.png"><img alt="upgradeHub" width="274" height="154" title="upgradeHub" src="/help/img/hub/2.0/upgradeHub_thumbnail.png"></a></figure>
            </li><li class="list__item">On the <a name="d77663e364"></a><span class="control">Select Upgrade Source</span> page, click the <a name="d77663e367"></a><span class="control">Select</span> button and select an upgrade source.
                <figure><a class="lightbox" href="/help/img/hub/2.0/upgradeHubSource.png"><img alt="upgradeHubSource" width="360" height="284" title="upgradeHubSource" src="/help/img/hub/2.0/upgradeHubSource_thumbnail.png"></a></figure>
                <ul class="list _ul"><li class="list__item"><a name="d77663e374"></a>Select the location of the previous ZIP installation as the upgrade source.<br>
                        or</li><li class="list__item"><a name="d77663e379"></a>Select the location where a backup copy of your database is stored as a ZIP file or unzipped backup.</li></ul></li><li class="list__item">Verify that the service user account <a name="d77663e385"></a><span class="control">JetBrainsHub</span> has full access permissions to all of the directories that are displayed in the wizard.
                This account is created by the installer to run the Windows service.
                If you continue without granting access to the <a name="d77663e388"></a><span class="control">JetBrainsHub</span> account, you encounter an error.</li><li class="list__item">When done, click <a name="d77663e394"></a><span class="control">Next</span>.</li><li class="list__item">Continue from step 6 of the upgrade procedure as described for the <a name="d77663e400"></a><a href="#Upgrade_MSI"><span>MSI Installation</span></a>.</li></ol></section>

         

     <a name="troubleshooting"></a><h2>Troubleshooting</h2>

        <a name="d73166e416"></a><p>If you encountered a problem and the installation failed, see if any of the following conditions apply.</p>

        <table class="" width="100%" id="d73166e419"><thead><tr id="d73166e421" class="ijRowHead"><a name="d73166e421"></a><th width="10%"><a name="d73166e423"></a>Condition</th><th><a name="d73166e426"></a>The upgrade to Hub 2.5 fails.
                    The Hub service is not started.
                    The database of your existing installation is not upgraded to the latest version.
                    The installer rolls back to the previously installed version.</th></tr></thead><tbody><tr id="d73166e430" class="ijRowOdd"><a name="d73166e430"></a><td><a name="d73166e432"></a>Cause</td><td><a name="d73166e435"></a>Undetermined.</td></tr><tr id="d73166e439" class="ijRowEven"><a name="d73166e439"></a><td><a name="d73166e441"></a>Solution</td><td><a name="d73166e444"></a><ol class="list _decimal"><li class="list__item"><a name="d73166e447"></a>Run the MSI installer with verbose logging enabled. In the <a name="d73166e449"></a><span class="control">Command Prompt</span> window, enter the following command:<br>
                        <code class="code" data-lang="xml">msiexec /i hub-xxxxx.msi /l*v install.txt</code>
                        <a name="d73166e457"></a><p>The installer writes the verbose log data to a file named <code class="code" data-lang="Java">install.txt</code> and saves it in your current directory.</p></li><li class="list__item"><a name="d73166e463"></a>Review the contents of the <code class="code" data-lang="Java">install.txt</code> log file.
                        The failure report begins with the string <code class="code" data-lang="Java">Return value 3</code>.</li><li class="list__item"><a name="d73166e472"></a>If the log file indicates that there was a service startup failure, check the Hub log files for errors.
                        The default location of the Hub log files is <code class="code" data-lang="Java">%programdata%\JetBrains\Hub\logs</code></li><li class="list__item"><a name="d73166e477"></a>If you can identify and correct the problem yourself, repeat the upgrade procedure.
                        Otherwise, <a name="d73166e479"></a><a href="#report-a-problem"><span>create an issue in the Hub project</span></a>.</li></ol></td></tr></tbody></table>
        <table class="" width="100%" id="d73166e486"><thead><tr id="d73166e488" class="ijRowHead"><a name="d73166e488"></a><th width="10%"><a name="d73166e490"></a>Condition</th><th><a name="d73166e493"></a>The MSI installer successfully upgraded the installation to the new version, but the Configuration Wizard fails to open or reports an error.
                    The Hub service fails to start.</th></tr></thead><tbody><tr id="d73166e497" class="ijRowOdd"><a name="d73166e497"></a><td><a name="d73166e499"></a>Cause</td><td><a name="d73166e502"></a><ul class="list _ul"><li class="list__item"><a name="d73166e505"></a>The specified port is occupied by another service.</li><li class="list__item"><a name="d73166e508"></a>You do not have access permissions to update files and folders in the installation directory.</li></ul>
                </td></tr><tr id="d73166e514" class="ijRowEven"><a name="d73166e514"></a><td><a name="d73166e516"></a>Solution</td><td><a name="d73166e519"></a><ol class="list _decimal"><li class="list__item"><a name="d73166e522"></a>Check the log files, particularly <code class="code" data-lang="Java">service.log</code>, for errors.
                        The default location of the log files is <code class="code" data-lang="Java">%programdata%\JetBrains\Hub\logs</code></li><li class="list__item"><a name="d73166e530"></a>If you can identify and correct the problem (for example, change the port number or obtain access to the installation directory), repeat the upgrade procedure as follows.
                        <ul class="list _ul"><li class="list__item"><a name="d73166e534"></a>Perform a clean installation of the new version.</li><li class="list__item"><a name="d73166e537"></a>On the <a name="d73166e539"></a><span class="control">Upgrade Source</span> page, select a backup copy of the database from the previous version.</li></ul>
                        Otherwise, <a name="d73166e544"></a><a href="#report-a-problem"><span>create an issue in the Hub project</span></a>.</li></ol></td></tr></tbody></table>

        <table class="" width="100%" id="d73166e551"><thead><tr id="d73166e553" class="ijRowHead"><a name="d73166e553"></a><th width="10%"><a name="d73166e555"></a>Condition</th><th><a name="d73166e558"></a>Clean installation offered instead of upgrade.</th></tr></thead><tbody><tr id="d73166e562" class="ijRowOdd"><a name="d73166e562"></a><td><a name="d73166e564"></a>Cause</td><td><a name="d73166e567"></a>In this case, the previous version of Hub was installed with another administrator account. If you continue with the clean installation, you end up with two conflicting installations on the same machine. The upgraded service fails to start.</td></tr><tr id="d73166e571" class="ijRowEven"><a name="d73166e571"></a><td><a name="d73166e573"></a>Solution</td><td><a name="d73166e576"></a><ol class="list _decimal"><li class="list__item"><a name="d73166e579"></a>Log in to the previous version of Hub and create a backup of your database.</li><li class="list__item"><a name="d73166e582"></a>Either ask the administrator who performed the installation to uninstall the previous version or reset the administrator account credentials and uninstall the previous version yourself. Alternatively, you can move the previous installation to another server or switch the Hub service off.</li><li class="list__item"><a name="d73166e585"></a>Perform a clean installation of Hub 2.0. Select the option to remove the previous configuration.</li><li class="list__item"><a name="d73166e588"></a>In the Configuration Wizard, select the backup of the previous version as the upgrade source.</li></ol></td></tr></tbody></table>
    <a name="report-a-problem"></a><h2>Report a Problem with the Upgrade Installation</h2>
        <a name="d73166e597"></a><p>If you continue to experience problems with the upgrade installation:</p>
        <ol class="list _decimal"><li class="list__item"><a name="d73166e602"></a><a name="d73166e603"></a><a href="https://youtrack.jetbrains.com/issues/JPS" data-external="true"><span>Create an issue in the Hub project</span></a>.</li><li class="list__item"><a name="d73166e607"></a>Attach the following files to help us investigate and fix the issue:
                <ul class="list _ul"><li class="list__item"><a name="d73166e611"></a>Compress the contents of the <code class="code" data-lang="Java">logs</code> directory and attach the ZIP archive.
                        The default location of this directory is <code class="code" data-lang="Java">%programdata%\JetBrains\Hub\logs</code>.
                        <a name="d73166e619"></a><p>If the location of this directory was changed in the Configuration Wizard, you can find the actual location in the <code class="code" data-lang="Java">logs-dir</code> property of the <code class="code" data-lang="Java">%programdata%\JetBrains\Hub\conf\internal\bundle.properties</code> file.</p></li><li class="list__item"><a name="d73166e628"></a>Compress the contents of the <code class="code" data-lang="Java">conf</code> directory and attach the ZIP archive.
                        The default location of this directory is <code class="code" data-lang="Java">%programdata%\JetBrains\Hub\conf</code>.</li><li class="list__item"><a name="d73166e637"></a>Attach the <code class="code" data-lang="Java">install.txt</code>&nbsp;file.</li></ul></li></ol>
        <a name="d73166e645"></a><p>Our customer support engineers will investigate the issue and work with you to resolve the problem.</p>
    <div class="last-modified">Last modified: 20 September 2016 </div></article><div id="disqus_thread"></div></div></section></main></div><script src="/help/app/app.js"></script></body></html>