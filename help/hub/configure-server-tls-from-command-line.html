<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Configure Built-in TLS from the Command Line - Help | Hub</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="server-tls-from-command-line"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search Hub Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>Hub 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="server-tls-from-command-line" id="configure-server-tls-from-command-line.xml">Configure Built-in TLS from the Command Line</h1>    <p id="0da3ae16">The instructions on this page show you how to configure built-in TLS for an existing installation using command-line arguments.</p>    <p id="d32fffa6">Using the command line, you can switch between the following connection modes:</p>    <div class="table-wrapper"><table width="100%" id="e86b40ac"><thead><tr id="8aec062a" class="ijRowHead"><th id="1982db66" width="20%"><p>Mode</p></th><th id="63ba4e2c"><p>Description</p></th></tr></thead><tbody><tr id="032d6178" class="ijRowOdd"><td id="bd430abc"><p>HTTP</p></td><td id="28518575"><p id="9edfa988">The default HTTP mode. TLS is disabled.</p>            <p id="0e23d074">HTTP mode is only suitable for test installations or when connections to Hub are routed through an SSL-terminating reverse proxy server.</p></td></tr><tr id="f9c2bef6" class="ijRowEven"><td id="743ed297"><p>HTTPS</p></td><td id="afe3dbc9"><p id="c7ed9851">A secure HTTPS mode. TLS is enabled.</p>                <p id="4d1eb06f">The configuration parameters let you secure your server connections using the following file formats:</p>                <ul class="list _ul"><li class="list__item" id="d2e7cea4"><p>A keystore that contains private key/certificate data in <a href="https://en.wikipedia.org/wiki/Keystore" data-external="true" target="_blank" rel="noopener noreferrer">JKS</a> or <a href="https://en.wikipedia.org/wiki/PKCS_12" data-external="true" target="_blank" rel="noopener noreferrer">PKCS #12</a> format.</p></li><li class="list__item" id="32221ef8"><p>A private key, certificate, and (optional) certificate chain as separate files in <a href="https://en.wikipedia.org/wiki/Privacy-Enhanced_Mail" data-external="true" target="_blank" rel="noopener noreferrer">PEM</a> format.</p></li></ul>            </td></tr></tbody></table></div>    <p id="20b189b5">To switch modes, stop Hub and run the <code class="code">configure</code> command.        The values that you specify for each of the parameters in the command define your configuration of choice.        See below for detailed instructions and a complete list of properties for each configuration.</p>    <div class="chapter"><h2 id="switch-to-http-mode" data-toc="server-tls-from-command-line#switch-to-http-mode">Switching to HTTP Mode</h2>        <p id="bc114b02">When you run Hub with plain HTTP mode, the connections between web browsers and your server are not secured over SSL/TLS.            For security purposes, strongly advise against using plain HTTP.</p>        <p id="c97227c1">The one case where it's safe to switch from HTTPS mode to HTTP is when you modify your server environment to use an SSL-terminating reverse proxy.            In this case, you switch Hub to run in HTTP mode. Instead of using built-in TLS, you configure the reverse proxy to secure your server traffic.</p>        <section class="procedure-steps"><h3 id="HTTP">To switch to HTTP mode:</h3><ol class="list _decimal"><li class="list__item" id="df3f1ef8"><p><a href="Starting-and-Stopping-Hub.html">Stop the Hub service</a>.</p></li><li class="list__item" id="4005964a">                <p id="d72291a3">Enter the following command:</p>                <div class="code-block" data-lang="none"><code class="code-block__wrapper">&lt;hub_home&gt;/bin/hub.sh configure \
--listen-port=8080 \
[--base-url=&lt;new base URL&gt;] \
--secure-mode=disable</code></div>                <p id="bcf97ffb">If the server base URL changes as a result of switching to HTTP mode,                    use the <code class="code">--base-url=&lt;new base URL&gt;</code> parameter to set this value.</p>                <aside class="note " data-title="" rel="bcf97ffb" id="7c143016">                    <p id="abb7d248">When you change the base URL of your Hub installation, you must update the settings for integrations and connected service to use the new URL.                        This includes settings that are stored in Upsource and YouTrack.                        If you have enabled auth modules that support OAuth 2.0, you need to generate new client IDs and secrets for each third-party authorization service.</p>                </aside>                <p id="46690c6b">For more information about the parameters that are used in this command, see <a href="#configuration-parameters-new">Configuration Parameters</a>.</p>            </li><li class="list__item" id="4e2d1731"><p><a href="Starting-and-Stopping-Hub.html">Start the Hub service</a>.</p></li></ol></section>    </div>    <div class="chapter"><h2 id="switch-to-https-mode" data-toc="server-tls-from-command-line#switch-to-https-mode">Switching to HTTPS Mode</h2>        <p id="8623c033">The <code class="code">configure</code> command lets you switch from HTTP to HTTPS mode.            To enable secure HTTPS mode, you need to provide Hub with a private key and certificate.            You can supply the private key and certificate as:</p>        <ul class="list _ul"><li class="list__item" id="453ce52e"><p>A keystore that contains private key/certificate data in <a href="https://en.wikipedia.org/wiki/Keystore" data-external="true" target="_blank" rel="noopener noreferrer">JKS</a> or <a href="https://en.wikipedia.org/wiki/PKCS_12" data-external="true" target="_blank" rel="noopener noreferrer">PKCS #12</a> format.</p></li><li class="list__item" id="48d470fb"><p>A private key, certificate, and (optional) certificate chain as separate files in <a href="https://en.wikipedia.org/wiki/Privacy-Enhanced_Mail" data-external="true" target="_blank" rel="noopener noreferrer">PEM</a> format.</p></li></ul>        <p id="d428596f">Before you start, copy your secure files to a location that is available to your Hub server.</p>        <p id="958b4441">The <code class="code">configure</code> command supports different properties that are specific to these file types.            Follow the procedure that is applicable for the type of files that are available to you.</p>        <p id="2e3f372b">You can also follow these procedures if you have already configured HTTPS and simply want to apply a new certificate and private key to your Hub server.</p>        <section class="procedure-steps"><h3 id="HTTPS-keystore">To switch to HTTPS mode using an SSL keystore file:</h3><ol class="list _decimal"><li class="list__item" id="e3c6a23f"><p><a href="Starting-and-Stopping-Hub.html">Stop the Hub service</a>.</p></li><li class="list__item" id="45e79771">                <p id="155cb0e5">Run the following command:</p>                <div class="code-block" data-lang="none"><code class="code-block__wrapper">&lt;hub_home&gt;/bin/hub.sh configure \
--listen-port=443 \
[--base-url=&lt;new base URL&gt;] \
--secure-mode=tls \
--tls-server-cert-keystore-file=&lt;path-to-keystore&gt; \
--tls-server-cert-keystore-password=&lt;keystore password&gt; \
--tls-server-cert-keystore-key-alias=&lt;private key entry alias&gt; \
[--tls-server-cert-keystore-key-password=&lt;private key entry password&gt;] \
--tls-redirect-from-http=&lt;[true|false]&gt; \
[--tls-redirect-from-http-listen-port=8080]</code></div>                <ul class="list _ul"><li class="list__item" id="6017faee"><p id="1248ca1b">If the server base URL changes as a result of switching to HTTPS mode,                        use the <code class="code">--base-url=&lt;new base URL&gt;</code> parameter to set this value.</p>                        <aside class="note " data-title="" rel="1248ca1b" id="b6481cdd">                            <p id="9365f887">When you change the base URL of your Hub installation, you must update the settings for integrations and connected service to use the new URL.                                This includes settings that are stored in Upsource and YouTrack.                                If you have enabled auth modules that support OAuth 2.0, you need to generate new client IDs and secrets for each third-party authorization service.</p>                        </aside>                    </li><li class="list__item" id="59c25a1a"><p>If you are switching from HTTP to HTTPS mode, you can designate a redirect listen port.                        This non-secure port receives all HTTP requests and redirects them to the secure listen                        port. To do so, use <code class="code">tls-redirect-from-http=true</code> and                        specify a value for the <code class="code">tls-redirect-from-http-listen-port=&lt;your redirect port number&gt;</code> property.</p></li></ul>                <p id="14986228">For more information about the parameters that are used in this command, see <a href="#configuration-parameters-new">Configuration Parameters</a>.</p>            </li><li class="list__item" id="5425b04c"><p><a href="Starting-and-Stopping-Hub.html">Start the Hub service</a>.</p></li></ol></section>        <section class="procedure-steps"><h3 id="HTTPS-privateKeyAndCert">To switch to the HTTPS mode using a private key and certificate:</h3><ol class="list _decimal"><li class="list__item" id="260fe494"><p><a href="Starting-and-Stopping-Hub.html">Stop the Hub service</a>.</p></li><li class="list__item" id="74e6aaa0"><p id="11e2e2da">Run the following command:</p>                <div class="code-block" data-lang="none"><code class="code-block__wrapper">&lt;hub_home&gt;bin/hub.sh configure \
--listen-port=443 \
[--base-url=&lt;new base URL&gt;] \
--secure-mode=tls \
--tls-server-cert-key-file=&lt;path-to-private-key-file&gt; \
--tls-server-cert-file=&lt;path-to-certificate-file&gt; \
[--tls-server-cert-chain-file=&lt;path-to-certificate-chain-file&gt;]  \
--tls-redirect-from-http=&lt;[true|false]&gt; \
[--tls-redirect-from-http-listen-port=8080]</code></div>                <ul class="list _ul"><li class="list__item" id="df0ce930"><p>If the private key is encrypted, add the <code class="code">tls-server-cert-private-key-passphrase</code> property to provide the passphrase for the key.</p></li><li class="list__item" id="3f981a2f"><p>If you want to define relative paths to the certificate files, use <code class="code">tls-server-cert-key-file</code>, <code class="code">tls-server-cert-file</code>, and <code class="code">tls-server-cert-chain-file</code>.                        Set the value for the additional <code class="code">tls-server-cert-folder</code> property with the absolute path to the directory.                        Relative paths are resolved against the specified absolute path.</p></li><li class="list__item" id="a6d80aa7"><p id="b58eced2">If the server base URL changes as a result of switching to HTTPS mode,                        use the <code class="code">--base-url=&lt;new base URL&gt;</code> parameter to set this value.</p>                        <aside class="note " data-title="" rel="b58eced2" id="efde0bce">                            <p id="07ed1b7d">When you change the base URL of your Hub installation, you must update the settings for integrations and connected service to use the new URL.                                This includes settings that are stored in Upsource and YouTrack.                                If you have enabled auth modules that support OAuth 2.0, you need to generate new client IDs and secrets for each third-party authorization service.</p>                        </aside>                    </li><li class="list__item" id="f61c9ed8"><p>If you are switching from HTTP to HTTPS mode, you can designate a redirect listen port.                        This non-secure port receives all HTTP requests and redirects them to the secure listen                        port. To do so, use <code class="code">tls-redirect-from-http=true</code> and                        specify a value for the <code class="code">tls-redirect-from-http-listen-port=&lt;your redirect port number&gt;</code> property.</p></li></ul>                <p id="622bc121">For more information about the parameters that are used in this command, see <a href="#configuration-parameters-new">Configuration Parameters</a>.</p>            </li><li class="list__item" id="90356969"><p><a href="Starting-and-Stopping-Hub.html">Start the Hub service</a>.</p></li></ol></section>    </div>    <div class="chapter"><h2 id="configuration-parameters-new" data-toc="server-tls-from-command-line#configuration-parameters-new">Configuration Parameters</h2>        <p id="33c095da">The following table provides a list of parameters that you can use to configure built-in TLS.</p>        <div class="table-wrapper"><table class=" wide" width="100%" id="f659d250"><thead><tr id="6cc44e9d" class="ijRowHead"><th id="0f69900d" width="20%"><p>Property</p></th><th id="dea0e0e8" width="20%"><p>Value</p></th><th id="10d3b45e"><p>Description</p></th></tr></thead><tbody><tr id="7f6d48c9" class="ijRowOdd"><td id="fe6416e1"><p>secure-mode</p></td><td id="2e2576a2"><p><code class="code">disable</code> | <code class="code">tls</code></p></td><td id="e35078fb"><p id="85964a12">The connection mode that is applied to the Hub server.                    This property supports the following values:</p>                    <ul class="list _ul"><li class="list__item" id="5e82d4ff"><p><code class="code">disable</code> — TLS is disabled. This is the default value for this property.</p></li><li class="list__item" id="5389d025"><p><code class="code">tls</code> — TLS is enabled. </p></li></ul>                </td></tr><tr id="52ef190d" class="ijRowEven"><td id="c7a7c597"><p>listen-port</p></td><td id="a89ac1f4"></td><td id="d1fa37f2"><p>The port on which Hub listens to HTTP traffic.</p></td></tr><tr id="898e82f2" class="ijRowOdd"><td id="a021964a"><p>base-url</p></td><td id="b3bfe523"></td><td id="4d93cef0"><p id="991e360a">The URL that end users request to access your Hub installation. For example, <code class="code">https://hub.mydomain.com</code>.</p>                    <ul class="list _ul"><li class="list__item" id="63e7e52b"><p>When the value for the <code class="code">secure-mode</code> property is <code class="code">tls</code> or your Hub installation is secured behind an SSL-terminating reverse proxy server,                            the URL should begin with <code class="code">https</code>.</p></li><li class="list__item" id="e619cff6"><p>Otherwise (when running Hub using plain HTTP), the URL begins with <code class="code">http</code>.</p></li></ul>                </td></tr><tr id="03661389" class="ijRowEven"><td id="b2abace1"><p>tls-redirect-from-http</p></td><td id="54ecb3b1"><p><code class="code">true</code> | <code class="code">false</code></p></td><td id="350dcb50"><p id="13efc932">Set to true, to enable an additional port (defined by property <code class="code">tls-redirect-from-http-listen-port</code>) to accept unencrypted HTTP traffic and redirect it to a                    secure port defined by the property <code class="code">listen-port</code>.</p>                    <p id="47850707">The default value is <code class="code">false</code>.</p></td></tr><tr id="2ddac2db" class="ijRowOdd"><td id="9527c10b"><p>tls-redirect-from-http-listen-port</p></td><td id="4045abd6"></td><td id="ce8356aa"><p>Specify an additional port to accept unencrypted HTTP traffic and redirect it to a secure port                    defined by the property <code class="code">listen-port</code> (to enable this port, set the property <code class="code">tls-redirect-from-http</code> to <code class="code">true</code>).</p></td></tr><tr id="4a696617" class="ijRowEven"><td id="34566bf8"><p>tls-server-cert-folder</p></td><td id="67b3755c"></td><td id="95ce6bfd"><p id="9346b374">An (optional) absolute path to resolve relative paths defined by other command line parameters, when present.                    Relative paths to server certificate files that are specified in other properties are resolved against this directory.                    The properties that can reference relative paths are:</p>                    <ul class="list _ul"><li class="list__item" id="01ddc45c"><code class="code">tls-server-cert-key-file</code></li><li class="list__item" id="ec780365"><code class="code">tls-server-cert-file</code></li><li class="list__item" id="8cbdd250"><code class="code">tls-server-cert-chain-file</code></li><li class="list__item" id="35e22d6d"><code class="code">tls-server-cert-keystore-file</code></li></ul>                </td></tr><tr id="28283d72" class="ijRowOdd"><td id="02a55501"><p>tls-server-cert-keystore-file</p></td><td id="541fd227"></td><td id="e09153c0"><p>The location of a keystore file in either <a href="https://en.wikipedia.org/wiki/Keystore" data-external="true" target="_blank" rel="noopener noreferrer">JKS</a> or <a href="https://en.wikipedia.org/wiki/PKCS_12" data-external="true" target="_blank" rel="noopener noreferrer">PKCS #12</a> format.</p></td></tr><tr id="3d5974f4" class="ijRowEven"><td id="19915188"><p>tls-server-cert-keystore-password</p></td><td id="941bf7d3"></td><td id="caf647db"><p>Keystore integrity password</p></td></tr><tr id="28558cd6" class="ijRowOdd"><td id="e9c5788d"><p>tls-server-cert-keystore-key-alias</p></td><td id="401c4e6c"></td><td id="4b95a2a5"><p id="102f80b0">The alias of the entry in the keystore that contains the server certificate and the private key.                    If your keystore uses the <a href="https://en.wikipedia.org/wiki/PKCS_12" data-external="true" target="_blank" rel="noopener noreferrer">PKCS #12</a> format, follow these guidelines:</p>                    <ul class="list _ul"><li class="list__item" id="821e8dc0"><p>Use the value that is stored as the <code class="code">friendlyName</code> in the keystore.</p></li><li class="list__item" id="38750466"><p>If the private key and certificate pair was not marked with a <code class="code">friendlyName</code> during generation,                            use this parameter to provide the sequential number of this pair in the keystore.                            For a keystore that only contains one certificate and private key pair, set the value to <code class="code">1</code>.</p></li></ul>                </td></tr><tr id="f2de295f" class="ijRowEven"><td id="17d3e175"><p>tls-server-cert-keystore-key-password</p></td><td id="0cbe35b4"></td><td id="0c3f73d1"><p>Password that protects your server's private key entry in the keystore.</p></td></tr><tr id="d22c98c4" class="ijRowOdd"><td id="fcfeef7b"><p>tls-server-cert-key-file</p></td><td id="334b718e"></td><td id="af004e21"><p>The location of a private key (<a href="https://en.wikipedia.org/wiki/PKCS_1" data-external="true" target="_blank" rel="noopener noreferrer">PKCS #1</a> or <a href="https://en.wikipedia.org/wiki/PKCS_8" data-external="true" target="_blank" rel="noopener noreferrer">PKCS #8</a>) file, stored in <a href="https://en.wikipedia.org/wiki/Privacy-Enhanced_Mail" data-external="true" target="_blank" rel="noopener noreferrer">PEM</a> format.</p></td></tr><tr id="5e207160" class="ijRowEven"><td id="12b90ef4"><p>tls-server-cert-file</p></td><td id="b9afce6e"></td><td id="d2da2ddb"><p>The location of a certificate file, stored in <a href="https://en.wikipedia.org/wiki/Privacy-Enhanced_Mail" data-external="true" target="_blank" rel="noopener noreferrer">PEM</a> format.</p></td></tr><tr id="6fbc5873" class="ijRowOdd"><td id="c92c392c"><p>tls-server-cert-chain-file</p></td><td id="6ccd333c"></td><td id="5ac770ca"><p>The (optional) location of a file that contains the certificate chain, stored in <a href="https://en.wikipedia.org/wiki/Privacy-Enhanced_Mail" data-external="true" target="_blank" rel="noopener noreferrer">PEM</a> format.</p></td></tr><tr id="0fba0da4" class="ijRowEven"><td id="79dfa193"><p>tls-server-cert-private-key-passphrase</p></td><td id="e7943689"><p>string</p></td><td id="acd76025"><p>If you use an encrypted private key, then use this property to provide the passphrase that was used for encryption. Supported for both <a href="https://en.wikipedia.org/wiki/PKCS_1" data-external="true" target="_blank" rel="noopener noreferrer">PKCS #1</a> and <a href="https://en.wikipedia.org/wiki/PKCS_8" data-external="true" target="_blank" rel="noopener noreferrer">PKCS #8</a> formats.</p></td></tr></tbody></table></div>    </div><div class="last-modified" data-skip-index="skip">Last modified: 9 September 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="configure-server-tls-configuration-wizard.html">Configure Built-in TLS in Web-based Configuration Wizard</a><a class="navigation-links__next" href="tls-keystores-and-certificates-for-server.html">TLS Server Certificates and Keystores</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>