<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Docker安装-帮助|帮助毂</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="docker-installation"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索中心帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>Hub 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="docker-installation.xml" data-toc="docker-installation">Docker安装</h1>    <p id="5da743a4">要在Docker容器中运行中心服务的新实例：</p>    <ol class="list _decimal"><li class="list__item" id="7cf28dcb">            <a href="#pull-image">拉集线器图像</a>        </li><li class="list__item" id="86cbb31e">            <a href="#create-and-configure-directories">创建和配置目录</a>        </li><li class="list__item" id="a251c0a3">            <a href="#run-hub-service">运行Hub Docker容器</a>        </li><li class="list__item" id="85a9fe71">            <a href="#configure-new-instance">配置集线器</a>        </li></ol>    <div class="chapter"><h2 id="pull-image" data-toc="docker-installation#pull-image">拉集线器图像</h2>        <p id="f62c91ee">从<a href="https://hub.docker.com/r/jetbrains/hub/" rel="noopener noreferrer" data-external="true" target="_blank">Docker Hub存储库中</a>提取最新Hub版本的图像：</p>        <div class="code-block" data-lang="bash">docker pull jetbrains /集线器： <version>
    </version></div>        <p id="d2538c25"><code class="code"><version></code>是集线器内部版本的完整版本号。<a href="https://hub.docker.com/r/jetbrains/hub/tags/" rel="noopener noreferrer" data-external="true" target="_blank">查看可用版本的完整列表</a></p>    </div>    <div class="chapter"><h2 id="create-and-configure-directories" data-toc="docker-installation#create-and-configure-directories">创建和配置目录</h2>        <aside class="note " rel="create-and-configure-directories" id="6c05087d" data-title="">            <p id="356cf9ce">您可以跳过此步骤，而对于演示或测试运行，可以跳过下一步中显示的卷映射命令，但是不建议在生产实例中这样做。如果没有映射，则所有集线器数据将被路由到匿名容器卷，并且在删除容器时可能会意外丢失。此外，所有数据都将由Docker引擎存储在带有神秘名称的子文件夹中，从而几乎不可能定位和访问以进行将来的备份或升级。</p>        </aside>        <p id="94ebc847">集线器映像容器是有<span class="emphasis">状态的容器</span> 。因此，在运行它之前，您应该<span class="emphasis">在主机上</span>创建特定目录以存储集线器数据库，配置文件，日志，备份，并将它们作为卷传递到集线器容器。否则，您有在删除容器时丢失集线器数据的风险。</p>        <p id="357d0050">这些目录是：</p>        <ul class="list _bullet"><li class="list__item" id="5ba966d5"><p><code class="code">data</code> —集线器存储其数据库的目录。对于新安装，此目录必须为空。</p></li><li class="list__item" id="a5843f1a"><p><code class="code">conf</code> — Hub在其中存储配置文件的目录，该文件包含环境设置，JVM选项，Hub集成设置等。</p></li><li class="list__item" id="d5b2d7fd"><p><code class="code">logs</code> —集线器存储其日志文件的目录。</p></li><li class="list__item" id="9a06fbc6"><p><code class="code">backups</code> —集线器存储备份的目录。有关备份的更多详细信息，请参见<a href="Backing-up-and-restoring-data.html">备份</a> 。</p></li></ul>        <aside class="note " rel="6f71d08d" id="103c691f" data-title="macOS Users"><p id="60d75ec6">在macOS上，您可以跳过<code class="code">chown</code>命令提供对目录的访问。</p></aside>        <p id="b5b368b2">在容器内运行集线器服务的用户帐户必须可以访问这些目录。集线器使用非根帐户<code class="code">13001:13001</code> `（分别是group：id）。</p>        <p id="dee86da6">例如，如果您使用Linux主机，则可以执行以下命令来创建集线器目录并应用所需的访问权限：</p>        <div class="code-block" data-lang="bash">mkdir -p -m 750 <path data="" to="" directory=""><path to="" logs="" directory=""><path to="" conf="" directory=""><path to="" backups="" directory="">chown -R 13001：13001 <path data="" to="" directory=""><path to="" logs="" directory=""><path to="" conf="" directory=""><path to="" backups="" directory="">
    </path></path></path></path></path></path></path></path></div>        <p id="1b721065">创建并配置了特定于Hub的目录后，您可以将它们与docker容器内的目录之间的映射定义为<code class="code">docker run</code>命令。</p>    </div>    <div class="chapter"><h2 id="run-hub-service" data-toc="docker-installation#run-hub-service">运行Hub Docker容器</h2>        <p id="5afc2842">使用以下命令来运行具有集线器服务的容器，并映射集线器数据量和端口：</p>        <div class="code-block" data-lang="bash">docker run -it --name <hub-server-instance>\ -v <path data="" to="" directory="">：/ opt / hub / data \ -v <path to="" conf="" directory="">：/ opt / hub / conf \ -v <path to="" logs="" directory="">：/ opt / hub / logs \ -v <path to="" backups="" directory="">：/ opt / hub / backups \ -p <port on="" host="">：8080 \ jetbrains / hub： <version>
    </version></port></path></path></path></path></hub-server-instance></div>        <p id="c38bf5b3">哪里：</p>        <ul class="list _bullet"><li class="list__item" id="9b40223f"><p>                <code class="code">-it</code> —一个标志，它将集线器容器的输入和输出（包括启动日志）附加到终端窗口。请注意，当终端连接到容器输出时，按Ctrl + C会导致容器关闭。使用`Ctrl + PQ`可以将终端从容器输出中分离出来。有关更多详细信息，请参阅<a href="https://docs.docker.com/engine/reference/commandline/attach/#extended-description" rel="noopener noreferrer" data-external="true" target="_blank">官方docker文档</a> 。</p></li><li class="list__item" id="88401a93"><p>                <code class="code">--name hub-server-instance</code> —容器的任意名称。</p></li><li class="list__item" id="762c2340"><p>                <code class="code">-v <path to NNN directory>:/opt/hub/NNN</code> —将主机上特定于集线器的“ NNN”目录绑定到各自<code class="code">/opt/hub/NNN</code>容器内的目录。</p></li><li class="list__item" id="f9182059"><p>                <code class="code">-p <port on host>:8080</code> —定义端口映射的参数。指示主机监听端口<code class="code"><port on host></code>并将所有流量传播到端口<code class="code">8080</code>在docker容器中</p></li></ul>        <p id="4a23d318">集线器服务启动于<code class="code">{0.0.0.0:8080}</code>在Docker容器中，并且端口8080映射到<port on="" host="">您指定的端口<port on="" host="">。这样，可以从<port on="" host="">对您的主机具有网络访问权限的任何计算机上访问服务<port on="" host="">。例如，如果主机的FQDN为host.mydomain.com，且<port on="" host="">为7777，则该服务将在以下位置可用<code class="code">http://host.mydomain.com:7777</code></port></port></port></port></port></p>    </div>    <div class="chapter"><h2 id="configure-new-instance" data-toc="docker-installation#configure-new-instance">配置集线器</h2>        <p id="b6da17b0">首次运行时，集线器服务从上述地址处的基于Web的配置向导启动。打开浏览器，输入地址，然后按照配置向导中的步骤完成设置。</p>        <section class="procedure-steps"><h3 id="9f05102d">要配置新的docker安装：</h3><ol class="list _decimal"><li class="list__item" id="d92fb39b"><p>在<span class="control">配置向导中</span> ，单击“ <span class="control">设置”</span> 。</p><figure><a class="lightbox" href="/help/img/hub/2019.1/install-config-wizard-start.zoomed.png"><img alt="Docker安装：配置向导" title="Docker安装：配置向导" src="/help/img/hub/2019.1/install-config-wizard-start.png" id="26460f37" width="600" height="263"></a></figure>        <p></p></li><li class="list__item" id="f957c8e9">                <p id="62c42d4d">在“ <span class="control">确认设置”</span>页面上，确认或更改基本系统设置。</p>            <figure><a class="lightbox" href="/help/img/hub/2019.1/install-http-settings-basic.zoomed.png"><img alt="Docker安装：基本设置" title="Docker安装：基本设置" src="/help/img/hub/2019.1/install-http-settings-basic.png" id="37f307ff" width="600" height="570"></a></figure>                <p id="bc172fd9">在这里，您还可以<span class="emphasis">启用内置TLS，</span>以保护服务器的网络连接。有关详细过程，请阅读“ <a href="configure-server-tls-configuration-wizard.html#enable-tls-for-clean-installation">在安装</a>过程中<a href="configure-server-tls-configuration-wizard.html#enable-tls-for-clean-installation">启用HTTPS”</a>页面。</p>            <div class="table-wrapper"><table width="100%" id="ConfigWizSystemSettings"><thead><tr id="189175ad" class="ijRowHead"><th id="d42ade8c" width="20%"><p>设置</p></th><th id="887d8eb9"><p>描述</p></th></tr></thead><tbody><tr id="431c255b" class="ijRowOdd"><td id="40b79c3e"><span class="control">HTTP | HTTPS</span></td><td id="19b93564"><p id="c6b24ec6">允许您启用或禁用内置TLS并配置与服务器的安全网络连接。如果启用HTTPS，则会显示TLS特定设置。</p>                        <figure><a class="lightbox" href="/help/img/hub/2019.1/install-https-key-settings-service.zoomed.png"><img alt="配置向导：“ HTTPS”选项卡" title="配置向导：“ HTTPS”选项卡" src="/help/img/hub/2019.1/install-https-key-settings-service.png" id="43c7a1bd" width="600" height="733"></a></figure>                        <p id="306f8226">有关详细信息，请参见“ <a href="configure-server-tls-configuration-wizard.html#tls-attributes">TLS属性”</a>页面。</p>                    </td></tr><tr id="769cd628" class="ijRowEven"><td id="59ca6c77"><span class="control">基本网址</span></td><td id="7449b637"><p>最终用户访问集线器的URL。</p></td></tr><tr id="0bef7ce2" class="ijRowOdd"><td id="bacac610"><span class="control">应用监听端口</span></td><td id="80fc3d34"><p>安装后，集线器服务器侦听的端口。</p></td></tr><tr id="ec5d5eef" class="ijRowEven"><td id="21960b06"><span class="control">语言</span></td><td id="bdc71fc4"><p>用户界面中显示的默认语言。</p></td></tr></tbody></table></div>        </li><li class="list__item" id="c24b02eb">                <p id="0f2a57f6">展开“ <span class="control">高级设置”</span>部分，以查看集线器存储产品数据的位置。</p>                <figure><a class="lightbox" href="/help/img/hub/2019.1/docker-install-http-settings-advanced.zoomed.png"><img alt="Docker安装：高级设置" title="Docker安装：高级设置" src="/help/img/hub/2019.1/docker-install-http-settings-advanced.png" id="3dc59911" width="600" height="750"></a></figure>            <div class="table-wrapper"><table width="100%" id="2173f2e7"><thead><tr id="f8a5a8bd" class="ijRowHead"><th id="e9db76a8" width="20%"><p>设置</p></th><th id="e9dde165"><p>描述</p></th></tr></thead><tbody><tr id="984a35bc" class="ijRowOdd"><td id="ae7750ef"><span class="control">数据目录位置</span></td><td id="c1c8c541"><p>集线器存储内容数据的目录。</p></td></tr><tr id="d69c145c" class="ijRowEven"><td id="471101f9"><span class="control">备份位置</span></td><td id="3bf74170"><p>集线器存储数据库备份的目录。</p></td></tr><tr id="3fe0df45" class="ijRowOdd"><td id="32841274"><span class="control">日志位置</span></td><td id="9732c8f8"><p>集线器存储日志文件的目录。</p></td></tr><tr id="ce495280" class="ijRowEven"><td id="89e650f9"><span class="control">临时位置</span></td><td id="fb9d0ea9"><p>集线器存储特定于产品的临时文件的目录。</p></td></tr></tbody></table></div>            <p id="b660acc2">要更改任何这些文件类型的位置，您需要更改托管计算机上的文件夹与容器内特定于Hub的目录之间的绑定。有关更多详细信息，请参阅<a href="docker-change-database-location.html">更改Docker的数据库位置</a> 。</p></li><li class="list__item" id="2bc5997d"><p>要与JetBrains共享使用情况统计信息，请保持启用“ <span class="control">匿名发送使用情况统计信息”</span>选项。此功能可帮助JetBrains跟踪使用情况统计信息，以使Hub更好。我们绝不与任何第三方共享收集的数据。</p></li><li class="list__item" id="11b5a768"><p>完成后，单击“ <span class="control">下一步”</span> 。</p></li><li class="list__item" id="ec3793e0">            <p id="a2b8d830">在“ <span class="control">选择集线器服务”</span>页面上，输入并确认系统管理员帐户的密码。默认用户名是<code class="code">admin</code> 。</p>            <figure><a class="lightbox" href="/help/img/hub/2019.1/install-http-admin.zoomed.png"><img alt="安装http管理员" title="安装http管理员" src="/help/img/hub/2019.1/install-http-admin.png" id="64dd0c3e" width="600" height="357"></a></figure>            <p id="a0781727">要将其他用户名分配给管理员帐户，请编辑“ <span class="control">创建管理员登录名”</span>设置。</p>            <p id="1fbb5dac">（可选）取消选择“ <span class="control">启用访客身份登录”</span>选项以禁止访客用户帐户。</p></li><li class="list__item" id="c145413c"><p>完成后，单击“ <span class="control">下一步”</span> 。</p></li><li class="list__item" id="785ba756"><p>在“ <span class="control">确认许可证”</span>页面上，验证许可证名称和密钥。</p><figure><a class="lightbox" href="/help/img/hub/2019.1/install-http-license.zoomed.png"><img alt="安装http许可证" title="安装http许可证" src="/help/img/hub/2019.1/install-http-license.png" id="9ebb70b0" width="600" height="281"></a></figure>        <p></p></li><li class="list__item" id="f3435068"><p id="631bfd83">完成后，点击<span class="control">完成</span> 。</p>                <ul class="list _ul"><li class="list__item" id="a1deb306"><p>该配置将应用于您的集线器服务器。</p></li></ul>                <p id="015028be">设置完成之前，请勿在浏览器中关闭页面。集线器服务器准备就绪时：</p>                <ul class="list _ul"><li class="list__item" id="dcf5e5bd"><p>如果您禁用<code class="code">guest</code>用户帐户，您将被重定向到登录页面。</p></li><li class="list__item" id="badcf755"><p>如果启用<code class="code">guest</code>用户帐户，您将被重定向到仪表板。</p></li></ul>            </li></ol></section>        <p id="39c239fb">而已。您的集线器服务已安装并可以使用。</p>        <div class="chapter"><h3 id="configure-container-command-line">从命令行配置集线器服务</h3>            <aside class="warning " rel="configure-container-command-line" id="9684eb03" data-title=""><p id="4998e557">您只能使用<code class="code">configure</code>停止集线器服务时输入命令！</p></aside>            <p id="06bb26f2">为了实现自动安装，您可以<b id="b7fba604">跳过向导</b> 。但是，在这种情况下，中心服务以<span class="emphasis">默认参数</span>开始。因此，您需要显式设置<i id="1e68e6e1">基本URL</i> ，即最终用户可以使用集线器服务的URL。</p>            <p id="87a0c4ea">要跳过配置向导，请运行<code class="code">configure</code>运行Hub <b id="dcf9c8ff">之前的</b>命令：</p>            <div class="code-block" data-lang="bash">docker运行--rm -it \ -v <path data="" to="" directory="">：/ opt / hub / data \ -v <path to="" conf="" directory="">：/ opt / hub / conf \ -v <path to="" logs="" directory="">：/ opt / hub / logs \ -v <path to="" backups="" directory="">：/ opt / hub / backups \ -p <port on="" host="">：8080 \ jetbrains / hub： <version>\配置\ -J-Ddisable.configuration.wizard.on.clean.install = true \ --base-url = http：//hub.mydomain.com：XXXX</version></port></path></path></path></path></div>            <p id="364e29ce">如果您需要<b id="3e082334">更改</b>正在运行的Hub实例<b id="3e082334">的基本URL</b> ，请使用<code class="code">configure</code>用命令<code class="code">--base-url</code>论点。</p>            <section class="procedure-steps"><h3 id="65dce6c9">更改集线器服务的基本URL</h3><ol class="list _decimal"><li class="list__item" id="6ceb99da">                    <p id="0b7522e4">停止集线器： <code class="code">docker exec <containerId> stop</code>                    </p>                </li><li class="list__item" id="b3ad14b4">                    <p id="555424b4">运行以下命令：</p>                    <div class="code-block" data-lang="bash">docker运行--rm -it \ -v <path data="" to="" directory="">：/ opt / hub / data \ -v <path to="" conf="" directory="">：/ opt / hub / conf \ -v <path to="" logs="" directory="">：/ opt / hub / logs \ -v <path to="" backups="" directory="">：/ opt / hub / backups \ -p <port on="" host="">：8080 \ jetbrains / hub： <version>\ configure --base-url = http：//hub.mydomain.com：XXXX</version></port></path></path></path></path></div>                </li><li class="list__item" id="74dbdbda">                    <p id="9736c174">启动中心：</p>                        <div class="code-block" data-lang="bash">码头工人开始<containerid></containerid></div>                </li></ol></section>            <p id="b90ae9f6">要查看所有停止的容器，请运行<code class="code">docker ps -a</code>            </p>        </div>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年9月9日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="hub-docker-container.html">使用Docker进行Docker容器</a> <a class="navigation-links__next" href="upgrade-with-docker.html">升级</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>