<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Docker Installation - Help | Hub</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="docker-installation"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search Hub Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>Hub 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="docker-installation" id="docker-installation.xml">Docker Installation</h1>    <p id="5da743a4">To run a new instance of the Hub service in a docker container:</p>    <ol class="list _decimal"><li class="list__item" id="7cf28dcb">            <a href="#pull-image">Pull Hub Image</a>        </li><li class="list__item" id="86cbb31e">            <a href="#create-and-configure-directories">Create and Configure Directories</a>        </li><li class="list__item" id="a251c0a3">            <a href="#run-hub-service">Run Hub Docker Container</a>        </li><li class="list__item" id="85a9fe71">            <a href="#configure-new-instance">Configure Hub</a>        </li></ol>    <div class="chapter"><h2 id="pull-image" data-toc="docker-installation#pull-image">Pull Hub Image</h2>        <p id="f62c91ee">Pull an image of the latest Hub version from the <a href="https://hub.docker.com/r/jetbrains/hub/" data-external="true" target="_blank" rel="noopener noreferrer">Docker Hub Repository</a>:</p>        <div class="code-block" data-lang="bash">
            docker pull jetbrains/hub:&lt;version&gt;
    </div>        <p id="d2538c25"><code class="code">&lt;version&gt;</code> is a full version number of a Hub build. <a href="https://hub.docker.com/r/jetbrains/hub/tags/" data-external="true" target="_blank" rel="noopener noreferrer">See the complete list of available versions</a></p>    </div>    <div class="chapter"><h2 id="create-and-configure-directories" data-toc="docker-installation#create-and-configure-directories">Create and Configure Directories</h2>        <aside class="note " data-title="" rel="create-and-configure-directories" id="6c05087d">            <p id="356cf9ce">You can skip this step and the volume-mapping commands shown in the next step for demo or test runs,                but doing so in production instances is not recommended. Without the mapping all Hub data will be                routed to anonymous container volumes and may be accidentally lost with a container removal.                Besides, all data will be stored by the Docker engine in subfolders with cryptic names, making it                nearly impossible to locate and access for future backups or upgrades.            </p>        </aside>        <p id="94ebc847">Hub image container is a <span class="emphasis">stateful container</span>. Thus, before running it, you should create specific            directories <span class="emphasis">on the host machine</span> to store Hub database, configuration files, logs, backups, and pass them            to the Hub container as volumes. Otherwise, you risk losing Hub data when the container is removed.        </p>        <p id="357d0050">These directories are:</p>        <ul class="list _bullet"><li class="list__item" id="5ba966d5"><p><code class="code">data</code> — a directory where Hub stores its database. For a new installation, this directory must be                empty.            </p></li><li class="list__item" id="a5843f1a"><p><code class="code">conf</code> — a directory where Hub stores configuration files that contain environment settings,                JVM options, Hub integration settings, and so on.            </p></li><li class="list__item" id="d5b2d7fd"><p><code class="code">logs</code> — a directory where Hub stores its log files.</p></li><li class="list__item" id="9a06fbc6"><p><code class="code">backups</code> — a directory where Hub stores backups. For more details about backups, see                <a href="Backing-up-and-restoring-data.html">Backup</a>.            </p></li></ul>        <aside class="note " data-title="macOS Users" rel="6f71d08d" id="103c691f"><p id="60d75ec6">On macOS, you can skip <code class="code">chown</code> commands            to provide access to the directories.</p></aside>        <p id="b5b368b2">These directories must be accessible to the user account that runs Hub service inside the            container. Hub uses the non-root account `<code class="code">13001:13001</code>` (`group:id`, respectively).        </p>        <p id="dee86da6">For example, if you use a Linux host machine, you can execute the following commands to create            Hub directories and apply the required access permissions:        </p>        <div class="code-block" data-lang="bash">
            mkdir -p -m 750 &lt;path to data directory&gt; &lt;path to logs directory&gt; &lt;path to conf directory&gt;
            &lt;path to backups directory&gt;
            chown -R 13001:13001 &lt;path to data directory&gt; &lt;path to logs directory&gt; &lt;path to conf
            directory&gt; &lt;path to backups directory&gt;
    </div>        <p id="1b721065">When the Hub-specific directories are created and configured, you can define the mapping between them and            directories inside the docker container as the arguments of the <code class="code">docker run</code> command.        </p>    </div>    <div class="chapter"><h2 id="run-hub-service" data-toc="docker-installation#run-hub-service">Run Hub Docker Container</h2>        <p id="5afc2842">Use the following command to run a container with Hub service and map Hub data volumes and port:</p>        <div class="code-block" data-lang="bash">
            docker run -it --name &lt;hub-server-instance&gt; \
            -v &lt;path to data directory&gt;:/opt/hub/data \
            -v &lt;path to conf directory&gt;:/opt/hub/conf \
            -v &lt;path to logs directory&gt;:/opt/hub/logs \
            -v &lt;path to backups directory&gt;:/opt/hub/backups \
            -p &lt;port on host&gt;:8080 \
            jetbrains/hub:&lt;version&gt;
    </div>        <p id="c38bf5b3">Where:</p>        <ul class="list _bullet"><li class="list__item" id="9b40223f"><p>                <code class="code">-it</code> — a flag that attaches Hub container input and output including the startup                logs to the                terminal window. Note that pressing `Ctrl+C` when the terminal is attached to a container output                causes                the container to shut down. Use `Ctrl+PQ` in order to detach the terminal from container output. For                more details, see                <a href="https://docs.docker.com/engine/reference/commandline/attach/#extended-description" data-external="true" target="_blank" rel="noopener noreferrer">the official docker documentation</a>.            </p></li><li class="list__item" id="88401a93"><p>                <code class="code">--name hub-server-instance</code> — the arbitrary name for the container.            </p></li><li class="list__item" id="762c2340"><p>                <code class="code">-v &lt;path to NNN directory&gt;:/opt/hub/NNN</code> — binding the Hub-specific 'NNN'                directory on the                host machine to the respective <code class="code">/opt/hub/NNN</code> directory inside the container.            </p></li><li class="list__item" id="f9182059"><p>                <code class="code">-p &lt;port on host&gt;:8080</code> — parameter that defines the ports mapping. It                instructs the                host machine to listen on port <code class="code">&lt;port on host&gt;</code> and propagate all traffic to the                port `<code class="code">8080</code>` inside the docker container.            </p></li></ul>        <p id="4a23d318">Hub service is started on <code class="code">{0.0.0.0:8080}</code> inside the Docker container, and port 8080 is mapped to &lt;port            on host&gt; that you have specified. This way the service may be accessed from any machine that has network            access to &lt;port on host&gt; of your host machine. For instance, if FQDN of the host machine is            host.mydomain.com and the &lt;port on host&gt; is 7777, then the service will be available at            <code class="code">http://host.mydomain.com:7777</code>        </p>    </div>    <div class="chapter"><h2 id="configure-new-instance" data-toc="docker-installation#configure-new-instance">Configure Hub</h2>        <p id="b6da17b0">On the first run, the Hub service starts with the web-based Configuration Wizard at the address mentioned            above. Open            your browser, enter the address and follow the steps described in Configuration Wizard to complete the            setup.        </p>        <section class="procedure-steps"><h3 id="9f05102d">To configure the new docker installation:</h3><ol class="list _decimal"><li class="list__item" id="d92fb39b"><p>In the <span class="control">Configuration Wizard</span>, click <span class="control">Set up</span>.            <figure><a class="lightbox" href="/help/img/hub/2019.1/install-config-wizard-start.zoomed.png"><img alt="Docker installation: Configuration wizard" title="Docker installation: Configuration wizard" src="/help/img/hub/2019.1/install-config-wizard-start.png" id="26460f37" width="600" height="263"></a></figure>        </p></li><li class="list__item" id="f957c8e9">                <p id="62c42d4d">On the <span class="control">Confirm Settings</span> page, confirm or change the basic system settings.</p>            <figure><a class="lightbox" href="/help/img/hub/2019.1/install-http-settings-basic.zoomed.png"><img alt="Docker installation: Settings basic" title="Docker installation: Settings basic" src="/help/img/hub/2019.1/install-http-settings-basic.png" id="37f307ff" width="600" height="570"></a></figure>                <p id="bc172fd9">Here you can also <span class="emphasis">enable the built-in TLS</span> to secure the network connection for the server. For detailed procedure, read the <a href="configure-server-tls-configuration-wizard.html#enable-tls-for-clean-installation">Enable HTTPS during Installation</a> page.</p>            <div class="table-wrapper"><table width="100%" id="ConfigWizSystemSettings"><thead><tr id="189175ad" class="ijRowHead"><th id="d42ade8c" width="20%"><p>Setting</p></th><th id="887d8eb9"><p>Description</p></th></tr></thead><tbody><tr id="431c255b" class="ijRowOdd"><td id="40b79c3e"><span class="control">HTTP | HTTPS</span></td><td id="19b93564"><p id="c6b24ec6">Allows you to enable or disable the built-in TLS and configure the secure the network connection to your server.                        If you enable HTTPS, the TLS specific settings are displayed.</p>                        <figure><a class="lightbox" href="/help/img/hub/2019.1/install-https-key-settings-service.zoomed.png"><img alt="Configuration wizard: HTTPS tab" title="Configuration wizard: HTTPS tab" src="/help/img/hub/2019.1/install-https-key-settings-service.png" id="43c7a1bd" width="600" height="733"></a></figure>                        <p id="306f8226">See the <a href="configure-server-tls-configuration-wizard.html#tls-attributes">TLS Attributes</a> page for details.                        </p>                    </td></tr><tr id="769cd628" class="ijRowEven"><td id="59ca6c77"><span class="control">Base URL</span></td><td id="7449b637"><p>The URL where end users access Hub.</p></td></tr><tr id="0bef7ce2" class="ijRowOdd"><td id="bacac610"><span class="control">Application Listen Port</span></td><td id="80fc3d34"><p>The port your Hub server listens to after installation.</p></td></tr><tr id="ec5d5eef" class="ijRowEven"><td id="21960b06"><span class="control">Language</span></td><td id="bdc71fc4"><p>The default language that is shown in the user interface.</p></td></tr></tbody></table></div>        </li><li class="list__item" id="c24b02eb">                <p id="0f2a57f6">Expand the <span class="control">Advanced Settings</span> section to review the locations where Hub stores product data.</p>                <figure><a class="lightbox" href="/help/img/hub/2019.1/docker-install-http-settings-advanced.zoomed.png"><img alt="Docker installation: Advanced settings" title="Docker installation: Advanced settings" src="/help/img/hub/2019.1/docker-install-http-settings-advanced.png" id="3dc59911" width="600" height="750"></a></figure>            <div class="table-wrapper"><table width="100%" id="2173f2e7"><thead><tr id="f8a5a8bd" class="ijRowHead"><th id="e9db76a8" width="20%"><p>Setting</p></th><th id="e9dde165"><p>Description</p></th></tr></thead><tbody><tr id="984a35bc" class="ijRowOdd"><td id="ae7750ef"><span class="control">Data Directory Location</span></td><td id="c1c8c541"><p>The directory where Hub stores content data.</p></td></tr><tr id="d69c145c" class="ijRowEven"><td id="471101f9"><span class="control">Backup Location</span></td><td id="3bf74170"><p>The directory where Hub stores backups of the database.</p></td></tr><tr id="3fe0df45" class="ijRowOdd"><td id="32841274"><span class="control">Logs Location</span></td><td id="9732c8f8"><p>The directory where Hub stores log files.</p></td></tr><tr id="ce495280" class="ijRowEven"><td id="89e650f9"><span class="control">Temp Location</span></td><td id="fb9d0ea9"><p>The directory where Hub stores product-specific temporary files.</p></td></tr></tbody></table></div>            <p id="b660acc2">To change the location for any of these file types, you need to change bindings between the folders on a hosted machine and Hub-specific directories inside the container. For more details, see <a href="docker-change-database-location.html">Change Database Location for Docker</a>.</p></li><li class="list__item" id="2bc5997d"><p>To share usage statistics with JetBrains, keep the <span class="control">Send usage statistics anonymously</span> option enabled.            This feature helps JetBrains track usage statistics to make Hub better.            We never share collected data with any third party.        </p></li><li class="list__item" id="11b5a768"><p>When done, click <span class="control">Next</span>.</p></li><li class="list__item" id="ec3793e0">            <p id="a2b8d830">On the <span class="control">Select Hub Service</span> page, enter and confirm the password for the system                administrator account. The default username is <code class="code">admin</code>.</p>            <figure><a class="lightbox" href="/help/img/hub/2019.1/install-http-admin.zoomed.png"><img alt="Install http admin" title="Install http admin" src="/help/img/hub/2019.1/install-http-admin.png" id="64dd0c3e" width="600" height="357"></a></figure>            <p id="a0781727">To assign a different username to the administrator account, edit the <span class="control">Create Admin Login</span> setting.</p>            <p id="1fbb5dac">Optionally, deselect the <span class="control">Enable login as guest</span> option to ban the guest user account                .</p></li><li class="list__item" id="c145413c"><p>When done, click <span class="control">Next</span>.</p></li><li class="list__item" id="785ba756"><p>On the <span class="control">Confirm License</span> page, verify the license name and key.            <figure><a class="lightbox" href="/help/img/hub/2019.1/install-http-license.zoomed.png"><img alt="Install http license" title="Install http license" src="/help/img/hub/2019.1/install-http-license.png" id="9ebb70b0" width="600" height="281"></a></figure>        </p></li><li class="list__item" id="f3435068"><p id="631bfd83">When done, click <span class="control">Finish</span>.</p>                <ul class="list _ul"><li class="list__item" id="a1deb306"><p>The configuration is applied to your Hub server.</p></li></ul>                <p id="015028be">Do not close the page in the browser until the setup is complete.                    When the Hub server is ready:</p>                <ul class="list _ul"><li class="list__item" id="dcf5e5bd"><p>If you disabled <code class="code">guest</code> user account, you are redirected to the login page.</p></li><li class="list__item" id="badcf755"><p>If you enabled <code class="code">guest</code> user account, you are redirected to the Dashboard.</p></li></ul>            </li></ol></section>        <p id="39c239fb">That's it. Your Hub service is installed and ready for use.</p>        <div class="chapter"><h3 id="configure-container-command-line">Configure Hub service from the Command Line</h3>            <aside class="warning " data-title="" rel="configure-container-command-line" id="9684eb03"><p id="4998e557">You can only use the <code class="code">configure</code> command when the Hub service is stopped!</p></aside>            <p id="06bb26f2">For automated installation purposes, you can <b id="b7fba604">skip the wizard</b>. However, in this case, the Hub service starts with the <span class="emphasis">default parameters</span>. Thus, you need to explicitly set the <i id="1e68e6e1">                base URL            </i> — the URL at which the Hub service is available to the end users.            </p>            <p id="87a0c4ea">To skip Configuration Wizard, run the <code class="code">configure</code> command <b id="dcf9c8ff">before</b> running Hub:            </p>            <div class="code-block" data-lang="bash">
                docker run --rm -it \
                -v &lt;path to data directory&gt;:/opt/hub/data \
                -v &lt;path to conf directory&gt;:/opt/hub/conf \
                -v &lt;path to logs directory&gt;:/opt/hub/logs \
                -v &lt;path to backups directory&gt;:/opt/hub/backups \
                -p &lt;port on host&gt;:8080 \
                jetbrains/hub:&lt;version&gt; \
                configure \
                -J-Ddisable.configuration.wizard.on.clean.install=true \
                --base-url=http://hub.mydomain.com:XXXX
    </div>            <p id="364e29ce">If you ever need to <b id="3e082334">change the base URL</b> for your running Hub instance, use the <code class="code">configure</code> command with the <code class="code">--base-url</code> argument.            </p>            <section class="procedure-steps"><h3 id="65dce6c9">To change the Base URL of the Hub service</h3><ol class="list _decimal"><li class="list__item" id="6ceb99da">                    <p id="0b7522e4">Stop Hub:                        <code class="code">docker exec &lt;containerId&gt; stop</code>                    </p>                </li><li class="list__item" id="b3ad14b4">                    <p id="555424b4">Run the following command:</p>                    <div class="code-block" data-lang="bash">
                        docker run --rm -it \
                        -v &lt;path to data directory&gt;:/opt/hub/data \
                        -v &lt;path to conf directory&gt;:/opt/hub/conf \
                        -v &lt;path to logs directory&gt;:/opt/hub/logs \
                        -v &lt;path to backups directory&gt;:/opt/hub/backups \
                        -p &lt;port on host&gt;:8080 \
                        jetbrains/hub:&lt;version&gt; \
                        configure --base-url=http://hub.mydomain.com:XXXX
    </div>                </li><li class="list__item" id="74dbdbda">                    <p id="9736c174">Start Hub:</p>                        <div class="code-block" data-lang="bash">docker start &lt;containerId&gt;</div>                </li></ol></section>            <p id="b90ae9f6">To see all stopped containers, run                <code class="code">docker ps -a</code>            </p>        </div>    </div><div class="last-modified" data-skip-index="skip">Last modified: 9 September 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="hub-docker-container.html">Docker Container</a><a class="navigation-links__next" href="upgrade-with-docker.html">Upgrade with Docker</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>