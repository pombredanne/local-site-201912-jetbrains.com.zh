<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>在基于Web的配置向导中配置内置TLS-帮助|帮助毂</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="configure-server-tls-configuration-wizard"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索中心帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>Hub 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="configure-server-tls-configuration-wizard.xml" data-toc="configure-server-tls-configuration-wizard">在基于Web的配置向导中配置内置TLS</h1>    <p id="19716183">通过集线器，您可以使用内置的TLS保护网络连接。您可以在“配置向导”中或从命令行启用HTTPS模式。但是，无论您喜欢哪种方法，此过程都不会取决于您使用的分发类型。因此，该过程与基本过程分开描述。</p>    <p id="ce6881f7">本页介绍在配置向导中启用HTTPS的步骤。有关命令行的详细说明，请参阅<a href="configure-server-tls-from-command-line.html">从命令行配置内置TLS</a> 。</p>    <p id="efa569e3">在配置向导中启用内置TLS的概述过程如下所示：</p>    <ul class="list _ul"><li class="list__item" id="4226446d"><p>如果您有正在运行的集线器服务，请停止它。</p></li><li class="list__item" id="7d6b64fc"><p>开始安装或升级。</p></li><li class="list__item" id="210d31d8"><p>在基于Web的配置向导中，启用和配置HTTPS设置。</p></li><li class="list__item" id="76bb453d"><p>完成安装或升级。</p></li><li class="list__item" id="dcb6815a"><p>享受通过HTTPS运行集线器服务器的乐趣。</p></li></ul>    <p id="94de86a1">让我们更详细地查看这些过程。</p>    <div class="chapter"><h2 id="enable-tls-for-clean-installation" data-toc="configure-server-tls-configuration-wizard#enable-tls-for-clean-installation">在安装过程中启用HTTPS</h2>        <section class="procedure-steps"><h3 id="ec00ba37">在全新安装期间启用HTTPS</h3><ol class="list _decimal"><li class="list__item" id="55d249e0"><p><a href="tls-keystores-and-certificates-for-server.html">准备兼容的服务器私钥和证书或密钥库</a> 。</p></li><li class="list__item" id="e399a1c2"><p>开始安装。</p></li><li class="list__item" id="fc986859"><p>打开基于Web的配置向导后，单击“ <span class="control">设置”</span>链接。</p></li><li class="list__item" id="19a2702d"><p>在“服务器设置”页面中，单击“ <span class="control">HTTPS”</span>选项卡以启用TLS设置。端口和基本URL会自动更正。</p></li><li class="list__item" id="503fa7df"><p>（可选）启用<span class="control">从HTTP重定向到HTTPS</span> 。此选项启用一个非安全端口，该端口接收所有HTTP请求并将它们重定向到安全监听端口。</p></li><li class="list__item" id="943238f3"><p>根据您使用的是密钥库还是私钥和证书，选择相关选项。</p></li><li class="list__item" id="2fae83d8">提供所需的文件：<ul class="list _ul"><li class="list__item" id="b0586e67"><p>对于密钥库：密钥库文件，其密码，别名和密码。</p><figure><a class="lightbox" href="/help/img/hub/2019.1/install-https-key-settings-service.zoomed.png"><img alt="安装集线器-带有密钥库的内置TLS" title="安装集线器-带有密钥库的内置TLS" src="/help/img/hub/2019.1/install-https-key-settings-service.png" id="d6cb64db" width="600" height="733"></a></figure>                    <p></p></li><li class="list__item" id="06f985f8"><p>对于证书：私钥，证书本身，以及（如果使用的话）链证书（可选）。</p><figure><a class="lightbox" href="/help/img/hub/2019.1/install-https-cert-settings-service.zoomed.png"><img alt="安装集线器-带有证书的内置TLS" title="安装集线器-带有证书的内置TLS" src="/help/img/hub/2019.1/install-https-cert-settings-service.png" id="69b948d5" width="600" height="809"></a></figure>                    <p></p></li></ul>有关TLS特定参数的更多详细信息，请参阅下<a href="#tls-attributes">表。</a>            </li><li class="list__item" id="cbed448a"><p>完成配置向导的其余步骤，以完成安装并启动集线器服务。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="enable-https-during-upgrade" data-toc="configure-server-tls-configuration-wizard#enable-https-during-upgrade">内置TLS升级方案</h2>        <p id="60825411">涉及升级时，您有三个用例：</p>        <ul class="list _ul"><li class="list__item" id="c31b0b61"><p>您要在以前使用纯HTTP的服务器上启用TLS。</p></li><li class="list__item" id="51bc7696"><p>您有一台已配置为使用内置TLS的服务器。您只想获取该应用程序的较新版本。</p></li><li class="list__item" id="af01bdaa"><p>您有一台已配置为使用内置TLS的服务器。但是，您要为服务器使用另一个证书或密钥库。原因可能是现有数据库中的证书即将到期，或者例如，您希望切换到生产环境并停止使用自签名的现有证书。无论出于何种原因，都可以在升级过程中基于Web的配置向导中上载新的证书或密钥库。</p></li></ul>        <div class="chapter"><h3 id="upgrade-switch-from-http-to-https" data-toc="configure-server-tls-configuration-wizard#upgrade-switch-from-http-to-https">升级期间从HTTP切换到HTTPS</h3>            <p id="235e0d52">如果您的先前版本使用普通的HTTP连接，那么启用和配置内置TLS的步骤与全新安装期间的步骤非常相似。</p>            <section class="procedure-steps"><h3 id="635be163">要在升级过程中启用HTTPS：</h3><ol class="list _decimal"><li class="list__item" id="e141b189"><p>停止当前正在运行的中心服务。</p></li><li class="list__item" id="74cdac59"><p>启动更新的安装程序包或docker映像。</p></li><li class="list__item" id="b6cf28de"><p>在“配置向导”的起始页上，单击“ <span class="control">升级”</span> 。</p></li><li class="list__item" id="df706fce"><p>选择升级源。</p><figure><a class="lightbox" href="/help/img/hub/2019.1/zip-upgrade-source.zoomed.png"><img alt="升级中心-源" title="升级中心-源" src="/help/img/hub/2019.1/zip-upgrade-source.png" id="f81be997" width="600" height="505"></a></figure>                <p></p></li><li class="list__item" id="29f4d49e"><p>单击HTTPS选项卡以配置TLS。</p></li><li class="list__item" id="46fe77f2"><p>（可选）选择<span class="control">从HTTP重定向到HTTPS</span> 。此选项启用一个非安全端口，该端口接收所有HTTP请求并将它们重定向到安全监听端口。</p></li><li class="list__item" id="e1e0ffd0"><p>根据您使用的是密钥库还是私钥和证书，选择相关选项。</p></li><li class="list__item" id="915f125a">提供所需的文件：<ul class="list _ul"><li class="list__item" id="8aa18c58"><p>对于密钥库：密钥库文件，其密码，别名和密码。</p></li><li class="list__item" id="82807b70"><p>对于证书：私钥，证书本身，以及（如果使用的话）链证书（可选）。</p></li></ul>有关更多详细信息，请参阅<a href="#tls-attributes">TLS特定的属性</a> 。</li><li class="list__item" id="e435b703"><p>查看并调整其他设置。</p></li><li class="list__item" id="64d36a0b"><p>完成后，单击“ <span class="control">升级”</span>以完成集线器服务的升级。</p></li></ol></section>        </div>        <div class="chapter"><h3 id="upgrade-https-version-with-valid-certificate" data-toc="configure-server-tls-configuration-wizard#upgrade-https-version-with-valid-certificate">升级具有启用的TLS和有效证书的服务器</h3>            <p id="08ca3272">如果在先前的安装中启用了内置TLS，并且服务器证书或密钥库仍然有效，则可以在升级期间安全地重用它们。</p>            <section class="procedure-steps"><h3 id="346349fc">要使用已启用的内置TLS升级现有服务，请执行以下操作：</h3><ol class="list _decimal"><li class="list__item" id="b5cbaea5"><p>停止当前正在运行的中心服务。</p></li><li class="list__item" id="b4e6f458"><p>运行更新的安装程序包或docker映像。</p></li><li class="list__item" id="803ca94d"><p>在“配置向导”的起始页上，单击“ <span class="control">升级”</span> 。</p></li><li class="list__item" id="7a74f014"><p>选择升级源。</p><figure><a class="lightbox" href="/help/img/hub/2019.1/zip-upgrade-source.zoomed.png"><img alt="升级中心：选择源" title="升级中心：选择源" src="/help/img/hub/2019.1/zip-upgrade-source.png" id="07d06289" width="600" height="505"></a></figure>                <p></p></li><li class="list__item" id="c542348a"><p>单击HTTPS选项卡以配置TLS。</p></li><li class="list__item" id="81d284fa"><p>（可选）启用<span class="control">从HTTP重定向到HTTPS</span> 。</p></li><li class="list__item" id="78571bc1"><p>如果源数据库包含有效的服务器证书，则默认情况下启用<span class="control">使用现有文件</span>选项。找到的服务器证书的有效日期位于此选项旁边。</p><figure><a class="lightbox" href="/help/img/hub/2019.1/zip-upgrade-https-existing-cert-confirm.zoomed.png"><img alt="升级中心-使用现有的有效证书" title="升级中心-使用现有的有效证书" src="/help/img/hub/2019.1/zip-upgrade-https-existing-cert-confirm.png" id="4b5f9091" width="600" height="713"></a></figure>                <p></p></li><li class="list__item" id="c887865f"><p>查看其他设置，并根据需要进行调整。</p></li><li class="list__item" id="428c0a45"><p>完成后，单击“ <span class="control">升级”</span>以完成集线器服务的升级。</p></li></ol></section>        </div>        <div class="chapter"><h3 id="upgrade-https-version-with-new-certificate" data-toc="configure-server-tls-configuration-wizard#upgrade-https-version-with-new-certificate">使用新证书或密钥库升级现有服务器</h3>            <p id="3667245f">如果在先前的安装中启用了内置TLS，但是服务器证书或密钥库无效或已过期，则可以在升级过程中上载新证书。</p>            <section class="procedure-steps"><h3 id="8159c704">要在升级过程中启用HTTPS：</h3><ol class="list _decimal"><li class="list__item" id="a232f95d"><p>停止当前正在运行的中心服务。</p></li><li class="list__item" id="5295a004"><p>运行更新的安装程序包或docker映像。</p></li><li class="list__item" id="52518cdc"><p>在“配置向导”的起始页上，单击“ <span class="control">升级”</span> 。</p></li><li class="list__item" id="fe453b4d"><p>选择升级源。</p><figure><a class="lightbox" href="/help/img/hub/2019.1/zip-upgrade-source.zoomed.png"><img alt="升级中心-选择来源" title="升级中心-选择来源" src="/help/img/hub/2019.1/zip-upgrade-source.png" id="3ddb34e4" width="600" height="505"></a></figure>                <p></p></li><li class="list__item" id="ddaee540"><p>单击HTTPS选项卡以配置TLS。</p></li><li class="list__item" id="015d9492"><p>（可选）启用<span class="control">从HTTP重定向到HTTPS</span> 。</p></li><li class="list__item" id="1f117548"><p>选择选项<span class="control">上传新的TLS证书</span> 。根据您使用的是密钥库还是私钥和证书，选择相关选项。</p></li><li class="list__item" id="8a926b09">提供所需的文件：<ul class="list _ul"><li class="list__item" id="adb95e10"><p>对于密钥库：密钥库文件，其密码，别名和密码。</p><figure><a class="lightbox" href="/help/img/hub/2019.1/zip-upgrade-https-new-keystore-confirm.zoomed.png"><img alt="升级期间上载新的服务器密钥库" title="升级期间上载新的服务器密钥库" src="/help/img/hub/2019.1/zip-upgrade-https-new-keystore-confirm.png" id="80e02118" width="600" height="898"></a></figure>                        <p></p></li><li class="list__item" id="c5aa0a59"><p>对于证书：私钥，证书本身，以及（如果使用的话）链证书（可选）。</p><figure><a class="lightbox" href="/help/img/hub/2019.1/zip-upgrade-https-new-cert-confirm.zoomed.png"><img alt="升级期间上载新的服务器证书" title="升级期间上载新的服务器证书" src="/help/img/hub/2019.1/zip-upgrade-https-new-cert-confirm.png" id="bdc487ac" width="600" height="969"></a></figure>                        <p></p></li></ul>                    <p id="03ac93a7">有关详细信息，请参阅<a href="#tls-attributes">TLS特定的属性</a> 。</p>                </li><li class="list__item" id="5723e511"><p>查看其他设置，并根据需要进行调整。</p></li><li class="list__item" id="d74c3413"><p>完成后，单击“ <span class="control">升级”</span>以完成集线器服务的升级。</p></li></ol></section>        </div>    </div>    <div class="chapter"><h2 id="tls-attributes" data-toc="configure-server-tls-configuration-wizard#tls-attributes">TLS属性</h2>        <div class="table-wrapper"><table width="100%" id="1fab3712"><thead><tr id="c83f5bb6" class="ijRowHead"><th id="418caba2" width="20%"><p>属性</p></th><th id="2353024e"><p>描述</p></th></tr></thead><tbody><tr id="eb567d9f" class="ijRowOdd"><td id="46e922ed"><p>从HTTP重定向到HTTPS</p></td><td id="f525860b"><p>该选项使您可以启用和配置非安全端口，以将所有HTTP请求重定向到新配置的HTTPS安全端口。</p></td></tr><tr id="d890406f" class="ijRowEven"><td id="d1587164" colspan="2">                    <span class="control">密钥库</span>                </td></tr><tr id="41c5ae22" class="ijRowOdd"><td id="24900114"><p>密钥库文件</p></td><td id="613f8031"><p>密钥库是一个JKS或PKCS＃12文件，其中包含用于保护HTTPS连接的证书和私钥。</p></td></tr><tr id="360c27e8" class="ijRowEven"><td id="0da5dae2"><p>密码</p></td><td id="d2a5f0e2"><p>保护密钥库文件的密码。</p></td></tr><tr id="535bf676" class="ijRowOdd"><td id="1f42dc75"><p>别名</p></td><td id="b89acdca"><p>密钥库中条目的别名（PKCS＃12中为Friendlyname），其中包含服务器证书和私钥。如果使用PKCS＃12密钥库，并且在生成过程中私钥和证书对未标记为Friendlyname，则在“ <span class="control">别名”</span>字段中，需要在密钥库中提供该对的序号。如果密钥库仅包含一对私钥和证书，则输入<code class="code">1</code>在“ <span class="control">别名”</span>字段中。</p></td></tr><tr id="fb96a924" class="ijRowEven"><td id="1e1da3a0"><p>别名密码</p></td><td id="aa69e02b"><p>用于加密私钥的密码。如果私钥未加密，请将该字段留空。</p></td></tr><tr id="df922731" class="ijRowOdd"><td id="4d66dc64" colspan="2">                    <span class="control">私钥和证书</span>                </td></tr><tr id="e2b34709" class="ijRowEven"><td id="1e554d23"><p>私钥</p></td><td id="47ac0002"><p>使用服务器证书保护和验证连接的私钥PEM文件。</p></td></tr><tr id="3dce2164" class="ijRowOdd"><td id="3448093d"><p>证书</p></td><td id="b9394770"><p>服务器证书PEM文件，用于确保与您的域的HTTPS连接的安全。</p></td></tr><tr id="e1b5d440" class="ijRowEven"><td id="254edad9"><p>证书链</p></td><td id="cfec2c42"><p>服务器证书和根证书之间的中间证书链。</p></td></tr></tbody></table></div>        <p id="a312b110">有关获取私钥和证书的更多信息，请参阅<a href="tls-keystores-and-certificates-for-server.html">TLS服务器证书和密钥库</a> 。</p>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年9月9日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="secure-connection-for-hub-server.html">集线器服务器的安全连接</a> <a class="navigation-links__next" href="configure-server-tls-from-command-line.html">从命令行配置内置TLS</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>