<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Custom Widgets API Reference - Help | Hub</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="custom-widgets-API-reference"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search Hub Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>Hub 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="custom-widgets-API-reference" id="custom-widgets-API-reference.xml">Custom Widgets API Reference</h1>    <p id="3cbe2a5f">We provide a custom library for JavaScript that includes an API for working with custom widgets.    To install this library, use one of the following implementations:</p>    <ul class="list _ul"><li class="list__item" id="fd9abb07"><p>Add a reference to the <a href="https://unpkg.com/hub-dashboard-addons@latest" data-external="true" target="_blank" rel="noopener noreferrer">dashboard script on unpkg</a> in the header of your <code class="code">index.html</code> file.            Wrap the reference inside a <code class="code">&lt;script&gt;</code> tag. For example:            <div class="code-block" data-lang="markup">
                &lt;script src="https://unpkg.com/hub-dashboard-addons@latest"&gt;&lt;/script&gt;
            </div>        </p></li><li class="list__item" id="10765e75"><p>Use the npm package manager to install the script with the <code class="code">npm install hub-dashboard-addons</code> command.            You can then add references to the script in your widget any way you want.        </p></li></ul>    <p id="7ca5b1f8">The <code class="code">Dashboard.registerWidget</code> function accepts a callback that is called with the <code class="code">dashboardAPI</code> and <code class="code">registerWidgetAPI</code> parameters as shown in the following code sample.        To view this sample in context, refer to the <a href="how-to-build-custom-widget.html#create-the-script">Create the Script</a>.</p>    <div class="code-block" data-lang="javascript">// Register widget:
Dashboard.registerWidget(function (dashboardAPI, registerWidgetAPI) {
    // Load GitHub profile data
    loadAndRenderUser(USER_NAME)

    // Set the widget title
    .then(user =&gt; dashboardAPI.setTitle(`GitHub User ${user.login}`));

    // Add the refresh button.
    registerWidgetAPI({
        onRefresh: () =&gt; loadAndRenderUser(USER_NAME)
    });
});</div>    <p id="bdfb3413">Use the following reference to build custom widgets for your Hub dashboards and project overview pages.</p>    <div class="chapter"><h2 id="dashboard-API" data-toc="custom-widgets-API-reference#dashboard-API">Dashboard API</h2>        <p id="70945b62">Use the dashboard API to communicate with the widget wrapper and the page that the widget is plugged into.            All of these methods are asynchronous and return <code class="code">Promise</code> objects.        These methods are applied to the <code class="code">dashboardApi</code> object.</p>        <div class="chapter"><h3 id="alert" data-toc="custom-widgets-API-reference#alert">alert</h3>            <p id="3ebbea44">Displays a system alert in the lower-right corner of the page.</p>            <h4 id="324a2d19">Syntax</h4>            <div class="code-block" data-lang="javascript">alert(message: string, ?type: string, ?timeout: integer): string</div>            <h4 id="cbb0e96b">Parameters</h4>            <div class="table-wrapper"><table class=" wide" width="100%" id="6f72523e"><thead><tr id="2a21c03f" class="ijRowHead"><th id="5822a6bd"><p>Parameter</p></th><th id="388bf4fd"><p>Type</p></th><th id="c5ec8bab"><p>Description</p></th></tr></thead><tbody><tr id="a9154665" class="ijRowOdd"><td id="178a7e37"><p>message</p></td><td id="7d7cfa1c"><p>string</p></td><td id="ef0ef793"><p>Sets the text that is displayed as the system alert.</p></td></tr><tr id="e73b950f" class="ijRowEven"><td id="f9fb6e77"><p>type</p></td><td id="d9be2417"><p>string</p></td><td id="115cffa9"><p>Determines which notification style is applied to the alert.                        Possible values include <code class="code">error</code>, <code class="code">message</code>, <code class="code">success</code>, and <code class="code">warning</code>.</p></td></tr><tr id="51577b75" class="ijRowOdd"><td id="0d5e3cdc"><p>timeout</p></td><td id="e115148b"><p>integer</p></td><td id="1e752afc"><p>The amount of time the alert is shown on the page, in seconds.</p></td></tr></tbody></table></div>            <h4 id="f117e399">Example</h4>            <div class="code-block" data-lang="javascript">dashboardApi.alert('This is a standard notification', 'message');
dashboardApi.alert('This is an error', 'error', 10000);</div>        </div>        <div class="chapter"><h3 id="clearError" data-toc="custom-widgets-API-reference#clearError">clearError</h3>            <p id="a026b28e">Removes the warning icon that is added to the widget header with the <a href="#setError">setError</a> method.</p>            <p id="49db3877">Available since Hub 2019.1.XXXXX</p>            <h4 id="75fb93ae">Syntax</h4>            <div class="code-block" data-lang="javascript">clearError(): void</div>        </div>        <div class="chapter"><h3 id="enterConfigMode" data-toc="custom-widgets-API-reference#enterConfigMode">enterConfigMode</h3>            <p id="ead07a59">Invokes configuration mode.                When in configuration mode, the visual presentation of the widget changes to indicate that its settings can be updated.                The <span class="control">refresh</span> icon is also hidden.</p>            <h4 id="5d67790e">Syntax</h4>            <div class="code-block" data-lang="javascript">enterConfigMode(): void</div>        </div>        <div class="chapter"><h3 id="exitConfigMode" data-toc="custom-widgets-API-reference#exitConfigMode">exitConfigMode</h3>            <p id="d3e1c054">Exits configuration mode.</p>            <h4 id="bdab2c63">Syntax</h4>            <div class="code-block" data-lang="javascript">exitConfigMode(): void</div>        </div>        <div class="chapter"><h3 id="fetch" data-toc="custom-widgets-API-reference#fetch">fetch</h3>            <p id="11ea6efb">Makes an authorized request to the specified service.                The service must be specified in the widget manifest.</p>            <h4 id="0427e9bc">Syntax</h4>            <div class="code-block" data-lang="javascript">fetch(serviceID: string, url: string, fetchConfig: Object): Promise&lt;Object&gt;</div>            <h4 id="6aeccdf2">Parameters</h4>            <div class="table-wrapper"><table class=" wide" width="100%" id="e1eaf356"><thead><tr id="ad6b9822" class="ijRowHead"><th id="534b72cb"><p>Parameter</p></th><th id="5eef63d6"><p>Type</p></th><th id="a14a0738"><p>Description</p></th></tr></thead><tbody><tr id="18fcbca8" class="ijRowOdd"><td id="ac2e66c5"><p>serviceID</p></td><td id="af5767fa"><p>string</p></td><td id="854ed2b0"><p>Specifies the ID of the service.                        To get the service ID, use <a href="#fetchHub">fetchHub</a> first.                        For details, see <a href="HUB-REST-API_Services_Get-All-Services.html">Get All Services</a>.</p></td></tr><tr id="34c0aaf4" class="ijRowEven"><td id="e34e38b5"><p>url</p></td><td id="6da8a382"><p>string</p></td><td id="d0ebae11"><p>Sets the URL to the service API endpoint.                        This is the path to the resource that you want to fetch.                        The URL is relative to the server home URL.</p></td></tr><tr id="61a7e74b" class="ijRowOdd"><td id="67909539"><p>fetchConfig</p></td><td id="6864e86b"><p>Object</p></td><td id="0dcb45ca"><p>Defines an optional options object.                        This object contains any custom settings that you want to apply to the request.</p></td></tr></tbody></table></div>            <h4 id="eda7542e">Example</h4>            <div class="code-block" data-lang="javascript">dashboardApi.fetch(serviceId, 'api/users')
                .then(users =&gt; console.log(users));</div>            <p id="7342022f">The following example shows how to use this method in a POST request:</p>            <div class="code-block" data-lang="javascript">dashboardApi.fetch(serviceId, 'api/users', {
    method: 'POST',
    body: {payload: 'test'}
})
    .then(result =&gt; console.log(result));</div>        </div>        <div class="chapter"><h3 id="fetchHub" data-toc="custom-widgets-API-reference#fetchHub">fetchHub</h3>            <p id="03ef1da0">Makes an authorized request to the Hub service.</p>            <h4 id="1f1d6ac8">Syntax</h4>            <div class="code-block" data-lang="javascript">fetchHub(url: string, fetchConfig: Object): Promise&lt;Object&gt;</div>            <h4 id="23964599">Parameters</h4>            <div class="table-wrapper"><table class=" wide" width="100%" id="a272b25b"><thead><tr id="b02d8029" class="ijRowHead"><th id="ba5520e6"><p>Parameter</p></th><th id="2e44114d"><p>Type</p></th><th id="f9c3ee0b"><p>Description</p></th></tr></thead><tbody><tr id="e64322c2" class="ijRowOdd"><td id="191d8122"><p>url</p></td><td id="0ba77a7f"><p>string</p></td><td id="b37c6654"><p>Sets the URL to the Hub service API endpoint.                        This is the path to the resource that you want to fetch.                        The URL is relative to the server home URL.                        For more information, see <a href="Hub-Rest-Api-URL.html">REST API URL and Endpoints</a>.</p></td></tr><tr id="fedd4d62" class="ijRowEven"><td id="3ace5a03"><p>fetchConfig</p></td><td id="43630d8b"><p>Object</p></td><td id="c709fc23"><p>Defines an optional options object.                        This object contains any custom settings that you want to apply to the request.</p></td></tr></tbody></table></div>            <h4 id="e84defa8">Example</h4>            <div class="code-block" data-lang="javascript">dashboardApi.fetchHub('api/rest/users/me?fields=name,login,profile(avatar(url))')
                .then(response =&gt; console.log(response));</div>            <p id="93153ca6">The following example shows how to use this method in a POST request:</p>            <div class="code-block" data-lang="javascript">dashboardApi.fetchHub('api/rest/users/me', {
    method: 'POST',
    body: {favoriteProjects: []}
})
    .then(response =&gt; console.log(response));</div>        </div>        <div class="chapter"><h3 id="loadServices" data-toc="custom-widgets-API-reference#loadServices">loadServices</h3>            <p id="7ef3a5e3">Returns a list of services that are connected to the Hub service and meet the minimum version requirements that are specified in the <code class="code">dependencies</code> section of the <code class="code">manifest.json</code> file for the widget.</p>            <ul class="list _ul"><li class="list__item" id="41429dac"><p>If the service that is specified with the <code class="code">applicationName</code> parameter is not referenced in the <code class="code">dependencies</code> section of the widget manifest, an exception is thrown.</p></li><li class="list__item" id="782e9537"><p>If the specified service that is connected to the Hub service does not meet the minimum version requirements, returns an empty array.</p></li></ul>            <h4 id="4e8ae157">Syntax</h4>            <div class="code-block" data-lang="javascript">loadServices(applicationName: string): Promise&lt;Array&lt;Object&gt;&gt;</div>            <h4 id="ded00427">Parameters</h4>            <div class="table-wrapper"><table class=" wide" width="100%" id="59814011"><thead><tr id="6cccb099" class="ijRowHead"><th id="18c099c1"><p>Parameter</p></th><th id="46200af3"><p>Type</p></th><th id="433544cb"><p>Description</p></th></tr></thead><tbody><tr id="634cc031" class="ijRowOdd"><td id="d514a02e"><p>applicationName</p></td><td id="8f53ea53"><p>string</p></td><td id="ceee2204"><p>Determines which services are checked against the <code class="code">dependencies</code> in the widget manifest.</p></td></tr></tbody></table></div>            <h4 id="1e61d2ca">Example</h4>            <p id="9b938326">The following example checks the Hub service for versions of YouTrack that are compatible with the YouTrack versions that are referenced in the <code class="code">dependencies</code> section of the widget manifest.                The list of compatible versions of the application is printed to the console.</p>            <div class="code-block" data-lang="javascript">dasboardApi.loadServices('YouTrack')
    .then(youtracks =&gt; console.log(youtracks[0]));</div>        </div>        <div class="chapter"><h3 id="readCache" data-toc="custom-widgets-API-reference#readCache">readCache</h3>            <p id="517d1a20">Reads and returns the object that was previously stored in the cache.</p>            <h4 id="159610e6">Syntax</h4>            <div class="code-block" data-lang="javascript">readCache(): Promise&lt;Object&gt;</div>        </div>        <div class="chapter"><h3 id="readConfig" data-toc="custom-widgets-API-reference#readConfig">readConfig</h3>            <p id="5e907800">Reads and returns the object that was previously stored as a configuration object.</p>            <h4 id="e01c7a2d">Syntax</h4>            <div class="code-block" data-lang="javascript">readConfig(): Promise&lt;Object&gt;</div>        </div>        <div class="chapter"><h3 id="removeWidget" data-toc="custom-widgets-API-reference#removeWidget">removeWidget</h3>            <p id="c6a2b35d">Removes the custom widget from the dashboard or project overview page.</p>            <h4 id="b772ef67">Syntax</h4>            <div class="code-block" data-lang="javascript">removeWidget(): void</div>        </div>        <div class="chapter"><h3 id="setLoadingAnimationEnabled" data-toc="custom-widgets-API-reference#setLoadingAnimationEnabled">setLoadingAnimationEnabled</h3>            <p id="d68538a1">Toggles the image rotation animation for the widget reload icon.                Call this method when the widget populates data from a remote server to indicate that a process is running in the background.</p>            <h4 id="26117d85">Syntax</h4>            <div class="code-block" data-lang="javascript">setLoadingAnimationEnabled(enabled: boolean): void</div>            <h4 id="b8b2fddc">Parameters</h4>            <div class="table-wrapper"><table class=" wide" width="100%" id="7a29a79d"><thead><tr id="9a5d4de5" class="ijRowHead"><th id="1ebb62df"><p>Parameter</p></th><th id="7cd5c23e"><p>Type</p></th><th id="d8d8faad"><p>Description</p></th></tr></thead><tbody><tr id="9d302dac" class="ijRowOdd"><td id="0398911e"><p>enabled</p></td><td id="ed27825b"><p>Boolean</p></td><td id="075a4076"><p>Determines whether the widget reload icon rotates or not.</p></td></tr></tbody></table></div>        </div>        <div class="chapter"><h3 id="setError" data-toc="custom-widgets-API-reference#setError">setError</h3>            <p id="3b5a093d">Adds a warning icon to the left of the title in the widget header.                The string of text that is specified for the <code class="code">data</code> parameter is shown when the user hovers the pointer over the warning icon.</p>            <p id="1e74f759">Available since Hub 2019.1.XXXXX</p>            <h4 id="a6e5a943">Syntax</h4>            <div class="code-block" data-lang="javascript">setError(data: string): void</div>            <h4 id="c13d5959">Parameters</h4>            <div class="table-wrapper"><table class=" wide" width="100%" id="c7111a46"><thead><tr id="53633b8d" class="ijRowHead"><th id="3d3f814c"><p>Parameter</p></th><th id="2a40ba14"><p>Type</p></th><th id="b52dd684"><p>Description</p></th></tr></thead><tbody><tr id="9eada7d3" class="ijRowOdd"><td id="e097b608"><p>data</p></td><td id="a465bfaa"><p>string</p></td><td id="c3880239"><p>The text that is shown when the user hovers the poiner over the warning icon.</p></td></tr></tbody></table></div>        </div>        <div class="chapter"><h3 id="setTitle" data-toc="custom-widgets-API-reference#setTitle">setTitle</h3>            <p id="f2f7bd1e">Sets the text that is displayed in the widget header.                If a value is specified for the <code class="code">labelUrl</code> parameter, the text is set as a link to the target URL.</p>            <h4 id="88723478">Syntax</h4>            <div class="code-block" data-lang="javascript">setTitle(label: string, ?labelUrl: string): void</div>            <h4 id="e39a8b3a">Parameters</h4>            <div class="table-wrapper"><table class=" wide" width="100%" id="3b38c7a3"><thead><tr id="6a7eb18c" class="ijRowHead"><th id="591ce86e"><p>Parameter</p></th><th id="99c7714b"><p>Type</p></th><th id="b13372b0"><p>Description</p></th></tr></thead><tbody><tr id="95ea63e6" class="ijRowOdd"><td id="e5c52d44"><p>label</p></td><td id="b025c058"><p>string</p></td><td id="49831341"><p>The text string that is shown as the widget title.</p></td></tr><tr id="fa1afe8b" class="ijRowEven"><td id="7e4283da"><p>labelURL</p></td><td id="4745759d"><p>string</p></td><td id="88f40911"><p>The address of the target page that opens when a user clicks the widget title.                        If this optional parameter is not specified, the widget title is set as text only.</p></td></tr></tbody></table></div>            <h4 id="76242972">Example</h4>            <div class="code-block" data-lang="javascript">dashboardApi.setTitle('Some widget');
dashboardApi.setTitle('A link header', 'https://example.com');</div>        </div>        <div class="chapter"><h3 id="storeCache" data-toc="custom-widgets-API-reference#storeCache">storeCache</h3>            <p id="84f0565f">Stores any object in the client-side cache.                Use this method to store populated data locally and display it immediately on the dashboard, then refresh it from server.                Returns a configuration object.</p>            <h4 id="7388bf2a">Syntax</h4>            <div class="code-block" data-lang="javascript">storeCache(cache: Object): Promise&lt;Void&gt;</div>            <h4 id="ed38c5f9">Parameters</h4>            <div class="table-wrapper"><table class=" wide" width="100%" id="3700d869"><thead><tr id="6e925e44" class="ijRowHead"><th id="946d4adf"><p>Parameter</p></th><th id="7b4891da"><p>Type</p></th><th id="2b01c036"><p>Description</p></th></tr></thead><tbody><tr id="9921400e" class="ijRowOdd"><td id="d0917023"><p>cache</p></td><td id="2c811364"><p>Object</p></td><td id="373685ab"><p>Specifies the object to be stored in the cache.</p></td></tr></tbody></table></div>        </div>        <div class="chapter"><h3 id="storeConfig" data-toc="custom-widgets-API-reference#storeConfig">storeConfig</h3>            <p id="8d06fd29">Stores any object as a widget configuration.                Exits configuration mode if configuration mode is active.</p>            <h4 id="8117ac13">Syntax</h4>            <div class="code-block" data-lang="javascript">storeConfig(config: Object): Promise&lt;Void&gt;</div>            <h4 id="3f2e1e90">Parameters</h4>            <div class="table-wrapper"><table class=" wide" width="100%" id="513a0af2"><thead><tr id="c07e5210" class="ijRowHead"><th id="ba62f1ab"><p>Parameter</p></th><th id="ba0e1ca0"><p>Type</p></th><th id="1628c845"><p>Description</p></th></tr></thead><tbody><tr id="e114c125" class="ijRowOdd"><td id="fc0224fb"><p>config</p></td><td id="e1be14ad"><p>Object</p></td><td id="9bc475ae"><p>Specifies the object to be stored as a widget configuration.</p></td></tr></tbody></table></div>        </div>    </div>    <div class="chapter"><h2 id="widget-API" data-toc="custom-widgets-API-reference#widget-API">Widget API</h2>        <p id="a08c4b9c">Use the widget API to manipulate the visibility of controls on your custom widget.            These methods are applied to the <code class="code">widgetApi</code> object.</p>        <div class="chapter"><h3 id="onConfigure" data-toc="custom-widgets-API-reference#onConfigure">onConfigure</h3>            <p id="29bbcf63">Calls an action when the <span class="control">Edit</span> option is selected from the widget menu.                If not set, the <span class="control">Edit</span> option is not shown.</p>            <h4 id="6e32efb7">Syntax</h4>            <div class="code-block" data-lang="javascript">onConfigure(): void</div>        </div>        <div class="chapter"><h3 id="onRefresh" data-toc="custom-widgets-API-reference#onRefresh">onRefresh</h3>            <p id="30507365">Calls an action when the <span class="control">refresh</span> icon is clicked in the widget header.                If not set, the <span class="control">refresh</span> icon is not shown in the header.</p>            <h4 id="74438841">Syntax</h4>            <div class="code-block" data-lang="javascript">onRefresh(): ?Promise&lt;Void&gt;</div>        </div>    </div><div class="last-modified" data-skip-index="skip">Last modified: 9 September 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="test-custom-widgets.html">Test a Custom Widget</a><a class="navigation-links__next" href="sample-custom-widgets.html">Sample Custom Widgets</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>