<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>配置JVM选项-帮助|帮助毂</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Configure-JVM-Options"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索中心帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>Hub 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Configure-JVM-Options.xml" data-toc="Configure-JVM-Options">配置JVM选项</h1>    <p id="189c895d">您可以为您的Hub实例配置JVM选项。这些选项使您可以管理服务器的行为，垃圾收集，性能和调试选项。这些参数无法在集线器用户界面中更新。</p>    <p id="a3fbddd9">集线器将JVM选项存储在名为的内部文件中<code class="code">hub.jvmoptions</code> 。每次启动集线器服务时，集线器都会读取此文件，并将此配置中存储的参数应用于集线器实例。</p>    <p id="f3622903">您可以使用两种方法来更新这些参数：</p>    <div class="table-wrapper"><table width="100%" id="3dff09e6"><thead><tr id="6eb8adc8" class="ijRowHead"><th id="12dd6889"><p>方法</p></th><th id="f65c032c"><p>描述</p></th></tr></thead><tbody><tr id="067f8d24" class="ijRowOdd"><td id="fdb5ed11" width="30%"><p><a href="#set-ad-hoc-parameter">临时更新参数</a> 。</p></td><td id="5a812fa5"><p>您可以临时将JVM选项作为临时启动参数传递。该参数的值仅设置为当前运行。的<code class="code">hub.jvmoptions</code>文件不会更新，因此在不使用start参数的情况下重新启动Hub实例时，该参数将重置为配置中存储的值。在永久应用更改之前，请使用此选项测试对环境的更改。</p></td></tr><tr id="9d3e2523" class="ijRowEven"><td id="94a0b8b3"><p><a href="#update-configuration-file">持续更新参数</a> 。</p></td><td id="ba04542f"><p>要永久更改参数的值，可以在<code class="code">hub.jvmoptions</code>文件。</p></td></tr></tbody></table></div>    <div class="chapter"><h2 id="set-ad-hoc-parameter" data-toc="Configure-JVM-Options#set-ad-hoc-parameter">临时更新参数</h2>        <p id="3352cb84">当您要临时修改JVM选项时，可以在service start命令中使用ad hoc参数。此方法绕过了<code class="code">hub.jvmoptions</code>文件并使用指定的参数运行Hub。后续启动中未指定ad hoc参数的启动将使用配置文件中存储的JVM选项。</p>        <aside class="note " rel="3352cb84" id="24dc939a" data-title="">            <p id="61cdc4ea">本页上的命令适用于Linux和macOS。对于Windows安装，请更换<code class="code">.sh</code>与<code class="code">.bat</code>并使用反斜杠。</p>        </aside>        <section class="procedure-steps"><h3 id="fc32a649">要将JVM选项作为临时参数传递：</h3><ol class="list _decimal"><li class="list__item" id="d2e3f970"><p><a href="Starting-and-Stopping-Hub.html">停止集线器服务</a> 。</p></li><li class="list__item" id="5240d1f5"><p id="aaad31dc">在命令行界面中，将目录更改为<code class="code"><hub_home>/bin</code> 。</p>                <ul class="list _ul"><li class="list__item" id="bcbb03e1"><p>对于ZIP安装， <code class="code"><hub_home></code> directory是安装过程中解压缩ZIP分发包的位置。</p></li><li class="list__item" id="0319f352"><p>对于MSI安装， <code class="code"><hub_home></code>目录是MSI分发的安装位置。默认安装目录为<code class="code">C:\Hub</code></p></li></ul>            </li><li class="list__item" id="73588b55"><p id="62e4b8d1">输入<code class="code">hub.sh start</code>命令，然后是要在启动时传递给Hub数据库的所有设置。</p>                <ul class="list _ul"><li class="list__item" id="fa1aaa87"><p>使用<code class="code">--J</code>前缀以将设置作为临时参数传递。</p></li><li class="list__item" id="24bc9a36"><p id="61500e48">在前缀后面加上JVM选项。不要在前缀和选项之间添加任何空格。选项前的符号决定如何应用它。</p>                        <ul class="list _ul"><li class="list__item" id="11be01a1"><p>添加一个选项<code class="code">-</code>符号。</p></li><li class="list__item" id="5dc1d738"><p>忽略带有<code class="code">+</code>符号。如果指定一个值，则只有其值完全相同时，才会忽略相应的选项。</p></li></ul>                    </li></ul>                <p id="21798009">例如：</p>                <div class="code-block" data-lang="bash">hub.sh start --J-XX：+ HeapDumpOnOutOfMemoryError --J-Xmx1024m</div>                <ul class="list _ul"><li class="list__item" id="c225c5ba"><p>集线器服务开始使用指定的设置。</p></li><li class="list__item" id="1f1c723a"><p>的<code class="code">hub.jvmoptions</code>文件未修改。</p></li></ul>            </li></ol></section>        <section class="procedure-steps"><h3 id="f353b4c3">要将JVM选项作为临时参数传递给Docker映像：</h3><ol class="list _decimal"><li class="list__item" id="89182c52"><p><a href="Starting-and-Stopping-Hub.html">停止Hub docker容器</a> 。</p></li><li class="list__item" id="364968d9"><p id="d79e2891">跑过<code class="code">configure-next-start</code>命令：</p>            <div class="code-block" data-lang="bash">docker运行-it --rm \ -v <path to="" conf="" directory="">：/ opt / hub / conf jetbrains / hub： <version>\ configure-next-start \ <ad hoc="" jvm="" options="">
    </ad></version></path></div>                <p id="3c693bdb"><ad hoc="" parameters="">—在下次启动集线器服务时应应用的所有JVM选项的列表。临时JVM选项应以以下格式提供：</ad></p>                <div class="code-block" data-lang="none">--J<jvm option=""></jvm></div>                <p id="a381867d"><code class="code">--J</code>是临时前缀，后跟选项。不要在前缀和选项之间添加任何空格。选项前的符号决定如何应用它。</p>                    <ul class="list _ul"><li class="list__item" id="6e34652b"><p>添加一个选项<code class="code">-</code>符号。</p></li><li class="list__item" id="0cb70812"><p>忽略带有<code class="code">+</code>符号。如果指定一个值，则只有其值完全相同时，才会忽略相应的选项。</p></li></ul>                    <p id="165dce60">例如：</p>                <div class="code-block" data-lang="bash">docker run -it --rm \ -v <path to="" conf="" directory="">：/ opt / hub / conf jetbrains / hub： <version>\ configure-next-start \ --J-XX：+ HeapDumpOnOutOfMemoryError \ --J-Xmx1024m</version></path></div>            </li><li class="list__item" id="101e14d7"><a href="start-stop-hub-docker.html#hub-docker-start">启动Docker容器。</a>                <ul class="list _ul"><li class="list__item" id="d5133706"><p>集线器服务开始使用指定的设置。</p></li><li class="list__item" id="f133e38f"><p>的<code class="code">hub.jvmoptions</code>文件未修改。</p></li></ul>            </li></ol></section>        <p id="75657e63">要使用以前的设置运行Hub，请在不传递任何自定义参数的情况下重新启动服务。</p>    </div>    <div class="chapter"><h2 id="update-configuration-file" data-toc="Configure-JVM-Options#update-configuration-file">持续更新参数</h2>        <p id="656da672">如果要永久更新JVM选项，请更新<code class="code">hub.jvmoptions</code>文件。您可以通过编程方式更新文件，也可以手动更改文件中的设置。</p>        <div class="chapter"><h3 id="update-config-file-with-command">使用命令更新JVM选项</h3>            <section class="procedure-steps"><h3 id="30a4c520">要以编程方式更新用于ZIP或MSI分发的JVM选项：</h3><ol class="list _decimal"><li class="list__item" id="42c85775"><p><a href="Starting-and-Stopping-Hub.html">停止集线器服务</a> 。</p></li><li class="list__item" id="20b2079d"><p id="3e4f5020">在命令行界面中，将目录更改为<code class="code"><hub_home>/bin</code> 。</p>                    <ul class="list _ul"><li class="list__item" id="00dc0037"><p>对于ZIP安装， <code class="code"><hub_home></code> directory是安装过程中解压缩ZIP分发包的位置。</p></li><li class="list__item" id="f8afea5f"><p>对于MSI安装， <code class="code"><hub_home></code>目录是MSI分发的安装位置。默认安装目录为<code class="code">C:\Hub</code></p></li></ul>                </li><li class="list__item" id="51204d9b"><p id="3439d07c">输入<code class="code">hub.sh configure</code>命令，后跟要在配置文件中更新的所有JVM选项。选项前的符号决定如何应用它。</p>                    <ul class="list _ul"><li class="list__item" id="8c5e5e5b"><p>使用以下选项向配置文件添加一个选项<code class="code">-</code>符号。</p></li><li class="list__item" id="d401e09c"><p>使用以下命令从配置文件中删除一个选项<code class="code">+</code>符号。如果指定一个值，则只有在其具有完全相同的值时才删除相应的选项。</p></li></ul>                    <p id="b3b40a52">例如：</p>                    <code class="code">hub.sh configure -J-XX:+HeapDumpOnOutOfMemoryError -J-Xmx1024m</code>                </li><li class="list__item" id="fa959691"><p><a href="Starting-and-Stopping-Hub.html">启动集线器服务</a> 。</p></li></ol></section>            <section class="procedure-steps"><h3 id="7fac2fd0">要以编程方式为Docker映像更新JVM选项：</h3><ol class="list _decimal"><li class="list__item" id="d6290b8c"><p><a href="Starting-and-Stopping-Hub.html">停止Hub docker容器</a> 。</p></li><li class="list__item" id="a3e429eb"><p id="8d56d87e">跑过<code class="code">configure</code>命令：</p>                    <aside class="note " rel="8d56d87e" id="216c2c0c" data-title=""><p id="b5348b39">当您执行<code class="code">configure</code>命令，请确保保留本地系统路径到<code class="code">conf</code>卷映射中的目录与在主服务器的run命令中指定的映射相同。否则，更新将不会应用于集线器配置文件。</p></aside>                    <div class="code-block" data-lang="bash">docker run -it --rm \ -v <path to="" conf="" directory="">：/ opt / hub / conf jetbrains / hub： <version>\配置\ -J <[+-] jvmOptions></version></path></div>                    <p id="ed2dce47"><code class="code">-J<[+-]jvmOptions></code> —是要在配置文件中更新的所有JVM选项的列表。选项前的符号决定如何应用它。</p>                    <ul class="list _ul"><li class="list__item" id="2cbaf6e3"><p>使用以下选项向配置文件添加一个选项<code class="code">-</code>符号。</p></li><li class="list__item" id="856ac2e1"><p>使用以下命令从配置文件中删除一个选项<code class="code">+</code>符号。如果指定一个值，则只有在其具有完全相同的值时才删除相应的选项。</p></li></ul>                    <p id="8916a54c">例如：</p>                    <div class="code-block" data-lang="bash">docker run -it --rm \ -v <path to="" conf="" directory="">：/ opt / hub / conf jetbrains / hub： <version>\配置\ -J-XX：+ HeapDumpOnOutOfMemoryError \ -J-Xmx1024m</version></path></div>                </li><li class="list__item" id="582b7b21"><p><a href="start-stop-hub-docker.html#hub-docker-start">启动Hub docker container</a> 。</p></li></ol></section>        </div>        <div class="chapter"><h3 id="modify-jvm-options-in-file">手动修改JVM选项</h3>        <p id="4a163e1a">如果您不想从命令行修改文件，则可以编辑<code class="code">hub.jvmoptions</code>手动归档。修改默认配置时，将自动创建此文件。文件的位置取决于您的集线器安装的分发类型。</p>        <aside class="note " rel="4a163e1a" id="8063ad99" data-title="Changing Database Location">            <p id="a75f726f">您不能手动更改数据库位置。服务器启动时将重写此参数。有关详细信息，请参见<a href="Change-Database-Location.html">更改数据库位置</a> 。</p>        </aside>        <ul class="list _bullet"><li class="list__item" id="12f2e7f2"><p>对于ZIP分发，该文件位于<code class="code"><Hub Installation Directory>\conf</code>目录。</p></li><li class="list__item" id="d5841f56"><p>对于MSI分发，文件位于<code class="code">%programdata%\JetBrains\Hub\conf</code>目录。</p></li><li class="list__item" id="06b75a75"><p>对于Docker映像，该文件位于<code class="code">conf</code>主机上映射到<code class="code">/opt/hub/conf</code>容器内的目录。</p></li></ul>        <p id="18d77f87">如果尚未更改服务器的JVM选项，则该目录包含一个示例配置文件。样本配置文件使用<code class="code">.dist</code>扩展名，并包含默认JVM选项的列表。如果您要编辑的文件不存在：</p>        <ul class="list _ul"><li class="list__item" id="d7aad064"><p>复制<span class="control">hub.jvmoptions.dist</span>文件并将其另存为<span class="control">hub.jvmoptions</span><br>要么</p></li><li class="list__item" id="a2b108f3"><p>在此目录中创建<span class="control">hub.jvmoptions</span>文件，然后将样本配置文件的内容粘贴到该文件中。</p></li></ul>        <p id="15c04635">然后，您可以编辑文件的内容以配置JVM选项。</p>        <section class="procedure-steps"><h3 id="2b7f4ae0">要手动更新JVM选项：</h3><ol class="list _decimal"><li class="list__item" id="c49dd821"><p><a href="Starting-and-Stopping-Hub.html">停止集线器服务</a> 。</p></li><li class="list__item" id="25d3f662"><p>打开<code class="code">hub.jvmoptions</code>文件。</p></li><li class="list__item" id="aec84ed6"><p id="76aba2d7">直接在文件中编辑JVM选项。</p>                <ul class="list _ul"><li class="list__item" id="0ab38b91"><p>要更改预定义的JVM选项的值，请取消注释相应的行并更新参数的值。</p></li><li class="list__item" id="90faf417"><p>在新行上列出每个JVM选项。</p></li></ul>            </li><li class="list__item" id="15f73e43"><p>保存并关闭文件。</p></li><li class="list__item" id="c4d68443"><p id="4ad1e39c"><a href="Starting-and-Stopping-Hub.html">启动集线器服务</a> 。</p>                <ul class="list _ul"><li class="list__item" id="d278b2d2"><p>对配置文件的更改将应用于环境。</p></li><li class="list__item" id="f0864566"><p>集线器服务开始使用指定的JVM选项。</p></li></ul>            </li></ol></section>        </div>    </div>    <div class="chapter"><h2 id="default-jvm-options" data-toc="Configure-JVM-Options#default-jvm-options">默认JVM选项</h2>        <p id="ac08b008">默认情况下，为您的Hub实例配置了以下JVM选项。</p>        <div class="code-block" data-lang="none">-ea -XX：+ HeapDumpOnOutOfMemoryError -XX：HeapDumpPath =％APP_LOGS_DIR％-XX：ErrorFile =％APP_LOGS_DIR %% FILE_SEPARATOR％hs_err_pid %% p.log -Dfile.encoding = UTF-8 * Djava.awt.headless = true -XX ：MaxPermSize = 150m -XX：MaxMetaspaceSize = 150m -Xmx600m -Dorg.eclipse.jetty.server。Request.maxFormContentSize = 5000000 -Dorg.eclipse.jetty.server。Request.maxFormKeys = 10000</div>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年9月9日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Proxy-Configuration.html">反向代理配置</a> <a class="navigation-links__next" href="Change-Database-Location.html">更改数据库位置</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>