<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>SAML 2.0 Auth Module - Help | Hub</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="saml-authentication-module"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search Hub Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>Hub 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="saml-authentication-module" id="saml-authentication-module.xml">SAML 2.0 Auth Module</h1>    <p id="88e68da7">A SAML 2.0 authentication module lets you configure Hub as a SAML Service Provider (SAML SP).        SAML supports single sign-on (SSO) across multiple domains.    </p>    <p id="d6cf0df2">When you enable an SAML 2.0 authentication module in Hub:</p>    <ul class="list _bullet"><li class="list__item" id="c571d81e"><p>Your users log in to Hub with the credentials that are managed in a specified third-party identity provider (SAML IdP).</p></li><li class="list__item" id="6c248107"><p>Your Hub users have fewer accounts and passwords to remember.</p></li><li class="list__item" id="ded3cc2e"><p>New users with accounts in the connected service can create their own accounts in Hub.</p></li></ul>    <p id="b9004937">Hub can also be set up as a SAML IdP, however, the instructions for the identity provider setup are not        described here.        To learn how to use Hub as a SAML IdP, see <a href="SAML-Management.html">SAML 2.0</a>.    </p>    <div class="chapter"><h2 id="idp-initiated-sso" data-toc="saml-authentication-module#idp-initiated-sso">IdP-initiated SSO</h2>        <p id="1f7734ed">The SAML 2.0 authentication module supports both service-provider (SP) and identity-provider (IdP) initiation for single-sign on (SSO).        The login request is based on how the user signs in to Hub.</p>        <ul class="list _ul"><li class="list__item" id="a2d1801a"><p>If the user signs in through an external login portal or access management provider (for example, OneLogin), the request is initiated by the IdP.</p></li><li class="list__item" id="6b532f79"><p>If the user signs in by clicking the button for the IdP in the Hub login page, the request is initiated by Hub as SP.</p></li></ul>        <p id="e216bad3">To support this behavior, the <code class="code">RelayState</code> parameter for your SAML IdP must be empty.            If you set a value for this parameter in the configuration for your IdP, the redirection to Hub results in a <code class="code">Can't restore state</code> error.</p>    </div>    <div class="chapter"><h2 id="add-saml-auth-module-general" data-toc="saml-authentication-module#add-saml-auth-module-general">Add a SAML2.0 Authentication Module</h2>        <section class="procedure-steps"><h3 id="add-procedure">To add a SAML2.0 Authentication module:</h3><aside class="tip sideblock" data-title="" rel="add-procedure" id="0f5929b7"><p>Requires permissions: Low-level Admin Write</p></aside><ol class="list _decimal"><li class="list__item" id="e35ceb9a"><p>In a service that you plan to use as a SAML identity provider for Hub, retrieve its parameters as the IdP.</p></li><li class="list__item" id="42ea8827"><p>If the IdP service does not provide a fingerprint of their certificate, create it applying SHA256. For example, you can use <a href="https://www.samltool.com/fingerprint.php" data-external="true" target="_blank" rel="noopener noreferrer">SAML Tool</a></p></li><li class="list__item" id="4b90e640"><p>In Hub, open the <span data-skip-index="skip" class="menupath">Administration &gt; Auth Modules</span> page.</p></li><li class="list__item" id="b69d8c7e"><p>Click the <span class="control">New module</span> button, then select <span class="control">SAML 2.0</span> from the list.            <figure><a class="lightbox" href="/help/img/hub/2019.1/new-saml-2-0-auth-module.zoomed.png"><img alt="new SAML auth module" title="new SAML auth module" src="/help/img/hub/2019.1/new-saml-2-0-auth-module.png" id="142d1315" width="600" height="284"></a></figure>            </p></li><li class="list__item" id="779be535"><p id="40c1c1f2">In the dialog, specify the parameters for the IdP service, then click the <span class="control">Create</span> button.</p>            <ul class="list _ul"><li class="list__item" id="60045a05"><p>The SAML 2.0 authentication modules is created and enabled.</p></li></ul></li><li class="list__item" id="4337ca29"><p>Configure the auth module by providing the names of the SAML attributes for user accounts in the <span class="control">Attributes</span> section of the page.</p></li></ol></section>    </div>    <div class="chapter"><h2 id="sample-configurations" data-toc="saml-authentication-module#sample-configurations">Sample Configurations</h2>        <div class="chapter"><h3 id="sample-procedure-okta">Use Okta as SAML Identity Provider in Hub</h3>            <p id="ab4be9d4">Configuring Okta as a SAML IdP in Hub is an easy but not a straight forward process. The trick is that to create an Auth module in Hub, you need to provide a unique URL for the IdP. However, in Okta, the IdP URL is specific for an application, and is generated when you create the application for the SAML SP.            And to create an application for Hub as a SAML service provider in Okta, you need the unique URL that is generated in Hub only when you create the Auth module for Okta. This "URLs loop" results in the loop in the configuration procedure: You create an application in Okta with a fake URL for Hub to generate the IdP URL, then you create an auth module in Hub to generate the SP URL, and after that you can provide the actual SP URL from Hub in the Okta application.</p>            <section class="procedure-steps"><h3 id="65ad1b28">To use use Okta as IdP for Hub:</h3><ol class="list _decimal"><li class="list__item" id="18fde381"><p>In Okta, create a new application for Hub service. Use any URLs for Hub as the SP. You need to correct it later. See the <a href="https://developer.okta.com/standards/SAML/setting_up_a_saml_application_in_okta" data-external="true" target="_blank" rel="noopener noreferrer">Okta documentation for setting up SAML application</a>.</p></li><li class="list__item" id="b171bc1f"><p>When you created the application, click the <span class="control">View Setup Instructions</span> button to open a page with the parameters of your Okta IdP:                    <figure><a class="lightbox" href="/help/img/hub/2019.1/okta-idp-app-parameters.zoomed.png"><img alt="Parameters for Okta IdP" title="Parameters for Okta IdP" src="/help/img/hub/2019.1/okta-idp-app-parameters.png" id="102d2bb5" width="600" height="300"></a></figure>                </p></li><li class="list__item" id="6cf98652"><p>Download the certificate of your Okta IdP.</p></li><li class="list__item" id="4d7ff57f"><p>Create a fingerprint for the Okta certificate applying SHA256. For example, you can use <a href="https://www.samltool.com/fingerprint.php" data-external="true" target="_blank" rel="noopener noreferrer">SAML Developer Tools</a>.</p></li><li class="list__item" id="2aa7f63c"><p>In Hub, open <span data-skip-index="skip" class="menupath">Auth Modules</span> page.</p></li><li class="list__item" id="e8ef7305"><p id="b2d2941e">Click the <span class="control">New module</span> button, then select <span class="control">SAML&nbsp;2.0</span> in the drop-down list.</p>                    <ul class="list _ul"><li class="list__item" id="cd5b739c"><p>A <span class="control">New SAML 2.0 Auth Module</span> dialog opens.</p></li></ul>                </li><li class="list__item" id="bcebaa25"><p>In the displayed dialog, specify the parameters of your Okta IdP, then click the <span class="control">Create</span> button.                    <figure><a class="lightbox" href="/help/img/hub/2019.1/okta-idp-create-new-auth-module-hub.zoomed.png"><img alt="Okta idp create new auth module hub" title="Okta idp create new auth module hub" src="/help/img/hub/2019.1/okta-idp-create-new-auth-module-hub.png" id="a216220d" width="600" height="319"></a></figure>                </p></li><li class="list__item" id="05661b16"><p>Configure the new module: Set up the SAML attributes.                    <figure><a class="lightbox" href="/help/img/hub/2019.1/okta-idp-configure-auth-module-hub.zoomed.png"><img alt="Okta idp configure auth module hub" title="Okta idp configure auth module hub" src="/help/img/hub/2019.1/okta-idp-configure-auth-module-hub.png" id="aafdf413" width="600" height="752"></a></figure>                </p></li><li class="list__item" id="b232beb6"><p>Switch back to Okta. In Okta, edit the Hub application: Provide URLs that are generated during the creation of the new auth module.</p></li><li class="list__item" id="df5fb10a"><p>Assign the Hub application to groups and users that should be able to log in to Hub with Okta credentials.</p></li></ol></section>            <p id="bc4aa6ba">That's it. Now the users can log in to Hub and connected services with their Okta credentials.</p>        </div>        <div class="chapter"><h3 id="sample-procedure-okta">Use Hub as SAML Identity Provider in Hub</h3>            <p id="3efa4344">If you have two Hub services, you can use one of them as a SAML Identity Provider and another one — as the service provider.</p>            <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="77a5a722"><p>In the Hub installation that you use as the SAML IdP, open the <span data-skip-index="skip" class="menupath">Administration &gt; SAML 2.0</span> page.                        <figure><a class="lightbox" href="/help/img/hub/2019.1/saml-hub-hub-idp-parameters.zoomed.png"><img alt="Saml hub hub idp parameters" title="Saml hub hub idp parameters" src="/help/img/hub/2019.1/saml-hub-hub-idp-parameters.png" id="7259cda5" width="600" height="353"></a></figure>                    For details about Hub as a SAML 2.0 Identity Provider, see <a href="Hub-Parameters-as-IdP.html">SAML2.0 Identity Provider Parameters</a>.                </p></li><li class="list__item" id="8181d462"><p>In Hub installation that you use as SAML service provider, open the <span class="control">Auth Modules</span> page.</p></li><li class="list__item" id="6334b6b3"><p id="fb7d5655">Click the <span class="control">New module</span> button, then select <span class="control">SAML&nbsp;2.0</span>.</p>                    <ul class="list _ul"><li class="list__item" id="6bd4b335"><p>A <span class="control">New SAML 2.0 Auth Module</span> dialog opens.</p></li></ul>                </li><li class="list__item" id="46cb4f19">                    <p id="33ae9e49">In the dialog, enter the parameters of the Hub service that you use as IdP:</p>                    <figure><a class="lightbox" href="/help/img/hub/2019.1/saml-hub2hub-auth-module-create.zoomed.png"><img alt="Saml hub2hub auth module create" title="Saml hub2hub auth module create" src="/help/img/hub/2019.1/saml-hub2hub-auth-module-create.png" id="274110e4" width="600" height="326"></a></figure>                    <p id="9aed7923">Click the <span class="control">Create</span> button.</p>                    <ul class="list _ul"><li class="list__item" id="6f1d9598"><p>The new module is created. You are navigated to the settings page the created module:</p></li></ul>                    <figure><a class="lightbox" href="/help/img/hub/2019.1/saml-hub-hub-module-created.zoomed.png"><img alt="Saml hub hub module created" title="Saml hub hub module created" src="/help/img/hub/2019.1/saml-hub-hub-module-created.png" id="507b91a2" width="600" height="397"></a></figure>                </li><li class="list__item" id="418f406a"><p>Configure SAML attributes:                    <figure><a class="lightbox" href="/help/img/hub/2019.1/saml-hub-hub-module-attributes.zoomed.png"><img alt="Saml hub hub module attributes" title="Saml hub hub module attributes" src="/help/img/hub/2019.1/saml-hub-hub-module-attributes.png" id="47589a3f" width="600" height="201"></a></figure>                </p></li><li class="list__item" id="a13dffb7"><p>In the IdP, open <span data-skip-index="skip" class="menupath">Admin menu &gt; SAML 2.0 &gt; Registered services</span> tab. Register the Hub SAML service provider:                <figure><a class="lightbox" href="/help/img/hub/2019.1/saml-hub2hub-auth-module-sp-register.zoomed.png"><img alt="Saml hub2hub auth module sp register" title="Saml hub2hub auth module sp register" src="/help/img/hub/2019.1/saml-hub2hub-auth-module-sp-register.png" id="d362172b" width="600" height="345"></a></figure>                    As SAML Attributes, provide the same values that you have set up in the <span class="control">Attributes</span> section of the auth module settings page.                    For more details, see <a href="Register-Service-Provider.html">Register a Service Provider</a>.                </p></li></ol></section>            <p id="d2be6354">You are all set! Now your users can log into the Hub SP with the credentials from the Hub service that you use as SAML IdP.</p>        </div>    </div><div class="last-modified" data-skip-index="skip">Last modified: 9 September 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="paypal-auth-module.html">PayPal Auth Module</a><a class="navigation-links__next" href="Yahoo-Authentication-Module.html">Yahoo! Auth Module</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>