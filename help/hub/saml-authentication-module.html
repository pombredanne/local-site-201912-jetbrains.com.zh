<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>SAML 2.0身份验证模块-帮助|帮助毂</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="saml-authentication-module"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索中心帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>Hub 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="saml-authentication-module.xml" data-toc="saml-authentication-module">SAML 2.0身份验证模块</h1>    <p id="88e68da7">通过SAML 2.0身份验证模块，您可以将集线器配置为SAML服务提供程序（SAML SP）。SAML支持跨多个域的单点登录（SSO）。</p>    <p id="d6cf0df2">在集线器中启用SAML 2.0身份验证模块时：</p>    <ul class="list _bullet"><li class="list__item" id="c571d81e"><p>您的用户使用在指定的第三方身份提供商（SAML IdP）中管理的凭据登录集线器。</p></li><li class="list__item" id="6c248107"><p>集线器用户需要记住的帐户和密码更少。</p></li><li class="list__item" id="ded3cc2e"><p>在已连接服务中拥有帐户的新用户可以在Hub中创建自己的帐户。</p></li></ul>    <p id="b9004937">集线器也可以设置为SAML IdP，但是，此处不介绍身份提供者设置的说明。要了解如何将集线器用作SAML IdP，请参阅<a href="SAML-Management.html">SAML 2.0</a> 。</p>    <div class="chapter"><h2 id="idp-initiated-sso" data-toc="saml-authentication-module#idp-initiated-sso">IdP发起的SSO</h2>        <p id="1f7734ed">SAML 2.0身份验证模块同时支持针对单点登录（SSO）的服务提供商（SP）和身份提供商（IdP）初始化。登录请求基于用户登录Hub的方式。</p>        <ul class="list _ul"><li class="list__item" id="a2d1801a"><p>如果用户通过外部登录门户或访问管理提供者（例如OneLogin）登录，则请求由IdP发起。</p></li><li class="list__item" id="6b532f79"><p>如果用户通过单击集线器登录页面中IdP的按钮登录，则集线器将启动请求为SP。</p></li></ul>        <p id="e216bad3">为了支持这种行为， <code class="code">RelayState</code> SAML IdP的参数必须为空。如果您在IdP的配置中为此参数设置了一个值，则重定向到集线器会导致<code class="code">Can't restore state</code>错误。</p>    </div>    <div class="chapter"><h2 id="add-saml-auth-module-general" data-toc="saml-authentication-module#add-saml-auth-module-general">添加一个SAML2.0身份验证模块</h2>        <section class="procedure-steps"><h3 id="add-procedure">要添加SAML2.0身份验证模块：</h3><aside class="tip sideblock" rel="add-procedure" id="0f5929b7" data-title=""><p>需要权限：低级管理员写</p></aside><ol class="list _decimal"><li class="list__item" id="e35ceb9a"><p>在您计划用作集线器的SAML身份提供程序的服务中，将其参数检索为IdP。</p></li><li class="list__item" id="42ea8827"><p>如果IdP服务未提供其证书的指纹，请使用SHA256创建它。例如，您可以使用<a href="https://www.samltool.com/fingerprint.php" rel="noopener noreferrer" data-external="true" target="_blank">SAML工具</a></p></li><li class="list__item" id="4b90e640"><p>在中心中，打开“ <span class="menupath" data-skip-index="skip">管理”>“身份验证模块”</span>页面。</p></li><li class="list__item" id="b69d8c7e"><p>单击“ <span class="control">新建模块”</span>按钮，然后从列表中选择<span class="control">SAML 2.0</span> 。</p><figure><a class="lightbox" href="/help/img/hub/2019.1/new-saml-2-0-auth-module.zoomed.png"><img alt="新的SAML身份验证模块" title="新的SAML身份验证模块" src="/help/img/hub/2019.1/new-saml-2-0-auth-module.png" id="142d1315" width="600" height="284"></a></figure>            <p></p></li><li class="list__item" id="779be535"><p id="40c1c1f2">在对话框中，指定IdP服务的参数，然后单击“ <span class="control">创建”</span>按钮。</p>            <ul class="list _ul"><li class="list__item" id="60045a05"><p>SAML 2.0身份验证模块已创建并启用。</p></li></ul></li><li class="list__item" id="4337ca29"><p>通过在页面的“ <span class="control">属性”</span>部分中为用户帐户提供SAML属性的名称来配置auth模块。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="sample-configurations" data-toc="saml-authentication-module#sample-configurations">样本配置</h2>        <div class="chapter"><h3 id="sample-procedure-okta">使用Okta作为Hub中的SAML身份提供程序</h3>            <p id="ab4be9d4">在Hub中将Okta配置为SAML IdP是一个简单但不直接的过程。诀窍是要在Hub中创建Auth模块，您需要为IdP提供唯一的URL。但是，在Okta中，IdP URL是特定于应用程序的，并在为SAML SP创建应用程序时生成。并且要在Okta中将Hub的应用程序创建为SAML服务提供者，您需要仅在为Okta创建Auth模块时在Hub中生成的唯一URL。此“ URL循环”导致配置过程中的循环：您在Okta中创建一个具有伪URL的应用程序，供Hub生成IDP URL，然后在Hub中创建一个auth模块以生成SP URL，然后，可以从Okta应用程序中的Hub提供实际的SP URL。</p>            <section class="procedure-steps"><h3 id="65ad1b28">要将Okta用作集线器的IdP，请执行以下操作：</h3><ol class="list _decimal"><li class="list__item" id="18fde381"><p>在Okta中，为Hub服务创建一个新的应用程序。将任何URL用作集线器作为SP。您需要稍后进行更正。请参阅<a href="https://developer.okta.com/standards/SAML/setting_up_a_saml_application_in_okta" rel="noopener noreferrer" data-external="true" target="_blank">Okta文档以设置SAML应用程序</a> 。</p></li><li class="list__item" id="b171bc1f"><p>创建应用程序时，单击“ <span class="control">查看设置说明”</span>按钮以打开包含Okta IdP参数的页面：</p><figure><a class="lightbox" href="/help/img/hub/2019.1/okta-idp-app-parameters.zoomed.png"><img alt="Okta IdP的参数" title="Okta IdP的参数" src="/help/img/hub/2019.1/okta-idp-app-parameters.png" id="102d2bb5" width="600" height="300"></a></figure>                <p></p></li><li class="list__item" id="6cf98652"><p>下载您的Okta IdP证书。</p></li><li class="list__item" id="4d7ff57f"><p>为使用SHA256的Okta证书创建指纹。例如，您可以使用<a href="https://www.samltool.com/fingerprint.php" rel="noopener noreferrer" data-external="true" target="_blank">SAML开发人员工具</a> 。</p></li><li class="list__item" id="2aa7f63c"><p>在集线器中，打开“ <span class="menupath" data-skip-index="skip">身份验证模块”</span>页面。</p></li><li class="list__item" id="e8ef7305"><p id="b2d2941e">单击“ <span class="control">新建模块”</span>按钮，然后在下拉列表中选择<span class="control">SAML 2.0</span> 。</p>                    <ul class="list _ul"><li class="list__item" id="cd5b739c"><p>将打开“ <span class="control">新的SAML 2.0身份验证模块”</span>对话框。</p></li></ul>                </li><li class="list__item" id="bcebaa25"><p>在显示的对话框中，指定Okta IdP的参数，然后单击“ <span class="control">创建”</span>按钮。</p><figure><a class="lightbox" href="/help/img/hub/2019.1/okta-idp-create-new-auth-module-hub.zoomed.png"><img alt="Okta IDP创建新的身份验证模块中心" title="Okta IDP创建新的身份验证模块中心" src="/help/img/hub/2019.1/okta-idp-create-new-auth-module-hub.png" id="a216220d" width="600" height="319"></a></figure>                <p></p></li><li class="list__item" id="05661b16"><p>配置新模块：设置SAML属性。</p><figure><a class="lightbox" href="/help/img/hub/2019.1/okta-idp-configure-auth-module-hub.zoomed.png"><img alt="Okta IDP配置身份验证模块集线器" title="Okta IDP配置身份验证模块集线器" src="/help/img/hub/2019.1/okta-idp-configure-auth-module-hub.png" id="aafdf413" width="600" height="752"></a></figure>                <p></p></li><li class="list__item" id="b232beb6"><p>切换回Okta。在Okta中，编辑Hub应用程序：提供在创建新的auth模块期间生成的URL。</p></li><li class="list__item" id="df5fb10a"><p>将集线器应用程序分配给应该能够使用Okta凭据登录到集线器的组和用户。</p></li></ol></section>            <p id="bc4aa6ba">而已。现在，用户可以使用其Okta凭据登录集线器和连接的服务。</p>        </div>        <div class="chapter"><h3 id="sample-procedure-okta">将集线器用作集线器中的SAML身份提供程序</h3>            <p id="3efa4344">如果您有两个集线器服务，则可以将其中一个用作SAML身份提供程序，将另一个用作服务提供程序。</p>            <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="77a5a722"><p>在用作SAML IdP的集线器安装中，打开“ <span class="menupath" data-skip-index="skip">管理”>“ SAML 2.0”</span>页面。</p><figure><a class="lightbox" href="/help/img/hub/2019.1/saml-hub-hub-idp-parameters.zoomed.png"><img alt="Saml Hub Hub IDP参数" title="Saml Hub Hub IDP参数" src="/help/img/hub/2019.1/saml-hub-hub-idp-parameters.png" id="7259cda5" width="600" height="353"></a></figure>有关集线器作为SAML 2.0身份提供程序的详细信息，请参阅<a href="Hub-Parameters-as-IdP.html">SAML2.0身份提供程序参数</a> 。<p></p></li><li class="list__item" id="8181d462"><p>在用作SAML服务提供程序的集线器安装中，打开“身份<span class="control">验证模块”</span>页面。</p></li><li class="list__item" id="6334b6b3"><p id="fb7d5655">单击“ <span class="control">新建模块”</span>按钮，然后选择“ <span class="control">SAML 2.0”</span> 。</p>                    <ul class="list _ul"><li class="list__item" id="6bd4b335"><p>将打开“ <span class="control">新的SAML 2.0身份验证模块”</span>对话框。</p></li></ul>                </li><li class="list__item" id="46cb4f19">                    <p id="33ae9e49">在对话框中，输入用作IdP的集线器服务的参数：</p>                    <figure><a class="lightbox" href="/help/img/hub/2019.1/saml-hub2hub-auth-module-create.zoomed.png"><img alt="Saml hub2hub身份验证模块创建" title="Saml hub2hub身份验证模块创建" src="/help/img/hub/2019.1/saml-hub2hub-auth-module-create.png" id="274110e4" width="600" height="326"></a></figure>                    <p id="9aed7923">单击<span class="control">创建</span>按钮。</p>                    <ul class="list _ul"><li class="list__item" id="6f1d9598"><p>新模块已创建。您将导航到已创建模块的设置页面：</p></li></ul>                    <figure><a class="lightbox" href="/help/img/hub/2019.1/saml-hub-hub-module-created.zoomed.png"><img alt="Saml集线器集线器模块已创建" title="Saml集线器集线器模块已创建" src="/help/img/hub/2019.1/saml-hub-hub-module-created.png" id="507b91a2" width="600" height="397"></a></figure>                </li><li class="list__item" id="418f406a"><p>配置SAML属性：</p><figure><a class="lightbox" href="/help/img/hub/2019.1/saml-hub-hub-module-attributes.zoomed.png"><img alt="Saml集线器集线器模块属性" title="Saml集线器集线器模块属性" src="/help/img/hub/2019.1/saml-hub-hub-module-attributes.png" id="47589a3f" width="600" height="201"></a></figure>                <p></p></li><li class="list__item" id="a13dffb7"><p>在IdP中，打开“ <span class="menupath" data-skip-index="skip">管理”菜单>“ SAML 2.0”>“注册的服务”</span>标签。注册集线器SAML服务提供商：</p><figure><a class="lightbox" href="/help/img/hub/2019.1/saml-hub2hub-auth-module-sp-register.zoomed.png"><img alt="Saml Hub2hub身份验证模块SP寄存器" title="Saml Hub2hub身份验证模块SP寄存器" src="/help/img/hub/2019.1/saml-hub2hub-auth-module-sp-register.png" id="d362172b" width="600" height="345"></a></figure>作为SAML属性，提供与在auth模块设置页面的“ <span class="control">属性”</span>部分中设置的相同的值。有关更多详细信息，请参见<a href="Register-Service-Provider.html">注册服务提供商</a> 。<p></p></li></ol></section>            <p id="d2be6354">你们都准备好了！现在，您的用户可以使用用作SAML IdP的集线器服务的凭据登录集线器SP。</p>        </div>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年9月9日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="paypal-auth-module.html">贝宝认证模块</a> <a class="navigation-links__next" href="Yahoo-Authentication-Module.html">Yahoo!验证模块</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>