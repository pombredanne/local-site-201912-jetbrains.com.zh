<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>在Microsoft Azure上托管集线器实例-帮助|帮助毂</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Host-Hub-on-Microsoft-Azure"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索中心帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>Hub 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Host-Hub-on-Microsoft-Azure.xml" data-toc="Host-Hub-on-Microsoft-Azure">在Microsoft Azure上托管集线器实例</h1>    <p id="6a926276">云托管使您可以灵活地向网络添加资源，而无需安装和维护自己的服务器。如果您不想托管自己的Hub实例，则可以在Microsoft Azure托管的虚拟机上安装Hub。</p>    <p id="889d1dbb">本指南介绍如何配置虚拟机以及如何在Microsoft Azure帐户中安装集线器。您可以使用多种不同的配置在托管环境中运行Hub。本指南中的设置使用以下组件：</p>    <ul class="list _ul"><li class="list__item" id="a5fe9ed0"><p>适用于虚拟机的Windows Server 2012 R2数据中心</p></li><li class="list__item" id="6da07a98"><p>集线器MSI分发的安装软件包</p></li></ul>    <p id="12b89cdd">如果要使用其他类型的虚拟机或安装，仍可以按照本指南的一般设置指南进行操作。</p>    <div class="chapter"><h2 id="azure-hosting=-overview" data-toc="Host-Hub-on-Microsoft-Azure#azure-hosting=-overview">总览</h2>        <p id="edf52a39">若要在Microsoft Azure中托管集线器实例，请执行以下步骤：</p>        <ul class="list _ul"><li class="list__item" id="8df9f2a3"><p><a href="#creating-virtual-machine">创建一个虚拟机</a> 。</p></li><li class="list__item" id="e5988357"><p><a href="#add-endpoints-to-vm">将端点添加到虚拟机</a> 。</p></li><li class="list__item" id="500a5cd4"><p><a href="#open-http-port-firewall">在防火墙中打开一个HTTP端口</a> 。</p></li><li class="list__item" id="eb6a3a3c"><p><a href="#install-hub-on-ms-azure">安装集线器</a> 。</p></li></ul>    </div>    <div class="chapter"><h2 id="azure-hosting=-prerequisites" data-toc="Host-Hub-on-Microsoft-Azure#azure-hosting=-prerequisites">先决条件</h2>        <p id="132b2a04">此设置要求您具有活动的Microsoft Azure订阅。</p>        <ul class="list _ul"><li class="list__item" id="d49f2a0f"><p>托管Hub所需的存储量取决于Hub数据库的大小。</p></li><li class="list__item" id="419bd2db"><p>如果您的订阅中尚未包含独立的虚拟机，则需要创建一个。</p></li></ul>        <p id="756e356e">如果您没有Microsoft Azure订阅，则可以注册30天的免费试用期。通过该试用版，您可以创建和试用Azure资源的任意组合。有关更多信息，请访问<a href="https://azure.microsoft.com/en-us/free/" rel="noopener noreferrer" data-external="true" target="_blank">Microsoft Azure官方网站</a> 。</p>    </div>    <div class="chapter"><h2 id="creating-virtual-machine" data-toc="Host-Hub-on-Microsoft-Azure#creating-virtual-machine">创建一个虚拟机</h2>        <p id="41175c97">首先，您需要将虚拟机添加到Microsoft Azure订阅中。如果您已经有一个虚拟机，该虚拟机具有足够的可用资源来承载Hub，请跳过此过程，然后<a href="#add-endpoints-to-vm">继续下一步</a> 。</p>        <aside class="note " rel="41175c97" id="f08e5dbe" data-title="">            <p id="956bb4b4">本指南向您显示设置Microsoft Azure环境的几个选项之一。</p>            <p id="5fd2c8b7">有关其他选项，请参考<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/quick-create-portal" rel="noopener noreferrer" data-external="true" target="_blank">Microsoft Azure网站</a>上的文档。</p></aside>        <section class="procedure-steps"><h3 id="27b4c481">要创建虚拟机：</h3><ol class="list _decimal"><li class="list__item" id="12352204"><p>登录到<a href="https://portal.azure.com/" rel="noopener noreferrer" data-external="true" target="_blank">Microsoft Azure管理门户</a> 。</p></li><li class="list__item" id="bd9ce81c"><p>单击“ <span class="control">新建”</span>按钮，然后选择“ <span class="control">虚拟机”</span> 。</p></li><li class="list__item" id="e0c4b3d8"><p id="e2f5c463">从列表中选择一个图像。您可以在Windows或Linux服务器上运行Hub。此安装程序使用Windows Server 2012 R2数据中心。</p>                <p id="89259b6b"></p><figure><a class="lightbox" href="/help/img/hub/2019.1/AzureNewHubVM_thumbnail.zoomed.png"><img alt="Azure新集线器VM" title="Azure新集线器VM" src="/help/img/hub/2019.1/AzureNewHubVM_thumbnail.png" id="1cd51df3" width="600" height="338"></a></figure><p></p></li><li class="list__item" id="d03d6937"><p>从“ <span class="control">选择部署模型”</span>下拉列表中，选择“ <span class="control">经典”</span> 。</p></li><li class="list__item" id="bb79b206"><p id="0dbf128a">单击<span class="control">创建</span>按钮。</p>                <ul class="list _ul"><li class="list__item" id="50239dc1"><p>将打开“ <span class="control">创建VM”</span>向导。</p><figure><a class="lightbox" href="/help/img/hub/2019.1/AzureCreateHubVM_thumbnail.zoomed.png"><img alt="Azure创建中心虚拟机" title="Azure创建中心虚拟机" src="/help/img/hub/2019.1/AzureCreateHubVM_thumbnail.png" id="7bdf0938" width="600" height="341"></a></figure><p></p></li></ul></li><li class="list__item" id="2550d59f"><p id="1dead588">输入以下设置的值：</p>                <div class="table-wrapper"><table width="100%" id="e8d8c774"><thead><tr id="355f7c91" class="ijRowHead"><th id="57bea30b" width="20%"><p>设置</p></th><th id="6ffb4d96"><p>描述</p></th></tr></thead><tbody><tr id="73135f9e" class="ijRowOdd"><td id="2e777b89"><p>主机名</p></td><td id="57728797"><p>输入虚拟机的名称。此值将作为前缀添加到用于远程访问计算机的DNS名称。为虚拟机分配一个始终使用子域的唯一DNS名称<code class="code">.cloudapp.net</code> 。如果要使用自定义域名，请在继续此设置的下一步之前<a href="https://docs.microsoft.com/en-us/azure/cloud-services/cloud-services-custom-domain-name-portal" rel="noopener noreferrer" data-external="true" target="_blank">配置自定义域名</a> 。</p></td></tr><tr id="8a59d604" class="ijRowEven"><td id="9f1ca0bf"><p>用户名</p></td><td id="c2c84d78"><p>输入用于管理虚拟机的用户帐户的名称。</p></td></tr><tr id="2d27baae" class="ijRowOdd"><td id="c5dddb68"><p>密码</p></td><td id="7451db1d"><p>设置用于访问虚拟机的用户帐户的密码。</p></td></tr></tbody></table></div></li><li class="list__item" id="b710afb3"><p>在“ <span class="control">定价层”</span>部分中，选择虚拟机的大小。</p></li><li class="list__item" id="51a01696"><p>在“ <span class="control">位置”</span>部分中，选择离您最近的位置以减少延迟。</p></li><li class="list__item" id="5325f35e"><p id="dc71fc18">单击<span class="control">创建</span>按钮。</p>                <ul class="list _ul"><li class="list__item" id="a1b2e6fa"><p>虚拟机已创建并添加到您的订阅中。根据虚拟机的大小，这可能需要一些时间。虚拟机的状态显示在工具栏的“ <span class="control">通知”</span>窗格下。</p></li></ul></li></ol></section>        <p id="cfa21475">虚拟机设置完成后，即可继续下一步。</p>    </div>    <div class="chapter"><h2 id="add-endpoints-to-vm" data-toc="Host-Hub-on-Microsoft-Azure#add-endpoints-to-vm">将端点添加到虚拟机</h2>        <p id="eebb0212">创建新的Windows虚拟机时，将打开TCP端口3389与远程桌面连接。Linux虚拟机使用TCP端口22允许SSH连接。要使外部用户能够访问您的集线器服务，您需要在虚拟机中设置服务的入口点。</p>        <section class="procedure-steps"><h3 id="3e333aff">要将端点添加到虚拟机：</h3><ol class="list _decimal"><li class="list__item" id="e2533cb4"><p>在Microsoft Azure门户中选择虚拟机的名称。</p></li><li class="list__item" id="7792041a"><p>单击工具栏中的<span class="control">设置</span>按钮。</p></li><li class="list__item" id="1cf1fc05"><p>在<span class="control">常规</span>部分中，点击<span class="control">端点</span> 。</p></li><li class="list__item" id="f21e0881"><p id="2ac27fa8">单击工具栏中的“ <span class="control">添加”</span>按钮。</p>                <p id="ed6df08c"></p><figure><a class="lightbox" href="/help/img/hub/2019.1/AzureVMEndpointHub_thumbnail.zoomed.png"><img alt="Azure VM端点集线器" title="Azure VM端点集线器" src="/help/img/hub/2019.1/AzureVMEndpointHub_thumbnail.png" id="9cd1e961" width="600" height="269"></a></figure><p></p></li><li class="list__item" id="25054ed4"><p id="f678c5e2">在“ <span class="control">添加端点”</span>刀片中，输入以下设置的值：</p>                <div class="table-wrapper"><table width="100%" id="91f499b2"><thead><tr id="bab6f7db" class="ijRowHead"><th id="9c11942a" width="20%"><p>设置</p></th><th id="1ce10c39"><p>描述</p></th></tr></thead><tbody><tr id="a362eb95" class="ijRowOdd"><td id="e4ff0009"><p>名称</p></td><td id="1a33b299"><p>输入端点的名称，例如， <code class="code">Hub</code> 。</p></td></tr><tr id="c9e2ea1a" class="ijRowEven"><td id="f56732ec"><p>协议</p></td><td id="9b4b8b10"><p>选择“ <span class="control">TCP”</span> 。</p></td></tr><tr id="bf5e8282" class="ijRowOdd"><td id="bada613d"><p>公共港口</p></td><td id="28a93246"><p>输入<code class="code">80</code> 。</p></td></tr><tr id="859f8c8e" class="ijRowEven"><td id="11b6c6be"><p>私人港口</p></td><td id="6ed647d7"><p>输入<code class="code">80</code> 。</p></td></tr></tbody></table></div></li><li class="list__item" id="3185ad53"><p id="924ecbcc">单击<span class="control">确定</span>按钮。</p>                <ul class="list _ul"><li class="list__item" id="aa1d1a43"><p>虚拟机终端端口已保存。虚拟机的状态显示在工具栏的“ <span class="control">通知”</span>窗格下。</p></li></ul></li></ol></section>        <p id="3a2fd4b9">既然您已经配置了虚拟机，请继续下一步配置防火墙。</p>    </div>    <div class="chapter"><h2 id="open-http-port-firewall" data-toc="Host-Hub-on-Microsoft-Azure#open-http-port-firewall">在防火墙中打开HTTP端口</h2>        <p id="e2ab0b27">此设置中使用的虚拟机映像包括一个预先配置的防火墙。如果您的虚拟机启用了防火墙，则需要打开端口以允许通过HTTP访问集线器。</p>        <section class="procedure-steps"><h3 id="bce48b76">要在Windows防火墙中打开端口，请执行以下操作：</h3><ol class="list _decimal"><li class="list__item" id="a173c441"><p>在Microsoft Azure门户中选择虚拟机的名称。</p></li><li class="list__item" id="1995e274"><p id="1b8450c7">单击工具栏中的“ <span class="control">连接”</span>按钮。</p>                <ul class="list _ul"><li class="list__item" id="8aadf5ca"><p>与虚拟机的远程桌面连接将下载到本地目录。</p></li></ul></li><li class="list__item" id="b21621f4"><p>使用创建虚拟机时输入的用户名和密码打开远程桌面连接。</p></li><li class="list__item" id="b21f3c35"><p>在<span class="control">服务器管理器中</span> ，选择“ <span class="control">本地服务器”</span> 。</p></li><li class="list__item" id="098c2c58"><p id="d97073c8">在“ <span class="control">属性”</span>部分中，单击“ <span class="control">Windows防火墙”</span>属性旁边的链接。</p>                <figure><a class="lightbox" href="/help/img/hub/2019.1/AzureLocalServerHub_thumbnail.zoomed.png"><img alt="Azure本地服务器中心" title="Azure本地服务器中心" src="/help/img/hub/2019.1/AzureLocalServerHub_thumbnail.png" id="87643c66" width="600" height="152"></a></figure>                <ul class="list _ul"><li class="list__item" id="b9079ec0"><p><span class="control">Windows防火墙</span>窗口打开。</p></li></ul></li><li class="list__item" id="4bdf6891"><p id="eafc399c">单击<span class="control">高级设置</span>链接。</p>                <ul class="list _ul"><li class="list__item" id="dca84ba8"><p>将打开“ <span class="control">具有高级安全性</span>的<span class="control">Windows防火墙”</span>对话框。</p></li></ul></li><li class="list__item" id="72b6e7be"><p id="ac88f9a9">右键单击“ <span class="control">入站规则”，</span>然后选择“ <span class="control">新建规则”</span>选项。</p>                <figure><a class="lightbox" href="/help/img/hub/2019.1/AzureNewFirewallRule_thumbnail.zoomed.png"><img alt="Azure新防火墙规则" title="Azure新防火墙规则" src="/help/img/hub/2019.1/AzureNewFirewallRule_thumbnail.png" id="8168fb84" width="600" height="446"></a></figure>                <ul class="list _ul"><li class="list__item" id="9bd88aca"><p>将打开“ <span class="control">新建入站规则向导”</span> 。</p></li></ul></li><li class="list__item" id="4b56d027"><p id="828319dd">请按照向导中的步骤配置规则，如下所示：</p>                <div class="table-wrapper"><table width="100%" id="f2ca84ba"><thead><tr id="c4844060" class="ijRowHead"><th id="ccb10d15" width="20%"><p>步</p></th><th id="d6769942"><p>选项</p></th></tr></thead><tbody><tr id="6ddfd264" class="ijRowOdd"><td id="ec5a41a7"><p>规则类型</p></td><td id="45cd1e57"><p>选择<span class="control">端口</span> 。</p></td></tr><tr id="f27e0eec" class="ijRowEven"><td id="89800630"><p>协议和端口</p></td><td id="5b43987c"><ul class="list _ul"><li class="list__item" id="edb844a5"><p>选择“ <span class="control">TCP”</span> 。</p></li><li class="list__item" id="267c823c"><p>在“ <span class="control">特定本地端口”</span>输入字段中，输入<code class="code">80</code> 。</p></li></ul></td></tr><tr id="051470ab" class="ijRowOdd"><td id="1ee17a7c"><p>行动</p></td><td id="766d73e1"><p>选择“ <span class="control">允许连接”</span> 。</p></td></tr><tr id="82a926a5" class="ijRowEven"><td id="6488a855"><p>轮廓</p></td><td id="1b033702"><p>将规则应用于所有防火墙模式。</p></td></tr><tr id="e19efdba" class="ijRowOdd"><td id="2ce5272c"><p>名称</p></td><td id="95708e93"><p>输入名称，例如， <code class="code">Allow Hub</code> 。输入可选说明。</p></td></tr></tbody></table></div></li><li class="list__item" id="82fa28da"><p id="cc0c41e8">完成后，单击<span class="control">完成</span>按钮。</p>                <ul class="list _ul"><li class="list__item" id="838a3591"><p>防火墙规则已启用。</p></li></ul></li></ol></section>        <p id="bad40bf9">或者，您可以打开<span class="control">Windows PowerShell</span>并输入以下命令：</p>        <div class="code-block" data-lang="bash">netsh advfirewall防火墙添加规则名称=“ Hub” dir =起作用=允许协议= TCP localport = 80</div>        <p id="0addd4aa">既然您已经打开了集线器将使用的端口，请保持登录到远程桌面连接并继续最后一步。</p>    </div>    <div class="chapter"><h2 id="install-hub-on-ms-azure" data-toc="Host-Hub-on-Microsoft-Azure#install-hub-on-ms-azure">安装集线器</h2>        <p id="4dbe86dc">在虚拟机上安装集线器的过程与任何其他集线器安装类似。您可以安装要使用的任何分发类型。此设置遵循<a href="Installing-Hub-with-MSI-Distribution.html">MSI分发</a>的<a href="Installing-Hub-with-MSI-Distribution.html">安装过程</a> 。</p>        <p id="32c1197e">Windows虚拟机包括Internet Explorer作为默认浏览器，但是，将浏览器配置为使用增强的安全性配置。此配置不信任任何网站，并禁用下载。在继续安装之前：</p>        <ul class="list _ul"><li class="list__item" id="20b78664"><p>禁用Internet Explorer增强的安全性。<br>要么</p></li><li class="list__item" id="13cff5c2"><p>下载并安装其他Web浏览器。如果安装其他浏览器，请将其设置为操作系统的默认浏览器。</p></li></ul>        <section class="procedure-steps"><h3 id="efbaf848">要安装集线器：</h3><ol class="list _decimal"><li class="list__item" id="d3c8fea7"><p>从<a href="/hub/download/#section=windows-version" rel="noopener noreferrer" data-external="true" target="_blank">JetBrains网站</a>下载MSI发行版。</p></li><li class="list__item" id="85959284"><p id="172a1cd5">打开Windows Installer程序包（MSI文件）。</p>                <ul class="list _ul"><li class="list__item" id="31efb32e"><p>将打开“ <span class="control">JetBrains集线器设置向导”</span> 。</p></li></ul>            </li><li class="list__item" id="3ddf9b4b"><p id="4f01c34f">请按照安装向导中的说明进行操作。</p>                <ul class="list _ul"><li class="list__item" id="a814cd1d"><p>安装向导完成后，基于Web的配置向导将在默认浏览器中打开。</p></li></ul>            </li><li class="list__item" id="b232d6b3"><p>在<span class="control">配置向导中</span> ，单击“ <span class="control">设置”</span> 。</p></li><li class="list__item" id="08d4b194"><p>在“ <span class="control">确认设置”</span>页面上，将“ <span class="control">基本URL”</span>更改为虚拟机的完整DNS名称。这样可以确保包含指向您的Hub实例的链接的通知都指向正确的URL。</p><figure><a class="lightbox" href="/help/img/hub/2019.1/azure-change-hub-base-url.zoomed.png"><img alt="MS Azure上的中心：更改中心基础URL" title="MS Azure上的中心：更改中心基础URL" src="/help/img/hub/2019.1/azure-change-hub-base-url.png" id="4a9aef4d" width="600" height="427"></a></figure>            <p></p></li><li class="list__item" id="f05f8928"><p>继续执行向导中的其余步骤。</p></li><li class="list__item" id="160b5044"><p id="ae367076">完成后，点击<span class="control">完成</span> 。</p>                <ul class="list _ul"><li class="list__item" id="d8310f8d"><p>该配置将应用于您的集线器服务器。</p></li></ul>                <p id="33846487">设置完成之前，请勿在浏览器中关闭页面。当集线器服务器准备就绪时，您将被重定向到登录页面。</p>            </li><li class="list__item" id="dad012e8"><p id="671fe059">输入您在配置期间创建的管理员帐户的凭据，然后单击“ <span class="control">登录”</span>按钮。</p>                <ul class="list _ul"><li class="list__item" id="411830f8"><p>集线器将打开“ <span class="control">用户”</span>页面。</p></li></ul>                </li></ol></section>        <p id="2490eecd">而已。您的Hub实例已安装并可以在云中使用。</p>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年9月9日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Change-Database-Location.html">更改数据库位置</a> <a class="navigation-links__next" href="Manage-the-Default-Admin-Account.html">管理默认管理员帐户</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>