<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Restore a ZIP Installation - Help | Hub</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Restore-ZIP-Installation"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search Hub Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>Hub 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Restore-ZIP-Installation" id="Restore-ZIP-Installation.xml">Restore a ZIP Installation</h1>    <a name="intro"></a>    <p id="d8ad6f43">If you experience problems with your Hub installation, you may need to restore to the most recent working version.    Common scenarios that require that you restore an installation include:</p>    <ul class="list _ul"><li class="list__item" id="a91000e9"><p>You are unable to upgrade your installation successfully and need to restore the previously-installed version.</p></li><li class="list__item" id="b5fdbcee"><p>The database of your installation breaks and you need to restore the current version from a backup copy of your database. </p></li></ul>    <p id="90cf0fe0">In both cases, you can restore your installation using a valid backup of your Hub database.        If your backups are out of date, you can attempt to restore your installation using valid copies of your configuration and data files.        Restoration is only possible if you have either a valid backup or a copy of your database that is not corrupted.</p>    <p id="b2b1f5ff">You should test this procedure on a regular basis to make sure you can use your backup files to restore your installation after an outage or attack.</p>        <div class="chapter"><h2 id="prerequisites" data-toc="Restore-ZIP-Installation#prerequisites">Prerequisites</h2>        <aside class="note " data-title="Note" rel="prerequisites" id="7a9d8252">            <p id="08e9f14b">To restore your database from a backup successfully, the version of the backup file should be the same or                earlier than the version of Hub to which you restore this database.            </p>            <p id="438448b3">If you don't have valid backup files or your backup files are out of date, follow the instructions to                <a href="#restore-without-database-backup">Restore the Current Version Without a Database Backup</a>.            </p>        </aside>        <p id="1c0693f3">Before you begin, make sure you have a backup copy of the database that you want to restore.            Note the location of the backup copy so you are sure to select the correct file during this procedure.        </p>        <ul class="list _ul"><li class="list__item" id="e3c7ec6f"><p>If you're rolling back to the previous installation version after an unsuccessful upgrade, use the                backup that you created prior to installation.                If you ignored this prerequisite, locate a backup file that corresponds with the version of your                previous installation.            </p></li><li class="list__item" id="067785c1"><p>If you're attempting to restore the current installation, locate&nbsp;an archived&nbsp;backup file in the                directory that is set as the <span class="control">Backup location</span> that corresponds with the current                version of your installation.            </p></li></ul>    </div>    <div class="chapter"><h2 id="restore-from-database-backup" data-toc="Restore-ZIP-Installation#restore-from-database-backup">Restore an Installation from a Backup Copy of Your Database</h2>        <p id="e44230b4">To restore your database to the current or previous version, you need to reinstall Hub and use the backup as            the <span class="control">Upgrade Source</span> during installation.        </p>        <p id="9eb4bfd5">When you restore to a previous version of Hub, use a backup that corresponds to the version of the product            that you want to restore.        </p>        <section class="procedure-steps"><h3 id="5c4a7be0">To restore your database from a backup:</h3><aside class="tip sideblock" data-title="" rel="5c4a7be0" id="7d7617ff"><p>Requires permissions: Low-level Admin Write</p></aside><ol class="list _decimal"><li class="list__item" id="e8bc82a2"><p>Stop the Hub service.                For detailed instructions, see<a href="Starting-and-Stopping-Hub.html">Stop and Start the Hub Service</a>.            </p></li><li class="list__item" id="330fec11"><p>Remove the&nbsp;<code class="code">&lt;hub_home&gt;</code> directory.                The <code class="code">&lt;hub_home&gt;</code> directory is the location where the ZIP distribution was unpacked                during installation.                If the backup copy of the database that you want to use to restore your installation is located in this                directory, move it to another location.            </p></li><li class="list__item" id="4f1d1515"><p>Download and install a Hub build that is the same version or later than the version of your database                backup.                For detailed instructions, see<a href="Installing-Hub-with-Zip-Distribution.html">ZIP Installation</a>.            </p></li><li class="list__item" id="75ec23a9"><p>In the <span class="control">Configuration Wizard</span>, select the&nbsp;<span class="control">Upgrade</span> option.            </p></li><li class="list__item" id="3254356a"><p>On the <span class="control">Select Upgrade Source</span> page, select your backup as the <span class="control">Upgrade                Source            </span> and click the <span class="control">Next</span> button.            </p></li><li class="list__item" id="b5e2d118"><p id="3ba04283">Confirm or change the locations where Hub stores product data. When done, click the <span class="control">Next</span> button.</p>                <ul class="list _ul"><li class="list__item" id="a2d97a34"><p>Hub starts with the data from the backup file.</p></li></ul>            </li></ol></section>    </div>    <div class="chapter"><h2 id="restore-without-database-backup" data-toc="Restore-ZIP-Installation#restore-without-database-backup">Restore the Current Version Without a Database Backup</h2>        <p id="950d4aee">There are a few cases where you are unable to restore you installation from backup.</p>        <ul class="list _ul"><li class="list__item" id="0dd63a2b"><p>Your backup files are missing or out of date.</p></li><li class="list__item" id="9c90fae1"><p>The files on your server became corrupted and are unusable.</p></li></ul>        <p id="4e99672c">You may also want to follow this procedure when, for example, you were able to recover your data following a            server crash and there is information that was recorded in Hub that is not in your most recent backup files.        </p>        <p id="e6f42af5">You can attempt to restore the current version of your installation using valid copies of your configuration            and data files.            This restoration procedure is only successful when your configuration and data files are not corrupted.            You can restore to an earlier version of Hub only when you have copies of files that have never been used to            start a later version of the product.        </p>        <section class="procedure-steps"><h3 id="6f95da73">To restore your database without a backup:</h3><aside class="tip sideblock" data-title="" rel="6f95da73" id="e425be23"><p>Requires permissions: Low-level Admin Write</p></aside><ol class="list _decimal"><li class="list__item" id="7adfb9bb"><p>Locate the most recent copies of your <code class="code">data</code> and <code class="code">conf</code> directories.                By default, these directories are stored in the location where the ZIP distribution was unpacked during                installation.                <br>                Note that an administrator may have changed the location where Hub stores these files.                The path to the current location of the database is stored in the <code class="code">data-dir</code> parameter in the                <code class="code">&lt;hub_home&gt;/conf/internal/bundle.properties</code> file.                You may also use copies of these directories that are stored in another location.            </p></li><li class="list__item" id="d8d4ceb0"><p id="600d8cf2">Copy the <code class="code">conf</code> directory and the <code class="code">hub</code> subdirectory from the <code class="code">data</code> folder.                Paste them into a single, empty directory.</p>                <ul class="list _ul"><li class="list__item" id="f901af90"><p>If your database is stored in the default location, you can copy these files from the location                        shown in the following image and structure the content of the new directory as shown on the                        right.                        <figure><a class="lightbox" href="/help/img/hub/2019.1/restore-hub-zip-default-data-folder.zoomed.png"><img alt="Restore hub zip default data folder" title="Restore hub zip default data folder" src="/help/img/hub/2019.1/restore-hub-zip-default-data-folder.png" id="7805f600" width="483" height="457"></a></figure>                    </p></li><li class="list__item" id="1faf7958"><p>If your database is stored in another location, reference the <code class="code">bundle.properties</code> file                        to locate the data files and recreate the structure as shown on the right.                        <figure><a class="lightbox" href="/help/img/hub/2019.1/restore-hub-zip-non-default-data-folder.zoomed.png"><img alt="Restore hub zip non default data folder" title="Restore hub zip non default data folder" src="/help/img/hub/2019.1/restore-hub-zip-non-default-data-folder.png" id="7054b2d6" width="600" height="472"></a></figure>                    </p></li></ul>            </li><li class="list__item" id="09ac836f"><p>Compress the contents of the new directory into an archive file.                You can use any filename.            </p></li><li class="list__item" id="ae0137e1"><p>Make sure that the service user account you use to run Hub has full access to this directory.</p></li><li class="list__item" id="0ab7137c"><p>Stop the Hub service.                For detailed instructions, see<a href="Starting-and-Stopping-Hub.html">Stop and Start the Hub Service</a>.            </p></li><li class="list__item" id="6dc6b657"><p>Install a Hub build that is the same version or later than the version of your database.</p></li><li class="list__item" id="e4077635"><p>In the <span class="control">Configuration Wizard</span>, select the <span class="control">Upgrade</span> option.            </p></li><li class="list__item" id="95920179"><p>On the <span class="control">Select Upgrade Source</span> page, select the directory that contains your                <code class="code">data</code> and <code class="code">conf</code> directories as the <span class="control">Upgrade Source</span> and                click the <span class="control">Next</span> button.                Alternatively, you can use a <code class="code">.zip</code> or <code class="code">tar.gz</code> archive file that contains the                content of these directories.            </p></li><li class="list__item" id="98c01a5f"><p id="c2a29a79">Confirm or change the locations where Hub stores product data. When done, click the                <span class="control">Next</span> button.</p>                <ul class="list _ul"><li class="list__item" id="eb7b3b95"><p>Hub starts with the data from the configuration and data files.</p></li></ul>            </li></ol></section>    </div><div class="last-modified" data-skip-index="skip">Last modified: 9 September 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Upgrade-with-a-ZIP-Distribution.html">Upgrade with a ZIP Distribution</a><a class="navigation-links__next" href="start-stop-hub-zip.html">Start and Stop Hub ZIP</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>