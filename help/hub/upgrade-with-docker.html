<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Upgrade with Docker - Help | Hub</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="upgrade-with-docker"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search Hub Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>Hub 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="upgrade-with-docker" id="upgrade-with-docker.xml">Upgrade with Docker</h1>    <p id="d83ac6d0">This page describes scenarios of upgrading an existing Hub service with the Hub docker image.</p><div class="chapter"><h2 id="upgrading-docker-image" data-toc="upgrade-with-docker#upgrading-docker-image">Upgrade Docker Installations</h2>    <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="29123562"><p><a href="Backing-up-and-restoring-data.html">Create a backup</a> of the Hub database while your existing Hub installation is running.</p></li><li class="list__item" id="15628c23"><p><a href="start-stop-hub-docker.html#stop-docker-container">Stop the running Hub docker container</a>.</p></li><li class="list__item" id="0dc7fd15"><p id="8cc3cda4">Pull an image of the latest Hub version from the <a href="https://hub.docker.com/r/jetbrains/hub/" data-external="true" target="_blank" rel="noopener noreferrer">Docker Hub Repository</a>:</p>            <div class="code-block" data-lang="bash">
                docker pull jetbrains/hub:&lt;version&gt;
    </div>            <p id="66c3d3b8">Where <code class="code">&lt;version&gt;</code> is a full version number of an Hub build.                <a href="https://hub.docker.com/r/jetbrains/hub/tags/" data-external="true" target="_blank" rel="noopener noreferrer">See the complete list of available versions.</a></p>        </li><li class="list__item" id="f8eb4115">            <p id="e7e7c061">Execute the following command to run a container with the new Hub version, that you have pulled from the repository.            All other attributes of the command (volumes and port mappings) must be the same as those that you used            with the previous version of the Hub image:</p>            <div class="code-block" data-lang="bash">
                docker run -it --name &lt;hub-server-instance&gt; \
                -v &lt;path to data directory&gt;:/opt/hub/data \
                -v &lt;path to conf directory&gt;:/opt/hub/conf \
                -v &lt;path to logs directory&gt;:/opt/hub/logs \
                -v &lt;path to backups directory&gt;:/opt/hub/backups \
                -p &lt;port on host&gt;:8080 \
                jetbrains/hub:&lt;new version&gt;
    </div>            <ul class="list _ul"><li class="list__item" id="48ee169a"><p>In the console, an URL to the web-based configuration wizard is displayed.</p></li></ul>        </li><li class="list__item" id="f89d5454"><p>Open the URL in a browser. The settings from the current database are displayed:            <figure><a class="lightbox" href="/help/img/hub/2019.1/docker-upgrade-http-confirm.zoomed.png"><img alt="Docker upgrade confirm settings" title="Docker upgrade confirm settings" src="/help/img/hub/2019.1/docker-upgrade-http-confirm.png" id="19ebaa59" width="600" height="696"></a></figure>        </p></li><li class="list__item" id="7acf8406"><p>Review the settings, and click the <span class="control">Upgrade</span> button.</p></li></ol></section>    <p id="14dbd144">The Hub service starts with the updated Hub version.</p></div>    <div class="chapter"><h2 id="hub-zip-msi-to-docker" data-toc="upgrade-with-docker#hub-zip-msi-to-docker">Upgrade Non-Docker Installations</h2>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="30ea5a67"><p><a href="Backing-up-and-restoring-data.html">Create a backup</a> of the Hub database while your existing Hub installation is running.</p></li><li class="list__item" id="cc38d199"><p><a href="Starting-and-Stopping-Hub.html">Stop the existing Hub service</a>.</p></li><li class="list__item" id="28cef802"><p id="094cda5b">Pull an image of the latest Hub version from the Docker Hub Repository:</p>                <div class="code-block" data-lang="bash">
                    docker pull jetbrains/hub:&lt;version&gt;
    </div>                <p id="60d2b0de">Where &lt;version&gt; is a full version number of an Hub build.</p>            </li><li class="list__item" id="c4748bac"><a href="docker-installation.html#create-and-configure-directories">Create and configure Hub-specific directories on the host machine.</a></li><li class="list__item" id="4f0fa289"><p>Copy the backup file of the Hub database into the <code class="code">backups</code> directory, that you created in the previous step.</p></li><li class="list__item" id="99d82df9"><p id="e4f2a8d5">Execute the following command to run a container with Hub server and map Hub data volumes and port:</p>            <div class="code-block" data-lang="bash">
                docker run -it --name &lt;hub-server-instance&gt; \
                -v &lt;path to data directory&gt;:/opt/hub/data \
                -v &lt;path to conf directory&gt;:/opt/hub/conf \
                -v &lt;path to logs directory&gt;:/opt/hub/logs \
                -v &lt;path to backups directory&gt;:/opt/hub/backups \
                -p &lt;port on host&gt;:8080 \
                jetbrains/hub:&lt;version&gt;
    </div>            <p id="018cab6b">Attributes used with the command:</p>                <ul class="list _bullet"><li class="list__item" id="a6d24626"><p>                        <code class="code">-it</code> — a flag that attaches Hub container input and output including the startup                        logs to the                        terminal window. Note that pressing `Ctrl+C` when the terminal is attached to a container output                        causes                        the container to shut down. Use `Ctrl+PQ` in order to detach the terminal from container output. For                        more details, see <a href="https://docs.docker.com/engine/reference/commandline/attach/#extended-description" data-external="true" target="_blank" rel="noopener noreferrer">the official docker documentation</a>.                    </p></li><li class="list__item" id="cefafe61"><p>                        <code class="code">--name hub-server-instance</code> — the arbitrary name for the container.                    </p></li><li class="list__item" id="d6732774"><p>                        <code class="code">-v &lt;path to NNN directory&gt;:/opt/hub/NNN</code> — binding the Hub-specific 'NNN'                        directory on the                        host machine to the respective <code class="code">/opt/hub/NNN</code> directory inside the container.                    </p></li><li class="list__item" id="184428a1"><p>                        <code class="code">-p &lt;port on host&gt;:8080</code> — parameter that defines the ports mapping. It                        instructs the                        host machine to listen on port <code class="code">&lt;port on host&gt;</code> and propagate all traffic to the                        port                        `8080` inside the docker container.                    </p></li></ul>                <p id="98fbec48">As the result, Hub service is started on <code class="code">{0.0.0.0:8080}</code>                inside the docker container, and port 8080 is mapped to &lt;port                on host&gt; that you have specified. This way the service may be accessed from any machine that has network                access to &lt;port on host&gt; of the host machine. For instance, if FQDN of the host machine is                    <code class="code">host.mydomain.com</code> and the &lt;port on host&gt; is 7777, then the service is available at <code class="code">http://host.mydomain.com:7777</code></p>            </li><li class="list__item" id="51d34b1e"><p>The Hub service starts with the web-based Configuration Wizard at the address mentioned above (in our example, it is <code class="code">http://host.mydomain.com:7777</code>). Open                the URL in a browser to access the wizard.            </p></li><li class="list__item" id="3ac345c2"><p>In the <span class="control">Configuration Wizard</span>, click <span class="control">Upgrade</span>.                <figure><a class="lightbox" href="/help/img/hub/2019.1/upgrade-config-wizard-start.zoomed.png"><img alt="Hub config wizard start" title="Hub config wizard start" src="/help/img/hub/2019.1/upgrade-config-wizard-start.png" id="ac9c67c6" width="600" height="263"></a></figure>            </p></li><li class="list__item" id="b8d96e3a"><p>On the <span class="control">Select Upgrade Source</span> page, click the <span class="control">Select</span> button and select the backup file as an upgrade source.                <figure><a class="lightbox" href="/help/img/hub/2019.1/docker-upgrade-source.zoomed.png"><img alt="Docker upgrade select source selected" title="Docker upgrade select source selected" src="/help/img/hub/2019.1/docker-upgrade-source.png" id="97776ecb" width="600" height="505"></a></figure>                Click <span class="control">Next</span>.            </p></li><li class="list__item" id="b9b7f51a"><p>On the <span class="control">Confirm Settings</span> page, review the system settings.                <figure><a class="lightbox" href="/help/img/hub/2019.1/docker-upgrade-http-confirm.zoomed.png"><img alt="Docker upgrade confirm settings" title="Docker upgrade confirm settings" src="/help/img/hub/2019.1/docker-upgrade-http-confirm.png" id="7aa341ee" width="600" height="696"></a></figure>            </p></li><li class="list__item" id="c23143ea"><p id="6f0b1730">When done, click <span class="control">Upgrade</span>.</p>                <ul class="list _ul"><li class="list__item" id="46972fea"><p id="8ef2cdf8">Hub launches its components.</p>                        <p id="527c2f1d">Do not close the page in the browser until the setup is complete.                            When the Hub server is ready, you are redirected to the login page.</p>                    </li></ul>            </li><li class="list__item" id="fcce1623">                <p id="1c94c917">Enter the credentials for the Hub administrator account and click the <span class="control">Log in</span> button.</p>                <ul class="list _ul"><li class="list__item" id="9e723109"><p>Hub opens to the <span class="control">Users</span> page.</p></li></ul>                <p id="08e609fa">Your Hub installation is upgraded and ready to use.</p>            </li></ol></section>    </div><div class="last-modified" data-skip-index="skip">Last modified: 9 September 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="docker-installation.html">Docker Installation</a><a class="navigation-links__next" href="restore-docker-installation.html">Restore a Docker Installation</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>