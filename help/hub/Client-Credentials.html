<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>客户端凭据-帮助|毂</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Client-Credentials"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索中心帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>Hub 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Client-Credentials.xml" data-toc="Client-Credentials">客户凭证</h1>    <div class="chapter"><h2 id="ClientCredentialsFlow" data-toc="Client-Credentials#ClientCredentialsFlow">参考标准</h2>        <p id="de0e295e">            <a href="https://tools.ietf.org/html/rfc6749#section-4.4" rel="noopener noreferrer" data-external="true" target="_blank">客户端凭证流规范（RFC6749）</a>        </p>    </div>    <div class="chapter"><h2 id="Prerequisites" data-toc="Client-Credentials#Prerequisites">先决条件</h2>        <p id="ae32439b">            <b id="6872a68d">客户知道自己的凭据并代表自己访问资源</b> 。</p>        <p id="d98af74a">当客户端请求访问受其控制的受保护资源或先前与集线器服务器一起安排的另一个资源所有者的受保护资源时，客户端可以仅使用其客户端凭据（或其他受支持的身份验证方式）请求访问令牌。</p>        <p id="8c2dac9a">客户端凭证交付式<b id="d1521994">只能</b>由保密的客户端使用。</p>        <p id="63314a7c">客户端<b id="1010b90c">必须</b>是在集线器中注册的受信任服务。</p>    </div>    <a name="Access Token Fetch"></a>    <h4 id="6c6f2aca">访问令牌提取</h4>    <p id="4ad048a6">客户端使用以下命令添加以下参数，向令牌端点发出请求： <code class="code">"application/x-www-form-urlencoded"</code> HTTP请求中字符编码为UTF-8的格式<code class="code">entity-body</code> ：</p>    <dl><dt id="d14ba804">grant_type</dt><dd>需要。值必须设置为“ client_credentials”。</dd><dt id="ba0d52e4">范围</dt><dd>            <p id="f017fab1">可选的。与资源服务器关联的集线器服务中已注册ID的空格分隔列表。例如，如果客户端要访问YouTrack中的问题，则应在Hub中找出YouTrack服务的ID。客户端可以使用单个访问令牌访问超过一个资源服务器。</p>        </dd></dl>    <p id="93b28772">该请求必须包含以下格式的“授权”标头：</p>    <div class="code-block" data-lang="markup">授权：基本base64（service_id +“：” + service_secret）</div>    <p id="ba6d7ec2">例如，客户端使用传输层安全性发出以下HTTP请求：</p>    <div class="code-block" data-lang="markup">POST / api / rest / oauth2 / token主机：hub.company.com授权：基本czZCaGRSa3F0MzpnWDFmQmF0M2JW内容类型：application / x-www-form-urlencoded grant_type = client_credentials</div>    <p id="7d504e51">授权服务器必须对客户端进行身份验证。</p>    <a name="AccessTokenResponse"></a>    <h4 id="179e8e1b">访问令牌响应</h4>    <div class="chapter"><h2 id="SuccessfulResponse" data-toc="Client-Credentials#SuccessfulResponse">成功回应</h2>        <p id="474908cb">如果访问令牌请求有效且得到授权，则集线器将发出访问令牌，如下所述。请注意，不包括刷新令牌。</p>        <p id="55ac0c48">授权服务器发出访问令牌和可选的刷新令牌，并通过将以下参数添加到HTTP响应的实体主体（状态码为200（确定））来构造响应：</p>        <dl><dt id="ec266091">access_token</dt><dd>需要。集线器发出的访问令牌。</dd><dt id="1c0dcb02">token_type</dt><dd>需要。发行令牌的类型。值不区分大小写。</dd><dt id="174f8dab">过期日期在</dt><dd>推荐的。访问令牌的生存时间（以秒为单位）。例如，值“ 3600”表示访问令牌将在生成响应后的一小时内过期。</dd><dt id="fbd61389">范围</dt><dd>                <p id="38675c27">需要。用空格分隔的列表，列出在集线器中注册并与资源服务器关联的服务的ID。例如，如果客户端要访问YouTrack中的问题，则应在Hub中找出YouTrack服务的ID。客户端可以使用单个访问令牌访问超过一个资源服务器。</p>            </dd></dl>        <p id="b56be661">参数包含在<code class="code">entity-body</code>使用“ application / json”媒体类型的HTTP响应。通过将每个参数添加到最高结构级别，将这些参数序列化为JavaScript对象表示法（JSON）结构。参数名称和字符串值作为JSON字符串包含在内。数值包含为JSON数字。参数的顺序无关紧要，并且可以变化。</p>        <p id="5400b0c6">集线器在任何包含令牌，凭证或其他敏感信息的响应中均包含HTTP“ Cache-Control”响应标头字段，其值为“ no-store”，以及“ Pragma”响应标头字段，其值为“ no” -缓存”。</p>        <p id="ed1d8383">成功响应的示例：</p>        <div class="code-block" data-lang="markup">HTTP / 1.1 200 OK内容类型：application / json; charset = UTF-8缓存控制：无存储语法：无缓存{“ access_token”：“ 2YotnFZFEjr1zCsicMWpAA”，“ token_type”：“ example”，“ expires_in” ：3600，“ example_parameter”：“ example_value”}</div>    </div>    <div class="chapter"><h2 id="HandlingErrorResponse" data-toc="Client-Credentials#HandlingErrorResponse">处理错误响应</h2>        <p id="ec4b707d">如果请求未通过客户端身份验证失败或无效，则集线器将以HTTP 400（错误请求）状态码（除非另有指定）进行响应，并在响应中包含以下参数：</p>        <dl><dt id="bd5646f1">错误</dt><dd>                <p id="8fee27bc">来自以下位置的单个ASCII [USASCII]错误代码：</p>                <ul class="list _bullet"><li class="list__item" id="00fd214d"><p>                        <code class="code">invalid_request</code> -请求缺少必需的参数，包括不受支持的参数值（授权类型除外），重复参数，包括多个凭据，利用多个以上的机制来认证客户端或格式错误。</p></li><li class="list__item" id="38462ff3"><p>                        <code class="code">invalid_client</code> -客户端身份验证失败（例如，未知客户端，不包括客户端身份验证或不支持的身份验证方法）。集线器可能会返回HTTP 401（未授权）状态代码，以指示支持哪些HTTP身份验证方案。如果客户端尝试通过“授权”请求标头字段进行身份验证，则集线器服务器将使用HTTP 401（未授权）状态代码进行响应，并包括与客户端使用的身份验证方案匹配的“ WWW-Authenticate”响应标头字段。</p></li><li class="list__item" id="5a9c2491"><p>                        <code class="code">invalid_grant</code> -所提供的授权授权（例如，授权代码，资源所有者凭证）或刷新令牌无效，已过期，已吊销，与授权请求中使用的重定向URI不匹配或已发行给另一个客户端。</p></li><li class="list__item" id="5572a811"><p>                        <code class="code">unauthorized_client</code> -未授权已认证的客户端使用此授权授予类型。</p></li><li class="list__item" id="bb9d6d13"><p>                        <code class="code">unsupported_grant_type</code> -集线器不支持授权授予类型。</p></li><li class="list__item" id="de2812c8"><p>                        <code class="code">invalid_scope</code> -请求的范围无效，未知，格式错误或超出了资源所有者授予的范围。</p></li></ul>            </dd><dt id="0e61a87b">error_description</dt><dd>人类可读的ASCII [USASCII]文本提供了其他信息，以帮助客户端开发人员了解发生的错误。</dd><dt id="19e48fdd">error_uri</dt><dd>标识人类可读网页的URI，用于向客户端开发人员提供有关错误的其他信息。</dd></dl>        <p id="dd7b8687">这些参数使用“ application / json”媒体类型包含在HTTP响应的实体主体中。通过在最高结构级别添加每个参数，将参数序列化为JSON结构。参数名称和字符串值作为JSON字符串包含在内。数值包含为JSON数字。参数的顺序无关紧要，并且可以变化。</p>        <p id="d010e50e">例如：</p>        <div class="code-block" data-lang="markup">HTTP / 1.1 400错误的请求内容类型：application / json; charset = UTF-8缓存控制：无存储语法：无缓存{“ error”：“ invalid_request”}</div>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年9月9日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Resource-Owner-Password-Credentials.html">资源所有者密码凭证</a> <a class="navigation-links__next" href="OAuth-2.0-Errors.html">OAuth 2.0错误</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>