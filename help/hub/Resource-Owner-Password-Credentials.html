<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>资源所有者密码凭证-帮助|帮助毂</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Resource-Owner-Password-Credentials"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索中心帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>Hub 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Resource-Owner-Password-Credentials.xml" data-toc="Resource-Owner-Password-Credentials">资源所有者密码凭证</h1>    <div class="chapter"><h2 id="7f77364c" data-toc="Resource-Owner-Password-Credentials#7f77364c">参考标准</h2>        <a href="https://tools.ietf.org/html/rfc6749#section-4.3" rel="noopener noreferrer" data-external="true" target="_blank">资源所有者密码凭证流规范（RFC 6749）</a>    </div>    <div class="chapter"><h2 id="Prerequisites" data-toc="Resource-Owner-Password-Credentials#Prerequisites">先决条件</h2>        <p id="0cf1ed30">            <b id="27d25f44">客户端知道用户凭据并代表用户访问资源</b> 。</p>        <p id="4e3e8913">例如，客户端是设备操作系统或高特权应用程序。</p>        <p id="cccf8c4f">此授予类型适用于能够获得资源所有者的凭据（用户名和密码，通常使用交互形式）的客户端。通过将存储的凭据转换为访问令牌，它还可用于使用直接身份验证方案（例如HTTP基本或摘要身份验证）将现有客户端迁移到OAuth。</p>    </div>    <div class="chapter"><h2 id="AccessTokenRequest" data-toc="Resource-Owner-Password-Credentials#AccessTokenRequest">访问令牌请求</h2>        <p id="db1ce742">客户端通过使用HTTP请求实体主体中字符编码为UTF-8的“ application / x-www-form-urlencoded”格式添加以下参数，向令牌端点发出请求：</p>        <dl><dt id="9fc276d3">grant_type</dt><dd>需要。值必须设置为“密码”。</dd><dt id="3f5f9326">用户名</dt><dd>需要。资源所有者的用户名。</dd><dt id="b2dd6431">密码</dt><dd>需要。资源所有者密码。</dd><dt id="fbe28c72">范围</dt><dd>需要。访问请求的范围：与资源服务器关联的中心服务中注册的ID的空格分隔列表。例如，如果客户端要访问YouTrack中的问题，则应在Hub中找出YouTrack服务的ID。客户端可以使用单个访问令牌访问超过一个资源服务器。</dd><dt id="1f115d07">access_type</dt><dd>指示当用户不在线时应用程序是否需要访问集线器。允许值： <code class="code">online</code> （默认使用）和<code class="code">offline</code> 。如果应用程序在用户不在线时需要刷新访问令牌，请使用<code class="code">offline</code>值。在这种情况下，集线器在第一次为用户交换授权代码时为应用程序发出<a href="Refresh-Token.html">刷新令牌</a> 。有关更多信息，请参考<a href="Refresh-Token.html">刷新令牌</a>页面。</dd></dl>        <p id="bf8d488c">该请求必须包含以下格式的“授权”标头：</p>        <div class="code-block" data-lang="markup">授权：基本base64（service_id +“：” + service_secret）</div>        <p id="57ce796c">例如：<code class="code">Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW</code></p>        <p id="0f2ba463">该服务不需要在Hub中<span class="emphasis">受信任</span> 。</p>        <p id="2e8e6865">例如，客户端使用传输层安全性发出以下HTTP请求（带有额外的换行符仅用于显示目的）：</p>        <div class="code-block" data-lang="markup">POST / api / rest / oauth2 / token主机：hub.company.com授权：基本czZCaGRSa3F0MzpnWDFmQmF0M2JW内容类型：application / x-www-form-urlencoded grant_type = password＆username = johndoe＆password = A3ddj3w</div>    </div>    <div class="chapter"><h2 id="c6af0258" data-toc="Resource-Owner-Password-Credentials#c6af0258">访问令牌响应</h2>        <p id="b450b456">如果访问令牌请求有效且得到授权，则集线器服务器将发出访问令牌和刷新令牌。如果请求未通过客户端认证或无效，则授权服务器将返回错误响应，如<a href="#HandlingErrorResponse">下一节所述</a> 。</p>        <p id="0b2dd714">成功响应的示例：</p>        <div class="code-block" data-lang="none">HTTP / 1.1 200 OK内容类型：application / json; charset = UTF-8缓存控制：无存储语法：无缓存{“ access_token”：“ 2YotnFZFEjr1zCsicMWpAA”，“ token_type”：“ example”，“ expires_in” ：3600，“ example_parameter”：“ example_value”}</div>    </div>    <div class="chapter"><h2 id="HandlingErrorResponse" data-toc="Resource-Owner-Password-Credentials#HandlingErrorResponse">处理错误响应</h2>        <p id="827fef83">如果请求未通过客户端身份验证失败或无效，则集线器将以HTTP 400（错误请求）状态码（除非另有指定）进行响应，并在响应中包含以下参数：</p>        <dl><dt id="65bd3c35">错误</dt><dd>                <p id="a0ceafe8">来自以下位置的单个ASCII [USASCII]错误代码：</p>                <ul class="list _bullet"><li class="list__item" id="bd5424ce"><p>                        <code class="code">invalid_request</code> -请求缺少必需的参数，包括不受支持的参数值（授权类型除外），重复参数，包括多个凭证，利用多个以上的机制来认证客户端，或者格式错误。</p></li><li class="list__item" id="a3253e7c"><p>                        <code class="code">invalid_client</code> -客户端身份验证失败（例如，未知客户端，不包括客户端身份验证或不支持的身份验证方法）。授权服务器可以返回HTTP 401（未授权）状态代码，以指示支持哪些HTTP身份验证方案。如果客户端尝试通过“授权”请求标头字段进行身份验证，则集线器服务器将使用HTTP 401（未授权）状态代码进行响应，并包括与客户端使用的身份验证方案匹配的“ WWW-Authenticate”响应标头字段。</p></li><li class="list__item" id="fa25289f"><p>                        <code class="code">invalid_grant</code> -所提供的授权授权（例如，授权代码，资源所有者凭证）或刷新令牌无效，已过期，已吊销，与授权请求中使用的重定向URI不匹配或已发行给另一个客户端。</p></li><li class="list__item" id="e3fdacf2"><p>                        <code class="code">unauthorized_client</code> -未授权已认证的客户端使用此授权授予类型。</p></li><li class="list__item" id="3662f6d5"><p>                        <code class="code">unsupported_grant_type</code> -集线器不支持授权授予类型。</p></li><li class="list__item" id="b5264d46"><p>                        <code class="code">invalid_scope</code> -请求的范围无效，未知，格式错误或超出了资源所有者授予的范围。</p></li></ul>            </dd><dt id="58781928">error_description</dt><dd>人类可读的ASCII [USASCII]文本，提供了其他信息，用于帮助客户端开发人员了解所发生的错误。</dd><dt id="868ffcdd">error_uri</dt><dd>一个URI，用于标识人类可读的网页以及有关错误的信息，用于向客户端开发人员提供有关该错误的其他信息。</dd></dl>        <p id="834956ed">这些参数使用“ application / json”媒体类型包含在HTTP响应的实体主体中。通过在最高结构级别添加每个参数，将参数序列化为JSON结构。参数名称和字符串值作为JSON字符串包含在内。数值包含为JSON数字。参数的顺序无关紧要，并且可以变化。</p>        <p id="1f303ac8">例如：</p>        <div class="code-block" data-lang="markup">HTTP / 1.1 400错误的请求内容类型：application / json; charset = UTF-8缓存控制：无存储语法：无缓存{“ error”：“ invalid_request”}</div>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年9月9日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Refresh-Token.html">刷新令牌</a> <a class="navigation-links__next" href="Client-Credentials.html">客户端凭证</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>