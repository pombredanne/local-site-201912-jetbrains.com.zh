<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>使用持久性工具窗口-帮助|帮助IntelliJ IDEA</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Working_with_the_Persistence_tool_window" data-breadcrumbs="Language and framework-specific guidelines/JPA and Hibernate/Working_with_the_Persistence_tool_window.xml|Working with the Persistence Tool Window" data-main-title="Working with the Persistence Tool Window" data-article-props="
                {
                
            " seeals=":[=" titl=":=" procedure=",=" link=":=" ur=":" overview-of-jpa-support.htm="," tex=":" overview="" of="" jpa="" suppor="}=" overview-of-hibernate-support.htm="," hibernate="" ]},="" ,="" ="url"="http:=" ="text"="developer=" }="" ]}="" ]=""><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索IntelliJ IDEA帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_macos" data-group="secondary">苹果系统</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_macos" data-group="secondary">Eclipse（macOS）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_intellij_idea_classic" data-group="secondary">IntelliJ IDEA经典版</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_sublime_text" data-group="secondary">崇高文字</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Working_with_the_Persistence_tool_window.xml" data-toc="Working_with_the_Persistence_tool_window" data-availability-limit="Ultimate">使用持久性工具窗口</h1>               <ul class="list" data-skip-index="skip"><li class="list__item"><a href="#333f921b">工具窗口概述</a></li><li class="list__item"><a href="#d78bfff1">打开持久性工具窗口</a></li><li class="list__item"><a href="#generate_entities_and_mappings">生成管理实体类和O / R映射</a></li><li class="list__item"><a href="#new_command">使用新命令</a></li><li class="list__item"><a href="#open_diagram">打开实体关系图</a></li><li class="list__item"><a href="#assign_data_source">将持久性单元和会话工厂与数据源相关联</a></li><li class="list__item"><a href="#assign_naming_strategy">将会话工厂与NamingStrategy实现类相关联（休眠）</a></li><li class="list__item"><a href="#76c0977b">启动JPQL或HQL控制台</a></li></ul>    <p id="641af590">另请参阅“ <a href="persistence-tool-window.html">持久性工具窗口”</a> 。</p>    <div class="chapter"><h2 id="333f921b">工具窗口概述</h2>        <p id="f574d3a0">“ <span class="control">持久性”</span>工具窗口显示您的JPA和Hibernate项目，并允许您创建配置文件， <persistence-unit><session-factory>元素，持久性类和字段（请参阅<a href="#new_command">使用New命令</a> ），并在编辑器中导航到相关的源代码。 <kbd data-primary_default_for_windows="F4" data-primary_eclipse="F12" data-primary_emacs="F4" data-primary_netbeans="F4" data-primary_sublime_text="F4" data-primary_visual_studio="F4" data-secondary_macos="⌘↓" data-secondary_eclipse="F12" data-secondary_eclipse_macos="F3" data-secondary_emacs="F4" data-secondary_intellij_idea_classic="F4" data-secondary_netbeans="F4" data-secondary_sublime_text="F4" data-secondary_sublime_text_macos="N/A" data-secondary_visual_studio="F4">F4</kbd> ，打开的控制台和实体关系图等。</session-factory></persistence-unit></p>        <figure><img alt="持久性工具窗口" title="持久性工具窗口" src="/help/img/idea/2019.3/persistence_tool_window.png" id="1ae55a9d" width="519" height="262"></figure>    </div>    <div class="chapter"><h2 id="d78bfff1">打开持久性工具窗口</h2>        <p id="73b385e0">为了使工具窗口可用，项目中必须有一个启用JPA或Hibernate的模块，即具有JPA或Hibernate构面的模块。请参阅<a href="enabling-jpa-support.html">启用JPA支持</a>或<a href="enabling-hibernate-support.html">启用休眠支持</a> 。</p>        <p id="59621ad9">要打开工具窗口，请执行以下任一操作：</p>        <ul class="list _ul"><li class="list__item" id="f4212524"><p>选择<span class="menupath" data-skip-index="skip">查看|工具窗口|坚持不懈</span></p></li><li class="list__item" id="4ad8cd15"><p>如果当前显示工具窗口栏，请单击“ <span class="control">持久性”</span>按钮（通常位于工作区的左下部分）。</p></li><li class="list__item" id="4280581b"><p>指向<img alt="显示工具窗口栏" title="显示工具窗口栏" src="/help/img/idea/2019.3/show_tool_window_bars.png" id="2c57ea4c" width="32" height="32" class="inline-icon-32">要么<img alt="显示隐藏工具窗口栏" title="显示隐藏工具窗口栏" src="/help/img/idea/2019.3/show_hide_tool_window_bars.png" id="0329dc86" width="32" height="27" class="inline-icon-32">在工作区的左下角，然后选择<span class="control">Persistence</span> 。</p></li></ul>    </div>    <div class="chapter"><h2 id="generate_entities_and_mappings">生成管理实体类和O / R映射</h2>        <p id="7b7db314">您可以通过导入生成托管实体类和对象/关系映射：</p>        <ul class="list _ul"><li class="list__item" id="e1188320"><p>由<a href="managing-data-sources.html#data_sources">数据源</a>表示的数据库模式。</p></li><li class="list__item" id="6cb25dbd"><p>具有关联的部署描述符文件<span class="filepath">ejb-jar.xml</span>的EJB构面。构面应在同一项目中可用。从<span class="filepath">ejb-jar.xml</span>检索信息时，仅<code class="code"><entity></code>元素被处理。</p></li><li class="list__item" id="6006aaaf"><p>仅对于JPA：Hibernate对象/关系映射文件<span class="filepath">.hbm.xml</span> 。该文件应位于同一项目中。</p></li></ul>        <p id="2ce9ec44">要执行导入：</p>        <ol class="list _decimal"><li class="list__item" id="c091c739">右键单击模块，持久性单元或会话工厂，指向“ <span class="control">生成持久性映射”，</span>然后选择以下选项之一：<ul class="list _ul"><li class="list__item" id="f7337273">                        <span class="control">按数据库架构</span></li><li class="list__item" id="19e7c657">                        <span class="control">按实体Bean</span></li><li class="list__item" id="ec39c881"><p>                        <span class="control">通过Hibernate映射</span> （此选项不适用于启用了Hibernate的模块和会话工厂）</p></li></ul></li><li class="list__item" id="882d1af4"><p>在<a href="generate-persistence-mapping-import-dialogs.html">打开</a>的<a href="generate-persistence-mapping-import-dialogs.html">对话框中</a> ，指定导入源和输出选项。</p></li></ol>        <p id="0323f724"><b id="46102424">示例：使用数据库作为源</b></p>        <ol class="list _decimal"><li class="list__item" id="0bceb649"><p>右键单击模块，持久性单元或会话工厂，指向“ <span class="control">生成持久性映射”，</span>然后选择“ <span class="control">按数据库模式”</span> 。</p></li><li class="list__item" id="dc10e00d">在打开的“ <span class="control">导入数据库模式”</span>对话框中：<ul class="list _ul"><li class="list__item" id="d4c41f4c"><p>                        <a href="generate-persistence-mapping-import-dialogs.html#general">常规设置</a> 。选择要用作数据源的数据源。为您的实体类指定目标包，并为类名称指定前缀和后缀。</p></li><li class="list__item" id="8a2f4a9a"><p>                        <a href="generate-persistence-mapping-import-dialogs.html#db_mapping">数据库模式映射</a> 。选择要映射的表和列，编辑类和字段名称（“ <span class="control">映射为”</span>列），并指定字段类型（“ <span class="control">映射类型”</span>列）。</p></li><li class="list__item" id="50c3aeed"><p>                        <a href="generate-persistence-mapping-import-dialogs.html#generation_settings">生成设置</a> 。指定目标<persistence-unit>或<session-factory>，然后选择必要的输出选项。</session-factory></persistence-unit></p></li></ul></li></ol>    </div>    <div class="chapter"><h2 id="new_command">使用新命令</h2>        <p id="310fbdbf">使用<span class="control">New</span>命令可以创建XML配置文件， <persistence-unit>以及<session-factory>元素，实体类，可嵌入对象，映射的超类，实体侦听器和对象关系映射，实体类中的持久字段以及它们的getter和setter方法等。</session-factory></persistence-unit></p>        <p id="31055c9a">可以使用上下文或“ <span class="control">文件”</span>菜单或键盘快捷键来访问“ <span class="control">新建”</span>命令。 <kbd data-primary_default_for_windows="Alt+Insert" data-primary_eclipse="Alt+Insert" data-primary_emacs="Alt+Insert" data-primary_netbeans="Alt+Insert" data-primary_sublime_text="Ctrl+N" data-primary_visual_studio="Alt+Insert" data-secondary_macos="⌘N" data-secondary_eclipse="N/A" data-secondary_eclipse_macos="⌘N" data-secondary_emacs="N/A" data-secondary_intellij_idea_classic="⌃N" data-secondary_netbeans="⌃N" data-secondary_sublime_text="⌃N" data-secondary_sublime_text_macos="⌘N" data-secondary_visual_studio="N/A">Alt+Insert</kbd> 。命令选项取决于当前选择的项目。</p>        <p id="3f3c32f2">            <b id="6702de11">示例：创建实体类</b></p>        <ol class="list _decimal"><li class="list__item" id="2e5b24b9"><p>右键单击一个持久性单元或会话工厂，指向“ <span class="control">新建”</span> ，然后选择“ <span class="control">实体”</span> 。</p></li><li class="list__item" id="6e8d43c3">在打开的“ <span class="control">新建实体”</span>对话框中，指定：<ul class="list _ul"><li class="list__item" id="54219823"><p>                        <span class="control">创建课程：课程</span>的名称。</p></li><li class="list__item" id="83e12f3c"><p>                        <span class="control">目标包：</span>应在其中创建类的包。</p></li><li class="list__item" id="078e5e24"><p>                        <span class="control">目标目标目录：</span>目标源根文件夹（如果有多个）。</p></li></ul></li><li class="list__item" id="20044595">对于JPA，将显示“ <span class="control">选择元数据目标”</span>对话框。选择要在其中添加该类的映射信息的文件：<ul class="list _ul"><li class="list__item" id="12c223aa"><p>对象/关系映射XML文件：信息将添加为<code class="code"><entity></code>内的元素<code class="code"><entity-mappings></code> 。</p></li><li class="list__item" id="0cf9f7c2"><p>类文件本身（.java）： <code class="code">@Entity</code>注释将被添加。</p></li></ul>                <p id="81a97d4d">IntelliJ IDEA还将信息添加到<span class="filepath">persistence.xml中</span> ，作为<code class="code"><class></code>或一个<code class="code"><mapping-file></code>元件。</p>                <p id="a7381914">对于Hibernate，不显示“ <span class="control">选择元数据目标”</span>对话框。的<code class="code">@Entity</code>注解已添加到该类中，并且<code class="code"><mapping class=""></code>元素已添加到<span class="filepath">hibernate.cfg.xml中</span> 。</p></li></ol>    </div>    <div class="chapter"><h2 id="open_diagram">打开实体关系图</h2>        <p id="b12434c4">要打开实体关系图，请右键单击持久性单元，会话工厂，实体或字段，然后从上下文菜单中选择<span class="control">ER图</span> 。</p>        <p id="fa1952a0">另请参阅<a href="diagram-toolbar-and-context-menu.html">图工具栏和上下文菜单</a> 。</p>    </div>    <div class="chapter"><h2 id="assign_data_source">将持久性单元和会话工厂与数据源相关联</h2>        <p id="2c1a1be1">您可以将<persistence-unit>或<session-factory>元素与<a href="managing-data-sources.html#data_sources">数据源</a>关联<persistence-unit><session-factory>。如果这样做：</session-factory></persistence-unit></session-factory></persistence-unit></p>        <ul class="list _ul"><li class="list__item" id="cbc7b4f0"><p>您引用数据库表的源代码将自动根据相应的数据源进行验证。</p></li><li class="list__item" id="c80dbfa0"><p>使用JPA或Hibernate控制台时，您无需另外指定数据库连接设置。将自动使用为关联的DB数据源配置的相应设置。</p></li></ul>        <p id="7f5b900a">如果<persistence-unit>or <session-factory>元素是通过导入数据库模式生成的，则将自动设置相应元素和数据源之间的关联。</session-factory></persistence-unit></p>        <p id="35a0a86e">要将持久性单元或会话工厂与数据源相关联：</p>        <ol class="list _decimal"><li class="list__item" id="9ff23f8b"><p>右键单击模块，持久性单元，会话工厂或实体，然后选择<span class="control">分配数据源</span> 。</p></li><li class="list__item" id="a0076e11"><p>在打开的对话框中，单击必要的“ <span class="control">数据源”</span>单元，然后从列表中选择数据源。（要删除与数据源的关联，请选择<span class="control"><none></none></span> ）</p></li></ol>    </div>    <div class="chapter"><h2 id="assign_naming_strategy">将会话工厂与NamingStrategy实现类相关联（休眠）</h2>        <ol class="list _decimal"><li class="list__item" id="bd66ed77"><p>右键单击模块，会话工厂或实体，然后选择<span class="control">分配命名策略</span> 。</p></li><li class="list__item" id="f236eb73"><p>在打开的对话框中，单击必要的“ <span class="control">命名策略”</span>单元，然后从列表中选择实现类。</p></li></ol>    </div>    <div class="chapter"><h2 id="76c0977b">启动JPQL或HQL控制台</h2>        <p id="1d60e2d1">右键单击一个持久性单元或会话工厂或其中的任何节点，然后选择<span class="control">Console</span> 。</p>        <p id="0ab46356">也可以看看：</p>        <ul class="list _ul"><li class="list__item" id="878ee888"><a href="using-jpa-console.html">使用JPA控制台</a></li><li class="list__item" id="833b649a"><a href="working-with-the-hibernate-console.html">使用Hibernate控制台</a></li></ul>    </div>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="working-with-the-hibernate-console.html">使用Hibernate控制台</a> <a class="navigation-links__next" href="kotlin.html">Kotlin</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>