<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>@Contract - Help | IntelliJ IDEA</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="_Contract_Annotations" data-breadcrumbs="Working_with_source_code.xml|Working with source code/Annotating_Source_Code.xml|Annotations/@Contract_Annotations.xml|@Contract" data-main-title="@Contract" data-article-props="&#xA;                {&#xA;                &#xA;            &#34;seeAlso&#34;:[&#xA;            &#xA;                {&#34;title&#34;: &#34;Procedures&#34;,&#xA;                 &#34;links&#34;: [&#xA;                &#xA;        {&#34;url&#34;:&#34;code-inspection.html&#34;,&#34;text&#34;:&#34;Code inspections&#34;}&#xA;    ,&#xA;        {&#34;url&#34;:&#34;intention-actions.html&#34;,&#34;text&#34;:&#34;Intention actions&#34;}&#xA;    &#xA;                    ]},&#xA;                {&#34;title&#34;: &#34;Web Resources&#34;,&#xA;                 &#34;links&#34;: [&#xA;                &#xA;        {&#34;url&#34;:&#34;http://www.jetbrains.net/devnet/community/idea/kb&#34;,&#34;text&#34;:&#34;Developer Community&#34;}&#xA;    &#xA;                    ]}&#xA;            ]&#xA;        &#xA;                }&#xA;            "><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search IntelliJ IDEA Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.3 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default_for_windows" selected>Default for Windows</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_sublime_text">Sublime Text</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_macos">macOS</option><option data-group="secondary" value="secondary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_eclipse_macos">Eclipse (macOS)</option><option data-group="secondary" value="secondary_emacs">Emacs</option><option data-group="secondary" value="secondary_intellij_idea_classic">IntelliJ IDEA Classic</option><option data-group="secondary" value="secondary_netbeans">NetBeans</option><option data-group="secondary" value="secondary_sublime_text">Sublime Text</option><option data-group="secondary" value="secondary_sublime_text_macos">Sublime Text (macOS)</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 data-toc="_Contract_Annotations" id="@Contract_Annotations.xml">@Contract</h1>    <p id="37d2a28b">The <code class="code">@Contract</code> annotation is used for defining a contract that a method must meet. This lets the IDE        find problems in methods which call methods that you have annotated. You can use this annotation not        only for annotating your own code but also for other existing libraries.    </p>    <p id="9827aec0">The <code class="code">@Contract</code> annotation has two attributes — <code class="code">value</code> and <code class="code">pure</code>.        The <code class="code">value</code> attribute contains clauses describing causal relationship between        arguments and the returned value.</p>    <p id="ddb2cb2b">The <code class="code">pure</code> attribute is intended for methods that do not change the state        of their objects, but just return a new value. If its return value is not used, removing its invocation will not        affect program state or change the semantics, unless the method call throws an exception        (exception is not considered to be a side effect).</p>    <p id="54974a1d">A method should not be marked as pure if it does not produce a side effect by itself,        but it could be used to establish the happens-before relation between an event in        another thread, so that changes performed in another thread might become visible in current thread        after invocation of this method. On the other hand, some synchronized methods        could be marked as pure, because the purpose of synchronization here is to keep the collection internal integrity        rather than to wait for an event in another thread.        "Invisible" side effects (such as logging) that do not affect important program semantics are allowed.    </p>    <p id="0b4b9ef2">A contract is a set of clauses that describe an input and an output. They are separated with the        <code class="code">-&gt;</code> symbol: <code class="code">"A -&gt; B"</code>. This forms a contract meaning that when you provide A to a        method, you will always get B. Clauses in a contract must be separated with the <code class="code">;</code> (semicolon) symbol.        For example:</p>    <div class="table-wrapper"><table class=" no_header" width="100%" id="e39ac7e4"><tbody><tr id="eb74ac43" class="ijRowOdd"><td id="057f8ab8"><code class="code">@Contract("_, null -&gt; null")</code></td><td id="3fe6cb69"><p>The method returns <code class="code">null</code> if its second argument is <code class="code">null</code>.</p></td></tr><tr id="1d7bbcdd" class="ijRowEven"><td id="9f496e84"><code class="code">@Contract("_, null -&gt; null; _, !null -&gt; !null")</code></td><td id="cdc1d5ad"><p>The method returns <code class="code">null</code> if its second argument is <code class="code">null</code>, and not-null otherwise.</p></td></tr><tr id="048cf50c" class="ijRowOdd"><td id="6d375be6"><code class="code">@Contract("true -&gt; fail")</code></td><td id="909e440e"><p>A typical <code class="code">assertFalse()</code> method which throws an                exception if <code class="code">true</code> is passed to it.</p></td></tr><tr id="facb36a4" class="ijRowEven"><td id="887f1f70"><code class="code">@Contract("_ -&gt; this")</code></td><td id="841d1abf"><p>The method always returns its qualifier (e.g. <code class="code">StringBuilder.append</code>).</p></td></tr><tr id="24bd9e35" class="ijRowOdd"><td id="6c2430fa"><code class="code">@Contract("null -&gt; fail; _ -&gt; param1")</code></td><td id="6caae2af"><p>The method throws an exception if the first argument is null, otherwise it returns the first argument                (for example, <code class="code">Objects.requireNonNull</code>).</p></td></tr><tr id="c6fcdb3d" class="ijRowEven"><td id="4b6513ae"><code class="code">@Contract("!null, _ -&gt; param1; null, !null -&gt; param2; null, null -&gt; fail")</code></td><td id="cf47fc09"><p>The method returns the first non-null argument, or throws an exception if both arguments are null                (for example, <code class="code">Objects.requireNonNullElse</code> in Java 9).</p></td></tr></tbody></table></div>    <section class="procedure-steps"><h3 id="997e9d33">Define a contract</h3><ol class="list _decimal"><li class="list__item" id="6c19ae84"><p>Press <kbd data-primary_default_for_windows="Alt+Enter" data-primary_eclipse="Alt+Enter" data-primary_emacs="Alt+Enter" data-primary_netbeans="Alt+Enter" data-primary_sublime_text="Alt+Enter" data-primary_visual_studio="Alt+Enter" data-secondary_macos="⌥⏎" data-secondary_eclipse="⌥⏎" data-secondary_eclipse_macos="⌘1" data-secondary_emacs="⌥⏎" data-secondary_intellij_idea_classic="⌥⏎" data-secondary_netbeans="⌥⏎" data-secondary_sublime_text="⌥⏎" data-secondary_sublime_text_macos="⌥⏎" data-secondary_visual_studio="⌥⏎">Alt+Enter</kbd> on a method, and select            <span class="control">Add method contract</span> or <span class="control">Edit method contract</span>.</p></li><li class="list__item" id="b1991889"><p>Configure the contract and apply the changes.            <figure><img alt="contract annotation lib1" title="contract annotation lib1" src="/help/img/idea/2019.3/contract_annotation_lib1.png" id="45e508f7" width="300" height="370"></figure>        </p></li></ol></section>    <div class="chapter"><h2 id="syntax">Syntax</h2>        <p id="af41e35f">The <code class="code">@Contract</code> annotation value has the following syntax:</p>        <p id="f32e0620">            <code class="code">contract ::= (clause ‘;’)* clause</code><br>            <code class="code">clause ::= args ‘-&gt;’ effect</code><br>            <code class="code">args ::= ((arg ‘,’)* arg )?</code><br>            <code class="code">arg ::= value-constraint</code><br>            <code class="code">value-constraint ::= ‘_’ | ‘null’ | ‘!null’ | ‘false’ | ‘true’</code><br>            <code class="code">effect ::= ‘_’ | ‘null’ | ‘!null’ | ‘false’ | ‘true’ | ‘fail’ | ‘new’ | ‘this’ | ‘param’ number</code><br>            <code class="code">number ::= [1-9] [0-9]*</code>        </p>        <p id="2dfdcfac">The constraints are:</p>        <div class="table-wrapper"><table class=" no_header" width="100%" id="b3dde2e0"><tbody><tr id="b752dfe5" class="ijRowOdd"><td id="a4a764e2"><code class="code">_</code></td><td id="8e2e8a35"><p>Any value</p></td></tr><tr id="a4cb1f2b" class="ijRowEven"><td id="f2b25a29"><code class="code">null</code>  </td><td id="15b12c5d"><p>Null value </p></td></tr><tr id="d59a2ec5" class="ijRowOdd"><td id="111fdb94"> <code class="code">!null</code>  </td><td id="090a8a83"><p>Value statically proved not to be null </p></td></tr><tr id="662497d8" class="ijRowEven"><td id="0055ec3a"><code class="code">true</code>  </td><td id="d5e156d2"><p>True boolean value </p></td></tr><tr id="cda53946" class="ijRowOdd"><td id="caf8753d"> <code class="code">false</code> </td><td id="1edb78a6"><p>False boolean value </p></td></tr><tr id="bd18ed11" class="ijRowEven"><td id="107b0c5e"> <code class="code">fail</code>  </td><td id="84dfbbb2"><p>The method throws an exception if arguments meet argument constraints </p></td></tr><tr id="3a164e20" class="ijRowOdd"><td id="bc633a70"> <code class="code">new</code>  </td><td id="725a0e01"><p>Every time the method is executed, it returns a non-null new object that is distinct from                    other objects existing in the heap prior to method execution. If the method is pure, the new object is                    not stored in any field or array and will be lost if method return value is not used. </p></td></tr><tr id="d78bc39c" class="ijRowEven"><td id="4b8f8fb4"> <code class="code">this</code>  </td><td id="5848ae99"><p>The method returns non-null <code class="code">this</code> reference </p></td></tr><tr id="09e03c4f" class="ijRowOdd"><td id="0ad5af6f"><code class="code">param1 (param2, param3, and so on)</code>  </td><td id="d31b3a03"><p>The method returns its first (second, third, and so on) argument </p></td></tr></tbody></table></div>    </div>    <div class="last-modified" data-skip-index="skip">Last modified: 29 November 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="nullable-and-notnull-annotations.html">@Nullable and @NotNull</a><a class="navigation-links__next" href="parametersarenonnullbydefault-annotation.html">@ParametersAreNonnullByDefault</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>