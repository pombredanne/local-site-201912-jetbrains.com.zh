<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Debug a Java application using a Dockerfile - Help | IntelliJ IDEA</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Debug_a_Java_application_using_a_Dockerfile" data-breadcrumbs="Language and framework-specific guidelines/Docker.xml|Docker/Tutorials/Debug_a_Java_application_using_a_Dockerfile.xml|Debug a Java application using a Dockerfile" data-main-title="Debug a Java application using a Dockerfile"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search IntelliJ IDEA Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.3 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default_for_windows" selected>Default for Windows</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_sublime_text">Sublime Text</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_macos">macOS</option><option data-group="secondary" value="secondary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_eclipse_macos">Eclipse (macOS)</option><option data-group="secondary" value="secondary_emacs">Emacs</option><option data-group="secondary" value="secondary_intellij_idea_classic">IntelliJ IDEA Classic</option><option data-group="secondary" value="secondary_netbeans">NetBeans</option><option data-group="secondary" value="secondary_sublime_text">Sublime Text</option><option data-group="secondary" value="secondary_sublime_text_macos">Sublime Text (macOS)</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 data-toc="Debug_a_Java_application_using_a_Dockerfile" id="Debug_a_Java_application_using_a_Dockerfile.xml">Debug a Java application using a Dockerfile</h1>    <p id="27362b8c">        You can use IntelliJ IDEA to debug a Java application running in a Docker container.        This tutorial describes how to create a Dockerfile for running a simple Java console application in a container with OpenJDK 8        and then debug it by setting breakpoints in the source code and using a remote debug configuration.    </p>    <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="create-app" data-toc="Debug_a_Java_application_using_a_Dockerfile#create-app">Create a sample Java console application</h3></div><div class="collapse__content"><p id="b052b6f4">            The sample application for this tutorial emulates a console utility to change the password.            It asks to enter the login name and current password.            After verifying the credentials, it asks to type the new password twice.            If the passwords don't match, it asks for the new password again, until they match, and then changes the password.            Actual methods for verifying and changing the password are not implemented for the purposes of this tutorial.        </p><ol class="list _decimal"><li class="list__item" id="ff3535d6">            <p id="7badf82f">Create a Java class with the following code:</p>            <div class="code-block" data-lang="java">
            import java.io.Console;
            import java.io.IOException;
            import java.util.Arrays;

            public class Java_pass_from_console {

                public static void main (String args[]) throws IOException {

                    Console c = System.console();
                    String login = c.readLine("Enter your login: ");
                    char [] oldPassword = c.readPassword("Enter your old password: ");

                    if (verify(login, oldPassword)) {
                        boolean noMatch;
                        do {
                            char [] newPassword1 = c.readPassword("Enter your new password: ");
                            char [] newPassword2 = c.readPassword("Enter new password again: ");
                            noMatch = ! Arrays.equals(newPassword1, newPassword2);
                            if (noMatch) {
                                c.format("Passwords don't match. Try again.%n");
                            } else {
                                change(login, newPassword1);
                                c.format("Password for %s changed.%n", login);
                            }
                            Arrays.fill(newPassword1, ' ');
                            Arrays.fill(newPassword2, ' ');
                        } while (noMatch);
                    }

                    Arrays.fill(oldPassword, ' ');
                }

                // Dummy verify method
                static boolean verify(String login, char[] password) {
                    return true;
                }

                // Dummy change method
                static void change(String login, char[] password) {
                }
            }
        </div>        </li><li class="list__item" id="b43ace8a"><p>            Build the application into a JAR file inside your project: <span class="filepath">out/artifacts/pass/pass.jar</span>        </p></li></ol></div></div></section>    <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="create-dockerfile-run-config" data-toc="Debug_a_Java_application_using_a_Dockerfile#create-dockerfile-run-config">Create a Dockerfile and a run configuration to run the application</h3></div><div class="collapse__content"><ol class="list _decimal"><li class="list__item" id="140fe0df">            <p id="6648a4e3">Create a Dockerfile with the following code:</p>            <div class="code-block" data-lang="none">
                FROM openjdk:8
                COPY . /tmp
                WORKDIR /tmp
                CMD ["java", "-jar", "pass.jar"]
    </div>        </li><li class="list__item" id="92f00a39">            <p id="b3e3c8f4">                Click <img class="inline-icon-12" src="/help/img/idea/2019.3/icons.runConfigurations.testState.run_run@2x.png" width="12" alt="the Run button"> in the gutter                and select <span class="control">New Run Configuration</span>.            </p>        </li><li class="list__item" id="60abd949"><p>            In the <span class="control">Edit Run Configuration</span> dialog, change the context folder to <span class="filepath">out/artifacts/pass/</span>            (where the JAR artifact is built to), add a name for the container (for example, <span class="control">pass</span>),            and specify the command to run your application:            <code class="code">java -jar pass.jar</code>        </p></li><li class="list__item" id="be91a06a"><p>            Click <span class="control">Run</span> to check that the application is working correctly.            When the container starts, select it in the <span class="control">Docker</span> tool window and open the <span class="control">Attached Console</span> tab.            You should see the prompt with the words <code class="code">Enter your login:</code>.        </p></li></ol></div></div></section>    <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="create-remote-debug-config" data-toc="Debug_a_Java_application_using_a_Dockerfile#create-remote-debug-config">Create a remote debug configuration</h3></div><div class="collapse__content"><p id="06c7b1e6">The debugger attaches to the application using a <a href="run-debug-configuration-remote-debug.html">remote debug configuration</a>.</p><ol class="list _decimal"><li class="list__item" id="38d01db9"><p>On the main menu, select <span data-skip-index="skip" class="menupath">Run | Edit Configurations</span>.</p></li><li class="list__item" id="032a6f36"><p>            Click <img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="the Add New Configuration button"> and select <span class="control">Remote</span>.        </p></li><li class="list__item" id="dd1e330f"><p>            In the <span class="control">Before launch</span> section, click <img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="the Add button">            and select <span class="control">Launch Docker before debug</span>.        </p></li><li class="list__item" id="fdda8f49"><p>            Select the Docker configuration that runs your app.            Make sure that the ports in the <span class="control">Configure Docker</span> dialog and in the remote debug configuration match.            Click <span class="control">OK</span>.        </p></li><li class="list__item" id="7eb4a58b"><p>Click <span class="control">OK</span> in the <span class="control">Run/Debug Configurations</span> dialog.</p></li></ol></div></div></section>    <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="debug-app" data-toc="Debug_a_Java_application_using_a_Dockerfile#debug-app">Set breakpoints and debug your application</h3></div><div class="collapse__content"><p id="156dd3d2">By this moment you should have the following:</p><ul class="list _ul"><li class="list__item" id="95b4dad4"><p>The source code of your application (the <span class="filepath">Java_pass_from_console</span> class file)</p></li><li class="list__item" id="af2f8326"><p>The built JAR file in <span class="filepath">out/artifacts/pass/pass.jar</span></p></li><li class="list__item" id="7fc94315"><p>The Dockerfile that runs the application using the Docker run configuration</p></li><li class="list__item" id="8f92553c"><p>The remote debug configuration that first launches the Docker run configuration and then attaches to the application in the started container</p></li></ul><p id="98214deb">Before starting the debug configuration, you need to set breakpoints in the source code and rebuild the JAR artifact.</p><ol class="list _decimal"><li class="list__item" id="8b86bc68">            <p id="59326d60">Open the <span class="filepath">Java_pass_from_console.java</span> file and set breakpoints at key points in the code:</p>            <figure><img alt="Set breakpoints" title="Set breakpoints" src="/help/img/idea/2019.3/dockerfile_debug_tutorial_code_example.png" id="b2b7843a" class=" _border-line" width="600" height="1204"></figure>        </li><li class="list__item" id="f23ef88d"><p>Rebuild the JAR artifact.</p></li><li class="list__item" id="aeb237d3"><p>            Select the remote debug configuration in the main toolbar            and click <img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.startDebugger@2x.png" width="16" alt="the Debug button">            (or press <kbd data-primary_default_for_windows="Shift+Alt+F9" data-primary_eclipse="Shift+Alt+F9" data-primary_emacs="Shift+Alt+F9" data-primary_netbeans="Shift+Alt+F9" data-primary_sublime_text="Shift+Alt+F9" data-primary_visual_studio="Shift+Alt+F9" data-secondary_macos="⌃⌥D" data-secondary_eclipse="⌥⇧F9" data-secondary_eclipse_macos="⌃⌥D" data-secondary_emacs="⌥⇧F9" data-secondary_intellij_idea_classic="⌥⇧F9" data-secondary_netbeans="⌥⇧F9" data-secondary_sublime_text="⌥⇧F9" data-secondary_sublime_text_macos="⌃⌥D" data-secondary_visual_studio="⌥⇧F9">Shift+Alt+F9</kbd> and select the remote debug configuration).        </p></li></ol><p id="22588f7f">            It should now rebuild the image and start the container with the application.            When the application hits the first breakpoint (at the <code class="code">Enter your login:</code> prompt),            the debugger will stop it and you can analyze the current state, then step over with <img class="inline-icon-16" src="/help/img/idea/2019.3/icons.debugger.actions.force_step_over@2x.png" width="16" alt="The Step Over button">            until it hits the next breakpoint, and so on.        </p></div></div></section><div class="last-modified" data-skip-index="skip">Last modified: 29 November 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="running-a-java-app-in-a-container.html">Run a Java application in a container</a><a class="navigation-links__next" href="run-and-debug-a-spring-boot-application-using-docker-compose.html">Run and debug a Spring Boot application using Docker Compose</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>