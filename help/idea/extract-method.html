<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Extract method - Help | IntelliJ IDEA</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="procedures.refactoring.extractMethod" data-breadcrumbs="Working_with_source_code.xml|Working with source code/Refactoring_Source_Code.xml|Refactoring code/Extract refactorings/Extract_Method.xml|Extract method" data-main-title="Extract method" data-article-props="&#xA;                {&#xA;                &#xA;            &#34;seeAlso&#34;:[&#xA;            &#xA;                {&#34;title&#34;: &#34;Reference&#34;,&#xA;                 &#34;links&#34;: [&#xA;                &#xA;        {&#34;url&#34;:&#34;extract-method-dialog.html&#34;,&#34;text&#34;:&#34;Extract Method Dialog&#34;}&#xA;    &#xA;                    ]},&#xA;                {&#34;title&#34;: &#34;Web Resources&#34;,&#xA;                 &#34;links&#34;: [&#xA;                &#xA;        {&#34;url&#34;:&#34;http://www.jetbrains.net/devnet/community/idea/kb&#34;,&#34;text&#34;:&#34;Developer Community&#34;}&#xA;    &#xA;                    ]}&#xA;            ]&#xA;        &#xA;                }&#xA;            "><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search IntelliJ IDEA Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.3 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default_for_windows" selected>Default for Windows</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_sublime_text">Sublime Text</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_macos">macOS</option><option data-group="secondary" value="secondary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_eclipse_macos">Eclipse (macOS)</option><option data-group="secondary" value="secondary_emacs">Emacs</option><option data-group="secondary" value="secondary_intellij_idea_classic">IntelliJ IDEA Classic</option><option data-group="secondary" value="secondary_netbeans">NetBeans</option><option data-group="secondary" value="secondary_sublime_text">Sublime Text</option><option data-group="secondary" value="secondary_sublime_text_macos">Sublime Text (macOS)</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 data-toc="procedures.refactoring.extractMethod" id="Extract_Method.xml">Extract method</h1>                                                   <p id="dbb56c22">The <span class="emphasis">Extract Method</span> refactoring lets you take a code fragment that can be grouped            together, move it into a separated method and replace the old code with call to the            method.        </p>        <aside data-type="note" class="prompt" data-title="" rel="dbb56c22" id="6e4c2549">            <p id="4e214919">This refactoring is also available as an                <a href="intention-actions.html">intention action</a> in the editor. Select code that                you want to extract, press <kbd data-primary_default_for_windows="Alt+Enter" data-primary_eclipse="Alt+Enter" data-primary_emacs="Alt+Enter" data-primary_netbeans="Alt+Enter" data-primary_sublime_text="Alt+Enter" data-primary_visual_studio="Alt+Enter" data-secondary_macos="⌥⏎" data-secondary_eclipse="⌥⏎" data-secondary_eclipse_macos="⌘1" data-secondary_emacs="⌥⏎" data-secondary_intellij_idea_classic="⌥⏎" data-secondary_netbeans="⌥⏎" data-secondary_sublime_text="⌥⏎" data-secondary_sublime_text_macos="⌥⏎" data-secondary_visual_studio="⌥⏎">Alt+Enter</kbd> and select                <span class="control">Extract Method</span>.            </p>        </aside>        <p id="1ce422ef">When you extract method you need to check for variables. If there is one output variable, it is used            as a return value for the extracted method. In            case there are multiple output variables, the <span class="keyword">Extract Method</span> refactoring may not            be applied, and the error message appears.</p>        <p id="b0a174e9">There are several workarounds to allow <span class="keyword">Extract Method</span> work in this case.            For example, you may introduce a special data-class that contains all output values.</p>        <aside data-type="note" class="prompt" data-title="" rel="b0a174e9" id="f14fe8a2">            <p id="a8e221d4">The Extract Method refactoring has the following limitations:</p>            <ul class="list _ul"><li class="list__item" id="e52fadd2"><p>Refactoring does not work with multiple output values in automatic mode. You have to                    change your code before applying the refactoring.</p></li><li class="list__item" id="4bea4e0f"><p>Refactoring does not work for a code fragment which conditionally returns from the                    containing method and is not placed at the end of it.</p></li></ul>        </aside>        <section class="procedure-steps"><h3 id="extract_method">To extract method:</h3><ol class="list _decimal"><li class="list__item" id="5e232161"><p>Select a code fragment you want to extract to a method.</p></li><li class="list__item" id="6e9fd535"><p>Press <kbd data-primary_default_for_windows="Ctrl+Alt+M" data-primary_eclipse="Shift+Alt+M" data-primary_emacs="Ctrl+Alt+M" data-primary_netbeans="Shift+Alt+M" data-primary_sublime_text="Ctrl+Alt+M" data-primary_visual_studio="Ctrl+Alt+M" data-secondary_macos="⌥⌘M" data-secondary_eclipse="⌥⇧M" data-secondary_eclipse_macos="⌥⌘M" data-secondary_emacs="⌃⌥M" data-secondary_intellij_idea_classic="⌥⌘M" data-secondary_netbeans="⌥⇧M" data-secondary_sublime_text="⌃⌥M" data-secondary_sublime_text_macos="⌥⌘M" data-secondary_visual_studio="⌃⌥M">Ctrl+Alt+M</kbd> or from the main menu, select                <span data-skip-index="skip" class="menupath">Refactor | Extract | Method</span>.            </p></li><li class="list__item" id="b7b83856"><p>                In the dialog that opens, configure a method options, such as visibility, parameters, and so on.                You can also change a name of the method if you need.                <figure><img alt="Extract method dialog" title="Extract method dialog" src="/help/img/idea/2019.3/extract_method_dialog.png" id="3e278dc8" width="522" height="481"></figure>                Click <span class="control">OK</span>.            </p></li><li class="list__item" id="893c7dc0">                <p id="f74ba201">                    If IntelliJ IDEA detects a duplicated code fragment that can be replaced with a call to extracted method,                    it will offer you to preview your code, compare it side by side and make changes if needed. You can                    also right-click the duplicate code fragment and select <span class="control">Exclude</span> to remove such code from                    refactoring.                    <figure><img alt="Duplicate analysis" title="Duplicate analysis" src="/help/img/idea/2019.3/extract_method_duplicates_compare.png" id="150ccd10" width="1246" height="426"></figure>                    When you are ready, click <span class="control">Do Refactor</span> to complete your refactoring.                </p>                <p id="173587b6">Note that if it is just one duplicate, IntelliJ IDEA will replace it silently.</p>                <p id="7b95875d">                    Finally, if IntelliJ IDEA detects code that is only partially duplicated, it suggests you to extract a                parameter in order to proceed with the refactoring.                    <figure><img alt="Partial duplicates" title="Partial duplicates" src="/help/img/idea/2019.3/partial_duplicates.png" id="ac2639f0" width="768" height="319"></figure>                </p>            </li></ol></section>        <aside data-type="tip" class="prompt" data-title="" rel="extract_method" id="e889849c">            <p id="40def2b8">To reverse the <span class="emphasis">Extract Method</span> refactoring, press <kbd data-primary_default_for_windows="Ctrl+Alt+N" data-primary_eclipse="Shift+Alt+I" data-primary_emacs="Ctrl+Alt+N" data-primary_netbeans="Ctrl+Alt+N" data-primary_sublime_text="Ctrl+Alt+N" data-primary_visual_studio="Ctrl+Alt+N" data-secondary_macos="⌥⌘N" data-secondary_eclipse="⌥⇧I" data-secondary_eclipse_macos="⌥⌘I" data-secondary_emacs="⌃⌥N" data-secondary_intellij_idea_classic="⌥⌘N" data-secondary_netbeans="⌃⌥N" data-secondary_sublime_text="⌃⌥N" data-secondary_sublime_text_macos="⌥⌘N" data-secondary_visual_studio="⌃⌥N">Ctrl+Alt+N</kbd> to                invoke the <a href="inline.html">Inline refactoring</a>.</p>        </aside>        <div class="chapter"><h2 id="ec2f6f35">Example</h2>        <p id="32893c47">Let's extract the <code class="code">a+b</code> expression into a method (function for Kotlin), and replace duplicates            .</p>        <div class="tabs" id="42683e88"><div class="tabs__content" data-title="Java" id="bbfd2689">                <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="fc1149c4"><thead><tr id="540f0b8e" class="ijRowHead"><th id="3dabdd33" width="50%"><p>Before</p></th><th id="acf2aad3" width="50%"><p>After</p></th></tr></thead><tbody><tr id="77060cec" class="ijRowOdd"><td id="aa8b9403">                            <div class="code-block" data-lang="java">
public void method() {
    int a=1;
    int b=2;
    int c=a+b;
    int d=a+c;
}
                            </div>                        </td><td id="962516aa">                            <div class="code-block" data-lang="java">
public void method() {
    int a=1;
    int b=2;
    int c=add(a,b);
    int d=add(a,c);
}
...
private int add(int a, int b) {
    return a+b;
}
                            </div>                        </td></tr></tbody></table></div>            </div><div class="tabs__content" data-title="Kotlin" id="4b6139dd">                <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="0a2573fe"><thead><tr id="4b9ebc0f" class="ijRowHead"><th id="2cbf5172" width="50%"><p>Before</p></th><th id="fb9f44f5" width="50%"><p>After</p></th></tr></thead><tbody><tr id="fd11f872" class="ijRowOdd"><td id="a67868b5">                            <div class="code-block" data-lang="kotlin">
fun method(){
    val a = 1
    val b = 2
    val c = a + b
    val d = a + b
}
                            </div>                        </td><td id="d371ed99">                            <div class="code-block" data-lang="kotlin">
fun method(){
    val a = 1
    val b = 2
    val c = a + b
    val d = a + b
}
private fun add(a: Int, b: Int) = a + b
                            </div>                        </td></tr></tbody></table></div>            </div></div>    </div>                                                    	  <div class="last-modified" data-skip-index="skip">Last modified: 29 November 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="extract-interface.html">Extract interface</a><a class="navigation-links__next" href="extract-superclass.html">Extract Superclass</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>