<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>提取参数-帮助| IntelliJ IDEA</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="JavaIntroduce" data-breadcrumbs="Working_with_source_code.xml|Working with source code/Refactoring_Source_Code.xml|Refactoring code/Extract refactorings/JavaIntroduce.xml|Extract parameter" data-main-title="Extract parameter" data-article-props="
                {
                
            " seeals=":[=" titl=":=" referenc=",=" link=":=" ur=":" extract-parameter-refactoring-dialog.htm="," tex=":" extract="" parameter="" dialog="" for="" jav="}=" web="" resource=",=" http:="" ="" www.jetbrains.net="" devnet="" community="" idea="" k="," developer="" communit="}="><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索IntelliJ IDEA帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_macos" data-group="secondary">苹果系统</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_macos" data-group="secondary">Eclipse（macOS）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_intellij_idea_classic" data-group="secondary">IntelliJ IDEA经典版</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_sublime_text" data-group="secondary">崇高文字</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="JavaIntroduce.xml" data-toc="JavaIntroduce">提取参数</h1>            <p id="18a3a0bf"><span class="emphasis">提取参数</span>重构使您可以将新参数提取到方法中。</p>    <p id="5e7eee34">您还可以使用<span class="emphasis">提取功能参数</span>重构。在这种情况下，IntelliJ IDEA将分析选定的代码，找出所提取片段的方法签名，找到具有该方法签名的所有功能接口，并根据所选接口将代码片段包装为匿名类，并使用此匿名类作为参数。</p>    <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="7c9b94d0"><p>在编辑器中，将插入号放置在要作为参数引入的表达式内。</p></li><li class="list__item" id="c9842e2b"><p>按<kbd data-primary_default_for_windows="Ctrl+Alt+P" data-primary_eclipse="Ctrl+Alt+P" data-primary_emacs="Ctrl+Alt+P" data-primary_netbeans="Ctrl+Alt+P" data-primary_sublime_text="Ctrl+Alt+P" data-primary_visual_studio="Ctrl+Alt+P" data-secondary_macos="⌥⌘P" data-secondary_eclipse="⌃⌥P" data-secondary_eclipse_macos="⌥⌘P" data-secondary_emacs="⌃⌥P" data-secondary_intellij_idea_classic="⌥⌘P" data-secondary_netbeans="⌃⌥P" data-secondary_sublime_text="⌃⌥P" data-secondary_sublime_text_macos="⌥⌘P" data-secondary_visual_studio="⌃⌥P">Ctrl+Alt+P</kbd>或从主菜单中选择“ <span class="menupath" data-skip-index="skip">重构|提取物|参数</span> 。如果要提取功能参数，请按<kbd data-primary_default_for_windows="Ctrl+Shift+Alt+P" data-primary_eclipse="Ctrl+Shift+Alt+P" data-primary_emacs="Ctrl+Shift+Alt+P" data-primary_netbeans="N/A" data-primary_sublime_text="Ctrl+Shift+Alt+P" data-primary_visual_studio="Ctrl+Shift+Alt+P" data-secondary_macos="⌥⇧⌘P" data-secondary_eclipse="⌃⌥⇧P" data-secondary_eclipse_macos="⌥⇧⌘P" data-secondary_emacs="⌃⌥⇧P" data-secondary_intellij_idea_classic="⌥⇧⌘P" data-secondary_netbeans="N/A" data-secondary_sublime_text="⌃⌥⇧P" data-secondary_sublime_text_macos="⌥⇧⌘P" data-secondary_visual_studio="⌃⌥⇧P">Ctrl+Shift+Alt+P</kbd>或从主菜单中选择“ <span class="menupath" data-skip-index="skip">重构|提取物|功能参数</span> 。</p></li><li class="list__item" id="acd41cf7"><p>指定参数名称，然后在“ <span class="control">提取参数”</span>弹出窗口中选择必要的选项。例如，如果您不想更改现有方法调用，请选中“ <span class="control">通过重载方法委托”</span>复选框。</p></li><li class="list__item" id="46787553"><p>如果需要，请按<kbd data-primary_default_for_windows="Shift+Tab" data-primary_eclipse="Shift+Tab" data-primary_emacs="Shift+Tab" data-primary_netbeans="Shift+Tab" data-primary_sublime_text="Shift+Tab" data-primary_visual_studio="Shift+Tab" data-secondary_macos="⇧⇥" data-secondary_eclipse="⇧⇥" data-secondary_eclipse_macos="⇧⇥" data-secondary_emacs="⇧⇥" data-secondary_intellij_idea_classic="⇧⇥" data-secondary_netbeans="⇧⇥" data-secondary_sublime_text="⇧⇥" data-secondary_sublime_text_macos="⇧⇥" data-secondary_visual_studio="⇧⇥">Shift+Tab</kbd>更改新参数的类型。（如果在此步骤中要返回到编辑参数名称，请按<kbd data-primary_default_for_windows="Tab" data-primary_eclipse="Tab" data-primary_emacs="Tab" data-primary_netbeans="Tab" data-primary_sublime_text="Tab" data-primary_visual_studio="Tab" data-secondary_macos="⇥" data-secondary_eclipse="⇥" data-secondary_eclipse_macos="⇥" data-secondary_emacs="⇥" data-secondary_intellij_idea_classic="⇥" data-secondary_netbeans="⇥" data-secondary_sublime_text="⇥" data-secondary_sublime_text_macos="⇥" data-secondary_visual_studio="⇥">Tab</kbd> ）</p></li></ol></section>    <div class="chapter"><h2 id="extract_param_example">提取参数示例</h2>    <p id="1a76f7b8">提取新参数时，可以将参数引入现有方法中，也可以使用“ <span class="control">通过重载方法委托”</span>选项保存原始方法，并使用参数定义新方法。</p>    <p id="50cfc8eb">让我们替换字符串值<code class="code">"Hello, World!"</code>在方法中<code class="code">generateText ()</code>使用新参数<code class="code">text</code> 。价值<code class="code">"Hello, World!"</code>在更新的方法调用中传递给方法<code class="code">generateText("Hello, World!")</code> 。</p>        <div class="tabs" id="7251348c"><div class="tabs__content" id="2d53f823" data-title="Java">                <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="71547c79"><thead><tr id="333dea0f" class="ijRowHead"><th id="554c1f6e" width="50%"><p>之前</p></th><th id="3f3ba5d5" width="50%"><p>后</p></th></tr></thead><tbody><tr id="36dee286" class="ijRowOdd"><td id="1ae916a7">                            <div class="code-block" data-lang="java">公共类HelloWorldPrinter {public static void print（）{System.out.println（generateText（））; }私有静态字符串generateText（）{返回“您好，世界！“ .toUpperCase（）;}}</div>                        </td><td id="63c82883">                            <div class="code-block" data-lang="java">公共类HelloWorldPrinter {公共静态无效print（）{System.out.println（generateText（“您好，世界！“））;}私有静态字符串generateText（String text）{return text.toUpperCase（）;}}</div>                        </td></tr></tbody></table></div>            </div><div class="tabs__content" id="43eddc73" data-title="Kotlin">                <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="fce078e5"><thead><tr id="2af64e93" class="ijRowHead"><th id="dd56db34" width="50%"><p>之前</p></th><th id="1ea2a584" width="50%"><p>后</p></th></tr></thead><tbody><tr id="28c5a97d" class="ijRowOdd"><td id="22778ff4">                            <div class="code-block" data-lang="kotlin">对象HelloWorldPrinter {有趣的print（）{println（generateText（））}私有fun generateText（）：字符串{返回“ Hello，世界！“ .toUpperCase（）}}</div>                        </td><td id="b0ffa2b6">                            <div class="code-block" data-lang="none">对象HelloWorldPrinter {fun print（）{println（generateText（“ Hello，World！“））}私人乐趣generateText（text：String）：String {返回text.toUpperCase（）}}</div>                        </td></tr></tbody></table></div>            </div></div>        <p id="94aa8d0f">现在，让我们<span class="control">通过重载方法</span>使用<span class="control">Delegate</span> 。在这种情况下，将创建一个新的重载方法，并在此方法的定义中提取新的参数（第二个重载方法）。 <code class="code">generateText()</code>方法）。现有签名<code class="code">generateText()</code>方法不变。但是，该方法本身已被修改。现在，它称为新<code class="code">generateText()</code>方法并传递值<code class="code">"Hello, World!"</code>在这次通话中。请注意， <code class="code">generateText()</code> （在方法中<code class="code">print()</code> ）不变。</p>        <div class="tabs" id="b59bcb76"><div class="tabs__content" id="89231bf1" data-title="Java">                <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="34cf3a45"><thead><tr id="f89fda01" class="ijRowHead"><th id="e749bb16" width="50%"><p>之前</p></th><th id="9d5fa66b" width="50%"><p>后</p></th></tr></thead><tbody><tr id="e873f453" class="ijRowOdd"><td id="1ed907fd">                            <div class="code-block" data-lang="java">公共类HelloWorldPrinter {public static void print（）{System.out.println（generateText（））; }私有静态字符串generateText（）{返回“您好，世界！“ .toUpperCase（）;}}</div>                        </td><td id="8e20c10b">                            <div class="code-block" data-lang="java">公共类HelloWorldPrinter {public static void print（）{System.out.println（generateText（））; }私有静态字符串generateText（）{return generateText（“ Hello，World！“）;}私有静态字符串generateText（String text）{return text.toUpperCase（）;}}</div>                        </td></tr></tbody></table></div>            </div><div class="tabs__content" id="73b7b524" data-title="Kotlin">                <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="374f24c2"><thead><tr id="0777e93d" class="ijRowHead"><th id="283a6884" width="50%"><p>之前</p></th><th id="ea49d0dd" width="50%"><p>后</p></th></tr></thead><tbody><tr id="3fab86ec" class="ijRowOdd"><td id="490463dc">                            <div class="code-block" data-lang="none">对象HelloWorldPrinter {有趣的print（）{println（generateText（））}私有fun generateText（）：字符串{返回“ Hello，世界！“ .toUpperCase（）}}</div>                        </td><td id="61657f40">                            <div class="code-block" data-lang="none">//如果选择了“引入默认值”选项对象HelloWorldPrinter {fun print（）{println（generateText（））} private fun generateText（text：String =“ Hello，World！“）：字符串{返回text.toUpperCase（）}}</div>                        </td></tr></tbody></table></div>            </div></div>    </div>    <div class="chapter"><h2 id="functional_parameter">功能参数示例</h2>        <p id="90b5fe0a">让我们执行重构<code class="code">System.out.println(s);</code>中<code class="code">Hello.printHello()</code> 。</p>        <p id="interface">IntelliJ IDEA查找具有适当方法签名的所有功能接口<code class="code">(String) -> void</code>并建议您选择其中之一。（在此示例中，界面<code class="code">Person</code>被选中。）</p><aside class="prompt" rel="interface" id="a6c01ff6" data-type="tip" data-title="">            <p id="0ce5d781">只有标有的接口<code class="code">@FunctionalInterface</code>或建议使用属于著名库（例如Guava，Apache Collections等）的库。</p>        </aside>        <p id="07c93864">结果，选定的片段<code class="code">System.out.println(s);</code>被基于接口的匿名类包装<code class="code">Person</code> 。该匿名类作为参数传递给对<code class="code">printHello()</code>中<code class="code">printText()</code> 。</p>        <p id="e627652d">            <code class="code">Person</code>作为参数添加到<code class="code">printHello()</code>最初选择的代码片段将替换为对接口方法的调用<code class="code">sayHello()</code> 。</p>                <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="607ac8cc"><thead><tr id="0e8340a2" class="ijRowHead"><th id="12571799"><p>之前</p></th><th id="51996e5e"><p>后</p></th></tr></thead><tbody><tr id="827b3934" class="ijRowOdd"><td id="f7bae4bc">                    <div class="code-block" data-lang="java">@FunctionalInterface公共接口Person {public void sayHello（String s）; }公共类Hello {private void printHello（）{String s =“ Hello”; System.out.println（s）; } private void printText（）{printHello（）; }}</div>                </td><td id="2a4031d6">                    <div class="code-block" data-lang="java">@FunctionalInterface公共接口Person {public void sayHello（String s）; }公共类Hello {private void printHello（Person person）{String s =“ Hello”; person.sayHello（s）; }私有void printText（）{printHello（new Person（）{public void sayHello（String s）{System.out.println（s）;}））; }}</div>                </td></tr></tbody></table></div>    </div>    <div class="chapter"><div class="collapse"><div class="collapse__title"><h2 id="b6380050">提取参数重构的特殊说明</h2></div><div class="collapse__content">    <ul class="list _ul"><li class="list__item" id="252a5b04"><p>如果要在方法声明中将字段作为新参数提供，则在方法调用中，该字段将作为类实例的字段显示。</p></li><li class="list__item" id="7ea4e035"><p>如果无法访问类成员（例如，在上面的示例中该字段为私有），则将其插入到方法调用中，但将突出显示为错误，从而使该文件不可编译。</p></li><li class="list__item" id="750b6187">如果将“提取参数”用于使用getter重构字段，则将出现扩展对话框提示。该对话框具有一个选项组， <span class="control">将表达式中使用的字段替换为它们的getter</span> ：<ul class="list _ul"><li class="list__item" id="6eebdb4c"><p>               <span class="control">不要替换</span> ：没有任何字段将被对getter的调用替换。</p></li><li class="list__item" id="a5100835"><p>               <span class="control">替换在使用情况上下文中不可访问</span>的字段：仅将无法从使用情况上下文直接访问的字段替换为对getter的调用。</p></li><li class="list__item" id="43d3e6fb"><p>               <span class="control">替换所有字段</span> ：所有字段将被对getter的调用替换。</p></li></ul>      </li><li class="list__item" id="ca91766a">在本地变量上应用重构将调用带有其他复选框的“ <span class="control">提取参数”</span>对话框：<ul class="list _ul"><li class="list__item" id="12d03c18"><p>               <span class="control">替换所有实例（ <number_of_occurrences>实例）</number_of_occurrences></span> ：如果启用，则所选变量的所有实例都将替换为一个参数，并启用“ <span class="control">删除变量定义”</span>复选框。否则，只有选定的变量用法将被参数替换。</p></li><li class="list__item" id="a17198b9"><p>               <span class="control">删除变量定义</span> ：如果启用，则将删除变量定义。</p></li><li class="list__item" id="bbe74e9a"><p>               <span class="control">使用变量初始值设定项来初始化参数</span> ：如果启用，变量初始值设定项将用于在方法调用中初始化参数。</p></li></ul>      </li></ul>    </div></div></div>    <div class="chapter"><div class="collapse"><div class="collapse__title"><h2 id="side_effects">副作用</h2></div><div class="collapse__content">    <p id="47207c91">如果将<span class="control">提取参数</span>重构应用于实际方法参数的类实例或表达式，则可能会产生意外的副作用。例如，在这样的代码的情况下：</p><div class="code-block" data-lang="java">class AClass {int字段； int method（）{返回字段； }}类用法{无效方法（列表）{int sum = 0; for（迭代器it = list.iterator（）; it.hasNext（）;）{sum + =（（（AClass）it.next（））。method（）; }}}</div>    <p id="869043ef">重构后的代码应用于该字段<code class="code">field</code> ：</p><div class="code-block" data-lang="java">class AClass {int字段； int method（int newfield）{return newfield; }}类用法{无效方法（列表）{int sum = 0; for（迭代器it = list.iterator; it.hasNext（）;）{sum + =（（（AClass）it.next（））。method（（（（AClass）it.next（））。field）; }}}</div>    <p id="d8319273">迭代器值增加了两倍，实际上，这不是您期望的行为。</p>    <p id="1491426a">但是，IntelliJ IDEA可以成功使用临时变量，并解决诸如递增/递减/赋值操作和新关键字用法之类的情况。例如：</p><div class="code-block" data-lang="java">public int myMethod（List list）{return list.size（）; } public void anotherMethod（）{myMethod（new ArrayList（））; }</div>    <p id="dcc8be12">重构后的相同代码如下所示：</p><div class="code-block" data-lang="java">public int myMethod（List list，int newPar）{return list.size（）; } public void anotherMethod（）{final ArrayList list = new ArrayList（）; myMethod（list，list.size（））; }</div>    <p id="9b1a925b">新变量<code class="code">list</code>已创建，并且使用此变量提供了用于方法调用的所有参数。</p>    </div></div></div>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="extract-variable.html">提取变量</a> <a class="navigation-links__next" href="extract-into-class-refactorings.html">提取到类重构中</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>