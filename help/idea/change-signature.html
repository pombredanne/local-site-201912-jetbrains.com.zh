<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>更改签名-帮助| IntelliJ IDEA</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="procedures.refactoring.changeMethodSignature" data-breadcrumbs="Working_with_source_code.xml|Working with source code/Refactoring_Source_Code.xml|Refactoring code/Change_Signature.xml|Change signature" data-main-title="Change signature" data-article-props="
                {
                
            " seeals=":[=" titl=":=" web="" resource=",=" link=":=" ur=":" http:="" ="" www.jetbrains.net="" devnet="" community="" idea="" k="," tex=":" developer="" communit="}="><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索IntelliJ IDEA帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_macos" data-group="secondary">苹果系统</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_macos" data-group="secondary">Eclipse（macOS）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_intellij_idea_classic" data-group="secondary">IntelliJ IDEA经典版</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_sublime_text" data-group="secondary">崇高文字</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Change_Signature.xml" data-toc="procedures.refactoring.changeMethodSignature">变更签名</h1>                                                    <a name="change_signature_introduction"></a>                                    <p id="change_method_signature_availability"><span class="control">更改签名</span>重构结合了可以应用于方法签名或类签名的几种不同的修改。</p><aside class="prompt" rel="change_method_signature_availability" id="3f04d3be" data-type="note" data-title="">        <p id="0875b19e">您可以从<a href="class-diagram.html">UML类图</a>访问此重构。</p>    </aside>        <p id="ed1b324b">对于一个<span class="emphasis">类</span> ，这种重构可以将一个类转变为一个泛型并操纵其类型参数。它会自动更正该类的所有调用，实现和重写。</p>    <p id="322b0232">对于<span class="emphasis">方法</span> ，此重构可以更改方法名称，添加，删除，重新排序和重命名参数和异常，并通过调用层次结构传播新的参数和异常。</p>    <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="4a462853"><p>选择要更改其签名的方法或类。</p></li><li class="list__item" id="e73c4c0b"><p>从上下文菜单中，选择“ <span class="menupath" data-skip-index="skip">重构|更改签名</span> （ <kbd data-primary_default_for_windows="Ctrl+F6" data-primary_eclipse="Shift+Alt+C" data-primary_emacs="Ctrl+F6" data-primary_netbeans="Ctrl+F6" data-primary_sublime_text="N/A" data-primary_visual_studio="Ctrl+F6" data-secondary_macos="⌘F6" data-secondary_eclipse="⌥⇧C" data-secondary_eclipse_macos="⌥⌘C" data-secondary_emacs="⌃F6" data-secondary_intellij_idea_classic="⌘F6" data-secondary_netbeans="⌃F6" data-secondary_sublime_text="N/A" data-secondary_sublime_text_macos="N/A" data-secondary_visual_studio="⌃F6">Ctrl+F6</kbd> ）。</p></li><li class="list__item" id="2b8d9d55"><p>在打开的对话框中，根据要更改的签名，指定适当的选项，然后单击<span class="control">Refactor</span> 。如果您想查看潜在更改的<span class="control">预览</span> ，请点击<span class="control">预览</span> 。</p></li></ol></section><div class="chapter"><h2 id="change_class_signature_refactoring" data-toc="procedures.refactoring.changeMethodSignature#change_class_signature_refactoring">更改类签名示例</h2>    <p id="change_signature_kotlin">让我们添加类型参数<code class="code">Param1, Param2</code>上课<code class="code">MyClass</code> 。</p><aside class="prompt" rel="change_signature_kotlin" id="db128d6d" data-type="note" data-title="">        <p id="435ca06a">对于<a href="https://kotlinlang.org/docs/reference/" rel="noopener noreferrer" data-external="true" target="_blank">Kotlin</a> ，此重构的作用与Java相同。你可以按<kbd data-primary_default_for_windows="Ctrl+Shift+Alt+K" data-primary_eclipse="Ctrl+Shift+Alt+K" data-primary_emacs="Ctrl+Shift+Alt+K" data-primary_netbeans="Ctrl+Shift+Alt+K" data-primary_sublime_text="Ctrl+Shift+Alt+K" data-primary_visual_studio="Ctrl+Shift+Alt+K" data-secondary_macos="⌥⇧⌘K" data-secondary_eclipse="⌃⌥⇧K" data-secondary_eclipse_macos="⌥⇧⌘K" data-secondary_emacs="⌃⌥⇧K" data-secondary_intellij_idea_classic="⌥⇧⌘K" data-secondary_netbeans="⌃⌥⇧K" data-secondary_sublime_text="⌃⌥⇧K" data-secondary_sublime_text_macos="⌥⇧⌘K" data-secondary_visual_studio="⌃⌥⇧K">Ctrl+Shift+Alt+K</kbd>将您的Java代码转换为Kotlin。</p>    </aside>        <p id="c2b37337">字符串和整数是在“ <span class="control">更改类签名”</span>对话框中为<code class="code">Param1</code>和<code class="code">Param2</code>分别。</p>    <p id="b94e0bcd">您还可以为参数添加有界值，以对传递给类型参数的内容施加一些限制。例如，添加<code class="code">Param3</code>具有默认值<code class="code">List</code>和有界值<code class="code">Collection</code>    </p>    <figure><img alt="更改班级签名" title="更改班级签名" src="/help/img/idea/2019.3/change_class_signature.png" id="45478e60" width="394" height="264"></figure>    <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="8285d66c"><thead><tr id="3cc642f0" class="ijRowHead"><th id="66ba0de0" width="50%"><p>之前</p></th><th id="783ed347" width="50%"><p>后</p></th></tr></thead><tbody><tr id="type_parameters" class="ijRowOdd"><td id="33c84596">                <div class="code-block" data-lang="java">公共类MyClass {公共类MyOtherClass {MyClass myClass; void myMethod（MyClass myClass）{}}}</div>            </td><td id="096bbd34">                <div class="code-block" data-lang="java">公共类MyClass <param1, param2,="" param3="" extends="" collection="">{公共类MyOtherClass {MyClass <string, integer="">myClass; void myMethod（MyClass <string, list="" integer,="">myClass）{}}}</string,></string,></param1,></div>            </td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="change_method_signature_refactoring" data-toc="procedures.refactoring.changeMethodSignature#change_method_signature_refactoring">更改方法签名示例</h2>        <p id="f6a9df5f">您可以向方法添加参数，并在“ <span class="control">更改方法签名”</span>对话框中指定不同的选项，以得到不同的结果。</p>        <p id="67d23bf6">您还可以向方法添加异常，它们将在调用层次结构中传播。</p><aside class="prompt" rel="67d23bf6" id="a0e59198" data-type="note" data-title=""><p id="2bb1b264">如果方法合同是由<code class="code">@Contract</code>注释中，“ <span class="emphasis">更改方法签名”</span>重构也尝试转换此类方法。但是，在某些情况下，重构可能会失败，您将需要手动调整合同。</p></aside><figure><img alt="更改方法签名" title="更改方法签名" src="/help/img/idea/2019.3/change_method_signature.png" id="5b1ae923" width="578" height="570"></figure>        <a name="change_method_signature_example"></a>        <div class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="adding_parameters">添加参数</h3></div><div class="collapse__content">            <p id="b84e535a">让我们添加一个带有名称的参数<code class="code">price</code> ，类型<code class="code">double</code> ，以及默认值<code class="code">0.0</code> 。</p>            <p id="d14b0953">IntelliJ IDEA将参数添加到方法，更新方法调用并指定默认参数值。</p>            <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="44f74eb4"><thead><tr id="ca60cc86" class="ijRowHead"><th id="1a23c9b1" width="50%"><p>之前</p></th><th id="ea798a4d" width="50%"><p>后</p></th></tr></thead><tbody><tr id="eeeeec73" class="ijRowOdd"><td id="19ee5059">                        <div class="code-block" data-lang="java">public class MyClass {public void myMethod（int value）{} public class MyOtherClass {public void myMethodCall（MyClass myClass）{double d = 0.5; myClass.myMethod（1）; }}}</div>                    </td><td id="25fa185c">                        <div class="code-block" data-lang="java">public class MyClass {public void myMethod（int i，double price）{} public class MyOtherClass {public void myMethodCall（MyClass myClass）{double d = 0.5; myClass.myMethod（1，0.0）; }}}</div>                    </td></tr></tbody></table></div>        </div></div></div>        <div class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="use_variable">使用任何变量</h3></div><div class="collapse__content">            <p id="2ca9cb87">让我们更新所有方法调用，并在方法调用附近查找适当类型的变量，然后将其传递给方法。为此，请选中“ <span class="control">使用任何变量”</span>选项。</p>            <p id="d69ac478">结果，IntelliJ IDEA找到了与新参数具有相同类型的变量<b id="54345f31" origin="intellij-platform">d</b> ，并将其用于方法调用中。</p>            <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="861f825b"><thead><tr id="8120f152" class="ijRowHead"><th id="45a14ae2" width="50%"><p>之前</p></th><th id="194b3905" width="50%"><p>后</p></th></tr></thead><tbody><tr id="a29fd3b3" class="ijRowOdd"><td id="24c0a775">                        <div class="code-block" data-lang="java">public class MyClass {public void myMethod（int value）{} public class MyOtherClass {public void myMethodCall（MyClass myClass）{double d = 0.5; myClass.myMethod（1）; }}}</div>                    </td><td id="5d239ad2">                        <div class="code-block" data-lang="java">public class MyClass {public void myMethod（int i，double price）{} public class MyOtherClass {public void myMethodCall（MyClass myClass）{double d = 0.5; myClass.myMethod（1，d）; }}}</div>                    </td></tr></tbody></table></div>        </div></div></div>        <div class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="overload_method">重载方法</h3></div><div class="collapse__content">            <p id="d0d90abd">让我们要求IntelliJ IDEA保持方法调用不变，但是创建一个新的重载方法，该方法将使用新的签名来调用该方法。为此，请使用“ <span class="control">通过重载方法委托”</span>选项。</p>            <p id="53b5be83">请注意，新的重载方法具有旧的签名。但是，它将使用新签名来调用该方法。 <code class="code">0.0</code>在执行重构时被指定为默认参数值。</p>            <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="c7ef27b4"><thead><tr id="416e4335" class="ijRowHead"><th id="1b149183" width="50%"><p>之前</p></th><th id="c3d16f95" width="50%"><p>后</p></th></tr></thead><tbody><tr id="0d4d1310" class="ijRowOdd"><td id="32623256">                        <div class="code-block" data-lang="java">public class MyClass {public void myMethod（int value）{} public class MyOtherClass {public void myMethodCall（MyClass myClass）{double d = 0.5; myClass.myMethod（1）; }}}</div>                    </td><td id="039ae811">                        <div class="code-block" data-lang="java">公共类MyClass {public void myMethod（int i）{myMethod（i，0.0）; } public void myMethod（int i，double price）{} public class MyOtherClass {public void myMethodCall（MyClass myClass）{double d = 0.5; myClass.myMethod（1）; }}}</div>                    </td></tr></tbody></table></div>        </div></div></div>        <div class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="propagate_parameters">传播参数</h3></div><div class="collapse__content">            <p id="ce4d4dc6">让我们传播<img alt="传播参数" title="传播参数" src="/help/img/idea/2019.3/propagateParameters.png" id="59d75997" width="13" height="17" class="inline-icon-13"><kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+G</span></kbd>通过调用方法调用方法的新参数<code class="code">myMethodCall()</code> 。</p>            <p id="179d79dc">结果，新参数<code class="code">price</code>通过调用方法传播到方法调用，并相应地更改方法调用。</p>            <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="57cacb92"><thead><tr id="4823d63d" class="ijRowHead"><th id="8526f94b" width="50%"><p>之前</p></th><th id="50bbf3df" width="50%"><p>后</p></th></tr></thead><tbody><tr id="c47ed737" class="ijRowOdd"><td id="eb4a6321">                        <div class="code-block" data-lang="java">public class MyClass {public void myMethod（int value）{} public class MyOtherClass {public void myMethodCall（MyClass myClass）{double d = 0.5; myClass.myMethod（1）; }}}</div>                    </td><td id="830045ca">                        <div class="code-block" data-lang="java">public class MyClass {public void myMethod（int i，double price）{} public class MyOtherClass {public void myMethodCall（MyClass myClass，double price）{double d = 0.5; myClass.myMethod（1，价格）; }}}</div>                    </td></tr></tbody></table></div>        </div></div></div>        <div class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="dd90dac9">传播异常</h3></div><div class="collapse__content">            <p id="5c872461">让我们添加一个方法<code class="code">read</code>引发异常<code class="code">IOException</code>上课<code class="code">MyClass</code> 。</p>            <p id="befd6467">然后创建一个新类<code class="code">ExtendsMyClass</code>将会延伸<code class="code">MyClass</code>并覆盖原始<code class="code">read</code>方法。</p>            <p id="2c73efeb">现在，如果我们回到<code class="code">MyClass</code>并决定添加另一个例外，例如， <code class="code">TimeOutException</code>通过这种重构，该方法<code class="code">read</code>也会更新子类。</p>            <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="1c306bff"><thead><tr id="694d111a" class="ijRowHead"><th id="0ec8a6ef" width="50%"><p>之前</p></th><th id="a81120bf" width="50%"><p>后</p></th></tr></thead><tbody><tr id="ff60755d" class="ijRowOdd"><td id="508819d3">                        <div class="code-block" data-lang="java">公共类MyClass {公共无效read（）引发IOException {}公共类myOtherClass（int值）{}公共类MyOtherClass {公共无效myMethodCall（MyClass myClass）{double d = 0.5; myClass.myMethod（1）; }}} //创建一个新类“ ExtendsMyClass”。公共类ExtendsMyClass扩展MyClass {@Override public void read（）抛出IOException {super.read（）; }}</div>                    </td><td id="c83fc1e8">                        <div class="code-block" data-lang="java">公共类MyClass {公共无效read（）引发IOException，TimeOutException {}公共无效myMethod（int值）{}公共类别MyOtherClass {公共无效myMethodCall（MyClass myClass）{double d = 0.5; myClass.myMethod（1）; }}} //如您所见，添加了“ TimeOutException”。公共类ExtendsMyClass扩展MyClass {@Override public void read（）抛出IOException，TimeOutException {super.read（）; }}</div>                    </td></tr></tbody></table></div>        </div></div></div>                </div><aside class="prompt" rel="change_method_signature_refactoring" id="97f46c99" data-type="note" data-title="">    <p id="b0b18013"><span class="emphasis">更改方法签名</span>重构适用于构造函数。但是，在这种情况下，名称和返回类型不能更改。</p></aside><aside class="prompt" rel="change_method_signature_refactoring" id="631b8226" data-type="tip" data-title="">            <p id="9124c1a1">要查看Java以外的其他语言的“ <span class="emphasis">更改方法签名”</span>重构示例，请参考以下主题：</p>            <p id="7288dec1"><a href="refactoring-php.html#php_change_signature">更改PHP的签名</a></p>            <p id="140339fd"><a href="specific-typescript-refactorings.html#typescript_change_signature_proc">更改TypScript的签名</a></p>            <p id="6cac408a"><a href="specific-javascript-refactorings.html#javascript_change_signature_code_example">更改JavaScript的签名</a></p>        </aside>                                            <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="refactoring-source-code.html">重构代码</a> <a class="navigation-links__next" href="convert-anonymous-to-inner.html">将匿名转换为内部</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>