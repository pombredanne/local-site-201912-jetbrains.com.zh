<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>提取变量-帮助|帮助IntelliJ IDEA</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="procedures.refactoring.introduceVariable" data-breadcrumbs="Working_with_source_code.xml|Working with source code/Refactoring_Source_Code.xml|Refactoring code/Extract refactorings/Extract_Variable.xml|Extract variable" data-main-title="Extract variable" data-article-props="
                {
                
            " seeals=":[=" titl=":=" procedure=",=" link=":=" ur=":" working-with-source-code.htm="," tex=":" selecting="" text="" in="" the="" edito="}=" rename-refactorings.htm="," rename="" refactoring="}=" specific-javascript-refactorings.html#javascript_extract_variabl="," extract="" variable="" javascrip="}=" referenc=",=" extract-variable-refactoring-dialog.htm="," dialo="}=" =""><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索IntelliJ IDEA帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_macos" data-group="secondary">苹果系统</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_macos" data-group="secondary">Eclipse（macOS）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_intellij_idea_classic" data-group="secondary">IntelliJ IDEA经典版</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_sublime_text" data-group="secondary">崇高文字</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Extract_Variable.xml" data-toc="procedures.refactoring.introduceVariable">提取变量</h1>                                                          <a name="extract-variable-chunk"></a>        <p id="2796adc6">如果遇到难以理解的表达式，或者在整个代码中多个地方重复了该表达式，则<span class="emphasis">提取变量</span>重构可以帮助您解决将此类表达式的结果或其部分放入不太复杂的单独变量中的问题。而且更容易理解另外，它减少了代码重复。</p>        <p id="da876d83">从Java 1.8和更高版本开始，IntelliJ IDEA还允许您<a href="#extract_functional_variable">提取功能类型变量</a> 。</p>                        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="149f0291"><p>在编辑器中，选择要提取的表达式或其部分。您还可以将插入号放置在表达式中，在这种情况下，IntelliJ IDEA会为您提供潜在代码选择的列表。</p></li><li class="list__item" id="568c57c9"><p>按<kbd data-primary_default_for_windows="Ctrl+Alt+V" data-primary_eclipse="Shift+Alt+L" data-primary_emacs="Ctrl+Alt+V" data-primary_netbeans="Shift+Alt+V" data-primary_sublime_text="Ctrl+Alt+V" data-primary_visual_studio="Ctrl+Alt+V" data-secondary_macos="⌥⌘V" data-secondary_eclipse="⌥⇧L" data-secondary_eclipse_macos="⌥⌘L" data-secondary_emacs="⌃⌥V" data-secondary_intellij_idea_classic="⌥⌘V" data-secondary_netbeans="⌥⇧V" data-secondary_sublime_text="⌃⌥V" data-secondary_sublime_text_macos="N/A" data-secondary_visual_studio="⌃⌥V">Ctrl+Alt+V</kbd>或从主菜单中选择“ <span class="menupath" data-skip-index="skip">重构|提取物|提取变量</span> 。</p></li><li class="list__item" id="476482e5">选择弹出窗口中建议的名称或键入您自己的名称，然后按<kbd data-primary_default_for_windows="Enter" data-primary_eclipse="Enter" data-primary_emacs="Enter" data-primary_netbeans="Enter" data-primary_sublime_text="Enter" data-primary_visual_studio="Enter" data-secondary_macos="⏎" data-secondary_eclipse="⏎" data-secondary_eclipse_macos="⏎" data-secondary_emacs="⏎" data-secondary_intellij_idea_classic="⏎" data-secondary_netbeans="⏎" data-secondary_sublime_text="⏎" data-secondary_sublime_text_macos="⏎" data-secondary_visual_studio="⏎">Enter</kbd> 。<figure><img alt="提取变量" title="提取变量" src="/help/img/idea/2019.3/extract_var.png" id="30286598" width="374" height="198"></figure>如果IntelliJ IDEA发现多个事件，则可以指定是否要为所有事件提取此变量。<p id="71840941">您还可以声明要提取为的变量<code class="code">final</code> 。</p>如果要将现有变量重新分配给新变量，请按<kbd data-primary_default_for_windows="Ctrl+Alt+V" data-primary_eclipse="Shift+Alt+L" data-primary_emacs="Ctrl+Alt+V" data-primary_netbeans="Shift+Alt+V" data-primary_sublime_text="Ctrl+Alt+V" data-primary_visual_studio="Ctrl+Alt+V" data-secondary_macos="⌥⌘V" data-secondary_eclipse="⌥⇧L" data-secondary_eclipse_macos="⌥⌘L" data-secondary_emacs="⌃⌥V" data-secondary_intellij_idea_classic="⌥⌘V" data-secondary_netbeans="⌥⇧V" data-secondary_sublime_text="⌃⌥V" data-secondary_sublime_text_macos="N/A" data-secondary_visual_studio="⌃⌥V">Ctrl+Alt+V</kbd> 。如果您有多个现有变量，则IntelliJ IDEA将显示一个列表供您选择。<p id="ab6660fa">你可以按<kbd data-primary_default_for_windows="Shift+Tab" data-primary_eclipse="Shift+Tab" data-primary_emacs="Shift+Tab" data-primary_netbeans="Shift+Tab" data-primary_sublime_text="Shift+Tab" data-primary_visual_studio="Shift+Tab" data-secondary_macos="⇧⇥" data-secondary_eclipse="⇧⇥" data-secondary_eclipse_macos="⇧⇥" data-secondary_emacs="⇧⇥" data-secondary_intellij_idea_classic="⇧⇥" data-secondary_netbeans="⇧⇥" data-secondary_sublime_text="⇧⇥" data-secondary_sublime_text_macos="⇧⇥" data-secondary_visual_studio="⇧⇥">Shift+Tab</kbd>更改变量的类型。</p>                    <figure><img alt="更改var的类型" title="更改var的类型" src="/help/img/idea/2019.3/change_type_for_var.png" id="60815c02" width="320" height="195"></figure>                            </li></ol></section>        <p id="8874a683">如果未在“ <span class="menupath" data-skip-index="skip">设置/首选项” |“首</span>选项”中选择“ <span class="control">启用就地模式</span> <span class="menupath" data-skip-index="skip">”选项。编辑器|“常规”</span>对话框（“ <i id="318b282f">重构”</i>部分），IntelliJ IDEA将打开“ <span class="control">提取变量”</span>对话框以进行此重构。</p>        <figure><img alt="提取变量对话框" title="提取变量对话框" src="/help/img/idea/2019.3/extract_var_dialog.png" id="d4c54f04" width="293" height="191"></figure>        <div class="chapter"><h2 id="218033ca">例</h2>            <p id="93ab87ea">让我们提取<code class="code">anotherClass.inValue()</code>在整个代码中出现两次的变量，并为其命名<code class="code">number</code> 。</p>            <div class="tabs" id="41be2497"><div class="tabs__content" id="735fcdef" data-title="Java">                <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="f713d548"><thead><tr id="9fa45ddd" class="ijRowHead"><th id="f6caf605" width="50%"><p>之前</p></th><th id="951a8ec2" width="50%"><p>后</p></th></tr></thead><tbody><tr id="004d43ac" class="ijRowOdd"><td id="1ab4eeb8">                            <div class="code-block" data-lang="java">public void method（）{int a = 1; ...int b = a + anotherClass.intValue（）; int c = b + anotherClass.intValue（）; }</div>                        </td><td id="086545c1">                            <div class="code-block" data-lang="java">public void method（）{int a = 1; ...整数= anotherClass.intValue（）; int b = a +数字； int c = b +数字； }</div>                        </td></tr></tbody></table></div>                </div><div class="tabs__content" id="131bda5c" data-title="Kotlin">                    <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="31444c9b"><thead><tr id="e978225f" class="ijRowHead"><th id="7ed91dd7" width="50%"><p>之前</p></th><th id="d2808167" width="50%"><p>后</p></th></tr></thead><tbody><tr id="61887b0b" class="ijRowOdd"><td id="dc07c602">                                <div class="code-block" data-lang="actionscript">func method（）{val a = 1 val b = a + anotherClass !!。intValue（）val c = b + anotherClass !!。intValue（）}</div>                            </td><td id="7ff1adec">                                <div class="code-block" data-lang="none">func method（）{val a = 1 val number = anotherClass !!。intValue（）val b = a + number val c = b + number}</div>                            </td></tr></tbody></table></div>                </div></div>        </div>                <div class="chapter"><div class="collapse"><div class="collapse__title"><h2 id="extract_functional_variable">提取功能变量</h2></div><div class="collapse__content">            <p id="c14158ab">此重构为Java 1.8和更高版本创建函数表达式，为Java的较早版本创建匿名类。</p>            <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="97c7225f"><p>选择代码片段，在此示例中，为<code class="code">println</code>方法。</p><figure><img alt="参数println" title="参数println" src="/help/img/idea/2019.3/argument_println.png" id="f6bf6700" width="453" height="265"></figure>                <p></p></li><li class="list__item" id="extract_functional_var">在主菜单中，选择“ <span class="menupath" data-skip-index="skip">重构”。提取物|功能变量</span> 。<br>IntelliJ IDEA打开“ <span class="control">提取功能变量”</span>对话框。<p id="84535b65">或者，从编辑器的上下文菜单中，选择“ <span class="menupath" data-skip-index="skip">重构” |“重构”。重构这个</span> <kbd data-primary_default_for_windows="Ctrl+Shift+Alt+T" data-primary_eclipse="Ctrl+Shift+Alt+T" data-primary_emacs="Ctrl+Shift+Alt+T" data-primary_netbeans="Ctrl+Shift+Alt+T" data-primary_sublime_text="Ctrl+Shift+Alt+T" data-primary_visual_studio="Ctrl+Shift+Alt+T" data-secondary_macos="⌃T" data-secondary_eclipse="⌃⌥⇧T" data-secondary_eclipse_macos="⌃T" data-secondary_emacs="⌃⌥⇧T" data-secondary_intellij_idea_classic="⌥⇧⌘T" data-secondary_netbeans="⌃⌥⇧T" data-secondary_sublime_text="⌃⌥⇧T" data-secondary_sublime_text_macos="⌃T" data-secondary_visual_studio="⌃⌥⇧T">Ctrl+Shift+Alt+T</kbd> ，然后选择<span class="control">功能变量</span> 。</p>                    <figure><img alt="提取函数变量" title="提取函数变量" src="/help/img/idea/2019.3/extrct_funtional_var.png" id="235e9550" width="524" height="371"></figure>                </li><li class="list__item" id="593119f8"><p>当所选代码取决于实例字段时（如示例中所示），将出现“将<span class="control">字段作为参数传递”</span>复选框，您可以在字段位置传递参数。</p><figure><img alt="提取函数var参数" title="提取函数var参数" src="/help/img/idea/2019.3/extrct_funtional_var_parameter.png" id="c0828dbc" width="492" height="330"></figure>但是，例如，如果您选择的代码片段取决于任何局部变量或参数<figure><img alt="样品串" title="样品串" src="/help/img/idea/2019.3/sample_string.png" id="a655b47f" width="394" height="285"></figure>相应的条目将出现在列表中。<figure><img alt="局部变量和参数" title="局部变量和参数" src="/help/img/idea/2019.3/local_variable_and_parameter.png" id="1f434452" width="524" height="369"></figure>在对话框中取消选择参数之一时，将使用相应的局部值。<figure><img alt="取消选择参数时" title="取消选择参数时" src="/help/img/idea/2019.3/when_param_deselected.png" id="b74e83f5" width="467" height="371"></figure>配置您的选项，然后单击“ <span class="control">确定”</span> 。<p></p></li><li class="list__item" id="d9012191"><p>从弹出窗口中选择一个适用的功能界面。</p><figure><img alt="功能界面" title="功能界面" src="/help/img/idea/2019.3/functional_interface.png" id="45548a51" width="675" height="288"></figure>                <p></p></li><li class="list__item" id="977342a3"><p>如果您不想使用列表中建议的名称，请更改提取的变量的名称。</p><figure><img alt="更改变量名称" title="更改变量名称" src="/help/img/idea/2019.3/changing_variable_name.png" id="fcc4c1b1" width="629" height="282"></figure>                <p></p></li><li class="list__item" id="functional_parameter"><p>IntelliJ IDEA创建lambda，您可以进一步使用它。</p><figure><img alt="复合功能" title="复合功能" src="/help/img/idea/2019.3/composed_function.png" id="d737bd40" width="632" height="287"></figure>                <p></p></li></ol><aside class="prompt" rel="functional_parameter" id="f7e5b9de" data-type="tip" data-title="">                <p id="c7628f8c">也可以使用<a href="javaintroduce.html#functional_parameter">功能参数</a>重构。</p>            </aside></section>                                    <div class="chapter"><h3 id="f9b5b2e4">例</h3>                <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="83c84e6a"><thead><tr id="ebaecf4d" class="ijRowHead"><th id="3ca81b3d"><p>之前</p></th><th id="faf1bf92"><p>后</p></th></tr></thead><tbody><tr id="52c0f538" class="ijRowOdd"><td id="9e229c93">                            <div class="code-block" data-lang="java">导入java.util。清单;公共类PrintAction实现Runnable {私有列表<string>数据； public PrintAction（List <string>data）{this.data = data; } public void run（）{System.out.println（“ Data：” + data.toString（））; }}</string></string></div>                        </td><td id="b7c3335b">                            <div class="code-block" data-lang="java">导入java.util。清单;导入java.util.function。功能;公共类PrintAction实现Runnable {私有列表<string>数据； public PrintAction（List <string>data）{this.data = data; } public void run（）{Function <list><string>，String> presenter =（p）->“ Data：” + p.toString（）; System.out.println（presenter.apply（data））; }}</string></list><string></string></string></string></div>                        </td></tr></tbody></table></div>            </div>        </div></div></div>                                      <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="extract-superclass.html">提取超类</a> <a class="navigation-links__next" href="javaintroduce.html">提取参数</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>