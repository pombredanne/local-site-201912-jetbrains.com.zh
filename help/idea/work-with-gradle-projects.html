<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Gradle项目-帮助|帮助IntelliJ IDEA</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Work_with_Gradle_projects" data-breadcrumbs="Language and framework-specific guidelines/Build tools/Gradle.xml|Gradle/Work_with_Gradle_projects.xml|Gradle projects" data-main-title="Gradle projects"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索IntelliJ IDEA帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_macos" data-group="secondary">苹果系统</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_macos" data-group="secondary">Eclipse（macOS）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_intellij_idea_classic" data-group="secondary">IntelliJ IDEA经典版</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_sublime_text" data-group="secondary">崇高文字</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Work_with_Gradle_projects.xml" data-toc="Work_with_Gradle_projects">摇篮项目</h1>    <p id="2507a729">IntelliJ IDEA使您可以管理<a href="http://gradle.org" rel="noopener noreferrer" data-external="true" target="_blank">Gradle</a>项目。您可以<a href="gradle.html#link_gradle_project">链接</a> ，忽略项目， <a href="work-with-maven-profiles.html">使用配置文件</a> ，以及同步Gradle和IntelliJ IDEA项目中的更改。您还可以配置Gradle复合构建，Gradle源集，构建和运行操作。</p>    <div class="chapter"><h2 id="navigate_build_file" data-toc="Work_with_Gradle_projects#navigate_build_file">导航到build.gradle文件</h2>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="8f69eb9d"><p>在<span class="control">Gradle</span>工具窗口中，右键单击一个链接的项目。</p></li><li class="list__item" id="17cf882c">从上下文菜单中，选择“ <span class="control">打开Gradle配置”</span> <kbd data-primary_default_for_windows="F4" data-primary_eclipse="F12" data-primary_emacs="F4" data-primary_netbeans="F4" data-primary_sublime_text="F4" data-primary_visual_studio="F4" data-secondary_macos="⌘↓" data-secondary_eclipse="F12" data-secondary_eclipse_macos="F3" data-secondary_emacs="F4" data-secondary_intellij_idea_classic="F4" data-secondary_netbeans="F4" data-secondary_sublime_text="F4" data-secondary_sublime_text_macos="N/A" data-secondary_visual_studio="F4">F4</kbd> 。<p id="5924fce0">IntelliJ IDEA导航到适当的Gradle配置文件，并在编辑器中打开相关的<span class="filepath">build.gradle</span>文件。</p>            </li></ol></section>    </div>    <div class="chapter"><h2 id="ignore_detach_gradle_project" data-toc="Work_with_Gradle_projects#ignore_detach_gradle_project">取消链接已链接的Gradle项目</h2>        <section class="procedure-steps"><p id="55553ac5">当您取消链接Gradle项目时，IntelliJ IDEA会删除所有相关模块和内容根，从<span class="control">Gradle</span>工具窗口中删除Gradle项目并停止其同步。如果您需要从当前IntelliJ IDEA项目中完全删除以前链接的Gradle项目，这可能会有所帮助。</p><ol class="list _decimal"><li class="list__item" id="30685c75"><p>在<span class="control">Gradle</span>工具窗口中，右键单击一个链接的项目。</p></li><li class="list__item" id="09704938"><p>从上下文菜单中，选择“ <span class="control">取消链接Gradle项目”</span> （ <kbd data-primary_default_for_windows="Delete" data-primary_eclipse="Delete" data-primary_emacs="Delete" data-primary_netbeans="Delete" data-primary_sublime_text="Delete" data-primary_visual_studio="Delete" data-secondary_macos="⌦" data-secondary_eclipse="⌦" data-secondary_eclipse_macos="⌦" data-secondary_emacs="⌦" data-secondary_intellij_idea_classic="⌦" data-secondary_netbeans="⌦" data-secondary_sublime_text="⌦" data-secondary_sublime_text_macos="⌦" data-secondary_visual_studio="⌦">Delete</kbd> ）。或者，您可以选择链接的项目，然后单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.remove@2x.png" width="16" alt="删除图标">在工具窗口的工具栏上。</p></li><li class="list__item" id="54e9e2a4"><p>如果您不想从IntelliJ IDEA <span class="control">项目</span>工具窗口中删除项目，则在<span class="control">Import Gradle Projects</span>弹出窗口中，清除模块复选框。</p></li><li class="list__item" id="fbe934cc">单击<span class="control">确定</span> 。<p id="0a0d084f">如果需要链接回项目，请在“ <span class="control">项目”</span>工具窗口中，右键单击项目的<span class="filepath">build.gradle</span>文件或<span class="filepath">build.gradle.kts（</span>如果它是Kotlin项目），然后选择<span class="control">Import Gradle Project</span> 。</p>            </li></ol></section>    </div>    <div class="chapter"><h2 id="ignore_project" data-toc="Work_with_Gradle_projects#ignore_project">忽略Gradle项目</h2>        <p id="6f10cfa5">您可以使用“ <span class="control">忽略Gradle项目”</span>选项停用Gradle项目。在这种情况下，IntelliJ IDEA将忽略的Gradle项目和子项目保留在<span class="control">Gradle</span>工具窗口中，但停止将其导入（模块，内容根目录，任务等）到项目中。但是，IntelliJ IDEA会将被忽略的项目与当前项目同步。如果您需要跳过无关的子项目（例如<span class="filepath">buildSrc）</span> ，可能会有所帮助。</p>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="808216d9"><p>在<span class="control">Gradle</span>工具窗口中，右键单击要忽略的项目。</p></li><li class="list__item" id="c3c3f0ce"><p>从上下文菜单中，选择“ <span class="control">忽略Gradle项目”</span> 。</p></li><li class="list__item" id="0d2d291f"><p>在打开的窗口中，选择要停用的项目和模块，然后单击<span class="control">确定</span> 。</p></li></ol><p id="b4aa24d8">如果要激活Gradle项目或模块，请从上下文菜单中选择<span class="control">Unignore Gradle Projects</span> 。</p></section>    </div>    <div class="chapter"><h2 id="orphan_modules" data-toc="Work_with_Gradle_projects#orphan_modules">孤立模块</h2>        <p id="e518762f">孤立模块是在以下情况下在导入过程中删除的IDE模块：</p>        <ul class="list _ul"><li class="list__item" id="df291873"><p>当您手动删除<span class="filepath">build.gradle</span>文件中的模块，然后重新导入您的项目时。</p></li><li class="list__item" id="8dd82cbf"><p>当您使用“ <a href="#ignore_project">忽略项目”</a>操作时，请在<span class="control">Gradle</span>工具窗口中的模块上，然后重新导入您的项目。</p></li></ul>            <p id="f51fcec8">在所有这些情况下，IntelliJ IDEA会提示您还原<span class="keyword">已删除的</span>模块。</p>        <figure><img alt="孤立模块通知" title="孤立模块通知" src="/help/img/idea/2019.3/removed_modules_notification.png" id="678eecdd" width="393" height="74"></figure>        <p id="43a6bee8">您可以在“ <span class="control">孤立模块”</span>对话框中选择要还原的文件。</p>        <figure><img alt="孤立模块对话框" title="孤立模块对话框" src="/help/img/idea/2019.3/orphan_modules_dialog.png" id="a0ca611a" width="441" height="173"></figure>        <p id="913311c4">通常，您不需要还原任何模块，因为这些只是包含IDE模块设置的<span class="filepath">.iml</span>文件。如果您在其中指定了一些用户定义的设置，则可能只想还原它们。</p>    </div>    <div class="chapter"><h2 id="gradle_refresh_project" data-toc="Work_with_Gradle_projects#gradle_refresh_project">重新导入链接的Gradle项目</h2>        <p id="5b8594a9">当您<a href="gradle.html#gradle_import_project_start">打开</a> Gradle项目时，同步将自动完成。</p>        <p id="96ec0967">如果需要，可以手动触发项目的同步。</p>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="ac9e496d"><p>在<span class="control">Gradle</span>工具窗口中，右键单击一个链接的项目。</p></li><li class="list__item" id="0b415cad">从上下文菜单中，选择“ <span class="control">重新导入Gradle项目”</span> <img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.refresh@2x.png" width="16" alt="重新导入图标"> 。<p id="296b8bf6">调用此操作后，IntelliJ IDEA会在<span class="control">Gradle</span>工具窗口中解析项目结构。</p>                <p id="ccbfe47a">IntelliJ IDEA无法重新导入项目的一部分，而是重新导入整个项目，包括模块和依赖项。</p>                <p id="e140d1a2">如果您通过“ <span class="control">项目结构”</span>对话框配置依赖项（请单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.projectStructure@2x.png" width="16" alt="项目结构按钮"> ，从主菜单），依赖项将仅出现在IntelliJ IDEA <span class="control">项目</span>工具窗口中，而不出现在<span class="control">Gradle</span>工具窗口中。请注意，下一次重新导入项目时，IntelliJ IDEA将删除添加的依赖项，因为IntelliJ IDEA将Gradle配置视为唯一的事实来源。</p>                <aside class="prompt" rel="e140d1a2" id="f68883bd" data-type="note" data-title="">                    <p id="auto-import">如果在<a href="gradle-settings.html#auto-import_settings">Gradle设置对话框</a>中选择了<span class="control">在构建脚本文件</span>中的<span class="control">更改时自动导入此项目</span> ，则每次对项目进行更改时，都会自动完成项目的重新导入。</p>                </aside>            </li><li class="list__item" id="03cb492b"><p>请点击<img class="inline-icon-13" src="/help/img/idea/2019.3/icons.toolwindows.toolWindowBuild@2x.png" width="13" alt="生成图标">在状态栏上查看，以在“ <a href="build-sync-tool-window.html">构建”</a>工具窗口中查看同步结果。</p></li></ol><aside class="prompt" rel="03cb492b" id="0551bedb" data-type="tip" data-title="">                <p id="09f6a13d">要重新导入所有Gradle项目，请单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.refresh@2x.png" width="16" alt="重新导入所有Gradle项目按钮">在工具栏上的<span class="control">Gradle</span>工具窗口中。</p>            </aside></section>            </div>    <div class="chapter"><h2 id="gradle_composite_build" data-toc="Work_with_Gradle_projects#gradle_composite_build">配置Gradle复合构建</h2>        <p id="fced9775">在开始配置复合构建之前，请确保已为项目配置了Gradle 3.1版或更高版本。</p>        <aside class="prompt" rel="fced9775" id="9bd4af39" data-type="note" data-title="">            <p id="d52728b2">检查<a href="https://docs.gradle.org/current/userguide/composite_builds.html#current_limitations_and_future_work" rel="noopener noreferrer" data-external="true" target="_blank">有关使用Gradle复合构建</a>的<a href="https://docs.gradle.org/current/userguide/composite_builds.html#current_limitations_and_future_work" rel="noopener noreferrer" data-external="true" target="_blank">限制</a> 。</p>        </aside>        <p id="af20a23e">您可以使用<span class="filepath">settings.gradle</span>文件为<a href="https://blog.gradle.org/introducing-composite-builds" rel="noopener noreferrer" data-external="true" target="_blank">Gradle复合构建</a>包括Gradle构建。</p>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="4968a8ac"><p>在编辑器中打开<span class="filepath">settings.gradle</span>文件。</p></li><li class="list__item" id="152963b4"><p>使用<code class="code">includeBuild</code>命令，指定要添加为项目依赖项的构建的位置。</p></li></ol></section>        <p id="a04e90ae">您还可以使用<span class="control">Gradle</span>工具窗口来配置复合构建。</p>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="3b6a5233"><p>打开一个Gradle项目。</p></li><li class="list__item" id="32a17506"><p><a href="gradle.html#link_gradle_project">链接</a>要用于复合构建的其他Gradle项目。</p></li><li class="list__item" id="c458d9f1"><p>在<span class="control">Gradle</span>工具窗口中，右键单击您的主项目，然后从上下文菜单中选择<span class="control">Composite Build Configuration</span> 。</p></li><li class="list__item" id="42ac0ac5"><p>在“ <span class="control">Gradle项目构建组合”</span>对话框中，选择要包含在Gradle复合构建中的项目。</p></li><li class="list__item" id="9f750e42">                <a href="#gradle_refresh_project">重新导入</a>您的主要Gradle项目。<p id="6ae0093b">IntelliJ IDEA找到包含的Gradle项目，并将其视为IntelliJ IDEA模块。</p>            </li></ol></section>    </div>    <div class="chapter"><h2 id="gradle_source_sets" data-toc="Work_with_Gradle_projects#gradle_source_sets">使用Gradle源集</h2>        <p id="8bb0b052">IntelliJ IDEA允许您在解析Gradle项目中使用<a href="https://docs.gradle.org/current/userguide/java_plugin.html#sec:java_source_sets" rel="noopener noreferrer" data-external="true" target="_blank">Gradle源集</a> 。源集在IntelliJ IDEA项目中被视为模块。您可以声明一个自定义源集，然后IntelliJ IDEA将其作为模块添加到项目中。</p>        <p id="create_source_set">创建Gradle项目时，IntelliJ IDEA会自动创建一个主<span class="control">Source Sets</span>目录，该目录包含两个Source Sets- <i id="ba05a70b">main</i>和<i id="2d71c863">test</i> 。用于编译<i id="739c90a0">测试</i>源存在于<i id="342b7ddd">主</i>源集的相关性。</p>        <figure><img alt="Gradle工具窗口：源集" title="Gradle工具窗口：源集" src="/help/img/idea/2019.3/gradle_main_source_set.png" id="e193c6af" width="462" height="255"></figure>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="custom_source_set">添加自定义源集</h3></div><div class="collapse__content"><ol class="list _decimal"><li class="list__item" id="79657960"><p>在编辑器中打开<span class="filepath">gradle.build</span>文件。</p></li><li class="list__item" id="a82f78f8"><p>声明一个自定义源集（在我们的示例中是api）。</p><div class="code-block" data-lang="groovy">sourceSets {api}依赖项{compile sourceSets.api.output}</div>（此源集包含没有实现的接口。接口的实现位于默认的<i id="14429feb">主</i>源集中。）<p></p></li><li class="list__item" id="6e06c63e"><p>打开<span class="control">Gradle</span>工具窗口，以查看IntelliJ IDEA已添加了<code class="code">api</code>源集。</p><figure><img alt="Gradle工具窗口：api源集" title="Gradle工具窗口：api源集" src="/help/img/idea/2019.3/gradle_source_sets_tool_window.png" id="032e1262" width="374" height="173"></figure>测试源集包含适当的依赖项。请注意，默认的<i id="644c841c">主</i>源集对<i id="e784f082">api</i>源集的输出具有编译依赖性。Gradle将调用<code class="code">apiClasses</code>如果您在<i id="dda778bf">主</i>源代码集中编译源代码，则该任务将自动执行。<figure><img alt="Gradle工具窗口：编译依赖项" title="Gradle工具窗口：编译依赖项" src="/help/img/idea/2019.3/gradle_source_sets_main_tool_window.png" id="2571227c" width="376" height="478"></figure>            <p></p></li><li class="list__item" id="43d58d98"><p>从主菜单中，选择文件|项目结构<kbd data-primary_default_for_windows="Ctrl+Shift+Alt+S" data-primary_eclipse="Ctrl+Shift+Alt+S" data-primary_emacs="Ctrl+Shift+Alt+S" data-primary_netbeans="Ctrl+Shift+Alt+S" data-primary_sublime_text="Ctrl+Shift+Alt+S" data-primary_visual_studio="Ctrl+Shift+Alt+S" data-secondary_macos="⌘;" data-secondary_eclipse="⌃⌥⇧S" data-secondary_eclipse_macos="⌘;" data-secondary_emacs="⌃⌥⇧S" data-secondary_intellij_idea_classic="⌘;" data-secondary_netbeans="⌃⌥⇧S" data-secondary_sublime_text="⌃⌥⇧S" data-secondary_sublime_text_macos="⌘;" data-secondary_visual_studio="⌃⌥⇧S">Ctrl+Shift+Alt+S</kbd>打开项目结构。请注意，所有源集都表示为单独的模块，这些模块被分组为一个模块。</p><figure><img alt="项目结构对话框/模块页面" title="项目结构对话框/模块页面" src="/help/img/idea/2019.3/gradle_source_sets_project_structure.png" id="3e3b11de" width="451" height="325"></figure>如果单击测试模块并选择“ <span class="control">依赖关系”</span>选项卡，则将看到源集的依赖关系列表。<figure><img alt="“项目结构”对话框/“依赖项”选项卡" title="“项目结构”对话框/“依赖项”选项卡" src="/help/img/idea/2019.3/gradle_source_sets_dependencies.png" id="584397f4" width="600" height="297"></figure>            <p></p></li></ol></div></div></section>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="tests_with_source_set">使用源集进行自定义测试</h3></div><div class="collapse__content"><p id="ac94cf79">您可以添加自定义测试，并使用源设置功能与主要测试分开运行。</p><ol class="list _decimal"><li class="list__item" id="2d88cbb6"><p>声明源集的方式与声明<a href="#custom_source_set">自定义源集的</a>方式相同。除了源集的名称外，还要指定输出目录和将运行声明的测试的任务。例如，声明一个集成测试<code class="code">integrationTest</code> 。</p><div class="code-block" data-lang="groovy">sourceSets {integrationTest {Java {srcDir'src / integrationtest / java'}资源{srcDir'src / integrationtest / resources'} compileClasspath + = sourceSets.main.runtimeClasspath}} task integrationTest（type：Test）{description =“运行集成测试“ testClassesDirs = sourceSets.integrationTest.output.classesDirs类路径+ = sourceSets.integrationTest.runtimeClasspath}</div>            <p></p></li><li class="list__item" id="6a17f798"><p>在“ <span class="control">Gradle</span>工具”窗口中，单击“ <span class="menupath" data-skip-index="skip">任务” |“任务”。其他</span> 。</p></li><li class="list__item" id="03b11407"><p>在打开的列表中，双击<code class="code">integrationTest</code>运行它。</p><figure><img alt="Gradle工具窗口：任务" title="Gradle工具窗口：任务" src="/help/img/idea/2019.3/gradle_run_integration_test.png" id="ffeff2f9" width="375" height="560"></figure>            <p></p></li></ol></div></div></section>    </div>    <div class="chapter"><h2 id="package_prefixes" data-toc="Work_with_Gradle_projects#package_prefixes">在Gradle项目中添加包前缀</h2>        <p id="e675922c">如果在Gradle项目中使用包前缀，请在<span class="filepath">build.gradle</span>文件中指定它们。这样，当您重新导入项目时，所有内容都会保存。</p>        <p id="16008e4b">有关更多信息，请参见<a href="https://github.com/JetBrains/gradle-idea-ext-plugin" rel="noopener noreferrer" data-external="true" target="_blank">https://github.com/JetBrains/gradle-idea-ext-plugin</a> 。</p>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="f563ff61"><p>打开<span class="filepath">build.gradle</span>文件。</p></li><li class="list__item" id="92bb7ec3"><p>添加以下插件以支持程序包前缀：</p><div class="code-block" data-lang="groovy">插件{id“ org.jetbrains.gradle.plugin.idea-ext”版本“ 0.5”}</div>            <p></p></li><li class="list__item" id="ad22caf7"><p>添加程序包前缀。例如，您具有以下一组源集：</p><div class="code-block" data-lang="groovy">sourceSets {main.java.srcDirs = [] main.java.srcDirs + =“ src” main.java.srcDirs + =“ src / main / java” main.java.srcDirs + =“ ../other-root/src / main / java“}</div>使用以下代码将包前缀（在我们的示例中为“ org.example”）添加到它们：<div class="code-block" data-lang="groovy">想法{模块{设置{packagePrefix [“ src”] =“ org.example” packagePrefix [“ src / main / java”] =“ org.example” packagePrefix [“ ../ other-root / src / main / java” ] =“ org.example”}}}</div>            <p></p></li><li class="list__item" id="49e4f218"><p>重新导入您的更改或使用<a href="#auto-import">自动导入</a> 。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="project_encodings" data-toc="Work_with_Gradle_projects#project_encodings">在build.gradle文件中指定特定于IDE的设置</h2>        <p id="8715f78c">使用<a href="https://github.com/JetBrains/gradle-idea-ext-plugin" rel="noopener noreferrer" data-external="true" target="_blank">gradle-idea-ext</a>插件，您可以描述项目设置，例如项目编码，以及<span class="filepath">build.gradle</span>文件中属性文件的编码。</p>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="33b04b4c"><p>打开<span class="filepath">build.gradle</span>文件。</p></li><li class="list__item" id="54a87368"><p>添加以下插件以支持编码配置：</p><div class="code-block" data-lang="groovy">插件{id“ org.jetbrains.gradle.plugin.idea-ext”版本“ 0.5”}</div>            <p></p></li><li class="list__item" id="a90d6009">用以下代码描述项目编码：<div class="code-block" data-lang="groovy">导入org.jetbrains.gradle.ext。EncodingConfiguration。BomPolicy的想法{项目{设置{编码{编码='windows-1251'bomPolicy = BomPolicy。WITH_NO_BOM属性{encoding =' <system default>'transparentNativeToAsciiConversion = false} mapping ['../ sample-gradle-free / module'] ='windows-1251'mapping ['module'] ='windows-1251'mapping ['module2 / src / main / java'] ='windows-1251'}}}}</system></div>                <aside class="prompt" rel="460935a1" id="cf4dcb43" data-type="note" data-title="">                    <p id="68825818"><system default>是一个字符串常量，指示将使用系统默认的编码设置。</system></p>                </aside>            </li><li class="list__item" id="a839e31e"><p>重新导入您的更改或使用<a href="#auto-import">自动导入</a> 。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="buildSrc" data-toc="Work_with_Gradle_projects#buildSrc">使用buildSrc</h2>        <p id="ea7b87c9">如果您有一个包含多个Java，Groovy或Kotlin类的大型Gradle脚本，则可以将此类移至<a href="https://docs.gradle.org/current/userguide/organizing_build_logic.html#sec:build_sources" rel="noopener noreferrer" data-external="true" target="_blank">buildSrc</a>目录中，并从您的主要Gradle脚本中引用它们。在这种情况下，请确保<span class="filepath">build.gradle</span>文件的可读性。</p>                <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="7912db8e"><p>如果您没有现有的<code class="code">buildSrc</code> ，将其作为Gradle <a href="gradle.html#gradle_add_module">模块</a>添加到您的主项目中。</p><figure><img alt="项目工具窗口：buildSrc模块" title="项目工具窗口：buildSrc模块" src="/help/img/idea/2019.3/gradle_buildSrc_dir.png" id="fa0dfc4b" width="267" height="414"></figure>            <p></p></li><li class="list__item" id="b8868655"><p>在编辑器中打开您的主要<span class="filepath">build.gradle</span>文件，然后将所需的类移至<i id="60a8b05e">buildSrc</i>目录的<i id="ef1d62e7">main</i>子目录中。</p><figure><img alt="项目工具窗口：buildSrc" title="项目工具窗口：buildSrc" src="/help/img/idea/2019.3/buildSrc_example.png" id="562852bd" width="600" height="326"></figure>            <p></p></li><li class="list__item" id="7b19d47c"><p>从项目的<span class="filepath">build.gradle</span>文件运行任务。</p><figure><img alt="gradle主构建文件" title="gradle主构建文件" src="/help/img/idea/2019.3/gradle_main_build_file.png" id="9d136a95" width="339" height="203"></figure>            <p></p></li></ol></section><aside class="prompt" rel="use_buildSrc" id="814868cf" data-type="tip" data-title="">                <p id="a31385f0">您可以使用<i id="0a04f55a">重命名</i> <kbd data-primary_default_for_windows="Shift+F6" data-primary_eclipse="Shift+Alt+R" data-primary_emacs="Shift+F6" data-primary_netbeans="Ctrl+R" data-primary_sublime_text="Shift+F6" data-primary_visual_studio="Shift+F6" data-secondary_macos="⇧F6" data-secondary_eclipse="⌥⇧R" data-secondary_eclipse_macos="⇧F6" data-secondary_emacs="⇧F6" data-secondary_intellij_idea_classic="⇧F6" data-secondary_netbeans="⌃R" data-secondary_sublime_text="⇧F6" data-secondary_sublime_text_macos="⇧F6" data-secondary_visual_studio="⇧F6">Shift+F6</kbd>如果需要更改在Gradle脚本中引用的类的名称，则进行重构。IntelliJ IDEA将更改应用于所有引用。</p>            </aside>    </div>    <div class="chapter"><h2 id="delegate_build_gradle" data-toc="Work_with_Gradle_projects#delegate_build_gradle">配置构建和运行操作</h2>        <p id="1b706428">默认情况下，IntelliJ IDEA使用Gradle构建和运行项目。</p>        <p id="gradle_compiler">当您构建项目（ <span class="menupath" data-skip-index="skip">Build | Build Project</span> ）时，IntelliJ IDEA使用Gradle调用相应的任务。Gradle还从“ <span class="menupath" data-skip-index="skip">运行”</span>菜单执行“ <span class="control">运行”</span>和“ <span class="control">调试”</span>操作。在调试过程中，还会触发<a href="debugger-hotswap.html">HotSwap，</a>并重新加载类。</p>        <p id="f48b8fb0">如果您有链接的项目，则可以配置如何构建每个链接的项目。</p>        <section class="procedure-steps"><aside class="prompt" rel="build_linked_project" id="fe520707" data-type="note" data-title="">                <p id="c79d0eb5">如果使用<a href="https://github.com/tbroyer/gradle-apt-plugin/blob/v0.21/README.md#do-without-netltgtapt-idea" rel="noopener noreferrer" data-external="true" target="_blank">annotationProcessors</a>在你的项目中，我们建议您委托运行和构建行动摇篮，所以<a href="compiler-annotation-processors.html#gradle_annotations">注释处理器</a>将在项目中正确启用。</p>            </aside><ol class="list _decimal"><li class="list__item" id="4d8dd9e0"><p>                <a name="open_settings"></a>在里面<a name="settings_dialog"></a> <span class="control">设置/首选项</span>对话框<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-secondary_macos="⌘," data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_emacs="⌃⌥S" data-secondary_intellij_idea_classic="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘," data-secondary_visual_studio="⌥F7">Ctrl+Alt+S</kbd> ，转到“ <span class="menupath" data-skip-index="skip">构建，执行，部署” |摇篮</span> 。</p></li><li class="list__item" id="f54a6c44"><p>在“ <span class="control">Gradle</span>设置”页面上的“ <span class="control">Gradle项目”</span>部分中，选择所需的Gradle项目。</p></li><li class="list__item" id="d4bbf841"><p>在“ <a href="gradle-settings.html#build_run_options">生成并运行使用”</a>列表中，选择适当的选项，然后单击“ <span class="control">确定”</span>保存更改。</p></li></ol></section>        <p id="b17bc90c">如果要使用IntelliJ IDEA构建Gradle项目，则需要明确指定。</p>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="delegate_build_actions">将构建委托给IntelliJ IDEA</h3></div><div class="collapse__content"><p id="08a31f81">使用IntelliJ IDEA构建纯Java或Kotlin项目可能会有所帮助。由于IntelliJ IDEA支持增量构建，因此可以加快构建过程。但是，请记住，IntelliJ IDEA编译器不支持Gradle项目构建处理的某些部分，并且可能在正确构建项目时引起问题。</p><ol class="list _decimal"><li class="list__item" id="1cc46b6f"><p>请点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.settings@2x.png" width="16" alt="摇篮设置">在<span class="control">Gradle</span>工具窗口中。或者，从主菜单中选择<span class="menupath" data-skip-index="skip">File | File。设置/首选项|构建，执行，部署|构建工具| Gradle</span> 。</p></li><li class="list__item" id="2e92cf74"><p>在<span class="control">Gradle</span>页面上，从<span class="control">Build and run using</span>列表中选择<span class="control">Intellij IDEA</span> 。</p><figure><img alt="Gradle设置" title="Gradle设置" src="/help/img/idea/2019.3/gradle_delegate_ide_run_to_gradle.png" id="6dc7c2f7" width="1684" height="1246"></figure>请注意，“ <span class="control">运行测试使用方式”</span>选项保持活动状态，并且即使将所有构建和运行操作都委派给了IntelliJ IDEA，也可以选择运行测试的方式。<p></p></li><li class="list__item" id="fa30c895"><p>单击<span class="control">确定</span> 。</p></li></ol><p id="4d9b0bfd">现在，如果您构建Gradle项目，它将使用IntelliJ IDEA构建。</p></div></div></section>            </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="gradle.html">Gradle</a> <a class="navigation-links__next" href="work-with-gradle-tasks.html">Gradle任务</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>