<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>分析Java Stream操作-帮助|帮助IntelliJ IDEA</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Analyze_Java_Stream_operations" data-breadcrumbs="Building, running, testing and deploying applications/Debugging_Code.xml|Debugging/Analyze_Java_Stream_operations.xml|Analyze Java Stream operations" data-main-title="Analyze Java Stream operations"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索IntelliJ IDEA帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows默认</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_macos" data-group="secondary">苹果系统</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_macos" data-group="secondary">Eclipse（macOS）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_intellij_idea_classic" data-group="secondary">IntelliJ IDEA经典版</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_sublime_text" data-group="secondary">崇高文字</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Analyze_Java_Stream_operations.xml" data-toc="Analyze_Java_Stream_operations">分析Java Stream操作</h1>    <p id="db2f61a4">Java 8 Streams有时可能难以调试。发生这种情况是因为它们要求您插入其他断点并彻底分析流中的每个转换。IntelliJ IDEA通过让您可视化Java Stream操作中发生的事情来提供对此的解决方案。</p>    <aside class="prompt" rel="db2f61a4" id="8ea026b2" data-type="note" data-title=""><p>此功能仅适用于项目文件。Java Stream调试器不适用于库或反编译的代码。</p></aside>    <p id="b1881723">让我们以函数式风格编写一个简单的程序，以演示该功能的工作原理。</p>    <div class="code-block" data-lang="java">公共类PrimeFinder {公共静态void main（String [] args）{IntStream.iterate（1，n-> n + 1）.skip（Integer.parseInt（args [0]））.limit（Integer.parseInt（args [ 1]））.filter（PrimeTest :: isPrime）.forEach（System.out :: println）; }}</div>    <p id="a932f044">顾名思义， <code class="code">PrimeFinder</code>应用会找到素数。它以开头的数字作为第一个参数，将要检查的候选数作为第二个参数。检查逻辑由Java Stream处理。</p>    <p id="582e0fdc">现在，如果我们看一下程序输出，就会看到额外的数字。</p>    <div class="code-block" data-lang="bash">79 83 89 91 97</div>    <p id="f1b8e685">尽管功能风格可能很简洁，但调试起来并不总是那么容易。要了解这些不正确的数字来自何处，请使用流调试器功能。</p>    <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="3d9f088f">            <p id="ab975198">将程序挂在使用流的行上。您可以为此使用任何流操作，包括终端操作。</p>            <figure><img alt="程序在创建Stream时设置的断点处挂起" title="程序在创建Stream时设置的断点处挂起" src="/help/img/idea/2019.3/debug_analyze_streams_1.png" id="70486765" width="706" height="326"></figure>        </li><li class="list__item" id="e92a8e9b">            <p id="0e684660">单击<span class="control">跟踪当前流链</span>按钮<img class="inline-icon-16" src="/help/img/idea/2019.3/stream-debugger.icons.stream_debugger@2x.png" width="16" alt="跟踪当前流链按钮"> 。</p>        </li><li class="list__item" id="c9136293">            <p id="df55705f">使用“ <span class="control">流跟踪”</span>对话框分析流内部的操作。顶部的选项卡使您可以在特定操作之间切换，并查看每个操作如何转换值。</p>            <figure><img alt="“流跟踪”对话框" title="“流跟踪”对话框" src="/help/img/idea/2019.3/debug_analyze_streams_2.png" id="a5db3162" width="706" height="694"></figure>            <p id="98c433d3">如果要鸟瞰整个溪流，请点击<span class="control">Flat Mode</span> 。</p>            <aside class="prompt" rel="98c433d3" id="2e96ff16" data-type="tip" data-title="">                <p id="2c10c4c3">没有返回值的终端操作，例如<code class="code">forEach</code>在<span class="control">平板模式</span>中不显示。</p>            </aside>        </li></ol></section>    <p id="c125d36f">对流的检查为我们提供了问题原因的线索。我们将方法引用传递给<code class="code">filter</code>它返回了一个额外的值。现在，错误的搜索范围缩小到<code class="code">Predicate</code>的<code class="code">filter</code>操作，即<code class="code">PrimeTest.isPrime()</code>方法。</p>    <p id="d6b621be">请注意，流跟踪不会超出流的终端操作。这意味着如果有进一步的链接，例如<code class="code">Optional</code> ，则在“ <span class="control">流跟踪”</span>对话框中将看不到它。</p><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="analyze-objects-in-the-jvm-heap.html">分析JVM堆中的对象</a> <a class="navigation-links__next" href="debug-asynchronous-code.html">调试异步代码</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>