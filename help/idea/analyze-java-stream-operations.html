<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Analyze Java Stream operations - Help | IntelliJ IDEA</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Analyze_Java_Stream_operations" data-breadcrumbs="Building, running, testing and deploying applications/Debugging_Code.xml|Debugging/Analyze_Java_Stream_operations.xml|Analyze Java Stream operations" data-main-title="Analyze Java Stream operations"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search IntelliJ IDEA Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.3 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default_for_windows" selected>Default for Windows</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_sublime_text">Sublime Text</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_macos">macOS</option><option data-group="secondary" value="secondary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_eclipse_macos">Eclipse (macOS)</option><option data-group="secondary" value="secondary_emacs">Emacs</option><option data-group="secondary" value="secondary_intellij_idea_classic">IntelliJ IDEA Classic</option><option data-group="secondary" value="secondary_netbeans">NetBeans</option><option data-group="secondary" value="secondary_sublime_text">Sublime Text</option><option data-group="secondary" value="secondary_sublime_text_macos">Sublime Text (macOS)</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Analyze_Java_Stream_operations" id="Analyze_Java_Stream_operations.xml">Analyze Java Stream operations</h1>    <p id="db2f61a4">        Java 8 Streams may sometimes be difficult to debug. This happens because they require you to insert additional        breakpoints and thoroughly analyze each transformation inside the stream.        IntelliJ IDEA provides a solution to this by letting you visualize what is going on in Java Stream operations.    </p>    <aside data-type="note" class="prompt" data-title="" rel="db2f61a4" id="8ea026b2"><p>        This feature is only available for project files. Java Stream debugger doesn't work with libraries or        decompiled code.    </p></aside>    <p id="b1881723">        Let's take a simple program written in functional style to demonstrate how the feature works.    </p>    <div class="code-block" data-lang="java">
        public class PrimeFinder {
            public static void main(String[] args) {
                IntStream.iterate(1, n -&gt; n + 1)
                    .skip(Integer.parseInt(args[0]))
                    .limit(Integer.parseInt(args[1]))
                    .filter(PrimeTest::isPrime)
                    .forEach(System.out::println);
            }
        }
    </div>    <p id="a932f044">        As its name suggests, the <code class="code">PrimeFinder</code> app finds prime numbers. It takes the number to start with        as the first argument, and the number of candidates to check as the second argument. The checking logic        is handled by a Java Stream.    </p>    <p id="582e0fdc">Now if we look at the program output, we see extra numbers there.</p>    <div class="code-block" data-lang="bash">
        79
        83
        89
        91
        97
    </div>    <p id="f1b8e685">        Concise as the functional style may be, it is not always easy to debug.        To understand where these incorrect numbers are coming from, use the stream debugger feature.    </p>    <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="3d9f088f">            <p id="ab975198">                Suspend the program at a line where the stream is used. You can use any stream operation for this                including terminal ones.            </p>            <figure><img alt="The program is suspended at the breakpoint that is             set on the creation of the Stream" title="The program is suspended at the breakpoint that is             set on the creation of the Stream" src="/help/img/idea/2019.3/debug_analyze_streams_1.png" id="70486765" width="706" height="326"></figure>        </li><li class="list__item" id="e92a8e9b">            <p id="0e684660">                Click the <span class="control">Trace Current Stream Chain</span> button                <img class="inline-icon-16" src="/help/img/idea/2019.3/stream-debugger.icons.stream_debugger@2x.png" width="16" alt="Trace Current Stream Chain button">.            </p>        </li><li class="list__item" id="c9136293">            <p id="df55705f">                Use the <span class="control">Stream Trace</span> dialog to analyze the operations inside the stream.                The tabs in the top part let you                switch between particular operations and see how the values are transformed with each operation.            </p>            <figure><img alt="The Stream Trace dialog" title="The Stream Trace dialog" src="/help/img/idea/2019.3/debug_analyze_streams_2.png" id="a5db3162" width="706" height="694"></figure>            <p id="98c433d3">                If you want to get a bird's eye view of the entire stream, click <span class="control">Flat Mode</span>.            </p>            <aside data-type="tip" class="prompt" data-title="" rel="98c433d3" id="2e96ff16">                <p id="2c10c4c3">                    Terminal operations without a return value like <code class="code">forEach</code> are not displayed                    in the <span class="control">Flat Mode</span>.                </p>            </aside>        </li></ol></section>    <p id="c125d36f">        The examination of the stream gave us a clue about the cause of the problem. We passed a method reference to        <code class="code">filter</code> and it returned an extra value. The search of a bug is now narrowed down to the        <code class="code">Predicate</code> of the <code class="code">filter</code> operation, that is the        <code class="code">PrimeTest.isPrime()</code> method.    </p>    <p id="d6b621be">        Note that stream trace does not reach beyond the terminal operation of a stream. This means that if there is        further chaining, for example with <code class="code">Optional</code>, it will not be visible from the        <span class="control">Stream Trace</span> dialog.    </p><div class="last-modified" data-skip-index="skip">Last modified: 29 November 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="analyze-objects-in-the-jvm-heap.html">Analyze objects in the JVM heap</a><a class="navigation-links__next" href="debug-asynchronous-code.html">Debug asynchronous code</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>