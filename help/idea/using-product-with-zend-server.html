<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>将IntelliJ IDEA与Zend Server一起使用-帮助|帮助IntelliJ IDEA</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Debugging_with_Zend_Debugger" data-breadcrumbs="Language and framework-specific guidelines/PHP-Specific_Guidelines.xml|PHP/Debugging_PHP_Applications.xml|Debugging PHP Applications/PHP_Debugging_Session.xml|PHP Debugging Session/Using_product_with_zend_server.xml|Using IntelliJ IDEA with Zend Server" data-main-title="Using IntelliJ IDEA with Zend Server" data-article-props="
                {
                
            " seeals=":[=" titl=":=" procedure=",=" link=":=" ur=":" debugging-code.htm="," tex=":" debuggin="}=" referenc=",=" debug-tool-window.htm="," debug="" tool="" windo="}=" debug.htm="," debu="}=" run-debug-configuration-php-web-application.htm="," run="" configuration:="" php="" web="" pag="}=" resource=",=" http:="" ="" www.jetbrains.net="" devnet="" community="" idea="" k="," developer="" communit="}="><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索IntelliJ IDEA帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_macos" data-group="secondary">苹果系统</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_macos" data-group="secondary">Eclipse（macOS）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_intellij_idea_classic" data-group="secondary">IntelliJ IDEA经典版</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_sublime_text" data-group="secondary">崇高文字</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Using_product_with_zend_server.xml" data-toc="Debugging_with_Zend_Debugger" data-availability-limit="Ultimate">将IntelliJ IDEA与Zend Server一起使用</h1>            <a name="warning_if_plugin_installed_row"></a>                 <aside class="prompt" rel="Using_product_with_zend_server.xml" id="f439b5f1" data-type="warning" data-title=""><p>仅当安装并启用<span class="control">PHP</span>插件时，以下内容才有效。</p></aside>           <p id="supported-version">        <a href="http://www.zend.com/en/products/zend_server" rel="noopener noreferrer" data-external="true" target="_blank">Zend Server</a>与IntelliJ IDEA无缝集成，提供用于调试和配置Web应用程序的高级功能。</p><aside class="prompt" rel="supported-version" id="dcc3ad69" data-type="note" data-title="">        <p id="2836ec5f">IntelliJ IDEA版本8和更高版本支持Zend Server和Z-Ray。</p>    </aside>    <p id="e55acda7">Zend Server是用于移动和Web应用程序的集成平台，可在应用程序生命周期的所有阶段提供帮助。Zend Server包含Z-Ray，可通过实时显示构造每个页面的实际情况，在应用程序内部提供空前的上下文可见性。它可以帮助开发人员编写更好的代码，及早发现并修复问题，并与操作人员协作以更快地解决生产问题。</p>    <p id="bed7c0eb">在本教程中，我们将研究如何配置集成并进行调试，配置文件或部署代码，以及将许多内置工具与IntelliJ IDEA一起使用，而Zend Server则负责您的PHP环境。</p>    <p id="59a5fbd3">以下视频将引导您开始使用Zend Server：</p>    <div class="video-player"><object width="850" height="480" type="application/x-shockwave-flash" data="//www.youtube.com/v/7gJl6W9bYmw?color2=FBE9EC&rel=0&hd=1&autoplay=0&version=3&modestbranding=1&fs=1"><param name="movie" value="//www.youtube.com/v/7gJl6W9bYmw?color2=FBE9EC&rel=0&hd=1&autoplay=1&version=3&modestbranding=1&fs=1"><param name="allowFullScreen" value="true"><param name="msallowFullScreen" value="true"><param name="webkitallowFullScreen" value="true"><param name="mozallowFullScreen" value="true"><param name="oallowFullScreen" value="true"><param name="allowscriptaccess" value="always"></object></div>    <p id="21a8f053">要了解有关Zend Server配置和使用的更多信息，请参阅《 <a href="http://files.zend.com/help/Zend-Server/content/home.htm" rel="noopener noreferrer" data-external="true" target="_blank">Zend Server文档》</a> 。</p>        <div class="chapter"><h2 id="getting-started">入门</h2>        <p id="16a8f4a4">有两种主要的安装Zend Server的方法：在本地安装，通过从<a href="http://www.zend.com/en/downloads" rel="noopener noreferrer" data-external="true" target="_blank">Zend的网站</a>下载应用程序，或<a href="http://www.zend.com/en/solutions/cloud-solutions" rel="noopener noreferrer" data-external="true" target="_blank">在云中运行它</a> （例如，在特殊的Amazon Web Services实例中）。</p>        <div class="chapter"><h3 id="installing-zend-server-local-remote">在本地（或在远程服务器上）安装Zend Server</h3>            <p id="install">注册一个Zend帐户，然后从<a href="http://www.zend.com/en/downloads" rel="noopener noreferrer" data-external="true" target="_blank">Zend的网站上</a>下载适用于您的操作系统的Zend Server应用程序。可用的版本因PHP解释器版本而异。</p><aside class="prompt" rel="install" id="13ada0aa" data-type="note" data-title="">                <p id="9946b938">有关更多详细信息，请参阅《 Zend Server <a href="http://files.zend.com/help/Zend-Server/content/installation_guide.htm" rel="noopener noreferrer" data-external="true" target="_blank">安装指南》</a> 。</p>            </aside>            <p id="b27d6985">请遵循安装向导的步骤并完成安装。</p>                    </div>        <div class="chapter"><h3 id="using-zend-server-in-the-cloud">在云端（AWS）中使用Zend Server</h3>            <p id="79fa3d79">AWS市场中还提供了不同版本的Zend Server。借助在Amazon Web Services上运行的Zend Server，您可以在云中运行高性能，灵活，可靠的基于PHP的Web和移动应用程序。</p>            <p id="3fd70b86">Zend Server软件提供30天的试用期，但确实适用于该实例的AWS费用。如果您以前从未使用过AWS，则可以通过AWS Free Tier计划免费获得全年EC2的使用资格（仅适用于新的云用户）。</p>            <figure><img alt="Zend AWS概述" title="Zend AWS概述" src="/help/img/idea/2019.3/ps_zend_aws_overview.png" id="415e90b3" width="800" height="1240"></figure>            <p id="cb157e1f">系统将为您提供选择实例参数的信息（例如，VM的配置，区域，安全设置），并生成一个新的密钥对来访问该实例。查看所有设置并继续进行AWS实例配置。</p>            <p id="0f2190b4">该过程完成后，转到AWS控制台以管理安装了Zend Server的新创建的实例。</p>            <figure><img alt="Zend AWS运行" title="Zend AWS运行" src="/help/img/idea/2019.3/ps_zend_aws_running.png" id="b1987d3d" width="800" height="1232"></figure>            <p id="981e311f">有关更多详细信息，请观看有关AWS上的Zend Server入门的<a href="https://www.youtube.com/watch?v=S3oxtggJG_g" rel="noopener noreferrer" data-external="true" target="_blank">视频教程</a> ，或查看<a href="http://files.zend.com/help/Zend-Server/content/aws_setting_up_zend_server.htm" rel="noopener noreferrer" data-external="true" target="_blank">安装指南。</a>            </p>        </div>        <div class="chapter"><h3 id="launching-zend-server">启动Zend Server</h3>                        <p id="7b9bf077">Zend Server安装并运行后，请通过<span class="filepath">http：// localhost：10081 / ZendServer</span>或<span class="filepath">https：// localhost：10082 / ZendServer</span>链接打开它（将<span class="filepath">localhost</span>替换为您使用的主机名）。如果您使用的是AWS实例，则该地址将类似于<span class="filepath">http://ec2-54-195-230-127.eu-west-1.compute.amazonaws.com:10081/</span> ）。</p>            <p id="bc654390">在下一步中，将提供您阅读并接受许可协议，并配置一些初始参数：</p>            <ul class="list _ul"><li class="list__item" id="2bf0c67c"><p>配置文件（开发/生产-单服务器/生产-创建或加入集群）-开发配置文件适合大多数开发环境</p></li><li class="list__item" id="f972ee09"><p>集群配置（如果在上一步中选择了集群）</p></li><li class="list__item" id="a27815a9"><p>密码</p></li><li class="list__item" id="71363b03"><p>要部署的标准库软件包</p></li></ul>            <p id="aaf04aef">配置完成并成功登录后，将显示“ Zend Server指南页”：</p>            <figure><img alt="Zend起始页" title="Zend起始页" src="/help/img/idea/2019.3/ps_zend_start_page.png" id="44376720" width="800" height="1372"></figure>            <p id="174bf056">出于教育目的，我们将从Zend Server指南页面中部署演示应用程序。要了解如何准备和将自己的应用程序部署到Zend Server，请参阅<a href="#deployment-to-zend-server">使用ZPK包部署到Zend Server</a> 。演示应用程序是Zend Framework 2框架应用程序，它包含自定义的监视和缓存规则，事件，重复作业和统计数据。</p>            <p id="e609dd5b">我们将在下面使用Zend Server的本地版本，但是所有操作和工作流程也都适用于远程AWS或独立安装（在适用的地方提供了附加的配置说明）。</p>        </div><aside class="prompt" rel="launching-zend-server" id="30af6348" data-type="tip" data-title="">                <p id="0d9325d5">观看<a href="http://files.zend.com/help/Zend-Server/content/getting_started.htm" rel="noopener noreferrer" data-external="true" target="_blank">入门</a>视频系列以了解更多信息。</p>            </aside>        <section class="procedure-steps"><h3 id="a553dd5e">部署演示应用程序</h3><ol class="list _decimal"><li class="list__item" id="bc3057bf">                <p id="7801db7f">单击“ Zend服务器指南”页面上的“ <span class="control">示例应用程序”</span>按钮。</p>                <figure><img alt="下载Zend演示应用" title="下载Zend演示应用" src="/help/img/idea/2019.3/ps_zend_demo_app_step_0_download.png" id="79cc8242" width="815" height="1002"></figure>            </li><li class="list__item" id="6e590047">                <p id="bc905e1a">输入应用程序名称，路径和虚拟主机。</p>                <figure><img alt="输入Zend演示应用程序详细信息" title="输入Zend演示应用程序详细信息" src="/help/img/idea/2019.3/ps_zend_demo_app_step_1_details.png" id="b9792469" width="815" height="1002"></figure>            </li><li class="list__item" id="f6be1463">                <p id="40a04700">检查应用程序先决条件是否已通过验证。</p>                <figure><img alt="Zend演示应用验证" title="Zend演示应用验证" src="/help/img/idea/2019.3/ps_zend_demo_app_step_2_validation.png" id="e39d5c6e" width="815" height="1002"></figure>            </li><li class="list__item" id="91a59c55">                <p id="46ff5b45">查看部署摘要，然后单击“ <span class="control">部署”</span>以继续进行部署。</p>                <figure><img alt="Zend演示应用程序：评论摘要" title="Zend演示应用程序：评论摘要" src="/help/img/idea/2019.3/ps_zend_demo_app_step_3_summary.png" id="d99cde6f" width="815" height="1002"></figure>                <p id="6e7f64bf">部署过程完成后，将带您到Zend Server的应用程序列表：</p>                <figure><img alt="Zend应用列表" title="Zend应用列表" src="/help/img/idea/2019.3/ps_zend_apps_list.png" id="6f39e8ec" width="800" height="1280"></figure>                <p id="9062eb7d">在这里，您可以轻松检查有关已部署应用程序的信息，检查状态，继续监视以及执行其他操作。</p>            </li></ol></section>        <p id="6bff3b75">我们建议您在继续下一步之前先熟悉一下Zend Server。《 <a href="http://files.zend.com/help/Zend-Server/content/getting_started.htm" rel="noopener noreferrer" data-external="true" target="_blank">Zend Server入门指南》</a>提供了一个很好的起点。</p>    </div>    <div class="chapter"><h2 id="debugging-z-ray">使用Z-Ray和IntelliJ IDEA进行调试</h2>        <p id="ecf556b8">            <a href="http://www.zend.com/en/products/server/z-ray" rel="noopener noreferrer" data-external="true" target="_blank">Z-Ray</a>是一个浏览器工具窗口，在构建页面所涉及的所有PHP脚本中，显示页面请求的所有详细信息。Z-Ray被注入到来自PHP应用程序的响应中，并直接显示在您用于开发的浏览器中，因此您无需更改开发工作流程即可获得更深入的了解。</p>        <figure><img alt="Zray概述" title="Zray概述" src="/help/img/idea/2019.3/ps_zend_zray_overview.png" id="23c0bb35" width="800" height="1280"></figure>        <div class="chapter"><h3 id="ssh-tunnel-configuration-for-remote-debugging">SSH隧道配置用于远程调试</h3>            <p id="set-up-ssh">如果您使用的是AWS或Zend Server的任何其他独立远程安装，则需要进行一些配置以防止防火墙阻止调试器通信。</p><aside class="prompt" rel="set-up-ssh" id="2a9cf1c5" data-type="note" data-title="">                <p id="d89cbf73">有关设置ssh的更多详细信息，请参阅<a href="https://docs.aws.amazon.com/quickstarts/latest/vmlaunch/step-2-connect-to-instance.html" rel="noopener noreferrer" data-external="true" target="_blank">官方指南</a> 。</p>            </aside>            <p id="4a6a2345">要运行远程会话，请为调试端口设置SSH隧道（默认为<span class="filepath">10137</span> ）。如果您正在运行Linux或macOS，请在运行IntelliJ IDEA的本地终端上运行以下命令：</p>                        <div class="code-block" data-lang="none">ssh -R 10137：localhost：10137 remote-host.compute.amazonaws.com -i ZS.pem -l ubuntu</div>                        <p id="a486db63">如果您正在运行Windows，请执行以下操作：</p>            <ul class="list _ul"><li class="list__item" id="3e078817"><p>下载<a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" rel="noopener noreferrer" data-external="true" target="_blank">腻子</a></p></li><li class="list__item" id="ed8056e7"><p>通过运行<span class="filepath">puttygen.exe，</span>加载<span class="filepath">PEM</span>文件，并保存私钥的腻子的密钥格式转换<span class="filepath">PEM</span>文件到文件<span class="filepath">PPK</span></p></li><li class="list__item" id="5346015a"><p>运行以下命令来设置隧道：</p></li></ul>            <div class="code-block" data-lang="none">腻子-R 10137：localhost：10137 remote-host.compute.amazonaws.com -i ZS.ppk -l ubuntu</div>其中： <span class="filepath">10137</span>是调试端口（可以在IntelliJ IDEA和Zend Server中更改，请参阅“其他配置”部分） <code class="code">remote-host.compute.amazonaws.com</code>是安装Zend Server的远程主机名<code class="code">ZS.pem</code>是授权密钥（由AWS或其他机构生成的证书，请参阅本文以了解详细信息） <code class="code">ubuntu</code>是远程主机上的用户名，这取决于您的本地特权，您可能需要从超级用户（使用<code class="code">sudo</code> 。<p id="183a42e5">每次启动调试/性能分析会话之前，都应建立SSH隧道。在以下情况下不需要它：</p>            <ul class="list _ul"><li class="list__item" id="522330e9"><p>如果Zend Server和IntelliJ IDEA在同一台计算机上运行。</p></li><li class="list__item" id="8aa4054f"><p>如果Zend Server和IntelliJ IDEA之间存在直接链接，并且未配置防火墙。</p></li></ul>                    </div>        <section class="procedure-steps"><h3 id="edce076a">调试您的Zend应用程序</h3><ol class="list _decimal"><li class="list__item" id="7314c994"><p>                <a name="enable_listening_debug_connections"></a>在IntelliJ IDEA中，通过单击以下任一方法来侦听传入的调试连接<img class="inline-icon-16" src="/help/img/idea/2019.3/php.icons.debug_listen_off@2x.png" width="16" alt="“开始侦听PHP调试连接”按钮">在工具栏上，或选择<span class="menupath" data-skip-index="skip">运行|</span>在主菜单中<span class="menupath" data-skip-index="skip">开始侦听PHP调试连接</span> 。这将确保IntelliJ IDEA在启动调试会话时作出反应，并自动打开“ <a href="debug-tool-window.html">调试工具”窗口</a> 。启动脚本之前，请确保在<span class="control">“设置/首选项”</span>对话框的<span class="control">“</span> <a href="debug.html">调试”</a>页面上<span class="control">设置</span>了<a href="using-breakpoints.html">断点</a>或启用了“ <span class="control">PHP脚本中的第一行中断</span> <span class="control">”选项。</span> <kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-secondary_macos="⌘," data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_emacs="⌃⌥S" data-secondary_intellij_idea_classic="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘," data-secondary_visual_studio="⌥F7">Ctrl+Alt+S</kbd> 。</p></li><li class="list__item" id="25afd826"><p>                通过单击要中断的行附近的编辑器装订线，在代码中<a href="using-breakpoints.html#set-line-breakpoint">设置断点</a> 。</p></li><li class="list__item" id="29a428ae">                <p id="55ac07a5">打开启用了Z-Ray栏的Zend Server上运行的应用程序，单击“ <span class="control">调试”</span>图标<img alt="调试图标" title="调试图标" src="/help/img/idea/2019.3/ps_zend_debug_icon.png" id="6fe1001b" width="16" height="32" class="inline-icon-16"> ，然后选择<span class="control">调试当前页面</span> 。</p>                <figure><img alt="调试当前页面" title="调试当前页面" src="/help/img/idea/2019.3/ps_zend_debug_current_page.png" id="f9bb2a28" width="151" height="370"></figure>            </li><li class="list__item" id="768c2a64">                <p id="bab78a70">在IntelliJ IDEA中接受来自Zend Debugger的传入连接。</p>                <figure><img alt="接受传入连接" title="接受传入连接" src="/help/img/idea/2019.3/ps_zend_accept_incoming_connection.png" id="59c75231" width="650" height="900"></figure>                <p id="6e77e29e">IntelliJ IDEA将在断点（如果启用了该选项，则在第一行）处中断，为您提供在IDE中调试应用程序的工作流。</p>                <figure><img alt="Zend调试器断点" title="Zend调试器断点" src="/help/img/idea/2019.3/ps_zend_debugger_stopped_breakpoint.png" id="9d3dae38" width="775" height="1078"></figure>            </li></ol></section>    </div>    <div class="chapter"><h2 id="profiling-z-ray">使用Z-Ray和IntelliJ IDEA进行性能分析</h2>        <p id="e6411668">所有说明和<a href="#debugging-z-ray">远程调试的</a>其他配置也都适用于此。</p>        <section class="procedure-steps"><h3 id="1498e29a">分析您的Zend应用程序</h3><ol class="list _decimal"><li class="list__item" id="0c4826d7"><p>                <a name="enable_listening_debug_connections"></a>在IntelliJ IDEA中，通过单击以下任一方法来侦听传入的调试连接<img class="inline-icon-16" src="/help/img/idea/2019.3/php.icons.debug_listen_off@2x.png" width="16" alt="“开始侦听PHP调试连接”按钮">在工具栏上，或选择<span class="menupath" data-skip-index="skip">运行|</span>在主菜单中<span class="menupath" data-skip-index="skip">开始侦听PHP调试连接</span> 。这将确保IntelliJ IDEA在启动调试会话时作出反应，并自动打开“ <a href="debug-tool-window.html">调试工具”窗口</a> 。启动脚本之前，请确保在<span class="control">“设置/首选项”</span>对话框的<span class="control">“</span> <a href="debug.html">调试”</a>页面上<span class="control">设置</span>了<a href="using-breakpoints.html">断点</a>或启用了“ <span class="control">PHP脚本中的第一行中断</span> <span class="control">”选项。</span> <kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-secondary_macos="⌘," data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_emacs="⌃⌥S" data-secondary_intellij_idea_classic="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘," data-secondary_visual_studio="⌥F7">Ctrl+Alt+S</kbd> 。</p></li><li class="list__item" id="d06bd14f">                <p id="7fd95895">打开启用了Z-Ray栏的Zend Server上运行的应用程序，单击“ <span class="control">调试”</span>图标<img alt="调试图标" title="调试图标" src="/help/img/idea/2019.3/ps_zend_debug_icon.png" id="361f8702" width="16" height="32" class="inline-icon-16"> ，然后选择<span class="control">配置文件当前页面</span> 。</p>                <figure><img alt="个人资料当前页面" title="个人资料当前页面" src="/help/img/idea/2019.3/ps_zend_profile_current_page.png" id="541b34bc" width="151" height="370"></figure>                <p id="285bb94b">应用程序配置文件快照将在IntelliJ IDEA中打开。</p>            </li></ol><p id="0ef249e5">确保选择服务器以利用上下文菜单操作，例如跳转到源代码，快速定义，快速文档（有关服务器配置的更多信息，请参见“ <a href="#additional-configuration">其他配置”</a>部分）。您可能需要在“设置” /“首选项” |“设置”中为您的项目设置映射。 PHP |服务器。当服务器处理的文件路径与项目中文件的路径不同时，您需要使用路径映射。为父目录指定的路径映射将自动应用于其所有子目录。如有必要，您可以分别为任何子目录甚至单个文件指定路径映射。</p></section>    </div>    <div class="chapter"><h2 id="debugging-and-profiling-with-zend">使用Zend Server和IntelliJ IDEA从事件列表/单个事件进行调试和分析</h2>        <p id="976e4d8c">Zend Server正在跟踪您的应用程序正在发生的一切。要轻松查看所有问题，请使用<span class="menupath" data-skip-index="skip">Zend Server | Windows Server 2003</span>中可用的监视事件列表<span class="menupath" data-skip-index="skip">。监控|大事记</span> 。</p>        <p id="9ca3ef74">可以从具有相关操作的事件列表（ <span class="control">IDE中的Debug，IDE</span>中的<span class="control">Profile</span>或<span class="control">IDE中的Show</span> ）启动调试/概要分析会话。在从Zend Server端启动调试/性能分析会话之前，请确保IDE正在侦听调试连接（有关详细信息，请参见<a href="#debugging-z-ray">使用Z-Ray</a>进行调试和<a href="#profiling-z-ray">使用Z-Ray</a>进行性能<a href="#profiling-z-ray">分析</a> ）。</p>        <figure><img alt="Zend事件列出动作" title="Zend事件列出动作" src="/help/img/idea/2019.3/ps_zend_events_list_actions.png" id="b4b84bc9" width="1219" height="1203"></figure>    </div>    <div class="chapter"><h2 id="deployment-to-zend-server">使用ZPK包部署到Zend Server</h2>        <p id="5bc5a3c7">IntelliJ IDEA中没有用于Zend Server部署的GUI，但是仍然可以让您准备<span class="filepath">ZPK</span>部署软件包。这可以通过使用终端或通过<a href="php-specific-command-line-tools.html">命令行工具</a>集成来完成。</p>        <p id="ed61a1a2">我们将专注于第二个选项，因为它方便地提供了命令行工具命令和参数的完成选项。</p>        <p id="6d65c32c">准备<span class="filepath">ZPK</span>软件包后，我们将其部署到Zend Server。</p>                <section class="procedure-steps"><h3 id="0a6295e3">为Zend Server部署工具创建命令行工具</h3><ol class="list _decimal"><li class="list__item" id="442c2a61">                <p id="6e882c25"><a name="open_settings"></a>在里面<a name="settings_dialog"></a> <span class="control">设置/首选项</span>对话框<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-secondary_macos="⌘," data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_emacs="⌃⌥S" data-secondary_intellij_idea_classic="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘," data-secondary_visual_studio="⌥F7">Ctrl+Alt+S</kbd> ，转到<span class="menupath" data-skip-index="skip">工具|命令行工具支持</span> 。</p>            </li><li class="list__item" id="a9ffba5e">                <p id="2f29a20c">请点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加按钮"> ，从列表中选择“ <span class="control">自定义工具</span> ”，然后设置工具可见性（ <span class="control">项目</span>或<span class="control">全局</span> ）。</p>                <figure><img alt="创建一个自定义的Zend工具" title="创建一个自定义的Zend工具" src="/help/img/idea/2019.3/ps_zend_creating_custom_tool.png" id="c1d48ba9" width="381" height="294"></figure>            </li><li class="list__item" id="62485fc5">                <p id="ad051b6e">设置工具的路径（在本例中为<span class="filepath">/ usr / local / zend / bin / zdpack</span> ；有关特定于操作系统的路径，请参阅<a href="http://files.zend.com/help/Zend-Server-6/content/preparing_the_package_using_the_deployment_tool.htm" rel="noopener noreferrer" data-external="true" target="_blank">Zend Server文档</a> ）和别名。</p>                <figure><img alt="自定义Zend工具设置" title="自定义Zend工具设置" src="/help/img/idea/2019.3/ps_zend_custom_tool_settings.png" id="5d671e12" width="258" height="256"></figure>            </li><li class="list__item" id="18021d92"><p>应用更改并单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.editSource@2x.png" width="16" alt="编辑源按钮">在编辑器中打开工具定义。</p></li><li class="list__item" id="945dc5c7">                <p id="90249a94">在<a href="php-specific-command-line-tools.html#custom-tools-command-definitions">自定义命令行定义目录中</a>找到<span class="emphasis">Zend Server部署工具（zdpack）</span>存储库的链接，然后将整个XML从该存储库复制到打开的编辑器选项卡。</p>                <figure><img alt="自定义Zend工具定义" title="自定义Zend工具定义" src="/help/img/idea/2019.3/ps_zend_custom_tool_xml_definition.png" id="f9afa5ba" width="712" height="666"></figure>            </li></ol><p id="13e12603">现在，可以通过选择“ <span class="menupath" data-skip-index="skip">工具” |“</span>启动”来启动<span class="control">zdpack</span>命令行<span class="menupath" data-skip-index="skip">工具。</span>在主菜单中<span class="menupath" data-skip-index="skip">运行命令...</span>或按<kbd data-primary_default_for_windows="N/A" data-primary_eclipse="N/A" data-primary_emacs="N/A" data-primary_netbeans="N/A" data-primary_sublime_text="N/A" data-primary_visual_studio="N/A" data-secondary_macos="N/A" data-secondary_eclipse="N/A" data-secondary_eclipse_macos="N/A" data-secondary_emacs="N/A" data-secondary_intellij_idea_classic="N/A" data-secondary_netbeans="N/A" data-secondary_sublime_text="N/A" data-secondary_sublime_text_macos="N/A" data-secondary_visual_studio="N/A">N/A</kbd> 。</p></section>        <section class="procedure-steps"><h3 id="preparing-deployment-package">在IntelliJ IDEA中准备部署包</h3><ol class="list _decimal"><li class="list__item" id="e205030d">                <p id="75e05567">选择一个目录并使用<code class="code">create</code>命令以准备<span class="filepath">ZPK</span>软件包的框架。这包括<span class="filepath">XML</span>描述符文件，数据文件夹和挂钩脚本：</p>                <div class="code-block" data-lang="none">zdpack创建应用程序名称</div>            </li><li class="list__item" id="1827ddb9">                <p id="15bb7b2e">验证是否已在指定目录中创建资源：</p>                <ul class="list _ul"><li class="list__item" id="bccba695"><p>                        <span class="filepath">数据</span>文件夹-将包含您的应用程序文件的文件夹。</p></li><li class="list__item" id="e2e10577"><p>                        <span class="filepath">脚本</span>文件夹-您可以根据需要编辑钩子脚本框架以及现有的监视和缓存规则。</p></li><li class="list__item" id="ae687295"><p>                        <span class="filepath">deployment.xml</span>文件<span class="filepath">-XML</span>描述符的模板，供您根据需要进行编辑。</p></li></ul>            </li><li class="list__item" id="012b060a">                <p id="e04b3746">执行以下操作：</p>                <ul class="list _ul"><li class="list__item" id="ffa010c0"><p>将您的应用程序文件放置在<span class="filepath">数据</span>文件夹中。根据需要编辑挂钩脚本。</p></li><li class="list__item" id="8b317ec9"><p>根据需要编辑<span class="filepath">deployment.xml</span> 。<span class="filepath">XML</span>模板由示例元素组成。必需的元素是<code class="code">name</code> ， <code class="code">version</code>和<code class="code">appdir</code> 。</p></li><li class="list__item" id="df0a60df"><p>通过使用验证包<code class="code">validate</code>命令</p></li></ul>                <div class="code-block" data-lang="none">zdpack验证package-xml-descriptor-file</div>            </li><li class="list__item" id="636c066d">                <p id="f638d716">使用pack命令将内容打包到<span class="filepath">ZPK</span>软件包中。默认情况下，部署工具将在工作目录中创建软件包。</p>                <div class="code-block" data-lang="none">zdpack pack应用程序名称</div>                <p id="a45c8af4">在我们的案例中，要准备测试应用程序以进行部署，我们需要运行以下命令：</p>                <div class="code-block" data-lang="none">zdpack创建drupal8a zdpack验证drupal8a / deployment.xml zdpack包drupal8a</div>                <p id="45c29c1f">结果，在我们项目的根文件夹中生成了<span class="filepath">drupal8a.zpk</span> 。</p>            </li></ol></section><aside class="prompt" rel="preparing-deployment-package" id="5fbe35d7" data-type="note" data-title="">            <p id="6b56c529">有关准备<span class="filepath">ZPK</span>软件包的更多详细信息，请参阅<a href="http://files.zend.com/help/Zend-Server/content/preparing_the_library_package_using_the_deployment_tool.htm" rel="noopener noreferrer" data-external="true" target="_blank">Zend文档</a> 。</p>        </aside>                <section class="procedure-steps"><h3 id="72295031">将程序包部署到Zend Server</h3><ol class="list _decimal"><li class="list__item" id="start-deployment"><p>打开<span class="menupath" data-skip-index="skip">Zend Server |应用领域管理应用程序</span> ，然后单击<span class="control">部署应用程序</span> 。</p></li><li class="list__item" id="f26135c9"><p>从文件系统中选择<span class="filepath">ZPK</span>软件包，然后按照部署步骤进行操作。接受许可协议，验证先决条件，并提供所需的参数。</p></li></ol></section>    </div><aside class="prompt" rel="deployment-to-zend-server" id="bab60942" data-type="note" data-title="">            <p id="fa9d559a">有关<a href="http://files.zend.com/help/Zend-Server/content/understanding_the_application_package_structure.htm" rel="noopener noreferrer" data-external="true" target="_blank">ZPK部署程序包结构</a>和<a href="http://files.zend.com/help/Zend-Server/content/preparing_the_library_package_using_the_deployment_tool.htm" rel="noopener noreferrer" data-external="true" target="_blank">zdpack部署工具的</a>更多详细信息，请参考官方文档。            </p>        </aside>    <div class="chapter"><h2 id="working-with-databases-on-zend-server">使用IntelliJ IDEA在Zend Server上处理数据库</h2>        <p id="498f50e7">Zend Server集成了各种数据库（默认情况下为MySQL），这对于开发目的非常方便。IntelliJ IDEA附带<a href="relational-databases.html">数据库和SQL支持</a> 。确保<a href="connecting-to-a-database.html">将IDE连接</a>到Zend Server的开发实例，以利用这些工具。</p>            </div><aside class="prompt" rel="working-with-databases-on-zend-server" id="fea701d8" data-type="note" data-title="">            <p id="4d30f5fb">在<a href="http://files.zend.com/help/Zend-Server/content/installed_components.htm" rel="noopener noreferrer" data-external="true" target="_blank">官方文档中</a>了解有关与Zend Server一起安装的组件的更多信息。</p>        </aside>    <div class="chapter"><h2 id="additional-configuration">附加配置（可选）</h2>        <div class="chapter"><h3 id="configuring-integration-with-zend-server">配置与Zend Server的集成</h3>            <p id="4efd76c6">您可以在<span class="menupath" data-skip-index="skip">Zend Server |</span> Windows Server 2003中配置Zend Server IDE集成参数<span class="menupath" data-skip-index="skip">。调试器</span> ，尽管通常这是可选的。例如，可以通过触发“ <span class="control">自动检测IDE”设置</span>选项来更改调试端口：</p>            <figure><img alt="其他IDE设置" title="其他IDE设置" src="/help/img/idea/2019.3/ps_zend_additional_ide_settings.png" id="f26e901f" width="750" height="1354"></figure>            <p id="d9c63c11">请注意，调试端口必须设置为与IntelliJ IDEA中相同的值。如果需要，可以在IntelliJ IDEA中的“ <span class="menupath" data-skip-index="skip">语言和框架” |</span> “ <span class="control">调试”端口</span>和“ <span class="control">设置”广播端口</span>上进行更改。 <span class="menupath" data-skip-index="skip">PHP |</span> <span class="control">设置/首选项</span>对话框的<span class="menupath" data-skip-index="skip">调试</span>页面<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-secondary_macos="⌘," data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_emacs="⌃⌥S" data-secondary_intellij_idea_classic="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘," data-secondary_visual_studio="⌥F7">Ctrl+Alt+S</kbd> 。</p>            <figure><img alt="PhpStorm调试器设置" title="PhpStorm调试器设置" src="/help/img/idea/2019.3/ps_zend_settings_debug.png" id="f699f339" width="595" height="889"></figure>            <p id="z-ray-config">如果您在IntelliJ IDEA中多次遇到调用调试器的Z-Ray系统请求时遇到问题，请确保在“ <span class="menupath" data-skip-index="skip">语言和框架|</span>脚本”中选择“ <span class="control">忽略Z-Ray系统请求”</span>复选框<span class="menupath" data-skip-index="skip">。 PHP |</span> <span class="control">设置/首选项</span>对话框的<span class="menupath" data-skip-index="skip">调试</span>页面<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-secondary_macos="⌘," data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_emacs="⌃⌥S" data-secondary_intellij_idea_classic="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘," data-secondary_visual_studio="⌥F7">Ctrl+Alt+S</kbd> 。</p><aside class="prompt" rel="z-ray-config" id="faeb2922" data-type="note" data-title="">                <p id="01da990c">可以进行<span class="menupath" data-skip-index="skip">Zend服务器</span>在Zend服务器Z-Ray配置<span class="menupath" data-skip-index="skip">| Z射线</span> 。</p>            </aside>                    </div>        <div class="chapter"><h3 id="setting-zend-server-as-server-in-product">在IntelliJ IDEA中将Zend Server设置为服务器</h3>            <p id="963aee53">在Zend Server和IntelliJ IDEA之间建立调试或性能分析会话后，Zend Server将作为IntelliJ IDEA配置中的PHP服务器添加。如有必要，您可以修改其设置<span class="menupath" data-skip-index="skip">。 PHP |</span> <span class="control">设置/首选项</span>对话框的<span class="menupath" data-skip-index="skip">服务器</span>页面<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-secondary_macos="⌘," data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_emacs="⌃⌥S" data-secondary_intellij_idea_classic="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘," data-secondary_visual_studio="⌥F7">Ctrl+Alt+S</kbd> 。</p>            <figure><img alt="服务器设置" title="服务器设置" src="/help/img/idea/2019.3/ps_zend_settings_servers.png" id="6b1904fe" width="602" height="552"></figure>            <p id="a22b3588">以后可以使用此服务器来配置<a href="run-debug-configuration.html">“运行配置”</a> 。</p>        </div>        <div class="chapter"><h3 id="php-interpreter-configuration">在IntelliJ IDEA中配置PHP解释器</h3>            <p id="263a47de">使用与Zend Server捆绑在一起的PHP解释器可以提供在类似生产环境中安装PHP解释器的优势。这样，我们可以确保将应用程序部署到生产环境时不会出现任何不一致。</p>            <p id="f5f6c527">例如，您可以使用PHP解释器来<a href="using-phpunit-framework.html">对PHPUnit</a>或<a href="using-behat-framework.html">Behat</a>进行<a href="using-phpunit-framework.html">测试</a> ，或者通过使用<span>PHP Code Quality Tools</span>分析您的代码。</p>            <p id="1c5bda24">可以在“ <span class="menupath" data-skip-index="skip">语言和框架” |“</span>设置”中设置解释器<span class="menupath" data-skip-index="skip">。 PHP</span>页面<a name="open_settings"></a>的<a name="settings_dialog"></a> <span class="control">设置/首选项</span>对话框<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-secondary_macos="⌘," data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_emacs="⌃⌥S" data-secondary_intellij_idea_classic="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘," data-secondary_visual_studio="⌥F7">Ctrl+Alt+S</kbd> 。有关详细信息，请参见<a href="configuring-local-interpreter.html">配置本地PHP解释器</a> 。</p>        </div>        <div class="chapter"><h3 id="use_zftool_cli">使用IntelliJ IDEA的ZF Tool命令行工具</h3>                        <section class="procedure-steps"><h3 id="configure-zftool-cli">将zftool配置为命令行工具</h3><a name="integrate_built_in_cli_tool"></a><ol class="list _decimal"><li class="list__item" id="f86d5f2f">            <p id="d246a104"><a name="open_settings"></a>在里面<a name="settings_dialog"></a> <span class="control">设置/首选项</span>对话框<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-secondary_macos="⌘," data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_emacs="⌃⌥S" data-secondary_intellij_idea_classic="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘," data-secondary_visual_studio="⌥F7">Ctrl+Alt+S</kbd> ，转到<span class="menupath" data-skip-index="skip">工具|命令行工具支持</span> 。</p>        </li><li class="list__item" id="f1e2bed5">            <p id="visibility_level">请点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加按钮">在工具栏上。</p>        </li><li class="list__item" id="4cd82514">            <p id="17e7ba1a">在“ <span class="control">命令行工具”</span>对话框中，从列表中选择“ <span class="control">Zend Framework 1工具”</span>或“ <span class="control">Zend Framework 2工具</span> ”，然后指定其可见性级别（“ <span class="control">Project”</span>或“ <span class="control">Global”</span> ）。</p>            <figure><img alt="命令行工具对话框" title="命令行工具对话框" src="/help/img/idea/2019.3/ps_cli_zftool_dialog.png" id="12ac2819" width="400" height="294"></figure>        </li><li class="list__item" id="729080a9">            <p id="7fb43a01">当您单击<span class="control">OK时</span> ， <span class="control">Zend Framework Tool</span>对话框打开。</p>                                                                            <p id="ea256e31">根据所使用的Zend Framework版本，提供PHP可执行文件的路径以及ZF Tool的路径：</p>                <ul class="list _ul"><li class="list__item" id="d249c3cd"><p>                        <span class="filepath"><zend-framework-home>/ zf</zend-framework-home></span> for <span class="emphasis">Zend Framework 1</span> 。</p></li><li class="list__item" id="de1346f1"><p>                        <span class="filepath"><zend-framework-home>/zf.php</zend-framework-home></span>或<span class="filepath"><zend-framework-home>/zftool.phar（</zend-framework-home></span>用于<span class="emphasis">Zend Framework 2）</span> 。</p></li></ul>                                </li><li class="list__item" id="2fb932e5"><p>            <a name="customize_built_in_cli_tool"></a>单击“ <span class="control">确定”</span>以应用更改并返回“ <span class="control">命令行工具支持”</span>页面。（可选）单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.edit@2x.png" width="16" alt="编辑按钮">编辑工具属性，或<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.editSource@2x.png" width="16" alt="编辑源按钮">自定义命令集。有关详细信息，请参见<a href="php-specific-command-line-tools.html#customize_tool_definition">自定义工具</a> 。</p></li></ol></section>            <section class="procedure-steps"><h3 id="run-zftool-commands">运行zftool命令</h3><ul class="list "><li class="list__item" id="cbe5810c">                    <a name="ps_run_command_line_tool_command"></a>                        <p id="8632bbca">在主菜单中，选择“ <span class="menupath" data-skip-index="skip">工具” |“工具”。运行命令</span>或按<kbd data-primary_default_for_windows="Ctrl" data-primary_eclipse="Ctrl" data-primary_emacs="Ctrl" data-primary_netbeans="Ctrl" data-primary_sublime_text="Ctrl" data-primary_visual_studio="Ctrl" data-secondary_macos="^" data-secondary_eclipse="^" data-secondary_eclipse_macos="^" data-secondary_emacs="^" data-secondary_intellij_idea_classic="^" data-secondary_netbeans="^" data-secondary_sublime_text="^" data-secondary_sublime_text_macos="^" data-secondary_visual_studio="^">Ctrl</kbd>两次。</p>        <p id="bb5cc423">在打开的<span class="control">“运行任何内容”</span>窗口中，在<code class="code"><zf> <command></code>要么<code class="code"><zf2> <command></code>格式。</p>        <p id="3cb84914">命令执行结果显示在“ <a href="run-tool-window.html">运行工具”窗口中</a> 。</p>                <figure id="0531f8cd" width="800" data-theme="light"><img class="js-gif" src="/help/img/idea/2019.3/ps_run_cli_tool_zftool.png" width="800" data-gif-src="/help/img/idea/2019.3/ps_run_cli_tool_zftool.animated.gif" style="width:800px"></figure>                    </li></ul></section>            <section class="procedure-steps"><h3 id="terminate-command">终止命令</h3><ul class="list "><li class="list__item" id="1aa4b594"><p>请点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.suspend@2x.png" width="16" alt="停止按钮">在<a href="run-tool-window.html">运行工具窗口</a>工具栏上。</p></li></ul></section>        </div>    </div>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="zero-configuration-debugging.html">零配置调试</a> <a class="navigation-links__next" href="debugging-a-php-http-request.html">调试PHP HTTP请求</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>