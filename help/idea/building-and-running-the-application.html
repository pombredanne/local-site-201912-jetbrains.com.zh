<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>生成和运行应用程序-帮助|帮助IntelliJ IDEA</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Building_and_Running_the_Application" data-breadcrumbs="Language and framework-specific guidelines/Android/Android.xml|Android Tutorials/Building_and_Running_the_Application.xml|Building and Running the Application" data-main-title="Building and Running the Application" data-article-props="
                {
                
            " seeals=":[=" titl=":=" procedure=",=" link=":=" ur=":" debugging-with-logcat.htm="," tex=":" debugging="" with="" logca="}=" referenc=",=" run-debug-configurations-dialog.htm="," run="" debug="" configurations="" dialo="}=" concept=",=" debugging-code.htm="," debuggin="}=" =""><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索IntelliJ IDEA帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_macos" data-group="secondary">苹果系统</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_macos" data-group="secondary">Eclipse（macOS）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_intellij_idea_classic" data-group="secondary">IntelliJ IDEA经典版</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_sublime_text" data-group="secondary">崇高文字</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Building_and_Running_the_Application.xml" data-toc="Building_and_Running_the_Application">构建和运行应用程序</h1>    <p id="c4293b68">创建第一个Android应用程序后，就可以对其进行编译并将其部署到Android仿真器或物理设备上。</p>    <p id="b4e73b3e">在构建项目并开始测试应用程序之前，建议您查看当前的构建配置。</p>    <p id="1fd37d46">在本教程中：</p>    <ul class="list" data-skip-index="skip"><li class="list__item"><a href="#348c0b18">查看默认的运行/调试配置</a></li><li class="list__item"><a href="#AddRunConfig">添加新的运行/调试配置</a></li><li class="list__item"><a href="#d5d06654">在仿真器上测试应用程序</a></li><li class="list__item"><a href="#c48b3965">在物理设备上测试应用程序</a></li><li class="list__item"><a href="#c70156dd">调试您的应用程序</a></li><li class="list__item"><a href="#59e7db60">分析调试输出</a></li></ul>    <div class="chapter"><h2 id="348c0b18">查看默认的运行/调试配置</h2>        <p id="f002b791">点击<span class="control">运行|编辑配置</span> 。将显示以下对话框：</p>        <figure><img alt="Android运行调试配置" title="Android运行调试配置" src="/help/img/idea/2019.3/Android_run_debug_config.png" id="0de3be58" width="1092" height="702"></figure>        <p id="5efd7bb2">IntelliJ IDEA会自动创建一个与您的项目同名的默认运行/调试配置。有关Android运行/调试配置中每个配置选项的详细说明，请参阅<a href="run-debug-configuration-android-application.html">“运行/调试配置：Android应用程序”</a> 。</p>    </div>        <div class="chapter"><h2 id="AddRunConfig">添加新的运行/调试配置</h2>        <p id="1a8fe844">让我们创建一个自定义构建配置：</p>        <ol class="list _decimal"><li class="list__item" id="cfa2dfac"><p>在“ <a href="run-debug-configurations-dialog.html">运行/调试配置”</a>对话框中，单击“ <span class="control">添加”</span>按钮<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="图标一般添加">然后从列表中选择“ <span class="control">Android应用程序</span> ”：</p><figure><img alt="Android新版本配置步骤1" title="Android新版本配置步骤1" src="/help/img/idea/2019.3/Android_new_build_config_step1.png" id="006b5e5a" width="1092" height="702"></figure>            <p></p></li><li class="list__item" id="fa108a88">将使用默认名称将新项添加到左窗格的树中。 <code class="code">Unnamed</code> 。选择它，然后在“ <span class="control">名称”</span>字段中输入一个更有意义的<span class="control">名称</span> ，例如， <code class="code">HelloDroid Emulator</code> ：<figure><img alt="Android新版本配置步骤2" title="Android新版本配置步骤2" src="/help/img/idea/2019.3/Android_new_build_config_step2.png" id="9e6a2fe8" width="1092" height="702"></figure>                <p id="e4aabf05">请注意，新创建的配置以红叉显示，表明尚未准备使用，因为尚未指定模块。</p>            </li><li class="list__item" id="03a3f53c">接下来，您需要指定可执行模块。展开“ <span class="control">模块”</span>下拉列表，然后选择<code class="code">HelloDroid</code> ：它是项目中唯一的可执行模块。<figure><img alt="Android新版本配置步骤3" title="Android新版本配置步骤3" src="/help/img/idea/2019.3/Android_new_build_config_step3.png" id="533e40d1" width="1092" height="702"></figure>                <p id="d74dd95b">选择模块后，红叉消失，因为现在您的运行/调试配置中填充了最少的必需信息。</p>            </li><li class="list__item" id="413e5577"><p>接下来，确保在“ <span class="control">安装选项”</span>下选择了“ <span class="control">默认APK”</span> <span class="control">选项</span> 。选择此选项后，该应用程序将自动部署在目标设备上。</p></li><li class="list__item" id="7c55d303"><p>接下来，您需要确定要启动哪个活动作为模块的入门活动。您可以启动<span class="filepath">AndroidManifest</span>文件中配置的默认活动，也可以选择一个自定义活动。由于您的示例应用程序只有一个活动，因此请选择“ <span class="control">默认活动”</span>选项。</p></li><li class="list__item" id="12aed201">最后，您需要指定启动应用程序的目标设备。让我们选择“ <span class="control">仿真器”</span>选项。如果您已经配置了Android虚拟设备，则可以从“ <span class="control">首选Android虚拟设备”</span>下拉列表中选择一个设备。如果未配置任何设备，请执行以下步骤：<ul class="list _alpha-lower"><li class="list__item" id="a2c48d65"><p>在主菜单中，选择“ <span class="control">工具” |“工具”。 Android | AVD Manager</span>启动<span class="control">Android虚拟设备管理器</span> ：</p><figure><img alt="欢迎使用Android AVD Manager" title="欢迎使用Android AVD Manager" src="/help/img/idea/2019.3/Android_AVD_manager_welcome.png" id="5795b42e" width="868" height="591"></figure>                    <p></p></li><li class="list__item" id="57506bf5"><p>单击<span class="control">创建虚拟设备</span> 。在打开的对话框中，在左窗格中选择要模仿的Android设备的类型： <span class="control">TV</span> ， <span class="control">Phone</span> ， <span class="control">Wear</span>或<span class="control">Tablet</span> 。让我们选择<span class="control">Phone</span> 。在中央窗格中，选择手机型号（例如<span class="control">Nexus 5X</span> ），然后单击<span class="control">下一步</span> ：</p><figure><img alt="Android AVD Manager步骤1" title="Android AVD Manager步骤1" src="/help/img/idea/2019.3/Android_AVD_manager_step1.png" id="a8b57487" width="938" height="614"></figure>                    <p></p></li><li class="list__item" id="a4ae46c8"><p>在下一步中，选择要在虚拟设备上模拟的系统映像，即OS版本，Android API级别，应用程序二进制接口（ABI）和目标SDK版本：</p><figure><img alt="Android AVD Manager步骤2" title="Android AVD Manager步骤2" src="/help/img/idea/2019.3/Android_AVD_manager_step2.png" id="66bd8c11" width="1080" height="620"></figure>                    <p></p></li><li class="list__item" id="2d57f246"><p>在最后一步，您可以修改AVD名称并选择虚拟设备屏幕的启动大小和方向：</p><figure><img alt="Android AVD管理器step3" title="Android AVD管理器step3" src="/help/img/idea/2019.3/Android_AVD_manager_step3.png" id="64013329" width="1080" height="670"></figure>                    <p></p></li><li class="list__item" id="b898be25"><p>单击<span class="control">完成</span>以完成向导。新创建的Android虚拟设备将添加到设备列表中：</p><figure><img alt="Android AVD Manager最终版" title="Android AVD Manager最终版" src="/help/img/idea/2019.3/Android_AVD_manager_final.png" id="814e4dbd" width="941" height="457"></figure>                    <p></p></li><li class="list__item" id="793b9601"><p>返回到“ <span class="control">运行/调试配置”</span>对话框。</p></li></ul>            </li><li class="list__item" id="caf7a81a">请注意，Android虚拟设备（AVD）只是一个配置文件，您可以通过该文件定义仿真器要模仿的硬件和软件选项。除了AVD设置外，您还可以配置补充参数，例如要模拟的网络传输速率，网络延迟（初始输入和输出之间的时间延迟）等。要访问这些设置，请在<span class="control">AVD管理器中</span> ，从列表中选择一个仿真器，然后单击“ <span class="control">编辑此AVD”。</span> <img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.edit@2x.png" width="16" alt="图标动作编辑">右侧的图标。在“ <span class="control">虚拟设备配置”</span>对话框中，单击“ <span class="control">显示高级设置”</span>按钮：<figure><img alt="AVD高级设置" title="AVD高级设置" src="/help/img/idea/2019.3/AVD_advanced_settings.png" id="82880943" width="1080" height="712"></figure>                <p id="c637b749">然后，将这些参数作为命令行参数传递给仿真器。</p>            </li><li class="list__item" id="cbef4309"><p>在“ <span class="control">运行/调试配置”</span>对话框中，单击“ <span class="control">确定”</span>以保存新创建的构建配置。</p></li><li class="list__item" id="3452dc3a">请注意，如果在配置Android虚拟设备时选择了x86应用程序二进制接口，则还需要先安装<a href="https://software.intel.com/en-us/android/articles/intel-hardware-accelerated-execution-manager" rel="noopener noreferrer" data-external="true" target="_blank">Intel x86 Emulator Accelerator，</a>然后才能运行和测试该应用程序，否则IntelliJ IDEA在您尝试构建自己的应用程序时将引发错误。项目。去做这个：<ol class="list _decimal"><li class="list__item" id="b793269c"><p>启动<span class="control">SDK Manager</span> ：在主菜单中，选择<span class="control">Tools | Android | SDK管理器</span> 。</p></li><li class="list__item" id="cb87eb03"><p>向下滚动到名为<span class="control">Extras</span>的文件夹。</p></li><li class="list__item" id="132de39d"><p>在此文件夹中，找到“ <span class="emphasis">Intel x86 Emulator Accelerator（HAXM安装程序）”</span> ，选中相应的复选框，然后单击“ <span class="control">安装软件包”</span>按钮。</p></li><li class="list__item" id="c0dddb40"><p>在打开的对话框中，接受许可协议，然后单击“ <span class="control">安装”</span> 。</p></li><li class="list__item" id="c3c0fc70"><p>导航到Android SDK安装目录（SDK路径显示在<span class="control">Android SDK Manager</span>窗口的顶部）。在<span class="filepath">\ extras \ intel \ Hardware_Accelerated_Execution_Manager</span>文件夹中，找到<span class="filepath">intelhaxm-android.exe</span>文件，然后双击以启动它。</p></li><li class="list__item" id="f5c76d91"><p>按照英特尔硬件加速执行管理器安装向导的说明完成安装。</p></li></ol>            </li></ol>    </div>    <div class="chapter"><h2 id="d5d06654">在仿真器上测试应用程序</h2>        <p id="69b4b097">要构建您的项目，请按<kbd data-primary_default_for_windows="Shift+F10" data-primary_eclipse="Shift+Alt+X" data-primary_emacs="Shift+F10" data-primary_netbeans="F6" data-primary_sublime_text="Shift+F10" data-primary_visual_studio="Ctrl+F5" data-secondary_macos="⌃R" data-secondary_eclipse="⌥⇧X" data-secondary_eclipse_macos="⇧⌘F11" data-secondary_emacs="⇧F10" data-secondary_intellij_idea_classic="⇧F10" data-secondary_netbeans="F6" data-secondary_sublime_text="⇧F10" data-secondary_sublime_text_macos="N/A" data-secondary_visual_studio="⌃F5">Shift+F10</kbd>或单击“ <span class="control">运行”</span>图标<img class="inline-icon-13" src="/help/img/idea/2019.3/icons.toolwindows.toolWindowRun@2x.png" width="13" alt="图标工具Windows工具WindowRun">在编辑器右上角的<span>导航栏中</span> ：</p>        <figure><img alt="Android运行项目" title="Android运行项目" src="/help/img/idea/2019.3/Android_run_project.png" id="1c8f9933" width="335" height="52"></figure>        <p id="0b5ab099">将根据下拉列表中当前选择的运行/调试配置来构建项目。如果没有错误发生，则IntelliJ IDEA将二进制文件和资源打包为<span class="control">APK文件</span> ，并将其上传到Android模拟器：</p>        <figure><img alt="Android将APK上传到模拟器" title="Android将APK上传到模拟器" src="/help/img/idea/2019.3/Android_upload_APK_to_emulator.png" id="a0e127fc" width="1121" height="324"></figure>        <p id="5c7e2679">如果Android模拟器尚未启动并运行，则IntelliJ IDEA将在上载应用程序之前对其进行初始化。模拟器接收并安装该软件包，然后通过调用指定的启动活动来启动该软件包：</p>        <figure><img alt="Android nexus5 hellodroid" title="Android nexus5 hellodroid" src="/help/img/idea/2019.3/Android_nexus5_hellodroid.png" id="4838527a" width="539" height="854"></figure>    </div>    <div class="chapter"><h2 id="c48b3965">在物理设备上测试应用程序</h2>        <p id="0469b166">要在真实的Android设备上测试您的应用程序，您需要：</p>        <ol class="list _decimal"><li class="list__item" id="dfa7dbb3"><p>                <a href="#AddRunConfig">添加运行/调试配置</a> ，并确保在“ <span class="control">目标设备”</span>下选择“ <span class="control">USB</span> <span class="control">设备”</span> 。</p></li><li class="list__item" id="21d313da"><p>确保通过USB电缆将Android设备连接到计算机。</p></li><li class="list__item" id="967f5cb1"><p>按<kbd data-primary_default_for_windows="Shift+F10" data-primary_eclipse="Shift+Alt+X" data-primary_emacs="Shift+F10" data-primary_netbeans="F6" data-primary_sublime_text="Shift+F10" data-primary_visual_studio="Ctrl+F5" data-secondary_macos="⌃R" data-secondary_eclipse="⌥⇧X" data-secondary_eclipse_macos="⇧⌘F11" data-secondary_emacs="⇧F10" data-secondary_intellij_idea_classic="⇧F10" data-secondary_netbeans="F6" data-secondary_sublime_text="⇧F10" data-secondary_sublime_text_macos="N/A" data-secondary_visual_studio="⌃F5">Shift+F10</kbd>或单击“ <span class="control">运行”</span>图标<img class="inline-icon-13" src="/help/img/idea/2019.3/icons.toolwindows.toolWindowRun@2x.png" width="13" alt="图标工具Windows工具WindowRun">在编辑器右上角的<span>导航栏中</span> 。</p></li></ol>        <p id="bef9815e">如果您的应用程序安装失败，则很可能意味着该设备未配置为在Android应用程序商店之外安装应用程序。在设备上启用此功能以测试应用程序。</p>        <a name="enable_debug_mode"></a>        <p id="49e29f62">在Android 4.2或更高版本上，执行以下操作：</p>        <ul class="list _bullet"><li class="list__item" id="e547ad89"><p>打开设备的<span class="control">设置</span> 。</p></li><li class="list__item" id="0a805de7"><p>滚动到<span class="control">关于手机</span>或<span class="control">关于平板电脑，</span>然后点按它。</p></li><li class="list__item" id="39082e3c"><p>滚动到底部，然后点击<span class="control">内部版本号</span> 7次，直到看到“您是开发者！“ 信息。这样，您就可以在设备上解锁USB调试模式。</p></li><li class="list__item" id="ab8e4f46"><p>现在导航到<span class="control">设置|开发人员选项|调试| USB调试</span> ，让您的手机部署非打包的应用程序。</p></li></ul>        </div>    <div class="chapter"><h2 id="c70156dd">调试您的应用程序</h2>        <p id="2e9ca831">IntelliJ IDEA允许您使用相应的运行/调试配置，以<a href="debugging-code.html">调试模式</a>在模拟器或物理设备上启动应用程序。</p>        <p id="c8b97b28">要调试您的应用程序，您需要在源代码中设置断点：将插入号放在可执行行中，然后单击装订线区域。您要在其中切换断点的行旁边将出现一个红色圆圈，并且该行将用粉红色标记：</p>        <figure><img alt="Android断点" title="Android断点" src="/help/img/idea/2019.3/Android_breakpoint.png" id="5f30460f" width="1462" height="640"></figure>        <p id="0fab0667">要启动调试会话，请按<kbd data-primary_default_for_windows="Shift+F9" data-primary_eclipse="Shift+Alt+D" data-primary_emacs="Shift+F9" data-primary_netbeans="Ctrl+F5" data-primary_sublime_text="Shift+F9" data-primary_visual_studio="Alt+F5" data-secondary_macos="⌃D" data-secondary_eclipse="⌥⇧D" data-secondary_eclipse_macos="⌘F11" data-secondary_emacs="⇧F9" data-secondary_intellij_idea_classic="⇧F9" data-secondary_netbeans="⌃F5" data-secondary_sublime_text="⇧F9" data-secondary_sublime_text_macos="⌃D" data-secondary_visual_studio="⌥F5">Shift+F9</kbd>或单击“ <span class="control">调试”</span>图标<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.startDebugger@2x.png" width="16" alt="图标操作startDebugger">在编辑器右上角的<span>导航栏中</span> 。将激活“ <a href="debug-tool-window.html">调试工具”窗口</a> ，您可以在其中<a href="stepping-through-the-program.html">逐步浏览程序</a> ，检查<a href="debug-tool-window-variables.html">变量</a> ， <a href="debug-tool-window-watches.html">监视</a> ， <a href="debug-tool-window-frames.html">框架</a>和<a href="debug-tool-window-threads.html">线程</a> ，并在“ <a href="debug-tool-window-console.html">控制台”选项卡中</a>分析系统信息和错误消息。</p>    </div>    <div class="chapter"><h2 id="59e7db60">分析调试输出</h2>        <a name="LogcatIntro"></a>        <p id="3843fec7">在IntelliJ IDEA中，通过支持存储系统调试输出日志的<a href="http://developer.android.com/tools/help/logcat.html" rel="noopener noreferrer" data-external="true" target="_blank">logcat</a>功能来提供Android应用程序的调试。当模拟器引发错误时，日志消息包括堆栈跟踪，因此您可以<a href="analyzing-external-stacktraces.html">导航到</a>源代码中<a href="analyzing-external-stacktraces.html">的异常位置</a> 。</p>            <p id="4d4b8813">在IntelliJ IDEA中，可通过<a href="android-logcat-tool-window.html">Android Monitor工具窗口</a>的<span class="control">Logcat</span>选项卡使用<span class="control">logcat</span>功能（有关详细信息，请参阅<a href="debugging-with-logcat.html">使用Logcat调试</a> ）：</p>        <figure><img alt="Android logcat" title="Android logcat" src="/help/img/idea/2019.3/Android_logcat.png" id="dae1a210" width="1258" height="288"></figure>        <p id="0ac861c6">您还可以在运行/调试配置的“ <a href="run-debug-configuration-android-application.html#misc">杂项”选项卡</a>中配置其他logcat选项：</p>        <figure><img alt="Android杂项运行调试" title="Android杂项运行调试" src="/help/img/idea/2019.3/android_run_debug_miscellaneous.png" id="5a17c3f5" width="1092" height="702"></figure>    </div>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__next" href="editing-ui-layout-using-designer.html">使用Designer</a> <a class="navigation-links__prev" href="exploring-the-project-structure.html">探索项目结构</a> <a class="navigation-links__next" href="editing-ui-layout-using-designer.html">编辑UI布局</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>