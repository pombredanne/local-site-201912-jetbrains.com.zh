<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Arquillian：快速入门指南-帮助|帮助IntelliJ IDEA</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Arquillian" data-breadcrumbs="Language and framework-specific guidelines/Arquillian.xml|Arquillian: a Quick Start Guide" data-main-title="Arquillian: a Quick Start Guide" data-article-props="
                {
                
            " seeals=":[=" titl=":=" referenc=",=" link=":=" ur=":" arquillian-containers.htm="," tex=":" arquillian="" container="}=" run-debug-configuration-arquillian-junit.htm="," run="" debug="" configuration:="" juni="}=" run-debug-configuration-arquillian-testng.htm="," testn="}=" web="" resource=",=" http:="" ="" www.jetbrains.net="" devnet="" community="" idea="" k="," developer="" communit="}="><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索IntelliJ IDEA帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>IntelliJ IDEA 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="secondary_macos" data-group="secondary">苹果系统</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_macos" data-group="secondary">Eclipse（macOS）</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_intellij_idea_classic" data-group="secondary">IntelliJ IDEA经典版</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_sublime_text" data-group="secondary">崇高文字</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Arquillian.xml" data-toc="Arquillian" data-availability-limit="Ultimate">Arquillian：快速入门指南</h1>               <p id="e0587843">本指南显示了用于编写和运行<a href="http://arquillian.org/" rel="noopener noreferrer" data-external="true" target="_blank">Arquillian</a>测试的主要IntelliJ IDEA功能。</p>    <ul class="list" data-skip-index="skip"><li class="list__item"><a href="#034d4bd2">在你开始前</a></li><li class="list__item"><a href="#32f73b90">在Arquillian JUnit支持下创建项目</a></li><li class="list__item"><a href="#351927a2">建立课程</a></li><li class="list__item"><a href="#98b1b5d8">为Greeter类开发代码</a></li><li class="list__item"><a href="#c832522c">将javax-inject.jar定义为库</a></li><li class="list__item"><a href="#318c78e0">创建测试源文件夹</a></li><li class="list__item"><a href="#84f06549">创建测试课程</a></li><li class="list__item"><a href="#cbfbbe6a">完成GreteerTest类的代码</a></li><li class="list__item"><a href="#5fec1e4e">创建用于运行测试的运行配置</a></li><li class="list__item"><a href="#90fcc340">在嵌入式容器中运行测试</a></li><li class="list__item"><a href="#dde1be8f">编辑运行配置：添加托管容器</a></li><li class="list__item"><a href="#b778cfda">创建arquillian.xml配置文件</a></li><li class="list__item"><a href="#0324d7be">在托管容器中运行测试</a></li><li class="list__item"><a href="#98886416">修改arquillian.xml</a></li><li class="list__item"><a href="#bde67e5f">运行测试：部署到正在运行的服务器</a></li></ul>    <h2 id="034d4bd2">在你开始前</h2>    <p id="7bd5c8c2">确保您的计算机上安装了以下软件：</p>    <ul class="list _ul"><li class="list__item" id="15f9ec1d"><p>检查是否启用了JBoss Arquillian Support <a href="managing-plugins.html">插件</a> 。</p></li><li class="list__item" id="138245ba"><p>Java SE开发套件（JDK），版本8。<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" rel="noopener noreferrer" data-external="true" target="_blank">下载Oracle JDK</a> 。</p></li><li class="list__item" id="9086b71b"><p>GlassFish Server版本4。该服务器将用作托管Arquillian容器。<a href="https://glassfish.java.net/download.html" rel="noopener noreferrer" data-external="true" target="_blank">下载GlassFish</a> 。</p></li></ul>    <p id="89632e81">您还应该<a href="http://www.java2s.com/Code/Jar/j/Downloadjavaxinjectjar.htm" rel="noopener noreferrer" data-external="true" target="_blank">下载javax-inject.jar</a> 。开发示例测试类时，此文件将用作<a href="library.html">库</a> 。</p>    <h2 id="32f73b90">在Arquillian JUnit支持下创建项目</h2>    <ol class="list _decimal"><li class="list__item" id="30a6f3e2">单击“欢迎”屏幕上的“ <span class="control">创建新项目</span> ”，或选择“ <span class="control">文件” |“</span> <span class="control">新建”</span> 。 <span class="control">新品|项目</span> 。<p id="92b67a82">将打开“ <span class="control">新建项目”</span>向导。</p></li><li class="list__item" id="66920cee"><p>在左侧窗格中，选择<span class="control">Java Enterprise</span> 。</p></li><li class="list__item" id="7f4c1042"><p>如果要使用的JDK已在IntelliJ IDEA中定义，请从<span class="control">Project SDK</span>列表中选择该JDK。否则，单击<span class="control">New</span> ，选择<span class="control">JDK</span> ，然后在打开的对话框中选择JDK安装文件夹。</p></li><li class="list__item" id="d1464fab">如果IntelliJ IDEA中尚未定义GlassFish，请单击<span class="control">“</span> <span class="control">应用程序服务器”</span>字段右侧的“ <span class="control">新建”</span> ，然后选择“ <span class="control">Glassfish服务器”</span> 。<p id="6b36a8aa">在“ <span class="control">Glassfish服务器”</span>对话框中，指定“ GlassFish Server”安装目录。</p></li><li class="list__item" id="67c6c451">在“ <span class="control">其他库和框架”下</span> ，选中<span class="control">Arquillian JUnit</span>复选框。<figure><img alt="arq01NewProject" title="arq01NewProject" src="/help/img/idea/2019.3/arq01NewProject.png" id="c24bba3a" width="616" height="448"></figure>            <p id="4cdc836c">单击<span class="control">下一步</span> 。</p></li><li class="list__item" id="4d8e825b">指定新项目的名称（例如， <code class="code">HelloArquillian</code> ），然后点击<span class="control">完成</span> 。<figure><img alt="arq02NewProject" title="arq02NewProject" src="/help/img/idea/2019.3/arq02NewProject.png" id="39c30ebf" width="616" height="132"></figure>            <p id="5d7f2ad4">创建项目后，您将在“ <span class="control">项目”</span>工具窗口中看到类似的内容。</p>            <figure><img alt="arq03项目" title="arq03项目" src="/help/img/idea/2019.3/arq03Project.png" id="964ed82b" width="616" height="206"></figure></li></ol>    <p id="480da406">（要为现有项目添加Arquillian JUnit支持：在“ <span class="control">项目”</span>工具窗口中，右键单击您的项目或模块文件夹，然后选择“ <span class="control">添加框架支持”</span> 。然后，在打开的对话框中选中<span class="control">Arquillian JUnit</span>复选框。）</p>    <h2 id="351927a2">建立课程</h2>    <p id="a4ef2ca1">现在，我们将创建一个要测试的类。让类名为<code class="code">com.example.hello.Greeter</code> 。</p>    <ol class="list _decimal"><li class="list__item" id="b40f677a"><p>在“ <span class="control">项目”</span>工具窗口中，右键单击<span class="filepath">src</span>文件夹，指向“ <span class="control">新建”，</span>然后选择“ <span class="control">Java类”</span> 。</p></li><li class="list__item" id="44ea4b6f">在打开的“ <span class="control">创建新类”</span>对话框中，键入<code class="code">com.example.hello.Greeter</code>在<span class="control">名称</span>字段中，然后按<kbd data-primary_default_for_windows="Enter" data-primary_eclipse="Enter" data-primary_emacs="Enter" data-primary_netbeans="Enter" data-primary_sublime_text="Enter" data-primary_visual_studio="Enter" data-secondary_macos="⏎" data-secondary_eclipse="⏎" data-secondary_eclipse_macos="⏎" data-secondary_emacs="⏎" data-secondary_intellij_idea_classic="⏎" data-secondary_netbeans="⏎" data-secondary_sublime_text="⏎" data-secondary_sublime_text_macos="⏎" data-secondary_visual_studio="⏎">Enter</kbd> 。<p id="8b87e4d0">包装<code class="code">com.example.hello</code>和班级<code class="code">Greeter</code>显示在“ <span class="control">项目”</span>工具窗口中。</p>            <figure><img alt="arq04ProjectGreeter" title="arq04ProjectGreeter" src="/help/img/idea/2019.3/arq04ProjectGreeter.png" id="e3cb4599" width="616" height="247"></figure>            <p id="3f43a233">同时，文件<span class="filepath">Greeter.java</span>在编辑器中打开。</p></li></ol>    <h2 id="98b1b5d8">为Greeter类开发代码</h2>    <p id="155bd485">这是代码<code class="code">Greeter</code>类。</p>    <div class="code-block" data-lang="java">包com.example.hello;导入java.io。PrintStream;公共类Greeter {public void greet（PrintStream to，String name）{to.println（createGreeting（name））; } public String createGreeting（String name）{返回“你好，+名称+”！“;}}</div>    <p id="24047dd3">将代码复制到编辑器中。</p>    <figure><img alt="arq05EditorGreeter" title="arq05EditorGreeter" src="/help/img/idea/2019.3/arq05EditorGreeter.png" id="ff8d03ac" width="616" height="269"></figure>    <h2 id="c832522c">将javax-inject.jar定义为库</h2>    <p id="cd98baf7">为了能够编写和运行我们的Arquillian测试，我们需要<code class="code">javax-inject.jar</code>作为图书馆。</p>    <ol class="list _decimal"><li class="list__item" id="1fac8dca"><p>在项目根文件夹中，创建文件夹<span class="filepath">lib</span> （ <span class="menupath" data-skip-index="skip">New | Directory</span> ），然后将<span class="filepath">javax-inject.jar</span>复制到该文件夹中。</p><figure><img alt="arq06ProjectJavaxInject" title="arq06ProjectJavaxInject" src="/help/img/idea/2019.3/arq06ProjectJavaxInject.png" id="f60bc10c" width="616" height="287"></figure><p></p></li><li class="list__item" id="a3043720"><p>打开<span class="control">项目结构</span>对话框<kbd data-primary_default_for_windows="Ctrl+Shift+Alt+S" data-primary_eclipse="Ctrl+Shift+Alt+S" data-primary_emacs="Ctrl+Shift+Alt+S" data-primary_netbeans="Ctrl+Shift+Alt+S" data-primary_sublime_text="Ctrl+Shift+Alt+S" data-primary_visual_studio="Ctrl+Shift+Alt+S" data-secondary_macos="⌘;" data-secondary_eclipse="⌃⌥⇧S" data-secondary_eclipse_macos="⌘;" data-secondary_emacs="⌃⌥⇧S" data-secondary_intellij_idea_classic="⌘;" data-secondary_netbeans="⌃⌥⇧S" data-secondary_sublime_text="⌃⌥⇧S" data-secondary_sublime_text_macos="⌘;" data-secondary_visual_studio="⌃⌥⇧S">Ctrl+Shift+Alt+S</kbd> ，然后选择<span class="control">库</span> 。</p></li><li class="list__item" id="f99166d1"><p>请点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加按钮"> ，选择<span class="control">Java</span> ， <span class="filepath">然后</span>在打开的对话框中选择<span class="filepath">javax-inject.jar</span> 。</p></li><li class="list__item" id="fa8ae7ef"><p>在“ <span class="control">选择模块”</span>对话框中单击“ <span class="control">确定</span> <span class="control">”</span> 。</p><figure><img alt="arq07LibrariesJavaxInject" title="arq07LibrariesJavaxInject" src="/help/img/idea/2019.3/arq07LibrariesJavaxInject.png" id="f159d428" width="616" height="210"></figure><p></p></li><li class="list__item" id="b7e520b5"><p>在“ <span class="control">项目结构”</span>对话框中单击“ <span class="control">确定</span> ”。</p></li></ol>    <h2 id="318c78e0">创建测试源文件夹</h2>    <ol class="list _decimal"><li class="list__item" id="c10247a3"><p>在项目根文件夹中，创建文件夹<span class="filepath">test</span> 。</p></li><li class="list__item" id="8d3aa623"><p>右键单击该文件夹，指向“ <span class="control">标记目录为”，</span>然后选择“ <span class="control">测试源根”</span> 。</p><figure><img alt="arq08ProjectTest" title="arq08ProjectTest" src="/help/img/idea/2019.3/arq08ProjectTest.png" id="b29de925" width="616" height="311"></figure><p></p></li></ol>    <h2 id="84f06549">创建测试课程</h2>    <ol class="list _decimal"><li class="list__item" id="9976a81c"><p>在编辑器中，将插入号放置在班级名称内<code class="code">Greeter</code> 。</p></li><li class="list__item" id="6536867f"><p>点击灯泡<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.intentionBulb@2x.png" width="16" alt="图标动作意图"><kbd data-primary_default_for_windows="Alt+Enter" data-primary_eclipse="Alt+Enter" data-primary_emacs="Alt+Enter" data-primary_netbeans="Alt+Enter" data-primary_sublime_text="Alt+Enter" data-primary_visual_studio="Alt+Enter" data-secondary_macos="⌥⏎" data-secondary_eclipse="⌥⏎" data-secondary_eclipse_macos="⌘1" data-secondary_emacs="⌥⏎" data-secondary_intellij_idea_classic="⌥⏎" data-secondary_netbeans="⌥⏎" data-secondary_sublime_text="⌥⏎" data-secondary_sublime_text_macos="⌥⏎" data-secondary_visual_studio="⌥⏎">Alt+Enter</kbd>然后选择<span class="control">创建测试</span> 。</p><figure><img alt="arq09GreeterCreateTest" title="arq09GreeterCreateTest" src="/help/img/idea/2019.3/arq09GreeterCreateTest.png" id="9c260e8f" width="616" height="278"></figure><p></p></li><li class="list__item" id="027afe77">在打开的“ <span class="control">创建测试”</span>对话框中，从“ <span class="control">测试库”</span>列表中选择<span class="control">Arquillian JUnit4</span> 。在为<span class="control">创建测试方法下</span> ，选择不返回值的方法<code class="code">greet</code> 。单击<span class="control">确定</span> 。<figure><img alt="arq10DialogCreateTest" title="arq10DialogCreateTest" src="/help/img/idea/2019.3/arq10DialogCreateTest.png" id="8bbca638" width="458" height="414"></figure>            <p id="151fe6f8">新的测试类显示在“ <span class="control">项目”</span>工具窗口中。</p>            <figure><img alt="arq11ProjectGreeterTest" title="arq11ProjectGreeterTest" src="/help/img/idea/2019.3/arq11ProjectGreeterTest.png" id="19953e0c" width="616" height="350"></figure>            <p id="1dc653aa">同时，文件<span class="filepath">GreeterTest.java</span>在编辑器中打开。</p>            <figure><img alt="arq12EditorGreeterTest" title="arq12EditorGreeterTest" src="/help/img/idea/2019.3/arq12EditorGreeterTest.png" id="74ae1ac3" width="616" height="475"></figure>            <p id="eb405278">测试类的初始内容由相应的模板定义。您可以在“ <span class="control">设置/首选项”</span>对话框的<span class="control">“</span> <span class="control">文件和代码模板”</span>页面的<span class="control">“</span> <span class="control">代码”</span>选项卡上编辑该模板（ <kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-secondary_macos="⌘," data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_emacs="⌃⌥S" data-secondary_intellij_idea_classic="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘," data-secondary_visual_studio="⌥F7">Ctrl+Alt+S</kbd> <span class="menupath" data-skip-index="skip">|编辑器文件和代码模板</span> ）。</p>        </li></ol>    <h2 id="cbfbbe6a">完成GreteerTest类的代码</h2>    <p id="5556595c">这是处于最终状态的测试类的代码：</p>    <div class="code-block" data-lang="java">包com.example.hello;导入org.jboss.arquillian.container.test.api。部署；导入org.jboss.arquillian.junit。Arquillian;导入org.jboss.shrinkwrap.api。收缩包装;导入org.jboss.shrinkwrap.api.asset。EmptyAsset;导入org.jboss.shrinkwrap.api.spec。JavaArchive;导入org.junit。断言;导入org.junit。测试;导入org.junit.runner。RunWith;导入javax.inject。注入;导入静态org.junit。断言。*; @RunWith（Arquillian.class）公共类GreeterTest {@Deployment公共静态JavaArchive createDeployment（）{返回ShrinkWrap.create（JavaArchive.class）.addClass（Greeter.class）.addAsManifestResource（EmptyAsset实例，“ beans.xml”）； } @注入Greeter问候； @Test public void greet（）引发异常{String name =“ Arquillian”; Assert.assertEquals（“您好，Arquillian！“，greeter.createGreeting（name））; greeter.greet（System.out，name）;}}</div>    <ol class="list _decimal"><li class="list__item" id="43726de5"><p>插入适当的<code class="code">import</code>声明<code class="code">@Inject</code> ，类型<code class="code">@Inj</code>然后选择<span class="control">@Inject（javax.inject）</span> 。</p><figure><img alt="arq13EditorGreeterTestInject" title="arq13EditorGreeterTestInject" src="/help/img/idea/2019.3/arq13EditorGreeterTestInject.png" id="66d762af" width="616" height="523"></figure><p></p></li><li class="list__item" id="53f39c0e"><p>通过复制添加其余代码。</p><figure><img alt="arq14EditorGreeterTestComplete" title="arq14EditorGreeterTestComplete" src="/help/img/idea/2019.3/arq14EditorGreeterTestComplete.png" id="e10bc87b" width="616" height="617"></figure><p></p></li></ol>    <h2 id="5fec1e4e">创建用于运行测试的运行配置</h2>    <ol class="list _decimal"><li class="list__item" id="921be6a4"><p>至左侧<code class="code">public class GreeterTest</code> ，点击<img alt="runTwoGreenArrows" title="runTwoGreenArrows" src="/help/img/idea/2019.3/runTwoGreenArrows.png" id="2538a3c1" width="10" height="10" class="inline-icon-10">然后选择<span class="control">Run'GreeterTest'</span> 。</p><figure><img alt="arq15EditorRunGreeterTest" title="arq15EditorRunGreeterTest" src="/help/img/idea/2019.3/arq15EditorRunGreeterTest.png" id="33052fbc" width="616" height="176"></figure><p></p></li><li class="list__item" id="b5973684"><p>在打开的“ <span class="control">编辑配置”</span>对话框中，单击“ <span class="control">配置”</span> 。</p><figure><img alt="arq16EditConfiguration" title="arq16EditConfiguration" src="/help/img/idea/2019.3/arq16EditConfiguration.png" id="87d3372c" width="616" height="188"></figure><p></p></li><li class="list__item" id="78274b92"><p>在“ <span class="control">Arquillian容器”</span>对话框中，单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="图标一般添加"> ，指向<span class="control">Embedded</span>并选择<span class="control">GlassFish Embedded 3.1</span> 。（我们将从在嵌入式容器中运行测试开始。）</p><figure><img alt="arq17Arquillian容器" title="arq17Arquillian容器" src="/help/img/idea/2019.3/arq17ArquillianContainers.png" id="86ecc4c2" width="616" height="326"></figure><p></p></li><li class="list__item" id="3eb93e76"><p>在“ <span class="control">编辑配置”</span>对话框中，选择“ <span class="control">GlassFish Embedded 3.1”</span> 。</p><figure><img alt="arq18EditConfiguration" title="arq18EditConfiguration" src="/help/img/idea/2019.3/arq18EditConfiguration.png" id="345de4d9" width="616" height="188"></figure><p></p></li></ol>    <h2 id="90fcc340">在嵌入式容器中运行测试</h2>    <ol class="list _decimal"><li class="list__item" id="e2f61870">在“ <span class="control">编辑配置”</span>对话框中，单击<span class="control">“运行”</span> 。<p id="28da372f">将打开“ <span class="control">运行”</span>工具窗口，一段时间后，将显示测试结果。</p>            <figure><img alt="arq19TestResult" title="arq19TestResult" src="/help/img/idea/2019.3/arq19TestResult.png" id="55c9c783" width="616" height="246"></figure></li><li class="list__item" id="83803ea8"><p>通过单击关闭<span class="control">运行</span>工具窗口<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.close@2x.png" width="16" alt="图标操作关闭"> 。</p></li></ol>    <h2 id="dde1be8f">编辑运行配置：添加托管容器</h2>    <p id="8bc21e2f">现在，让我们更改运行配置，以便可以将其用于在托管容器中运行测试。</p>    <ol class="list _decimal"><li class="list__item" id="2d6c7e3d"><p>单击运行配置选择器，然后选择“ <span class="control">编辑配置”</span> 。</p><figure><img alt="arq20EditConfigurations" title="arq20EditConfigurations" src="/help/img/idea/2019.3/arq20EditConfigurations.png" id="c60398cc" width="343" height="134"></figure><p></p></li><li class="list__item" id="f68d4da5"><p>在“ <span class="control">运行/调试配置”</span>对话框中，单击“ <span class="control">配置”</span> 。</p><figure><img alt="arq21EditConfigurationsDialog" title="arq21EditConfigurationsDialog" src="/help/img/idea/2019.3/arq21EditConfigurationsDialog.png" id="cc9c2d11" width="616" height="199"></figure><p></p></li><li class="list__item" id="da59dd9e"><p>在“ <span class="control">Arquillian容器”</span>对话框中，单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加按钮">然后选择<span class="control">手动容器配置</span> 。</p></li><li class="list__item" id="d5ebd6d3"><p>更改配置的名称（例如，更改为<span class="emphasis">GlassFish Managed</span> ）。</p></li><li class="list__item" id="0e822128"><p>在<span class="control">依赖项下</span> ，单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加按钮">然后选择<span class="control">添加maven依赖项</span> 。</p></li><li class="list__item" id="0983565d">在“ <span class="control">从Maven存储库下载库”</span>对话框中，键入<code class="code">arquillian-glassfish-managed-3.1</code>然后点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.find@2x.png" width="16" alt="图标动作查找"> 。然后选择<span class="control">org.jboss.arquillian.container：arquillian-glassfish-managed-3.1：1.0.0。列表中的CR4</span> 。<p id="85fea590">选择<span class="control">下载到</span>复选框，然后单击<span class="control">确定</span> 。</p>            <figure><img alt="arq22DownloadLibraryFromMaven" title="arq22DownloadLibraryFromMaven" src="/help/img/idea/2019.3/arq22DownloadLibraryFromMaven.png" id="0a3ce044" width="615" height="221"></figure>            <p id="c1174f0d">在这一步，您的<span class="control">Arquillian Containers</span>对话框应如下所示：</p>            <figure><img alt="arq23Arquillian容器" title="arq23Arquillian容器" src="/help/img/idea/2019.3/arq23ArquillianContainers.png" id="9286e316" width="616" height="341"></figure>            <p id="da001ad5">单击<span class="control">确定</span> 。</p></li><li class="list__item" id="cb4c3aec"><p>在“ <span class="control">运行/调试配置”</span>对话框中，选择“ <span class="control">GlassFish Managed”</span> ，然后单击“ <span class="control">确定”</span> 。</p><figure><img alt="arq24RunConfigurationsDialog" title="arq24RunConfigurationsDialog" src="/help/img/idea/2019.3/arq24RunConfigurationsDialog.png" id="c696f13c" width="616" height="228"></figure><p></p></li></ol>    <h2 id="b778cfda">创建arquillian.xml配置文件</h2>    <p id="f5be9497">为了能够在托管容器中运行Arquillian测试，容器适配器需要知道容器的位置。因此，让我们使用必要的信息创建<span class="filepath">arquillian.xml</span>配置文件。</p>    <ol class="list _decimal"><li class="list__item" id="881655c3"><p>在项目根文件夹中，创建文件夹<span class="filepath">test-resources</span> 。</p></li><li class="list__item" id="7b68422b"><p>右键单击新文件夹，指向“ <span class="control">标记目录为”，</span>然后选择“ <span class="control">测试资源根”</span> 。</p></li><li class="list__item" id="78dc78cd"><p>在test-resources文件夹中，创建一个新文件<span class="filepath">arquillian.xml</span> 。</p><figure><img alt="arq25ProjectArquillianXml" title="arq25ProjectArquillianXml" src="/help/img/idea/2019.3/arq25ProjectArquillianXml.png" id="dfce512f" width="616" height="392"></figure><p></p></li><li class="list__item" id="2fd60d1f">            <p id="cb37a937">将以下内容复制到文件中：</p>            <div class="code-block" data-lang="markup">
<!--?xml version="1.0" ?=""-->
<arquillian xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://jboss.org/schema/arquillian" xsi:schemalocation="http://jboss.org/schema/arquillian
    http://jboss.org/schema/arquillian/arquillian_1_0.xsd">

    <container qualifier="glassfish" default="true">
        <configuration>
            <property name="glassFishHome">C：\ GlassFish \ glassfish4</property>
        </configuration>
    </container>

</arquillian>
            <!--?xml--></div>            <figure><img alt="arq26EditorArquillianXml" title="arq26EditorArquillianXml" src="/help/img/idea/2019.3/arq26EditorArquillianXml.png" id="60607af9" width="616" height="298"></figure>            <p id="765deb94">使用您实际的GlassFish Server安装文件夹路径代替<span class="filepath">C：\ GlassFish \ glassfish4</span> 。</p>        </li></ol>    <h2 id="0324d7be">在托管容器中运行测试</h2>    <ol class="list _decimal"><li class="list__item" id="999a689e">在运行配置选择器的右侧，单击<img class="inline-icon-13" src="/help/img/idea/2019.3/icons.toolwindows.toolWindowRun@2x.png" width="13" alt="图标工具Windows工具WindowRun"> 。<figure><img alt="arq27GlassFishManagedRun" title="arq27GlassFishManagedRun" src="/help/img/idea/2019.3/arq27GlassFishManagedRun.png" id="da7a246d" width="299" height="29"></figure>            <p id="49d78fea">将打开“ <span class="control">运行</span>工具”窗口，并在此处显示测试结果。</p>            <figure><img alt="arq28TestResult" title="arq28TestResult" src="/help/img/idea/2019.3/arq28TestResult.png" id="61b49d33" width="616" height="249"></figure>        </li><li class="list__item" id="453365c8"><p>关闭工具视窗<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.close@2x.png" width="16" alt="图标操作关闭"> 。</p></li></ol>    <h2 id="98886416">修改arquillian.xml</h2>    <p id="55bd4d59">有时，您需要将测试部署到已经运行的容器中。在这种情况下，您可以稍微更改容器配置文件，然后继续使用托管容器适配器。</p>    <p id="4a4240a2">将以下内容添加到<span class="filepath">arquillian.xml中</span> ：</p>    <div class="code-block" data-lang="markup">
        <property name="allowConnectingToRunningServer">真正</property>
    </div>    <figure><img alt="arq29EditorArquillianXml" title="arq29EditorArquillianXml" src="/help/img/idea/2019.3/arq29EditorArquillianXml.png" id="b8854cfb" width="616" height="318"></figure>    <h2 id="bde67e5f">运行测试：部署到正在运行的服务器</h2>    <ol class="list _decimal"><li class="list__item" id="68a71675">启动GlassFish Server：选择<span class="control">GlassFish</span> ，然后单击<img class="inline-icon-13" src="/help/img/idea/2019.3/icons.toolwindows.toolWindowRun@2x.png" width="13" alt="图标工具Windows工具WindowRun"> 。<figure><img alt="arq30SelectGlassFish" title="arq30SelectGlassFish" src="/help/img/idea/2019.3/arq30SelectGlassFish.png" id="b0ff1f3e" width="318" height="134"></figure>            <p id="ec71efb2">启动服务器后，您将在“ <span class="control">运行”</span>工具窗口中看到类似的内容。</p>            <figure><img alt="arq31GlassFishStarted" title="arq31GlassFishStarted" src="/help/img/idea/2019.3/arq31GlassFishStarted.png" id="e397b103" width="616" height="249"></figure></li><li class="list__item" id="e808bd93">选择“ <span class="control">GlassFish管理的：GreeterTest”</span> ，然后单击“ <img class="inline-icon-13" src="/help/img/idea/2019.3/icons.toolwindows.toolWindowRun@2x.png" width="13" alt="图标工具Windows工具WindowRun"> 。<figure><img alt="arq32SelectGreeterTest" title="arq32SelectGreeterTest" src="/help/img/idea/2019.3/arq32SelectGreeterTest.png" id="d55338e6" width="318" height="134"></figure>            <p id="8906c999">一段时间后，测试结果显示在“ <span class="control">运行”</span>工具窗口中。</p>            <figure><img alt="arq33TestResult" title="arq33TestResult" src="/help/img/idea/2019.3/arq33TestResult.png" id="2766ebbc" width="616" height="249"></figure>        </li></ol>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="android.html">Android教程</a> <a class="navigation-links__next" href="aspectj.html">AspectJ</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>