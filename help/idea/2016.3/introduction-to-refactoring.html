<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta class="swiftype" name="product" data-type="string" content="/idea/2016.3/"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><meta charset="UTF-8"><meta name="robots" content="noindex"><title>IntelliJ IDEA 2016.3 Help :: Introduction to Refactoring</title><link rel="stylesheet" href="/help/app/app.css"></head><body data-id="Tutorial_Introduction_to_Refactoring"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-swiftype-index="false"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search IntelliJ IDEA Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header"><div class="container"><h3>IntelliJ IDEA 2016.3 Help</h3><div class="shortcuts-switcher" data-swiftype-index="false"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="default" selected>Windows/Linux Default</option><option data-group="primary" value="default_for_gnome">GNOME</option><option data-group="primary" value="default_for_kde">KDE</option><option data-group="primary" value="default_for_xwin">XWin</option><option data-group="primary" value="emacs">Emacs</option><option data-group="primary" value="jbuilder">JBuilder</option><option data-group="primary" value="visual_studio">Visual Studio</option><option data-group="primary" value="netbeans_6.5">NetBeans 6.5</option><option data-group="primary" value="eclipse">Eclipse</option><option data-group="secondary" value="mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="mac_os_x">Mac OS X</option><option data-group="secondary" value="eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="intellij_idea_classic_os_x">IntelliJ IDEA Classic (Mac OS X)</option><option data-group="secondary" value="xcode">Xcode</option><option data-group="secondary" value="visual_studio">Visual Studio</option><option data-group="secondary" value="resharper">ReSharper</option><option data-group="secondary" value="resharper_osx">ReSharper (Mac OS X)</option><option data-group="secondary" value="emacs">Emacs (Mac OS X)</option></select></div><div class="panel-trigger" data-swiftype-index="false"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="true"><div class="navigation-links _top"><a class="navigation-links__prev" href="meet-intellij-idea.html">Meet IntelliJ IDEA</a><a class="navigation-links__next" href="replace-conditional-logic-with-strategy-pattern.html">Replace Conditional Logic with Strategy Pattern</a></div><h1>Introduction to Refactoring</h1><a name="d404548e3"></a><p>
        On this page:
    </p><ul><li class="list__item"><a href="#d404548e8">Introduction</a></li><li class="list__item"><a href="#d404548e38">Renaming</a></li><li class="list__item"><a href="#d404548e185">Extracting</a></li><li class="list__item"><a href="#d404548e644">Deleting</a></li><li class="list__item"><a href="#d404548e791">Conclusion</a></li></ul><a name="d404548e8"></a><h2>Introduction</h2>
        <a name="d404548e10"></a><p>
            IntelliJ IDEA offers a lot of
            <a name="d404548e12"></a><a href="refactoring-source-code.html"><span>automatic refactoring capabilities</span></a>, but as developers it's not enough to know
            how to perform them, we need to understand what these refactorings are, when we would want to apply
            them, and any possible downsides or things to consider before using them.
        </p>
        <a name="d404548e16"></a><p>
            <a name="d404548e18"></a><a href="http://refactoring.com/" data-external="true"><span>Refactoring, as defined by Martin Fowler</span></a>, "...is a disciplined
            technique for restructuring an existing body of code, altering its internal structure without changing
            its external behavior". Hence it's important before performing any refactoring in production code to have
            comprehensive <a name="d404548e21"></a><a href="code-coverage.html"><span>test coverage</span></a> to prove that you
            haven't inadvertently changed the behaviour.
        </p>
        <a name="d404548e25"></a><p>
            The goal of this tutorial is to introduce those who may be new to the idea of
            refactoring, particularly automatic refactoring, to IntelliJ IDEA's capabilities and show when you might want
            to apply three of the basic types of refactoring:
            <a name="d404548e27"></a><a href="rename-refactorings.html"><span>Renaming</span></a>,
            <a name="d404548e30"></a><a href="extract-refactorings.html"><span>Extracting</span></a>
            and <a name="d404548e33"></a><a href="safe-delete.html"><span>Deleting</span></a>.
        </p>
    <a name="d404548e38"></a><h2>Renaming</h2>
        <a name="d404548e40"></a><p><a name="d404548e41"></a><a href="http://refactoring.com/catalog/renameMethod.html" data-external="true"><span>Renaming</span></a>
            may seem like a trivial refactoring, but renaming via a simple find-and-replace often means
            unrelated items with the same name are unintentionally changed. Using IntelliJ IDEA's
            <a name="d404548e44"></a><a href="rename-refactorings.html"><span>rename refactorings</span></a>
            minimises these errors.
        </p>
        <a name="d404548e48"></a><a name="dynaProc0"></a><section class="procedure-steps"><h2>Why Rename?</h2><p id="d404548e50">Renaming is one of the simplest things you can do to improve the readability of
                the code. When a class, method or variable name doesn't match what it appears to do, it can cause a
                lot of confusion. Some reasons why you might want to rename something:
            </p><ol class=".list _decimal"><li class="list__item">The name is not descriptive enough</li><li class="list__item">The class/method/variable name doesn't match the what it really is</li><li class="list__item">Something new has been introduced, requiring existing code to have more specific name</li></ol></section>
        <a name="d404548e63"></a><a name="dynaProc1"></a><section class="procedure-steps"><h2>Renaming as you code</h2><p id="d404548e65">
                <a name="d404548e67"></a><p>
                    Imagine you come across the following code as you're implementing some feature or fixing some bug
                    <a name="d404548e69"></a><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="n">server</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Server</span><span class="o">(</span><span class="n">path</span><span class="o">,</span> <span class="n">port</span><span class="o">,</span> <span class="n">endpoint</span><span class="o">);</span>
<span class="n">server</span><span class="o">.</span><span class="na">init</span><span class="o">();</span>
<span class="n">server</span><span class="o">.</span><span class="na">run</span><span class="o">();</span></code></div>
                    Let's assume that we want to:
                    <ul class="list _bullet"><li class="list__item"><a name="d404548e74"></a>Rename <code class="code" data-lang="Java">endpoint</code>, a field, to describe what sort of endpoint it is. </li><li class="list__item"><a name="d404548e80"></a>Rename <code class="code" data-lang="Java">init()</code>, a method on <code class="code" data-lang="Java">Server</code>, to something that more
                            accurately describes that method.
                        </li><li class="list__item"><a name="d404548e89"></a>Rename <code class="code" data-lang="Java">Server</code>, a class, to something more specific.</li></ul>
                </p>
            </p><ol class=".list _decimal"><li class="list__item">
                <a name="d404548e100"></a><p>To rename the <code class="code" data-lang="Java">endpoint</code> field, place your cursor on the word endpoint and press
                    <kbd data-default="Shift+F6" data-default_for_gnome="Shift+F6" data-default_for_kde="Shift+F6" data-default_for_xwin="Shift+F6" data-emacs="Shift+F6" data-jbuilder="Shift+F6" data-visual_studio="Shift+F6" data-netbeans_6.5="N/A" data-eclipse="Shift+Alt+R" data-mac_os_x_10.5_="&#x21E7;F6" data-mac_os_x="&#x21E7;F6" data-eclipse_mac_os_x="&#x21E7;F6" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Shift+F6</kbd>. IntelliJ IDEA will pop up a list of suggestions, based on the class
                    name and other aspects. In this case, the name of the parameter this field is used in is also
                    suggested.
                </p>
                <figure><img alt="Rename the field" title="Rename the field" src="/help/img/idea/2016.3/ij_rename_field.png" width="675" height="189"></figure>.
                <a name="d404548e110"></a><p>Select one of these options or type your own. If the field has a getter, IntelliJ IDEA will ask if you
                    want to rename this as well.
                </p>
                <figure><img alt="Do you want to rename the getter?" title="Do you want to rename the getter?" src="/help/img/idea/2016.3/ij_rename_getter.png" width="410" height="148"></figure>.
                <a name="d404548e115"></a><p>You'll notice that all uses of this field are changed to the new name, and if you've
                    chosen to rename the getter, other classes in your project will be updated to use the new name. See
                    the next step for more information on method renaming.
                </p>
            </li><li class="list__item">
                <a name="d404548e121"></a><p>To rename the method, the process is the same: place your cursor on <code class="code" data-lang="Java">init</code> and press
                    <kbd data-default="Shift+F6" data-default_for_gnome="Shift+F6" data-default_for_kde="Shift+F6" data-default_for_xwin="Shift+F6" data-emacs="Shift+F6" data-jbuilder="Shift+F6" data-visual_studio="Shift+F6" data-netbeans_6.5="N/A" data-eclipse="Shift+Alt+R" data-mac_os_x_10.5_="&#x21E7;F6" data-mac_os_x="&#x21E7;F6" data-eclipse_mac_os_x="&#x21E7;F6" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Shift+F6</kbd>. Here you'll have fewer suggestions, so type the new name:
                </p>
                <figure><img alt="Rename the method" title="Rename the method" src="/help/img/idea/2016.3/ij_rename_method.png" width="602" height="175"></figure>
                <a name="d404548e131"></a><p>As well as renaming the method, this renames all calls of the method and all overridden/implemented
                    methods in subclasses. IntelliJ IDEA can also rename non-code uses of the name too, which is useful if
                    you have XML configuration or other non-Java files which refer to classes or methods. You can
                    configure what gets renamed if you press
                    <kbd data-default="Shift+F6" data-default_for_gnome="Shift+F6" data-default_for_kde="Shift+F6" data-default_for_xwin="Shift+F6" data-emacs="Shift+F6" data-jbuilder="Shift+F6" data-visual_studio="Shift+F6" data-netbeans_6.5="N/A" data-eclipse="Shift+Alt+R" data-mac_os_x_10.5_="&#x21E7;F6" data-mac_os_x="&#x21E7;F6" data-eclipse_mac_os_x="&#x21E7;F6" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Shift+F6</kbd>
                    a second time to bring up
                    the rename dialog
                </p>
                <figure><img alt="More rename settings" title="More rename settings" src="/help/img/idea/2016.3/ij_rename_dialog.png" width="642" height="153"></figure>
                <a name="d404548e138"></a><p>If the rename will apply to more than just code, IntelliJ IDEA will preview the refactoring for you, so
                    you can select which changes you want to make. Often in these cases you may choose not to rename
                    occurrences in comments, especially if the original method name was a common word like
                    <code class="code" data-lang="Java">name</code>.
                </p>
                <figure><img alt="Preview the rename" title="Preview the rename" src="/help/img/idea/2016.3/ij_rename_method_more_details.png" width="883" height="316"></figure>
                <a name="d404548e147"></a><p>If you don't want to make some of these changes, press
                    <kbd data-default="Backspace" data-default_for_gnome="Backspace" data-default_for_kde="Backspace" data-default_for_xwin="Backspace" data-emacs="Backspace" data-jbuilder="Backspace" data-visual_studio="Backspace" data-netbeans_6.5="N/A" data-eclipse="Backspace" data-mac_os_x_10.5_="&#x232B;" data-mac_os_x="&#x232B;" data-eclipse_mac_os_x="&#x232B;" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Backspace</kbd> on the usages you do not want to change.
                </p>
            </li><li class="list__item">
                <a name="d404548e155"></a><p>Renaming a class is similar, but can also be performed via the
                    <a name="d404548e157"></a><a href="project-tool-window.html"><span>Project tool window</span></a>. In this case, because we've discovered we want to
                    rename the class where we use it, we're going to use <kbd data-default="Shift+F6" data-default_for_gnome="Shift+F6" data-default_for_kde="Shift+F6" data-default_for_xwin="Shift+F6" data-emacs="Shift+F6" data-jbuilder="Shift+F6" data-visual_studio="Shift+F6" data-netbeans_6.5="N/A" data-eclipse="Shift+Alt+R" data-mac_os_x_10.5_="&#x21E7;F6" data-mac_os_x="&#x21E7;F6" data-eclipse_mac_os_x="&#x21E7;F6" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Shift+F6</kbd>
                    on the class name in the code.
                </p>
                <figure><img alt="Rename the class" title="Rename the class" src="/help/img/idea/2016.3/ij_rename_class.png" width="658" height="174"></figure>
                <a name="d404548e165"></a><p>Of course, any code that uses this class will also be renamed, but you also have the option of
                    renaming variables, inheritors and other parts of the code so they're aligned with the new name.
                    Again, these options can be set by pressing <kbd data-default="Shift+F6" data-default_for_gnome="Shift+F6" data-default_for_kde="Shift+F6" data-default_for_xwin="Shift+F6" data-emacs="Shift+F6" data-jbuilder="Shift+F6" data-visual_studio="Shift+F6" data-netbeans_6.5="N/A" data-eclipse="Shift+Alt+R" data-mac_os_x_10.5_="&#x21E7;F6" data-mac_os_x="&#x21E7;F6" data-eclipse_mac_os_x="&#x21E7;F6" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Shift+F6</kbd> a second time.
                </p>
            </li></ol></section>
        <a name="d404548e172"></a><a name="dynaProc2"></a><section class="procedure-steps"><h2>Impact of renaming</h2><p id="d404548e174">
                <a name="d404548e176"></a><p>Renaming local variables or private methods can be done fairly safely on-the-fly. For
                    example, while you're working on a piece of functionality that touches this area of code, you can
                    perform this refactoring knowing the impact is limited in scope.
                </p>
                <a name="d404548e179"></a><p>Renaming classes or public methods could potentially impact a lot of
                    files. If this is the case, this sort of refactoring should, at the very least, be in its own
                    separate commit so the changes are clearly separated from any changed or additional functionality
                    that you may have been working on at the time.
                </p>
            </p></section>
    <a name="d404548e185"></a><h2>Extracting</h2>
        <a name="d404548e187"></a><p>IntelliJ IDEA's <a name="d404548e189"></a><a href="extract-refactorings.html"><span>extract refactorings</span></a> give developers the power to reshape
            their code when it becomes clear the current design, whether on a small or large scale, is no longer fit
            for purpose.
        </p>
        <a name="d404548e193"></a><a name="dynaProc3"></a><section class="procedure-steps"><h2>Extract variable</h2><p id="d404548e195">
                <a name="d404548e197"></a><p>
                    <a name="d404548e199"></a><a href="http://refactoring.com/catalog/extractVariable.html" data-external="true"><span>Extract variable</span></a>
                    is a low impact change to make your code
                    <a name="d404548e202"></a><a href="https://en.wikipedia.org/wiki/Self-documenting_code" data-external="true"><span>code self-documenting</span></a>. It can
                    also be used to reduce code duplication.
                </p>
                <a name="d404548e206"></a><p>
                    Imagine you come across the following code
                    <a name="d404548e208"></a><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">static</span> <span class="n">String</span> <span class="nf">getUsernameFromMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;screen_name\&quot;:\&quot;&quot;</span><span class="o">)</span> <span class="o">+</span> <span class="mi">15</span><span class="o">,</span>
    <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;&quot;</span><span class="o">,</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;screen_name\&quot;:\&quot;&quot;</span><span class="o">)</span> <span class="o">+</span> <span class="mi">15</span><span class="o">));</span>
<span class="o">}</span></code></div>
                    We can use extract variable to improve the readability of this code by:
                    <ul class="list _bullet"><li class="list__item"><a name="d404548e213"></a>Removing the duplication of
                            <code class="code" data-lang="Java">message.indexOf("\"screen_name\":\"") + 15)</code>
                        </li><li class="list__item"><a name="d404548e219"></a>Introducing variables to describe what each of the
                            <code class="code" data-lang="Java">indexOf</code>
                            calls represent
                        </li><li class="list__item"><a name="d404548e225"></a>Removing the magic number 15</li></ul>
                </p>
            </p><ol class=".list _decimal"><li class="list__item">
                <a name="d404548e233"></a><p>First, let's reduce the duplication and introduce a variable that describes what this operation is
                    doing. Place your cursor anywhere in the expression
                    <code class="code" data-lang="Java">message.indexOf("\"screen_name\":\"") + 15)</code>
                    and
                    press<kbd data-default="Ctrl+Alt+V" data-default_for_gnome="Ctrl+Alt+V" data-default_for_kde="Shift+Alt+V" data-default_for_xwin="Ctrl+Alt+V" data-emacs="Ctrl+Alt+V" data-jbuilder="Ctrl+Alt+V" data-visual_studio="Ctrl+Alt+V" data-netbeans_6.5="N/A" data-eclipse="Shift+Alt+L" data-mac_os_x_10.5_="&#x2325;&#x2318;V" data-mac_os_x="&#x2325;&#x2318;V" data-eclipse_mac_os_x="&#x2325;&#x2318;L" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Ctrl+Alt+V</kbd>. IntelliJ IDEA will suggest a context for this refactoring,
                    and you want to choose the one that encapsulates this expression:
                </p>
                <figure><img alt="Select the expression to extract" title="Select the expression to extract" src="/help/img/idea/2016.3/ij_extract_variable_1.png" width="833" height="154"></figure>
                <a name="d404548e243"></a><p>Next, if IntelliJ IDEA has detected this expression occurs more than once, you have the option to
                    replace all the occurrences or just the one you selected.
                </p>
                <figure><img alt="Select replace all occurrences" title="Select replace all occurrences" src="/help/img/idea/2016.3/ij_extract_variable_2.png" width="820" height="105"></figure>
                <a name="d404548e248"></a><p>Once the variable is extracted, IntelliJ IDEA suggests possible names based on things like the
                    parameter the expression was used in.
                </p>
                <figure><img alt="Choose or type name" title="Choose or type name" src="/help/img/idea/2016.3/ij_extract_variable_3_select_name.png" width="610" height="146"></figure>
                <a name="d404548e254"></a><p>We're going to use our own name,
                    <code class="code" data-lang="Java">indexOfFieldValue</code>, to describe what this really represents. Note that you can
                    decide whether or not you wish this variable to be final.
                </p>
            </li><li class="list__item">
                <a name="d404548e263"></a><p>Next we're going to introduce a variable for the String value. There's two reasons for this:
                    firstly, to document what the String value represents, and secondly because it will help us to
                    remove the magic number.
                </p>
                <a name="d404548e266"></a><p>Place your cursor somewhere on
                    <code class="code" data-lang="Java">screen_name</code>
                    and press<kbd data-default="Ctrl+Alt+V" data-default_for_gnome="Ctrl+Alt+V" data-default_for_kde="Shift+Alt+V" data-default_for_xwin="Ctrl+Alt+V" data-emacs="Ctrl+Alt+V" data-jbuilder="Ctrl+Alt+V" data-visual_studio="Ctrl+Alt+V" data-netbeans_6.5="N/A" data-eclipse="Shift+Alt+L" data-mac_os_x_10.5_="&#x2325;&#x2318;V" data-mac_os_x="&#x2325;&#x2318;V" data-eclipse_mac_os_x="&#x2325;&#x2318;L" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Ctrl+Alt+V</kbd>.
                </p>
                <figure><img alt="Select String value" title="Select String value" src="/help/img/idea/2016.3/ij_extract_variable_4.png" width="688" height="131"></figure>
                <a name="d404548e276"></a><p>We're going to give this a more meaningful name,
                    <code class="code" data-lang="Java">fieldName</code>.
                </p>
                <figure><img alt="Give the variable a name" title="Give the variable a name" src="/help/img/idea/2016.3/ij_extract_variable_5.png" width="608" height="139"></figure>
            </li><li class="list__item">
                <a name="d404548e287"></a><p>Now, we're going to create a variable for the other expression used as a parameter to
                    <code class="code" data-lang="Java">substring()</code>, using the same process, and we'll call this
                    <code class="code" data-lang="Java">indexOfEndOfFieldValue</code>.
                </p>
                <figure><img alt="Extract variable" title="Extract variable" src="/help/img/idea/2016.3/ij_extract_variable_6.png" width="575" height="199"></figure>
            </li><li class="list__item">Finally, we can remove the magic number, as this is just the length of the field name. The
                final code looks like:
                <a name="d404548e301"></a><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">static</span> <span class="n">String</span> <span class="nf">getUsernameFromMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">String</span> <span class="n">fieldName</span> <span class="o">=</span> <span class="s">&quot;\&quot;screen_name\&quot;:\&quot;&quot;</span><span class="o">;</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">fieldName</span><span class="o">)</span> <span class="o">+</span> <span class="n">fieldName</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfEndOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;&quot;</span><span class="o">,</span> <span class="n">indexOfFieldValue</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">indexOfFieldValue</span><span class="o">,</span> <span class="n">indexOfEndOfFieldValue</span><span class="o">);</span>
<span class="o">}</span></code></div>
                It's longer than the original, but it's much more descriptive, which is particularly important in
                code like this where it's not clear what each expression represents. The choice of applying
                <code class="code" data-lang="Java">final</code>
                or not is up to you, and depends upon your coding standards.

            </li></ol></section>
        <a name="d404548e309"></a><a name="dynaProc4"></a><section class="procedure-steps"><h2>Extract parameter</h2><p id="d404548e311">
                <a name="d404548e313"></a><p>
                    <a name="d404548e315"></a><a href="extract-parameter-in-java.html"><span>Extracting</span></a>
                    or
                    <a name="d404548e318"></a><a href="http://refactoring.com/catalog/addParameter.html" data-external="true"><span>adding a parameter</span></a>
                    allows a developer to change a method so that it's easier to use. You may want to change the
                    parameters, for example by passing in some values from an Object rather than the object itself, or
                    you may want to introduce a value from the method body as a parameter to allow the method to be used
                    in more places. We're going to look at an example of the latter.
                </p>
                <a name="d404548e322"></a><p>For this example, we're going to use the same code as the last example, after it has been
                    refactored, and extend it slightly to show another method in the same class:</p>
                    <a name="d404548e325"></a><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">static</span> <span class="n">String</span> <span class="nf">getTextFromMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">String</span> <span class="n">fieldName</span> <span class="o">=</span> <span class="s">&quot;\&quot;text\&quot;:\&quot;&quot;</span><span class="o">;</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">fieldName</span><span class="o">)</span> <span class="o">+</span> <span class="n">fieldName</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfEndOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;&quot;</span><span class="o">,</span> <span class="n">indexOfFieldValue</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">indexOfFieldValue</span><span class="o">,</span> <span class="n">indexOfEndOfFieldValue</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">static</span> <span class="n">String</span> <span class="nf">getUsernameFromMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">String</span> <span class="n">fieldName</span> <span class="o">=</span> <span class="s">&quot;\&quot;screen_name\&quot;:\&quot;&quot;</span><span class="o">;</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">fieldName</span><span class="o">)</span> <span class="o">+</span> <span class="n">fieldName</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfEndOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;&quot;</span><span class="o">,</span> <span class="n">indexOfFieldValue</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">indexOfFieldValue</span><span class="o">,</span> <span class="n">indexOfEndOfFieldValue</span><span class="o">);</span>
<span class="o">}</span></code></div>
                    <a name="d404548e328"></a><p>Our goal is to remove the duplication of code that we see in these two methods. To do that, we're going to:</p>

                    <ul class="list _bullet"><li class="list__item"><a name="d404548e333"></a>Change <code class="code" data-lang="Java">fieldName</code> into a parameter so that we can make the
                            <code class="code" data-lang="Java">getUsernameFromMessage</code> method apply to any field.
                        </li><li class="list__item"><a name="d404548e342"></a>Rename <code class="code" data-lang="Java">getUsernameFromMessage</code> to something which represents its more general nature</li><li class="list__item"><a name="d404548e348"></a>Remove the duplication of code in <code class="code" data-lang="Java">getTextFromMessage</code>.</li></ul>
            </p><ol class=".list _decimal"><li class="list__item">
                <a name="d404548e358"></a><p>Place your cursor on
                    <code class="code" data-lang="Java">fieldName</code>
                    and press
                    <kbd data-default="Ctrl+Alt+P" data-default_for_gnome="Ctrl+Alt+P" data-default_for_kde="Ctrl+Alt+P" data-default_for_xwin="Ctrl+Alt+P" data-emacs="Ctrl+Alt+P" data-jbuilder="N/A" data-visual_studio="Ctrl+Alt+P" data-netbeans_6.5="N/A" data-eclipse="Ctrl+Alt+P" data-mac_os_x_10.5_="&#x2325;&#x2318;P" data-mac_os_x="&#x2325;&#x2318;P" data-eclipse_mac_os_x="&#x2325;&#x2318;P" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Ctrl+Alt+P</kbd>
                </p>
                <figure><img alt="Extract parameter" title="Extract parameter" src="/help/img/idea/2016.3/ij_extract_parameter_1.png" width="822" height="176"></figure>
                <a name="d404548e368"></a><p>As with the other refactorings, you can type a new name for the parameter if you wish. IntelliJ IDEA
                    also previews the updated method signature. Press
                    <kbd data-default="Enter" data-default_for_gnome="Enter" data-default_for_kde="Enter" data-default_for_xwin="Enter" data-emacs="Enter" data-jbuilder="Enter" data-visual_studio="Enter" data-netbeans_6.5="N/A" data-eclipse="Enter" data-mac_os_x_10.5_="⏎" data-mac_os_x="⏎" data-eclipse_mac_os_x="⏎" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Enter</kbd>
                    to approve the changes.
                </p>
                <figure><img alt="Any problems with the new method signature" title="Any problems with the new method signature" src="/help/img/idea/2016.3/ij_extract_parameter_2_conflict.png" width="567" height="509"></figure>
                <a name="d404548e375"></a><p>This particular issue tells us the method is being used as a method reference, and this change will
                    result in the method reference being converted into a lambda expression. This message could be a sign that this is
                    not the refactoring you wish to perform.  If this is the case, the next example shows an approach we could
                    take using Extract Method.  However, for this example we'll assume we're happy with the
                    consequences of introducing a
                    new parameter, so we'll just select
                    <a name="d404548e377"></a><span class="keyword">Continue</span>.
                    </p>
                <a name="d404548e382"></a><p>Next, IntelliJ IDEA will detect any code which can now be replaced with a
                    call to the new method signature.
                </p>

                <figure><img alt="Now this code is a duplicate of the updated method" title="Now this code is a duplicate of the updated method" src="/help/img/idea/2016.3/ij_extract_parameter_3_duplicate.png" width="721" height="303"></figure>
                <a name="d404548e387"></a><p>If you select
                    <a name="d404548e389"></a><span class="keyword">Replace</span>
                    in this case, all the duplicate code will be replaced, and IntelliJ IDEA will select the appropriate
                    value to pass in for the new parameter.
                </p>
            </li><li class="list__item">
                <a name="d404548e396"></a><p>At this point, the original method
                    <code class="code" data-lang="Java">getUsernameFromMessage</code>
                    is more general than it was, so we should rename it. We put
                    our cursor on the name and use<kbd data-default="Shift+F6" data-default_for_gnome="Shift+F6" data-default_for_kde="Shift+F6" data-default_for_xwin="Shift+F6" data-emacs="Shift+F6" data-jbuilder="Shift+F6" data-visual_studio="Shift+F6" data-netbeans_6.5="N/A" data-eclipse="Shift+Alt+R" data-mac_os_x_10.5_="&#x21E7;F6" data-mac_os_x="&#x21E7;F6" data-eclipse_mac_os_x="&#x21E7;F6" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Shift+F6</kbd>, as shown in the previous section.
                </p>
                <figure><img alt="Rename the updated method" title="Rename the updated method" src="/help/img/idea/2016.3/ij_extract_parameter_4_rename_method.png" width="707" height="188"></figure>
                </li><li class="list__item">
                <a name="d404548e409"></a><p>We can simplify the code further.  <a name="d404548e411"></a><a href="inline.html"><span>Inline</span></a> is the
                    inverse of extract, and in the code we have here it may be appropriate to
                    <a name="d404548e414"></a><a href="http://refactoring.com/catalog/inlineTemp.html" data-external="true"><span>inline our temporary variable</span></a>, as
                    the variable name gives us little more than having the value passed directly into
                    the method.  Or, given that getTextFromMessage really is a simple delegation to
                    <code class="code" data-lang="Java">getValueForField</code>, we can use inline
                    to remove this method completely.
                </p>
                <a name="d404548e421"></a><p>To inline, place your cursor on the
                    <code class="code" data-lang="Java">getTextFromMessage</code>
                    variable and press
                    <kbd data-default="Ctrl+Alt+N" data-default_for_gnome="Ctrl+Alt+N" data-default_for_kde="Ctrl+Alt+N" data-default_for_xwin="Ctrl+Alt+N" data-emacs="Ctrl+Alt+N" data-jbuilder="Ctrl+Alt+N" data-visual_studio="Ctrl+Alt+N" data-netbeans_6.5="N/A" data-eclipse="Shift+Alt+I" data-mac_os_x_10.5_="&#x2325;&#x2318;N" data-mac_os_x="&#x2325;&#x2318;N" data-eclipse_mac_os_x="&#x2325;&#x2318;I" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Ctrl+Alt+N</kbd>
                </p>
                <figure><img alt="Inline unnecessary method" title="Inline unnecessary method" src="/help/img/idea/2016.3/ij_extract_parameter_5_inline.png" width="707" height="257"></figure>

                </li><li class="list__item">
                <a name="d404548e434"></a><p>Now our final code looks like:</p>
                <a name="d404548e437"></a><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">static</span> <span class="n">String</span> <span class="nf">getValueForField</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">,</span> <span class="n">String</span> <span class="n">fieldName</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">fieldName</span><span class="o">)</span> <span class="o">+</span> <span class="n">fieldName</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfEndOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;&quot;</span><span class="o">,</span> <span class="n">indexOfFieldValue</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">indexOfFieldValue</span><span class="o">,</span> <span class="n">indexOfEndOfFieldValue</span><span class="o">);</span>
<span class="o">}</span></code></div>
                <a name="d404548e440"></a><p>Our code that was calling the original getUsernameFromMessage method was:</p>
                <code class="code" data-lang="Java">Parser::getUsernameFromMessage</code>
                <a name="d404548e446"></a><p>and is now</p>
                <code class="code" data-lang="Java">(message) -&gt; Parser.getValueForField(message, "\"screen_name\":\"")</code>

                <a name="d404548e453"></a><p>Our code that was calling the original getTextFromMessage method was:</p>
                <code class="code" data-lang="Java">String[] wordsInMessage = Parser.getTextFromMessage(message).split("\\s");</code>
                <a name="d404548e459"></a><p>and is now</p>
                <code class="code" data-lang="Java">String[] wordsInMessage = Parser.getValueForField(message, "\"text\":\"").split("\\s");</code>
            </li></ol><p id="d404548e467" class="procIntro">
                <a name="d404548e469"></a><p>Note that the way we applied this refactoring forces all callers to pass in the field name and a) spreads the use of a
                    String value around your code and b) may introduce duplication of one or more of these String values.  This may be
                    appropriate for your code, especially if the String duplication is dealt with, or the method is not frequently used.
                    However, if this is not a trade off you wish to make for reducing the duplication of code, see
                    the next chapter for an
                    alternative approach.
                </p>
                <a name="d404548e472"></a><p>Extract parameter can be very powerful, so it's worth reading the
                    <a name="d404548e474"></a><a href="extract-parameter-in-java.html"><span>more detailed help page</span></a>.
                </p>
            </p></section>
        <a name="d404548e480"></a><a name="dynaProc5"></a><section class="procedure-steps"><h2>Extract method</h2><p id="d404548e482">
                <a name="d404548e484"></a><p>One way to aid code readability is to have it in small, understandable sections.
                    <a name="d404548e486"></a><a href="http://refactoring.com/catalog/extractMethod.html" data-external="true"><span>Extract method</span></a>
                    allows a developer to do just that, moving segments of code into their own, descriptively-named,
                method when appropriate.</p>
                <a name="d404548e490"></a><p>
                    Some developers may find themselves writing long methods that perform the operation they
                    have in mind, and when they've completed (and tested) the functionality, look at the code to see where it can be
                    refactored and simplified and break up these longer methods. Or, as a developer comes across code when they're
                    implementing a new feature, they realise extracting some code into its own method lets them reuse existing
                    functionality.
                </p>
                <aside class="tip sideblock">When IntelliJ IDEA detects duplicate code this is a very good candidate for creating a new
                    method that can be called by all of the places that has the duplicate code.
                </aside>
                <a name="d404548e496"></a><p>We're going to look at the same example as in the previous section, but take a slightly different approach to before.</p>
                <a name="d404548e499"></a><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">static</span> <span class="n">String</span> <span class="nf">getTextFromMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">String</span> <span class="n">fieldName</span> <span class="o">=</span> <span class="s">&quot;\&quot;text\&quot;:\&quot;&quot;</span><span class="o">;</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">fieldName</span><span class="o">)</span> <span class="o">+</span> <span class="n">fieldName</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfEndOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;&quot;</span><span class="o">,</span> <span class="n">indexOfFieldValue</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">indexOfFieldValue</span><span class="o">,</span> <span class="n">indexOfEndOfFieldValue</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">static</span> <span class="n">String</span> <span class="nf">getUsernameFromMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">String</span> <span class="n">fieldName</span> <span class="o">=</span> <span class="s">&quot;\&quot;screen_name\&quot;:\&quot;&quot;</span><span class="o">;</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">fieldName</span><span class="o">)</span> <span class="o">+</span> <span class="n">fieldName</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfEndOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;&quot;</span><span class="o">,</span> <span class="n">indexOfFieldValue</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">indexOfFieldValue</span><span class="o">,</span> <span class="n">indexOfEndOfFieldValue</span><span class="o">);</span>
<span class="o">}</span></code></div>
                <a name="d404548e503"></a><p>As we saw earlier, the previous refactoring had some trade-offs: a method reference needed to be converted to a lambda
                    expression, and all calling code needed to know the field name that was required. We may choose to remove the code
                    duplication between the two methods in a different way:</p>
                <ul class="list _bullet"><li class="list__item"><a name="d404548e508"></a>Extracting the common code into its own method.</li><li class="list__item"><a name="d404548e511"></a>Inlining variables to simplify the remaining code.</li></ul>
            </p><ol class=".list _decimal"><li class="list__item">
                <a name="d404548e518"></a><p>First, highlight the code that's common between the two methods:</p>
                <figure><img alt="Highlight an instance of the duplicate code" title="Highlight an instance of the duplicate code" src="/help/img/idea/2016.3/ij_extract_method_1_duplicate_code.png" width="731" height="232"></figure>
                <a name="d404548e523"></a><p>Pressing <kbd data-default="Ctrl+Alt+M" data-default_for_gnome="Ctrl+Alt+M" data-default_for_kde="Ctrl+Alt+M" data-default_for_xwin="Ctrl+Alt+M" data-emacs="Ctrl+Alt+M" data-jbuilder="Ctrl+Shift+E" data-visual_studio="Ctrl+Alt+M" data-netbeans_6.5="N/A" data-eclipse="Shift+Alt+M" data-mac_os_x_10.5_="&#x2325;&#x2318;M" data-mac_os_x="&#x2325;&#x2318;M" data-eclipse_mac_os_x="&#x2325;&#x2318;M" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Ctrl+Alt+M</kbd> will bring up the
                    <a name="d404548e527"></a><a href="extract-method-dialog.html"><span>Extract Method Dialog</span></a>.</p>
                <figure><img alt="Extract method dialog" title="Extract method dialog" src="/help/img/idea/2016.3/ij_extract_method_2_dialog.png" width="524" height="444"></figure>
                <a name="d404548e533"></a><p>Type the name of the new method,
                    <code class="code" data-lang="Java">getValueForField</code>, and check the parameter names and order.
                    In this case, we're going to swap the order of the parameters because we prefer the
                    <code class="code" data-lang="Java">fieldName</code> parameter to be closer to the name of the method. This will depend upon your code style and
                    team preferences, you might like to read the name and parameters aloud to see if it makes sense as a statement in
                    natural language.
                </p>
                <figure><img alt="Final settings in extract method dialog" title="Final settings in extract method dialog" src="/help/img/idea/2016.3/ij_extract_method_3_dialog_complete.png" width="524" height="444"></figure>
                <a name="d404548e545"></a><p>When you press
                    <a name="d404548e547"></a><span class="keyword">OK</span>, IntelliJ IDEA will detect code that can be replaced with a call to this new method, and will offer to
                    refactor that too.  We're going to select
                    <a name="d404548e550"></a><span class="keyword">Yes</span>.
                </p>
                <figure><img alt="Refactor duplicate code" title="Refactor duplicate code" src="/help/img/idea/2016.3/ij_extract_method_4_detect_duplicates.png" width="716" height="370"></figure>
            </li><li class="list__item">
                <a name="d404548e559"></a><p>At this point, our
                    <code class="code" data-lang="Java">getTextFromMessage</code>
                    and
                    <code class="code" data-lang="Java">getUsernameFromMessage</code>
                    methods are two lines of simple code, and here it makes
                    sense to <a name="d404548e567"></a><a href="inline.html"><span>inline</span></a> the fieldName variable, as the method name is descriptive enough to
                    remove the <a name="d404548e570"></a><a href="http://refactoring.com/catalog/inlineTemp.html" data-external="true"><span>temporary variable</span></a>. Press <kbd data-default="Ctrl+Alt+N" data-default_for_gnome="Ctrl+Alt+N" data-default_for_kde="Ctrl+Alt+N" data-default_for_xwin="Ctrl+Alt+N" data-emacs="Ctrl+Alt+N" data-jbuilder="Ctrl+Alt+N" data-visual_studio="Ctrl+Alt+N" data-netbeans_6.5="N/A" data-eclipse="Shift+Alt+I" data-mac_os_x_10.5_="&#x2325;&#x2318;N" data-mac_os_x="&#x2325;&#x2318;N" data-eclipse_mac_os_x="&#x2325;&#x2318;I" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Ctrl+Alt+N</kbd> on
                    <code class="code" data-lang="Java">fieldName</code>
                    and select
                    <a name="d404548e579"></a><span class="keyword">Refactor</span>.
                </p>
                <figure><img alt="Inline unnecessary variable" title="Inline unnecessary variable" src="/help/img/idea/2016.3/ij_extract_method_5_inline.png" width="624" height="265"></figure>
            </li><li class="list__item">
                <a name="d404548e588"></a><p>As a last touch, you may want all similar methods grouped together. Depending upon your settings,
                    IntelliJ IDEA may have placed the new method directly under the method you were in when you chose to
                    extract the method, as in our case here. To put the helper methods next to each other, put your
                    cursor on the
                    <code class="code" data-lang="Java">getValueForField</code>
                    method name and press
                    <kbd data-default="Ctrl+Shift+Down" data-default_for_gnome="Ctrl+Shift+Down" data-default_for_kde="Ctrl+Shift+Down" data-default_for_xwin="Ctrl+Shift+Down" data-emacs="Ctrl+Shift+Down" data-jbuilder="Ctrl+Shift+Down" data-visual_studio="Ctrl+Shift+Down" data-netbeans_6.5="N/A" data-eclipse="Alt+Down" data-mac_os_x_10.5_="&#x21E7;&#x2318;&#x2193;" data-mac_os_x="&#x21E7;&#x2318;&#x2193;" data-eclipse_mac_os_x="&#x2325;&#x2193;" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Ctrl+Shift+Down</kbd>. This will place your new method,
                    <code class="code" data-lang="Java">getValueForField</code>, under the
                    existing getUsernameFromMessage method.
                </p>
                <a name="d404548e599"></a><p>Our final code looks like:</p>
                <a name="d404548e602"></a><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">static</span> <span class="n">String</span> <span class="nf">getTextFromMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">getValueForField</span><span class="o">(</span><span class="s">&quot;\&quot;text\&quot;:\&quot;&quot;</span><span class="o">,</span> <span class="n">message</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">static</span> <span class="n">String</span> <span class="nf">getUsernameFromMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">getValueForField</span><span class="o">(</span><span class="s">&quot;\&quot;screen_name\&quot;:\&quot;&quot;</span><span class="o">,</span> <span class="n">message</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">static</span> <span class="n">String</span> <span class="nf">getValueForField</span><span class="o">(</span><span class="n">String</span> <span class="n">fieldName</span><span class="o">,</span> <span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">fieldName</span><span class="o">)</span> <span class="o">+</span> <span class="n">fieldName</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfEndOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;&quot;</span><span class="o">,</span> <span class="n">indexOfFieldValue</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">indexOfFieldValue</span><span class="o">,</span> <span class="n">indexOfEndOfFieldValue</span><span class="o">);</span>
<span class="o">}</span></code></div>
                <a name="d404548e605"></a><p>Now we have two very specific helper methods which get the message body and the username, and a more general method
                    that can be used to get the value of any field from the message.  Additional helper methods can be
                    added when there are other fields which are frequently needed.</p>
            </li></ol><p id="d404548e609" class="procIntro">
                <a name="d404548e611"></a><p>Note that the Extract Parameter and Extract Method examples start with the same code, but end with
                    code that looks very different. This is not just because we used a different refactoring, but
                    because we made different decisions - in the first example, we chose to remove duplication
                    completely, and move some of the decision-making into the caller of the method. In the second
                    example, we chose to provide an API which hid the details of the the field name behind small
                    helper methods but still provide the more general method as well. We also could have mixed and
                    matched the approaches, the refactoring we chose to begin with may have lead us in a particular
                    direction but we can dictate our final destination. We should remember the goal of our
                    refactoring (in this case, reduce duplication) and understand the trade offs we're making when
                    we choose one direction over another, for example deciding whether we want calling code to know
                    which field name they're asking for.
                </p>
            </p></section>
        <a name="d404548e616"></a><a name="dynaProc6"></a><section class="procedure-steps"><h2>Impact of extracting</h2><p id="d404548e618">
                <a name="d404548e620"></a><p>
                    The good news is that you can undo an extract fairly easily. Not only by selecting
                    <kbd data-default="Ctrl+Z" data-default_for_gnome="Ctrl+Z" data-default_for_kde="Ctrl+Z" data-default_for_xwin="Ctrl+Z" data-emacs="Ctrl+Shift+Minus" data-jbuilder="Ctrl+Z" data-visual_studio="Ctrl+Z" data-netbeans_6.5="N/A" data-eclipse="Ctrl+Z" data-mac_os_x_10.5_="&#x2318;Z" data-mac_os_x="&#x2318;Z" data-eclipse_mac_os_x="&#x2318;Z" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Ctrl+Z</kbd>, of course, but by
                    <a name="d404548e624"></a><a href="inline.html"><span>inlining</span></a>
                    the created method so that the code is back where it used to be.
                </p>
                <a name="d404548e628"></a><p>The
                    <a name="d404548e630"></a><a href="extract-refactorings.html"><span>extract refactorings</span></a>
                    we've mentioned here are used regularly by experienced developers to
                    shape the code as it evolves, and it would not be uncommon to use them to some greater or lesser extent every time
                    the code is touched. Some of the ones that were not covered, like
                    <a name="d404548e633"></a><a href="extract-interface.html"><span>extract interface</span></a> and
                    <a name="d404548e636"></a><a href="extract-superclass.html"><span>extract superclass</span></a>, may have a wider impact on the overall design, and more care should be taken with
                    them.
                </p>
            </p></section>
    <a name="d404548e644"></a><h2>Deleting</h2>
        <a name="d404548e646"></a><p>Sometimes when you've refactored code in several steps, you can end up with code that is no longer used,
            or ideally should not be used. As the goal of refactoring is simplification, you should always aim to
            remove unused code where you can - regardless of any impact (or not) unused code has on the performance
            of your application, unused code definitely takes a toll on developers working with and trying to
            understand the application.
        </p>
        <a name="d404548e649"></a><a name="dynaProc7"></a><section class="procedure-steps"><h2>Safe delete</h2><p id="d404548e651">
                <a name="d404548e653"></a><p>IntelliJ IDEA lets you
                    <a name="d404548e655"></a><a href="safe-delete.html"><span>safe delete</span></a>
                    unused code fragments or whole files, informing you if it's
                    safe to delete the code, and giving you the option to preview the changes before you make them. The
                    fastest way to identify and deal with unused code is to make sure the relevant inspections are
                    enabled, which they usually are by default:
                </p>
                <figure><img alt="Inspections for finding unused code" title="Inspections for finding unused code" src="/help/img/idea/2016.3/ij_safe_delete_1_inspections.png" width="1003" height="671"></figure>
                <a name="d404548e661"></a><p>Let's continue the example of our previous refactoring. Assuming we ended up with this code:</p>
                <a name="d404548e664"></a><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">static</span> <span class="n">String</span> <span class="nf">getUsernameFromMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">getValueForField</span><span class="o">(</span><span class="s">&quot;\&quot;screen_name\&quot;:\&quot;&quot;</span><span class="o">,</span> <span class="n">message</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">static</span> <span class="n">String</span> <span class="nf">getValueForField</span><span class="o">(</span><span class="n">String</span> <span class="n">fieldName</span><span class="o">,</span> <span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="n">fieldName</span><span class="o">)</span> <span class="o">+</span> <span class="n">fieldName</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    <span class="kd">final</span> <span class="kt">int</span> <span class="n">indexOfEndOfFieldValue</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">&quot;\&quot;&quot;</span><span class="o">,</span> <span class="n">indexOfFieldValue</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">indexOfFieldValue</span><span class="o">,</span> <span class="n">indexOfEndOfFieldValue</span><span class="o">);</span>
<span class="o">}</span></code></div>
                <a name="d404548e667"></a><p>It's possible that some time later, when we come back to this code, the
                    <code class="code" data-lang="Java">getUsernameFromMessage</code> method is no longer used - maybe it's no longer required, or
                    maybe people are comfortable calling
                    <code class="code" data-lang="Java">getValueForField</code>
                    with the relevant parameter.  So assuming we're comfortable with these reasons, we can go ahead
                    and remove this method.
                </p>
            </p><ol class=".list _decimal"><li class="list__item">If the unused declaration inspection is turned on, the method name will be in grey to
                represent that it is unused.
                <figure><img alt="Unused method is safe to delete" title="Unused method is safe to delete" src="/help/img/idea/2016.3/ij_safe_delete_2_unused.png" width="710" height="159"></figure>
            </li><li class="list__item">
                Place the cursor in
                <code class="code" data-lang="Java">getUsernameFromMessage</code>
                and press
                <kbd data-default="Alt+Enter" data-default_for_gnome="Alt+Enter" data-default_for_kde="Alt+Enter" data-default_for_xwin="Alt+Enter" data-emacs="Alt+Enter" data-jbuilder="Alt+Enter" data-visual_studio="Alt+Enter" data-netbeans_6.5="N/A" data-eclipse="Alt+Enter" data-mac_os_x_10.5_="&#x2325;⏎" data-mac_os_x="&#x2325;⏎" data-eclipse_mac_os_x="&#x2318;1" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Alt+Enter</kbd>.  This will give you the option to delete this method.
                <figure><img alt="Delete unused method" title="Delete unused method" src="/help/img/idea/2016.3/ij_safe_delete_3_delete.png" width="747" height="183"></figure>
            </li><li class="list__item">
                <a name="d404548e694"></a><p>Selecting safe delete will pop up the safe delete dialog, allowing you to search for usages of
                    this method.
                </p>
                <figure><img alt="Safe delete dialog" title="Safe delete dialog" src="/help/img/idea/2016.3/ij_safe_delete_4_dialog.png" width="506" height="125"></figure>
                <a name="d404548e699"></a><p>Press
                    <a name="d404548e701"></a><span class="keyword">OK</span>
                    to go ahead and do the search. In our case, it was completely safe to delete,
                    so the method is removed.
                </p>
            </li><li class="list__item">
                <a name="d404548e708"></a><p>
                    <a name="d404548e710"></a><p>It's possible that our "unused" method is not flagged as unused, as it may
                        be covered by a test. But if we still know that it's unused, or have checked it via
                        <kbd data-default="Alt+F7" data-default_for_gnome="Shift+Alt+7" data-default_for_kde="Shift+Alt+7" data-default_for_xwin="Alt+F7" data-emacs="Alt+F7" data-jbuilder="Alt+F7" data-visual_studio="Alt+Shift+F7" data-netbeans_6.5="N/A" data-eclipse="Ctrl+G" data-mac_os_x_10.5_="&#x2325;F7" data-mac_os_x="&#x2325;F7" data-eclipse_mac_os_x="&#x21E7;&#x2318;G" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Alt+F7</kbd>, we can still safely delete it.
                    </p>
                    <a name="d404548e715"></a><p>Place the cursor on the method name and
                        press
                        <kbd data-default="Alt+Delete" data-default_for_gnome="Alt+Delete" data-default_for_kde="Alt+Delete" data-default_for_xwin="Alt+Delete" data-emacs="N/A" data-jbuilder="Alt+Delete" data-visual_studio="Alt+Delete" data-netbeans_6.5="N/A" data-eclipse="Alt+Delete" data-mac_os_x_10.5_="&#x2318;&#x2326;" data-mac_os_x="&#x2318;&#x2326;" data-eclipse_mac_os_x="N/A" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Alt+Delete</kbd>. This will pop up the safe delete dialog as before, and this time
                        when
                        you press
                        <a name="d404548e719"></a><span class="keyword">OK</span>
                        IntelliJ IDEA will warn you that this method has usages
                    </p>
                </p>
                <figure><img alt="Usages found" title="Usages found" src="/help/img/idea/2016.3/ij_safe_delete_5_usages_dialog.png" width="524" height="489"></figure>
                <a name="d404548e726"></a><p>Press
                    <a name="d404548e728"></a><span class="keyword">View Usages</span>
                    to check what these are</p>
                <figure><img alt="See all code usages" title="See all code usages" src="/help/img/idea/2016.3/ij_safe_delete_6_usages.png" width="735" height="262"></figure>
            </li><li class="list__item">
                <a name="d404548e738"></a><p>Use the results panel to navigate to the usages by double-clicking on each usage. In our case,
                    we see there's a test that calls the method we want to delete.
                </p>
                <figure><img alt="Method is used in a test" title="Method is used in a test" src="/help/img/idea/2016.3/ij_safe_delete_7_test.png" width="623" height="109"></figure>
                <a name="d404548e743"></a><p>Since this test is there to ensure
                    the correctness of a method we no longer want, we can delete this test too. In the editor
                    window, press
                    <kbd data-default="Alt+Delete" data-default_for_gnome="Alt+Delete" data-default_for_kde="Alt+Delete" data-default_for_xwin="Alt+Delete" data-emacs="N/A" data-jbuilder="Alt+Delete" data-visual_studio="Alt+Delete" data-netbeans_6.5="N/A" data-eclipse="Alt+Delete" data-mac_os_x_10.5_="&#x2318;&#x2326;" data-mac_os_x="&#x2318;&#x2326;" data-eclipse_mac_os_x="N/A" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Alt+Delete</kbd>
                    on the test method name and say
                    <a name="d404548e747"></a><span class="keyword">OK</span>
                    in the Safe Delete dialog. The test method will be removed.
                </p>
            </li><li class="list__item"><a name="d404548e753"></a><p>Now we'll see in our Safe Delete Conflicts window that this code is no longer valid.</p>
                <figure><img alt="No more usages of the method" title="No more usages of the method" src="/help/img/idea/2016.3/ij_safe_delete_8_invalid.png" width="648" height="261"></figure>
                <a name="d404548e758"></a><p>
                Since
                this was our only usage of the method we originally wanted to delete, we can select the
                    <a name="d404548e760"></a><span class="keyword">Rerun Safe Delete</span>
                    button. This time when you press
                    <a name="d404548e763"></a><span class="keyword">OK</span> on the Safe Delete dialog, the
                    <code class="code" data-lang="Java">getUsernameFromMessage</code>
                    method will have been
                    removed.
                </p>
            </li></ol></section>
        <a name="d404548e772"></a><a name="dynaProc8"></a><section class="procedure-steps"><h2>Impact of deleting</h2><p id="d404548e774">
                <aside class="tip sideblock">If you find a public method that appears to be unused but does form part of a public API,
                    it should be covered by tests. The "unused" warning may not mean you should delete the method,
                    it's telling you this method should be tested.
                </aside>
                <a name="d404548e779"></a><p>IntelliJ's inspections can show you code that is unused, but if your code is going to be packaged as
                    a library for others to use, or exposes a public API in some other way, it's possible that some
                    public symbols may be marked as unused when in actual fact they are used by code that you do not
                    control. If public symbols appear to be unused, you should check if these are used by other systems
                    in some way.
                </p>
                <a name="d404548e782"></a><p>Unused parameters, local variables, and private fields are good candidates for deletion as it
                    should be easy to see that deleting them does not impact any functionality.
                </p>
                <a name="d404548e785"></a><p>Using safe delete to remove symbols, whether they were unused or not, lets you check before you
                    perform the refactoring that the areas impacted are the ones you expect, and gives you control
                    over the changes you wish to apply. However, still be aware of the caveat that public symbols
                    may be used by systems out of your control, so always exercise caution when deleting these.
                </p>
            </p></section>
    <a name="d404548e791"></a><h2>Conclusion</h2>
        <a name="d404548e793"></a><p>IntelliJ IDEA has a number of automatic refactorings available, all of which aim to let you, the
            developer, reshape your code in as low-impact way as possible. The aim is to make small, incremental
            changes, all the time keeping the code in a state that compiles. The power of the refactoring capabilities
            lies in chaining smaller changes together to move the code in the direction of some goal that you have in
            mind: reducing duplication, removing unnecessary code, striving for simplicity, improving readability, or
            some larger re-shaping of the design.
        </p>
        <a name="d404548e796"></a><p>Small, simple changes are possible, even desirable, while working on new features or bug fixing, but
            remember that larger changes may need to applied separately to differentiate between refactoring that
            should not impact existing functionality and functional changes.
        </p>
    <div class="last-modified" data-swiftype-index="false">Last modified: 21 March 2017 </div></article><div id="disqus_thread"></div></div></section></main></div><script></script><script src="/help/app/app.js"></script></body></html>