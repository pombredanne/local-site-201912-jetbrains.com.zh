<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta class="swiftype" name="product" data-type="string" content="/idea/2016.3/"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><meta charset="UTF-8"><meta name="robots" content="noindex"><title>IntelliJ IDEA 2016.3 Help :: @Contract Annotations</title><link rel="stylesheet" href="/help/app/app.css"></head><body data-id="_Contract_Annotations"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-swiftype-index="false"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search IntelliJ IDEA Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header"><div class="container"><h3>IntelliJ IDEA 2016.3 Help</h3><div class="shortcuts-switcher" data-swiftype-index="false"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="default" selected>Windows/Linux Default</option><option data-group="primary" value="default_for_gnome">GNOME</option><option data-group="primary" value="default_for_kde">KDE</option><option data-group="primary" value="default_for_xwin">XWin</option><option data-group="primary" value="emacs">Emacs</option><option data-group="primary" value="jbuilder">JBuilder</option><option data-group="primary" value="visual_studio">Visual Studio</option><option data-group="primary" value="netbeans_6.5">NetBeans 6.5</option><option data-group="primary" value="eclipse">Eclipse</option><option data-group="secondary" value="mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="mac_os_x">Mac OS X</option><option data-group="secondary" value="eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="intellij_idea_classic_os_x">IntelliJ IDEA Classic (Mac OS X)</option><option data-group="secondary" value="xcode">Xcode</option><option data-group="secondary" value="visual_studio">Visual Studio</option><option data-group="secondary" value="resharper">ReSharper</option><option data-group="secondary" value="resharper_osx">ReSharper (Mac OS X)</option><option data-group="secondary" value="emacs">Emacs (Mac OS X)</option></select></div><div class="panel-trigger" data-swiftype-index="false"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="false"><div class="navigation-links _top"><a class="navigation-links__prev" href="meet-intellij-idea.html">Meet IntelliJ IDEA</a><a class="navigation-links__next" href="parametersarenonnullbydefault-annotation.html">@ParametersAreNonnullByDefault Annotation</a></div><h1>@Contract Annotations</h1><a name="d526486e7"></a><p>On this page:</p><ul><li class="list__item"><a href="#d526486e12">Overview</a></li><li class="list__item"><a href="#d526486e92">Syntax of the @Contract annotation</a></li><li class="list__item"><a href="#d526486e166">Attributes of the @Contract annotation</a></li><li class="list__item"><a href="#d526486e199">Example</a></li><li class="list__item"><a href="#d526486e233">Useful hints</a></li></ul><a name="d526486e12"></a><h2>Overview</h2>
    <a name="d526486e14"></a><p>The <code class="code" data-lang="Java">@Contract</code> annotation brings more safety to your code by defining dependencies between method
        arguments and return values. This information provides smarter control flow analysis for the source code and
        helps avoid probable errors.</p>
    <a name="d526486e20"></a><p>The <code class="code" data-lang="Java">@Contract</code> annotation is a powerful and flexible tool that helps make your APIs safer.
       Furthermore, it's possible to use it not only for annotating your own code but also for other existing libraries.
    </p>
    <a name="d526486e26"></a><p>Once the annotations are configured for the project libraries, IntelliJ IDEA stores information about the annotations
        in simple XML files, to share with the team via version control.</p>
    <a name="d526486e29"></a><p>To enable the annotations in a project, add <code class="code" data-lang="Java">&lt;IntelliJ IDEA Home&gt;/lib/annotations.jar</code>
        to the classpath via <a name="d526486e34"></a><a href="project-structure-dialog.html"><span>Project Structure</span></a> dialog.</p>
    <a name="d526486e38"></a><p>The usage of <code class="code" data-lang="Java">@Contract</code> annotations can be clarified by the following examples:</p>
    <ul class="list _ul"><li class="list__item"><a name="d526486e47"></a><code class="code" data-lang="Java">@Contract("_, null -&gt; null")</code>  - method returns <code class="code" data-lang="Java">null</code> if its second argument is
            <code class="code" data-lang="Java">null</code>.</li><li class="list__item"><a name="d526486e58"></a><code class="code" data-lang="Java">@Contract("_, null -&gt; null; _, !null -&gt; !null")</code>  - method returns <code class="code" data-lang="Java">null</code> if its
            second argument is <code class="code" data-lang="Java">null</code>, and not-null otherwise.</li><li class="list__item"><a name="d526486e69"></a><code class="code" data-lang="Java">@Contract("true -&gt; fail")</code>  - a typical <code class="code" data-lang="Java">assertFalse()</code>  method which throws an
            exception if <code class="code" data-lang="Java">true</code> is passed to it.</li></ul>
    <a name="d526486e81"></a><p>To learn more about <code class="code" data-lang="Java">@Contract</code> annotations, refer to
      <a name="d526486e86"></a><a href="http://javadox.com/org.jetbrains/annotations/13.0/org/jetbrains/annotations/Contract.html" data-external="true"><span>this page</span></a>.
    </p>
<a name="d526486e92"></a><h2>Syntax of the @Contract annotation</h2>
            <a name="d526486e94"></a><p>The <code class="code" data-lang="Java">@Contract</code> annotation value has the following syntax:</p>
            <ul class="list _ul"><li class="list__item"><a name="d526486e102"></a><code class="code" data-lang="Java">contract ::= (clause ‘;’)* clause</code></li><li class="list__item"><a name="d526486e106"></a><code class="code" data-lang="Java">clause ::= args ‘-&gt;’ effect</code></li><li class="list__item"><a name="d526486e110"></a><code class="code" data-lang="Java">args ::= ((arg ‘,’)* arg )?</code></li><li class="list__item"><a name="d526486e114"></a><code class="code" data-lang="Java">arg ::= value-constraint</code></li><li class="list__item"><a name="d526486e118"></a><code class="code" data-lang="Java">value-constraint ::= ‘_’ | ‘null’ | ‘!null’ | ‘false’ | ‘true’</code></li><li class="list__item"><a name="d526486e123"></a><code class="code" data-lang="Java">effect ::= value-constraint | ‘fail’</code></li></ul>
            <a name="d526486e128"></a><p>The constraints here are:</p>
            <ul class="list _ul"><li class="list__item"><a name="d526486e133"></a><code class="code" data-lang="Java">_</code> – any value</li><li class="list__item"><a name="d526486e138"></a><code class="code" data-lang="Java">null</code> – null value</li><li class="list__item"><a name="d526486e143"></a><code class="code" data-lang="Java">!null</code> – a value statically proved to be not-null</li><li class="list__item"><a name="d526486e148"></a><code class="code" data-lang="Java">true</code> – true boolean value</li><li class="list__item"><a name="d526486e153"></a><code class="code" data-lang="Java">false</code> – false boolean value</li><li class="list__item"><a name="d526486e159"></a><code class="code" data-lang="Java">fail</code> – the method throws an exception, if the arguments satisfy argument constraints</li></ul>
        <a name="d526486e166"></a><h2>Attributes of the @Contract annotation</h2>
        <a name="d526486e168"></a><p>The <code class="code" data-lang="Java">@Contract</code> annotation has two attributes:
            <code class="code" data-lang="Java">value</code> and <code class="code" data-lang="Java">pure</code>.</p>
        <a name="d526486e180"></a><p>The <code class="code" data-lang="Java">value</code> attribute contains the contract clauses describing causal relations between call
            arguments and the returned value.</p>
        <a name="d526486e186"></a><p>The <code class="code" data-lang="Java">pure</code> attribute is intended for the methods that do not change the state
            of their objects, but just return a new value. This attribute may be used as a hint to the
            "Result of method call ignored" inspection to indicate that the method's return value should be used when
            called. It is is either <code class="code" data-lang="Java">false</code> (by default), or <code class="code" data-lang="Java">true</code>.
        </p>
    <a name="d526486e199"></a><h2>Example</h2>
         <a name="d526486e201"></a><p>Consider the following code:</p>
            <a name="d526486e204"></a><div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">printSorted</span><span class="o">(){</span>
            <span class="n">List</span> <span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">sorted</span> <span class="o">=</span> <span class="n">Quicksort</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">sorted</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Sorted array&quot;</span> <span class="o">+</span> <span class="n">sorted</span><span class="o">);</span>
            <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span> <span class="kd">extends</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">sort</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">list</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
            <span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">copy</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;(</span><span class="n">list</span><span class="o">);</span>
            <span class="n">sort</span><span class="o">(</span><span class="n">copy</span><span class="o">);</span>
            <span class="k">return</span> <span class="n">copy</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>
<span class="o">}</span></code></div>
            <a name="d526486e207"></a><p>IntelliJ IDEA doesn't complain, because it doesn't know that a null input yields a null output.</p>
            <a name="d526486e210"></a><p>Let's decorate the <code class="code" data-lang="Java">sort()</code> method with <code class="code" data-lang="Java">@Contract</code>
                annotation, specifying that null inputs yield null outputs.</p>
            
            <figure><img alt="contract_annotation" title="contract_annotation" src="/help/img/idea/2016.3/contract_annotation.png" width="476" height="211"></figure>
            <a name="d526486e224"></a><p>IntelliJ IDEA immediately recognizes that <code class="code" data-lang="Java">if</code> statement is extraneous, and reports
                about the condition that is always false:</p>
            <figure><img alt="false_condition_inspection" title="false_condition_inspection" src="/help/img/idea/2016.3/false_condition_inspection.png" width="391" height="101"></figure>


        <a name="d526486e233"></a><h2>Useful hints</h2>
        <a name="d526486e235"></a><p>IntelliJ IDEA suggests the two intention actions for the methods of the library classes: </p>
        <ul class="list _ul"><li class="list__item"><a name="d526486e240"></a><a name="d526486e241"></a><span class="control">Add method contract</span>/<a name="d526486e244"></a><span class="control">Edit method contract</span>:
                <figure><img alt="/help/img/idea/2016.3/contract_annotation_lib.png" title="/help/img/idea/2016.3/contract_annotation_lib.png" src="/help/img/idea/2016.3/contract_annotation_lib.png" width="464" height="278"></figure></li><li class="list__item"><a name="d526486e249"></a>Both intentions have the possibility to to set <code class="code" data-lang="Java">pure = true</code>:
                <figure><img alt="/help/img/idea/2016.3/contract_annotation_lib1.png" title="/help/img/idea/2016.3/contract_annotation_lib1.png" src="/help/img/idea/2016.3/contract_annotation_lib1.png" width="242" height="212"></figure>
        </li></ul>
    <div class="navigation-links _bottom"><a class="navigation-links__prev" href="meet-intellij-idea.html">Meet IntelliJ IDEA</a><a class="navigation-links__next" href="parametersarenonnullbydefault-annotation.html">@ParametersAreNonnullByDefault Annotation</a></div><section class="seealso"><div class="seealso__header"><h2>See Also</h2></div><div class="seealso__content">```
                <div class="seealso__col"><h3>Procedures:</h3><ul class="list"><li class="list__item"><a name="d526486e263"></a><a href="code-inspection.html"><span>Code Inspection</span></a></li><li class="list__item"><a name="d526486e267"></a><a href="intention-actions.html"><span>Intention Actions</span></a></li></ul></div><div class="seealso__col"><h3>External Links:</h3><ul class="list"><li class="list__item"><a name="d526486e274"></a><a href="http://javadox.com/org.jetbrains/annotations/13.0/org/jetbrains/annotations/Contract.html" data-external="true"><span>Contract Annotations</span></a></li></ul></div></div></section><div class="last-modified" data-swiftype-index="false">Last modified: 21 March 2017 </div></article><div id="disqus_thread"></div></div></section></main></div><script></script><script src="/help/app/app.js"></script></body></html>