<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta class="swiftype" name="product" data-type="string" content="/idea/2016.3/"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><meta charset="UTF-8"><meta name="robots" content="noindex"><title>IntelliJ IDEA 2016.3 Help :: Working with the Persistence Tool Window</title><link rel="stylesheet" href="/help/app/app.css"></head><body data-id="Working_with_the_Persistence_tool_window"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-swiftype-index="false"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search IntelliJ IDEA Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header"><div class="container"><h3>IntelliJ IDEA 2016.3 Help</h3><div class="shortcuts-switcher" data-swiftype-index="false"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="default" selected>Windows/Linux Default</option><option data-group="primary" value="default_for_gnome">GNOME</option><option data-group="primary" value="default_for_kde">KDE</option><option data-group="primary" value="default_for_xwin">XWin</option><option data-group="primary" value="emacs">Emacs</option><option data-group="primary" value="jbuilder">JBuilder</option><option data-group="primary" value="visual_studio">Visual Studio</option><option data-group="primary" value="netbeans_6.5">NetBeans 6.5</option><option data-group="primary" value="eclipse">Eclipse</option><option data-group="secondary" value="mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="mac_os_x">Mac OS X</option><option data-group="secondary" value="eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="intellij_idea_classic_os_x">IntelliJ IDEA Classic (Mac OS X)</option><option data-group="secondary" value="xcode">Xcode</option><option data-group="secondary" value="visual_studio">Visual Studio</option><option data-group="secondary" value="resharper">ReSharper</option><option data-group="secondary" value="resharper_osx">ReSharper (Mac OS X)</option><option data-group="secondary" value="emacs">Emacs (Mac OS X)</option></select></div><div class="panel-trigger" data-swiftype-index="false"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="true"><div class="navigation-links _top"><a class="navigation-links__prev" href="meet-intellij-idea.html">Meet IntelliJ IDEA</a><a class="navigation-links__next" href="kotlin.html">Kotlin</a></div><h1>Working with the Persistence Tool Window</h1><a name="d766e18"></a><p><a name="d766e19"></a><span class="emphasis">This feature is supported in the Ultimate edition only.</span></p><ul><li class="list__item"><a href="#d511234e17">Overview of the tool window</a></li><li class="list__item"><a href="#d511234e35">Opening the Persistence tool window</a></li><li class="list__item"><a href="#generate_entities_and_mappings">Generating managed entity classes and O/R mappings</a></li><li class="list__item"><a href="#new_command">Using the New command</a></li><li class="list__item"><a href="#open_diagram">Opening entity-relationship diagrams</a></li><li class="list__item"><a href="#assign_data_source">Associating persistence units and session factories with data sources</a></li><li class="list__item"><a href="#assign_naming_strategy">Associating a session factory with a NamingStrategy implementation class (Hibernate)</a></li><li class="list__item"><a href="#d511234e382">Starting a JPQL or an HQL console</a></li></ul><a name="d511234e10"></a><p>See also, <a name="d511234e12"></a><a href="persistence-tool-window.html"><span>Persistence Tool Window</span></a>.</p><a name="d511234e17"></a><h2>Overview of the tool window</h2>
        <a name="d511234e19"></a><p>
            The <a name="d511234e21"></a><span class="control">Persistence</span> tool window shows your JPA and Hibernate project items, and
            lets you create configuration files, &lt;persistence-unit&gt; and &lt;session-factory&gt; elements,
            persistent classes and fields (see <a href="#new_command">Using the New command</a>),
            navigate to related source code in the editor (<kbd data-default="F4" data-default_for_gnome="F4" data-default_for_kde="F4" data-default_for_xwin="F4" data-emacs="F4" data-jbuilder="N/A" data-visual_studio="F4" data-netbeans_6.5="N/A" data-eclipse="F12" data-mac_os_x_10.5_="&#x2318;&#x2193;" data-mac_os_x="F4" data-eclipse_mac_os_x="F3" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">F4</kbd>),
            open consoles and entity-relationship diagrams, and more.</p>
        <figure><img alt="/help/img/idea/2016.3/persistence_tool_window.png" title="/help/img/idea/2016.3/persistence_tool_window.png" src="/help/img/idea/2016.3/persistence_tool_window.png" width="519" height="262"></figure>
    <a name="d511234e35"></a><h2>Opening the Persistence tool window</h2>
        <a name="d511234e37"></a><p>
            For the tool window to be available, there must be a JPA- or Hibernate-enabled module in your project,
            i.e. a module with a JPA or Hibernate <a name="d511234e39"></a><a href="adding-support-for-frameworks-and-technologies.html#facets"><span>facet</span></a>.
            See <a name="d511234e42"></a><a href="enabling-jpa-support.html"><span>Enabling JPA Support</span></a> or <a name="d511234e44"></a><a href="enabling-hibernate-support.html"><span>Enabling Hibernate Support</span></a>.</p>
        <a name="d511234e47"></a><p>
            To open the tool window, do one of the following:</p>
        <ul class="list _ul"><li class="list__item"><a name="d511234e52"></a>
                Select <a name="d511234e54"></a><span class="menupath">View | Tool Windows | Persistence</span></li><li class="list__item"><a name="d511234e57"></a>
                If the tool window bars are currently shown,
                click the <a name="d511234e59"></a><span class="control">Persistence</span> button (normally located in the lower-left part of the workspace).</li><li class="list__item"><a name="d511234e63"></a>
                Point to <img alt="/help/img/idea/2016.3/show_tool_window_bars.png" title="/help/img/idea/2016.3/show_tool_window_bars.png" src="/help/img/idea/2016.3/show_tool_window_bars.png" width="14" height="14" class="inline-icon-14"> or <img alt="/help/img/idea/2016.3/show_hide_tool_window_bars.png" title="/help/img/idea/2016.3/show_hide_tool_window_bars.png" src="/help/img/idea/2016.3/show_hide_tool_window_bars.png" width="14" height="14" class="inline-icon-14">
                in the lower-left corner of the workspace and select <a name="d511234e69"></a><span class="control">Persistence</span>.</li></ul>
    <a name="generate_entities_and_mappings"></a><h2>Generating managed entity classes and O/R mappings</h2>
        <a name="d511234e76"></a><p>
            You can generate managed entity classes and object/relational mappings for them by importing:</p>
        <ul class="list _ul"><li class="list__item"><a name="d511234e81"></a>
                A database schema
                represented by a <a name="d511234e83"></a><a href="managing-data-sources.html#data_sources"><span>data source</span></a>.</li><li class="list__item"><a name="d511234e87"></a>
                An EJB <a name="d511234e89"></a><a href="adding-support-for-frameworks-and-technologies.html#facets"><span>facet</span></a> with an associated
                deployment descriptor file <code class="code" data-lang="Java">ejb-jar.xml</code>.
                The facet should be available in the same project.
                When retrieving the information from <code class="code" data-lang="Java">ejb-jar.xml</code>,
                only the <code class="code" data-lang="Java">&lt;entity&gt;</code> elements are processed.</li><li class="list__item"><a name="d511234e102"></a>
                Only for JPA: a Hibernate object/relational mapping file (<code class="code" data-lang="Java">.hbm.xml</code>).
                The file should be in the same project.</li></ul>
        <a name="d511234e108"></a><p>
            To perform the import:</p>
        <ol class="list _decimal"><li class="list__item"><a name="d511234e113"></a>
                Right-click a module, persistence unit or session factory,
                point to <a name="d511234e115"></a><span class="control">Generate Persistence Mapping</span> and select one of the following options:
                <ul class="list _ul"><li class="list__item"><a name="d511234e120"></a>
                        <a name="d511234e122"></a><span class="control">By Database Schema</span></li><li class="list__item"><a name="d511234e125"></a>
                        <a name="d511234e127"></a><span class="control">By Entity Beans</span></li><li class="list__item"><a name="d511234e130"></a>
                        <a name="d511234e132"></a><span class="control">By Hibernate Mappings</span>
                        (this option is not available for Hibernate-enabled modules and session factories)</li></ul></li><li class="list__item"><a name="d511234e136"></a>
                In the <a name="d511234e138"></a><a href="generate-persistence-mapping-import-dialogs.html"><span>dialog that opens</span></a>, specify the source of import and the output options.</li></ol>
        <a name="d511234e142"></a><p><a name="d511234e143"></a><b id="d511234e143">Example: Using a database as a source</b></p>
        <ol class="list _decimal"><li class="list__item"><a name="d511234e149"></a>
                Right-click a module, persistence unit or session factory,
                point to <a name="d511234e151"></a><span class="control">Generate Persistence Mapping</span> and
                select <a name="d511234e154"></a><span class="control">By Database Schema</span>.</li><li class="list__item"><a name="d511234e158"></a>
                In the <a name="d511234e160"></a><span class="control">Import Database Schema</span> dialog that opens:
                <ul class="list _ul"><li class="list__item"><a name="d511234e165"></a>
                        <a href="generate-persistence-mapping-import-dialogs.html#general">General Settings</a>.
                        Select the data source to be used as a source.
                        Specify the destination package for your entity classes,
                        and the prefix and the suffix for the class names.
 
                    </li><li class="list__item"><a name="d511234e172"></a>
                        <a href="generate-persistence-mapping-import-dialogs.html#db_mapping">Database Schema Mapping</a>.
                        Select the tables and columns to be mapped,
                        edit the class and field names (the <a name="d511234e176"></a><span class="control">Map As</span> column),
                        and specify the field types (the <a name="d511234e179"></a><span class="control">Mapped Type</span> column).
 
                    </li><li class="list__item"><a name="d511234e185"></a>
                        <a href="generate-persistence-mapping-import-dialogs.html#generation_settings">Generation Settings</a>.
                        Specify the target &lt;persistence-unit&gt; or &lt;session-factory&gt;, and
                        select the necessary output options.
 
                    </li></ul></li></ol>
    <a name="new_command"></a><h2>Using the New command</h2>
        <a name="d511234e195"></a><p>
            The <a name="d511234e197"></a><span class="control">New</span> command lets you
            create
            XML configuration files, &lt;persistence-unit&gt; and &lt;session-factory&gt; elements,
            entity classes, embeddables, mapped superclasses, entity listeners and
            object-relational mappings,
            persistent fields in entity classes along with getter and setter method for them, etc.</p>
        <a name="d511234e201"></a><p>
            The <a name="d511234e203"></a><span class="control">New</span> command can be accessed by using the context or the <a name="d511234e206"></a><span class="control">File</span> menu, or
            the keyboard shortcut <kbd data-default="Alt+Insert" data-default_for_gnome="Alt+Insert" data-default_for_kde="Alt+Insert" data-default_for_xwin="Alt+Insert" data-emacs="Alt+Insert" data-jbuilder="Alt+Insert" data-visual_studio="Alt+Insert" data-netbeans_6.5="N/A" data-eclipse="Alt+Insert" data-mac_os_x_10.5_="&#x2318;N" data-mac_os_x="&#x2303;N" data-eclipse_mac_os_x="&#x2318;N" data-intellij_idea_classic_os_x="N/A" data-xcode="N/A" data-resharper="N/A" data-resharper_osx="N/A">Alt+Insert</kbd>.
            The command options depend on which item is currently selected.</p>
        <a name="d511234e212"></a><p>
            <a name="d511234e214"></a><b id="d511234e214">Example: Creating an entity class</b></p>
        <ol class="list _decimal"><li class="list__item"><a name="d511234e219"></a>
                Right-click a persistence unit or session factory, point to <a name="d511234e221"></a><span class="control">New</span>, and
                select <a name="d511234e224"></a><span class="control">Entity</span>.</li><li class="list__item"><a name="d511234e228"></a>
                In the <a name="d511234e230"></a><span class="control">New Entity</span> dialog that opens, specify:
                <ul class="list _ul"><li class="list__item"><a name="d511234e235"></a>
                        <a name="d511234e237"></a><span class="control">Create class:</span> the name of the class.</li><li class="list__item"><a name="d511234e241"></a>
                        <a name="d511234e243"></a><span class="control">Destination package:</span> the package in which the class should be created.</li><li class="list__item"><a name="d511234e247"></a>
                        <a name="d511234e249"></a><span class="control">Target destination directory:</span>
                        the destination <a name="d511234e252"></a><a href="content-root.html"><span>source root folder</span></a>
                        (if there is more than one).</li></ul></li><li class="list__item"><a name="d511234e256"></a>
                For JPA, the <a name="d511234e258"></a><span class="control">Select Metadata Targets</span> dialog is shown.
                Select the files in which you want to add the mapping info for the class:
                <ul class="list _ul"><li class="list__item"><a name="d511234e263"></a>
                        Object/relational mapping XML files:
                        the info will be added as an <code class="code" data-lang="Java">&lt;entity&gt;</code> element within
                        <code class="code" data-lang="Java">&lt;entity-mappings&gt;</code>.</li><li class="list__item"><a name="d511234e272"></a>
                        The class file itself (.java): the <code class="code" data-lang="Java">@Entity</code> annotation will be added.</li></ul>
                <a name="d511234e278"></a><p>
                    IntelliJ IDEA will also add the info to <code class="code" data-lang="Java">persistence.xml</code> either as a <code class="code" data-lang="Java">&lt;class&gt;</code> or
                    a <code class="code" data-lang="Java">&lt;mapping-file&gt;</code> element.</p>
                <a name="d511234e290"></a><p>
                    For Hibernate, the <a name="d511234e292"></a><span class="control">Select Metadata Targets</span> dialog is not shown.
                    The <code class="code" data-lang="Java">@Entity</code> annotation is added to the class and
                    the <code class="code" data-lang="Java">&lt;mapping class=""&gt;</code> element is added to <code class="code" data-lang="Java">hibernate.cfg.xml</code>.</p></li></ol>
    <a name="open_diagram"></a><h2>Opening entity-relationship diagrams</h2>
        <a name="d511234e308"></a><p>
            To open an entity-relationship diagram,
            right-click a persistence unit, session factory, entity or field, and
            select <a name="d511234e310"></a><span class="control">ER Diagram</span> from the context menu.</p>
        <a name="d511234e314"></a><p>
            See also, <a name="d511234e316"></a><a href="diagram-toolbar-and-context-menu.html"><span>Diagram Toolbar and Context Menu</span></a> and <a name="d511234e318"></a><a href="general-techniques-of-using-diagrams.html"><span>General Techniques of Using Diagrams</span></a>.</p>
    <a name="assign_data_source"></a><h2>Associating persistence units and session factories with data sources</h2>
        <a name="d511234e324"></a><p>
            You can associate a &lt;persistence-unit&gt; or &lt;session-factory&gt; element with
            a <a name="d511234e326"></a><a href="managing-data-sources.html#data_sources"><span>data source</span></a>.
            If you do so:</p>
        <ul class="list _ul"><li class="list__item"><a name="d511234e332"></a>
                Your source code that references database tables will automatically be
                validated against the corresponding data source.</li><li class="list__item"><a name="d511234e335"></a>
                When using the JPA or Hibernate console,
                you won't need to additionally specify the database connection settings.
                The corresponding settings configured for the associated DB data source will automatically be used.</li></ul>
        <a name="d511234e338"></a><p>
            If the &lt;persistence-unit&gt; or &lt;session-factory&gt; elements are generated by importing a database schema,
            the association between the corresponding elements and the data source is
            set automatically.</p>
        <a name="d511234e341"></a><p>
            To associate a persistence unit or session factory with a data source:</p>
        <ol class="list _decimal"><li class="list__item"><a name="d511234e346"></a>
                Right-click a module, persistence unit, session factory or entity, and
                select <a name="d511234e348"></a><span class="control">Assign Data Sources</span>.</li><li class="list__item"><a name="d511234e352"></a>
                In the dialog that opens,
                click the necessary <a name="d511234e354"></a><span class="control">Data Source</span> cell and select the data source from the list.
                (To remove an association with a data source, select <a name="d511234e357"></a><span class="control">&lt;none&gt;</span>.)</li></ol>
    <a name="assign_naming_strategy"></a><h2>Associating a session factory with a NamingStrategy implementation class (Hibernate)</h2>
        <ol class="list _decimal"><li class="list__item"><a name="d511234e367"></a>
                Right-click a module, session factory or entity, and
                select <a name="d511234e369"></a><span class="control">Assign Naming Strategies</span>.</li><li class="list__item"><a name="d511234e373"></a>
                In the dialog that opens,
                click the necessary <a name="d511234e375"></a><span class="control">Naming Strategy</span> cell and
                select the implementation class from the list.</li></ol>

    <a name="d511234e382"></a><h2>Starting a JPQL or an HQL console</h2>
        <a name="d511234e384"></a><p>
            Right-click a persitence unit or session factory, or any node within it, and
            select <a name="d511234e386"></a><span class="control">Console</span>.</p>
        <a name="d511234e390"></a><p>
            See also:</p>
        <ul class="list _ul"><li class="list__item"><a name="d511234e395"></a><a name="d511234e396"></a><a href="working-with-the-jpa-console.html"><span>Working with the JPA console</span></a></li><li class="list__item"><a name="d511234e398"></a><a name="d511234e399"></a><a href="working-with-the-hibernate-console.html"><span>Working with the Hibernate console</span></a></li></ul>
    <div class="navigation-links _bottom"><a class="navigation-links__prev" href="meet-intellij-idea.html">Meet IntelliJ IDEA</a><a class="navigation-links__next" href="kotlin.html">Kotlin</a></div><section class="seealso"><div class="seealso__header"><h2>See Also</h2></div><div class="seealso__content">```
                <div class="seealso__col"><h3>Procedures:</h3><ul class="list"><li class="list__item"><a name="d511234e413"></a><a href="java-persistence-api-jpa.html"><span>Java Persistence API (JPA)</span></a></li><li class="list__item"><a name="d511234e415"></a><a href="hibernate.html"><span>Hibernate</span></a></li></ul></div><div class="seealso__col"><h3>Reference:</h3><ul class="list"><li class="list__item"><a name="d511234e408"></a><a href="persistence-tool-window.html"><span>Persistence Tool Window</span></a></li></ul></div></div></section><div class="last-modified" data-swiftype-index="false">Last modified: 21 March 2017 </div></article><div id="disqus_thread"></div></div></section></main></div><script></script><script src="/help/app/app.js"></script></body></html>