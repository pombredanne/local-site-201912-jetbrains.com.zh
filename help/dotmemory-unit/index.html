<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta class="swiftype" name="product" data-type="string" content="/dotmemory-unit"><meta charset="UTF-8"><title>Introduction - Help | dotMemory Unit</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="Introducton" data-disqus-id="Introduction_dmu"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper" data-swiftype-index="false"><section class="panel _nav" data-swiftype-index="false"><header class="panel__header" data-swiftype-index="false"><div class="container" data-swiftype-index="false"><form class="search-box" data-swiftype-index="false"><label for="search-box__input" class="search-box__label" data-swiftype-index="false"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search dotMemory Unit Help"></label><div class="search-box__clear" title="Clear" data-swiftype-index="false"></div></form></div></header><nav class="panel__content" data-swiftype-index="false"><div class="container _nav" data-swiftype-index="false"><menu class="nav-tree" data-swiftype-index="false"></menu></div><div class="container _footer panel__footer" data-swiftype-index="false"><p data-swiftype-index="false"><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main" data-swiftype-index="false"><header class="panel__header" data-swiftype-index="false"><div class="container" data-swiftype-index="false"><h3>dotMemory Unit 3.0 Help</h3><div class="shortcuts-switcher" data-swiftype-index="false"><label for="switch-shortcuts" data-swiftype-index="false">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1" data-swiftype-index="false"><option data-group="secondary" value="rs">ReSharper 2.x/IntelliJ IDEA</option><option data-group="primary" value="vs" selected>Visual Studio</option></select></div><div class="panel-trigger" data-swiftype-index="false"></div></div></header><section class="panel__content" data-swiftype-index="false"><div class="container"><article class="article" data-shortcut-switcher="false" data-swiftype-index="true"><h1 data-toc="Introducton">Introduction</h1><p id="d1448e2">        dotMemory Unit is a unit testing framework that allows you to write tests that check your code for all kinds of        memory issues. For example, these can be tests that determine leaks by checking memory for objects of a particular        type, or tests that track memory traffic and fail in case the traffic exceeds some threshold. In other words,        dotMemory Unit extends the possibilities of your unit testing framework with the functionality of a memory        profiler. More specifically, dotMemory Unit allows:    </p><ul class="list _ul"><li class="list__item">checking memory for objects of a certain type,</li><li class="list__item">checking memory traffic,</li><li class="list__item">getting difference between memory snapshots,</li><li class="list__item">saving memory snapshots for further investigation in <a href="https://www.jetbrains.com/dotmemory/" data-external="true"><span>dotMemory</span></a>            (standalone .NET memory profiler).</li></ul><div class="chapter"><h2 id="d1448e18" data-toc="Introducton#d1448e18">How dotMemory Unit works</h2>    <ul class="list _ul"><li class="list__item">dotMemory Unit is distributed as a NuGet package (convenient if you use the ReSharper unit test runner) or as a zip            package (if you want to use a standalone dotMemory Unit launcher).</li><li class="list__item">Tests with the support for dotMemory Unit can be run using the ReSharper unit test runner.            In this case, you should have either ReSharper 9.1 (or later) or dotCover 3.1 (or later) installed on your machine.            Another option is to run tests using the standalone dotMemory Unit launcher.            You can take the launcher either from the NuGet package or from the zip available for download on            the <a href="https://www.jetbrains.com/dotmemory/unit/" data-external="true"><span>dotMemory Unit page</span></a>. Learn how to use            the launcher in <a href="Using_dotMemory_Unit_Standalone_Runner.html"><span>Using dotMemory Unit Standalone Launcher</span></a>.        </li><li class="list__item">After you install the dotMemory Unit package, ReSharper's menus for unit tests will get the additional item            <span class="control">Run Unit Tests under dotMemory Unit</span>. In this mode, test runner will execute dotMemory Unit framework calls            as well as ordinary test logic. If you run a test 'normal' way (without dotMemory Unit support), depending            on the settings the test will fail or            dotMemory Unit calls will be simply ignored.        </li><li class="list__item">dotMemory Unit works with almost all of the            <a href="Supported_Unit_Testing_Frameworks.html">unit-testing frameworks            </a> on the market including MSTest, NUnit, and xUnit.net.        </li></ul>    </div><div class="chapter"><h2 id="d1448e42" data-toc="Introducton#d1448e42">How this looks</h2>    <p id="d1448e44">        To quickly introduce you to the framework, let's consider the following test example.    </p>    <div class="code-block" data-lang="C#"><code class="code-block__wrapper"><span class="na">[Test]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">TestMethod1</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">...</span> <span class="c1">// do some work</span>

    <span class="n">dotMemory</span><span class="p">.</span><span class="n">Check</span><span class="p">(</span><span class="n">memory</span> <span class="p">=&gt;</span>
        <span class="n">Assert</span><span class="p">.</span><span class="n">That</span><span class="p">(</span><span class="n">memory</span><span class="p">.</span><span class="n">GetObjects</span><span class="p">(</span><span class="k">where</span> <span class="p">=&gt;</span> <span class="k">where</span><span class="p">.</span><span class="n">Type</span><span class="p">.</span><span class="n">Is</span><span class="p">&lt;</span><span class="n">Foo</span><span class="p">&gt;()).</span><span class="n">ObjectsCount</span><span class="p">,</span> <span class="n">Is</span><span class="p">.</span><span class="n">EqualTo</span><span class="p">(</span><span class="m">0</span><span class="p">)));</span>
<span class="p">}</span></code></div>    <p id="d1448e50">        This NUnit test selects all objects of the        <code class="code" data-lang="Java">Foo</code> type from memory and asserts that there are no such objects.        Such a test is quite common when you look for memory leaks in your code.    </p>    <p id="d1448e56">        Note that dotMemory Unit does not force you to use any specific Assert syntax. Simply use the syntax of the        framework your test is written for. For example, the shown assertion uses the NUnit syntax but could be easily        updated for MSTest*:    </p>    <div class="code-block" data-lang="C#"><code class="code-block__wrapper"><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">memory</span><span class="p">.</span><span class="n">GetObjects</span><span class="p">(</span><span class="k">where</span> <span class="p">=&gt;</span> <span class="k">where</span><span class="p">.</span><span class="n">Type</span><span class="p">.</span><span class="n">Is</span><span class="p">&lt;</span><span class="n">Foo</span><span class="p">&gt;()).</span><span class="n">ObjectsCount</span><span class="p">);</span></code></div>    <aside class="note sideblock" data-title="">        <p id="d1448e65">* All examples in this document are given for NUnit.</p>    </aside>    </div><div class="chapter"><h2 id="d1448e70" data-toc="Introducton#d1448e70">When to use dotMemory Unit</h2>    <p id="d1448e72">Use "memory" tests in the same way as the unit tests on app logic:</p>    <ul class="list _ul"><li class="list__item">After you manually find an issue (such as a leak), write a memory test that covers it.</li><li class="list__item">Write tests for proactive testing  &mdash; to ensure that new product features do not create any memory issues, like            objects left in memory or large memory traffic.        </li></ul>    </div><div class="chapter"><h2 id="d1448e83" data-toc="Introducton#d1448e83">Getting started</h2>    <p id="d1448e85">        The fastest way to start writing your own "memory" tests is to read        <a href="Get_Started.html"><span>Get Started</span></a>. It contains information about installing dotMemory Unit and running "memory" tests.        If you look for test examples, refer to the <a href="Unit_Examples.html"><span>Examples</span></a> section.        For the details about certain framework methods, refer to the <a href="Reference.html"><span>Reference</span></a> section.    </p>    </div><div class="chapter"><h2 id="d1448e95" data-toc="Introducton#d1448e95">Snapshot compatibility</h2>            <div class="table-wrapper"><table class="                 " width="30%" id="d1448e97"><thead><tr id="d1448e98" class="ijRowHead"><th colspan="4" id="d1448e99"></th></tr></thead><tbody><tr id="d1448e100" class="ijRowOdd"><td width="20%" rowspan="2" id="d1448e101">                        <i id="d1448e103">Save in</i>                    </td><td colspan="4" id="d1448e106">                        <i id="d1448e108">Open in</i>                    </td></tr><tr id="d1448e111" class="ijRowEven"><td id="d1448e112">dotMemory 10 - 2017.1</td><td id="d1448e114">dotMemory 2017.2</td><td id="d1448e116">dotMemory 2017.3</td></tr><tr id="d1448e118" class="ijRowOdd"><td id="d1448e119">dotMemory Unit 1.0 - 2.3</td><td id="d1448e121">+</td><td id="d1448e123">-</td><td id="d1448e125">-</td></tr><tr id="d1448e127" class="ijRowEven"><td id="d1448e128">dotMemory Unit 2.4</td><td id="d1448e130">-</td><td id="d1448e132">+</td><td id="d1448e134">+</td></tr><tr id="d1448e136" class="ijRowOdd"><td id="d1448e137">dotMemory Unit 3.0</td><td id="d1448e139">-</td><td id="d1448e141">-</td><td id="d1448e143">+</td></tr></tbody></table></div>        </div><div class="last-modified" data-swiftype-index="false">Last modified: 16 January 2018 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-swiftype-index="false"><a class="navigation-links__next" href="Supported_Unit_Testing_Frameworks.html" data-swiftype-index="false">Supported Frameworks</a></div></article><div id="disqus_thread" data-swiftype-index="false"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>