<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta class="swiftype" name="product" data-type="string" content="/dotmemory-unit"><meta charset="UTF-8"><title>Turning On Collecting of Allocation Data - Help | dotMemory Unit</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="Turning_On_Off_Collecting_of_Allocation_Data" data-disqus-id="Turning_On_Off_Collecting_of_Allocation_Data_dmu"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper" data-swiftype-index="false"><section class="panel _nav" data-swiftype-index="false"><header class="panel__header" data-swiftype-index="false"><div class="container" data-swiftype-index="false"><form class="search-box" data-swiftype-index="false"><label for="search-box__input" class="search-box__label" data-swiftype-index="false"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search dotMemory Unit Help"></label><div class="search-box__clear" title="Clear" data-swiftype-index="false"></div></form></div></header><nav class="panel__content" data-swiftype-index="false"><div class="container _nav" data-swiftype-index="false"><menu class="nav-tree" data-swiftype-index="false"></menu></div><div class="container _footer panel__footer" data-swiftype-index="false"><p data-swiftype-index="false"><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main" data-swiftype-index="false"><header class="panel__header" data-swiftype-index="false"><div class="container" data-swiftype-index="false"><h3>dotMemory Unit 3.0 Help</h3><div class="shortcuts-switcher" data-swiftype-index="false"><label for="switch-shortcuts" data-swiftype-index="false">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1" data-swiftype-index="false"><option data-group="secondary" value="rs">ReSharper 2.x/IntelliJ IDEA</option><option data-group="primary" value="vs" selected>Visual Studio</option></select></div><div class="panel-trigger" data-swiftype-index="false"></div></div></header><section class="panel__content" data-swiftype-index="false"><div class="container"><article class="article" data-shortcut-switcher="false" data-swiftype-index="true"><h1 data-toc="Turning_On_Off_Collecting_of_Allocation_Data">Turning On Collecting of Allocation Data</h1><p id="d3256e2">        By default, memory allocation data (memory traffic and creation stack trace data) are not collected        by the profiler. This is done due to performance considerations as collecting of these data        implies significant profiling overhead. Such a behavior suits for simple tests when all your test does is        checking for presence of certain objects in the heap. If your test requires allocation data, for example,        it checks the amount of memory traffic, then you should manually turn on the collecting of memory allocation data.    </p><p id="d3256e5">        This can be done by using the <a href="Configuring_dotMemory_Unit.html">DotMemoryUnit</a> attribute:    </p><div class="code-block" data-lang="C#"><code class="code-block__wrapper"><span class="na">[DotMemoryUnit(CollectAllocations=true)]</span>
<span class="na">[Test]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">TestMethod1</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">...</span> <span class="c1">// Some user code</span>
<span class="p">}</span></code></div><p id="d3256e14">        The <a href="AssertTraffic_Attribute.html">AssertTraffic</a> attribute also automatically turns on the collecting        of the allocation data:    </p><div class="code-block" data-lang="C#"><code class="code-block__wrapper"><span class="na">[AssertTraffic(AllocatedMemoryAmount = 1024)]</span>
<span class="na">[Test]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">TestMethod1</span><span class="p">()</span>
<span class="p">{</span>
    <span class="p">...</span> <span class="c1">// Some user code</span>
<span class="p">}</span></code></div><div class="last-modified" data-swiftype-index="false">Last modified: 16 January 2018 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-swiftype-index="false"><a class="navigation-links__prev" href="Checking_Memory_Traffic.html" data-swiftype-index="false">Checking Memory Traffic</a><a class="navigation-links__next" href="Comparing_Snapshots0.html" data-swiftype-index="false">Comparing Snapshots</a></div></article><div id="disqus_thread" data-swiftype-index="false"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>