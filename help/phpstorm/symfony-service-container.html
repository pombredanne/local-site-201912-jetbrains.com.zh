<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>服务容器-帮助|暴风雨</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Symfony_Service_Container" data-breadcrumbs="PHP frameworks and external tools/Symfony_support.xml|Symfony/Symfony_Service_Container.xml|Service Container" data-main-title="Service Container"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索PhpStorm帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PhpStorm 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_default_for_macos" data-group="primary">macOS的默认设置</option><option value="primary_intellij_idea_classic_macos" data-group="primary">IntelliJ IDEA经典版（macOS）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_macos" data-group="primary">Eclipse（macOS）</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_sublime_text_macos" data-group="primary">崇高文字（macOS）</option><option value="secondary_default_for_windows" data-group="secondary">Windows的默认设置</option><option value="secondary_default_for_macos" data-group="secondary">macOS的默认设置</option><option value="secondary_intellij_idea_classic" data-group="secondary">IntelliJ IDEA经典版</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_macos" data-group="secondary">Eclipse（macOS）</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_sublime_text" data-group="secondary">崇高文字</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Symfony_Service_Container.xml" data-toc="Symfony_Service_Container">服务容器</h1>    <p id="3a840119">Symfony应用程序包含多个称为<span class="emphasis">services的</span>对象。一些服务，例如<code class="code">Session</code> ， <code class="code">Doctrine</code> ， 要么<code class="code">FileSystem</code> ，这是使用Symfony作为开发平台所固有的。其他对象特定于正在开发的应用程序。<a href="http://symfony.com/doc/current/service_container.html" rel="noopener noreferrer" data-external="true" target="_blank">Symfony服务容器</a>可帮助实例化，组织和检索这些对象。它还拥有一组参数，可以配置应用程序可以使用的行为或特定值。</p>    <p id="completion_configs">Symfony插件为在Symfony服务容器中注册的服务和参数提供代码完成和导航，并帮助您注册新的服务和参数。</p><aside class="prompt" rel="completion_configs" id="43a551e3" data-type="tip" data-title="">        <p id="00f4c380"><span class="filepath">YAML</span>和<span class="filepath">XML</span>配置文件中还提供了服务的完成和导航。</p>    </aside>        <div class="chapter"><h2 id="code-completion-for-symfony-services" data-toc="Symfony_Service_Container#code-completion-for-symfony-services">Symfony服务的代码完成</h2>        <p id="7421328a">            <a name="framework-code-completion-intro"></a>在编辑器中，按<kbd data-primary_default_for_windows="Ctrl+Space" data-primary_default_for_macos="Ctrl+Space" data-primary_intellij_idea_classic_macos="Ctrl+Space" data-primary_emacs="Alt+/" data-primary_visual_studio="Ctrl+Space" data-primary_default_for_xwin="Ctrl+Space" data-primary_default_for_gnome="Ctrl+Space" data-primary_default_for_kde="Ctrl+Space" data-primary_eclipse="Ctrl+Space" data-primary_eclipse_macos="Ctrl+Space" data-primary_netbeans="Ctrl+Space" data-primary_sublime_text="Ctrl+Space" data-primary_sublime_text_macos="Ctrl+Space" data-secondary_default_for_windows="⌃Space" data-secondary_default_for_macos="⌃Space" data-secondary_intellij_idea_classic="⌃Space" data-secondary_emacs="⌥/" data-secondary_visual_studio="⌃Space" data-secondary_default_for_xwin="⌃Space" data-secondary_default_for_gnome="⌃Space" data-secondary_default_for_kde="⌃Space" data-secondary_eclipse="⌃Space" data-secondary_eclipse_macos="⌃Space" data-secondary_netbeans="⌃Space" data-secondary_sublime_text="⌃Space" data-secondary_sublime_text_macos="⌃Space">Ctrl+Space</kbd>调用代码完成并执行以下任一操作：</p>            <ul class="list _ul"><li class="list__item" id="24048fea">                    <p id="6e5f289c">从服务容器中检索注册的服务。</p>                    <figure><img alt="Symfony服务名称完成" title="Symfony服务名称完成" src="/help/img/idea/2019.3/ps_symfony_service_name_completion.png" id="5e86836d" width="639" height="344"></figure>                </li><li class="list__item" id="268d9c52">                    <p id="58c8cf91">实例化服务的完整方法名称。</p>                    <figure><img alt="Symfony服务方法完成" title="Symfony服务方法完成" src="/help/img/idea/2019.3/ps_symfony_service_methods_completion.png" id="8c195c87" width="471" height="390"></figure>                </li><li class="list__item" id="32f5ef47">                    <p id="090ba434">获取从服务容器获取的注册参数。</p>                    <figure><img alt="Symfony服务参数完成" title="Symfony服务参数完成" src="/help/img/idea/2019.3/ps_symfony_service_parameters_completion.png" id="72fde3ae" width="624" height="268"></figure>                </li></ul>    </div>    <div class="chapter"><h2 id="code-navigation-for-services" data-toc="Symfony_Service_Container#code-navigation-for-services">服务的代码导航</h2>        <p id="fcc74227">            <a name="framework-navigation-intro"></a>要导航到服务的声明，请在插入符的使用位置定位并按<kbd data-primary_default_for_windows="Ctrl+B" data-primary_default_for_macos="⌘+B" data-primary_intellij_idea_classic_macos="⌘+B" data-primary_emacs="Ctrl+Alt+G" data-primary_visual_studio="F12" data-primary_default_for_xwin="Ctrl+B" data-primary_default_for_gnome="Ctrl+B" data-primary_default_for_kde="Ctrl+B" data-primary_eclipse="F3" data-primary_eclipse_macos="F3" data-primary_netbeans="Ctrl+B" data-primary_sublime_text="F12" data-primary_sublime_text_macos="F12" data-secondary_default_for_windows="⌃B" data-secondary_default_for_macos="⌘B" data-secondary_intellij_idea_classic="⌘B" data-secondary_emacs="⌃⌥G" data-secondary_visual_studio="F12" data-secondary_default_for_xwin="⌃B" data-secondary_default_for_gnome="⌃B" data-secondary_default_for_kde="⌃B" data-secondary_eclipse="F3" data-secondary_eclipse_macos="F3" data-secondary_netbeans="⌃B" data-secondary_sublime_text="F12" data-secondary_sublime_text_macos="F12">Ctrl+B</kbd> 。或者， <kbd data-primary_default_for_windows="Ctrl+Click" data-primary_default_for_macos="Ctrl+Click" data-primary_intellij_idea_classic_macos="Ctrl+Click" data-primary_emacs="Ctrl+Click" data-primary_visual_studio="Ctrl+Click" data-primary_default_for_xwin="Ctrl+Click" data-primary_default_for_gnome="Ctrl+Click" data-primary_default_for_kde="Ctrl+Click" data-primary_eclipse="Ctrl+Click" data-primary_eclipse_macos="Ctrl+Click" data-primary_netbeans="Ctrl+Click" data-primary_sublime_text="Ctrl+Click" data-primary_sublime_text_macos="Ctrl+Click" data-secondary_default_for_windows="⌘+Click" data-secondary_default_for_macos="⌘+Click" data-secondary_intellij_idea_classic="⌘+Click" data-secondary_emacs="⌘+Click" data-secondary_visual_studio="⌘+Click" data-secondary_default_for_xwin="⌘+Click" data-secondary_default_for_gnome="⌘+Click" data-secondary_default_for_kde="⌘+Click" data-secondary_eclipse="⌘+Click" data-secondary_eclipse_macos="⌘+Click" data-secondary_netbeans="⌘+Click" data-secondary_sublime_text="⌘+Click" data-secondary_sublime_text_macos="⌘+Click">Ctrl+Click</kbd>用法。</p>        <figure><img alt="导航到Symfony服务名称声明" title="导航到Symfony服务名称声明" src="/help/img/idea/2019.3/ps_symfony_service_name_jump_declaration-1.png" id="7ad347d1" width="462" height="147"></figure>        <p id="7e6b780f">“ <span class="control">导航到声明”</span>命令还将使您可以在服务实现及其注册的路由之间导航。例如，您可以从<code class="code">Filesystem</code>类到注册该类的<span class="filepath">services.xml</span>文件。从那里，您可以导航回该服务的注册实现或其用法。</p>        <figure><img alt="在Symfony服务实现和声明之间导航" title="在Symfony服务实现和声明之间导航" src="/help/img/idea/2019.3/ps_symfony_service_name_jump_declaration-2.png" id="daf23631" width="683" height="214"></figure>    </div>    <div class="chapter"><h2 id="code-inspection-for-services" data-toc="Symfony_Service_Container#code-inspection-for-services">服务代码检查</h2>        <p id="e5896d13">Symfony插件提供了几种检查以检测<a href="#registering-services">服务注册中的</a>错误。</p>        <ul class="list _ul"><li class="list__item" id="89d09679">                <p id="700c651a">当您使用未在服务容器中注册的服务时， <a name="framework-missing-item-inspection"></a> PhpStorm将显示“ <span class="emphasis">缺少服务”</span>检查中的相应警告。</p>                <figure><img alt="Symfony缺少服务检查" title="Symfony缺少服务检查" src="/help/img/idea/2019.3/ps_symfony_missing_service_inspection.png" id="9890caff" width="446" height="154"></figure>            </li><li class="list__item" id="8239d0f6">                <p id="a24fc6d7">当您注册已经在服务容器中注册的服务时， <a name="framework-missing-item-inspection"></a> PhpStorm显示来自“ <span class="emphasis">重复服务”</span>检查的相应警告。</p>                <figure><img alt="Symfony重复服务检查" title="Symfony重复服务检查" src="/help/img/idea/2019.3/ps_symfony_duplicate_service_inspection.png" id="e1afb0ee" width="571" height="317"></figure>            </li></ul>    </div>    <div class="chapter"><h2 id="registering-services" data-toc="Symfony_Service_Container#registering-services">注册服务</h2>        <p id="a4e325a9">通常，通过在<span class="filepath">YAML</span>或<span class="filepath">XML</span>配置文件中添加相应的记录来向服务容器注册服务。例如，要将<span class="emphasis">Twig</span>扩展名注册到服务容器，可以添加以下记录：</p>        <div class="code-block" data-lang="yaml">服务：blogger_blog.twig.extension：类：Blogger \ BlogBundle \ DependencyInjection \ BloggerBlogExtension标签：-{名称：twig.extension}</div>        <p id="66824b5a">服务注册记录至少由服务名称和实现该服务的类组成。此外，它通常包含用于在实例化服务时由服务容器提供的参数的指令。</p>        <p id="f385d514">Symfony插件提供了“ <span class="control">创建服务”</span>工具，可以帮助创建<span class="filepath">YAML</span>或<span class="filepath">XML</span>注册。</p>        <section class="procedure-steps"><h3 id="register-a-service">注册服务</h3><ol class="list _decimal"><li class="list__item" id="b3e3350f">                <p id="06c38b15">右键单击代码编辑器，然后从上下文菜单中选择“ <span class="control">创建服务</span> ”。</p>                <figure><img alt="Symfony创建服务命令" title="Symfony创建服务命令" src="/help/img/idea/2019.3/ps_symfony_create_service_command.png" id="ec189c18" width="520" height="522"></figure>            </li><li class="list__item" id="6868089c">                <p id="ae4f5c26">在打开的“ <span class="control">服务生成器”</span>对话框中，提供类的FQN以在“ <span class="control">类”</span>字段中向服务容器注册。</p>                <figure><img alt="Symfony服务生成器对话框" title="Symfony服务生成器对话框" src="/help/img/idea/2019.3/ps_symfony_service_generator_dialog.png" id="b213996f" width="669" height="802"></figure>                <p id="42fc841c">需要注册的潜在方法列表会自动填充。如有必要，请单击<span class="control">生成</span>以刷新它。</p>                <ul class="list _ul"><li class="list__item" id="4f65a6f2"><p>创建服务时，可以让服务容器为类中的每个函数分配参数。这可以通过选择或取消选择“ <span class="control">行为”</span>复选框来进行调节。</p></li><li class="list__item" id="af09d237"><p>在“ <span class="control">服务”</span>列中，可以选择应注入到参数中的服务。</p></li></ul>            </li><li class="list__item" id="86209223"><p>通过选择相应的选项来选择是生成<span class="filepath">YAML</span>还是<span class="filepath">XML</span> 。</p></li><li class="list__item" id="1f9504b6"><p>单击<span class="control">复制到剪贴板，</span>然后将生成的服务注册粘贴到配置文件中，例如<span class="filepath">services.yml</span> 。</p></li></ol></section>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="symfony-twig.html">树枝模板</a> <a class="navigation-links__next" href="symfony-doctrine.html">原则</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>