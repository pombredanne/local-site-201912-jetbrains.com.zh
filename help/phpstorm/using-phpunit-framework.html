<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>用PHPUnit测试-帮助|帮助暴风雨</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Using_PhpUnit_framework" data-breadcrumbs="Testing and Profiling/Testing.xml|Testing/Using_PHPUnit_framework.xml|Testing with PHPUnit" data-main-title="Testing with PHPUnit" data-article-props="
                {
                
            " seeals=":[=" titl=":=" procedure=",=" link=":=" ur=":" using-the-composer-dependency-manager.htm="," tex=":" composer="" dependency="" manage="}=" how="" to=",=" https:="" ="" www.youtube.com="" watch?v="NztroIqNBZA","text":"Video:" running="" phpunit="" tests="" locall="}=" }="" docke="}=" referenc=",=" php.htm="," ph="}=" settings-directories.htm="," directorie="}=" run-debug-configuration-phpunit.htm="," run="" debug="" configuration:="" phpuni="}=" test-runner-tab.htm="," test="" runner="" ta="}="><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索PhpStorm帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PhpStorm 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_default_for_macos" data-group="primary">macOS的默认设置</option><option value="primary_intellij_idea_classic_macos" data-group="primary">IntelliJ IDEA经典版（macOS）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_macos" data-group="primary">Eclipse（macOS）</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_sublime_text_macos" data-group="primary">崇高文字（macOS）</option><option value="secondary_default_for_windows" data-group="secondary">Windows的默认设置</option><option value="secondary_default_for_macos" data-group="secondary">macOS的默认设置</option><option value="secondary_intellij_idea_classic" data-group="secondary">IntelliJ IDEA经典版</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_macos" data-group="secondary">Eclipse（macOS）</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_sublime_text" data-group="secondary">崇高文字</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Using_PHPUnit_framework.xml" data-toc="Using_PhpUnit_framework">用PHPUnit测试</h1>                                <p id="1af6d299">              <a name="PHPUnitIntegration"></a> PhpStorm通过与<a href="http://www.phpunit.de/" rel="noopener noreferrer" data-external="true" target="_blank">PHPUnit</a>测试框架集成来支持PHP应用程序的单元测试。</p>    <div class="chapter"><h2 id="php_test_frameworks_phpunit_before_you_start" data-toc="Using_PhpUnit_framework#php_test_frameworks_phpunit_before_you_start">在你开始前</h2>                <p id="98a3e744">            <a name="makeSurePhpInterpreterInstalledAndConfigured"></a>确保按照<a href="configuring-local-interpreter.html">配置本地PHP解释器</a>和<a href="configuring-remote-interpreters.html">配置远程PHP解释器中的</a>说明在<a href="php.html">PHP页面的</a> PhpStorm中<a href="configuring-local-interpreter.html">配置了PHP解释</a> <a href="configuring-remote-interpreters.html">器</a> 。</p>    </div>    <div class="chapter"><h2 id="php_test_frameworks_phpunit_download" data-toc="Using_PhpUnit_framework#php_test_frameworks_phpunit_download">下载并安装PHPUnit</h2>        <p id="0d811673">在你开始前， <a name="composer-prereq"></a>确保Composer已安装在计算机上并按照<a href="using-the-composer-dependency-manager.html">Composer Dependency Manager中</a>所述在当前项目中初始化。</p>        <section class="procedure-steps"><h3 id="3979ad7a">手动下载并安装phpunit.phar</h3><ul class="list "><li class="list__item" id="8531e10c">                <a name="manual_test_framework_download"></a>                                        <p id="15ca0439">从<a href="https://phpunit.de/manual/current/en/installation.html" rel="noopener noreferrer" data-external="true" target="_blank">PHPUnit官方网站</a>下载<span class="filepath">phpunit.phar</span>并将其保存在您的计算机上：</p>        <ul class="list _bullet"><li class="list__item" id="6fcf7cbf"><p>如果您除了需要运行PHPUnit测试的能力之外还需要完整的编码帮助，请将<span class="filepath">phpunit.phar</span>存储在项目的根目录下，以后将使用PHPUnit。</p></li><li class="list__item" id="094a9700"><p>如果您只需要运行PHPUnit测试，并且不需要任何编码帮助，则可以将<span class="filepath">phpunit.phar</span>保存在项目外部。</p></li></ul>                </li></ul></section>        <section class="procedure-steps"><h3 id="phpunit_install_with_composer">使用Composer下载并安装phpunit.phar</h3><a name="install_composer_package"></a><ol class="list _decimal"><li class="list__item" id="bf1b2ab0"><p>从<span class="filepath">composer.json</span>上下文菜单中，选择<span class="menupath" data-skip-index="skip">Composer |。管理依赖项</span> 。或者选择<span class="menupath" data-skip-index="skip">工具|作曲家|</span>从主菜单<span class="menupath" data-skip-index="skip">管理依赖关系</span> 。</p></li><li class="list__item" id="12b1ba36">            <p id="f9838c9d">在打开的“ <a href="add-composer-dependency.html">管理Composer依赖关系”对话框</a>中，从“ <span class="control">可用软件包”</span>列表中选择<span class="emphasis">phpunit / phpunit</span>软件包，可能使用搜索字段。</p>            <p id="e44636d2">                <a name="composer_choose_package_version"></a>从“ <span class="control">要安装</span>的<span class="control">版本”</span>列表中选择相关版本。</p>        </li><li class="list__item" id="baf8e338">            <p id="92b309b6">如有必要，请展开“ <span class="control">设置”</span>隐藏区域并指定高级安装选项。在<span class="control">命令行参数</span>字段中， <a name="composer_add_dependency_advanced_settings"></a>键入其他命令行参数。</p>        </li><li class="list__item" id="eb4bdd66"><p>点击<span class="control">安装</span> 。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="php_test_frameworks_phpunit_integrate" data-toc="Using_PhpUnit_framework#php_test_frameworks_phpunit_integrate">将PHPUnit与PhpStorm项目集成</h2>                        <a name="automatic_setup_test_framework"></a>                                        <p id="153ffdcd">如果您使用<a href="configuring-local-interpreter.html">本地PHP解释器</a> ，则PhpStorm会自动执行初始PHPUnit配置。对于<a href="configuring-remote-interpreters.html">远程PHP解释器</a> ，需要手动配置PHPUnit。</p>        <section class="procedure-steps"><h3 id="ab7c7ad7">自动配置PHPUnit</h3><ol class="list _decimal"><li class="list__item" id="886efb93"><p>将<span class="filepath">phpunit.xml</span>或<span class="filepath">phpunit.xml.dist</span>配置文件存储在项目根目录下。</p></li><li class="list__item" id="98756d23"><p>                <a href="#phpunit_install_with_composer">用Composer安装PHPUnit</a> 。</p></li></ol><p id="2d3fc8c7">PhpStorm将在“ <a href="php-test-frameworks.html">测试框架”页面</a>上创建本地框架配置以及<a href="run-debug-configuration-phpunit.html">PHPUnit</a>运行/调试配置。</p></section>            <section class="procedure-steps"><h3 id="8393c601">手动配置PHPUnit</h3><ol class="list _decimal"><li class="list__item" id="choose_php_interpreter">                <a name="ps_php_test_fw_open_settings_test_frameworks"></a>        <p id="799613fb">            <a name="open_settings"></a>在里面<a name="settings_dialog"></a> <span class="control">设置/首选项</span>对话框<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd> ，展开<span class="menupath" data-skip-index="skip">Languages and Frameworks</span>节点，然后选择<span class="menupath" data-skip-index="skip">PHP</span>下的<span class="menupath" data-skip-index="skip">Test Frameworks</span> 。</p>        <p id="06a5cc0f">在打开的“ <a href="php-test-frameworks.html">测试框架”页面</a>上，单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加图标">在中央窗格中，然后从列表中选择配置类型：</p>        <figure><img alt="ps_settings_php_test_frameworks.png" title="ps_settings_php_test_frameworks.png" src="/help/img/idea/2019.3/ps_settings_php_test_frameworks.png" id="e51dadfe" width="381" height="498"></figure>                    <a name="choose_php_interpreter_type"></a>                        <ul class="list _ul"><li class="list__item" id="fe12abe0">                <p id="1bd39acd">在本地配置中，使用默认项目PHP解释<a href="php.html#ps_settings_php_default_php_interpreter">器</a> ，有关详细信息，请参见<a href="php.html#ps_settings_php_default_php_interpreter">默认项目CLI解释器</a> 。</p>            </li><li class="list__item" id="e5180124">                <p id="8ae6aa8a">要将PHPUnit与远程PHP解释器一起使用，请在打开的对话框中选择一种配置：</p>                <figure><img alt="ps_settings_php_test_frameworks_phpunit_choose_php_interpreter.png" title="ps_settings_php_test_frameworks_phpunit_choose_php_interpreter.png" src="/help/img/idea/2019.3/ps_settings_php_test_frameworks_phpunit_choose_php_interpreter.png" id="27cc4e43" width="525" height="350"></figure>            </li></ul>                </li><li class="list__item" id="2959c3b1">                <p id="63328cfa">在右侧窗格中，选择PHPUnit库安装类型：</p>                <ul class="list _bullet"><li class="list__item" id="2099148b"><p>要使用Composer自动加载器，请在<span class="filepath">供应商</span>文件夹中指定<span class="filepath">autoload.php</span>文件的路径。有关详细信息，请参见<a href="using-the-composer-dependency-manager.html">Composer</a> 。</p></li><li class="list__item" id="ps_phpunit_local_download_phpunit_phar">                        <p id="1a14556a">要从<span class="filepath">phpunit.phar</span>运行PHPUnit，请下载<a href="https://phpunit.de/" rel="noopener noreferrer" data-external="true" target="_blank">phpunit.phar</a> ，将归档文件保存在项目根文件夹中，并指定其路径。对于本地配置，您可以通过单击<span class="control">下载</span>链接来下载档案。要在当前项目中使用它，请确保定义了默认的PHP解释器。</p>                        <p id="bdfac9e7">当您单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.refresh@2x.png" width="16" alt="重新加载按钮"> ，PhpStorm检测并显示PHPUnit版本。</p>                    </li></ul>            </li><li class="list__item" id="40a14623">                <p id="c9768660">在“ <span class="control">测试运行器”</span>区域中， <a name="behat_test_runner_default_config_file"></a>指定用于启动和执行方案的配置<span class="filepath">XML</span>文件。<br>默认情况下，PHPUnit在项目根文件夹或<span class="filepath">config</span>文件夹中查找<span class="filepath">phpunit.xml</span>配置文件。您可以指定一个自定义配置文件。</p>                <p id="ff032a3d">                    <a name="ps_php_bootstrap_file"></a>您也可以输入引导文件的路径<a name="phpunit_testrunner_bootstrap_file"></a>在启动测试之前始终执行PHP脚本。在字段中，指定脚本的位置。手动输入路径或单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.openDisk@2x.png" width="16" alt="浏览按钮">然后在<a href="select-path-dialog.html">打开</a>的<a href="select-path-dialog.html">对话框中</a>选择所需的文件夹。</p>                <p id="350d3039">                    <a name="phpunit_alternative_config"></a>请注意，在编辑<a href="run-debug-configuration-phpunit.html">PHPUnit</a>运行/调试配置时，您还可以提供备用配置和引导文件。</p>            </li></ol></section>    </div>    <div class="chapter"><h2 id="generate_phpunit_test_for_a_class_in_a_separate_file" data-toc="Using_PhpUnit_framework#generate_phpunit_test_for_a_class_in_a_separate_file">为类生成PHPUnit测试</h2>        <section class="procedure-steps"><a name="ps-generate-test-class"></a><ol class="list _decimal"><li class="list__item" id="091a12f9">            <p id="6b8bcc53">通过执行以下任一操作，打开“ <span class="control">创建新的PHP测试”</span>对话框：</p>            <ul class="list _bullet"><li class="list__item" id="81f1af1c"><p>在主菜单中，选择“ <span class="menupath" data-skip-index="skip">文件” |“文件”。新的</span> 。然后，选择<span class="control">PHP Test | PHPUnit测试</span>或<span class="control">PHP测试|</span>从上下文菜单中。</p></li><li class="list__item" id="b6ffc69b"><p>在<span class="control">项目</span>工具窗口中，按<kbd data-primary_default_for_windows="Alt+Insert" data-primary_default_for_macos="⌘+N" data-primary_intellij_idea_classic_macos="Ctrl+N" data-primary_emacs="Alt+Insert" data-primary_visual_studio="Alt+Insert" data-primary_default_for_xwin="Alt+Insert" data-primary_default_for_gnome="Alt+Insert" data-primary_default_for_kde="Alt+Insert" data-primary_eclipse="Alt+Insert" data-primary_eclipse_macos="⌘+N" data-primary_netbeans="Alt+Insert" data-primary_sublime_text="Ctrl+N" data-primary_sublime_text_macos="⌘+N" data-secondary_default_for_windows="N/A" data-secondary_default_for_macos="⌘N" data-secondary_intellij_idea_classic="⌃N" data-secondary_emacs="N/A" data-secondary_visual_studio="N/A" data-secondary_default_for_xwin="N/A" data-secondary_default_for_gnome="N/A" data-secondary_default_for_kde="N/A" data-secondary_eclipse="N/A" data-secondary_eclipse_macos="⌘N" data-secondary_netbeans="⌃N" data-secondary_sublime_text="⌃N" data-secondary_sublime_text_macos="⌘N">Alt+Insert</kbd>或右键单击要测试的PHP类，然后选择“ <span class="control">新建” |</span> “ <span class="control">新建”。 PHP测试| PHPUnit测试</span>或<span class="control">新建| PHP测试|</span> 。</p></li><li class="list__item" id="a3581cd0">                    <p id="b42b8e7e">在要测试的PHP类的编辑器中，将插入号放置在类的定义内。然后，选择<span class="control">转到|</span>从上下文菜单进行<span class="control">测试</span>或按<kbd data-primary_default_for_windows="Ctrl+Shift+T" data-primary_default_for_macos="Shift+⌘+T" data-primary_intellij_idea_classic_macos="Shift+⌘+T" data-primary_emacs="Ctrl+Shift+T" data-primary_visual_studio="Ctrl+Shift+T" data-primary_default_for_xwin="Ctrl+Shift+T" data-primary_default_for_gnome="Ctrl+Shift+T" data-primary_default_for_kde="Ctrl+Shift+T" data-primary_eclipse="N/A" data-primary_eclipse_macos="N/A" data-primary_netbeans="Ctrl+Shift+T" data-primary_sublime_text="N/A" data-primary_sublime_text_macos="N/A" data-secondary_default_for_windows="⌃⇧T" data-secondary_default_for_macos="⇧⌘T" data-secondary_intellij_idea_classic="⇧⌘T" data-secondary_emacs="⌃⇧T" data-secondary_visual_studio="⌃⇧T" data-secondary_default_for_xwin="⌃⇧T" data-secondary_default_for_gnome="⌃⇧T" data-secondary_default_for_kde="⌃⇧T" data-secondary_eclipse="N/A" data-secondary_eclipse_macos="N/A" data-secondary_netbeans="⌃⇧T" data-secondary_sublime_text="N/A" data-secondary_sublime_text_macos="N/A">Ctrl+Shift+T</kbd>并从弹出菜单中选择<span class="control">创建新测试</span> 。这样，您可以为一个PHP文件中的多个类之间定义的PHP类生成测试。</p>                    <p id="d2456acb">要为特定方法创建测试，请将插入号放置在方法声明中。所选方法将在“ <span class="control">创建新PHP测试”</span>对话框的“ <span class="control">生成测试方法”</span>区域中自动选择。</p>                </li></ul>        </li><li class="list__item" id="8b120a56">            <p id="3a1fc2d8">将打开“ <span class="control">创建新的PHP测试”</span>对话框。</p>            <figure><img alt="创建新的phpunit测试对话框" title="创建新的phpunit测试对话框" src="/help/img/idea/2019.3/ps_create_new_php_test_phpunit_dialog.png" id="d6009fc5" width="706" height="790"></figure>            <p id="e8ae526b">提供生成的测试的参数：</p>            <ul class="list _bullet"><li class="list__item" id="39d2ed35"><p>测试文件模板，即PhpStorm将基于其生成测试类的模板。确保在“ <span class="control">测试文件模板”</span>列表中选择了<span class="control">PHPUnit</span>或<span class="control">PHPUnit6 +</span> 。</p></li><li class="list__item" id="b6ba8d7a"><p>测试类的名称。PhpStorm从生产类名称中自动将名称组成为<span class="filepath"><production class="">Test.php</production></span> 。</p></li><li class="list__item" id="46e70a98">                    <p id="613e84e4">根据生产类的包含目录和名称空间，配置的<a href="configuring-folders-within-a-content-root.html#mark">测试源root</a>及其<a href="keeping-namespaces-in-compliance-with-psr0-and-psr4.html">psr-4包前缀</a>或<a href="keeping-namespaces-in-compliance-with-psr0-and-psr4.html">Windows Server 2003的</a>名称，将自动建议测试类文件的文件夹。 <code class="code">directory</code>在<a href="https://phpunit.readthedocs.io/en/8.4/configuration.html#" rel="noopener noreferrer" data-external="true" target="_blank">phpunit.xml</a>配置文件中指定的值。</p>                    <p id="1dd0f53c">要指定其他文件夹，请单击<img class="inline-icon-9" src="/help/img/idea/2019.3/icons.general.ellipsis@2x.png" width="9" alt="浏览按钮">在<span class="control">目录</span>字段旁边，然后选择相关文件夹。</p>                </li><li class="list__item" id="250fc19a">                    <p id="397d5a0d">测试类将属于的名称空间，将根据生产类的包含目录和名称空间，配置的<a href="configuring-folders-within-a-content-root.html#mark">测试源root</a>及其<a href="keeping-namespaces-in-compliance-with-psr0-and-psr4.html">psr-4包前缀</a>自动建议该名称空间。</p>                </li><li class="list__item" id="09b0a92a">                    <p id="6cbd1ab0">生产类方法为其生成测试方法存根。在“ <span class="control">生成测试方法用于”</span>区域中，选中所需生产类方法旁边的复选框。要包括从父类继承的方法，请选中<span class="control">显示继承的方法</span>复选框。</p>                    <p id="b53f5da6">PhpStorm将自动将测试方法的名称编写为<code class="code">test<production method></code> 。您可以在<span class="control">“</span> <a href="settings-file-and-code-templates.html">文件和代码模板</a>设置”页面的<span class="control">“代码”</span>选项卡上自定义用于生成测试方法存根的<a href="settings-file-and-code-templates.html">代码模板</a> 。</p>                </li></ul>        </li></ol><p id="c2c53e8d">测试准备就绪后，可以通过选择<span class="control">导航|</span>返回到生产类<span class="control">。去测试主题</span> 。有关详细信息，请参阅<a href="navigating-between-test-and-test-subject.html">在测试和测试主题之间导航</a> 。</p><aside class="prompt" rel="c2c53e8d" id="c661d58a" data-type="note" data-title="">            <p id="1b099381">如果您依赖于PHPUnit配置文件来提供测试类的包含文件夹，请确保按照“ <a href="#php_test_frameworks_phpunit_integrate">将PHPUnit与PhpStorm项目集成”中的</a>描述在“ <a href="php-test-frameworks.html">测试框架”</a>页面上选择了该文件夹。</p>        </aside></section>        <div class="chapter"><h3 id="ps_phpunit_generate_test_method">生成PHPUnit测试方法</h3>            <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="9f521207"><p>在编辑器中打开所需的测试类，然后将插入号放置在类定义内的任何位置。</p></li><li class="list__item" id="1b3bc6a1"><p>在上下文菜单中选择“ <span class="control">生成</span> ”或按<kbd data-primary_default_for_windows="Alt+Insert" data-primary_default_for_macos="⌘+N" data-primary_intellij_idea_classic_macos="Ctrl+N" data-primary_emacs="Alt+Insert" data-primary_visual_studio="Ctrl+N" data-primary_default_for_xwin="Alt+Insert" data-primary_default_for_gnome="Alt+Insert" data-primary_default_for_kde="Alt+Insert" data-primary_eclipse="Alt+Insert" data-primary_eclipse_macos="⌘+N" data-primary_netbeans="Alt+Insert" data-primary_sublime_text="Alt+Insert" data-primary_sublime_text_macos="⌘+N" data-secondary_default_for_windows="N/A" data-secondary_default_for_macos="⌘N" data-secondary_intellij_idea_classic="⌃N" data-secondary_emacs="N/A" data-secondary_visual_studio="⌃N" data-secondary_default_for_xwin="N/A" data-secondary_default_for_gnome="N/A" data-secondary_default_for_kde="N/A" data-secondary_eclipse="N/A" data-secondary_eclipse_macos="⌘N" data-secondary_netbeans="N/A" data-secondary_sublime_text="N/A" data-secondary_sublime_text_macos="⌘N">Alt+Insert</kbd> 。然后从“ <span class="control">生成”</span>列表中选择“ <span class="control">测试方法</span> ”。</p></li><li class="list__item" id="8e7d3139">                    <p id="62f53ff1">设置测试<span class="emphasis">装置</span> ，即为测试开始之前模拟所需环境的代码生成存根，并在测试结束后返回原始环境：</p>                    <ul class="list _ul"><li class="list__item" id="ba297ff8"><p>在上下文菜单中选择“ <span class="control">生成</span> ”或按<kbd data-primary_default_for_windows="Alt+Insert" data-primary_default_for_macos="⌘+N" data-primary_intellij_idea_classic_macos="Ctrl+N" data-primary_emacs="Alt+Insert" data-primary_visual_studio="Ctrl+N" data-primary_default_for_xwin="Alt+Insert" data-primary_default_for_gnome="Alt+Insert" data-primary_default_for_kde="Alt+Insert" data-primary_eclipse="Alt+Insert" data-primary_eclipse_macos="⌘+N" data-primary_netbeans="Alt+Insert" data-primary_sublime_text="Alt+Insert" data-primary_sublime_text_macos="⌘+N" data-secondary_default_for_windows="N/A" data-secondary_default_for_macos="⌘N" data-secondary_intellij_idea_classic="⌃N" data-secondary_emacs="N/A" data-secondary_visual_studio="⌃N" data-secondary_default_for_xwin="N/A" data-secondary_default_for_gnome="N/A" data-secondary_default_for_kde="N/A" data-secondary_eclipse="N/A" data-secondary_eclipse_macos="⌘N" data-secondary_netbeans="N/A" data-secondary_sublime_text="N/A" data-secondary_sublime_text_macos="⌘N">Alt+Insert</kbd> 。然后从“ <span class="control">生成”</span>列表中选择“ <span class="control">SetUp方法”</span>或“ <span class="control">TearDown方法</span> ”。</p></li></ul>                    <p id="4bb2a78f">有关更多详细信息，请参见<a href="https://phpunit.de/manual/current/en/fixtures.html" rel="noopener noreferrer" data-external="true" target="_blank">PHPUnit官方网站上的Fixtures</a> 。</p>                </li></ol><p id="df767043">您可以自定义<a href="using-file-and-code-templates.html">代码模板</a>用于在发生PHPUnit的测试方法<a href="settings-file-and-code-templates.html">文件和代码模板</a>页面<a name="open_settings"></a>的<a name="settings_dialog"></a> <span class="control">设置/首选项</span>对话框<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd> 。要快速访问此页面，请在“ <span class="control">生成”</span>列表中，从方法的子菜单中选择“ <span class="control">编辑模板</span> ”。</p><figure><img alt="编辑PHPUnit方法模板" title="编辑PHPUnit方法模板" src="/help/img/idea/2019.3/ps_generate_PHPUnit_Test_method_template.png" id="8df7a1cc" width="287" height="482"></figure></section>        </div>    </div>    <div class="chapter"><h2 id="run_phpunit_tests" data-toc="Using_PhpUnit_framework#run_phpunit_tests">运行和调试PHPUnit测试</h2>        <p id="b126c01f">            <a name="unit_testing_run_from_context_menu_save_default_configuration_intro"></a>您可以运行和调试单个测试，也可以运行和调试整个文件和文件夹中的测试。PhpStorm使用默认设置创建运行/调试配置，然后启动测试。您以后可以保存此配置以供进一步使用。</p>        <section class="procedure-steps"><h3 id="7e73cf6e">运行或调试PHPUnit测试</h3><ul class="list "><li class="list__item" id="20c19117">                <a name="run_debug_tests_general"></a>                        <p id="06889311">在“项目”工具窗口中，选择要从中运行测试的文件或文件夹，然后从所选内容的上下文菜单中选择<span class="control">“运行<file or="" folder="">”</file></span>或“ <span class="control">调试” <file or="" folder="">。</file></span></p>        <figure><img alt="ps_test_frameworks_phpunit_launch_tests.png" title="ps_test_frameworks_phpunit_launch_tests.png" src="/help/img/idea/2019.3/ps_test_frameworks_phpunit_launch_tests.png" id="01e0ba8f" width="442" height="761"></figure>        <p id="2a152b3a">PhpStorm会生成默认的运行配置，并使用它启动运行/调试测试会话。</p>                </li></ul></section>        <section class="procedure-steps"><h3 id="a286bf2f">运行或调试单个测试</h3><ul class="list "><li class="list__item" id="38893ae2"><p>从上下文菜单中打开该测试文件在编辑器中，右键单击测试的呼叫，然后选择<span class="control"><test_name>Run“”</test_name></span>或<span class="control">调试<test_name>'。</test_name></span></p></li></ul></section>        <section class="procedure-steps"><h3 id="72ac43ef">运行一系列测试</h3><ol class="list _decimal"><li class="list__item" id="caf5c763"><p>在编辑器中打开目标文件，右键单击所需的测试目标，即要测试的类或方法，然后选择“ <span class="menupath" data-skip-index="skip">转至| | | |”。测试</span>或按<kbd data-primary_default_for_windows="Ctrl+Shift+T" data-primary_default_for_macos="Shift+⌘+T" data-primary_intellij_idea_classic_macos="Shift+⌘+T" data-primary_emacs="Ctrl+Shift+T" data-primary_visual_studio="Ctrl+Shift+T" data-primary_default_for_xwin="Ctrl+Shift+T" data-primary_default_for_gnome="Ctrl+Shift+T" data-primary_default_for_kde="Ctrl+Shift+T" data-primary_eclipse="N/A" data-primary_eclipse_macos="N/A" data-primary_netbeans="Ctrl+Shift+T" data-primary_sublime_text="N/A" data-primary_sublime_text_macos="N/A" data-secondary_default_for_windows="⌃⇧T" data-secondary_default_for_macos="⇧⌘T" data-secondary_intellij_idea_classic="⇧⌘T" data-secondary_emacs="⌃⇧T" data-secondary_visual_studio="⌃⇧T" data-secondary_default_for_xwin="⌃⇧T" data-secondary_default_for_gnome="⌃⇧T" data-secondary_default_for_kde="⌃⇧T" data-secondary_eclipse="N/A" data-secondary_eclipse_macos="N/A" data-secondary_netbeans="⌃⇧T" data-secondary_sublime_text="N/A" data-secondary_sublime_text_macos="N/A">Ctrl+Shift+T</kbd> 。</p></li><li class="list__item" id="ab2dc90d">                <p id="e31f8238">从弹出菜单中，选择要执行的测试。供多选使用<kbd data-primary_default_for_windows="Ctrl" data-primary_default_for_macos="Ctrl" data-primary_intellij_idea_classic_macos="Ctrl" data-primary_emacs="Ctrl" data-primary_visual_studio="Ctrl" data-primary_default_for_xwin="Ctrl" data-primary_default_for_gnome="Ctrl" data-primary_default_for_kde="Ctrl" data-primary_eclipse="Ctrl" data-primary_eclipse_macos="Ctrl" data-primary_netbeans="Ctrl" data-primary_sublime_text="Ctrl" data-primary_sublime_text_macos="Ctrl" data-secondary_default_for_windows="⌘" data-secondary_default_for_macos="⌘" data-secondary_intellij_idea_classic="⌘" data-secondary_emacs="⌘" data-secondary_visual_studio="⌘" data-secondary_default_for_xwin="⌘" data-secondary_default_for_gnome="⌘" data-secondary_default_for_kde="⌘" data-secondary_eclipse="⌘" data-secondary_eclipse_macos="⌘" data-secondary_netbeans="⌘" data-secondary_sublime_text="⌘" data-secondary_sublime_text_macos="⌘">Ctrl</kbd>和<kbd data-primary_default_for_windows="Shift" data-primary_default_for_macos="Shift" data-primary_intellij_idea_classic_macos="Shift" data-primary_emacs="Shift" data-primary_visual_studio="Shift" data-primary_default_for_xwin="Shift" data-primary_default_for_gnome="Shift" data-primary_default_for_kde="Shift" data-primary_eclipse="Shift" data-primary_eclipse_macos="Shift" data-primary_netbeans="Shift" data-primary_sublime_text="Shift" data-primary_sublime_text_macos="Shift" data-secondary_default_for_windows="⇧" data-secondary_default_for_macos="⇧" data-secondary_intellij_idea_classic="⇧" data-secondary_emacs="⇧" data-secondary_visual_studio="⇧" data-secondary_default_for_xwin="⇧" data-secondary_default_for_gnome="⇧" data-secondary_default_for_kde="⇧" data-secondary_eclipse="⇧" data-secondary_eclipse_macos="⇧" data-secondary_netbeans="⇧" data-secondary_sublime_text="⇧" data-secondary_sublime_text_macos="⇧">Shift</kbd> 。</p>                <figure><img alt="运行一系列测试" title="运行一系列测试" src="/help/img/idea/2019.3/ps_run_tests_selection.png" id="a36f2ba8" width="423" height="266"></figure>            </li><li class="list__item" id="260d4fd7">                <p id="2ed69124">按<kbd data-primary_default_for_windows="Ctrl+Shift+F10" data-primary_default_for_macos="Ctrl+Shift+R" data-primary_intellij_idea_classic_macos="Ctrl+Shift+F10" data-primary_emacs="Ctrl+Shift+F10" data-primary_visual_studio="Ctrl+F9" data-primary_default_for_xwin="Ctrl+Shift+F10" data-primary_default_for_gnome="Ctrl+Shift+F10" data-primary_default_for_kde="Ctrl+Shift+F10" data-primary_eclipse="Ctrl+Shift+F10" data-primary_eclipse_macos="Ctrl+Shift+R" data-primary_netbeans="Shift+Alt+F6" data-primary_sublime_text="Ctrl+Shift+F10" data-primary_sublime_text_macos="N/A" data-secondary_default_for_windows="⌃⇧F10" data-secondary_default_for_macos="⌃⇧R" data-secondary_intellij_idea_classic="⌃⇧F10" data-secondary_emacs="⌃⇧F10" data-secondary_visual_studio="⌃F9" data-secondary_default_for_xwin="⌃⇧F10" data-secondary_default_for_gnome="⌃⇧F10" data-secondary_default_for_kde="⌃⇧F10" data-secondary_eclipse="⌃⇧F10" data-secondary_eclipse_macos="⌃⇧R" data-secondary_netbeans="⌥⇧F6" data-secondary_sublime_text="⌃⇧F10" data-secondary_sublime_text_macos="N/A">Ctrl+Shift+F10</kbd>运行测试选择。</p>            </li></ol><p id="a94fc8a9">测试会话结束后，PhpStorm会自动创建其<span class="control">Test作用域</span>设置为<span class="control">Composite</span>的运行/调试配置。有关详细信息，请参见<a href="run-debug-configuration-phpunit.html">运行/调试配置：PHPUnit</a> 。</p></section>        <section class="procedure-steps"><h3 id="ec8978c0">保存自动生成的默认配置</h3><ul class="list "><li class="list__item" id="651b1ab0"><p>                <a name="save_generated_configuration"></a>测试会话结束后，选择<span class="control">保存<default_test_configuration_name></default_test_configuration_name></span>从文件或文件夹的上下文菜单中。</p></li></ul></section>        <section class="procedure-steps"><h3 id="d4aca70c">通过先前保存的运行/调试配置运行或调试测试</h3><ul class="list "><li class="list__item" id="44b53c65"><p>                <a name="ps_test_fw_run_through_saved_run_config"></a>从工具栏上的列表中选择所需的PHPUnit配置，然后单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.execute@2x.png" width="16" alt="运行按钮">要么<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.startDebugger_dark@2x.png" width="16" alt="调试按钮"> 。</p></li></ul></section>        <section class="procedure-steps"><h3 id="bf4d3cae">创建自定义运行/调试配置</h3><ol class="list _decimal"><li class="list__item" id="69777798"><p>                <a name="ps_test_fw_create_run_config"></a>在“项目”工具窗口中，选择要运行测试的文件或文件夹，然后从上下文菜单中选择“ <span class="control">创建运行配置</span> ”。或者，选择<span class="menupath" data-skip-index="skip">运行|</span>从主菜单中<span class="menupath" data-skip-index="skip">编辑配置</span> ，然后单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加图标">然后从列表中选择<span class="control">PHPUnit</span> 。</p></li><li class="list__item" id="8478ffc6"><p>                <a name="finalize_generated_configuration"></a>在打开的<a href="run-debug-configuration-phpunit.html">“运行/调试配置：PHPUnit”</a>对话框中，指定要运行的方案，选择要使用的<span class="emphasis">PHP解释器</span> ，并通过指定要传递给PHP可执行文件的选项和参数来自定义其行为。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="phpunit_monitor_test_results" data-toc="Using_PhpUnit_framework#phpunit_monitor_test_results">监控测试结果</h2>        <a name="ps_php_test_fw_monitor_test"></a>                        <p id="a6aafa68">PhpStorm在“ <a href="run-tool-window.html">运行工具”窗口</a>的<a href="run-tool-window.html">“</a> <a href="test-runner-tab.html">测试运行器”选项卡</a>中显示测试执行结果。</p>                <figure><img alt="ps_test_result_phpunit.png" title="ps_test_result_phpunit.png" src="/help/img/idea/2019.3/ps_test_result_phpunit.png" id="676e812b" width="717" height="458"></figure>        <p id="ed76f979">该选项卡分为2个主要区域：</p>        <ul class="list _ul"><li class="list__item" id="05cf8c29"><p>左侧区域使您可以深入浏览所有单元测试，以查看成功和失败的单元测试。您可以过滤测试，导出结果，并使用上下文菜单命令运行特定的测试或导航至源代码。</p></li><li class="list__item" id="de49f338"><p>右侧区域显示原始PHPUnit输出。</p></li></ul>        </div>    <div class="chapter"><h2 id="running_php_unit_tests_automatically" data-toc="Using_PhpUnit_framework#running_php_unit_tests_automatically">自动运行PHPUnit测试</h2>        <p id="0c5bd5e2">更改受影响的代码后，可以使PhpStorm自动重新运行测试。此选项是根据运行/调试配置配置的，并且可以应用于测试，测试文件，文件夹或测试的组合选择，具体取决于此运行/调试配置中指定的测试范围。</p>        <section class="procedure-steps"><h3 id="f05430de">自动配置重新运行测试</h3><ol class="list _decimal"><li class="list__item" id="ed6aa1c0"><p>运行测试。</p></li><li class="list__item" id="b46afc8c">                <p id="729a8a1c">在“ <span class="control">测试运行器”</span>选项卡上，按<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.swapPanels@2x.png" width="16" alt="ps_icon_phpunit_run_test_automatically.png">工具栏上的切换按钮：</p>                <figure><img alt="ps_phpunit_enable-auto-test.png" title="ps_phpunit_enable-auto-test.png" src="/help/img/idea/2019.3/ps_phpunit_enable-auto-test.png" id="36fd32ac" width="371" height="458"></figure>            </li><li class="list__item" id="517289a4">                <p id="8cef3c9b">（可选）单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.gearPlain@2x.png" width="16" alt="设定按钮">按钮，并根据代码中的更改设置启动测试的时间延迟：</p>                <figure><img alt="ps_phpunit_set-auto-test-delay.png" title="ps_phpunit_set-auto-test-delay.png" src="/help/img/idea/2019.3/ps_phpunit_set-auto-test-delay.png" id="d5b591e6" width="717" height="429"></figure>            </li></ol></section>    </div>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="viewing-and-exploring-test-results.html">查看和浏览</a> <a class="navigation-links__next" href="using-behat-framework.html">使用Behat进行的</a> <a class="navigation-links__prev" href="viewing-and-exploring-test-results.html">测试结果</a> <a class="navigation-links__next" href="using-behat-framework.html">测试</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>