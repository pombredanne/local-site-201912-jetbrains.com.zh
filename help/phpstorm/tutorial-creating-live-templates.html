<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>教程：创建实时模板-帮助|帮助暴风雨</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Tutorial__Creating_Live_templates" data-breadcrumbs="Working_with_source_code.xml|Working with source code/Using_Live_Templates.xml|Live templates/Tutorial__Creating_Live_templates.xml|Tutorial: Creating Live templates" data-main-title="Tutorial: Creating Live templates" data-article-props="
                {
                
            " seeals=":[=" titl=":=" procedure=",=" link=":=" ur=":" using-live-templates.htm="," tex=":" live="" template="}=" web="" resource=",=" http:="" ="" www.jetbrains.net="" devnet="" community="" w="," discussion="" foru="}=" ="text"="issue=" }="" ]}="" ]=""><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索PhpStorm帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PhpStorm 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_default_for_macos" data-group="primary">macOS的默认设置</option><option value="primary_intellij_idea_classic_macos" data-group="primary">IntelliJ IDEA经典版（macOS）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_macos" data-group="primary">Eclipse（macOS）</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_sublime_text_macos" data-group="primary">崇高文字（macOS）</option><option value="secondary_default_for_windows" data-group="secondary">Windows的默认设置</option><option value="secondary_default_for_macos" data-group="secondary">macOS的默认设置</option><option value="secondary_intellij_idea_classic" data-group="secondary">IntelliJ IDEA经典版</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_macos" data-group="secondary">Eclipse（macOS）</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_sublime_text" data-group="secondary">崇高文字</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Tutorial__Creating_Live_templates.xml" data-toc="Tutorial__Creating_Live_templates">教程：创建实时模板</h1>    <p id="ef94d5bc">开发PHP应用程序时，通常重复执行的任务是在其中创建Controller类和操作。在本教程中，我们将创建几个实时模板以使其自动化。</p>    <div class="chapter"><h2 id="creating-a-controller-class-live-template">创建一个控制器类实时模板</h2>        <p id="89baac5d">让我们从<span class="emphasis">Controller</span>类开始。控制器类的名称通常像<code class="code">BlogController</code> ，并扩展了一些基本<code class="code">Controller</code>类。</p>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="5c24ab5f"><p>                <a name="open_settings"></a>在里面<a name="settings_dialog"></a> <span class="control">设置/首选项</span>对话框<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd> ，选择<span class="menupath" data-skip-index="skip">编辑器|实时模板</span> 。</p></li><li class="list__item" id="04a94359"><p>点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加按钮">创建一个新的实时模板。为其提供缩写，例如， <code class="code">sc</code> （代表<span class="emphasis">Sample Controller</span> ），描述，模板适用的上下文（在这种情况下为PHP）以及以下文本：</p><div class="code-block" data-lang="velocity">类$ Name $ Controller扩展了Controller {$ END $}</div>            <p></p></li></ol><p id="c15eb866">生成的模板应如下所示：</p><figure><img alt="实时模板设置页面" title="实时模板设置页面" src="/help/img/idea/2019.3/ps_live_template_settings_page.png" id="b2a3585d" width="857" height="1288"></figure></section>        <p id="f865f44a">我们现在可以打开一个<span class="filepath">php</span>文件（或创建一个新文件）并使用创建的<code class="code">sc</code>实时模板。扩展模板代码后，我们可以提供控制器的类名，然后按<kbd data-primary_default_for_windows="Tab" data-primary_default_for_macos="Tab" data-primary_intellij_idea_classic_macos="Tab" data-primary_emacs="Tab" data-primary_visual_studio="Tab" data-primary_default_for_xwin="Tab" data-primary_default_for_gnome="Tab" data-primary_default_for_kde="Tab" data-primary_eclipse="Tab" data-primary_eclipse_macos="Tab" data-primary_netbeans="Tab" data-primary_sublime_text="Tab" data-primary_sublime_text_macos="Tab" data-secondary_default_for_windows="⇥" data-secondary_default_for_macos="⇥" data-secondary_intellij_idea_classic="⇥" data-secondary_emacs="⇥" data-secondary_visual_studio="⇥" data-secondary_default_for_xwin="⇥" data-secondary_default_for_gnome="⇥" data-secondary_default_for_kde="⇥" data-secondary_eclipse="⇥" data-secondary_eclipse_macos="⇥" data-secondary_netbeans="⇥" data-secondary_sublime_text="⇥" data-secondary_sublime_text_macos="⇥">Tab</kbd>将插入符号移到<code class="code">$END$</code>变量的位置。</p>                <figure id="0a7dea12" width="550" data-theme="light"><img class="js-gif" src="/help/img/idea/2019.3/ps_controller_live_template.png" width="550" data-gif-src="/help/img/idea/2019.3/ps_controller_live_template.animated.gif" style="width:550px"></figure>        <p id="8f2eeb59">由于每个控制器类通常都驻留在其自己的文件中，因此该<span class="emphasis">示例控制器</span>模板也可以实现为<a href="using-file-and-code-templates.html">File Template</a> 。</p>        <div class="chapter"><h3 id="6aa06f1a">变量和表达式</h3>            <p id="996a3d0c">到目前为止，我们只使用了一个<code class="code">$Name$</code>我们自己和特殊的变量<code class="code">$END$</code> PhpStorm提供的变量。控制器类的命名通常与它们所在的<span class="filepath">php</span>文件完全相同：例如， <span class="filepath">MyController.php</span>文件将包含<code class="code">MyController</code>控制器类。使用实时模板，可以使PhpStorm根据文件名预先填充控制器名称。</p>            <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="bd31e8c3"><p>                    <a name="open_settings"></a>在里面<a name="settings_dialog"></a> <span class="control">设置/首选项</span>对话框<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd> ，选择<span class="menupath" data-skip-index="skip">编辑器|实时模板</span> 。然后，选择我们之前创建的<span class="control">sc</span>模板。</p></li><li class="list__item" id="f2b7ce57">                    <p id="f91af888">将<span class="control">sc</span>模板的文本更改为以下内容：</p>                    <div class="code-block" data-lang="velocity">类$ Name $扩展了控制器{$ END $}</div>                </li><li class="list__item" id="ecfbbae4">                    <p id="template-vars">单击<span class="control">编辑变量</span> ，查看IDE是否已识别<code class="code">$Name$</code>作为变量。</p><aside class="prompt" rel="template-vars" id="cc66153e" data-type="note" data-title="">                <p id="0f82aa64">有关可用表达式的完整列表，请参见<a href="template-variables.html">实时模板变量</a> 。</p>            </aside>                    <figure><img alt="控制器实时模板变量" title="控制器实时模板变量" src="/help/img/idea/2019.3/ps_controller_live_template_variables.png" id="4e51b315" width="526" height="428"></figure>                    <p id="d2ceeb74">配置<code class="code">$Name$</code>变量如下：</p>                    <ul class="list _ul"><li class="list__item" id="44bdfeb7"><p>提供默认值和表达式。对于我们的情况，我们将使用<code class="code">fileNameWithoutExtension()</code>表达式，它将返回不带<span class="filepath">.php</span>扩展名的<span class="filepath">文件</span>名。</p></li><li class="list__item" id="a3391f56"><p>选中“ <span class="control">如果定义</span>则<span class="control">跳过”</span>复选框，以便当表达式提供值时，在编辑器中使用实时模板时，我们不必自己提供值。</p></li></ul>                </li></ol></section>                        <p id="b6944477">当我们应用实时模板时，该类现在将继承文件名，并且插入符号将立即放置在类主体中。</p>            <figure id="53490c4a" width="550" data-theme="light"><img class="js-gif" src="/help/img/idea/2019.3/ps_controller_live_template_modified.png" width="550" data-gif-src="/help/img/idea/2019.3/ps_controller_live_template_modified.animated.gif" style="width:550px"></figure>                </div>    </div>    <div class="chapter"><h2 id="0f70e2ac">创建一个控制器动作实时模板</h2>        <p id="89585d24">的<code class="code">sc</code>模板非常简单，可以直接在“ <span class="control">设置/首选项”</span>对话框中创建。但是，在更复杂的情况下，在编辑器中编写代码然后从中创建模板可能会更容易。</p>                <p id="dbe4394f">让我们为基本的控制器操作创建一个模板。</p>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="8b5a410f">                <p id="89a69b05">在代码编辑器中，就像编写应用程序时一样，编写一些代码。</p>                <div class="code-block" data-lang="php">类SampleController扩展了控制器{公共函数indexAction（）{return $ this-> render（''）; }}</div>            </li><li class="list__item" id="36cf183f"><p>选择创建的<code class="code">indexAction</code>功能在编辑器中并调用<span class="menupath" data-skip-index="skip">工具|</span>从主菜单中<span class="menupath" data-skip-index="skip">另存为活动模板...</span>命令。</p></li><li class="list__item" id="91dfbfcb">                <p id="3f804172">在打开的<span class="control">另存为实时模板...</span>对话框中，请注意，此模板的上下文是根据我们在编辑器中使用的文件类型自动设置的。</p>                <figure><img alt="另存为实时模板对话框" title="另存为实时模板对话框" src="/help/img/idea/2019.3/ps_action_live_template_dialog.png" id="e1e6b405" width="625" height="854"></figure>            </li><li class="list__item" id="df4d92cc">                <p id="899c076c">通过将模板的文本更改为以下内容来配置模板并添加变量：</p>                <div class="code-block" data-lang="velocity">公共功能$ Action $ Action（）{$ END $ return $ this-> render（'$ Bundle $：$ Folder $：$ Action $ .html.twig'）; }</div>            </li><li class="list__item" id="6ed3e076">                <p id="5e4665ad">点击<span class="control">修改变量，</span>然后指定表达式<code class="code">$Folder$</code>变量和默认值<code class="code">$Bundle$</code>变量。</p>                <figure><img alt="控制器动作实时模板变量" title="控制器动作实时模板变量" src="/help/img/idea/2019.3/ps_action_live_template_vars.png" id="846f583b" width="526" height="428"></figure>            </li></ol></section>        <p id="0e012330">应用更改后，我们可以使用<span class="control">sa</span>模板生成控制器动作。</p>        <figure id="ca76821b" width="600" data-theme="light"><img class="js-gif" src="/help/img/idea/2019.3/ps_action_live_template.png" width="600" data-gif-src="/help/img/idea/2019.3/ps_action_live_template.animated.gif" style="width:600px"></figure>    </div>    <div class="chapter"><h2 id="5cde24f3">创建环绕声模板</h2>        <p id="78bf7653">在某些情况下，用模板“包围”现有代码可能很有用。顾名思义， <span class="emphasis">环绕声模板可</span>让您做到这一点。可以使用与实时模板完全相同的方式来创建它们，但是还涉及使用<code class="code">$SELECTION$</code>变量。</p>        <p id="e0878afa">例如，让我们创建一个环绕模板，将所选代码包装在<code class="code">try/catch</code>阻止并记录异常。</p>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="bc89e227">                <p id="93b7cefe">创建一个包含以下文本的实时模板（我们使用的通知<code class="code">$$</code>逃脱PHP的<code class="code">$</code>美元符号）：</p>                <div class="code-block" data-lang="velocity">尝试{$ SELECTION $} catch（$ TYPE $ $$$ VARIABLENAME $）{Logger :: log（$$$ VARIABLENAME $）; $ END $}</div>                <p id="f3756fa9">模板中使用了以下变量：</p>                <div class="table-wrapper"><table class=" no_header" width="100%" id="d9cc9474"><tbody><tr id="61a04049" class="ijRowOdd"><td id="128e2a5b"><code class="code">$SELECTION$</code></td><td id="2a274a98"><p>表示我们在编辑器中选择的代码。</p></td></tr><tr id="b8842319" class="ijRowEven"><td id="7f3a0674"><code class="code">$TYPE$</code></td><td id="904f855f"><p>用作例外类型的占位符。</p></td></tr><tr id="cb1e1d28" class="ijRowOdd"><td id="9b09bb16"><code class="code">$VARIABLENAME$</code></td><td id="9a5c9809"><p>用作异常变量名称的占位符。</p></td></tr><tr id="fd9475e9" class="ijRowEven"><td id="267b2bfb"><code class="code">$END$</code></td><td id="b0b40e7a"><p>表示模板扩展后的插入符位置。</p></td></tr></tbody></table></div>            </li><li class="list__item" id="5a5c3939">                <p id="2ebafec4">在“ <span class="control">编辑变量”</span>对话框中，提供<code class="code">$TYPE$</code>与<code class="code">complete()</code>表达式，以便当我们扩展模板时，将触发完成。此外，为<code class="code">$TYPE$</code>和<code class="code">$VARIABLENAME$</code> 。</p>                <figure><img alt="环绕模板变量" title="环绕模板变量" src="/help/img/idea/2019.3/ps_surround_template_vars.png" id="191fecaf" width="526" height="428"></figure>            </li></ol></section>        <p id="1031bc76">应用更改后，我们可以如下使用环绕模板：选择一些代码，按<kbd data-primary_default_for_windows="Ctrl+Alt+J" data-primary_default_for_macos="Alt+⌘+J" data-primary_intellij_idea_classic_macos="Alt+⌘+J" data-primary_emacs="Ctrl+Alt+J" data-primary_visual_studio="Ctrl+Alt+J" data-primary_default_for_xwin="Ctrl+Alt+J" data-primary_default_for_gnome="Ctrl+Alt+J" data-primary_default_for_kde="Ctrl+Alt+J" data-primary_eclipse="Ctrl+Alt+J" data-primary_eclipse_macos="Alt+⌘+J" data-primary_netbeans="Ctrl+Alt+J" data-primary_sublime_text="Ctrl+Alt+J" data-primary_sublime_text_macos="Alt+⌘+J" data-secondary_default_for_windows="⌃⌥J" data-secondary_default_for_macos="⌥⌘J" data-secondary_intellij_idea_classic="⌥⌘J" data-secondary_emacs="⌃⌥J" data-secondary_visual_studio="⌃⌥J" data-secondary_default_for_xwin="⌃⌥J" data-secondary_default_for_gnome="⌃⌥J" data-secondary_default_for_kde="⌃⌥J" data-secondary_eclipse="⌃⌥J" data-secondary_eclipse_macos="⌥⌘J" data-secondary_netbeans="⌃⌥J" data-secondary_sublime_text="⌃⌥J" data-secondary_sublime_text_macos="⌥⌘J">Ctrl+Alt+J</kbd> ，然后选择新创建的模板。</p>        <p id="6263314a">结果，代码被包装在模板中，在异常类型上触发完成，并且将异常变量命名为<code class="code">$exception</code>默认。我们可以选择正确的类型并按<kbd data-primary_default_for_windows="Tab" data-primary_default_for_macos="Tab" data-primary_intellij_idea_classic_macos="Tab" data-primary_emacs="Tab" data-primary_visual_studio="Tab" data-primary_default_for_xwin="Tab" data-primary_default_for_gnome="Tab" data-primary_default_for_kde="Tab" data-primary_eclipse="Tab" data-primary_eclipse_macos="Tab" data-primary_netbeans="Tab" data-primary_sublime_text="Tab" data-primary_sublime_text_macos="Tab" data-secondary_default_for_windows="⇥" data-secondary_default_for_macos="⇥" data-secondary_intellij_idea_classic="⇥" data-secondary_emacs="⇥" data-secondary_visual_studio="⇥" data-secondary_default_for_xwin="⇥" data-secondary_default_for_gnome="⇥" data-secondary_default_for_kde="⇥" data-secondary_eclipse="⇥" data-secondary_eclipse_macos="⇥" data-secondary_netbeans="⇥" data-secondary_sublime_text="⇥" data-secondary_sublime_text_macos="⇥">Tab</kbd>最终在<code class="code">catch</code>主体，位于记录语句的下方。</p>        <figure id="0353f83f" width="600" data-theme="light"><img class="js-gif" src="/help/img/idea/2019.3/ps_expand_surround_template.png" width="600" data-gif-src="/help/img/idea/2019.3/ps_expand_surround_template.animated.gif" style="width:600px"></figure>    </div>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="sharing-live-templates.html">共享实时模板</a> <a class="navigation-links__next" href="wrapping-a-tag-example-of-applying-surround-live-templates.html">包装标签。应用环绕声实时模板的示例</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>