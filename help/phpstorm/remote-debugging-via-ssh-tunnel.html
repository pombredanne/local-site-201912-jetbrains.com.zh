<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Remote debugging via SSH tunnel - Help | PhpStorm</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Remote_debugging_via_SSH_tunnel" data-breadcrumbs="Debugging_with_PhpStorm_Ultimate_Guide.xml|Debugging with PhpStorm: Ultimate Guide/PHP_Debugging_Session.xml|PHP Debugging Session/Remote_debugging_via_SSH_tunnel.xml|Remote debugging via SSH tunnel" data-main-title="Remote debugging via SSH tunnel"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search PhpStorm Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PhpStorm 2019.3 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default_for_windows" selected>Default for Windows</option><option data-group="primary" value="primary_default_for_macos">Default for macOS</option><option data-group="primary" value="primary_intellij_idea_classic_macos">IntelliJ IDEA Classic (macOS)</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="primary" value="primary_default_for_xwin">Default for XWin</option><option data-group="primary" value="primary_default_for_gnome">Default for GNOME</option><option data-group="primary" value="primary_default_for_kde">Default for KDE</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="primary" value="primary_eclipse_macos">Eclipse (macOS)</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_sublime_text">Sublime Text</option><option data-group="primary" value="primary_sublime_text_macos">Sublime Text (macOS)</option><option data-group="secondary" value="secondary_default_for_windows">Default for Windows</option><option data-group="secondary" value="secondary_default_for_macos">Default for macOS</option><option data-group="secondary" value="secondary_intellij_idea_classic">IntelliJ IDEA Classic</option><option data-group="secondary" value="secondary_emacs">Emacs</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_default_for_xwin">Default for XWin</option><option data-group="secondary" value="secondary_default_for_gnome">Default for GNOME</option><option data-group="secondary" value="secondary_default_for_kde">Default for KDE</option><option data-group="secondary" value="secondary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_eclipse_macos">Eclipse (macOS)</option><option data-group="secondary" value="secondary_netbeans">NetBeans</option><option data-group="secondary" value="secondary_sublime_text">Sublime Text</option><option data-group="secondary" value="secondary_sublime_text_macos">Sublime Text (macOS)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 data-toc="Remote_debugging_via_SSH_tunnel" id="Remote_debugging_via_SSH_tunnel.xml">Remote debugging via SSH tunnel</h1>    <p id="f29bdaa0">        In this tutorial we'll see how to use an SSH tunnel to setup a secure connection        between the development machine and a remote server. This can be useful for debugging code on a remote machine        when there are firewalls in between, or a NAT router        prevents direct connection, or the ISP or network infrastructure does not allow incoming TCP connections to the        developer machine.    </p>    <div class="chapter"><h2 id="fea97116" data-toc="Remote_debugging_via_SSH_tunnel#fea97116">Preparing the debugging engine</h2>        <a name="configure_debugging_engine_prerequisites"></a>        <p id="0eb07737">            Before you start debugging, make sure that you have a debugging engine installed and configured properly. PhpStorm supports debugging with two most popular tools:            <a href="http://xdebug.org/download.php" data-external="true" target="_blank" rel="noopener noreferrer">Xdebug</a> and <a href="http://www.zend.com/en/products/studio/downloads" data-external="true" target="_blank" rel="noopener noreferrer">Zend Debugger</a>.            These tools cannot be used simultaneously because they block each other.            To avoid this problem, you need to update the corresponding sections in the <span class="filepath">php.ini</span>            file as described in <a href="configuring-xdebug.html">Configuring Xdebug</a> and <a href="configuring-zend-debugger.html">Configuring Zend Debugger</a>.        </p>        <p id="890eafaa">            To open the active <span class="filepath">php.ini</span> file in the editor:        </p>            <a name="ps_openActivePhpIni"></a>        <ol class="list _decimal"><li class="list__item" id="32d93e6e">                <p id="43954741"><a name="open_settings"></a>                In the        <a name="settings_dialog"></a>        <span class="control">Settings/Preferences</span> dialog <kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd>, click <span class="control">PHP</span> under <span class="control">Languages &amp; Frameworks</span>.                </p>            </li><li class="list__item" id="3b242cf9"><p>                On the <a href="php.html">PHP</a> page that opens, click <img class="inline-icon-9" src="/help/img/idea/2019.3/icons.general.ellipsis@2x.png" width="9" alt="the Browse button"> next                to the <span class="control">CLI Interpreter</span> field.            </p></li><li class="list__item" id="5e2d1979"><p>                In the <span class="control">CLI Interpreters</span> dialog that opens, the <span class="control">Configuration File</span> read-only field                shows the path to the active <span class="filepath">php.ini</span> file. Click <span class="control">Open in Editor</span>.            </p></li></ol>                    <p id="065f511b">            When using Xdebug, make sure at least the following settings are specified:        </p>        <div class="code-block" data-lang="none">
            [xdebug]
            zend_extension=xdebug_module_goes_here
            xdebug.remote_enable=1
            xdebug.remote_host=127.0.0.1
            xdebug.remote_port=9000
    </div>        <div class="chapter"><h3 id="b48de803">Listening for incoming debugger connections</h3>            <p id="1d56b77f">                <a name="enable_listening_debug_connections"></a>        In PhpStorm, enable listening to incoming debug connections by either clicking        <img class="inline-icon-16" src="/help/img/idea/2019.3/php.icons.debug_listen_off@2x.png" width="16" alt="the Start Listening for PHP Debug Connections button">        on the toolbar or selecting <span data-skip-index="skip" class="menupath">Run | Start Listening for PHP Debug Connections</span> in the main        menu. This will        ensure PhpStorm reacts when a debugging session is started and opens the <a href="debug-tool-window.html">Debug        tool window    </a> automatically. Before launching the script, make sure that either a <a href="using-breakpoints.html">        breakpoint    </a> is set or the        <span class="control">Break at first line in PHP scripts</span>        option is enabled on the        <a href="debug.html">Debug</a>        page of the <span class="control">Settings/Preferences</span> dialog <kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd>.                </p>        </div>    </div>    <div class="chapter"><h2 id="b0c621a8" data-toc="Remote_debugging_via_SSH_tunnel#b0c621a8">Set up an SSH tunnel to the remote machine</h2>        <p id="66af79a8">            What we want to do is connect to the remote machine over SSH and set up port forwarding for port            <span class="filepath">9000</span>            (for Xdebug) or port <span class="filepath">10137</span> (Zend Debugger). The idea is to create a "virtual" TCP port on            the remote server that sends its traffic to a TCP port on our own machine, tunneling traffic over SSH.        </p>        <figure><img alt="ssh tunnel explained" title="ssh tunnel explained" src="/help/img/idea/2019.3/ssh-tunnel-explained.png" id="46dc2fbc" width="355" height="148"></figure>        <p id="899a0c04">            The SSH tunnel is used for connecting through a firewall and establishing a secure connection between the remote server and        the developer machine. When the remote server can connect to the developer machine directly (for example,        with a <a href="vagrant-support.html">Vagrant</a> machine), an SSH tunnel may not be needed.        </p>        <p id="c7cf7062">            In this case, we need to make the debugger connect back to the developer machine by setting            <code class="code">xdebug.remote_host=ip_address_goes_here</code>            (for Xdebug) or making sure the debug host is the IP address of the            developer machine (for Zend Debugger). This can be done using the <a href="https://www.jetbrains.com/phpstorm/marklets/" data-external="true" target="_blank" rel="noopener noreferrer">PhpStorm bookmarklets</a>, a <a href="browser-debugging-extensions.html">Browser Debugging Extension</a>, or the techniques outlined in            <a href="debugging-a-php-cli-script.html">Debugging PHP CLI scripts with PhpStorm</a>.        </p>        <p id="e8f50a30">            The setup process depends on the operating system and the debugger being used.        </p>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="a426153e">To set up an SSH tunnel on macOS or Linux</h3></div><div class="collapse__content"><ul class="list "><li class="list__item" id="9f80e2df">                <p id="14c1a159">                    Run the following command in the command line:                </p>                <div class="tabs" id="877e45f3"><div class="tabs__content" data-title="Xdebug" id="9f19a7df">                        <div class="code-block" data-lang="bash">
                            ssh -R 9000:localhost:9000 username_goes_here@hostname_goes_here
    </div>                                </div><div class="tabs__content" data-title="Zend Debugger" id="9a351ea0">                        <div class="code-block" data-lang="bash">
                            ssh -R 10137:localhost:10137 username_goes_here@hostname_goes_here                
    </div>                    </div></div>            </li></ul></div></div></section>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="012ecf55">To set up an SSH tunnel on Windows</h3></div><div class="collapse__content"><ol class="list _decimal"><li class="list__item" id="64f9ee1c"><p>                Download and install <a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" data-external="true" target="_blank" rel="noopener noreferrer">Putty</a>.            </p></li><li class="list__item" id="321a54c6">                <p id="2f25bd19">                    Configure the connection to the remote machine by providing the <span class="emphasis">hostname</span> and <span class="emphasis">port</span>.                </p>                <figure><img alt="ps putty 1" title="ps putty 1" src="/help/img/idea/2019.3/ps_putty-1.png" id="6f820002" width="500" height="686"></figure>            </li><li class="list__item" id="6e234192">                <p id="bdb52b23">Expand the <span data-skip-index="skip" class="menupath">Connection | SSH | Tunnels</span> node on the left and add a new forwarded                    port.                </p>                <ul class="list _ul"><li class="list__item" id="f4427081"><p>The source port will be <span class="filepath">9000</span> (for Xdebug) or                        <span class="filepath">10137</span>                        (for Zend Debugger).                    </p></li><li class="list__item" id="c927b477"><p>                        For destination, enter <span class="control">localhost:9000</span> (for Xdebug) or <span class="control">localhost:10137</span>                        (for Zend Debugger).                    </p></li></ul>                <p id="21d123cd">                    Make sure to select the "Remote" option and then click <span class="control">Add</span>.                </p>                <figure><img alt="ps putty 2" title="ps putty 2" src="/help/img/idea/2019.3/ps_putty-2.png" id="9f17a9b8" width="500" height="686"></figure>                <p id="95f48b46">                    Click <span class="control">Open</span> to connect to the remote server and setup the SSH tunnel.                </p>            </li></ol><p id="61a79a37">                Make sure that you are running a command to create an SSH tunnel from the developer's machine to the server            (not vice versa).            </p><p id="778dbf09">                When a machine is rebooted or the connection is lost, the SSH tunnel has to be reestablished.            </p></div></div></section>    </div>    <div class="chapter"><h2 id="fd00654a" data-toc="Remote_debugging_via_SSH_tunnel#fd00654a">Debugging</h2>        <p id="f84ea8d6">            Once the SSH tunnel is set up, we can start debugging using <a href="zero-configuration-debugging.html">zero-configuration debugging</a>         with Xdebug or Zend Debugger. When the debugger is started, PhpStorm will prompt to accept the incoming        connection.        </p>        <figure><img alt="ps incoming debugger connection" title="ps incoming debugger connection" src="/help/img/idea/2019.3/ps_incoming_debugger_connection.png" id="06c8574e" width="580" height="706"></figure>        <p id="9af01fce">            Once we accept it, we will be able to debug using the techniques outlined in <a href="debugging-code.html">Debugging</a>.        </p>    </div>    <div class="chapter"><h2 id="4ee618ab" data-toc="Remote_debugging_via_SSH_tunnel#4ee618ab">Debugging PHP CLI scripts with remote PHP interpreters or via SSH tunnel</h2>        <p id="a4d50d67">            When a <a href="configuring-remote-interpreters.html">remote PHP interpreter</a> is properly configured, it's possible to create a        run/debug configuration taking advantage of the remote PHP interpreter for debugging.        </p>        <p id="24c45810">            When the SSH tunnel is up and running, we can also <a href="debugging-a-php-cli-script.html">debug PHP CLI scripts</a>. Since the debugger runs on a remote machine, starting a CLI debugging session can be done by using PHP command line switches or using environment variables (on the remote machine). This workflow is not the officially recommended way of debugging, though it might be useful in some cases when the debugging session is needed to be established from the remote server side.        </p>    </div>    <div class="chapter"><h2 id="e70d1781" data-toc="Remote_debugging_via_SSH_tunnel#e70d1781">Troubleshooting</h2>        <div class="chapter"><h3 id="32f176bf">The debugger never connects or refuses the connection</h3>        <p id="9396a56a">            When the debugger never connects or refuses the connection, check the following:        </p>        <ul class="list _ul"><li class="list__item" id="6bbfb109"><p>Make sure Xdebug is configured to connect to 127.0.0.1 and port 9000. See #1. Xdebug or Zend Debugger                installed and configured for a sample configuration.</p></li><li class="list__item" id="5ebe2d29"><p>When using Zend Debugger, make sure the PhpStorm bookmarklets or Browser Debugging Extension is                configured to connect to <span class="filepath">127.0.0.1</span>.</p></li><li class="list__item" id="13392445"><p>Make sure PhpStorm is listening for incoming debugger connections prior to setting up the SSH tunnel.            </p></li><li class="list__item" id="e27ed0c1"><p>When a machine is rebooted or the connection is lost, the SSH tunnel has to be reestablished.</p></li></ul></div>        <div class="chapter"><h3 id="4883f075">Remote file path is not mapped to any file path in project</h3>            <p id="7a873c02">                In some cases, the debugger can connect, but we get the error messages indicating that no mapping between the remote and project files is defined. This means that PhpStorm cannot determine which local file corresponds to the file being debugged.            </p>            <figure><img alt="ps debug no mapping" title="ps debug no mapping" src="/help/img/idea/2019.3/ps_debug_no_mapping.png" id="fd74120c" width="776" height="484"></figure>            <p id="2e2e4efe">                We can solve this problem by clicking <span class="control">Click to set up path mappings</span>             and providing the necessary path mappings.            </p>            <p id="5bc58c05">                Additionally, we can configure these mappings using the techniques outlined in <a href="configuring-synchronization-with-a-remote-host.html">Configuring Synchronization with a Web Server</a>.            </p>        </div>    </div><div class="last-modified" data-skip-index="skip">Last modified: 29 November 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="debugging-with-php-exception-breakpoints.html">Debugging with PHP Exception Breakpoints</a><a class="navigation-links__next" href="simultaneous-debugging-sessions.html">Simultaneous debugging sessions</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>