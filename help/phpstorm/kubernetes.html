<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><meta name="description" content="Kubernetes plugin for PhpStorm adds support for editing Kubernetes resource files" data-skip-index="skip"><title>Kubernetes-帮助|帮助暴风雨</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Kubernetes" data-breadcrumbs="Development environment/SSH, Docker, Vagrant/Kubernetes.xml|Kubernetes" data-main-title="Kubernetes"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索PhpStorm帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PhpStorm 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_default_for_macos" data-group="primary">macOS的默认设置</option><option value="primary_intellij_idea_classic_macos" data-group="primary">IntelliJ IDEA经典版（macOS）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_macos" data-group="primary">Eclipse（macOS）</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_sublime_text_macos" data-group="primary">崇高文字（macOS）</option><option value="secondary_default_for_windows" data-group="secondary">Windows的默认设置</option><option value="secondary_default_for_macos" data-group="secondary">macOS的默认设置</option><option value="secondary_intellij_idea_classic" data-group="secondary">IntelliJ IDEA经典版</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_macos" data-group="secondary">Eclipse（macOS）</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_sublime_text" data-group="secondary">崇高文字</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Kubernetes.xml" data-toc="Kubernetes">Kubernetes</h1>                   <p id="intro">        <a href="https://kubernetes.io/" rel="noopener noreferrer" data-external="true" target="_blank">Kubernetes</a>支持部署，扩展和管理容器化应用程序。PhpStorm通过<a href="https://plugins.jetbrains.com/plugin/10485-kubernetes" rel="noopener noreferrer" data-external="true" target="_blank">Kubernetes插件</a>提供对<a href="https://kubernetes.io/docs/concepts/configuration/overview/" rel="noopener noreferrer" data-external="true" target="_blank">Kubernetes资源配置文件</a>的<a href="https://plugins.jetbrains.com/plugin/10485-kubernetes" rel="noopener noreferrer" data-external="true" target="_blank">支持</a> 。</p><aside class="prompt" rel="intro" id="02b05942" data-type="warning" data-title="">        <p id="44ed4fee"><span class="emphasis">Kubernetes</span>插件未与PhpStorm捆绑在一起，应与JetBrains插件存储库分开安装。有关更多信息，请参阅<a href="managing-plugins.html">管理插件</a> 。</p>    </aside>        <p id="64bd3bb6"><span class="emphasis">Kubernetes</span>插件从版本1.5开始支持Kubernetes API。它为YAML中的资源配置文件提供了丰富的支持，并且仅对JSON格式提供了基本支持。</p>    <div class="table-wrapper"><table class=" wide" width="100%" id="3aac6a19"><thead><tr id="09e70edc" class="ijRowHead"><th id="276cc158"><p>特征</p></th><th id="ccd086be" width="250"><p>YAML</p></th><th id="4f1915ec" width="250"><p>JSON格式</p></th></tr></thead><tbody><tr id="9f19aa9f" class="ijRowOdd"><td id="a1c9fe01"><a href="auto-completing-code.html">自动补全</a></td><td id="a8055ba9"><p>支持的</p></td><td id="bb5cb9f3"><p>支持的</p></td></tr><tr id="a09b262d" class="ijRowEven"><td id="5d6bd299">                <a href="viewing-reference-information.html#inline-quick-documentation">快速文档</a>            </td><td id="f43f0435"><p>支持的</p></td><td id="f907d7b0"><p>支持的</p></td></tr><tr id="5619a074" class="ijRowOdd"><td id="d38dd9e3"><a href="code-inspection.html">检查和快速修复</a></td><td id="d39bc285">                <ul class="list _ul"><li class="list__item" id="900e4a1f"><p>无效，丢失和重复的密钥</p></li><li class="list__item" id="13d5cddd"><p>不可编辑（只读）键和资源</p></li><li class="list__item" id="ac72788b"><p>不推荐使用的键和资源</p></li><li class="list__item" id="0ec51744"><p>无效的整数和枚举键值</p></li></ul>            </td><td id="da6e1389">                <ul class="list _ul"><li class="list__item" id="d6383b4d"><p>无效，缺失和重复的属性</p></li></ul>            </td></tr><tr id="8cb11b6f" class="ijRowEven"><td id="64a91b08"><a href="using-live-templates.html">实时模板</a></td><td id="149841ac">                <p id="0697000e">常见配置类型的预定义模板：</p>                <ul class="list _ul"><li class="list__item" id="61268934"><p><code class="code">kcm</code> ：ConfigMap</p></li><li class="list__item" id="91c3d2fa"><p><code class="code">kdep</code> ：部署</p></li><li class="list__item" id="574e6d55"><p><code class="code">kpod</code> ：吊舱</p></li><li class="list__item" id="fe2e109d"><p><code class="code">kres</code> ：通用资源</p></li><li class="list__item" id="7cef2ba5"><p><code class="code">kser</code> ：服务</p></li></ul>            </td><td id="d93af4d7"><p>没有预定义的实时模板</p></td></tr><tr id="88ebc2e3" class="ijRowOdd"><td id="3effd9c4"><a href="auto-completing-code.html#smart_completion">智能完成</a></td><td id="e8b7c869"><p>支持的</p></td><td id="0f2105ad"><p>不支持</p></td></tr><tr id="6b178ff3" class="ijRowEven"><td id="ed0ff347"><a href="#crd">自定义资源定义</a></td><td id="cfd366dd"><p>支持的</p></td><td id="a13fc2bf"><p>不支持</p></td></tr><tr id="a7a9aa13" class="ijRowOdd"><td id="e4aab203"><p>标签定义和选择器</p></td><td id="3729fe3e"><p>使用装订线图标导航，查找用法并重命名</p></td><td id="eeaf9439"><p>不支持</p></td></tr><tr id="5b02723f" class="ijRowEven"><td id="a29b9cc3"><p>原始Kubernetes模型的增强</p></td><td id="baeae187"><p>用枚举代替普通字符串</p></td><td id="eea794c4"><p>没有</p></td></tr></tbody></table></div>    <p id="7b6b9d33"><span class="emphasis">Kubernetes</span>插件还增加了对<a href="https://kustomize.io/" rel="noopener noreferrer" data-external="true" target="_blank">Kustomize</a>文件中的路径完成以及Kustomize文件与补丁之间导航的支持。相关的Kustomize文件列表显示在打开的Kustomize修补程序顶部的编辑器中。</p>    <p id="b70e24f0">您可以使用<a href="services-tool-window.html">服务工具窗口</a>在当前上下文中查看Kubernetes集群的所有资源，跳转到相关的资源定义，并查看在pod上运行的容器的日志。</p>    <div class="chapter"><h2 id="resource-config-files" data-toc="Kubernetes#resource-config-files">资源配置文件</h2>        <p id="49cd477d">PhpStorm使用以下必填字段识别Kubernetes资源配置文件：</p>        <ul class="list _ul"><li class="list__item" id="0a76f108"><p><code class="code">apiVersion</code> ：标识对象表示的版本化架构</p></li><li class="list__item" id="9808b7df"><p><code class="code">kind</code> ：标识对象的种类（例如， <code class="code">Service</code> ， <code class="code">Pod</code> ， <code class="code">Deployment</code> ， 等等）</p></li></ul>        <p id="5fd99ec6">如果YAML或JSON文件中同时存在上述两个字段，则PhpStorm将使用相应的Kubernetes图标标记该文件并启用所有可用功能：</p>        <figure id="061ef8b6" width="396" data-theme="light"><img class="js-gif" src="/help/img/idea/2019.3/KubernetesRecognizeYAML.png" width="396" data-gif-src="/help/img/idea/2019.3/KubernetesRecognizeYAML.animated.gif" style="width:396px"></figure>        <p id="74d9cce7">对于YAML文件，您还可以使用预定义的<a href="using-live-templates.html">实时模板</a>来创建必要的配置类型：</p>        <figure id="784d23de" width="394" data-theme="light"><img class="js-gif" src="/help/img/idea/2019.3/KubernetesLiveTemplateKdep.png" width="394" data-gif-src="/help/img/idea/2019.3/KubernetesLiveTemplateKdep.animated.gif" style="width:394px"></figure>        <p id="73b88174">要查看可用的实时模板并创建新模板，请打开“ <span class="control">设置/首选项”</span>对话框<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd> ，单击<span class="control">编辑器</span> ，然后单击<span class="control">实时模板</span> ，然后在列表中展开<span class="control">Kubernetes</span>组。</p>    </div>    <div class="chapter"><h2 id="helm" data-toc="Kubernetes#helm">头盔支持</h2>        <p id="21d98509">            <a href="https://helm.sh/" rel="noopener noreferrer" data-external="true" target="_blank">Helm</a>是用于管理Kubernetes应用程序的工具。Helm图表是您在Kubernetes集群中运行的预配置资源定义包。图表包含对<span class="filepath">Chart.yaml</span>包的描述以及一个或多个用于生成Kubernetes清单文件的模板。</p>        <aside class="prompt" rel="21d98509" id="0205c793" data-type="note" data-title="">            <p id="ca58729c">Helm模板语法支持需要<a href="https://plugins.jetbrains.com/plugin/10581-go-template" rel="noopener noreferrer" data-external="true" target="_blank">Go Template插件</a> 。</p>        </aside>        <p id="27dab081">Helm图表和模板的编码帮助包括代码完成，重构，检查，快速修复和快速文档。同样，可以使用装订线图标在标签定义和标签选择器之间以及覆盖值和覆盖值之间导航。</p>        <p id="f7208fb7">默认情况下，Go模板指令在Helm模板中呈现为实际值。您可以单击该值以展开并显示指令。此功能是使用<a href="working-with-source-code.html#code_folding">代码折叠</a>实现的。按<kbd data-primary_default_for_windows="Ctrl+NumPad Plus" data-primary_default_for_macos="⌘+NumPad Plus" data-primary_intellij_idea_classic_macos="⌘+NumPad Plus" data-primary_emacs="Ctrl+NumPad Plus" data-primary_visual_studio="Ctrl+NumPad Plus" data-primary_default_for_xwin="Ctrl+NumPad Plus" data-primary_default_for_gnome="Ctrl+NumPad Plus" data-primary_default_for_kde="Ctrl+NumPad Plus" data-primary_eclipse="Ctrl+NumPad Plus" data-primary_eclipse_macos="⌘+NumPad Plus" data-primary_netbeans="Ctrl+NumPad Plus" data-primary_sublime_text="Ctrl+Shift+]" data-primary_sublime_text_macos="Alt+⌘+]" data-secondary_default_for_windows="⌃+" data-secondary_default_for_macos="⌘+" data-secondary_intellij_idea_classic="⌘+" data-secondary_emacs="⌃+" data-secondary_visual_studio="⌃+" data-secondary_default_for_xwin="⌃+" data-secondary_default_for_gnome="⌃+" data-secondary_default_for_kde="⌃+" data-secondary_eclipse="⌃+" data-secondary_eclipse_macos="⌘+" data-secondary_netbeans="⌃+" data-secondary_sublime_text="⌃⇧]" data-secondary_sublime_text_macos="⌥⌘]">Ctrl+NumPad Plus</kbd>和<kbd data-primary_default_for_windows="Ctrl+NumPad -" data-primary_default_for_macos="⌘+NumPad -" data-primary_intellij_idea_classic_macos="⌘+NumPad -" data-primary_emacs="Ctrl+NumPad -" data-primary_visual_studio="Ctrl+NumPad -" data-primary_default_for_xwin="Ctrl+NumPad -" data-primary_default_for_gnome="Ctrl+NumPad -" data-primary_default_for_kde="Ctrl+NumPad -" data-primary_eclipse="Ctrl+NumPad -" data-primary_eclipse_macos="⌘+NumPad -" data-primary_netbeans="Ctrl+NumPad -" data-primary_sublime_text="Ctrl+Shift+[" data-primary_sublime_text_macos="Alt+⌘+[" data-secondary_default_for_windows="⌃-" data-secondary_default_for_macos="⌘-" data-secondary_intellij_idea_classic="⌘-" data-secondary_emacs="⌃-" data-secondary_visual_studio="⌃-" data-secondary_default_for_xwin="⌃-" data-secondary_default_for_gnome="⌃-" data-secondary_default_for_kde="⌃-" data-secondary_eclipse="⌃-" data-secondary_eclipse_macos="⌘-" data-secondary_netbeans="⌃-" data-secondary_sublime_text="⌃⇧[" data-secondary_sublime_text_macos="⌥⌘[">Ctrl+NumPad -</kbd>在值和指令之间切换。</p>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="2283b309">创建一个新的头盔图</h3></div><div class="collapse__content"><ul class="list "><li class="list__item" id="91b00151">                <p id="396f7411">右键单击Project工具窗口中的任何目录，指向<span class="control">Kubernetes</span> ，然后单击<span class="control">Helm Create Chart</span> 。</p>            </li></ul><p id="efdda386">这将运行<a href="https://docs.helm.sh/helm/#helm-create" rel="noopener noreferrer" data-external="true" target="_blank">helm create</a>命令，该命令将添加入门所需的所有基本文件：</p><ul class="list _bullet"><li class="list__item" id="c09ae2ec"><p><span class="filepath">.helmignore</span> ：构建软件包时要忽略的模式</p></li><li class="list__item" id="dec01cba"><p><span class="filepath">Chart.yaml</span> ：带有元数据的基本图表描述</p></li><li class="list__item" id="268010ba"><p><span class="filepath">values.yaml</span> ：图表模板的默认值</p></li><li class="list__item" id="8de9a16e"><p><span class="filepath">图/</span> ：子图目录</p></li><li class="list__item" id="a250b6b2">                    <p id="c0ae40c5"><span class="filepath">templates /</span> ：图表定义目录</p>                    <ul class="list _ul"><li class="list__item" id="499f1d11"><p><span class="filepath">_helpers.tpl</span> ：模板的部分和功能</p></li><li class="list__item" id="b55d812c"><p><span class="filepath">NOTES.txt</span> ：部署图表后打印出的信息</p></li><li class="list__item" id="08cd3f5c"><p><span class="filepath">deployment.yaml</span> ：Kubernetes部署示例示例</p></li><li class="list__item" id="cb83e3d5"><p><span class="filepath">ingress.yaml</span> ：Kubernetes入口定义示例</p></li><li class="list__item" id="1a4d3722"><p><span class="filepath">service.yaml</span> ：Kubernetes服务定义示例</p></li></ul>                </li></ul></div></div></section>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="1aca241e">预览Helm模板渲染的结果</h3></div><div class="collapse__content"><ul class="list "><li class="list__item" id="74339251">                <p id="51ded998">右键单击模板文件，指向<span class="control">Kubernetes</span> ，然后单击<span class="control">Helm Template</span> 。</p>            </li></ul><p id="caff27ad">这将运行可渲染图表模板的<a href="https://docs.helm.sh/helm/#helm-template" rel="noopener noreferrer" data-external="true" target="_blank">helm template</a>命令。渲染的预览在diff查看器对话框中打开，以将其与原始模板文件进行比较。</p></div></div></section>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="f63f3ed2">更新外部依赖项</h3></div><div class="collapse__content"><p id="bee35563">如果该图表包含<span class="filepath">requirements.yaml</span>文件，则可以更新或下载适当的<span class="filepath">tgz</span>依赖项。此操作还会生成或更新<span class="filepath">requirements.lock</span> 。</p><ul class="list "><li class="list__item" id="272343b9">                <p id="db59fddf">右键单击图表，指向<span class="control">Kubernetes</span> ，然后单击<span class="control">Helm Dependency Update</span> 。</p>            </li></ul><p id="b9c448ea">这将运行<a href="https://docs.helm.sh/helm/#helm-dependency-update" rel="noopener noreferrer" data-external="true" target="_blank">helm依赖关系更新</a>命令。</p><p id="330ca22a">在<span class="filepath">requirements.yaml</span>文件中还有一个装订线图标，用于更新依赖关系。</p></div></div></section>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="4fc2a37f">检查图表以查找可能的问题</h3></div><div class="collapse__content"><ul class="list "><li class="list__item" id="6868e167">                <p id="a2e86de7">右键单击图表，指向<span class="control">Kubernetes</span> ，然后单击<span class="control">Helm Lint</span> 。</p>            </li></ul><p id="a58a8200">这将运行<a href="https://docs.helm.sh/helm/#helm-lint" rel="noopener noreferrer" data-external="true" target="_blank">helm lint</a>命令，该命令执行一系列测试以发现可能的问题，而无需实际安装图表。</p></div></div></section>    </div>    <div class="chapter"><h2 id="crd" data-toc="Kubernetes#crd">自定义资源定义支持</h2>        <p id="7437f0d2">如果您的Kubernetes集群使用<a href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/" rel="noopener noreferrer" data-external="true" target="_blank">自定义资源</a>扩展，则PhpStorm可以使用<span class="emphasis">自定义资源定义</span> （CRD）规范对其进行验证。</p>        <section class="procedure-steps"><h3 id="9854e3f2">指定CRD规范的路径</h3><ol class="list _decimal"><li class="list__item" id="a9e2eeda">                <p id="2388d46d"><a name="open_settings"></a>在里面<a name="settings_dialog"></a> <span class="control">设置/首选项</span>对话框<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd> ，选择<span class="control">语言和框架| Kubernetes</span> 。</p>            </li><li class="list__item" id="2cd7287a">                <p id="f3bc2a25">请点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加按钮">并选择本地CRD文件或指定URL。然后单击“ <span class="control">确定”</span> 。</p>            </li></ol><p id="29ca792f">使用<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.up@2x.png" width="16" alt="向上按钮">和<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.down@2x.png" width="16" alt="向下按钮">重新排列CRD文件列表。这定义了冲突定义的优先级：如果在多个文件中定义了最低优先级，则使用最低优先级。</p><aside class="prompt" rel="29ca792f" id="785cbb4b" data-type="note" data-title=""><p>应用更改时，将自动下载URL中新添加的CRD。其他修改后的CRD仅在重新加载模型时才下载，这是在您打开项目或更改其他Kubernetes设置（例如CRD的顺序）时发生的，并且自上次重新加载模型以来已超过三个小时。如果自上次重新加载模型以来不到三个小时，则可以使用“ <span class="control">重新读取当前配置”</span>按钮在当前模型上强制进行此重新加载。</p></aside></section>        <p id="7e64eb77">Kubernetes插件支持指定以下类型的CRD文件的路径：</p>        <div class="chapter"><div class="collapse"><div class="collapse__title"><h5 id="yaml-crd">YAML中的CustomResourceDefinition文件</h5></div><div class="collapse__content">            <p id="854ad5e9">以下示例显示了有关自定义资源的简单<a href="https://kubernetes.io/docs/tasks/access-kubernetes-api/custom-resources/custom-resource-definitions/" rel="noopener noreferrer" data-external="true" target="_blank">CustomResourceDefinition</a>规范<code class="code">stable.example.com/v1</code>那种<code class="code">CronTab</code> 。标识资源的必填字段是<code class="code">metadata.name</code> ， <code class="code">spec.group</code> ， <code class="code">spec.versions</code>和<code class="code">spec.names</code> 。</p>            <aside class="prompt" rel="854ad5e9" id="475dd1c3" data-type="note" data-title="">                <p id="b3367acc">当前，并非OpenAPI架构中的所有字段都可以用于验证（请参见<code class="code">pattern</code> ， <code class="code">minimum</code>和<code class="code">maximum</code>下的字段<code class="code">validation.openAPIV3Schema</code>在示例中）。有关更多信息，请参见<a href="#restrictions">CRD验证限制</a> 。</p>            </aside>            <div class="code-block" data-lang="yaml">apiVersion：apiextensions.k8s.io/v1beta1种类：CustomResourceDefinition元数据：名称：crontabs.stable.example.com＃必填字段，用于标识资源规范：group：stable.example.com＃必填字段，用于标识资源版本：＃必填标识资源的字段-名称：v1服务：true存储：true范围：命名空间名称：＃标识资源复数的必填字段：crontabs单数：crontab类型：CronTab shortNames：-ct验证：openAPIV3Schema：＃验证自定义对象的模式属性：规范：属性：cronSpec：类型：字符串模式：'^（\ d + | \ *）（/ \ d +）？（\ s +（\ d + | \ *）（/ \ d +）？）{4} $'＃验证副本不支持：类型：整数最小值：1＃验证不支持最大值：10＃验证不支持</div>        </div></div></div>        <div class="chapter"><div class="collapse"><div class="collapse__title"><h5 id="json-crd">JSON中的OpenAPI v2.0架构</h5></div><div class="collapse__content">            <p id="29967a7f">以下示例显示了具有自定义资源CRD规范的简单<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md" rel="noopener noreferrer" data-external="true" target="_blank">OpenAPI v2.0</a>模式<code class="code">sample/v1</code>那种<code class="code">Config</code> 。自定义资源的根定义必须包含<code class="code">x-kubernetes-group-version-kind</code>具有指定组，版本和种类的字段。在示例中， <code class="code">root.Definition</code>对象使用一个<code class="code">build</code>属性引用<code class="code">some.Definition</code>宾语。</p>            <div class="code-block" data-lang="javascript">{“ swagger”：“ 2.0”，“ info”：{“ title”：“ Sample Schema”，“ version”：“ sample / v1”}，“ paths”：{}，“ definitions”：{“定义”：{“描述”：“定义示例。”，“属性”：{“ someProperty”：{“类型”：“字符串”}}}，“根。定义“：{”描述“：”这是资源的根定义“，”属性“：{”生成“：{” $ ref“：”＃/定义/一些。定义“}}，” x-kubernetes-group-version-kind“：[{” group“：” sample“，” kind“：” Config“，” version“：” v1“}]}}}}</div>        </div></div></div>        <div class="chapter"><h3 id="restrictions">CRD验证限制</h3>            <p id="565dab55">不支持以下OpenAPI v3架构功能：</p>            <ul class="list _horizontal" data-columns="4"><li class="list__item" id="00d43711">                    <code class="code">multipleOf</code>                </li><li class="list__item" id="4164e3ee">                    <code class="code">maximum</code>                </li><li class="list__item" id="36fa67b2">                    <code class="code">exclusiveMaximum</code>                </li><li class="list__item" id="f089e5d0">                    <code class="code">minimum</code>                </li><li class="list__item" id="673f5e9a">                    <code class="code">exclusiveMinimum</code>                </li><li class="list__item" id="6dd454f9">                    <code class="code">maxLength</code>                </li><li class="list__item" id="99983ad2">                    <code class="code">minLength</code>                </li><li class="list__item" id="40501e6f">                    <code class="code">pattern</code>                </li><li class="list__item" id="fe5bf84b">                    <code class="code">maxItems</code>                </li><li class="list__item" id="d7a3daf8">                    <code class="code">minItems</code>                </li><li class="list__item" id="6d581cf5">                    <code class="code">uniqueItems</code>                </li><li class="list__item" id="fe1da744">                    <code class="code">maxProperties</code>                </li><li class="list__item" id="994f9c48">                    <code class="code">minProperties</code>                </li><li class="list__item" id="8771454a">                    <code class="code">allOf</code>                </li><li class="list__item" id="912b5c26">                    <code class="code">oneOf</code>                </li><li class="list__item" id="3a1725ed">                    <code class="code">anyOf</code>                </li><li class="list__item" id="55a638d5">                    <code class="code">not</code>                </li><li class="list__item" id="ab5da715">                    <code class="code">format</code>                </li><li class="list__item" id="42d05f01">                    <code class="code">default</code>                </li><li class="list__item" id="20e07be0">                    <code class="code">nullable</code>                </li><li class="list__item" id="222b0bf6">                    <code class="code">readOnly</code>                </li><li class="list__item" id="d9bb9718">                    <code class="code">writeOnly</code>                </li><li class="list__item" id="2cc10245">                    <code class="code">xml</code>                </li><li class="list__item" id="ec5695fb">                    <code class="code">externalDocs</code>                </li><li class="list__item" id="63d63ad5">                    <code class="code">example</code>                </li><li class="list__item" id="fa10ea83">                    <code class="code">deprecated</code>                </li></ul>        </div>    </div>    <div class="chapter"><h2 id="productivity-tips" data-toc="Kubernetes#productivity-tips">生产力提示</h2>        <p id="afae05cb">如果您经常使用此处描述的功能，则以下提示可能会有所帮助：</p>        <section class="procedure-steps"><h3 id="66e2f535">分配快捷方式</h3><p id="47095784">您可以为Kubernetes操作分配键盘快捷键。</p><ol class="list _decimal"><li class="list__item" id="7fb986d6">                <p id="7e13737c"><a name="open_settings"></a>在里面<a name="settings_dialog"></a> <span class="control">设置/首选项</span>对话框<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd> ，选择<span class="control">Keymap</span> 。</p>            </li><li class="list__item" id="af0405e6">                <p id="a3e709a8">类型<code class="code">kubernetes</code>在搜索字段中，然后双击一个动作为其设置快捷方式。</p>            </li></ol><p id="183736db">或者，您可以使用“ <span class="control">查找操作”</span>对话框<kbd data-primary_default_for_windows="Ctrl+Shift+A" data-primary_default_for_macos="Shift+⌘+A" data-primary_intellij_idea_classic_macos="Shift+⌘+A" data-primary_emacs="Escape, X" data-primary_visual_studio="Ctrl+Shift+A" data-primary_default_for_xwin="Ctrl+Shift+A" data-primary_default_for_gnome="Ctrl+Shift+A" data-primary_default_for_kde="Ctrl+Shift+A" data-primary_eclipse="Ctrl+Shift+A" data-primary_eclipse_macos="⌘+3" data-primary_netbeans="Ctrl+I" data-primary_sublime_text="Ctrl+Shift+P" data-primary_sublime_text_macos="Shift+⌘+P" data-secondary_default_for_windows="⌃⇧A" data-secondary_default_for_macos="⇧⌘A" data-secondary_intellij_idea_classic="⇧⌘A" data-secondary_emacs="⎋, X" data-secondary_visual_studio="⌃⇧A" data-secondary_default_for_xwin="⌃⇧A" data-secondary_default_for_gnome="⌃⇧A" data-secondary_default_for_kde="⌃⇧A" data-secondary_eclipse="⌃⇧A" data-secondary_eclipse_macos="⌘3" data-secondary_netbeans="⌃I" data-secondary_sublime_text="⌃⇧P" data-secondary_sublime_text_macos="⇧⌘P">Ctrl+Shift+A</kbd> ，类型<code class="code">kubernetes</code> ，选择所需的操作，然后按<kbd data-primary_default_for_windows="Alt+Enter" data-primary_default_for_macos="Alt+Enter" data-primary_intellij_idea_classic_macos="Alt+Enter" data-primary_emacs="Alt+Enter" data-primary_visual_studio="Alt+Enter" data-primary_default_for_xwin="Alt+Enter" data-primary_default_for_gnome="Alt+Enter" data-primary_default_for_kde="Alt+Enter" data-primary_eclipse="Alt+Enter" data-primary_eclipse_macos="⌘+1" data-primary_netbeans="Alt+Enter" data-primary_sublime_text="Alt+Enter" data-primary_sublime_text_macos="Alt+Enter" data-secondary_default_for_windows="⌥⏎" data-secondary_default_for_macos="⌥⏎" data-secondary_intellij_idea_classic="⌥⏎" data-secondary_emacs="⌥⏎" data-secondary_visual_studio="⌥⏎" data-secondary_default_for_xwin="⌥⏎" data-secondary_default_for_gnome="⌥⏎" data-secondary_default_for_kde="⌥⏎" data-secondary_eclipse="⌥⏎" data-secondary_eclipse_macos="⌘1" data-secondary_netbeans="⌥⏎" data-secondary_sublime_text="⌥⏎" data-secondary_sublime_text_macos="⌥⏎">Alt+Enter</kbd> 。</p></section>        <section class="procedure-steps"><h3 id="84b2396b">配置代码折叠</h3><p id="3ade84e0">默认情况下，PhpStorm使用<a href="working-with-source-code.html#code_folding">代码折叠</a>将Helm模板中的值引用和Kubernetes配置文件中的定义呈现为实际值。您可以单击值以将其展开或按<kbd data-primary_default_for_windows="Ctrl+NumPad Plus" data-primary_default_for_macos="⌘+NumPad Plus" data-primary_intellij_idea_classic_macos="⌘+NumPad Plus" data-primary_emacs="Ctrl+NumPad Plus" data-primary_visual_studio="Ctrl+NumPad Plus" data-primary_default_for_xwin="Ctrl+NumPad Plus" data-primary_default_for_gnome="Ctrl+NumPad Plus" data-primary_default_for_kde="Ctrl+NumPad Plus" data-primary_eclipse="Ctrl+NumPad Plus" data-primary_eclipse_macos="⌘+NumPad Plus" data-primary_netbeans="Ctrl+NumPad Plus" data-primary_sublime_text="Ctrl+Shift+]" data-primary_sublime_text_macos="Alt+⌘+]" data-secondary_default_for_windows="⌃+" data-secondary_default_for_macos="⌘+" data-secondary_intellij_idea_classic="⌘+" data-secondary_emacs="⌃+" data-secondary_visual_studio="⌃+" data-secondary_default_for_xwin="⌃+" data-secondary_default_for_gnome="⌃+" data-secondary_default_for_kde="⌃+" data-secondary_eclipse="⌃+" data-secondary_eclipse_macos="⌘+" data-secondary_netbeans="⌃+" data-secondary_sublime_text="⌃⇧]" data-secondary_sublime_text_macos="⌥⌘]">Ctrl+NumPad Plus</kbd>和<kbd data-primary_default_for_windows="Ctrl+NumPad -" data-primary_default_for_macos="⌘+NumPad -" data-primary_intellij_idea_classic_macos="⌘+NumPad -" data-primary_emacs="Ctrl+NumPad -" data-primary_visual_studio="Ctrl+NumPad -" data-primary_default_for_xwin="Ctrl+NumPad -" data-primary_default_for_gnome="Ctrl+NumPad -" data-primary_default_for_kde="Ctrl+NumPad -" data-primary_eclipse="Ctrl+NumPad -" data-primary_eclipse_macos="⌘+NumPad -" data-primary_netbeans="Ctrl+NumPad -" data-primary_sublime_text="Ctrl+Shift+[" data-primary_sublime_text_macos="Alt+⌘+[" data-secondary_default_for_windows="⌃-" data-secondary_default_for_macos="⌘-" data-secondary_intellij_idea_classic="⌘-" data-secondary_emacs="⌃-" data-secondary_visual_studio="⌃-" data-secondary_default_for_xwin="⌃-" data-secondary_default_for_gnome="⌃-" data-secondary_default_for_kde="⌃-" data-secondary_eclipse="⌃-" data-secondary_eclipse_macos="⌘-" data-secondary_netbeans="⌃-" data-secondary_sublime_text="⌃⇧[" data-secondary_sublime_text_macos="⌥⌘[">Ctrl+NumPad -</kbd>切换折叠。如果要查看默认情况下扩展的引用和定义，请执行以下操作：</p><ol class="list _decimal"><li class="list__item" id="802bf045">                <p id="69bff004"><a name="open_settings"></a>在里面<a name="settings_dialog"></a> <span class="control">设置/首选项</span>对话框<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd> ，选择<span class="control">编辑器|一般|代码折叠</span> 。</p>            </li><li class="list__item" id="8d992d6b">                <p id="c4b5e4fb">在“ <span class="control">代码折叠”</span>页面上，清除必要的复选框：</p>                <ul class="list _ul"><li class="list__item" id="976c1723"><span class="control">Kubernetes：Helm模板中的值引用</span></li><li class="list__item" id="70999f28"><span class="control">Kubernetes：YAML文件中的EnvVar定义</span></li><li class="list__item" id="9ba19435"><span class="control">Kubernetes：YAML文件中的ExecAction定义</span></li></ul>            </li></ol></section>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="using-the-advanced-vagrant-features-in-product.html">使用PhpStorm</a> <a class="navigation-links__next" href="relational-databases.html">数据库工具和SQL中</a> <a class="navigation-links__prev" href="using-the-advanced-vagrant-features-in-product.html">的Advanced Vagrant功能</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>