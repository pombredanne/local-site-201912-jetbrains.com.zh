<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Extract method - Help | PhpStorm</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="procedures.refactoring.extractMethod" data-breadcrumbs="Working_with_source_code.xml|Working with source code/Refactoring_Source_Code.xml|Refactoring code/Extract refactorings/Extract_Method.xml|Extract method" data-main-title="Extract method" data-article-props="&#xA;                {&#xA;                &#xA;            &#34;seeAlso&#34;:[&#xA;            &#xA;                {&#34;title&#34;: &#34;Reference&#34;,&#xA;                 &#34;links&#34;: [&#xA;                &#xA;        {&#34;url&#34;:&#34;extract-method-dialog.html&#34;,&#34;text&#34;:&#34;Extract Method Dialog&#34;}&#xA;    &#xA;                    ]},&#xA;                {&#34;title&#34;: &#34;Web Resources&#34;,&#xA;                 &#34;links&#34;: [&#xA;                &#xA;        {&#34;url&#34;:&#34;http://www.jetbrains.net/devnet/community/wi&#34;,&#34;text&#34;:&#34;Discussion Forum&#34;}&#xA;    ,&#xA;        {&#34;url&#34;:&#34;http://youtrack.jetbrains.com/issues/WI&#xA;            &#34;,&#34;text&#34;:&#34;Issue Tracker&#34;}&#xA;    &#xA;                    ]}&#xA;            ]&#xA;        &#xA;                }&#xA;            "><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search PhpStorm Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PhpStorm 2019.3 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default_for_windows" selected>Default for Windows</option><option data-group="primary" value="primary_default_for_macos">Default for macOS</option><option data-group="primary" value="primary_intellij_idea_classic_macos">IntelliJ IDEA Classic (macOS)</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="primary" value="primary_default_for_xwin">Default for XWin</option><option data-group="primary" value="primary_default_for_gnome">Default for GNOME</option><option data-group="primary" value="primary_default_for_kde">Default for KDE</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="primary" value="primary_eclipse_macos">Eclipse (macOS)</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_sublime_text">Sublime Text</option><option data-group="primary" value="primary_sublime_text_macos">Sublime Text (macOS)</option><option data-group="secondary" value="secondary_default_for_windows">Default for Windows</option><option data-group="secondary" value="secondary_default_for_macos">Default for macOS</option><option data-group="secondary" value="secondary_intellij_idea_classic">IntelliJ IDEA Classic</option><option data-group="secondary" value="secondary_emacs">Emacs</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_default_for_xwin">Default for XWin</option><option data-group="secondary" value="secondary_default_for_gnome">Default for GNOME</option><option data-group="secondary" value="secondary_default_for_kde">Default for KDE</option><option data-group="secondary" value="secondary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_eclipse_macos">Eclipse (macOS)</option><option data-group="secondary" value="secondary_netbeans">NetBeans</option><option data-group="secondary" value="secondary_sublime_text">Sublime Text</option><option data-group="secondary" value="secondary_sublime_text_macos">Sublime Text (macOS)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 data-toc="procedures.refactoring.extractMethod" id="Extract_Method.xml">Extract method</h1>                                       <p id="38be092c">When the <span class="emphasis">Extract Method</span>         refactoring is invoked, PhpStorm analyses the selected block of code and       detects variables that are the input for the selected code fragment and the variables that are output for it.</p>        <p id="83061823">The detected output variable is used as a return value for the extracted function.</p>                    <p id="0a529428">In the JavaScript context, this refactoring always results in a function.</p>            <p id="PhpRefactoringOutput"> In the PHP context, the result of applying the                <span class="keyword">Extract Method</span> refactoring depends on the location of the selected code                fragment.</p>            <ul class="list _bullet"><li class="list__item" id="47201656"><p>If the selection is made inside a method of a class, the refactoring extracts a method.                    This case is applicable when you are using PHP 5.0 and later.</p></li><li class="list__item" id="fc9c2e82"><p>If the selection is made inside a function or a script, the refactoring extracts a function.                </p></li></ul>                                                                    <section class="procedure-steps"><h3 id="f4a8cee6">Extract a PHP function or method</h3><ol class="list _decimal"><li class="list__item" id="980918ef">            <p id="35b36411">In the editor, select a block of code to be transformed into a function or method.            </p>            <p id="bd7236d5">The selected code fragment does not need to be a set of                statements. It may also be an expression used somewhere in the code.            </p>        </li><li class="list__item" id="93c2fde3">            <p id="8faf02db">                From the main menu or the selection context menu, choose <span data-skip-index="skip" class="menupath">Refactor | Extract Method</span> or press                <kbd data-primary_default_for_windows="Ctrl+Alt+M" data-primary_default_for_macos="Alt+⌘+M" data-primary_intellij_idea_classic_macos="Alt+⌘+M" data-primary_emacs="Ctrl+Alt+M" data-primary_visual_studio="Ctrl+Alt+M" data-primary_default_for_xwin="Ctrl+Alt+M" data-primary_default_for_gnome="Ctrl+Alt+M" data-primary_default_for_kde="Ctrl+Alt+M" data-primary_eclipse="Shift+Alt+M" data-primary_eclipse_macos="Alt+⌘+M" data-primary_netbeans="Shift+Alt+M" data-primary_sublime_text="Ctrl+Alt+M" data-primary_sublime_text_macos="Alt+⌘+M" data-secondary_default_for_windows="⌃⌥M" data-secondary_default_for_macos="⌥⌘M" data-secondary_intellij_idea_classic="⌥⌘M" data-secondary_emacs="⌃⌥M" data-secondary_visual_studio="⌃⌥M" data-secondary_default_for_xwin="⌃⌥M" data-secondary_default_for_gnome="⌃⌥M" data-secondary_default_for_kde="⌃⌥M" data-secondary_eclipse="⌥⇧M" data-secondary_eclipse_macos="⌥⌘M" data-secondary_netbeans="⌥⇧M" data-secondary_sublime_text="⌃⌥M" data-secondary_sublime_text_macos="⌥⌘M">Ctrl+Alt+M</kbd>.            </p>            <p id="aae8a001">                The title of the <a href="extract-method-dialog.html">dialog that opens</a> is either <span class="control">Extract Method</span> or <span class="control">Extract Function</span>                depending on the <a href="#PhpRefactoringOutput">intended refactoring output</a>.            </p>        </li><li class="list__item" id="0aee0e73"><p>            Specify the name of the new function or method.        </p></li><li class="list__item" id="dad33403">            <p id="5e4b517d">                If a method is to be extracted, choose the relevant <a href="http://www.php.net/manual/en/language.oop5.visibility.php" data-external="true" target="_blank" rel="noopener noreferrer">access modifier</a> for it in the <span class="control">Visibility</span> area:            </p>            <a name="PHPMethodAccessModifiers"></a>        <ul class="list _bullet"><li class="list__item" id="5265607c">                <span class="control">Public</span>            </li><li class="list__item" id="18c281b4">                <span class="control">Protected</span>            </li><li class="list__item" id="a8da6c9d">                <span class="control">Private</span>            </li></ul>            </li><li class="list__item" id="0f8fc549">            <p id="73090b4f">                Configure the output of the new method or function in the <span class="control">Return output variable(s) through</span> area.            </p>            <p id="f746668d">                The <span class="control">Output variable(s)</span> read-only field displays all the variables that make up the output of the selected code fragment.                Specify the way in which the new method or function will <a href="http://php.net/manual/en/functions.returning-values.php" data-external="true" target="_blank" rel="noopener noreferrer">return these variables</a> to the callee.            </p>            <ul class="list _bullet"><li class="list__item" id="84385456"><p>                    To have the output variables returned by value, select the <span class="control">Return statement option</span>. The result of this choice depends on the number of detected output variables.                    If there is exactly one output variable, it will be used as the return value. If the selection outputs several variables, these variables will be returned as an array.                </p></li><li class="list__item" id="returnByReference"><p>                    To have the output variables returned by reference, select the <span class="control">Parameter(s) passed by reference</span> option.                    In this case, no return statement will be generated. Instead, all the detected output variables will be added                    to the list of <a href="#inputParameters">input parameters</a>.                    Their names will be prepended with an ampersand <code class="code">&amp;</code> both in the <span class="control">Parameters</span> list                    and in the declaration of the new method/function, as shown in the <span class="control">Signature preview</span> read-only area.                </p></li></ul>        </li><li class="list__item" id="inputParameters">            <p id="f07a3364">                In the <span class="control">Parameters</span> area, configure the input for the new function or method.            </p>            <p id="8a912244">                Originally, the list contains the variables that PhpStorm has detected as the input for the new method or function.                However, if you have chosen to <a href="#returnByReference">return the new method/function output by reference</a>,                the list also contains all the output variables.            </p>            <p id="2a7f1c44">                To change the order of parameters, click <img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.moveUp@2x.png" width="16" alt="the Move up button"> and <img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.moveDown@2x.png" width="16" alt="the Move down button">. This order determines the order in which the parameters are listed in the declaration of the new method or function.            </p>            <p id="ce41dafe">                If necessary, rename the desired parameters, by double-clicking the corresponding parameter lines and                entering new names.            </p>        </li><li class="list__item" id="2d4e2a65"><p>            Optionally, to have PhpStorm transform  tail <a href="http://www.php.net/manual/en/control-structures.break.php" data-external="true" target="_blank" rel="noopener noreferrer">break</a>            or <a href="http://www.php.net/manual/en/control-structures.continue.php" data-external="true" target="_blank" rel="noopener noreferrer">continue</a> statements if the selection contains any,            select the <span class="control">Replace tail "break/continue" statements with return statements</span> checkbox.        </p></li><li class="list__item" id="b3a85e7c"><p>            View and check the declaration of the function or method to be generated in the <span class="control">Signature preview</span> read-only area.        </p></li></ol></section>            <div class="chapter"><h2 id="php-extract-method-example">PHP Extract Method example</h2>        <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="03137f14"><thead><tr id="ce8ce046" class="ijRowHead"><th id="45d2a94a" width="50%"><p>Before</p></th><th id="5f2b2861" width="50%"><p>After</p></th></tr></thead><tbody><tr id="60a8ec30" class="ijRowOdd"><td id="70146541">                    <div class="code-block" data-lang="php">
public function init()
{
    $this-&gt;_router = $this-&gt;getFrontController()-&gt;getRouter();
}
                           </div>                </td><td id="2fe06a76">                    <div class="code-block" data-lang="php">
public function init()
{
    $this-&gt;_router = $this-&gt;getRouter();
}

public function getRouter()
{
    return $this-&gt;getFrontController()-&gt;getRouter();
}
                           </div>                </td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="656f8f4e">PHP Extract Function example</h2>        <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="b252c3aa"><thead><tr id="9b8eb99a" class="ijRowHead"><th id="48013572" width="50%"><p>Before</p></th><th id="c3fe0ed2" width="50%"><p>After</p></th></tr></thead><tbody><tr id="3860d0fc" class="ijRowOdd"><td id="32d7b628">                    <div class="code-block" data-lang="php">
                        if ('POST' != $_SERVER['REQUEST_METHOD']) {
                            header('Allow: POST');
                            header('HTTP/1.1 405 Method Not Allowed');
                            header('Content-Type: text/plain');
                            exit;
                        }
                    </div>                </td><td id="112913a5">                    <div class="code-block" data-lang="php">
                        function printEmptyHeader()
                        {
                            header('Allow: POST');
                            header('HTTP/1.1 405 Method Not Allowed');
                            header('Content-Type: text/plain');
                        }

                        if ('POST' != $_SERVER['REQUEST_METHOD'])
                        {
                            printEmptyHeader();
                            exit;
                        }
                    </div>                </td></tr></tbody></table></div>    </div>    	  <div class="last-modified" data-skip-index="skip">Last modified: 29 November 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="extract-interface.html">Extract interface</a><a class="navigation-links__next" href="extract-variable.html">Extract variable</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>