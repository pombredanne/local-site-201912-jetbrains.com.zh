<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Simultaneous debugging sessions - Help | PhpStorm</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Simultaneous_debugging_sessions" data-breadcrumbs="Debugging_with_PhpStorm_Ultimate_Guide.xml|Debugging with PhpStorm: Ultimate Guide/PHP_Debugging_Session.xml|PHP Debugging Session/Simultaneous_debugging_sessions.xml|Simultaneous debugging sessions" data-main-title="Simultaneous debugging sessions"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search PhpStorm Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PhpStorm 2019.3 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default_for_windows" selected>Default for Windows</option><option data-group="primary" value="primary_default_for_macos">Default for macOS</option><option data-group="primary" value="primary_intellij_idea_classic_macos">IntelliJ IDEA Classic (macOS)</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="primary" value="primary_default_for_xwin">Default for XWin</option><option data-group="primary" value="primary_default_for_gnome">Default for GNOME</option><option data-group="primary" value="primary_default_for_kde">Default for KDE</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="primary" value="primary_eclipse_macos">Eclipse (macOS)</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_sublime_text">Sublime Text</option><option data-group="primary" value="primary_sublime_text_macos">Sublime Text (macOS)</option><option data-group="secondary" value="secondary_default_for_windows">Default for Windows</option><option data-group="secondary" value="secondary_default_for_macos">Default for macOS</option><option data-group="secondary" value="secondary_intellij_idea_classic">IntelliJ IDEA Classic</option><option data-group="secondary" value="secondary_emacs">Emacs</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_default_for_xwin">Default for XWin</option><option data-group="secondary" value="secondary_default_for_gnome">Default for GNOME</option><option data-group="secondary" value="secondary_default_for_kde">Default for KDE</option><option data-group="secondary" value="secondary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_eclipse_macos">Eclipse (macOS)</option><option data-group="secondary" value="secondary_netbeans">NetBeans</option><option data-group="secondary" value="secondary_sublime_text">Sublime Text</option><option data-group="secondary" value="secondary_sublime_text_macos">Sublime Text (macOS)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 data-toc="Simultaneous_debugging_sessions" id="Simultaneous_debugging_sessions.xml">Simultaneous debugging sessions</h1>    <p id="e409bf58">        When building web applications with multiple tiers, we can have frontend PHP code calling into backend PHP code. Often, developers work on both sides of such application at the same time. In this tutorial, we'll look at a number of ways to step from front-end code into back-end code and debug them simultaneously.    </p>    <div class="chapter"><h2 id="0b251230" data-toc="Simultaneous_debugging_sessions#0b251230">Before you start</h2>        <a name="configure_debugging_engine_prerequisites"></a>        <p id="4480b26d">            Before you start debugging, make sure that you have a debugging engine installed and configured properly. PhpStorm supports debugging with two most popular tools:            <a href="http://xdebug.org/download.php" data-external="true" target="_blank" rel="noopener noreferrer">Xdebug</a> and <a href="http://www.zend.com/en/products/studio/downloads" data-external="true" target="_blank" rel="noopener noreferrer">Zend Debugger</a>.            These tools cannot be used simultaneously because they block each other.            To avoid this problem, you need to update the corresponding sections in the <span class="filepath">php.ini</span>            file as described in <a href="configuring-xdebug.html">Configuring Xdebug</a> and <a href="configuring-zend-debugger.html">Configuring Zend Debugger</a>.        </p>        <p id="640bbed9">            To open the active <span class="filepath">php.ini</span> file in the editor:        </p>            <a name="ps_openActivePhpIni"></a>        <ol class="list _decimal"><li class="list__item" id="a227b294">                <p id="b0cd840d"><a name="open_settings"></a>                In the        <a name="settings_dialog"></a>        <span class="control">Settings/Preferences</span> dialog <kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd>, click <span class="control">PHP</span> under <span class="control">Languages &amp; Frameworks</span>.                </p>            </li><li class="list__item" id="d0a91069"><p>                On the <a href="php.html">PHP</a> page that opens, click <img class="inline-icon-9" src="/help/img/idea/2019.3/icons.general.ellipsis@2x.png" width="9" alt="the Browse button"> next                to the <span class="control">CLI Interpreter</span> field.            </p></li><li class="list__item" id="265d528c"><p>                In the <span class="control">CLI Interpreters</span> dialog that opens, the <span class="control">Configuration File</span> read-only field                shows the path to the active <span class="filepath">php.ini</span> file. Click <span class="control">Open in Editor</span>.            </p></li></ol>                </div>    <div class="chapter"><h2 id="87042508" data-toc="Simultaneous_debugging_sessions#87042508">Ensuring a debugger session is started for secondary requests</h2>        <p id="42a95d76">The way Xdebug and Zend Debugger work is that they make a connection from the PHP interpreter to our IDE. While possible, it's good practice to not do this for every request being made but only for those where debugging is desired. For our <span class="filepath">frontend</span>         script, we'll do this from the browser using the <a href="https://www.jetbrains.com/phpstorm/marklets/" data-external="true" target="_blank" rel="noopener noreferrer">PhpStorm bookmarklets</a> or a <a href="browser-debugging-extensions.html">Browser Debugging Extension</a>.        </p>        <p id="9512495e">            Both debugging engines can start a debugging session on-demand by passing in a request variable (<code class="code">XDEBUG_SESSION_START=session_name</code> for Xdebug, <code class="code">start_debug=1</code> for Zend Debugger), which is what the bookmarklets and browser extensions do. However, this will only work for the first script we hit. Consider the following two scripts: <span class="filepath">frontend.php</span> and <span class="filepath">backend.php</span>.        </p>        <ul class="list _bullet"><li class="list__item" id="d7b99d8a"><p>                <span class="filepath">frontend.php</span>:                <div class="code-block" data-lang="php">
                    &lt;?php
                    $personJson = file_get_contents('http://localhost/backend.php');
                    $person = json_decode($personJson);

                    var_dump($person);
                </div>            </p></li><li class="list__item" id="938a858c"><p>            <span class="filepath">backend.php</span>:            <div class="code-block" data-lang="php">
                &lt;?php
                class Person {
                    public $Name;
                    public $Email;
                }

                $person = new Person();
                $person-&gt;Name = "John";
                $person-&gt;Email = "john.smith@company.com";

                echo json_encode($person);
            </div>        </p></li></ul>        <p id="4e9be5a8">            When the first script calls into the second script using <code class="code">file_get_contents</code>, it starts a separate HTTP connection which neither is a part of the existing debugging session, nor starts a new one. If we want Xdebug or Zend Debugger to start debugging for the called script as well, we need to either configure the debugger to start debugging all the time (<code class="code">xdebug.remote_autostart=1</code> for Xdebug), or pass the request parameters along.        </p>        <p id="eb59afc8">            Let's rewrite the <span class="filepath">frontend.php</span> script to do this. In its simplest form, we could check for the Xdebug or Zend Debugger request parameters to be present and just pass them along.        </p>        <div class="code-block" data-lang="php">
            &lt;?php
            $debuggingQuerystring = '';
            if (isset($_GET['XDEBUG_SESSION_START'])) { // xdebug
                $debuggingQuerystring = 'XDEBUG_SESSION_START=' . $_GET['XDEBUG_SESSION_START'];
            }
            if (isset($_COOKIE['XDEBUG_SESSION'])) { // xdebug (cookie)
                $debuggingQuerystring = 'XDEBUG_SESSION_START=PHPSTORM';
            }
            if (isset($_GET['start_debug'])) { // zend debugger
                $debuggingQuerystring = 'start_debug=' . $_GET['start_debug'];
            }

            $personJson = file_get_contents('http://localhost/backend.php?' . $debuggingQuerystring);
            $person = json_decode($personJson);

            var_dump($person);
        </div>        <p id="d9dea465">            This should start the client debugging session with the same session name as the parent (unless Xdebug was started using cookies, where we fallback to using the default <code class="code">PHPSTORM</code> session name).        </p>    </div>    <div class="chapter"><h2 id="3cbd29db" data-toc="Simultaneous_debugging_sessions#3cbd29db">Increasing the number of simultaneous debugger connections</h2>        <p id="df60d45f">            By default, PhpStorm accepts a single debugger connection at a time. This is a good thing: imagine making extensive use of AJAX and having a debugging session per AJAX call that comes in! For some scenarios, though, it makes sense to allow more than one connection, for example, for debugging frontend and backend at the same time.        </p>        <p id="9f29d6fc">            To enable support for several debugger connections, <a name="open_settings"></a>                in the        <a name="settings_dialog"></a>        <span class="control">Settings/Preferences</span> dialog <kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd>, select <span class="control">PHP</span> under <span class="control">Languages &amp; Frameworks</span>, and then click <span class="control">Debug</span>. On the <a href="debug.html">Debug</a> page that opens, increase the maximum number of connections, for example to <span class="control">3</span>.        </p>        <figure><img alt="ps settings max debug connections" title="ps settings max debug connections" src="/help/img/idea/2019.3/ps_settings_max_debug_connections.png" id="dc3265e5" width="782" height="702"></figure>    </div>    <div class="chapter"><h2 id="0ad75c54" data-toc="Simultaneous_debugging_sessions#0ad75c54">Listening for incoming debugger connections</h2>        <p id="a6c3b22c">            <a name="enable_listening_debug_connections"></a>        In PhpStorm, enable listening to incoming debug connections by either clicking        <img class="inline-icon-16" src="/help/img/idea/2019.3/php.icons.debug_listen_off@2x.png" width="16" alt="the Start Listening for PHP Debug Connections button">        on the toolbar or selecting <span data-skip-index="skip" class="menupath">Run | Start Listening for PHP Debug Connections</span> in the main        menu. This will        ensure PhpStorm reacts when a debugging session is started and opens the <a href="debug-tool-window.html">Debug        tool window    </a> automatically. Before launching the script, make sure that either a <a href="using-breakpoints.html">        breakpoint    </a> is set or the        <span class="control">Break at first line in PHP scripts</span>        option is enabled on the        <a href="debug.html">Debug</a>        page of the <span class="control">Settings/Preferences</span> dialog <kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd>.            </p>    </div>    <div class="chapter"><h2 id="bbb7cf8b" data-toc="Simultaneous_debugging_sessions#bbb7cf8b">Starting a debugging session</h2>        <p id="8fcc34de">            To start a debugging session from the browser, we can use either the <a href="https://www.jetbrains.com/phpstorm/marklets/" data-external="true" target="_blank" rel="noopener noreferrer">PhpStorm bookmarklets</a> or a <a href="browser-debugging-extensions.html">Browser Debugging Extension</a>. As soon as we <a href="using-breakpoints.html">add a breakpoint</a>, PhpStorm will notify us that there's an incoming debugger connection and pause script execution.        </p>        <figure><img alt="ps simultaneous debugging 1" title="ps simultaneous debugging 1" src="/help/img/idea/2019.3/ps_simultaneous_debugging_1.png" id="695a1578" width="767" height="962"></figure>        <p id="155425e8">            If we step into the <code class="code">file_get_contents</code> function call, PHP will start a second debugger connection, which will in turn open the debugger in PhpStorm in a separate tab. We've now effectively stepped from <span class="filepath">frontend</span> to <span class="filepath">backend</span>.        </p>        <figure><img alt="ps simultaneous debugging 2" title="ps simultaneous debugging 2" src="/help/img/idea/2019.3/ps_simultaneous_debugging_2.png" id="443bcef9" width="767" height="962"></figure>        <p id="88c415a6">            When the <span class="filepath">backend</span> script returns, the debugger continues where we left off in the <span class="filepath">frontend</span> script.        </p>        <figure><img alt="ps simultaneous debugging 3" title="ps simultaneous debugging 3" src="/help/img/idea/2019.3/ps_simultaneous_debugging_3.png" id="8a7286ab" width="767" height="962"></figure>    </div>    <div class="chapter"><h2 id="be7949ec" data-toc="Simultaneous_debugging_sessions#be7949ec">Debugging PHP and JavaScript Simultaneously</h2>        <p id="01caae57">            Web applications typically consist of both PHP and JavaScript code: PHP code runs on the server side, while JavaScript runs in the browser. With PhpStorm, you can easily debug the PHP code to inspect what is happening on the server, modify variables and so on. We can also debug the JavaScript running in the browser by starting a JavaScript debugging session from the IDE. To learn how you can debug both parts at the same time, refer to the <a href="debugging-php-js.html">Debugging PHP and JavaScript code at the same time</a> tutorial.        </p>    </div><div class="last-modified" data-skip-index="skip">Last modified: 29 November 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="remote-debugging-via-ssh-tunnel.html">Remote debugging via SSH tunnel</a><a class="navigation-links__next" href="debugging-php-js.html">Debugging PHP and JavaScript code at the same time</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>