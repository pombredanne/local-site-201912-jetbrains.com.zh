<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Using dotPeek as a Symbol Server - Help | dotPeek</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Using_product_as_a_Symbol_Server" data-article-props="&#xA;                {&#xA;                &#xA;            &#34;seeAlso&#34;:[&#xA;            &#xA;                {&#34;title&#34;: &#34;Procedures&#34;,&#xA;                 &#34;links&#34;: [&#xA;                &#xA;        {&#34;url&#34;:&#34;Generating_PDB_Files.html&#34;,&#34;text&#34;:&#34;Generate PDB Files&#34;}&#xA;    ,&#xA;        {&#34;url&#34;:&#34;Exporting_Assembly_to_Project.html&#34;,&#34;text&#34;:&#34;Export Assembly to Project&#34;}&#xA;    &#xA;                    ]},&#xA;                {&#34;title&#34;: &#34;Reference&#34;,&#xA;                 &#34;links&#34;: [&#xA;                &#xA;        {&#34;url&#34;:&#34;Reference__Project_PDB_Generation.html&#34;,&#34;text&#34;:&#34;Project/PDB Generation Status window&#34;}&#xA;    &#xA;                    ]}&#xA;            ]&#xA;        &#xA;                }&#xA;            " data-disqus-id="Using_product_as_a_Symbol_Server_dpk"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search dotPeek Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>dotPeek 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="secondary" value="rs">ReSharper 2.x/IntelliJ IDEA</option><option data-group="primary" value="vs">Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Using_product_as_a_Symbol_Server" id="Using_product_as_a_Symbol_Server.xml">Using dotPeek as a Symbol Server</h1>    <p id="symbol_server">        dotPeek can function as a symbol server, that is,        it can supply a debugger with the information required to debug compiled assemblies.    </p>    <p id="f253d0ef">        In contrast to traditional symbol servers, for example        <a href="http://support.microsoft.com/kb/311503" data-external="true" target="_blank" rel="noopener noreferrer">Microsoft Symbol Server</a>,        dotPeek does not store any symbol files, it generates PDB and source files for the requested assemblies        and returns them back to the debugger.    </p>    <div class="chapter"><h2 id="running-dotpeek-symbol-server" data-toc="Using_product_as_a_Symbol_Server#running-dotpeek-symbol-server">Run dotPeek Symbol Server</h2>        <section class="procedure-steps"><h3 id="c0cc289b">To start/stop dotPeek symbol server</h3><ul class="list "><li class="list__item" id="3dac35ac"><p>                Click                <span class="control">Start/Stop Symbol Server</span>                <img alt="Start/Stop Symbol Server" title="Start/Stop Symbol Server" src="/help/img/dotnet/2019.2/icon_start_symbol_server.png" id="0d80276b" width="16" height="16" class="inline-icon-16">                on the toolbar.            </p></li><li class="list__item" id="ca5ff249"><p>                Choose                <span data-skip-index="skip" class="menupath">Tools | Start/Stop Symbol Server</span>                in the main menu.            </p></li></ul></section>        <p id="2a751d71">            At the first start of dotPeek symbol server, you are asked to choose the assemblies            you want to generate symbol files for. See            <a href="#configure">Configuring dotPeek Symbol Server</a>            below to learn about configuration options.        </p>        <p id="ad16fd66">            As soon as dotPeek symbol server is started, the corresponding icon appear in the status bar.            You can hover the mouse pointer over it to check its address and the current configuration:        </p>        <figure><img alt="dotPeek symbol server icon in the status bar" title="dotPeek symbol server icon in the status bar" src="/help/img/dotnet/2019.2/symbol_server_status.png" id="6a556b7e" width="483" height="163"></figure>        <p id="5e17752e">            To make use of dotPeek symbol server, you can specify its address in your debugger settings.            In Microsoft Visual Studio, the configuration is as follows:        </p>        <section class="procedure-steps"><h3 id="65e25d40">To set up Visual Studio for working with dotPeek Symbol Server</h3><ol class="list _decimal"><li class="list__item" id="6a3fc3fb"><p>                In the Visual Studio menu, select                <span data-skip-index="skip" class="menupath">Tools | Options | Debugging | Symbols</span>.            </p></li><li class="list__item" id="a0c0c0e1"><p>                Click                <span class="control">Add new location</span>                and specify the following address for it:                <span class="filepath">http://localhost:33417/</span>.                (The port number is configurable on the                <span data-skip-index="skip" class="menupath">Symbol Server</span> page of dotPeek options.                <figure><img alt="Debugging symbols options in Visual Studio" title="Debugging symbols options in Visual Studio" src="/help/img/dotnet/2019.2/vs_symbol_options.png" id="633e75f5" width="530" height="276"></figure>            </p></li><li class="list__item" id="988a5244"><p>                In the Visual Studio options, go to the                <span class="control">Debugging | General</span>                page and clear the                <span class="control">Enable Just My Code</span>                checkbox.            </p></li></ol></section>        <aside data-type="tip" class="prompt" data-title="" rel="65e25d40" id="f4fe7dfb">            <p id="733db5d4">                To be able to set breakpoints in the compiled code, choose                <span data-skip-index="skip" class="menupath">Debug | New Breakpoint | Break on Function</span>                in the Visual Studio menu.                For more information, see                <a href="https://msdn.microsoft.com/en-us/library/15d1wtaf%28v=vs.90%29.aspx" data-external="true" target="_blank" rel="noopener noreferrer">How to: Set a Function Breakpoint</a>.            </p>        </aside>    </div>    <div class="chapter"><h2 id="configure" data-toc="Using_product_as_a_Symbol_Server#configure">Configure dotPeek Symbol Server</h2>        <p id="ad87ad13">            dotPeek symbol server allows you to choose the exact assemblies for which symbol files should be generated.            The correct configuration prevents you from undesired stepping into system assemblies or other assemblies            that you are not interested in.        </p>        <section class="procedure-steps"><h3 id="504e7aad">To configure dotPeek symbol server</h3><a name="step_open_options_and_choose_page"></a><ol class="list _decimal"><li class="list__item" id="a2b7eaff"><p>            <a name="open_options_raw"></a>                    Select                        <span data-skip-index="skip" class="menupath">Tools | Options</span>            in the main menu,            then choose            <span data-skip-index="skip" class="menupath">Symbol Server</span> on the left.        </p></li><li class="list__item" id="359552ee">                Using the radio buttons, choose one of the options under the                <span class="control">Generate symbol files (.pdb) for</span>.                <a name="generate_symbols_options"></a>                    The meanings of the first four options are obvious.                    The last one allows for the most flexibility — after selecting this option,                    you can select only those assemblies which you need for debugging, and                    <a href="Opening_Assembly_Files.html">open them in the Assembly Explorer</a>.                    <aside data-type="tip" class="prompt" data-title="" rel="420869b0" id="213868fb">                        <p id="906382aa">                            You can use                            <a href="Managing_Assemblies.html">assembly lists</a>                            to load the required set of assemblies when necessary.                        </p>                    </aside>                            </li><li class="list__item" id="34cf75bc"><p>                Optionally, you can change the port number that will be used for dotPeek symbol server.            </p></li><li class="list__item" id="54cca98f"><p>                                        Click                <span class="control">OK</span>.                    </p></li></ol></section>    </div>    <div class="chapter"><h2 id="possible-problems-and-solutions" data-toc="Using_product_as_a_Symbol_Server#possible-problems-and-solutions">Possible Problems and Solutions</h2>        <p id="3cb18fab">            If            <span class="keyword">something goes wrong</span> with dotPeek symbol server,            the first thing you can do is to open the            <a href="Reference__Project_PDB_Generation.html">Project/PDB Generation Status window</a>            (<span data-skip-index="skip" class="menupath">Windows | Project/PDB Generation Log</span>            in dotPeek's menu).            Here you can see all symbol server tasks as well as the results of the            <a href="Generating_PDB_Files.html">Generate PDB</a>            and the            <a href="Exporting_Assembly_to_Project.html">Generate Project</a>            commands.            If some PDB was requested from dotPeek symbol server by a debugger but was not generated,            you will see the corresponding entry with the error message in this window:        </p>        <ul class="list _ul"><li class="list__item" id="17e3839f"><p>                Most often, problems occur when the target assembly is not found. To fix that, you can                <a href="Opening_Assembly_Files.html">open the assembly in the Assembly Explorer</a>.                If you don't know the location of the assembly, you can learn it when Visual Studio is in the                debug mode — open the                <span class="control">Modules</span>                window (<span data-skip-index="skip" class="menupath">Debug | Windows | Modules</span>) and check the                <span class="control">Path</span>                column.            </p></li><li class="list__item" id="efec4c26"><p>                If you are running dotPeek on 64-bit Windows, check that you are running the 64-bit version of                dotPeek (there are two executables —                <span class="filepath">dotPeek32.exe</span> and                <span class="filepath">dotPeek64.exe</span> in the installation directory                <span class="filepath">%localappdata%\JetBrains\Installations\dotPeek[N]</span>).            </p></li></ul>        <p id="af2e3db1">            If the            <span class="keyword">requested assembly does not appear</span> in the            <a href="Reference__Project_PDB_Generation.html">Project/PDB Generation Status window</a>, it means that the debugger            has already found the corresponding symbol file and did not requested it from dotPeek.            If the symbol file is correct and the source code is available, then everything is fine,            the assembly can be debugged without dotPeek. If not, try the following:        </p>        <ul class="list _ul"><li class="list__item" id="41c6f926"><p>                Delete or rename the PDB file that makes problems. You can always find the actual PDB file location, if                any, for each assembly when Visual Studio is in the debug mode - open the                <span class="control">Modules</span>                window (<span data-skip-index="skip" class="menupath">Debug | Windows | Modules</span>) and check the                <span class="control">Symbol File</span>                column.            </p></li><li class="list__item" id="40939e0f"><p>                If the PDB file is received from another symbol server, you can either disable this server or move the                dotPeek symbol server up in the list of symbol servers                (<span data-skip-index="skip" class="menupath">Debugging | Symbols | Symbol file locations</span>                in the Visual Studio options).            </p></li></ul>        <a name="disable_optimization"></a>            <p id="880873e3">                When debugging                <span class="keyword">optimized assemblies</span>, some debugger functions are just not available,                for example you would not see values of local variables, even if symbol files are correct.                So you might want to disable the optimization.            </p>            <ul class="list _ul"><li class="list__item" id="7d2052d7"><p>                    Check if the assembly is optimized when Visual Studio is in the debug mode — open the                    <span class="control">Modules</span>                    window                    (<span data-skip-index="skip" class="menupath">Debug | Windows | Modules</span>) and check the Optimized column.                </p></li><li class="list__item" id="814a54f6"><p>                    Select                    <span class="control">Suppress JIT optimization on module load</span>                    checkbox in Visual Studio options                    (<span data-skip-index="skip" class="menupath">Tools | Options | Debugging | General</span>).                </p></li><li class="list__item" id="1cb17614">                    <p id="f9806d5d">                        To disable the use of all NGEN (pre-JIT) images (<span class="filepath">*.ni.dll</span>),                        you can set the environmental variable                        <code class="code">COMPLUS_ZapDisable=1</code>.                        Check out these articles for examples and more information:                    </p>                    <ul class="list _ul"><li class="list__item" id="a5c3105d">                            <a href="https://blogs.msdn.microsoft.com/sburke/2008/01/29/how-to-disable-optimizations-when-debugging-reference-source/" data-external="true" target="_blank" rel="noopener noreferrer">How to disable optimizations when debugging Reference Source</a>                        </li><li class="list__item" id="b6bfcb68">                            <a href="https://github.com/Microsoft/dotnet/blob/master/Documentation/testing-with-ryujit.md" data-external="true" target="_blank" rel="noopener noreferrer">.NET Framework - Troubleshooting RyuJIT</a>                        </li></ul>                </li></ul>            </div>    <div class="last-modified" data-skip-index="skip">Last modified: 18 November 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Navigation_and_Search__CamelHumps.html">CamelHumps</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>