<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>用户报告-帮助|浮动许可证服务器</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="detailed_server_usage_statistics" data-sections-label="Platforms" data-section-switcher="[Linux/macOS;Windows]"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索浮动许可证服务器帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>浮动许可证服务器帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="detailed_server_usage_statistics.xml" data-toc="detailed_server_usage_statistics">用户报告</h1>    <div class="chapter"><h2 id="reports_to_jba" data-toc="detailed_server_usage_statistics#reports_to_jba">JetBrains帐户中的报告</h2>        <p id="39278258">从您的在线帐户中选择浮动许可证服务器（FLS）将授予您在指定时间范围内按产品访问许可证使用的权限。</p>        <figure><img alt="详细的服务器使用情况统计" title="详细的服务器使用情况统计" src="/help/img/license_server/usage_details_JBA.png" id="02d69206" width="1417" height="861"></figure>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="7868c781"><p>使用组织的配置文件管理员的凭据登录到<a href="https://account.jetbrains.com" rel="noopener noreferrer" data-external="true" target="_blank">JetBrains帐户</a> 。</p></li><li class="list__item" id="360b30c5"><p>打开许可证服务器团队的页面。</p></li><li class="list__item" id="56d51962"><p>打开<b id="81b19a27">服务器</b>页面。</p></li><li class="list__item" id="39ffcfea">                <p id="4e02d3c0">选择查看以下用途：</p>                <ul class="list _ul"><li class="list__item" id="9d133699"><p>一天</p></li><li class="list__item" id="cefc3e57"><p>3天</p></li><li class="list__item" id="17dbf5d8"><p>一周</p></li><li class="list__item" id="7f0579e9"><p>一个月</p></li><li class="list__item" id="662db8ea"><p>一年</p></li></ul>            </li></ol></section>    </div>    <div class="chapter"><h2 id="user-reporting-through-license-server" data-toc="detailed_server_usage_statistics#user-reporting-through-license-server">FLS中的报告</h2>        <p id="d38ceb3e">该报告包含（在表中）：</p>        <ul class="list _ul"><li class="list__item" id="4a35db81"><p>许可证使用情况：</p><figure><img alt="资产使用表" title="资产使用表" src="/help/img/license_server/asset_usage_table.png" id="a9655895" width="550" height="656"></figure>                <figure><img alt="资产使用图" title="资产使用图" src="/help/img/license_server/asset_usage_graph.png" id="5bdf4776" width="550" height="165"></figure>            <p></p></li><li class="list__item" id="4c423bd6"><p>特定版本的每种产品请求的许可证数量：</p><figure><img alt="票务请求" title="票务请求" src="/help/img/license_server/ticket_requests.png" id="bb422f30" width="550" height="656"></figure>            <p></p></li><li class="list__item" id="f437b517"><p>特定用户对特定产品和版本的使用情况：</p><figure><img alt="产品的用户和IP" title="产品的用户和IP" src="/help/img/license_server/users_and_ips_to_products.png" id="6b9a866f" width="550" height="656"></figure>            <p></p></li><li class="list__item" id="d2f3a09f"><p>具有相关IP地址的用户：</p><figure><img alt="用户IP" title="用户IP" src="/help/img/license_server/ips_to_users.png" id="2f17ef8f" width="550" height="656"></figure>            <p></p></li></ul>    </div>    <div class="chapter"><h2 id="emailed-statistics" data-toc="detailed_server_usage_statistics#emailed-statistics">电子邮件统计</h2>        <p id="0901d2f6">要通过电子邮件获取相同的表格统计信息，请配置SMTP集成。</p>        <aside class="prompt" rel="0901d2f6" id="0320be2d" data-type="note" data-title="">            <p id="fc95b7b2">确保电子邮件服务/守护程序监听了端口，并在防火墙中正确配置了端口。</p>        </aside>        <section class="procedure-steps" data-section="Linux/macOS"><h3 id="f7fd9f29">SMTP集成的配置</h3><ol class="list _decimal"><li class="list__item" id="33a5c3ac"><p>使用命令行转到FLS安装目录。</p></li><li class="list__item" id="1a816adb">                <p id="f45a4746">使用以下命令停止FLS：</p>                <div class="code-block" data-lang="bash">./bin/license-server.sh停止</div>            </li><li class="list__item" id="5b78fb81">                <p id="3c12c870">配置电子邮件服务器：</p>                <div class="code-block" data-lang="bash">./bin/license-server.sh配置\ --smtp.server mail.company.org \ --smtp.server.port 25</div>                <p id="213e77a7">哪里<code class="code">mail.company.org</code>是邮件服务器的主机， <code class="code">25</code>是邮件服务侦听的端口。</p>            </li><li class="list__item" id="9040a3b2">                <p id="b2a40785">配置报告收件人：</p>                <div class="code-block" data-lang="bash">./bin/license-server.sh configure \ --stats.recipients stat@company.org</div>                <p id="68b5c7e1">哪里<code class="code">stats@company.org</code>是报告的收件人。例如，如果有多个收件人，请使用逗号分隔记录<code class="code">recipient1@company.org,recipient2@company.org</code> 。</p>            </li><li class="list__item" id="a22e790c">                <p id="3b26a0db">配置电子邮件发件人的地址：</p>                <div class="code-block" data-lang="bash">./bin/license-server.sh配置\ --stats.from report-sender@company.org</div>                <p id="43fb85ab">哪里<code class="code">report-sender@company.org</code>是用作电子邮件报告发件人的地址。</p>            </li><li class="list__item" id="024c77ce">                <p id="eb5a1fd3">如果邮件服务器需要授权，请配置用户名和密码：</p>                <div class="code-block" data-lang="bash">./bin/license-server.sh配置\ --smtp.server.username <mail-server-user>\ --smtp.server.password <mail-server-password>
    </mail-server-password></mail-server-user></div>                <p id="9b62a824">哪里<code class="code"><mail-server-user></code>是邮件服务器用户的用户名， <code class="code"><mail-server-password></code>是用户的密码。</p>            </li><li class="list__item" id="038b5330">                <p id="df5126d5">使用以下命令启动FLS：</p>                <div class="code-block" data-lang="bash">./bin/license-server.sh开始</div>            </li></ol></section>        <section class="procedure-steps" data-section="Windows"><h3 id="d8cabaa6">SMTP集成的配置</h3><ol class="list _decimal"><li class="list__item" id="a24a44f0">                <p id="a34246ca">使用<span class="control">JetBrains许可服务</span>停止FLS。</p>                <p id="d6348a14"><span class="control">服务Microsoft管理控制台（MMC）（控制面板>管理工具>服务> JetBrains许可服务）</span>                </p>            </li><li class="list__item" id="d66aa9de"><p>使用命令行转到FLS安装目录。</p></li><li class="list__item" id="fe92b624">                <p id="2562c3ea">配置电子邮件服务器：</p>                <div class="code-block" data-lang="bash">。\ apps \ license-server \ bin \ license-server.bat配置^ --smtp.server mail.company.org ^ --smtp.server.port 25</div>                <p id="14960e75">哪里<code class="code">mail.company.org</code>是邮件服务器的主机， <code class="code">25</code>是邮件服务侦听的端口。</p>            </li><li class="list__item" id="13e515a3">                <p id="f99fcb33">配置报告收件人：</p>                <div class="code-block" data-lang="bash">。\ apps \ license-server \ bin \ license-server.bat配置^ --stats.recipients stat@company.org</div>                <p id="fd826517">哪里<code class="code">stats@company.org</code>是报告的收件人。例如，如果有多个收件人，请使用逗号分隔记录<code class="code">recipient1@company.org,recipient2@company.org</code> 。</p>            </li><li class="list__item" id="65962f98">                <p id="2b60be2f">配置电子邮件发件人的地址：</p>                <div class="code-block" data-lang="bash">。\ apps \ license-server \ bin \ license-server.bat配置^ --stats.from report-sender@company.org</div>                <p id="c3ef5c38">哪里<code class="code">report-sender@company.org</code>是用作电子邮件报告发件人的地址。</p>            </li><li class="list__item" id="802cd1ac">                <p id="5c8a2dbe">如果邮件服务器需要授权，请配置用户名和密码：</p>                <div class="code-block" data-lang="bash">。\ apps \ license-server \ bin \ license-server.bat配置^ --smtp.server.username <mail-server-user>^ --smtp.server.password <mail-server-password>
    </mail-server-password></mail-server-user></div>                <p id="64c3c82c">哪里<code class="code"><mail-server-user></code>是邮件服务器用户的用户名， <code class="code"><mail-server-password></code>是用户的密码。</p>            </li><li class="list__item" id="e07ef84c">                <p id="89339cc2">使用<span class="control">JetBrains许可服务</span>启动FLS。</p>            </li></ol></section>    </div>    <div class="chapter"><h2 id="lack-of-licenses-notification" data-toc="detailed_server_usage_statistics#lack-of-licenses-notification">缺少可用许可证通知</h2>        <aside class="prompt" rel="lack-of-licenses-notification" id="a5b9c60e" data-type="note" data-title=""><p>可从内部<span class="emphasis">版本＃14451获得</span> 。</p></aside>        <p id="839efa01">默认情况下，它是禁用的，需要已配置的SMTP，每小时报告一次（频率不可配置）。要启用它，请使用以下命令：</p>        <section class="procedure-steps" data-section="Linux/macOS"><ol class="list _decimal"><li class="list__item" id="4c1513eb"><p>使用命令行转到FLS安装目录。</p></li><li class="list__item" id="ae915e17">                <p id="94be6c94">使用以下命令停止FLS：</p>                <div class="code-block" data-lang="bash">./bin/license-server.sh停止</div>            </li><li class="list__item" id="ae904281">                <p id="ad4a567a">在命令行中运行以下命令：</p><div class="code-block" data-lang="bash" data-section="Linux/macOS">./bin/license-server.sh configure \ --reporting.out.of.license.threshold 90</div>哪里<code class="code">90</code> =用户所占所有许可证的百分比，一个触发阈值，用于初始化电子邮件发送。<p></p>            </li></ol></section>        <section class="procedure-steps" data-section="Windows"><ol class="list _decimal"><li class="list__item" id="3e2106de">                <p id="b591cb73">使用<span class="control">JetBrains许可服务</span>停止FLS。</p>                <p id="6962d00b">                    <span class="control">服务Microsoft管理控制台（MMC）（控制面板>管理工具>服务> JetBrains许可服务）</span>                </p>            </li><li class="list__item" id="414732af"><p>使用命令行转到FLS安装目录。</p></li><li class="list__item" id="5f180050"><p id="0fa28f43">在命令行中运行以下命令：</p><div class="code-block" data-lang="bash" data-section="Windows">。\ apps \ license-server \ bin \ license-server.bat配置^ --reporting.out.of.license.threshold 90</div>哪里<code class="code">90</code> =用户所占所有许可证的百分比，一个触发阈值，用于初始化电子邮件发送。<p></p>            </li></ol></section>    </div>    <div class="chapter"><h2 id="statistics-via-API" data-toc="detailed_server_usage_statistics#statistics-via-API">通过API统计</h2>        <p id="a52d9d19">通过API以JSON格式报告的使用情况统计信息有2种格式：</p>        <div class="tabs" id="439ca026"><div class="tabs__content" id="e11ff4ab" data-title="Historical data">                <section class="procedure-steps" data-section="Linux/macOS"><h3 id="0018b01c">ZIP存档中最新格式的历史数据</h3><ol class="list _decimal"><li class="list__item" id="b342e865"><p>使用命令行转到FLS安装目录。</p></li><li class="list__item" id="adc568d3">                        <p id="25487aae">使用以下命令停止FLS：</p>                        <div class="code-block" data-lang="bash">./bin/license-server.sh停止</div>                    </li><li class="list__item" id="954c078a">                        <p id="737b5d2c">配置令牌，该令牌稍后将用作POST请求的参数，以通过在命令行中运行的API获取统计信息：</p>                        <div class="code-block" data-lang="bash">./bin/license-server.sh配置\ --reporting.token <token>
    </token></div>                        <p id="290a2e57">哪里<code class="code"><TOKEN></code>是数字/字母的随机组合，您将用作密码来访问统计信息。</p>                    </li><li class="list__item" id="604b1b22">                        <p id="5deedcb1">使用以下命令启动FLS：</p>                        <div class="code-block" data-lang="bash">./bin/license-server.sh开始</div>                    </li><li class="list__item" id="288d64f3">                        <p id="9cf7a5af">发送POST请求至<code class="code">http(s)://<fls_hostname>:<fls_port>/reportApi</code>具有以下参数：</p>                        <div class="table-wrapper"><table width="100%" id="6815a5a4"><thead><tr id="836692b7" class="ijRowHead"><th id="01a1e6d8"><p>参数</p></th><th id="8b4b13f4"><p>描述</p></th></tr></thead><tbody><tr id="e23a565e" class="ijRowOdd"><td id="56852886">                                    <code class="code">granularity</code>                                </td><td id="e6e74eae"><p>报告的粒度，从每小时到每年分别为0到4</p></td></tr><tr id="9abed0ae" class="ijRowEven"><td id="ff18054b">                                    <code class="code">start</code>                                </td><td id="4fda5370"><p>报表开始日期为YYYY-MM-DD格式</p></td></tr><tr id="ebed87cf" class="ijRowOdd"><td id="ee5a2fdf">                                    <code class="code">end</code>                                </td><td id="1b158007"><p>报告结束日期为YYYY-MM-DD格式</p></td></tr><tr id="109c2918" class="ijRowEven"><td id="eb6ebdf6">                                    <code class="code">token</code>                                </td><td id="16cefcc0"><p>                                    <code class="code"><TOKEN></code>在第2步配置</p></td></tr></tbody></table></div>                    </li></ol></section>                <section class="procedure-steps" data-section="Windows"><h3 id="7e682af4">ZIP存档中最新格式的历史数据</h3><ol class="list _decimal"><li class="list__item" id="76edc2b6">                        <p id="77e72ad6">使用<b id="98cd4f15">服务Microsoft管理控制台（MMC）</b>停止FLS <b id="98cd4f15">（控制面板>管理工具>服务> JetBrains许可服务）</b>                        </p>                    </li><li class="list__item" id="f3c3ed32"><p>使用命令行转到FLS安装目录。</p></li><li class="list__item" id="ad50955d">                        <p id="6c4926dd">配置令牌，该令牌稍后将用作POST请求的参数，以通过在命令行中运行的API获取统计信息：</p>                        <div class="code-block" data-lang="bash">。\ apps \ license-server \ bin \ license-server.bat配置^ --reporting.token <token>
    </token></div>                        <p id="94213ad1">哪里<code class="code"><TOKEN></code>是数字/字母的随机组合，您将用作密码来访问统计信息。</p>                    </li><li class="list__item" id="223ca195">                        <p id="1b331661">使用<span class="control">JetBrains许可服务</span>启动FLS。</p>                    </li><li class="list__item" id="66837da0">                        <p id="65314961">发送POST请求至<code class="code">http(s)://<fls_hostname>:<fls_port>/reportApi</code>具有以下参数：</p>                        <div class="table-wrapper"><table width="100%" id="43ea1296"><thead><tr id="354638bb" class="ijRowHead"><th id="e24f5a54"><p>参数</p></th><th id="c605230d"><p>描述</p></th></tr></thead><tbody><tr id="c6a13b7e" class="ijRowOdd"><td id="23a21723">                                    <code class="code">granularity</code>                                </td><td id="607d7635"><p>报告的粒度，从每小时到每年分别为0到4</p></td></tr><tr id="04e4488b" class="ijRowEven"><td id="5498e64d">                                    <code class="code">start</code>                                </td><td id="162e81bc"><p>报表开始日期为YYYY-MM-DD格式</p></td></tr><tr id="277bbc44" class="ijRowOdd"><td id="7c31de53">                                    <code class="code">end</code>                                </td><td id="1eebcb56"><p>报告结束日期为YYYY-MM-DD格式</p></td></tr><tr id="da380b3a" class="ijRowEven"><td id="0e44d50c">                                    <code class="code">token</code>                                </td><td id="da19144d"><p>                                    <code class="code"><TOKEN></code>在第2步配置</p></td></tr></tbody></table></div>                    </li></ol></section>            </div><div class="tabs__content" id="4b9f65a4" data-title="Real-time statistics">                <aside class="prompt" rel="4b9f65a4" id="5062e35c" data-type="note" data-title=""><p>可从<span class="emphasis">版本＃16429获得</span> 。</p></aside>                <section class="procedure-steps"><h3 id="9b95b43e">获取每用户格式的实时统计信息</h3><ol class="list _decimal"><li class="list__item" id="c06b0e71"><p>如上所述配置报告令牌。</p></li><li class="list__item" id="7d616b17"><p>发送<code class="code">GET</code>请求<code class="code">http(s)://<fls_hostname>:<fls_port>/tickets-report.json?token=<TOKEN></code>哪里<code class="code"><TOKEN></code>是在上一步中配置的秘密令牌。</p></li></ol></section>            </div></div>        <section class="procedure-steps"><h3 id="35f97d65">许可证总数列表</h3><p id="40626030">自<a href="release_notes.html#17768">版本17768起，</a>便有了一个端点来获取当前位于FLS上的所有许可证的列表。</p><ol class="list _decimal"><li class="list__item" id="fbff94af"><p>如上所述配置报告令牌。</p></li><li class="list__item" id="8156e5c3"><p>发送<code class="code">GET</code>请求<code class="code">http(s)://<fls_hostname>:<fls_port>/licenses-report.json?token=<TOKEN></code>哪里<code class="code"><TOKEN></code>等于上面配置的令牌。</p></li></ol><p id="ce519a7d">本报告未使用粒度。</p></section>        <div class="chapter"><h3 id="examples">例子</h3>            <div class="chapter"><h4 id="get_hourly_report">获取期间的每小时报告</h4>                <p id="c6c7d395">请求：</p>                <div class="code-block" data-lang="bash" data-section="Linux/macOS">curl -X POST \ --data“ granularity = 0＆start = 2017-09-12＆end = 2017-09-14＆token = <token>” \“ http://0.0.0.0:8080/reportApi”</token></div>                <div class="code-block" data-lang="bash" data-section="Windows">curl -X POST ^ --data“ granularity = 0＆start = 2017-09-12＆end = 2017-09-14＆token = <token>” ^“ http://127.0.0.1:80/reportApi”</token></div>                <p id="ef98e67a">输出：</p>                <div class="code-block" data-lang="json">{“总体”：[{“许可证”：“ IntelliJ IDEA Ultimate 2017.2”，“最大使用量”：1，“峰值时间”：“ 14/09/2017 10:04”，“最大可用时间：1}，{ “许可证”：“ IntelliJ IDEA Ultimate Toolbox”，“最大使用量”：0，“最大可用”：1}，{“许可证”：“ ReSharper C ++ 2016.2”，“最大使用量”：0，“最大可用”：7 }，{“许可证”：“ dotCover 2016.2”，“最大使用量”：0，“最大可用”：9}，{“许可证”：“ dotMemory 2016.2”，“最大使用量”：0，“最大可用”：10 }，{“许可”：“ dotTrace 2016.2”，“最大使用量”：0，“最大可用”：10}]，“每小时许可使用量”：[{“时间”：“ 14/09/2017 10:00” ，“ key”：“ IntelliJ IDEA Ultimate 2017.2”，“ count”：1}]，“每小时许可请求”：[{“ time”：“ 14/09/2017 10:00”，“ key”：“ IntelliJ IDEA Ultimate 2017.2“，” count“：1}]，” Users“：[{” user“：” user1“，” ips“：[” 127.0.0.1“]，” requests“：[[IntelliJ IDEA Ultimate 2017.2”] }]}</div>            </div>            <div class="chapter"><h4 id="get_real_time_statistic">获取实时统计</h4>                <p id="fc0fa574">请求：</p>                <div class="code-block" data-lang="bash" data-section="Linux/macOS">curl“ http://0.0.0.0:8080/tickets-report.json?token= <token>”</token></div>                <div class="code-block" data-lang="bash" data-section="Windows">curl“ http://127.0.0.1:80/tickets-report.json?token= <token>”</token></div>                <p id="f8c23261">输出：</p>                <div class="code-block" data-lang="json">[{“ userId”：“ testuser @ localhost”，“ clientId”：“ d001a808-1d3f-4a05-8318-7053180059b7”，“ ip”：“ 127.0.0.1”，“ license”：“ IntelliJ IDEA Ultimate Toolbox”，“产品”：“ II：2017.2”，“已发布”：“ 2018-03-27T18：22：46.689 + 0300”，“ last_seen”：“ 2018-03-27T18：42：54.249 + 0300”}]</div>            </div>            <div class="chapter"><h4 id="get_all_licenses">获取当前位于的所有许可证</h4>                <p id="23517912">请求：</p>                <div class="code-block" data-lang="bash" data-section="Linux/macOS">curl“ http://0.0.0.0:8080/licenses-report.json?token= <token>”</token></div>                <div class="code-block" data-lang="bash" data-section="Windows">curl“ http://127.0.0.1:80/licenses-report.json?token= <token>”</token></div>                <p id="ce0a920d">输出：</p>                <div class="code-block" data-lang="json">{“许可证”：[{“名称”：“ IntelliJ IDEA Ultimate 12.0”，“可用”：1，“已分配”：0，“ allocatedDetails”：“ / tickets / II？version = 12000＆trueUp = false“}，{”名称“：” IntelliJ IDEA Ultimate 2016.2“，”可用“：1，1，”已分配“：0，” allocatedDetails“：” / tickets / II？version = 2016200＆trueUp = false“}，{” name“：” IntelliJ IDEA Ultimate Toolbox“，” available“：0，” allocated“：1，” allocatedDetails“：” / tickets / II？version = 2017300＆trueUp = false“}，{”名称“：”所有产品包后备“，”可用“：1，1，”已分配“：0，” allocatedDetails“：” /票/所有？trueUp = false“}，{”名称“：”所有产品包工具箱“，”可用“：2，2，”已分配“：0，” allocatedDetails“：” /票/所有？trueUp = false“}]}</div>            </div>        </div>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月22日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="manage_licenses.html">管理许可证</a> <a class="navigation-links__next" href="release_notes.html">发行说明</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>