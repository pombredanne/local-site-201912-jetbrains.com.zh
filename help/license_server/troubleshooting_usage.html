<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>使用问题-帮助|帮助浮动许可证服务器</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="troubleshooting_usage" data-sections-label="Platforms" data-section-switcher="[Linux/macOS;Windows]"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索浮动许可证服务器帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>浮动许可证服务器帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="troubleshooting_usage.xml" data-toc="troubleshooting_usage">使用问题</h1>    <p id="c0b931e0">本主题逐步解决了常见的使用问题。</p>    <div class="chapter"><h2 id="length-incorrect" data-toc="troubleshooting_usage#length-incorrect">签名长度不正确</h2>        <div class="chapter"><h3 id="issue">问题</h3>            <p id="3a7155c6">尝试从服务器获取许可证会导致以下错误：</p><div class="code-block" data-lang="bash">许可证服务器响应尚未通过数据完整性检查：java.security。SignatureException：签名长度不正确：收到0，但预计为64</div>发生这种情况是因为未注册许可证服务器安装。<p></p>            <figure><img alt="数据完整性检查问题" title="数据完整性检查问题" src="/help/img/license_server/data_integrity_check_issue_0_64.png" id="1a8651e6" width="550" height="1854"></figure>        </div>        <div class="chapter"><h3 id="solution">解</h3>            <p id="f19a922f">按照<a href="register_server.html">注册说明</a>完成FLS的注册。</p>        </div>    </div>    <div class="chapter"><h2 id="validation-failed" data-toc="troubleshooting_usage#validation-failed">验证失败</h2>        <div class="chapter"><h3 id="issue">问题</h3>            <p id="31922e35">因收到发送给FLS的许可证请求而意外格式化的数据导致的错误。尝试从服务器获取许可证会导致错误</p><div class="code-block" data-lang="bash">许可证服务器响应未通过数据完整性检查：验证失败</div>因为有一个代理可以在产品和本地FLS之间更改证书数据。<p></p>            <figure><img alt="数据完整性检查问题" title="数据完整性检查问题" src="/help/img/license_server/data_integrity_check_issue_0_64.png" id="596cbf56" width="550" height="1854"></figure>        </div>        <div class="chapter"><h3 id="solution">解</h3>            <p id="29bc0853">检查与许可证服务器的连接：</p>            <ul class="list _ul"><li class="list__item" id="64e61254"><p>尝试跑步<code class="code">ping <server host></code> 。</p></li><li class="list__item" id="f35cb260"><p>如果ping操作成功，请尝试通过使用产品中使用的FLS地址从安装有JetBrains产品的计算机上安装的Web浏览器访问FLS页面，但未能获得许可证。</p></li><li class="list__item" id="e1966c90"><p>如果成功打开FLS页面，则设置Web浏览器用于产品的网络配置。</p></li><li class="list__item" id="edfd2c5d"><p>如果配置相同，但连接仍然失败，则让产品通过透明代理与FLS联系，该透明代理使产品能够从服务器接收响应并且不更改传递的数据。</p></li></ul>        </div>    </div>    <div class="chapter"><h2 id="invalid-format" data-toc="troubleshooting_usage#invalid-format">无效的签名格式</h2>        <div class="chapter"><h3 id="issue">问题</h3>            <p id="2cec7750">尝试从服务器获取许可证会导致错误<code class="code">License Server response has not passed data integrity check: Invalid signature format</code> 。该问题是由于用于获取故障单的FLS版本过旧引起的。</p>        </div>        <div class="chapter"><h3 id="reason">原因</h3>            <p id="6490e602">从JetBrains IDE的2018.2.1版本（于2018年第三季度发布）开始，产品不再从旧版本的FLS（版本<span class="emphasis">＃16429</span>之前的版本（于2018年3月19日发布）中获取许可证）。要查找正在使用的FLS的版本号，请在FLS日志中或在Web界面中查找。</p>        </div>        <div class="chapter"><h3 id="solution">解</h3>            <p id="d35157d2">按照<a href="upgrade_from_previous.html">升级步骤</a>将FLS更新到最新版本。</p>        </div>    </div>    <div class="chapter"><h2 id="cannot-obtain-ticket" data-toc="troubleshooting_usage#cannot-obtain-ticket">无法获取票</h2>        <div class="chapter"><h3 id="issue">问题</h3>            <p id="13b7d8bc">尝试从FLS获得许可证<code class="code">Cannot obtain ticket</code>错误信息。</p>            <figure><img alt="无法获取票" title="无法获取票" src="/help/img/license_server/cannot_obtain_ticket.png" id="fba3bbbd" width="550" height="1088"></figure>        </div>        <div class="chapter"><h3 id="solution">解</h3>            <p id="e77293cb">问题是由于缺少作为FLS地址输入的路径的FLS页面引起的。在Web浏览器中打开FLS地址，然后检查是否有可用的许可证服务器页面。如果FLS页面不可用，请使用实际的FLS地址或<a href="configuring_url.html">将FLS地址重新配置</a>为您要使用的地址。如果成功打开FLS页面，则设置Web配置，供Web浏览器使用。</p>        </div>    </div>    <div class="chapter"><h2 id="certificate-exception" data-toc="troubleshooting_usage#certificate-exception">证书例外</h2>        <div class="chapter"><h3 id="issue">问题</h3>            <p id="0f9f4cbf">当FLS尝试联系JetBrains时，引发该错误。</p><div class="code-block" data-lang="bash">JetProfile连接错误：java.security.cert。CertificateException：java.security。SignatureException：签名长度不正确：得到了256，但预期为512</div>            <p></p>        </div>        <div class="chapter"><h3 id="solution">解</h3>            <p id="83fd40a8">该问题有多种可能的原因以及建议的解决方案：</p>            <ul class="list _ul"><li class="list__item" id="472422f2"><p>您和<a href="https://account.jetbrains.com" rel="noopener noreferrer" data-external="true" target="_blank">JetBrains帐户</a>之间的代理服务器，该服务器拦截SSL流量并用自己的证书替换我们的证书，这是不同的，IDE不会接受。代理服务器可能对您完全透明，并且可以在系统中没有任何显式代理配置的情况下运行。请与您的组织的IT帮助台或ISP支持联系，以解决该问题。</p></li><li class="list__item" id="181f3ee6"><p id="d166cf9e">如果您使用的是Linux，则没有Thawte CA的情况下，您的JDK密钥库可能不完整，因此，JDK无法从我们的服务器验证SSL证书。有关详细信息，请参<a href="https://youtrack.jetbrains.com/issue/IDEA-139551" rel="noopener noreferrer" data-external="true" target="_blank">见此问题</a> 。您可以运行以下命令来安装Oracle JDK 1.8并将许可证服务器配置为使用此新JDK安装而不是系统JDK：</p>                    <div class="code-block" data-lang="bash" data-section="Linux/macOS">
                        <fls_home>/bin/license-server.sh Java设置<path to="" jre="" home="" directory="">
    </path></fls_home></div>                    <div class="code-block" data-lang="bash" data-section="Windows">
                        <fls_home>\ bin \ license-server.bat Java设置<path to="" jre="" home="" directory="">
    </path></fls_home></div>                    <p id="8d5a97e1">确保从<a href="http://www.oracle.com/technetwork/java/javase/downloads/index" rel="noopener noreferrer" data-external="true" target="_blank">Oracle网站</a>手动安装JDK。程序包管理器安装的JDK将使用相同的cacerts文件，该文件可能不完整，甚至是空的/损坏的。</p>                </li><li class="list__item" id="6860d387"><p>IBM JDK在连接到帐户服务器，使用Oracle JDK或OpenJDK时将出现问题。</p></li></ul>        </div>    </div>    <div class="chapter"><h2 id="host-not-allowed" data-toc="troubleshooting_usage#host-not-allowed">不允许通过的主机</h2>        <div class="chapter"><h3 id="issue">问题</h3>            <p id="c7712387">尝试访问FLS页面失败，并显示错误消息“不允许通过主机头”。</p>        </div>        <div class="chapter"><h3 id="solution">解</h3>            <p id="349fd625">如果FLS在反向代理后面运行，或者为FLS软件配置的主机与运行该软件的计算机主机不匹配，请为FLS软件配置虚拟主机属性。请参阅<a href="configuring_reverse_proxy.html">反向代理</a>            </p>        </div>    </div>    <p id="87794bfe">如果您在本文档中找不到问题的答案，并且需要帮助，请随时与<a href="/license-server/contact-support/" rel="noopener noreferrer" data-external="true" target="_blank">JetBrains支持团队联系</a> 。</p><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月22日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="troubleshooting_registration.html">注册</a> <a class="navigation-links__next" href="troubleshooting_user_restrictions.html">用户限制</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>