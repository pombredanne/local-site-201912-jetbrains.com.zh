<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Configuring Authentication Settings - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Configuring Authentication Settings" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/teamcity-configuration-and-maintenance.md|TeamCity Configuration and Maintenance/configuring-authentication-settings.md|Configuring Authentication Settings/ldap-integration.md|LDAP Integration/typical-ldap-configurations.md|Typical LDAP Configurations/ldap-troubleshooting.md|LDAP Troubleshooting/ntlm-http-authentication.md|NTLM HTTP Authentication/enabling-guest-login.md|Enabling Guest Login/enabling-email-verification.md|Enabling Email Verification/security-actions.md|Security Actions" data-main-title="Configuring Authentication Settings" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/configuring-authentication-settings.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Configuring Authentication Settings" id="configuring-authentication-settings.md">Configuring Authentication Settings</h1><p id="10117f4f">TeamCity can authenticate users via an internal database, or can integrate into your system and use external authentication sources such as Windows Domain or LDAP.</p><p id="d26438c7"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#ConfiguringAuthenticationSettings-ConfiguringAuthentication">Configuring Authentication</a><ul class="list _bullet"><li class="list__item"><a href="#ConfiguringAuthenticationSettings-SimpleMode">Simple Mode</a></li><li class="list__item"><a href="#ConfiguringAuthenticationSettings-AdvancedMode">Advanced Mode</a></li></ul></li><li class="list__item"><a href="#ConfiguringAuthenticationSettings-UserAuthenticationSettings">User Authentication Settings</a><ul class="list _bullet"><li class="list__item"><a href="#ConfiguringAuthenticationSettings-SpecialUserAccounts">Special User Accounts</a></li></ul></li><li class="list__item"><a href="#ConfiguringAuthenticationSettings-CredentialsAuthenticationModules">Credentials Authentication Modules</a><ul class="list _bullet"><li class="list__item"><a href="#ConfiguringAuthenticationSettings-Built-inAuthentication">Built-in Authentication</a></li><li class="list__item"><a href="#ConfiguringAuthenticationSettings-Token-BasedAuthentication">Token-Based Authentication</a></li><li class="list__item"><a href="#ConfiguringAuthenticationSettings-WindowsDomainAuthentication">Windows Domain Authentication</a><ul class="list _bullet"><li class="list__item"><a href="#ConfiguringAuthenticationSettings-SpecifyingDefaultDomain">Specifying Default Domain</a></li><li class="list__item"><a href="#ConfiguringAuthenticationSettings-RegisteringNewUsersonLogin">Registering New Users on Login</a></li><li class="list__item"><a href="#ConfiguringAuthenticationSettings-Linux-SpecificConfiguration">Linux-Specific Configuration</a></li></ul></li><li class="list__item"><a href="#ConfiguringAuthenticationSettings-LDAPAuthentication">LDAP Authentication</a></li></ul></li><li class="list__item"><a href="#ConfiguringAuthenticationSettings-HTTPAuthenticationModules">HTTP Authentication Modules</a><ul class="list _bullet"><li class="list__item"><a href="#ConfiguringAuthenticationSettings-BasicHTTPAuthentication">Basic HTTP Authentication</a></li><li class="list__item"><a href="#ConfiguringAuthenticationSettings-NTLMHTTPAuthentication">NTLM HTTP Authentication</a></li></ul></li></ul></p><a name="ConfiguringAuthentication"></a><a name="Configuring-Authentication"></a><div class="chapter"><h2 id="ConfiguringAuthenticationSettings-ConfiguringAuthentication">Configuring Authentication</h2><p id="8d2c908a">Authentication is configured on the <b id="3c1ccc6b">Administration | Authentication</b> page; the currently used authentication modules are also displayed here.</p><p id="0f465f75">TeamCity provides several preconfigured authentication options (presets) to cover the most common use-case described <a href="#Simple-Mode">below</a>. The presets are combinations of authentication modules supported by TeamCity: three credentials authentication modules and two HTTP authentication modules:</p><ul class="list _ul"><li class="list__item" id="838b4564"><a href="#Credentials-Authentication-Modules">Credentials Authentication Modules</a><ul class="list _ul"><li class="list__item" id="cb2f085f"><a href="#Built-in-Authentication">Built-in</a></li><li class="list__item" id="66316937"><a href="#Windows-Domain-Authentication">Windows Domain Authentication</a></li><li class="list__item" id="18659c39"><p><a href="ldap-integration.html">LDAP Integration</a> (separate page)</p></li><li class="list__item" id="be11db90"><a href="#Token-Based-Authentication">Token-Based Authentication</a></li></ul></li><li class="list__item" id="373ce638"><a href="#HTTP-Authentication-Modules">HTTP Authentication Modules</a><ul class="list _ul"><li class="list__item" id="041d2139"><a href="#Basic-HTTP-Authentication">Basic HTTP Authentication</a></li><li class="list__item" id="1ba72ca9"><p><a href="ntlm-http-authentication.html">NTLM HTTP Authentication</a> (separate page)</p></li></ul></li></ul><aside class="tip sideblock" data-title="" rel="5f045462" id="e9251462"><p id="73d89a7c">If you are using <a href="https://www.jetbrains.com/hub/" data-external="true" target="_blank" rel="noopener noreferrer">JetBrains Hub</a>, you can configure single sign-on (SSO) via JetBrains Hub from TeamCity login form and IDE using a <a href="https://plugins.jetbrains.com/plugin/9156-jetbrains-hub-integration" data-external="true" target="_blank" rel="noopener noreferrer">separate plugin for TeamCity</a>.</p></aside><p id="42530bd0">When you first log in to TeamCity, the default authentication including the Built-in and Basic HTTP Authentication modules is enabled and editing authentication settings in the <a href="#Simple-Mode">simple mode</a> is active.</p><ul class="list _ul"><li class="list__item" id="bcd925cc"><p>To modify the existing settings, click the <b id="47939a41">Edit</b> link in the table next to the description of the enabled authentication module.</p></li><li class="list__item" id="4c4d85dd"><p>To switch to a different preconfigured scheme, use the <b id="a5ebf7f1">Load preset</b> button. For more options, switch to the <a href="#Advanced-Mode">Advanced mode</a>.</p></li></ul><aside class="tip sideblock" data-title="" rel="de91b3c3" id="bb9cbf45"><p id="c924d5a0">Any changes made to authentication in the UI will be reflected in the <code class="code">&lt;</code><a href="teamcity-data-directory.html"><code class="code">TeamCity Data Directory</code></a><code class="code">&gt;/config/auth-config.xml</code> file, which can be used to configure authentication if editing via the Web UI is not suitable for some reason. The detailed description is available in the <a href="https://confluence.jetbrains.com/display/TCD8/Configuring+Authentication+Settings" data-external="true" target="_blank" rel="noopener noreferrer">earlier documentation version</a>.</p></aside><a name="SimpleMode"></a><a name="Simple-Mode"></a><div class="chapter"><h3 id="ConfiguringAuthenticationSettings-SimpleMode">Simple Mode</h3><p id="f2c7c741">Simple mode (default) allows you to select presets created for the most common use cases. To override the existing authentication settings, use the <b id="68bedbc4">Load preset...</b> button, select one of the options and <b id="2678218f">Save</b> your changes. The following presets are available:</p><ul class="list _ul"><li class="list__item" id="39df042b"><p>Default (<a href="#Built-in-Authentication">built-in authentication</a> - <a href="#Token-Based-Authentication">Token-Based Authentication</a> and <a href="accessing-server-by-http.html">Basic HTTP</a>)</p></li><li class="list__item" id="40145131"><a href="ldap-integration.html">LDAP</a></li><li class="list__item" id="bf2e779e"><p>Active directory (<a href="ldap-integration.html">LDAP</a> with <a href="ntlm-http-authentication.html">NTLM</a> and <a href="rest-api.html">Token-Based Authentication</a>)</p></li><li class="list__item" id="dc85cc02"><p>Microsoft Windows Domain (<a href="ntlm-http-authentication.html">NTLM</a>, <a href="rest-api.html">Token-Based Authentication</a> and <a href="rest-api.html">Basic HTTP</a>)</p></li></ul></div><a name="AdvancedMode"></a><a name="Advanced-Mode"></a><div class="chapter"><h3 id="ConfiguringAuthenticationSettings-AdvancedMode">Advanced Mode</h3><p id="f228f058">TeamCity allows enabling several authentication modules simultaneously using the advanced mode in the TeamCity web UI.</p><p id="9725613b">When a user attempts to log in, all the modules will be tried one by one. If one of them authenticates the user, the login will be successful; if all of them fail, the user will not be able to log into TeamCity.</p><aside class="note " data-title="" rel="9725613b" id="66f05bd0"><p id="077bfcb0">Since TeamCity 10.0.2, if the System Administrator creates users without password with several authentication modes enabled on the server including the <a href="#Built-in-Authentication">Built-in</a> one, and later changes authorization from mixed one to the build-in one, users with no password will be unable to log in to TeamCity.</p></aside><p id="d8b5f792">It is possible to use a combination of internal and external authentication. The recommended approach is to configure <a href="ldap-integration.html">LDAP Integration</a> for your internal employees first and then to add <a href="#Built-in-Authentication">Built-in</a> authentication for external users.</p><ol class="list _decimal"><li class="list__item" id="0621c429"><p>Switch to advanced mode with the corresponding link on the <b id="f4e4b947">Administration | Authentication</b> page.</p></li><li class="list__item" id="fe27a7f5"><p>Click <b id="7ee05a7c">Add Module</b> and select a module from the drop-down.</p></li><li class="list__item" id="75035e0f"><p>Use the properties available for modules by selecting/deselecting checkboxes in the <b id="e8b9c0b7">Add Module</b> dialog.</p></li><li class="list__item" id="d98cf2cd"><p>Click <b id="1856d660">Apply</b> and <b id="176367f2">Save</b> your changes.</p></li></ol><p id="8dc590c4">Also, TeamCity plugins can provide <a href="https://plugins.jetbrains.com/docs/teamcity/custom-authentication-module.html" data-external="true" target="_blank" rel="noopener noreferrer">additional authentication modules</a>.</p></div></div><a name="UserAuthenticationSettings"></a><a name="User-Authentication-Settings"></a><div class="chapter"><h2 id="ConfiguringAuthenticationSettings-UserAuthenticationSettings">User Authentication Settings</h2><p id="f5816552">The very first time TeamCity server starts with no users (and no administrator) so you will be prompted for the administrator account. If you are not prompted for the administrator account, refer to <a href="how-to.html#Retrieve-Administrator-Password">How To Retrieve Administrator Password</a> for a resolution.</p><p id="70fc6879">The TeamCity administrator can modify the authentication settings for every user on their profile page.</p><p id="8d125e84">The TeamCity list of users and authentication modules just map external credentials to the users. This means that a single TeamCity user can authenticate using different modules, provided the entered credentials are mapped to the same TeamCity user. Authentication modules have a configuration on how to map external user data to a TeamCity user, and some (Windows Domain, JetBrains Hub) allow editing the external user linking data on the TeamCity user profile.</p><p id="d1a3039a">Handling of the user mapping by the bundled authentication modules:</p><ul class="list _ul"><li class="list__item" id="4860747f"><p>Built-in authentication stores a TeamCity-maintained password for each user</p></li><li class="list__item" id="4cc186f8"><p>Windows Domain authentication allows specifying the default domain and assumes the Domain account name is equal to the TeamCity user. The domain account can be edited on the user profile page</p></li><li class="list__item" id="148f6892"><p>LDAP Integration allows setting LDAP property to get TeamCity username from user's LDAP entry</p></li></ul><p id="a2636e14">Care should be taken when modifying authentication settings: there can be a case when the administrator cannot login after changing authentication modules:</p><p id="f0e89dc7">Let's imagine that the administrator had the "jsmith" TeamCity username and used the default authentication. Then the authentication module was changed to Windows domain authentication (i.e. Windows domain authentication module was added and the default one was removed). If, for example, the Windows domain username of that administrator is "john.smith", he/she is not able to login anymore: he/she cannot login using the default authentication since it is disabled, and cannot login using Windows domain authentication since his/her Windows domain username is not equal to TeamCity username. The solution nevertheless is quite simple: the administrator can login using the super user account and change his/her TeamCity username or specify his/her Windows domain username on his/her own profile page.</p><a name="SpecialUserAccounts"></a><a name="Special-User-Accounts"></a><div class="chapter"><h3 id="ConfiguringAuthenticationSettings-SpecialUserAccounts">Special User Accounts</h3><p id="a8fdc62d">By default, TeamCity has a <a href="super-user.html">Super User</a> account with maximum permissions and a <a href="guest-user.html">Guest User</a> with minimal permissions. These accounts have no personal settings such as the <a href="viewing-your-changes.html">Changes</a> page and Profile information as they are not related to any particular person but rather intended for special use cases.</p></div></div><a name="CredentialsAuthenticationModules"></a><a name="Credentials-Authentication-Modules"></a><div class="chapter"><h2 id="ConfiguringAuthenticationSettings-CredentialsAuthenticationModules">Credentials Authentication Modules</h2><a name="Built-inAuthentication"></a><a name="Built-in-Authentication"></a><div class="chapter"><h3 id="ConfiguringAuthenticationSettings-Built-inAuthentication">Built-in Authentication</h3><p id="37b14ad5">By default, TeamCity uses the built-in authentication, meaning that users and their passwords are maintained by TeamCity.</p><p id="ac3ced79">When logging to TeamCity for the first time, the user will be prompted to create the TeamCity username and password which will be stored in TeamCity and used for authentication. If you installed TeamCity and logged into it, it means that built-in authentication is enabled and all user data is stored in TeamCity.</p><p id="047f33e4">In the beginning the user database is empty and new users are either <a href="managing-users-and-user-groups.html#Creating-New-User">added by the TeamCity administrator</a> or users are self-registered: the default settings allow the users to register from the login page. All newly created users belong to the <a href="user-group.html#&#34;All-Users&#34;-Group">All Users</a> group and have all roles assigned to this group. If some specific <a href="role-and-permission.html">roles</a> are needed for the newly registered users, these roles should <a href="managing-roles.html">be granted</a> via the <b id="8ee1cf8b">All Users</b> group.</p><p id="22f2fba2">By default, the users are allowed to change their password on their profile page.</p></div><a name="Token-BasedAuthentication"></a><a name="Token-Based-Authentication"></a><div class="chapter"><h3 id="ConfiguringAuthenticationSettings-Token-BasedAuthentication">Token-Based Authentication</h3><p id="6a2c8351">Allows users to authenticate via <a href="managing-your-user-account.html#Managing-Access-Tokens">access tokens</a> that they can create and invalidate themselves.</p><p id="7bb3b4b6">This authentication module is enabled by default.</p></div><a name="WindowsDomainAuthentication"></a><a name="Windows-Domain-Authentication"></a><div class="chapter"><h3 id="ConfiguringAuthenticationSettings-WindowsDomainAuthentication">Windows Domain Authentication</h3><p id="5ec1d5a0">Allows user login using Windows domain name and password.The credential check is performed on the TeamCity server side, so the server should be aware of the domain(s) users use to log in.The supported syntax for the username is <code class="code">DOMAIN\user.name</code> as well as <code class="code">&lt;username&gt;@&lt;domain&gt;</code>.</p><p id="2bcb4ee3">In addition to logging in using the login form, you can enable <a href="ntlm-http-authentication.html">NTLM HTTP Authentication</a> single sign-on.<br>If you select the "Microsoft Windows Domain" preset, in addition to the login via a Windows domain, the <a href="#Basic-HTTP-Authentication">Basic HTTP</a> and <a href="ntlm-http-authentication.html">NTLM</a> authentication modules are enabled by default.</p><a name="SpecifyingDefaultDomain"></a><a name="Specifying-Default-Domain"></a><div class="chapter"><h4 id="ConfiguringAuthenticationSettings-SpecifyingDefaultDomain">Specifying Default Domain</h4><p id="58bfe135">To enable users to enter the system using the login form without specifying the domain as a part of the user name, do the following:</p><ol class="list _decimal"><li class="list__item" id="b3e3f29d"><p>Go to the <b id="95e9f48d">Administration | Authentication</b> page.</p></li><li class="list__item" id="6aa5b7f2"><p>Click the <b id="0e318ab7">edit</b> link in the table next to the <b id="51889791">Microsoft Windows domain</b> authentication description.</p></li><li class="list__item" id="9d977a35"><p>Set the name in the <b id="6b21bbda">Default domain:</b> field.</p></li><li class="list__item" id="99836233"><p>Click <b id="07ffbd61">Done</b> and <b id="66666202">Save</b> your changes.</p></li></ol></div><a name="RegisteringNewUsersonLogin"></a><a name="Registering-New-Users-on-Login"></a><div class="chapter"><h4 id="ConfiguringAuthenticationSettings-RegisteringNewUsersonLogin">Registering New Users on Login</h4><p id="12d8c5c5">The default settings allow users to register from the login page and TeamCity user names for the new users will be the same as their Windows domain account.<br>All newly created users belong to the <a href="user-group.html#&#34;All-Users&#34;-Group">All Users</a> group and have all roles assigned to this group. If some specific <a href="role-and-permission.html">roles</a> are needed for the newly registered users, these roles should <a href="managing-roles.html">be granted</a> via the <b id="af9dd3f8">All Users</b> group.</p><p id="e649663b">To disable new user registration on login:</p><ol class="list _decimal"><li class="list__item" id="94dba289"><p>Go to the <b id="174019a2">Administration | Authentication</b> page.</p></li><li class="list__item" id="1dc473a4"><p>Click the <b id="b000443c">edit</b> link in the table next to the <b id="11bdc814">Microsoft Windows domain</b> authentication description. Uncheck the <b id="de0361a6">Allow user registration from the login page</b> box.</p></li><li class="list__item" id="3e702a94"><p>Click the <b id="024a7137">edit</b> link in the table next to the <b id="5ff6f2a5">NTLM HTTP</b> authentication description. Uncheck the <b id="45841e02">Allow user registration from the login page</b> box.</p></li></ol></div><a name="Linux-SpecificConfiguration"></a><a name="Linux-Specific-Configuration"></a><div class="chapter"><h4 id="ConfiguringAuthenticationSettings-Linux-SpecificConfiguration">Linux-Specific Configuration</h4><p id="231f1cc2">If your TeamCity server runs under Linux, JCIFS library is used for the Windows domain login. This only supports Windows domain servers with SMB (SMBv1) enabled. SMB2 is not supported.The library is configured using the properties specified in the <code class="code">&lt;</code><a href="teamcity-data-directory.html"><code class="code">TeamCity Data Directory</code></a><code class="code">&gt;/config/ntlm-config.properties</code> file. Changes to the file take effect immediately without the server restart.</p><p id="94ff51cf">JCIFS library settings which cannot be changed in run-time or settings to affect HTTP NTLM settings can only be set via a properties file passed via <code class="code">-Djcifs.properties</code> JVM option.</p><p id="19c6ab12">If the default settings do not work for your environment, refer to <a href="http://jcifs.samba.org/src/docs/api/" data-external="true" target="_blank" rel="noopener noreferrer">http://jcifs.samba.org/src/docs/api/</a> for all available configuration properties.<br>If the library does not find the domain controller to authenticate against, consider adding the <code class="code">jcifs.netbios.wins</code> property to the <code class="code">ntlm-config.properties</code> file with the address of your WINS server. For other domain services locating properties, see <a href="http://jcifs.samba.org/src/docs/resolver.html" data-external="true" target="_blank" rel="noopener noreferrer">http://jcifs.samba.org/src/docs/resolver.html</a>.</p></div></div><a name="LDAPAuthentication"></a><a name="LDAP-Authentication"></a><div class="chapter"><h3 id="ConfiguringAuthenticationSettings-LDAPAuthentication">LDAP Authentication</h3><p id="dc3a95b4">Please refer to the <a href="ldap-integration.html">dedicated page</a>.</p></div></div><a name="HTTPAuthenticationModules"></a><a name="HTTP-Authentication-Modules"></a><div class="chapter"><h2 id="ConfiguringAuthenticationSettings-HTTPAuthenticationModules">HTTP Authentication Modules</h2><a name="BasicHTTPAuthentication"></a><a name="Basic-HTTP-Authentication"></a><div class="chapter"><h3 id="ConfiguringAuthenticationSettings-BasicHTTPAuthentication">Basic HTTP Authentication</h3><p id="30a79aaf">Please refer to <a href="accessing-server-by-http.html">Accessing Server by HTTP</a> for details about basic HTTP authentication.</p><aside class="tip sideblock" data-title="" rel="30a79aaf" id="9028c5bc"><p id="517a326e">For information on configuring Basic HTTP Authentication directly in the <code class="code">&lt;</code><a href="teamcity-data-directory.html"><code class="code">TeamCity Data Directory</code></a><code class="code">&gt;/config/auth-config.xml</code>, refer to the <a href="https://confluence.jetbrains.com/display/TCD8/Configuring+Authentication+Settings" data-external="true" target="_blank" rel="noopener noreferrer">earlier documentation version</a>.</p></aside></div><a name="NTLMHTTPAuthentication"></a><a name="NTLM-HTTP-Authentication"></a><div class="chapter"><h3 id="ConfiguringAuthenticationSettings-NTLMHTTPAuthentication">NTLM HTTP Authentication</h3><p id="3445881a">Please refer to the <a href="ntlm-http-authentication.html">dedicated page</a>.</p><hr id="528582c3"><p id="f8c35687"><b id="b1add398">See also:</b></p><p id="66fcd9e4"><b id="c7b4a4d9">Concepts</b>: <a href="authentication-modules.html">Authentication Modules</a></p><hr id="2f89d785"></div></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>