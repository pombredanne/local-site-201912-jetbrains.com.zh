<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>从TeamCity Web UI创建备份-帮助|帮助团队城市</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Creating Backup from TeamCity Web UI" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/teamcity-configuration-and-maintenance.md|TeamCity Configuration and Maintenance/teamcity-data-backup.md|TeamCity Data Backup/creating-backup-from-teamcity-web-ui.md|Creating Backup from TeamCity Web UI" data-main-title="Creating Backup from TeamCity Web UI" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/creating-backup-from-teamcity-web-ui.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="creating-backup-from-teamcity-web-ui.md" data-toc="Creating Backup from TeamCity Web UI">从TeamCity Web UI创建备份</h1><p id="566f540d">TeamCity允许通过Web UI创建TeamCity数据的备份。要创建备份文件，请导航至“ <b id="07c21838">管理” |“</b>创建” <b id="07c21838">。备份</b>页面，如下所述指定备份参数，然后开始备份过程。</p><div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="84cfbdab"><thead><tr id="cc456427" class="ijRowHead"><th id="c58dceba"><p id="bf646f19">选项</p></th><th id="932b8b41"><p id="8009b1bb">描述</p></th></tr></thead><tbody><tr id="40ef4512" class="ijRowOdd"><td id="657c73fd"><p id="171f39da">备份文件</p></td><td id="3a3e9f0b"><p id="0a46dec8">指定备份文件的名称，扩展名（.zip）将自动添加。默认情况下，TeamCity将备份文件存储在< <a href="teamcity-data-directory.html">TeamCity数据目录</a> > / backup文件夹中。出于安全原因，您不能在UI中显式更改此路径。要修改此设置，请在< <a href="teamcity-data-directory.html">TeamCity数据目录</a> > /config/backup-config.xml文件中指定绝对或相对路径（该路径应相对于<a href="teamcity-data-directory.html">TeamCity数据目录</a> ）。例如：</p><div class="code-block" data-lang="bash"><backup-settings>...
  <general><backup-dir path="C:/TC-Backups"></backup-dir></general> ...
</backup-settings>

</div></td></tr><tr id="6c127989" class="ijRowEven"><td id="d77c771c"><p id="29502bee">添加时间戳后缀</p></td><td id="384aaca7"><p id="39d1eb46">选中此选项可将时间戳后缀自动添加到指定的文件名。如果您不清理旧的备份，这可能有助于区分您的备份文件。</p><aside class="note " rel="39d1eb46" id="22414e6e" data-title=""><ul class="list _ul"><li class="list__item" id="804736fa"><p>如果存储备份文件的目录中已经包含具有上面指定名称的文件，TeamCity将不会运行备份-您将需要指定其他名称或启用<i id="68648f11">时间戳后缀</i>选项，从而可以避免这种情况。</p></li><li class="list__item" id="9af8a748"><p>时间戳后缀具有特定的格式：按字母顺序对备份文件进行排序也将按时间顺序对它们进行排序。</p></li></ul></aside></td></tr><tr id="1845dd1a" class="ijRowOdd"><td id="8e0e7d0f"><p id="6b440842">备份范围</p></td><td id="7a8b6132"><p id="62e7918d">指定要备份的数据类型。选择范围时，将在UI中直接说明根据范围的备份文件的内容。请注意，备份文件的大小和备份过程将花费的时间取决于您选择的范围。</p><p id="abb87952">为了减少生成的文件大小和备份时间，请选择“基本”范围，其中包括服务器设置，项目和构建配置，插件和数据库。但是，您将只能还原已备份的设置。</p><p id="b02ba3ad">对于适合大多数需求的完整备份，建议使用“自定义”范围并选择除“构建日志”以外的所有项目，然后将< <a href="teamcity-data-directory.html">TeamCity Data Directory</a> > / system / artifacts位置作为常规文件系统进行备份。</p><p id="490390c9">由于构建工件的大小，它们不包含在备份中。建议要么分别备份<a href="teamcity-configuration-and-maintenance.html">工件目录</a> ，要么为<a href="teamcity-configuration-and-maintenance.html">工件</a>使用冗余存储。构建日志存储为构建工件的一部分，因此，如果对工件位置实施单独的备份，则无需备份构建日志。</p></td></tr></tbody></table></div><p id="ef64375d">开始备份时，TeamCity将显示其状态以及当前过程的详细信息，包括进度和估计。</p><aside class="note " rel="ef64375d" id="dd3932e5" data-title=""><p id="3ed09391"><b id="19f7adb6">重要的提示</b></p><ul class="list _ul"><li class="list__item" id="1306808e"><p>在服务器运行期间创建的备份中不包括正在运行和已排队的内部版本。要包括这些内部版本，请在服务器未运行时考虑使用其他<a href="creating-backup-via-maintaindb-command-line-tool.html">备份</a>方法。</p></li><li class="list__item" id="112417e1"><p>备份过程花费的时间取决于系统中有多少个内部版本。在此过程中，系统状态可能会更改，例如，某些构建可能会完成，构建队列中正在等待的其他构建可能会开始，新构建可能会出现在构建队列中。请注意，这些更改不会影响备份。在备份过程开始时，TeamCity将仅备份实际的数据。</p></li><li class="list__item" id="548c0a59"><p>生成的备份文件是<code class="code">*.zip</code>归档文件，其特定结构与您使用的操作系统或数据库类型无关。因此，即使在不同的操作系统或不同的数据库上，您也可以使用备份文件来还原数据。如果您手动更改此文件的内容，TeamCity将无法还原您的数据。</p></li></ul></aside><a name="BackupHistory"></a><a name="Backup-History"></a><h3 id="CreatingBackupfromTeamCityWebUI-BackupHistory">备份记录</h3><p id="b8850408">管理的“ <b id="a15c798f">历史记录”</b>选项卡<b id="1acba0f6">|备份</b>页面允许查看已创建的备份文件列表，其大小和创建文件的日期。</p><p id="94a0963d">请注意，此处仅显示从Web UI创建的备份文件。使用该<a href="creating-backup-via-maintaindb-command-line-tool.html">实用程序</a>创建的备份不会显示在“ <b id="431407ed">历史记录”</b>选项卡上。</p><hr id="73dc4345"><p id="6953e6c7"><b id="c5160ed2">也可以看看：</b></p><p id="d0127b18"><b id="3e7cb32b">安装和升级</b> ： <a href="upgrade.html">升级</a><br><b id="d3188ed5">概念</b> ： <a href="teamcity-data-directory.html">TeamCity数据目录</a><br><b id="53d33c13">管理员指南</b> ： <a href="teamcity-data-backup.html">TeamCity数据备份</a></p><hr id="514029db"></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>