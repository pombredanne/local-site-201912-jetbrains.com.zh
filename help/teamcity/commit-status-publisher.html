<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>提交状态发布者-帮助|团队城市</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Commit Status Publisher" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/adding-build-features.md|Adding Build Features/commit-status-publisher.md|Commit Status Publisher" data-main-title="Commit Status Publisher" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/commit-status-publisher.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="commit-status-publisher.md" data-toc="Commit Status Publisher">提交状态发布者</h1><p id="b77e27f2">提交状态发布者是一项<a href="adding-build-features.html">构建功能</a> ，它使TeamCity可以自动将提交的构建状态发送到外部系统。该功能作为与TeamCity捆绑在一起<a href="https://github.com/JetBrains/commit-status-publisher" rel="noopener noreferrer" data-external="true" target="_blank">的开源插件</a>实现。</p><p id="f06ca42c">支持的系统是：</p><ul class="list _ul"><li class="list__item" id="c5f57924"><p>JetBrains上游</p></li><li class="list__item" id="13aba370"><p>GitHub（也支持拉取请求的构建状态）</p></li><li class="list__item" id="338dad0f"><p>亚搏体育app</p></li><li class="list__item" id="a41d527a"><p>TFS / VSTS托管的Git（受支持的状态：待定，成功，失败，错误）</p></li><li class="list__item" id="8bac436f"><p>Atlassian Bitbucket服务器（以前称为Stash）和Atlassian Bitbucket云</p></li><li class="list__item" id="ef88f20f"><p>Gerrit代码审查工具2.6+</p></li></ul><a name="Provider-specificConfguration"></a><a name="Provider-specific-Confguration"></a><div class="chapter"><h2 id="CommitStatusPublisher-Provider-specificConfguration">提供商特定的配置</h2><a name="GitLab"></a><a name="GitLab"></a><div class="chapter"><h3 id="CommitStatusPublisher-GitLab">亚搏体育app</h3><p id="de9f2b46">如果您使用最新版本的GitLab（> = 9.0），建议使用以下格式的GitLab URL： <code class="code">http[s]://<hostname>[:<port>]/api/v4</code>随着GitLab <a href="https://about.gitlab.com/2018/01/22/gitlab-10-4-released/#api-v3" rel="noopener noreferrer" data-external="true" target="_blank">停止</a>在GitLab 11中<a href="https://about.gitlab.com/2018/01/22/gitlab-10-4-released/#api-v3" rel="noopener noreferrer" data-external="true" target="_blank">支持</a> v3 API。如果你有<code class="code">/api/v3</code>在您当前的TeamCity配置中，它们可能会停止与GitLab 11+一起使用，因此请考虑将服务器URL更改为<code class="code">api/v4</code> 。</p><p id="94272490">对于旧版本的GitLab，请使用以下格式的GitLab URL： <code class="code">http[s]://<hostname>[:<port>]/api/v3</code> 。</p></div><a name="Bitbucket"></a><a name="Bitbucket"></a><div class="chapter"><h3 id="CommitStatusPublisher-Bitbucket">比特桶</h3><p id="a7420387">确保<a href="configuring-server-url.html">TeamCity服务器URL</a>为FQDN，例如<a href="http://myteamcity.domain.com:8111" rel="noopener noreferrer" data-external="true" target="_blank">http://myteamcity.domain.com:8111</a> 。短名称（例如<a href="http://myteamcity:8111" rel="noopener noreferrer" data-external="true" target="_blank">http：// myteamcity：8111）</a>被Bitbucket API拒绝。<br>对于Bitbucket Cloud团队帐户，可以使用团队名称作为用户名，并使用API密钥作为密码。</p></div><a name="Gerrit"></a><a name="Gerrit"></a><div class="chapter"><h3 id="CommitStatusPublisher-Gerrit">格里特</h3><p id="63a80bd2">TeamCity 2018.1中的提交状态发布者支持Gerrit 2.6+版本。要配置与Gerrit早期版本的集成，请联系我们的<a href="https://confluence.jetbrains.com/display/TW/Feedback" rel="noopener noreferrer" data-external="true" target="_blank">支持</a> 。</p></div><a name="TFS/VSTS"></a><a name="TFS/VSTS"></a><div class="chapter"><h3 id="CommitStatusPublisher-TFS/VSTS">TFS / VSTS</h3><p id="42b2bb2d">在2019年，Visual Studio Team Services和Team Foundation Server已重命名为Azure DevOps Services和Azure DevOps Server。</p><p id="9c20b961">个人访问令牌可用于身份验证。如果配置了<a href="integrating-teamcity-with-vcs-hosting-services.html#Connecting-to-Azure-DevOps-Services">VSTS连接</a> ，则可以从项目连接中自动填充个人访问令牌。</p></div></div><a name="UsingCommitStatusPublisher"></a><a name="Using-Commit-Status-Publisher"></a><div class="chapter"><h2 id="CommitStatusPublisher-UsingCommitStatusPublisher">使用提交状态发布者</h2><ol class="list _decimal"><li class="list__item" id="433364ed"><p><a href="adding-build-features.html">将构建功能添加</a>到您的构建配置中。</p></li><li class="list__item" id="95fcd30c"><p>如果希望“提交状态发布者”尝试发布<b id="e3b109bb">所有附加的VCS根目录中的</b>提交状态，请使用默认的“ <b id="e3b109bb">所有附加的VCS根目录”</b>选项，或者选择单个存储库来发布构建状态。</p></li><li class="list__item" id="9bd4831e"><p>选择您的系统作为发布者，然后指定其连接详细信息和凭据。</p></li><li class="list__item" id="8ed8f592"><p>测试连接</p></li><li class="list__item" id="de94f3a0"><p>保存设置。</p></li></ol></div><a name="Example:ConfiguringPullRequestsStatusPublishingtoGitHub"></a><a name="Example:-Configuring-Pull-Requests-Status-Publishing-to-GitHub"></a><div class="chapter"><h2 id="CommitStatusPublisher-Example:ConfiguringPullRequestsStatusPublishingtoGitHub">示例：配置拉取请求状态发布到GitHub</h2><p id="9ad959c6">下面的示例演示如何配置包含TeamCity向GitHub的拉取请求中包含的更改的构建状态的发送。</p><ol class="list _decimal"><li class="list__item" id="426c5e5d"><p>使用<a href="pull-requests.html">拉取请求构建功能</a>来配置拉取请求分支。另外，您可以通过在VCS Root中配置<a href="working-with-feature-branches.html">分支规范</a> ，同时确保分支包含拉取请求分支来使分支可用（另请参阅相关<a href="http://blog.jetbrains.com/teamcity/2013/02/automatically-building-pull-requests-from-github-with-teamcity/" rel="noopener noreferrer" data-external="true" target="_blank">博客文章</a> ）。</p></li><li class="list__item" id="508dee8d"><a href="adding-build-features.html">添加</a>提交状态发布者构建功能：<ul class="list _ul"><li class="list__item" id="ec28f1c4"><p>使用默认的“ <b id="cd92f7b0">所有附加的VCS根目录”</b>选项发布所有附加的VCS根目录中的提交状态</p></li><li class="list__item" id="fc3edf0a"><p>选择GitHub作为发布者，并指定其连接详细信息和凭据并测试连接：</p></li></ul></li></ol><p id="5fe6fbfd"></p><figure><img alt="测试与GitHub的连接" title="测试与GitHub的连接" src="/help/img/teamcity/2019.1/CommitStatusPublisher.png" id="30d627ee" width="556" height="674"></figure><p></p><ol class="list _decimal" start="3"><li class="list__item" id="10add333"><p>保存设置。</p></li><li class="list__item" id="1bb569ae">提交对源代码的更改并在GitHub中创建拉取请求，然后使用TeamCity中的更改运行构建。提交状态发布者将通过您的拉取请求更改通知您构建状态：<ul class="list _ul"><li class="list__item" id="adde647f">它将显示您是否检查：<ul class="list _ul"><li class="list__item" id="bdb4ba77"><p>进行中<img alt="progress.png" title="progress.png" src="/help/img/teamcity/2019.1/progress.png" id="373e0637" width="14" height="11" class="inline-icon-14"></p></li><li class="list__item" id="fb361e73"><p>失败了<img alt="Failed.png" title="Failed.png" src="/help/img/teamcity/2019.1/Failed.png" id="247bd95f" width="15" height="12" class="inline-icon-15"></p></li><li class="list__item" id="7f16ad31"><p>成功的<img alt="Success.png" title="Success.png" src="/help/img/teamcity/2019.1/Successful.png" id="15438df6" width="17" height="14" class="inline-icon-17"></p></li></ul></li><li class="list__item" id="02121843"><p>将鼠标悬停在提交状态上将显示构建摘要</p></li><li class="list__item" id="1a7e0fda"><p>单击构建状态标志或“详细信息”链接将在TeamCity中打开<a href="working-with-build-results.html">构建结果</a>页面：</p></li></ul></li></ol><p id="cef936ab"></p><figure><img alt="拉取请求|会话" title="拉取请求|会话" src="/help/img/teamcity/2019.1/InfoonHover.png" id="be180e8f" width="550" height="776"></figure><p></p><p id="82a13dbb">此信息也可在拉取请求详细信息的“提交”选项卡上找到：</p><p id="e2c5d009"></p><figure><img alt="拉取请求|提交" title="拉取请求|提交" src="/help/img/teamcity/2019.1/CommitsTab.png" id="6aa12232" width="600" height="431"></figure><p></p><p id="1b556b8e">与上一页类似，单击构建状态图标可在TeamCity Web UI中打开<a href="working-with-build-results.html">构建结果</a>页面：</p><p id="f26b44d4"></p><figure><img alt="建立结果" title="建立结果" src="/help/img/teamcity/2019.1/BuildResults.PNG" id="ae7fe1f4" width="1054" height="531"></figure><p></p><hr id="f9c47ec1"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>