<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Team Foundation Server - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Team Foundation Server" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/configuring-vcs-settings.md|Configuring VCS Settings/configuring-vcs-roots.md|Configuring VCS Roots/team-foundation-server.md|Team Foundation Server" data-main-title="Team Foundation Server" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/team-foundation-server.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Team Foundation Server" id="team-foundation-server.md">Team Foundation Server</h1><aside class="note " data-title="" rel="team-foundation-server.md" id="3f2f3175"><p id="48f6af5c">In 2019, Team Foundation Server has been renamed to Azure DevOps Server. The content of this page is applicable to Azure DevOps Server.</p></aside><p id="b4a95399">This page contains descriptions of the fields and options available when setting up a <a href="vcs-root.html">VCS root</a> to connect to Microsoft Team Foundation Server Version Control.</p><p id="853d9176">Common VCS Root properties are described <a href="configuring-vcs-roots.html#Common-VCS-Root-Properties">here</a>.</p><p id="5afd765c">When connecting to an Azure DevOps Git repository, select <a href="git.html">Git</a> as Type of VCS.</p><aside class="tip sideblock" data-title="" rel="5afd765c" id="f8bd33bc"><p id="3bd5b750">TeamCity can also <a href="guess-settings-from-repository-url.html">automatically configure the project / VCS root</a> from a repository URL.If you have a TFVC root configured, TeamCity will suggest configuring the <a href="team-foundation-work-items.html">Team Foundation Work Items</a> as well.</p></aside><p id="e2cbf1ff">On this page:</p><p id="0ff75551"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#TeamFoundationServer-Cross-PlatformTFSIntegration">Cross-Platform TFS Integration</a></li><li class="list__item"><a href="#TeamFoundationServer-TFSSettings">TFS Settings</a></li><li class="list__item"><a href="#TeamFoundationServer-Agent-SideCheckout">Agent-Side Checkout</a></li><li class="list__item"><a href="#TeamFoundationServer-AuthenticationNotes">Authentication Notes</a><ul class="list _bullet"><li class="list__item"><a href="#TeamFoundationServer-PersonalAccessTokens">Personal Access Tokens</a><ul class="list _bullet"><li class="list__item"><a href="#TeamFoundationServer-RequiredAccessScope">Required Access Scope</a></li></ul></li><li class="list__item"><a href="#TeamFoundationServer-AlternateAuthenticationCredentials">Alternate Authentication Credentials</a></li><li class="list__item"><a href="#TeamFoundationServer-NTLM/KerberosonLinuxandmacOS">NTLM/Kerberos on Linux and macOS</a></li></ul></li><li class="list__item"><a href="#TeamFoundationServer-TeamFoundationProxyConfiguration">Team Foundation Proxy Configuration</a></li><li class="list__item"><a href="#TeamFoundationServer-HTTPProxyServerConfiguration">HTTP Proxy Server Configuration</a><ul class="list _bullet"><li class="list__item"><a href="#TeamFoundationServer-Default.NETWorkingMode">Default .NET Working Mode</a></li><li class="list__item"><a href="#TeamFoundationServer-Cross-PlatformWorkingMode">Cross-Platform Working Mode</a></li></ul></li></ul></p><a name="Cross-PlatformTFSIntegration"></a><a name="Cross-Platform-TFS-Integration"></a><div class="chapter"><h2 id="TeamFoundationServer-Cross-PlatformTFSIntegration">Cross-Platform TFS Integration</h2><p id="5d78c925">TeamCity features the <a href="https://blog.jetbrains.com/teamcity/2015/12/teamcity-cross-platform-tfs-support/" data-external="true" target="_blank" rel="noopener noreferrer">cross-platform TFS integration</a>, which works on Linux, macOS, and Windows platforms. Without installing additional software, TeamCity servers and build agents can interact with Team Foundation Servers 2012 or later, and Azure DevOps Services.</p><p id="7b8c3188">The built-in TFS plugin can work in two modes: the default and cross-platform. The working mode is based on the availability of Team Explorer (default mode): if it is not present, the plugin falls back from the default to cross-platform mode.</p><p id="5fc89c46">When detecting the Team Explorer version, TeamCity checks <a href="https://msdn.microsoft.com/en-us/library/yf1d93sz.aspx" data-external="true" target="_blank" rel="noopener noreferrer">.NET GAC</a> and the following paths:</p><ul class="list _ul"><li class="list__item" id="468841f0"><code class="code">Windows x86: %CommonProgramFiles%Microsoft Shared\Team Foundation Server\%version_number%</code></li><li class="list__item" id="3e033cd7"><code class="code">Windows x64: %CommonProgramFiles(x86)%Microsoft Shared\Team Foundation Server\%version_number%</code></li></ul><p id="522739e9">To enforce the cross-platform mode on TeamCity, set the <code class="code">teamcity.tfs.mode=java</code> <a href="configuring-teamcity-server-startup-properties.html#TeamCity-internal-properties">internal property</a> or <a href="configuring-build-parameters.html">build configuration parameter</a>.</p></div><a name="TFSSettings"></a><a name="TFS-Settings"></a><div class="chapter"><h2 id="TeamFoundationServer-TFSSettings">TFS Settings</h2><div class="table-wrapper"><table width="100%" id="d194fe0a"><thead><tr id="3e3e5341" class="ijRowHead"><th id="8bfa06b4"><p id="40244139">Option</p></th><th id="31ef27a8"><p id="54beff1c">Description</p></th></tr></thead><tbody><tr id="a6ae1926" class="ijRowOdd"><td id="dd57bcd3"><p id="ccc36eb1">URL</p></td><td id="c3ec5fac"><p id="1d26b251">Team Foundation Server URL in the following format:</p><ul class="list _ul"><li class="list__item" id="77b8f9ba"><p>TFS 2010+: <code class="code">http[s]://&lt;host&gt;:&lt;port&gt;/tfs/&lt;collection&gt;</code></p></li><li class="list__item" id="d72652e3"><p>TFS 2005/2008: <code class="code">http[s]://&lt;host&gt;:&lt;port&gt;</code></p></li><li class="list__item" id="71634298"><p>Azure DevOps: <code class="code">https://dev.azure.com/&lt;organization&gt;</code></p></li><li class="list__item" id="d0983087"><p>VSTS: <code class="code">https://&lt;accountname&gt;.visualstudio.com</code></p></li></ul></td></tr><tr id="d43e8562" class="ijRowEven"><td id="36d1cfcd"><p id="e8eb4ed3">Root</p></td><td id="c4fea43f"><p id="7b75180b">Specify the root using the following format: <code class="code">$&lt;project name&gt;&lt;project_catalog&gt;</code></p></td></tr><tr id="fd3f98dc" class="ijRowOdd"><td id="eb8d42f5"><p id="9803ef67">Username</p></td><td id="3ad23857"><p id="100a13c0">Specify a user to access Team Foundation Server. This can be a user name or <code class="code">DOMAIN\UserName</code> string.<br>Use blank to let TFS select a user account that is used to run the TeamCity Server (or Agent for the agent-side checkout).</p></td></tr><tr id="a5dd4d48" class="ijRowEven"><td id="b179971d"><p id="15e2f117">Password</p></td><td id="81d4c76e"><p id="39d8ba30">Enter the password of the user entered above</p></td></tr></tbody></table></div><p id="28331d4e">Learn more about authentication in <a href="#Authentication-Notes">Azure DevOps</a>.</p></div><a name="Agent-SideCheckout"></a><a name="Agent-Side-Checkout"></a><div class="chapter"><h2 id="TeamFoundationServer-Agent-SideCheckout">Agent-Side Checkout</h2><p id="02a30f0b">The <a href="vcs-checkout-mode.html#agent-checkout">agent-side</a> checkout is supported on Windows, as well as Linux and Mac agent machines.</p><p id="4ad494ab">TeamCity automatically creates a TFS workspace for each <a href="build-checkout-directory.html">checkout directory</a> used. The workspace is created on behalf of the user account specified in the VCS root settings.</p><p id="8164b2cc">By default, the created TFS workspace uses the location defined in the TFS server settings. You can force TeamCity to use a specific workspace location via the <a href="configuring-build-parameters.html">build configuration parameter</a> <code class="code">teamcity.tfs.workspace.location</code> set to <code class="code">local</code> or <code class="code">server</code>.</p><p id="bb8dd520">The created TFS workspaces are automatically removed based on the timeout configured via the <code class="code">teamcity.tfs.workspace.idleTime</code> <a href="build-agent-configuration.html">build agent property</a> set to the default value of 1209600 sec (2 weeks).</p><div class="table-wrapper"><table width="100%" id="cc7985a7"><thead><tr id="1f8bab72" class="ijRowHead"><th id="26cef2f0"><p id="030ef3e2">Option</p></th><th id="8d8a382b"><p id="853f4db6">Description</p></th></tr></thead><tbody><tr id="a43c2d4c" class="ijRowOdd"><td id="33c7922d"><p id="3dfa7fdb">Enforce overwrite all files</p></td><td id="bc0d96ec"><p id="0c609c46">When the option is enabled, TeamCity will call TFS to update workspace rewriting all files.</p></td></tr></tbody></table></div><p id="5537e3b3">Normally, there is no need to do a forced update for every build. But, if you suspect that TeamCity is not getting the latest version from the repository, you can use this option.</p><aside class="note " data-title="" rel="5537e3b3" id="0d29913f"><p id="8b310e31">TFS does not allow several workspaces on a machine mapped to the same directory. If it happens, the TeamCity TFS agent-side checkout will attempt to remove intersecting workspaces to create a new workspace that matches the specified VCS root and checkout rules.</p><p id="89b48391">Note that it can fail to remove workspaces created by another user, and in this case you need to remove such workspaces manually.</p><p id="6a978ed0">It is recommended to use checkout rules of the format below to differentiate local mappings:</p><ul class="list _ul"><li class="list__item" id="7a55c2aa"><code class="code">$/root1 =&gt; /root1</code></li><li class="list__item" id="7a6c223e"><code class="code">$/root2 =&gt; /root2</code></li></ul></aside></div><a name="AuthenticationNotes"></a><a name="Authentication-Notes"></a><div class="chapter"><h2 id="TeamFoundationServer-AuthenticationNotes">Authentication Notes</h2><p id="132ce6c7"><a name="azure-devops"></a><a name="TeamFoundationServer-azure-devops"></a></p><p id="222d3bac"><a name="VisualStudioOnline"></a><a name="TeamFoundationServer-VisualStudioOnline"></a></p><p id="fa70d3ab"><a name="vsts"></a><a name="TeamFoundationServer-vsts"></a></p><p id="bfc336da"><a name="teamFoundationServerLive"></a><a name="TeamFoundationServer-teamFoundationServerLive"></a></p><p id="341bfd03">The following authentication options are available in Azure DevOps.</p><a name="azure-authentication"></a><a name="PersonalAccessTokens"></a><a name="Personal-Access-Tokens"></a><div class="chapter"><h3 id="TeamFoundationServer-PersonalAccessTokens">Personal Access Tokens</h3><p id="4037beab">To use access tokens, you need to create a <a href="https://www.visualstudio.com/en-us/docs/setup-admin/team-services/use-personal-access-tokens-to-authenticate" data-external="true" target="_blank" rel="noopener noreferrer">personal access token</a> in your Azure DevOps account, where you have to set some <b id="07daaa1d">Code</b> <a href="#Required-Access-Scope">access scope</a> in your repositories and use it when configuring a VCS root.</p><aside class="note " data-title="" rel="4037beab" id="c886b522"><p id="1ab28995">You can authenticate with a personal access token to Azure DevOps Services only. TeamCity does not support token authentication to hosted <a href="https://azure.microsoft.com/en-in/services/devops/server/" data-external="true" target="_blank" rel="noopener noreferrer">Azure DevOps Server</a> (formerly, Team Foundation Server) installations.</p></aside><div class="table-wrapper"><table width="100%" id="d7bc54ca"><thead><tr id="7a71716a" class="ijRowHead"><th id="fc20285c"><p id="d68aebd3">Option</p></th><th id="17bff133"><p id="706b1d5d">Description</p></th></tr></thead><tbody><tr id="8e5d7120" class="ijRowOdd"><td id="cec3884f"><p id="0e83c4b1">Username</p></td><td id="f9eb2f4d"><p id="4551c5c2">Leave blank for TFVC, any value for Git, for example, username</p></td></tr><tr id="c0dc3102" class="ijRowEven"><td id="61a2c3ff"><p id="44ebd1c2">Password</p></td><td id="4a1a837e"><p id="40d22aa9">Enter your personal access token created earlier</p></td></tr></tbody></table></div><a name="RequiredAccessScope"></a><a name="Required-Access-Scope"></a><div class="chapter"><h4 id="TeamFoundationServer-RequiredAccessScope">Required Access Scope</h4><div class="table-wrapper"><table width="100%" id="b49ca343"><thead><tr id="43bc31c8" class="ijRowHead"><th id="426d00a3"><p id="c3cf9829">TFS subsystem</p></th><th id="b1d93d92"><p id="25d119bc">Scopes</p></th></tr></thead><tbody><tr id="047e0f8c" class="ijRowOdd"><td id="f730b130"><p id="c14fa5b8">TFVC</p></td><td id="112eb265"><p id="b4355962">All scopes</p></td></tr><tr id="d9ad90a7" class="ijRowEven"><td id="0f17f7cb"><p id="b1fea7fa">Git</p></td><td id="c592d641"><p id="97675934">Code (read) / Code (read and write) for versioned settings</p></td></tr><tr id="04433cf6" class="ijRowOdd"><td id="5a2a44fd"><p id="7baf5d37">Work Items</p></td><td id="dc413390"><p id="f1ae4d15">Work items (read)</p></td></tr><tr id="0b36f412" class="ijRowEven"><td id="7b02ad83"><p id="f686977c">Commit Status</p></td><td id="21540ca8"><p id="95f47345">Code (status)</p></td></tr></tbody></table></div></div></div><a name="AlternateAuthenticationCredentials"></a><a name="Alternate-Authentication-Credentials"></a><div class="chapter"><h3 id="TeamFoundationServer-AlternateAuthenticationCredentials">Alternate Authentication Credentials</h3><p id="208f10ae">To use the login/password pair authentication, you have to enable <a href="https://www.visualstudio.com/en-us/docs/report/analytics/client-authentication-options#create-an-alternate-access-credential" data-external="true" target="_blank" rel="noopener noreferrer">alternate credentials</a> in your Azure DevOps account, where you can set a secondary username and password to use when configuring a VCS root.</p></div><a name="NTLM/KerberosonLinuxandmacOS"></a><a name="NTLM/Kerberos-on-Linux-and-macOS"></a><div class="chapter"><h3 id="TeamFoundationServer-NTLM/KerberosonLinuxandmacOS">NTLM/Kerberos on Linux and macOS</h3><p id="e97258fe">To use this authentication method, check that your machine includes Kerberos libraries and that the authentication is properly configured. If you encounter any issues, please check the steps described in the <a href="https://msdn.microsoft.com/en-us/library/gg475929(v=vs.120).aspx#Anchor_3" data-external="true" target="_blank" rel="noopener noreferrer">Microsoft documentation</a>.</p></div></div><a name="TeamFoundationProxyConfiguration"></a><a name="Team-Foundation-Proxy-Configuration"></a><div class="chapter"><h2 id="TeamFoundationServer-TeamFoundationProxyConfiguration">Team Foundation Proxy Configuration</h2><p id="030ed522">To enable usage of <a href="https://www.visualstudio.com/en-us/docs/setup-admin/tfs/install/install-proxy-setup-remote" data-external="true" target="_blank" rel="noopener noreferrer">Team Foundation Proxy</a>, define the <code class="code">TFSPROXY</code> environment variable for the user account which runs the TeamCity server or agent and restart them to apply changes.</p><p id="ace9d95d">Example:</p><div class="code-block" data-lang="none"> TFSPROXY=https://tfs-proxy:8081
 

</div></div><a name="HTTPProxyServerConfiguration"></a><a name="HTTP-Proxy-Server-Configuration"></a><div class="chapter"><h2 id="TeamFoundationServer-HTTPProxyServerConfiguration">HTTP Proxy Server Configuration</h2><a name="Default.NETWorkingMode"></a><a name="Default-.NET-Working-Mode"></a><div class="chapter"><h3 id="TeamFoundationServer-Default.NETWorkingMode">Default .NET Working Mode</h3><p id="7bda5b4b">To interact with the TFS server, the proxy server settings specified for the user account which runs the TeamCity server or agent will be used.</p></div><a name="Cross-PlatformWorkingMode"></a><a name="Cross-Platform-Working-Mode"></a><div class="chapter"><h3 id="TeamFoundationServer-Cross-PlatformWorkingMode">Cross-Platform Working Mode</h3><p id="1560619f">The default Java proxy server settings specified for the TeamCity server or agent will be used in the TFS integration. On the TeamCity server, <a href="configuring-teamcity-server-startup-properties.html">internal properties or Java options</a> can be used. On the TeamCity agent, <a href="build-agent-configuration.html">build agent configuration</a> or <a href="configuring-build-agent-startup-properties.html">Java options</a> can be used. The TeamCity-TFS integration supports the following options:</p><div class="code-block" data-lang="none">http.proxyHost
http.proxyPort
http.nonProxyHosts
https.proxyHost
https.proxyPort
http.proxyUser
http.proxyPassword

</div><hr id="e9825be8"></div></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>