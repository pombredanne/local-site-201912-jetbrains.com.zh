<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>VCS Checkout Rules - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="VCS Checkout Rules" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/configuring-vcs-settings.md|Configuring VCS Settings/vcs-checkout-rules.md|VCS Checkout Rules" data-main-title="VCS Checkout Rules" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/vcs-checkout-rules.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="VCS Checkout Rules" id="vcs-checkout-rules.md">VCS Checkout Rules</h1><p id="94ffb80d">VCS Checkout Rules allow you to check out a part of the configured VCS root and to map directories from the version control to subdirectories in the <a href="build-checkout-directory.html">build checkout directory</a> on a build agent. Thus, you can define a VCS root for the entire repository and make each build configuration checkout only the relevant part of it.</p><p id="e418d459">The Checkout Rules affect the changes displayed in the TeamCity for the build and the files checked out for the build on agent. To display changes, but not to trigger a build for a change, use <a href="configuring-vcs-triggers.html#VCS-Trigger-Rules">VCS Trigger Rules</a>.</p><p id="33912d98">The general recommendation is to have a small number of VCS roots (pointing to the root of the repository) and define what is checked out by a specific build configuration via checkout rules.</p><p id="1ea01a51"><b id="b00dccc8">To add a checkout rule</b>, go to the build configuration's <b id="8362bcd8">Version Control Settings</b> page, locate the VCS root in the list, and click <b id="9829bb40">Edit checkout rules</b> to open a form for entering the rules. Use the VCS repository browser <img alt="VCS-browserIcon.png" title="VCS-browserIcon.png" src="/help/img/teamcity/2019.1/VCS-browserIcon.png" id="f8ff48c4" width="26" height="27" class="inline-icon-26"> to select a directory to check out.</p><a name="note-perforce-vcs"></a><p id="56e2c365">Note that Perforce support in TeamCity treats checkout rules as case-sensitive. Case-insensitivity for Perforce-based build configurations can be enabled on the <b id="c09147bd">Version Control Settings</b> page by adding the following comment in the <i id="8114fc3e">Edit Checkout Rules</i> form: <code class="code">##teamcity ignore-case</code>.</p><aside class="note " data-title="" rel="56e2c365" id="2421cc1c"><p id="e3518e31">Checkout rules can only be set to directories, files are <b id="ebb69e37">not</b> supported.</p></aside><a name="Syntax"></a><a name="Syntax"></a><div class="chapter"><h2 id="VCSCheckoutRules-Syntax">Syntax</h2><p id="9f9614e6">In the examples below the paths in the repository (<code class="code">VCSPath</code>) are relative to the configured VCS root, the paths on the agent (<code class="code">AgentPath</code>) are relative to the build checkout directory.</p><p id="c72046cf">The general syntax of a single checkout rule is as follows:</p><div class="code-block" data-lang="bash">
+|-: VCSPath [=&gt; AgentPath]

</div><a name="OR-syntax-tip"></a><aside class="tip sideblock" data-title="" rel="VCSCheckoutRules-Syntax" id="36f3b12c"><p id="d82460e6">Here, the <i origin="teamcity-help" id="633e05f8">pipe</i> symbol <code class="code">|</code> represents the <b origin="teamcity-help" id="063340f2">OR</b> command, as in regular expressions: use <code class="code">+</code> for including, <b origin="teamcity-help" id="944f6ae6">OR</b> <code class="code">-</code> for excluding.</p></aside><aside class="note " data-title="" rel="VCSCheckoutRules-Syntax" id="6fc48f6b"><p id="13aa14a7">If no rule is specified, all files are included.<br>When you start entering a rule, note that as soon as you enter any <code class="code">+:</code> rule, TeamCity will remove the default "include all" setting.<br>To include all the files explicitly, use the <code class="code">+:.</code> rule.</p></aside><aside class="note " data-title="" rel="VCSCheckoutRules-Syntax" id="3bd39cb4"><p id="a7e84d97">Note that exclude checkout rules (in the form of <code class="code">-:</code>) will generally only speed up server-side checkouts, unless you use <a href="perforce.html">Perforce</a> and <a href="team-foundation-server.html">TFS</a> agent-side checkout, where exclude rules are processed effectively.<br>With other version control systems, agent-side checkouts may emulate the exclude checkout rules by checking out all the root directories mentioned as include rules and deleting the excluded directories. With such systems, exclude checkout rules should generally be avoided for the agent-side checkout. Refer to the <a href="vcs-checkout-mode.html">VCS Checkout Mode</a> page for more information.</p><p id="41052d6e">With Git agent-side checkout, TeamCity translates some of the checkout rules to the sparse checkout patterns. See the details in <a href="git.html#Limitations">Git</a>.</p></aside><p id="ec500dc7">When entering rules, note the following:</p><ul class="list _ul"><li class="list__item" id="087ff545"><p>To enter multiple rules, each rule should be entered on a separate line.</p></li><li class="list__item" id="df85ac31"><p>For each file, the most specific rule will apply if the file is included, regardless of what order the rules are listed in.</p></li><li class="list__item" id="671b27de"><p>If you don't enter an operator, it will default to <code class="code">+:</code>.</p></li></ul><p id="0da380ef">Rules can be used to perform the following operations:</p><div class="table-wrapper"><table width="100%" id="96a1b376"><thead><tr id="78f7c437" class="ijRowHead"><th id="e3b20f47"><p id="34ead875">Syntax</p></th><th id="6dd689ce"><p id="d8152c53">Explanation</p></th></tr></thead><tbody><tr id="eba289da" class="ijRowOdd"><td id="c60e6e05"><p id="bb059d43"><code class="code">+:.=&gt;AgentPath</code></p></td><td id="e8d41016"><p id="c99b8ac8">Checks out the root into the <code class="code">Path</code> directory on a build agent.</p></td></tr><tr id="c57c7cff" class="ijRowEven"><td id="30b40762"><p id="75e60a56"><code class="code">-:VCSPath</code></p></td><td id="eaee600c"><p id="d3b066ba">Excludes <code class="code">VCSPath</code> (the path must be a directory and not a filename).</p></td></tr><tr id="ef2470d1" class="ijRowOdd"><td id="5ac767de"><p id="84c5c15e"><code class="code">+:VCSPath=&gt;.</code></p></td><td id="881940e1"><p id="5b78a745">Maps the <code class="code">VCSPath</code> from the VCS to the <a href="agent-work-directory.html">build agent's default work directory</a>.</p></td></tr><tr id="3290edca" class="ijRowEven"><td id="9d9c5ad7"><p id="98e89bd0"><code class="code">VCSPath=&gt;NewAgentPath</code></p></td><td id="a3553e6a"><p id="fe369345">Maps the <code class="code">VCSPath</code> from the VCS to the <code class="code">NewAgentPath</code> directory on a build agent.</p></td></tr><tr id="f37f8d48" class="ijRowOdd"><td id="28a61711"><p id="e02a9956"><code class="code">+:VCSPath</code></p></td><td id="47293f3c"><p id="e0e6d763">Maps the <code class="code">VCSPath</code> from the VCS to the same-named directory (<code class="code">VCSPath</code>) on a build agent.</p></td></tr></tbody></table></div><p id="1ef4ad04">An example with three VCS checkout rules:</p><div class="code-block" data-lang="bash">
-:src/help
+:src=&gt;production/sources
+:src/samples=&gt;./samples

</div><p id="f71fccb0">In the above example, the first rule excludes the <code class="code">src/help</code> directory and its contents from checkout. The third rule is more specific than the second rule and maps the <code class="code">src/samples</code> path to the <code class="code">samples</code> path in the build agent's default work directory. The second rule maps the contents of the <code class="code">src</code> path to the <code class="code">production/sources</code> on the build agent, except <code class="code">src/help</code> which was excluded by the first rule and <code class="code">src/samples</code> which was mapped to a different location by the third rule.</p><hr id="d3c6062e"><p id="61c6087f"><b id="42ebc635">See also:</b></p><p id="4c9fa94c"><b id="9b33d179">Administrator's Guide</b>: <a href="vcs-checkout-mode.html">VCS Checkout Mode</a></p><hr id="625b548d"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>