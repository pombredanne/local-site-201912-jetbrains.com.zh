<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>代理主目录-帮助|团队城市</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Agent Home Directory" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/concepts.md|Concepts/agent-home-directory.md|Agent Home Directory" data-main-title="Agent Home Directory" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/agent-home-directory.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="agent-home-directory.md" data-toc="Agent Home Directory">代理商主目录</h1><p id="b90591fc"><i id="b8470a12">Build Agent主目录</i>是安装代理的目录。</p><p id="142f6b0f"><a href="build-agent.html">Build Agent</a>可以安装到任何目录中。如果您选择使用TeamCity <a href="installing-and-configuring-the-teamcity-server.html#Installing-TeamCity-Server">.tar.gz发行版或.exe发行版</a>来安装Build Agent，则该代理将被放置到<code class="code"><</code> <a href="teamcity-home-directory.html"><code class="code">TeamCity Home</code></a> <code class="code">>/buildAgent</code> 。.exe代理安装建议的默认目录是<code class="code">C:\BuildAgent</code> 。</p><p id="10bfcb27">代理将所有相关数据存储在其目录下，并且唯一需要在OS中进行安装/卸载的位置就是集成到<a href="setting-up-and-running-additional-build-agents.html#Automatic-Start">自动启动系统中</a> （例如，Windows下的服务设置）。</p><a name="AgentDirectories"></a><a name="Agent-Directories"></a><div class="chapter"><h2 id="AgentHomeDirectory-AgentDirectories">代理目录</h2><p id="7c076f47">该代理包括：</p><ul class="list _ul"><li class="list__item" id="cfe6a423"><p>代理程序二进制文件（存储在<code class="code">bin</code> ， <code class="code">launcher</code>和<code class="code">lib</code>目录）。可以从服务器自动更新二进制文件以匹配服务器版本。</p></li><li class="list__item" id="21a89d2e"><p>代理插件和工具（存储在<code class="code">plugins</code>和<code class="code">tools</code>目录）。这些是代理程序二进制安装的一部分，由代理程序本身管理，并在必要时从TeamCity服务器自动更新。</p></li><li class="list__item" id="c94e9f03"><p>代理配置（存储在<code class="code">conf</code>和<code class="code">launcher\conf</code>目录）。这是定义代理设置和行为的唯一信息。</p></li><li class="list__item" id="4641e59f"><p><a href="agent-work-directory.html">座席工作目录</a> （存储在<code class="code">work</code>目录，默认情况下，可通过代理配置进行配置）。</p></li><li class="list__item" id="affb6fd5"><p>座席辅助数据（存储在<code class="code">system</code> ， <code class="code">temp</code> ， <code class="code">backup</code> ， <code class="code">update</code>目录）。代理运行期间所需的数据。</p></li><li class="list__item" id="6dab80a6"><p>代理日志（存储在<code class="code">logs</code>目录）：该目录存储内部代理日志，这对于调查代理问题可能是必需的。</p></li></ul><a name="AgentFilesModification"></a><a name="Agent-Files-Modification"></a><div class="chapter"><h3 id="AgentHomeDirectory-AgentFilesModification">代理文件修改</h3><p id="955959b7">代理配置目录是唯一一个设计为具有用户可以编辑的文件的目录。用户不应该编辑所有其他目录。</p><p id="361581f5">代理工作目录的内容可以删除（但只能全部删除）。这将导致所有受影响的构建的<a href="clean-checkout.html">干净签</a>出。</p><p id="a95f42e3">可以删除存储代理辅助数据的目录的内容（但只能删除整个内容，并且不运行代理）。删除数据可能会导致在此代理的下次构建期间采取额外的措施，但这仅会对性能产生影响，而不会影响一致性。</p></div></div><a name="ImportantAgentFilesandDirectories"></a><a name="Important-Agent-Files-and-Directories"></a><div class="chapter"><h2 id="AgentHomeDirectory-ImportantAgentFilesandDirectories">重要代理文件和目录</h2><ul class="list _ul"><li class="list__item" id="a3a5f1af"><p id="22eec780"><b id="ba09a9fc">/箱</b></p><ul class="list _ul"><li class="list__item" id="81c39e85"><p><code class="code">agent.bat</code> —批处理脚本，用于从Windows下的控制台启动/停止构建代理</p></li><li class="list__item" id="6cb8b589"><p><code class="code">agent.sh</code> —在Linux / Unix下启动/停止构建代理的shell脚本</p></li><li class="list__item" id="232b938b"><p><code class="code">service.install.bat</code> —批处理文件，用于将构建代理安装为Windows服务。另请参阅<a href="setting-up-and-running-additional-build-agents.html#Build-Agent-as-a-Windows-Service">相关部分</a> 。</p></li><li class="list__item" id="fb2c0c27"><p><code class="code">service.start.bat</code> —使用已安装的构建代理服务启动构建代理</p></li><li class="list__item" id="edbd0bdd"><p><code class="code">service.stop.bat</code> —停止安装的构建代理服务</p></li><li class="list__item" id="9b566ed0"><p><code class="code">service.uninstall.bat</code> —批处理文件以卸载当前安装的构建代理Windows服务</p></li></ul></li><li class="list__item" id="22b9a049"><p id="045b9203"><b id="c1d31bc6">/ conf /</b> ：此文件夹包含构建代理程序的所有配置文件</p><ul class="list _ul"><li class="list__item" id="3848fee8"><p><code class="code">buildAgent.properties</code> — <a href="build-agent-configuration.html">主配置文件</a> 。该文件由TeamCity服务器.exe安装程序和生成代理.exe安装程序生成。</p></li><li class="list__item" id="00e1ff83"><p><code class="code">buildAgent.dist.properties</code> —示例配置文件。您可以将其重命名为<code class="code">buildAgent.properties</code>创建初始代理配置文件。</p></li><li class="list__item" id="8bbe9fd9"><p><code class="code">teamcity-agent-log4j.xml</code> —构建代理程序日志记录设置。有关详细信息，请参阅文件中的注释或<a href="http://logging.apache.org/log4j/1.2/manual.html" rel="noopener noreferrer" data-external="true" target="_blank">log4j手册</a></p></li></ul></li><li class="list__item" id="1fe3672c"><p id="4ff5e6d8"><b id="83ba8aae">/ launcher / conf /</b></p><ul class="list _ul"><li class="list__item" id="da3ffe07"><p><code class="code">wrapper.conf.template</code> —样本配置文件，用作创建原始配置的模板</p></li><li class="list__item" id="d9404ab0"><p><code class="code">wrapper.conf</code> —当前的构建代理Windows服务配置。这是一个Java Service Wrapper配置Java属性文件。有关详细信息，请参阅文件或Java Service Wrapper文档中的注释。</p></li></ul></li><li class="list__item" id="b142274d"><p id="4d09ec40"><b id="ea83f623">/日志</b></p><ul class="list _ul"><li class="list__item" id="5d32cfe5"><p><code class="code">launcher.log</code> —构建代理启动器的日志</p></li><li class="list__item" id="2f16db32"><p><code class="code">teamcity-agent.log</code> -主构建代理日志</p></li><li class="list__item" id="1c7a7273"><p><code class="code">wrapper.log</code> — Java Service Wrapper的日志。仅当构建代理作为Windows服务运行时可用</p></li><li class="list__item" id="07763116"><p><code class="code">teamcity-build.log</code> -从构建日志</p></li><li class="list__item" id="934d182f"><p><code class="code">upgrade.log</code> -来自构建代理升级过程的日志</p></li><li class="list__item" id="3cc61911"><p><code class="code">teamcity-vcs.log</code> —代理端结帐日志</p></li></ul></li><li class="list__item" id="a77d07dd"><p id="7339a9b1"><b id="eefc7d42">/系统</b></p><ul class="list _ul"><li class="list__item" id="b03ec9b1"><p><code class="code">.artifacts_cache</code> -缓存所有构建的工件；可以<a href="free-disk-space.html#Configuring-artifacts-cache">配置</a></p></li></ul></li></ul><p id="008a44e5"><a name="temp-dir"></a><a name="AgentHomeDirectory-temp-dir"></a></p><ul class="list _ul"><li class="list__item" id="c4e3c652"><b id="ec0b5254">/ temp</b> ：临时文件夹；路径可以在<a href="build-agent-configuration.html"><code class="code">buildAgent.properties</code></a>文件<ul class="list _ul"><li class="list__item" id="5066ae27"><p><code class="code">agentTmp</code> —临时文件夹，构建代理使用该临时文件夹在构建过程中存储与构建相关的文件。每次构建后都要清洁。</p></li><li class="list__item" id="a76bf22f"><p><code class="code">buildTmp</code> —临时文件夹，该文件夹设置为构建过程的默认临时目录，并且在每次构建后都会清理</p></li><li class="list__item" id="ae0361ad"><p><code class="code">globalTmp</code> —临时文件夹，由构建代理用于其自己的临时文件。在代理重新启动时被清除。</p></li></ul></li></ul><hr id="ddd2c446"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>