<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Agent Home Directory - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Agent Home Directory" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/concepts.md|Concepts/agent-home-directory.md|Agent Home Directory" data-main-title="Agent Home Directory" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/agent-home-directory.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Agent Home Directory" id="agent-home-directory.md">Agent Home Directory</h1><p id="b90591fc">The <i id="b8470a12">Build Agent Home Directory</i> is the directory where the agent is installed.</p><p id="142f6b0f">The <a href="build-agent.html">Build Agent</a> can be installed into any directory. If you use the TeamCity <a href="installing-and-configuring-the-teamcity-server.html#Installing-TeamCity-Server">.tar.gz distribution or .exe distribution</a> opting to install a Build Agent, the agent will be placed into <code class="code">&lt;</code><a href="teamcity-home-directory.html"><code class="code">TeamCity Home</code></a><code class="code">&gt;/buildAgent</code>. The default directory suggested by the .exe agent installation is <code class="code">C:\BuildAgent</code>.</p><p id="10bfcb27">The agent stores all related data under its directory and the only place that requires installation/uninstallation into an OS is integrating into the <a href="setting-up-and-running-additional-build-agents.html#Automatic-Start">automatic start system</a> (for example, service settings under Windows).</p><a name="AgentDirectories"></a><a name="Agent-Directories"></a><div class="chapter"><h2 id="AgentHomeDirectory-AgentDirectories">Agent Directories</h2><p id="7c076f47">The agent consists of:</p><ul class="list _ul"><li class="list__item" id="cfe6a423"><p>agent binaries (stored under <code class="code">bin</code>, <code class="code">launcher</code>, and <code class="code">lib</code> directories). The binaries can be automatically updated from the server to match the server version.</p></li><li class="list__item" id="21a89d2e"><p>agent plugins and tools (stored under <code class="code">plugins</code> and <code class="code">tools</code> directories). These are parts of agent binary installation and are managed by the agent itself, updating automatically whenever necessary from the TeamCity server.</p></li><li class="list__item" id="c94e9f03"><p>agent configuration (stored under <code class="code">conf</code> and <code class="code">launcher\conf</code> directories). This is a unique piece of information defining the agent settings and behavior.</p></li><li class="list__item" id="4641e59f"><p><a href="agent-work-directory.html">agent work directory</a> (stored under the <code class="code">work</code> directory by default, configurable via agent configuration).</p></li><li class="list__item" id="affb6fd5"><p>agent auxiliary data (stored under <code class="code">system</code>, <code class="code">temp</code>, <code class="code">backup</code>, <code class="code">update</code> directories). The data necessary during agent running.</p></li><li class="list__item" id="6dab80a6"><p>agent logs (stored under <code class="code">logs</code> directory): The directory storing internal agent logs that might be necessary for agent issues investigation.</p></li></ul><a name="AgentFilesModification"></a><a name="Agent-Files-Modification"></a><div class="chapter"><h3 id="AgentHomeDirectory-AgentFilesModification">Agent Files Modification</h3><p id="955959b7">The agent configuration directory is the only one designed to have files that can be edited by the user. All the other directories should not be edited by the user.</p><p id="361581f5">The content of the agent work directory can be deleted (but only entirely). This will result in a <a href="clean-checkout.html">clean checkout</a> for all the affected builds.</p><p id="a95f42e3">The content of directories storing agent auxiliary data can be deleted (but only entirely and while the agent is not running). Deletion of data can result in extra actions during next builds on this agent, but this is meant to have only a performance impact and should not affect consistency.</p></div></div><a name="ImportantAgentFilesandDirectories"></a><a name="Important-Agent-Files-and-Directories"></a><div class="chapter"><h2 id="AgentHomeDirectory-ImportantAgentFilesandDirectories">Important Agent Files and Directories</h2><ul class="list _ul"><li class="list__item" id="a3a5f1af"><p id="22eec780"><b id="ba09a9fc">/bin</b></p><ul class="list _ul"><li class="list__item" id="81c39e85"><p><code class="code">agent.bat</code> — batch script to start/stop the build agent from the console under Windows</p></li><li class="list__item" id="6cb8b589"><p><code class="code">agent.sh</code> — shell script to start/stop the build agent under Linux/Unix</p></li><li class="list__item" id="232b938b"><p><code class="code">service.install.bat</code> — batch file to install the build agent as a Windows service. See also <a href="setting-up-and-running-additional-build-agents.html#Build-Agent-as-a-Windows-Service">related section</a>.</p></li><li class="list__item" id="fb2c0c27"><p><code class="code">service.start.bat</code> — starts the build agent using the installed build agent service</p></li><li class="list__item" id="edbd0bdd"><p><code class="code">service.stop.bat</code> — stops the installed build agent service</p></li><li class="list__item" id="9b566ed0"><p><code class="code">service.uninstall.bat</code> — batch file to uninstall the currently installed build agent Windows service</p></li></ul></li><li class="list__item" id="22b9a049"><p id="045b9203"><b id="c1d31bc6">/conf/</b>: this folder contains all configuration files for the build agent</p><ul class="list _ul"><li class="list__item" id="3848fee8"><p><code class="code">buildAgent.properties</code> — <a href="build-agent-configuration.html">main configuration file</a>. This file is generated by the TeamCity server .exe installer and build agent .exe installer.</p></li><li class="list__item" id="00e1ff83"><p><code class="code">buildAgent.dist.properties</code> — sample configuration file. You can rename it to <code class="code">buildAgent.properties</code> to create an initial agent configuration file.</p></li><li class="list__item" id="8bbe9fd9"><p><code class="code">teamcity-agent-log4j.xml</code> — build agent logging settings. For details, refer to comments inside the file or to the <a href="http://logging.apache.org/log4j/1.2/manual.html" data-external="true" target="_blank" rel="noopener noreferrer">log4j manual</a></p></li></ul></li><li class="list__item" id="1fe3672c"><p id="4ff5e6d8"><b id="83ba8aae">/launcher/conf/</b></p><ul class="list _ul"><li class="list__item" id="da3ffe07"><p><code class="code">wrapper.conf.template</code> — sample configuration file to be used as a template for creating the original configuration</p></li><li class="list__item" id="d9404ab0"><p><code class="code">wrapper.conf</code> — current build agent Windows service configuration. This is a Java Service Wrapper configuration java properties file. For details, see comments inside the file or Java Service Wrapper documentation.</p></li></ul></li><li class="list__item" id="b142274d"><p id="4d09ec40"><b id="ea83f623">/logs</b></p><ul class="list _ul"><li class="list__item" id="5d32cfe5"><p><code class="code">launcher.log</code> — log of the build agent launcher</p></li><li class="list__item" id="2f16db32"><p><code class="code">teamcity-agent.log</code> — main build agent log</p></li><li class="list__item" id="1c7a7273"><p><code class="code">wrapper.log</code> — log of the Java Service Wrapper. Available only if the build agent is running as a windows service</p></li><li class="list__item" id="07763116"><p><code class="code">teamcity-build.log</code> — log from the build</p></li><li class="list__item" id="934d182f"><p><code class="code">upgrade.log</code> — log from the build agent upgrade process</p></li><li class="list__item" id="3cc61911"><p><code class="code">teamcity-vcs.log</code> — agent-side checkout logs</p></li></ul></li><li class="list__item" id="a77d07dd"><p id="7339a9b1"><b id="eefc7d42">/system</b></p><ul class="list _ul"><li class="list__item" id="b03ec9b1"><p><code class="code">.artifacts_cache</code> — cache for all build's artifacts; can be <a href="free-disk-space.html#Configuring-artifacts-cache">configured</a></p></li></ul></li></ul><p id="008a44e5"><a name="temp-dir"></a><a name="AgentHomeDirectory-temp-dir"></a></p><ul class="list _ul"><li class="list__item" id="c4e3c652"><b id="ec0b5254">/temp</b>: temporary folder; the path can be overridden in the <a href="build-agent-configuration.html"><code class="code">buildAgent.properties</code></a> file<ul class="list _ul"><li class="list__item" id="5066ae27"><p><code class="code">agentTmp</code> — temporary folder that is used by the build agent to store build-related files during the build. Is cleaned after each build.</p></li><li class="list__item" id="a76bf22f"><p><code class="code">buildTmp</code> — temporary folder that is set as the default temp directory for the build process and is cleaned after each build</p></li><li class="list__item" id="ae0361ad"><p><code class="code">globalTmp</code> — temporary folder that is used by the build agent for its own temporary files. Is cleaned on the agent restart.</p></li></ul></li></ul><hr id="ddd2c446"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>