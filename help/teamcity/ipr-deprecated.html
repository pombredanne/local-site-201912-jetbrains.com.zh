<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Ipr (deprecated) - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Ipr (deprecated)" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-build-steps.md|Configuring Build Steps/ipr-deprecated.md|Ipr (deprecated)" data-main-title="Ipr (deprecated)" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/ipr-deprecated.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Ipr (deprecated)" id="ipr-deprecated.md">Ipr (deprecated)</h1><p id="637cdd54">This runner provides ability to build <a href="http://www.jetbrains.com/idea/" data-external="true" target="_blank" rel="noopener noreferrer">IntelliJ IDEA</a> projects in TeamCity.<br>It is superseded by <a href="intellij-idea-project.html">IntelliJ IDEA Project</a> runner.</p><p id="4581f75d">This page contains reference information about the <b id="dcfb7203">IPR</b> build runner fields:</p><p id="643f2ea0"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#Ipr(deprecated)-IprRunnerDeprecation">Ipr Runner Deprecation</a></li><li class="list__item"><a href="#Ipr(deprecated)-IntelliJIDEAProjectSettings">IntelliJ IDEA Project Settings</a></li><li class="list__item"><a href="#Ipr(deprecated)-UnresolvedProjectModulesandPathVariables">Unresolved Project Modules and Path Variables</a></li><li class="list__item"><a href="#Ipr(deprecated)-ProjectJDKs">Project JDKs</a></li><li class="list__item"><a href="#Ipr(deprecated)-AdditionalPre/PostProcessing(Ant)">Additional Pre/Post Processing (Ant)</a></li><li class="list__item"><a href="#Ipr(deprecated)-JUnitTestRunnerSettings">JUnit Test Runner Settings</a></li><li class="list__item"><a href="#Ipr(deprecated)-CodeCoverage">Code Coverage</a></li></ul></p><a name="IprRunnerDeprecation"></a><a name="Ipr-Runner-Deprecation"></a><div class="chapter"><h2 id="Ipr(deprecated)-IprRunnerDeprecation">Ipr Runner Deprecation</h2><p id="5eda04d8">Since TeamCity 6.0 Ipr runner is deprecated in favor of <a href="intellij-idea-project.html">IntelliJ IDEA project</a> runner which uses another implementation approach. In one of the following major TeamCity releases all build configurations with Ipr runner will be automatically converted to IntelliJ IDEA project runner. Since the runners may function differently in specific configurations it is highly recommended to change your current Ipr runner-based configurations to the new runner and check your settings before the final Ipr runner disabling. Please also use the IntelliJ IDEA project runner for all newly created projects and let us know if you have any issues with it.</p><p id="42ca3d3a">Apart from differences in the scope of supported IntelliJ IDEA project features, the runners are also different in approach to tests running and coverage.<br>Namely:</p><ul class="list _ul"><li class="list__item" id="783581b4"><p id="0556692d">EMMA coverage is not supported by IntelliJ IDEA project runner. We recommend migrating to IntelliJ IDEA coverage engine if you used EMMA</p></li><li class="list__item" id="affeead5"><p id="d25b20cc">in IntelliJ IDEA project runner JUnit tests are launched via IntelliJ IDEA shared run configurations as opposed to Ant's <code class="code">&lt;junit&gt;</code> task in Ipr runner.</p></li></ul><p id="2751f3c7">Here are the recommended steps to perform the migration from Ipr to IntelliJ IDEA project runner:</p><ol class="list _decimal"><li class="list__item" id="15ff5aee"><p>If your existing Ipr runner has <a href="#Additional-Pre/Post-Processing-(Ant)">JUnit Test Runner Settings</a> configured, backup all the settings of the section, for example, into a text file.</p></li><li class="list__item" id="404cbefb"><p>If you have <a href="#JUnit-Test-Runner-Settings">code coverage settings</a> configured, save these settings also. (See also related <a href="http://youtrack.jetbrains.net/issue/TW-14921" data-external="true" target="_blank" rel="noopener noreferrer">issue</a>)</p></li><li class="list__item" id="ce9eed63"><p>Change the runner type to IntelliJ IDEA Project. All your settings will be migrated except for JUnit and code coverage options.</p></li><li class="list__item" id="a356032d"><p>To restore JUnit tests you will need to create a shared run configuration in IntelliJ IDEA and commit the corresponding file into the version control. The name of the run configuration can then be specified in the <b id="0b1ad263">Run configurations to execute</b> area.</p></li><li class="list__item" id="efb1eb49"><p>For coverage, configure code coverage options anew using your saved settings.</p></li></ol></div><a name="IntelliJIDEAProjectSettings"></a><a name="IntelliJ-IDEA-Project-Settings"></a><div class="chapter"><h2 id="Ipr(deprecated)-IntelliJIDEAProjectSettings">IntelliJ IDEA Project Settings</h2><a name="idea-project-settings"></a><div class="table-wrapper"><table width="100%" id="8d1599ad"><thead><tr id="6e62227a" class="ijRowHead"><th id="99647947"><p id="9e8baf5c">Option</p></th><th id="e4e78f39"><p id="7319c002">Description</p></th></tr></thead><tbody><tr id="a0cb2e29" class="ijRowOdd"><td id="55ea1d80"><p id="40f07008">Path to the project</p></td><td id="5b89bd86"><p id="69f307c3">Use this field to specify the path to the project file (<code class="code">.ipr</code>) or path to the project directory (root directory of the project that contains <code class="code">.idea</code> folder). This information is required by this build runner to understand the structure of the project.</p><aside class="tip sideblock" data-title="" rel="69f307c3" id="cef3ab09"><p id="bce22b02">Specified path should be relative to the checkout directory.</p></aside></td></tr><tr id="948a087f" class="ijRowEven"><td id="3f9f8202"><p id="a882fda3">Detect global libraries and module-based JDK in the <code class="code">*.iml</code> files</p></td><td id="544b1bd9"><p id="4bd09fe8">If this option is checked, all the module files will be automatically scanned for references to the global libraries and module JDKs when saved. This helps you ensure all references will be properly resolved.</p><aside class="warning " data-title="" rel="4bd09fe8" id="d786b0a4"><p id="e608b5e3">When this option is selected, the process of opening and saving the build runner settings may become time-consuming, because it involves loading and parsing all project module files.</p></aside></td></tr><tr id="484519b6" class="ijRowOdd"><td id="ae6149c6"><p id="811f1ef3">Check/Reparse Project</p></td><td id="7a857a9d"><p id="970c062b">Click to reparse the project and import build settings right from the IDEA project, for example the list of JDKs.</p><aside class="note " data-title="" rel="970c062b" id="9fe5f655"><p id="0d603270">If you update your project settings in IntelliJ IDEA - add new JDKs, libraries, don't forget to update build runner settings by clicking <b origin="teamcity-help" id="7b683b6f">Check/Reparse Project</b>.</p></aside></td></tr><tr id="c425d150" class="ijRowEven"><td id="44dc333b"><p id="a786c212">Working directory</p></td><td id="2b355307"><p id="abec216c">Enter a path to a <a href="build-working-directory.html">Build Working Directory</a>, if it differs from the <a href="build-checkout-directory.html">Build Checkout Directory</a>.</p><p id="f81516a7">Optional, specify if differs from the checkout directory.</p></td></tr></tbody></table></div></div><a name="UnresolvedProjectModulesandPathVariables"></a><a name="Unresolved-Project-Modules-and-Path-Variables"></a><div class="chapter"><h2 id="Ipr(deprecated)-UnresolvedProjectModulesandPathVariables">Unresolved Project Modules and Path Variables</h2><p id="5170ac5f">This section is displayed, when an IntelliJ IDEA module file (<code class="code">.iml</code>) referenced from IPR-file:</p><ul class="list _ul"><li class="list__item" id="8a8d0dc4"><p>cannot be found</p></li><li class="list__item" id="9c19bd97"><p>allows you to enter the values of path variables used in the IPR-file</p></li></ul><p id="b13e5d61">To refresh values in this section click <b origin="teamcity-help" id="c1df44a1">Check/Reparse Project</b>.</p><div class="table-wrapper"><table width="100%" id="115ba659"><thead><tr id="36a752d9" class="ijRowHead"><th id="f8b05b8a"><p id="763dfbf4">Option</p></th><th id="b8a401f6"><p id="e5f14104">Description</p></th></tr></thead><tbody><tr id="eeaa2f03" class="ijRowOdd"><td id="9aec2ffc"><p id="6763838f"><code class="code">&lt;path_variable_name&gt;</code></p></td><td id="8290da9d"><p id="72c3bc05">This field appears, if the project file contains path macros, defined in the Path Variables dialog of IntelliJ IDEA's Settings dialog. In the <b origin="teamcity-help" id="ae17b579">Set value to field</b>, specify a path to project resources, to be used on different build agents.</p></td></tr></tbody></table></div></div><a name="ProjectJDKs"></a><a name="Project-JDKs"></a><div class="chapter"><h2 id="Ipr(deprecated)-ProjectJDKs">Project JDKs</h2><p id="261c6a93">This section provides the list of JDKs detected in the project.</p><div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="b3f6084d"><thead><tr id="fe1ba756" class="ijRowHead"><th id="0478bb3c"><p id="1e7009bd">Option</p></th><th id="039fe141"><p id="988b80f8">Description</p></th></tr></thead><tbody><tr id="35c9c615" class="ijRowOdd"><td id="15a29160"><p id="d83ba69b">JDK Home</p></td><td id="ac1e3662"><p id="660fe203">Use this field to specify JDK home for the project.</p><aside class="note " data-title="" rel="660fe203" id="8a201337"><p id="31121d8d">When building with the <b origin="teamcity-help" id="f1615c1a">Ipr</b> runner, this JDK will be used to compile the sources of corresponding IDEA modules. For <b origin="teamcity-help" id="9dce8a74">Inspections</b> and <b origin="teamcity-help" id="a7253370">Duplicate Finder</b> builds, this JDK will be used internally to resolve the Java API used in your project.<br>To run the build process itself the JDK specified in the <code class="code">JAVA_HOME</code> environment variable will be used.</p></aside></td></tr><tr id="887bd72b" class="ijRowEven"><td id="1577594f"><p id="761c07f5">JDK Jar File Patterns</p></td><td id="8f61dfbd"><p id="17b83cb8">Click this link to open a text area, where you can define templates for the <code class="code">.jar</code> files of the project JDK. Use Ant rules to define the <code class="code">.jar</code> file patterns.<br>The default value is used for Linux and Windows operating systems:</p><div class="code-block" data-lang="bash">
jre/lib/*.jar

</div><p id="ab3bfd17">For Mac OS X, use the following lines:</p><div class="code-block" data-lang="bash">lib/*.jar

../Classes/*.jar

</div></td></tr><tr id="e5847aa8" class="ijRowOdd"><td id="f29958ed"><p id="58f43de7">IDEA Home</p></td><td id="e125402e"><p id="89a4dba3">If your project uses the IDEA JDK, specify the location of IDEA home directory</p></td></tr><tr id="155c97eb" class="ijRowEven"><td id="3f2b5ad0"><p id="b6f23c5e">IDEA Jar Files Patterns</p></td><td id="f74fc678"><p id="c0b5c08a">Click this link to open a text area, where you can define templates for the <code class="code">.jar</code> files of the IDEA JDK.</p></td></tr></tbody></table></div><aside class="note " data-title="" rel="b3f6084d" id="864bd305"><p id="ef922894">You can use references to external properties when defining the values, like <code class="code">%system.idea_home%</code> or <code class="code">%env.JDK_1_3%</code>. This will add a <a href="agent-requirements.html">requirement</a> for the corresponding property.</p></aside></div><a name="AdditionalPre/PostProcessing(Ant)"></a><a name="Additional-Pre/Post-Processing-(Ant)"></a><div class="chapter"><h2 id="Ipr(deprecated)-AdditionalPre/PostProcessing(Ant)">Additional Pre/Post Processing (Ant)</h2><div class="table-wrapper"><table width="100%" id="bac1b2aa"><thead><tr id="77a230ea" class="ijRowHead"><th id="1261af63"><p id="37bce6db">Option</p></th><th id="401503f9"><p id="554fa8da">Description</p></th></tr></thead><tbody><tr id="8cded046" class="ijRowOdd"><td id="ff96396f"><p id="ca307b8d">Run before build</p></td><td id="b090ffdc"><p id="95804702">In the appropriate fields, enter the Ant scripts and targets (optional) that you want to run prior to starting the build. The path to the Ant file should be relative to the project root directory.</p></td></tr><tr id="3f716596" class="ijRowEven"><td id="187cd550"><p id="cbc68f2d">Run after build</p></td><td id="90a5e7e5"><p id="912d092e">In the appropriate fields, enter the Ant scripts and targets (optional) that you want to run after the build is completed. The path to the Ant file should be relative to the project root directory.</p></td></tr></tbody></table></div></div><a name="JUnitTestRunnerSettings"></a><a name="JUnit-Test-Runner-Settings"></a><div class="chapter"><h2 id="Ipr(deprecated)-JUnitTestRunnerSettings">JUnit Test Runner Settings</h2><aside class="tip sideblock" data-title="" rel="Ipr(deprecated)-JUnitTestRunnerSettings" id="5187c464"><p id="f2c0b424">JUnit test settings map to the attributes of JUnit task. For details, refer to <a href="https://ant.apache.org/manual/Tasks/junit.html" data-external="true" target="_blank" rel="noopener noreferrer">Apache documentation</a>.</p></aside><div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="472290c6"><thead><tr id="0cbb8047" class="ijRowHead"><th id="6ab1f9a0"><p id="21b82ed0">Option</p></th><th id="0f8a3060"><p id="6004338f">Description</p></th></tr></thead><tbody><tr id="cca57b71" class="ijRowOdd"><td id="5bc6a163"><p id="0ad3c177">Test patterns</p></td><td id="f4cc7d77"><p id="de062b04">Click the <b id="04f0287d">Type test patterns</b> link, and specify the required test patterns in a text area.<br>These patterns are used to generate parameters of the <code class="code">batchtest</code> JUnit task section. Each pattern generates either <code class="code">include</code> or <code class="code">exclude</code> section. These patterns are also used to compose classpath for the test run. Each module mentioned in the patterns adds its classpath to the whole classpath.<br>Each pattern should be placed on a separate line and has the following format:</p><div class="code-block" data-lang="none">[-]moduleName:[testFileNamePattern]

</div><p id="3b109792">where:</p><ul class="list _ul"><li class="list__item" id="10d432f6"><p><code class="code">[-]</code>: If a pattern starts with a minus character, the corresponding files will be excluded from the build process.</p></li><li class="list__item" id="135ab338"><p><code class="code">moduleName</code>: this name can contain wildcards.</p></li><li class="list__item" id="40e1a361"><p><code class="code">[testFileNamePattern]</code>: Default value for <code class="code">testFileNamePattern</code> is <code class="code">**/*Test.java</code>, i.e. all files ending with Test.java in all directories. You can use <a href="http://ant.apache.org/manual/CoreTypes/patternset.html" data-external="true" target="_blank" rel="noopener noreferrer">Ant syntax</a> for file patterns. The sample below includes all test files from modules ending with "test" and excludes all files from packages containing the "ui" subpackage:</p></li></ul><div class="code-block" data-lang="none">*test:**/*Test.java
-*:**/ui/**/*.java

</div></td></tr><tr id="3fdcd1ff" class="ijRowEven"><td id="e80741e1"><p id="ae8995e3">Search for tests</p></td><td id="22f8f75e"><p id="6118784e">In IDEA project, a user can mark a source code folder as either <i id="2cbeea61"><code class="code">sources</code></i> or <i id="1de1a3c5"><code class="code">test</code></i> root. This drop-down list allows you to specify directories to look for tests:</p><ul class="list _ul"><li class="list__item" id="97edfa37"><p><b id="c38fdd47">Throughout all project sources</b>: look for tests in both <code class="code">sources</code> and <code class="code">test</code> folders of your IDEA project.</p></li><li class="list__item" id="3b2be7d0"><p><b id="2c0e68bc">In test sources only</b>: look through the folders marked as tests root only.</p></li></ul></td></tr><tr id="8dc08149" class="ijRowOdd"><td id="a18f27d7"><p id="56a7ce98">Classpath in Tests</p></td><td id="2fc475d8"><p id="24705283">By default the whole classpath is composed of all classpaths of the modules used to get tests from. The following two options define whether you will use the default classpath, or take it from the specified module.</p></td></tr><tr id="fba37107" class="ijRowEven"><td id="b06f3908"><p id="4ca263eb">Override classpath in tests</p></td><td id="1022971f"><p id="2fd26360">If this option is checked, you can define test classpath from a single, explicitly specified module.</p></td></tr><tr id="bcbd0427" class="ijRowOdd"><td id="1e0a8a40"><p id="0e6db140">Module name to use JDK and classpath from</p></td><td id="ab2be7c4"><p id="c8f68303">If the option <b id="31647f36">Override classpath in tests</b> is checked, you have to specify the module, where the classpath to be used for tests is specified.</p></td></tr><tr id="8325e1e9" class="ijRowEven"><td id="38437909"><p id="691c9d4e">JUnit Fork mode</p></td><td id="4ba7ff33"><p id="6b68929d">Select the desired fork mode from the combo box:</p><ul class="list _ul"><li class="list__item" id="d8b6d467"><p><b id="e8ae73e4">Do not fork</b>: fork is disabled.</p></li><li class="list__item" id="3fd363e1"><p><b id="99fda1ad">Fork per test</b>: fork is enabled, and each test class runs in a separate JVM</p></li><li class="list__item" id="f6340d65"><p><b id="b94a3479">Fork once</b>: fork is enabled, and all test classes run in a single JVM</p></li></ul></td></tr><tr id="14676f71" class="ijRowOdd"><td id="8ec2df15"><p id="fa204879">New classloader instance for each test</p></td><td id="067f5cf0"><p id="fd88563b">Check this option, if you want a new classloader to be instantiated for each test case. This option is available only if <b id="2cdd4317">Do not fork</b> option is selected.</p></td></tr><tr id="45545102" class="ijRowEven"><td id="28e32e5d"><p id="ec0a4887">Include Ant runtime</p></td><td id="3b2499ee"><p id="2317472b">Check this option to add Ant classes, required to run JUnit tests. This option is available if fork mode is enabled (<b id="d27e7687">Fork per test</b> or <b id="632f7c77">Fork once</b>).</p></td></tr><tr id="fbadd4c6" class="ijRowOdd"><td id="29fcd493"><p id="cde2cff3">JVM executable</p></td><td id="f51c3d31"><p id="d655aa0d">Specify the command that will be used to invoke JVM. This option is available if fork mode is enabled (<b id="953bb9ec">Fork per test</b> or <b id="23a2af70">Fork once</b>).</p></td></tr><tr id="c654db3f" class="ijRowEven"><td id="8d87db2e"><p id="fab4cbda">Stop build on error</p></td><td id="8315d99d"><p id="0c2ffc19">Check this option, if you want the build to stop if an error occurs during test run.</p></td></tr><tr id="e04b8fc9" class="ijRowOdd"><td id="4df69877"><p id="5ccf991d">JVM command line parameters for JUnit</p></td><td id="aa35df25"><p id="954b49f4">Specify JVM parameters to be passed to JUnit task.</p></td></tr><tr id="96673349" class="ijRowEven"><td id="e6292acb"><p id="f06b6639">Tests working directory</p></td><td id="6945056f"><p id="fab7a263">Specify the path to the working directory for tests.</p></td></tr><tr id="9c9e2bda" class="ijRowOdd"><td id="5f885f9c"><p id="abc53838">Tests timeout</p></td><td id="d989f231"><p id="7cda0705">Specify the lapse of time in milliseconds, after which test will be canceled. This value is ignored, if <b id="d926c052">Do not fork</b> option is selected.</p></td></tr><tr id="e4711871" class="ijRowEven"><td id="b3d9c4f5"><p id="c4c124cc">Reduce test failure feedback time</p></td><td id="6fdcf82a"><p id="15867328">Use following two options to instruct TeamCity to run some tests before others.</p><aside class="tip sideblock" data-title="" rel="15867328" id="8b872a23"><p id="9881f4c7">Tests reordering works the following way: TeamCity provides tests that should be run first (test classes), after that when a JUnit task starts, it checks whether it includes these tests. If at least one test is included, TeamCity generates a new fileset containing included tests only and processes it before all other filesets. It also patches other filesets to exclude tests added to the automatically generated fileset. After that JUnit starts and runs as usual.</p></aside></td></tr><tr id="28b1d20c" class="ijRowOdd"><td id="e0f0ffc0"><p id="1052b4aa">Run recently failed tests first</p></td><td id="97e05ed4"><p id="e3989acd">If checked, in the first place TeamCity will run tests failed in previous finished or running builds as well as tests having high failure rate (a so called <i id="ed425ac3">blinking</i> tests)</p></td></tr><tr id="81df6164" class="ijRowEven"><td id="5d0148ee"><p id="e68f2813">Run new and modified tests first</p></td><td id="ee95e03b"><p id="abe48987">If checked, before any other test, TeamCity will run tests added or modified in change lists included in the running build.</p><aside class="note " data-title="" rel="abe48987" id="6aea2dc5"><p id="0d2dbd8a">If both options are enabled at the same time, tests of the <b id="c94cdbe9">new and modified tests</b> group will have higher priority, and will be executed in the first place.</p></aside></td></tr><tr id="666caff4" class="ijRowOdd"><td id="fe51a1a6"><p id="4834f8f5">Verbose Ant</p></td><td id="041852b6"><p id="05b1b227">Check this option, if the generated JUnit task has to produce verbose output in ant terms.</p></td></tr></tbody></table></div></div><a name="CodeCoverage"></a><a name="Code-Coverage"></a><div class="chapter"><h2 id="Ipr(deprecated)-CodeCoverage">Code Coverage</h2><p id="eb406646">To learn about configuring code coverage options, refer to the <a href="configuring-java-code-coverage.html">Configuring Java Code Coverage</a> page.</p><hr id="6d21b12b"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>