<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>生成工件-帮助|团队城市</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Build Artifact" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/concepts.md|Concepts/build-artifact.md|Build Artifact" data-main-title="Build Artifact" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/build-artifact.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="build-artifact.md" data-toc="Build Artifact">建立神器</h1><p id="af4cf66b">TeamCity包含一个集成的轻量级构建工件存储库。工件存储在<a href="configuring-artifacts-storage.html#Built-in-Artifacts-Storage">服务器可访问的文件系统上</a>或<a href="configuring-artifacts-storage.html#External-Artifacts-Storage">外部存储上</a> 。</p><p id="6d721cc8"><i id="a1f256d9">构建工件</i>是由构建产生的文件。通常，这些文件包括分发程序包，WAR文件，报告，日志文件等。创建构建配置时，可以在“ <a href="configuring-general-settings.html#Artifact-Paths">配置常规设置”</a>页面上指定构建工件的路径。</p><p id="671801e5">构建完成后，TeamCity根据指定的<a href="configuring-general-settings.html#Artifact-Paths">构件路径或路径模式</a>在构建<a href="build-checkout-directory.html">签出目录中</a>搜索构件。然后，将匹配文件上载（“发布”）到TeamCity服务器，在该服务器上可通过Web UI下载这些匹配文件，或使用<a href="dependent-build.html#Artifact-Dependency">工件依赖项</a>将其用于其他构建中。您可以<a href="configuring-general-settings.html#publish-artifacts">选择发布工件的时间</a> ：对于所有完成的构建，仅对于成功的构建，或者对于所有构建，甚至是中断的构建。</p><p id="72703378">要下载构建的<a href="working-with-build-results.html#Build-Artifacts">工件</a> ，请转到构建结果页面的<a href="working-with-build-results.html#Build-Artifacts">工件</a>选项卡或使用工件图标。 <img alt="artifactIcon.png" title="artifactIcon.png" src="/help/img/teamcity/2019.1/artifactIcon.png" id="da09c4ed" width="16" height="17" class="inline-icon-16">在项目或构建配置的“ <b id="b54b674a">概述”</b>页面以及列出构建的TeamCity页面上可用。<br>如果工件存储为档案，您仍然可以浏览该档案中的文件。</p><p id="6aecc759">您可以按照<a href="patterns-for-accessing-build-artifacts.html">访问构建工件</a>的<a href="patterns-for-accessing-build-artifacts.html">模式</a>部分中所述自动执行工件下载。</p><p id="85d15852">对于内置存储，TeamCity将工件保存在磁盘上的目录结构中，可以直接访问（例如，通过配置操作系统以通过网络共享目录）。存储格式在<a href="teamcity-data-directory.html#artifacts">TeamCity Data Directory中进行了</a>描述。工件被“原样”存储在服务器上，而没有额外的压缩。默认情况下，工件存储在< <a href="teamcity-data-directory.html">TeamCity数据目录</a> > / system / artifacts目录下，该目录<a href="teamcity-configuration-and-maintenance.html">可以更改</a> 。<br>您可以<a href="configuring-artifacts-storage.html#External-Artifacts-Storage">配置外部工件</a>存储来替换内置的<a href="configuring-artifacts-storage.html#External-Artifacts-Storage">工件</a>存储。</p><p id="3340079c">构建构件也可以在构建仍在运行时上载到服务器。为了指示TeamCity上传工件，应该修改构建脚本以发送<a href="build-script-interaction-with-teamcity.html#Publishing-Artifacts-while-the-Build-is-Still-in-Progress">服务消息</a> 。</p><a name="HiddenArtifacts"></a><a name="Hidden-Artifacts"></a><h3 id="BuildArtifact-HiddenArtifacts">隐藏的文物</h3><p id="9fec99d9">除了用户定义的构件外，TeamCity还生成并发布一些构件以供内部使用。这些被称为隐藏文物。<br>例如，对于Maven构建，TeamCity创建<code class="code">maven-build-info.xml</code>该文件包含在构建过程中收集的特定于Maven的数据。然后，文件的内容用于在生成结果中的“ Maven生成信息”选项卡上可视化Maven数据。</p><ul class="list _ul"><li class="list__item" id="d86ef4f4"><p>隐藏的文物放置在<code class="code">.teamcity</code>目录位于构建工件的根目录中。</p></li><li class="list__item" id="5608270f"><p>默认情况下，隐藏的工件未在构建结果的“ <b id="f17e3265">工件”</b>选项卡上列出。但是，在工件列表下方有一个链接，允许您查看隐藏的工件（如果有）。显示隐藏的工件时，单击“ <i id="0a655fe6">全部下载”</i>链接将导致下载所有工件，包括隐藏的工件。</p></li><li class="list__item" id="4b5d3591"><p>工件依赖项不会下载隐藏的工件，除非它们明确具有“ <code class="code">.teamcity</code>在模式中。</p></li><li class="list__item" id="275c59e2"><p>除非“”，否则工件清除不会删除隐藏的工件。 <code class="code">teamcity</code> ”已在模式中明确指定。</p></li></ul><p id="795f4be5">您可以配置发布一些构建工件<code class="code">.teamcity</code>目录以使其隐藏。</p><p id="9b861928">一些隐藏的工件是：</p><ul class="list _ul"><li class="list__item" id="8f62625b"><p><code class="code">maven-build-info.xml.gz</code> – Maven构建数据。用于在“ <b id="abc5d9d8">Maven构建信息”</b>构建的选项卡上显示数据。</p></li><li class="list__item" id="16eb99df"><p><code class="code">properties</code>目录–包含为代理上的构建计算的属性。在构建之前和之后都有一些实际属性。这些显示在构建“ <b id="6ff471c7">属性”</b>选项卡上。</p></li><li class="list__item" id="fb71a6ca"><p><code class="code">.NETCoverage</code> –原始.NET Coverage数据（例如，用于在VS加载项中打开dotCover数据）。</p></li><li class="list__item" id="443430cd"><p><code class="code">coverage_idea</code> –原始IntelliJ IDEA覆盖率数据（例如，用于在IDEA中打开覆盖率）。</p></li></ul><a name="ArtifactsCacheonAgent"></a><a name="Artifacts-Cache-on-Agent"></a><h4 id="BuildArtifact-ArtifactsCacheonAgent">代理上的工件缓存</h4><p id="75c3222e">由构建发布的所有工件都存储在代理程序的工件缓存中。 <code class="code"><Build Agent home>\system\.artifacts_cache</code>目录，在某些情况下有助于加快工件依赖关系。<br>但是，根据工件， <a href="clean-up.html">清理</a>和其他设置的大小，工件缓存可能会导致代理上的磁盘空间不足。您可以<a href="free-disk-space.html#Configuring-artifacts-cache">配置</a>将已发布的工件存储在代理程序缓存中。</p><hr id="aa786cb7"><p id="d3f1b038"><b id="9b6177a9">也可以看看：</b></p><p id="0bf79f48"><b id="54c4d0b3">概念</b> ： <a href="dependent-build.html">依赖构建</a><br><b id="bfca1dab">管理员指南</b> ： <a href="configuring-general-settings.html">配置常规设置</a> | <a href="configuring-dependencies.html">配置依赖项</a> <a href="patterns-for-accessing-build-artifacts.html">访问构建工件的模式</a></p><hr id="b777dc3d"></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>