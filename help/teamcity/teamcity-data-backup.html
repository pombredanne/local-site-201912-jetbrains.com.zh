<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>TeamCity Data Backup - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="TeamCity Data Backup" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/teamcity-configuration-and-maintenance.md|TeamCity Configuration and Maintenance/teamcity-data-backup.md|TeamCity Data Backup/creating-backup-from-teamcity-web-ui.md|Creating Backup from TeamCity Web UI/creating-backup-via-maintaindb-command-line-tool.md|Creating Backup via maintainDB command-line tool/manual-backup-and-restore.md|Manual Backup and Restore/backing-up-build-agent-s-data.md|Backing up Build Agent's Data/restoring-teamcity-data-from-backup.md|Restoring TeamCity Data from Backup" data-main-title="TeamCity Data Backup" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/teamcity-data-backup.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="TeamCity Data Backup" id="teamcity-data-backup.md">TeamCity Data Backup</h1><p id="2ff85e9e">TeamCity provides several ways to back up its data:</p><ul class="list _ul"><li class="list__item" id="6ca3e319"><p><a href="creating-backup-from-teamcity-web-ui.html">Backup from the Web UI</a>: an action in the web UI (can also be triggered via <a href="rest-api.html#Data-Backup">REST API</a>) to create a backup while the server is running. It is recommended for regular maintenance backups. Some limitations on the backed up data apply (see the <a href="#Backing-up-Data">related section</a> below). This option is also available on upgrade in the maintenance screen - on the first start of a newer version of the TeamCity server.</p></li><li class="list__item" id="6c53bb03"><p><a href="creating-backup-via-maintaindb-command-line-tool.html">Backup via maintainDB command-line tool</a>: Same as via the UI. To include all data, use the tool when the server <a href="creating-backup-via-maintaindb-command-line-tool.html#Performing-TeamCity-Data-Backup-with-maintainDB-Utility">is stopped</a>.</p></li><li class="list__item" id="fb7ad64a"><p><a href="manual-backup-and-restore.html">Manual backup</a>: is suitable if you want to manage the backup procedure manually.</p></li><li class="list__item" id="846dae9a"><p>You may need <a href="backing-up-build-agent-s-data.html">to back up the build agent's data</a> only.</p></li></ul><p id="a8cab9d2"><b id="73cc6dcf"><a href="restoring-teamcity-data-from-backup.html">Restoring data from backup</a></b> is performed using the <code class="code">maintainDB</code> tool.</p><aside class="note " data-title="" rel="a8cab9d2" id="7314b6b1"><p id="4f1ff23f">We strongly urge you to make the backup of TeamCity data before upgrading. Note that TeamCity server <b id="515e0842">does not support downgrading</b>.</p></aside><a name="BackingupData"></a><a name="Backing-up-Data"></a><div class="chapter"><h2 id="TeamCityDataBackup-BackingupData">Backing up Data</h2><p id="ee6145db">TeamCity <b id="38b33791">allows backing up</b> the following data:</p><ul class="list _ul"><li class="list__item" id="df4826c2"><a href="manual-backup-and-restore.html#Database-Data">Data stored in the database</a></li><li class="list__item" id="603ae8cb"><p>Server settings, settings of projects and builds configurations (everything stored in <code class="code">&lt;</code><a href="teamcity-data-directory.html"><code class="code">TeamCity Data Directory</code></a><code class="code">&gt;/config</code>)</p></li><li class="list__item" id="cb7c9339"><p>Custom plugins (installed under <code class="code">&lt;</code><a href="teamcity-data-directory.html"><code class="code">TeamCity Data Directory</code></a><code class="code">&gt;\plugins</code>) and and database drivers (from <code class="code">&lt;</code><a href="teamcity-data-directory.html"><code class="code">TeamCity Data Directory</code></a><code class="code">&gt;/lib</code> directory)</p></li><li class="list__item" id="9e090900"><p>Supplementary data: settings history, triggers states, plugins data, and so on (everything under the <code class="code">&lt;</code><a href="teamcity-data-directory.html"><code class="code">TeamCity Data Directory</code></a><code class="code">&gt;/system/pluginData</code> directory)</p></li><li class="list__item" id="1337d10f"><p>Build logs</p></li><li class="list__item" id="92a4c421"><p>Personal changes</p></li></ul><p id="b31b5513">The data to be backed up can be configured using the backup scope options when using the <a href="creating-backup-from-teamcity-web-ui.html">TeamCity Web UI</a> or via additional parameters for the <a href="creating-backup-via-maintaindb-command-line-tool.html">maintainDB command-line tool</a>.</p><p id="dfec397e">The following data is <b id="c3f3b73e">not included</b> into backup:</p><ul class="list _ul"><li class="list__item" id="ef3d2cef"><p><b id="08e8287c">build artifacts</b> (because of their size). These include explicit build artifacts and internal artifacts storing coverage report, finish build parameters, settings digest, and so on. If you need the build artifacts, please also back up the contents of <a href="teamcity-configuration-and-maintenance.html">artifacts directories</a> manually.</p></li></ul><ul class="list _ul"><li class="list__item" id="b1947197"><p>for backup taken from UI: <b id="2357ef5e">running builds and build queue state</b>.  If you want to back up these, use the command line <a href="creating-backup-via-maintaindb-command-line-tool.html">maintainDB tool</a> while the TeamCity server is not running.</p></li><li class="list__item" id="5b9c764b"><p>TeamCity application manual customizations under <code class="code">&lt;</code><a href="teamcity-home-directory.html"><code class="code">TeamCity Home</code></a><code class="code">&gt;</code>, including used server port number which are stored in <code class="code">&lt;</code><a href="teamcity-home-directory.html"><code class="code">TeamCity Home</code></a><code class="code">&gt;/conf/server.xml</code> file.</p></li><li class="list__item" id="2abc15c8"><p>TeamCity application logs (they also reside under <code class="code">&lt;</code><a href="teamcity-home-directory.html"><code class="code">TeamCity Home</code></a><code class="code">&gt;/logs</code>)</p></li><li class="list__item" id="53d39048"><p>Any manually created files under <code class="code">&lt;</code><a href="teamcity-data-directory.html"><code class="code">TeamCity Data Directory</code></a><code class="code">&gt;</code> that do not fall into previously mentioned items.</p></li></ul><p id="819a347f"><b id="6e7d892d">The recommended approach</b> is either to perform the backup process described under <a href="manual-backup-and-restore.html">Manual Backup and Restore</a> or run a backup from the <a href="creating-backup-from-teamcity-web-ui.html">web UI</a> regularly (for example, automated via <a href="rest-api.html#Data-Backup">REST API</a>) with the "Basic" level - this will ensure backing up all important data except build artifacts and build logs.</p><p id="17500255">Build artifacts and logs (if necessary) can be backed up manually by copying files under <code class="code">.BuildServer/system/artifacts</code> (prior to TeamCity 9.0 in <code class="code">.BuildServer/system/messages</code>).</p><ul class="list _ul"><li class="list__item" id="b134cbbd"><p>See <a href="teamcity-data-directory.html#artifacts">TeamCity Data Directory</a> for details.</p></li><li class="list__item" id="c2e3bb69"><p>If logs are selected for backup, TeamCity will search for them in <a href="build-artifact.html">all artifact directories</a> currently specified on the server.</p></li></ul><p id="540aadd9">Note that for large production TeamCity installations, exporting and importing of data from/to the database may not be an optimal solution and maintaining database backup via replication might be a better option; for example, see the corresponding <a href="http://dev.mysql.com/doc/refman/5.0/en/replication.html" data-external="true" target="_blank" rel="noopener noreferrer">documentation</a> for MySQL database.</p><hr id="44a6c4a8"><p id="59b12664"><b id="8d8cbe67">See also:</b></p><p id="5a344e0b"><b id="b28fa776">Installation and Upgrade</b>: <a href="upgrade.html">Upgrade</a></p><hr id="6503b1b7"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>