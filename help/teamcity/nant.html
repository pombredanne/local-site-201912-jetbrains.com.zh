<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>NAnt - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="NAnt" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-build-steps.md|Configuring Build Steps/nant.md|NAnt" data-main-title="NAnt" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/nant.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="NAnt" id="nant.md">NAnt</h1><p id="30b09bd2">TeamCity supports NAnt starting from version 0.85.</p><p id="8171a39e">On this page:</p><p id="fcb70d3f"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#NAnt-MSBuildTaskforNAnt">MSBuild Task for NAnt</a></li><li class="list__item"><a href="#NAnt-nunit2TaskforNAnt">&lt;nunit2&gt; Task for NAnt</a></li><li class="list__item"><a href="#NAnt-GeneralOptions">General Options</a></li><li class="list__item"><a href="#NAnt-CodeCoverage">Code Coverage</a></li></ul></p><aside class="note " data-title="" rel="fcb70d3f" id="b3a97b6b"><p id="774f1884">The TeamCity NAnt runner requires .NET Framework or Mono installed on the build agent.</p></aside><a name="MSBuildTaskforNAnt"></a><a name="MSBuild-Task-for-NAnt"></a><div class="chapter"><h2 id="NAnt-MSBuildTaskforNAnt">MSBuild Task for NAnt</h2><p id="1b29325c">TeamCity NAnt runner includes a task called <code class="code">msbuild</code> that allows NAnt to start MSBuild scripts. TeamCity <code class="code">msbuild</code> task for NAnt has the same set of attributes as the <a href="http://nantcontrib.sourceforge.net" data-external="true" target="_blank" rel="noopener noreferrer">NAntContrib package</a> <code class="code">msbuild</code> task. The MSBuild build processes started by NAnt will behave exactly as if they were launched by TeamCity MSBuild/SLN2005 build runner (that is <code class="code">NUnit</code> and/or <code class="code">NUnitTeamCity</code> MSBuild tasks will be added to build scripts and logs and error reports will be sent directly to the build server).</p><aside class="note " data-title="" rel="1b29325c" id="0ef47f85"><p id="cf8574c9"><code class="code">msbuild</code> task for NAnt makes all build configuration system properties available inside MSBuild script. Note, all property names will have "<code class="code">.</code>" replaced with "<code class="code">_</code>".<br>To disable this, set <code class="code">false</code> to <code class="code">set-teamcity-properties</code> attribute of the task.</p></aside><p id="3d43acbc">By default, NAnt <code class="code">msbuild</code> task checks for current value of NAnt target-framework property to select MSBuild runtime version.<br>This parameter could be overriden by setting <code class="code">teamcity_dotnet_tools_version</code> project property with required .NET Framework version, i.e. "4.0".</p><div class="code-block" data-lang="markup">...
  &lt;!-- this property enables MSBuild 4.0 --&gt;
  &lt;property name="teamcity_dotnet_tools_version" value="4.0"/&gt;
  &lt;msbuild project="SimpleEcho.v40.proj"&gt;
     ...
  &lt;/msbuild&gt;
 ...

</div><aside class="note " data-title="" rel="dcf06fd1" id="1d942dd4"><p id="f0b0b4f1">To pass properties to MSBuild, use the <code class="code">property</code> tag instead of explicit properties definition in the command line.</p></aside></div><a name="nunit2TaskforNAnt"></a><a name="-nunit2--Task-for-NAnt"></a><div class="chapter"><h2 id="NAnt-nunit2TaskforNAnt"><nunit2> Task for NAnt</h2><p id="e5381af0">To test all of the assemblies without halting on first failed test use:</p><div class="code-block" data-lang="markup">&lt;target name="build"&gt;
       &lt;nunit2 verbose="true" haltonfailure="false" failonerror="true" failonfailureatend="true"&gt;
        &lt;formatter type="Plain" /&gt;
        &lt;test haltonfailure="false"&gt;
          &lt;assemblies&gt;
            &lt;include name="dll1.dll" /&gt;
            &lt;include name="dll2.dll" /&gt;
          &lt;/assemblies&gt;
        &lt;/test&gt;
       &lt;/nunit2&gt;
&lt;/target&gt;

</div><aside class="note " data-title="" rel="2fe62613" id="68f2a12f"><p id="778ffc9c">The <code class="code">failonfailureatend</code> attribute is not defined in the original <code class="code">NUnit2</code> task from NAnt. Note that this attribute will be ignored if the <code class="code">haltonfailure</code> attribute is set to <code class="code">true</code> for either the <code class="code">nunit2</code> element or the <code class="code">test</code> element.</p></aside><p id="d2293f6c">Below you can find reference information about NAnt Build Runner fields.</p></div><a name="GeneralOptions"></a><a name="General-Options"></a><div class="chapter"><h2 id="NAnt-GeneralOptions">General Options</h2><div class="table-wrapper"><table width="100%" id="a6bd1a9b"><thead><tr id="c25dd823" class="ijRowHead"><th id="baa1dfe3"><p id="dfc860b4">Option</p></th><th id="e0371bba"><p id="8bd392de">Description</p></th></tr></thead><tbody><tr id="279f8a14" class="ijRowOdd"><td id="6161feb4"><p id="946803ed">Path to a build file</p></td><td id="639ae0f4"><p id="6c6b41c1">Specify path relative to the <a href="build-checkout-directory.html">Build Checkout Directory</a>.</p></td></tr><tr id="25bdd8e4" class="ijRowEven"><td id="8dcce9ad"><p id="371e0061">Build file content</p></td><td id="4803b1c5"><p id="8dfafccf">Select the option, if you want to use a different build script than the one listed in the settings of the build file. When the option is enabled, you have to type the build script in the text area.</p></td></tr><tr id="fd2feee7" class="ijRowOdd"><td id="f8ea3da3"><p id="9fb5bb2e">Targets</p></td><td id="9ac1a3ae"><p id="7b106d6e">Specify the names of build targets defined by the build script, separated by spaces. The available targets can be viewed in the Web UI by clicking the icon next to the field and added by checking the appropriate boxes.</p></td></tr><tr id="0c1de55b" class="ijRowEven"><td id="a8fb34ff"><p id="a714cc46">Working directory</p></td><td id="d3b13674"><p id="6f284057">Specify the path to the <a href="build-working-directory.html">Build Working Directory</a>. By default, the build working directory is set to the same path as the <a href="build-checkout-directory.html">build checkout directory</a>.</p></td></tr><tr id="85a0e89d" class="ijRowOdd"><td id="4e29b7e7"><p id="656cb2d3">NAnt home</p></td><td id="283ff951"><p id="3a60b833">Enter a path to the <code class="code">NAnt.exe</code>.</p><aside class="tip sideblock" data-title="" rel="3a60b833" id="e2bcaf08"><p id="8ba2606d">Here you can specify an absolute path to the NAnt.exe file on the agent, or a path relative to the checkout directory. Such relative path allows you to provide particular NAnt.exe file to run a build of the particular build configuration.</p></aside></td></tr><tr id="2e88ff04" class="ijRowEven"><td id="f83c5515"><p id="7c9f0381">Target framework</p></td><td id="bc311731"><p id="90c206c4">Sets <code class="code">-targetframework:</code> option to <code class="code">NAnt</code> and generates appropriate agent requirements (<i id="9084f530">mono-2.0</i> target framework will require <i id="9ef7c248">Mono</i> system property, <i id="3048e94b">net-2.0</i> â€“ <i id="2267118e">DotNetFramework2.0</i> property, and so on). Selecting unsupported in TeamCity framework (<i id="c77ac8ad">sscli-1.0</i>, <i id="199ba03c">netcf-1.0</i>, <i id="5867e93f">netcf-2.0</i>) won't impose any agent requirements.</p><aside class="warning " data-title="" rel="90c206c4" id="14268a2b"><p id="b1392e6f">This option has no effect on framework which used to run <code class="code">NAnt.exe</code>. <code class="code">NAnt.exe</code> will be launched as ordinary exe file if .NET framework was found, and through mono executable, if not.</p></aside></td></tr><tr id="ee810042" class="ijRowOdd"><td id="f31c0dbf"><p id="93cfcdf8">Command line parameters</p></td><td id="914be6bd"><p id="1a0386fe">Specify any additional parameters for <code class="code">NAnt.exe</code></p><aside class="tip sideblock" data-title="" rel="1a0386fe" id="fbf8ddcb"><p id="7be8bea6">TeamCity passes automatically to NAnt all defined <a href="configuring-build-parameters.html">Configuring Build Parameters</a>, so you do not need to specify all of the properties here via  <code class="code">-D</code> option.</p></aside></td></tr><tr id="2548662f" class="ijRowEven"><td id="371a2755"><p id="8bedd92f">Reduce test failure feedback time</p></td><td id="12547177"><p id="64f94ef2">Use following option to instruct TeamCity to run some tests before others.</p></td></tr><tr id="dfa09414" class="ijRowOdd"><td id="613b69c0"><p id="f6e6aa0e">Run recently failed tests first</p></td><td id="11299737"><p id="721f5c3e">If checked, in the first place TeamCity will run tests failed in previous finished or running builds as well as tests having high failure rate (a so called <i id="31554195">blinking</i> tests)</p></td></tr></tbody></table></div></div><a name="CodeCoverage"></a><a name="Code-Coverage"></a><div class="chapter"><h2 id="NAnt-CodeCoverage">Code Coverage</h2><p id="4e7966e2">To learn about configuring code coverage options, refer to the <a href="configuring-net-code-coverage.html">Configuring .NET Code Coverage</a> page.</p><hr id="35e71c35"><p id="f08672b1"><b id="f52f5808">See also:</b></p><p id="ff8d34ed"><b id="df1a532b">Concepts</b>: <a href="build-runner.html">Build Runner</a> | <a href="build-checkout-directory.html">Build Checkout Directory</a> | <a href="build-working-directory.html">Build Working Directory</a><br><b id="f4ed3ac3">Administrator's Guide</b>: <a href="configuring-build-parameters.html">Configuring Build Parameters</a></p><hr id="0163677d"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>