<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>NAnt-帮助|团队城市</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="NAnt" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-build-steps.md|Configuring Build Steps/nant.md|NAnt" data-main-title="NAnt" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/nant.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="nant.md" data-toc="NAnt">南特</h1><p id="30b09bd2">TeamCity从版本0.85开始支持NAnt。</p><p id="8171a39e">在此页：</p><p id="fcb70d3f"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#NAnt-MSBuildTaskforNAnt">NAnt的MSBuild任务</a></li><li class="list__item"><a href="#NAnt-nunit2TaskforNAnt"><nunit2>NAnt的任务</nunit2></a></li><li class="list__item"><a href="#NAnt-GeneralOptions">常规选项</a></li><li class="list__item"><a href="#NAnt-CodeCoverage">代码覆盖率</a></li></ul><p></p><aside class="note " rel="fcb70d3f" id="b3a97b6b" data-title=""><p id="774f1884">TeamCity NAnt运行程序要求在构建代理上安装.NET Framework或Mono。</p></aside><a name="MSBuildTaskforNAnt"></a><a name="MSBuild-Task-for-NAnt"></a><div class="chapter"><h2 id="NAnt-MSBuildTaskforNAnt">NAnt的MSBuild任务</h2><p id="1b29325c">TeamCity NAnt运行程序包含一项名为<code class="code">msbuild</code>允许NAnt启动MSBuild脚本。团队城市<code class="code">msbuild</code> NAnt的任务具有与<a href="http://nantcontrib.sourceforge.net" rel="noopener noreferrer" data-external="true" target="_blank">NAntContrib包</a>相同的属性集<code class="code">msbuild</code>任务。由NAnt启动的MSBuild构建过程的行为将与TeamCity MSBuild / SLN2005构建运行程序启动的过程完全相同（即<code class="code">NUnit</code>和/或<code class="code">NUnitTeamCity</code> MSBuild任务将添加到构建脚本和日志中，并且错误报告将直接发送到构建服务器。</p><aside class="note " rel="1b29325c" id="0ef47f85" data-title=""><p id="cf8574c9"><code class="code">msbuild</code> NAnt的任务使所有构建配置系统属性在MSBuild脚本中可用。请注意，所有属性名称都将带有“ <code class="code">.</code> “被替换为” <code class="code">_</code> ”。<br>要禁用此功能，请设置<code class="code">false</code>至<code class="code">set-teamcity-properties</code>任务的属性。</p></aside><p id="3d43acbc">默认情况下，NAnt <code class="code">msbuild</code>任务检查NAnt target-framework属性的当前值以选择MSBuild运行时版本。<br>可以通过设置覆盖此参数<code class="code">teamcity_dotnet_tools_version</code>具有所需.NET Framework版本（即“ 4.0”）的项目属性。</p><div class="code-block" data-lang="markup">...
  <!-- this property enables MSBuild 4.0 --> <property name="teamcity_dotnet_tools_version" value="4.0"></property> <msbuild project="SimpleEcho.v40.proj">...
  </msbuild> ...

</div><aside class="note " rel="dcf06fd1" id="1d942dd4" data-title=""><p id="f0b0b4f1">要将属性传递给MSBuild，请使用<code class="code">property</code>标签而不是命令行中的显式属性定义。</p></aside></div><a name="nunit2TaskforNAnt"></a><a name="-nunit2--Task-for-NAnt"></a><div class="chapter"><h2 id="NAnt-nunit2TaskforNAnt"><nunit2>NAnt的任务</nunit2></h2><p id="e5381af0">要测试所有部件而不会在第一次失败的测试中停止使用：</p><div class="code-block" data-lang="markup"><target name="build">
       <nunit2 verbose="true" haltonfailure="false" failonerror="true" failonfailureatend="true">
        <formatter type="Plain"></formatter>
        <test haltonfailure="false">
          <assemblies>
            <include name="dll1.dll"></include>
            <include name="dll2.dll"></include>
          </assemblies>
        </test>
       </nunit2>
</target>

</div><aside class="note " rel="2fe62613" id="68f2a12f" data-title=""><p id="778ffc9c">的<code class="code">failonfailureatend</code>原始属性未定义<code class="code">NUnit2</code> NAnt的任务。请注意，如果<code class="code">haltonfailure</code>属性设置为<code class="code">true</code>对于<code class="code">nunit2</code>元素或<code class="code">test</code>元件。</p></aside><p id="d2293f6c">您可以在下面找到有关NAnt Build Runner字段的参考信息。</p></div><a name="GeneralOptions"></a><a name="General-Options"></a><div class="chapter"><h2 id="NAnt-GeneralOptions">常规选项</h2><div class="table-wrapper"><table width="100%" id="a6bd1a9b"><thead><tr id="c25dd823" class="ijRowHead"><th id="baa1dfe3"><p id="dfc860b4">选项</p></th><th id="e0371bba"><p id="8bd392de">描述</p></th></tr></thead><tbody><tr id="279f8a14" class="ijRowOdd"><td id="6161feb4"><p id="946803ed">生成文件的路径</p></td><td id="639ae0f4"><p id="6c6b41c1">指定相对于<a href="build-checkout-directory.html">Build Checkout目录的</a>路径。</p></td></tr><tr id="25bdd8e4" class="ijRowEven"><td id="8dcce9ad"><p id="371e0061">建立档案内容</p></td><td id="4803b1c5"><p id="8dfafccf">如果要使用与构建文件设置中列出的脚本不同的构建脚本，请选择该选项。启用该选项后，您必须在文本区域中输入构建脚本。</p></td></tr><tr id="fd2feee7" class="ijRowOdd"><td id="f8ea3da3"><p id="9fb5bb2e">目标</p></td><td id="9ac1a3ae"><p id="7b106d6e">指定由构建脚本定义的构建目标的名称，以空格分隔。通过单击字段旁边的图标，可以在Web UI中查看可用的目标，然后选中相应的框来添加可用的目标。</p></td></tr><tr id="0c1de55b" class="ijRowEven"><td id="a8fb34ff"><p id="a714cc46">工作目录</p></td><td id="d3b13674"><p id="6f284057">指定<a href="build-working-directory.html">Build Working Directory</a>的路径。默认情况下，构建工作目录设置为与<a href="build-checkout-directory.html">构建签出目录</a>相同的路径。</p></td></tr><tr id="85a0e89d" class="ijRowOdd"><td id="4e29b7e7"><p id="656cb2d3">南特家</p></td><td id="283ff951"><p id="3a60b833">输入到的路径<code class="code">NAnt.exe</code> 。</p><aside class="tip sideblock" rel="3a60b833" id="e2bcaf08" data-title=""><p id="8ba2606d">在这里，您可以指定代理上NAnt.exe文件的绝对路径，或相对于checkout目录的路径。通过这种相对路径，您可以提供特定的NAnt.exe文件来运行特定构建配置的构建。</p></aside></td></tr><tr id="2e88ff04" class="ijRowEven"><td id="f83c5515"><p id="7c9f0381">目标框架</p></td><td id="bc311731"><p id="90c206c4">套装<code class="code">-targetframework:</code>选择<code class="code">NAnt</code>并生成适当的代理要求（ <i id="9084f530">mono-2.0</i>目标框架将需要<i id="9ef7c248">Mono</i>系统属性， <i id="3048e94b">net-2.0</i> – <i id="2267118e">DotNetFramework2.0</i>属性等等）。在TeamCity框架（ <i id="c77ac8ad">sscli-1.0</i> ， <i id="199ba03c">netcf-1.0</i> ， <i id="5867e93f">netcf-2.0</i> ）中选择不受支持的<i id="c77ac8ad">选项</i>不会施加任何代理要求。</p><aside class="warning " rel="90c206c4" id="14268a2b" data-title=""><p id="b1392e6f">此选项对以前运行的框架没有影响<code class="code">NAnt.exe</code> 。 <code class="code">NAnt.exe</code>如果找到.NET Framework，它将作为普通exe文件启动，如果没有，则通过Mono可执行文件启动。</p></aside></td></tr><tr id="ee810042" class="ijRowOdd"><td id="f31c0dbf"><p id="93cfcdf8">命令行参数</p></td><td id="914be6bd"><p id="1a0386fe">指定以下任何其他参数<code class="code">NAnt.exe</code></p><aside class="tip sideblock" rel="1a0386fe" id="fbf8ddcb" data-title=""><p id="7be8bea6">TeamCity会自动将所有已定义的<a href="configuring-build-parameters.html">Configureing Build Parameters</a>传递给NAnt，因此您无需通过此处指定所有属性。 <code class="code">-D</code>选项。</p></aside></td></tr><tr id="2548662f" class="ijRowEven"><td id="371a2755"><p id="8bedd92f">减少测试失败的反馈时间</p></td><td id="12547177"><p id="64f94ef2">使用以下选项指示TeamCity先进行一些测试。</p></td></tr><tr id="dfa09414" class="ijRowOdd"><td id="613b69c0"><p id="f6e6aa0e">首先运行最近失败的测试</p></td><td id="11299737"><p id="721f5c3e">如果选中，首先，TeamCity将运行在先前完成或正在运行的构建中失败的测试以及失败率较高的测试（所谓的<i id="31554195">闪烁</i>测试）</p></td></tr></tbody></table></div></div><a name="CodeCoverage"></a><a name="Code-Coverage"></a><div class="chapter"><h2 id="NAnt-CodeCoverage">代码覆盖率</h2><p id="4e7966e2">要了解有关配置代码覆盖率选项的信息，请参阅“ <a href="configuring-net-code-coverage.html">配置.NET代码覆盖率”</a>页面。</p><hr id="35e71c35"><p id="f08672b1"><b id="f52f5808">也可以看看：</b></p><p id="ff8d34ed"><b id="df1a532b">概念</b> ： <a href="build-runner.html">Build Runner</a> | <a href="build-checkout-directory.html">建立结帐目录</a> | <a href="build-working-directory.html">建立工作目录</a><br><b id="f4ed3ac3">管理员指南</b> ： <a href="configuring-build-parameters.html">配置构建参数</a></p><hr id="0163677d"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>