<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>SSH Agent - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="SSH Agent" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/adding-build-features.md|Adding Build Features/ssh-agent.md|SSH Agent" data-main-title="SSH Agent" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/ssh-agent.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="SSH Agent" id="ssh-agent.md">SSH Agent</h1><p id="c319fad5">The <i id="d3fab6bf">SSH Agent</i> <a href="adding-build-features.html">build feature</a> runs an SSH agent with the selected <a href="ssh-keys-management.html">uploaded SSH key</a> during a build. When your build script runs an SSH client, it uses the SSH agent with the loaded key.</p><p id="b88e6a67">Check <a href="ssh-keys-management.html">SSH Keys Management</a> for SSH key upload notes.</p><a name="AgentSetup"></a><a name="Agent-Setup"></a><div class="chapter"><h2 id="SSHAgent-AgentSetup">Agent Setup</h2><p id="ad630a8a"><i id="9e9cbc9b">TeamCity SSH Agent</i> uses a native SSH agent from the OpenSSH included with Linux and Mac OS X, so the feature works out of the box for these OSs. For Windows, OpenSSH needs to be installed (for example, as a part of CygWin, MinGW or a part of Git distribution for Windows).</p><p id="07fca48f">The SSH agent must be added to <code class="code">$PATH</code> on Unix-like OSs and to <code class="code">%PATH%</code> on Windows.</p><p id="cf313f28">For each TeamCity build agent a separate ssh agent is started, so it is possible to use this feature if several build agents are installed on the same machine.</p></div><a name="DisablingSSHhostkeychecking"></a><a name="Disabling-SSH-host-key-checking"></a><div class="chapter"><h2 id="SSHAgent-DisablingSSHhostkeychecking">Disabling SSH host key checking</h2><p id="080775d5">The first time you connect to a remote host, the SSH client asks if you want to add a remote host's fingerprint to the known hosts database at <code class="code">~/.ssh/known_hosts</code>.</p><p id="b871374a">To avoid such prompts during a build, you need to configure the known hosts database beforehand. If you trust the hosts you are connecting to, you can disable known hosts checks:</p><ul class="list _ul"><li class="list__item" id="036e104a"><p id="c326cc57">either <b id="4e67ed3e">for all connections</b> by adding something like this in <code class="code">~/.ssh/config</code>:</p><div class="code-block" data-lang="bash">Host *
    StrictHostKeyChecking no

</div></li><li class="list__item" id="f3635408"><p id="846f5388">or <b id="41f96700">for an individual command</b> by running an SSH client with the <code class="code">-o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no</code> options.</p></li></ul><p id="a5a5fe31">See more information in the man pages for <a href="http://linux.die.net/man/1/ssh" data-external="true" target="_blank" rel="noopener noreferrer">ssh</a>, <a href="http://linux.die.net/man/1/ssh-agent" data-external="true" target="_blank" rel="noopener noreferrer">ssh-agent</a> and <a href="http://linux.die.net/man/1/ssh-add" data-external="true" target="_blank" rel="noopener noreferrer">ssh-add</a> commands.</p><hr id="ac61da85"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>