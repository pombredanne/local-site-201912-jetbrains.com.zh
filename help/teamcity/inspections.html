<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Inspections - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Inspections" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-build-steps.md|Configuring Build Steps/inspections.md|Inspections" data-main-title="Inspections" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/inspections.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Inspections" id="inspections.md">Inspections</h1><p id="31d25dc3">The <b id="645a800c">Inspections (IntelliJ IDEA)</b> Build Runner is intended to run code analysis based on <a href="https://www.jetbrains.com/help/idea/2016.3/code-inspection.html" data-external="true" target="_blank" rel="noopener noreferrer">IntelliJ IDEA inspections</a> for your project. <b id="35bc4624">Since TeamCity 2017.1</b>, in addition to the bundled version, it is possible to install another version of JetBrains IntelliJ Inspections and Duplicates Engine and/or change the defaults using the <b id="a8c10b6a"><a href="installing-agent-tools.html">Administration | Tools</a></b> page.</p><p id="215ac0b9">IntelliJ IDEA's code analysis engine is capable of inspecting your Java, JavaScript, HTML, XML and other code and allows you to:</p><ul class="list _ul"><li class="list__item" id="182b64c7"><p>Find probable bugs</p></li><li class="list__item" id="be9869cc"><p>Locate "dead" code</p></li><li class="list__item" id="42d4a4b5"><p>Detect performance issues</p></li><li class="list__item" id="7efad888"><p>Improve the code structure and maintainability</p></li><li class="list__item" id="c9a87d36"><p>Ensure the code conforms to guidelines, standards and specifications</p></li></ul><p id="03eb03bd">Refer to <a href="http://www.jetbrains.com/idea/documentation/inspections.jsp" data-external="true" target="_blank" rel="noopener noreferrer">IntelliJ IDEA documentation</a> for more details.</p><aside class="note " data-title="" rel="03eb03bd" id="618b9f86"><p id="4c01d39c">To run inspections for your project, you must have IntelliJ IDEA project directory (<code class="code">.idea</code>) or project file (<code class="code">.ipr</code>) checked into your version control.<br>Note that compilation errors are not reported by inspections, so it's a good idea to run compilation step in the same build.</p></aside><aside class="note " data-title="" rel="inspections.md" id="4ff82c44"><p id="488513d2"><b id="cf35fa12">Maven projects</b></p><p id="81deddf4">The runner also supports Maven2 or above: to use <code class="code">pom.xml</code>, you need to open it in IntelliJ IDEA and configure inspection profiles as described in the <a href="https://www.jetbrains.com/help/idea/2016.3/code-inspection.html#profiles" data-external="true" target="_blank" rel="noopener noreferrer">IntelliJ IDEA documentation</a>. IntelliJ IDEA will save your inspection profiles in <a href="https://www.jetbrains.com/help/idea/2016.3/project-and-ide-settings.html#d1962322e174" data-external="true" target="_blank" rel="noopener noreferrer">the corresponding folder</a>. Make sure you have it checked into your version control. Then specify the paths to the inspection profiles while configuring this runner.</p><p id="ecba149c">It is a good idea to execute <code class="code">mvn install</code> as the step preceeding the inspecitons step in order to allow projects with dependencies to be resolved successfully.</p></aside><p id="1effe524">This page contains reference information about the following <b id="5c61157a">Inspections (IntelliJ IDEA)</b> Build Runner fields:</p><p id="3352b155"><ul class="list" data-skip-index="skip"></ul></p><a name="IntelliJIDEAProjectSettings"></a><a name="IntelliJ-IDEA-Project-Settings"></a><h3 id="Inspections-IntelliJIDEAProjectSettings">IntelliJ IDEA Project Settings</h3><div class="table-wrapper"><table width="100%" id="397e36db"><thead><tr id="1e3550d6" class="ijRowHead"><th id="5e773a98"><p id="24e3699b">Option</p></th><th id="662a78ba"><p id="c387593d">Description</p></th></tr></thead><tbody><tr id="4855f513" class="ijRowOdd"><td id="da1aa697"><p id="fc7d8c41">Project file type</p></td><td id="44156e2e"><p id="6ed54d61">To be able to run IntelliJ IDEA inspections on your code, TeamCity requires either an IntelliJ IDEA project file\directory, Maven <code class="code">pom.xml</code> or Gradle <code class="code">build.gradle</code> to be specified here.</p></td></tr><tr id="acda1514" class="ijRowEven"><td id="bc2bd8e6"><p id="f128a8ee">Path to the project</p></td><td id="877ac77d"><p id="6dcfa5cd">Depending on the type of project selected in the <b id="8790d115">Project file type</b>, specify here:</p><ul class="list _ul"><li class="list__item" id="c95ac63b"><p><b id="360adfda">For IntelliJ IDEA project</b>: the path to the project file (.ipr) or the path to the project directory the root directory of the project containing the <code class="code">.idea</code> folder).</p></li><li class="list__item" id="c8e93425"><p><b id="7f85397b">For Maven project</b>: the path to the <code class="code">pom.xml</code> file.</p></li><li class="list__item" id="bad0375c"><p><b id="7f1d71b0">For Gradle project</b>: the path to the <code class="code">.gradle</code> or <code class="code">.gradle.kts</code> file.<br>This information is required by this build runner to understand the structure of the project.</p></li></ul><aside class="tip sideblock" data-title="" rel="0ee94f3c" id="a8316bad"><p id="58031638">The specified path should be relative to the checkout directory.</p></aside></td></tr><tr id="f3d55abf" class="ijRowOdd"><td id="451821bc"><p id="e5173655">Detect global libraries and module-based JDK in the <code class="code">*.iml</code> files</p></td><td id="ec0a4d34"><p id="434926c8"><i id="3c109424">This option is available if you use an IntelliJ IDEA project to run the inspections.</i> In IntelliJ IDEA, the module settings are stored in <code class="code">*.iml</code> files, thus, if this option is checked, all the module files will be automatically scanned for references to the global libraries and module JDKs when saved. This helps ensure that all references will be properly resolved.</p><aside class="warning " data-title="" rel="434926c8" id="055fdb99"><p id="ad3d3475">When this option is selected, the process of opening and saving the build runner settings may become time-consuming, because it involves loading and parsing all project module files.</p></aside></td></tr><tr id="b242eb1e" class="ijRowEven"><td id="53b8af91"><p id="30f27084">Check/Reparse Project</p></td><td id="1c5f4ffa"><p id="a99c8bfa"><i id="3ecdfbaa">This option is available if you use an IntelliJ IDEA project to run the inspections.</i> Click this button to reparse your IntelliJ IDEA project and import the build settings right from the project, for example the list of JDKs.</p><aside class="note " data-title="" rel="a99c8bfa" id="0dd11c21"><p id="8a0aadcf">If you update your project settings in IntelliJ IDEA (for example, add new jdks, libraries), remember to update the build runner settings by clicking <b id="cef9c2f5">Check/Reparse Project</b>.</p></aside></td></tr><tr id="9f57cac7" class="ijRowOdd"><td id="61e9317a"><p id="466f3bbc">Working directory</p></td><td id="87d16ee4"><p id="ab1531d6">Enter a path to a <a href="build-working-directory.html">Build Working Directory</a> if it differs from the <a href="build-checkout-directory.html">Build Checkout Directory</a>.</p><p id="af4ca74f">Optional, specify if differs from the checkout directory.</p></td></tr></tbody></table></div><a name="UnresolvedProjectModulesandPathVariables"></a><a name="Unresolved-Project-Modules-and-Path-Variables"></a><h3 id="Inspections-UnresolvedProjectModulesandPathVariables">Unresolved Project Modules and Path Variables</h3><p id="dcb92628">This section is displayed when an IntelliJ IDEA module file (<code class="code">.iml</code>) referenced from an IntelliJ IDEA project file:</p><ul class="list _ul"><li class="list__item" id="6f65fabd"><p>cannot be found</p></li><li class="list__item" id="bf40311c"><p>allows you to enter the values of path variables used in the IPR-file.</p></li></ul><p id="0426789a">To refresh the values in this section, click <b id="ccb0ef14">Check/Reparse Project</b>.</p><div class="table-wrapper"><table width="100%" id="c8706d3b"><thead><tr id="8938dc50" class="ijRowHead"><th id="2e21346f"><p id="490e3f43">Option</p></th><th id="c7d95179"><p id="27fc5a53">Description</p></th></tr></thead><tbody><tr id="2872b926" class="ijRowOdd"><td id="9d985280"><p id="4feaca89">&lt;path_variable_name&gt;</p></td><td id="d27fd689"><p id="fe95fab2">This field appears if the project file contains path macros, defined in the Path Variables dialog of IntelliJ IDEA's Settings dialog. In <b id="7efb57be">Set value to field</b>, specify a path to the project resources to be used on different build agents.</p></td></tr></tbody></table></div><a name="ProjectSDKs"></a><a name="Project-SDKs"></a><h3 id="Inspections-ProjectSDKs">Project SDKs</h3><p id="fc5bdb7b">This section provides the list of SDKs detected in the project.</p><div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="bd5999c1"><thead><tr id="be49f9a8" class="ijRowHead"><th id="1c784d2c"><p id="7bf1f330">Option</p></th><th id="648321e7"><p id="eed99d0b">Description</p></th></tr></thead><tbody><tr id="8bbe76c2" class="ijRowOdd"><td id="c422cc75"><p id="d7af1186">JDK Home</p></td><td id="50ae218b"><p id="eeba2ff7">Use this field to specify the JDK home for the project.</p><aside class="note " data-title="" rel="eeba2ff7" id="d476d6e6"><p id="10048df8">When building with the <b id="582a3eb0">Ipr</b> runner, this JDK will be used to compile the sources of corresponding IDEA modules. For <b id="21c51ff9">Inspections</b> and <b id="f5bc49a8">Duplicate Finder</b> builds, this JDK will be used internally to resolve the Java API used in your project.<br>To run the build process, the JDK specified in the <code class="code">JAVA_HOME</code> environment variable will be used.</p></aside></td></tr><tr id="821f8605" class="ijRowEven"><td id="a00398bc"><p id="68104b6e">JDK Jar File Patterns</p></td><td id="e6b74c6c"><p id="26b8ac38">Click this link to open a text area where you can define templates for the jar files of the project JDK. Use Ant rules to define the jar file patterns. The default value is used for Linux and Windows operating systems:</p><div class="code-block" data-lang="none">jre/lib/*.jar

</div><p id="82de59f0">For Mac OS X, use the following lines:</p><div class="code-block" data-lang="none">lib/*.jar

../Classes/*.jar

</div></td></tr><tr id="78804bb9" class="ijRowOdd"><td id="33872607"><p id="1a7cbbbe">IDEA Home</p></td><td id="fd361313"><p id="fbe61dcc">If your project uses the IDEA JDK, specify the location of the IDEA home directory</p></td></tr><tr id="3b9f4a91" class="ijRowEven"><td id="b7f3f43c"><p id="8b56867c">IDEA Jar Files Patterns</p></td><td id="2f2205e7"><p id="0d79eee9">Click this link to open a text area, where you can define templates for the jar files of the IDEA JDK.</p></td></tr></tbody></table></div><aside class="note " data-title="" rel="bd5999c1" id="076bb8be"><p id="02a2ea57">You can use references to external properties when defining the values, like <code class="code">%system.idea_home%</code> or <code class="code">%env.JDK_1_3%</code>. This will add a <a href="agent-requirements.html">requirement</a> for the corresponding property.</p></aside><a name="java-param"></a><a name="JavaParameters"></a><a name="Java-Parameters"></a><h3 id="Ant-JavaParameters">Java Parameters</h3><div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="b68eaa47"><thead><tr id="a2cc38ba" class="ijRowHead"><th id="a42a2d7c"><p id="27b3da69">Option</p></th><th id="d63b4e39"><p id="c742b8b2">Description</p></th></tr></thead><tbody><tr id="6ce7de6b" class="ijRowOdd"><td id="654c43ef"><p id="2f089771">JDK</p></td><td id="1db519e2"><p id="22d9e005">Select a JDK. <a href="predefined-build-parameters.html#Defining-Java-related-Environment-Variables">This section</a> details the available options. The default is <code class="code">JAVA_HOME</code> environment variable or the agent's own Java.</p></td></tr><tr id="73743b5b" class="ijRowEven"><td id="99884445"><p id="91889fca">JDK home path</p></td><td id="7e532803"><p id="80ac7f0e"><i origin="teamcity-help" id="5a7156cb">The option is available when &lt;Custom&gt; is selected above.</i> Use this field to specify the path to your custom JDK used to run the build. If the field is left blank, the path to JDK Home is read either from the <code class="code">JAVA_HOME</code> environment variable on agent the computer, or from the <code class="code">env.JAVA_HOME</code> property specified in the <a href="build-agent-configuration.html">build agent configuration</a> file (<code class="code">buildAgent.properties</code>). If these values are not specified, TeamCity uses the Java home of the build agent process itself.</p></td></tr><tr id="ed11a6e5" class="ijRowOdd"><td id="04f0e7de"><p id="52a1d4a3">JVM command line parameters</p></td><td id="18718765"><p id="5becc22d">You can specify such JVM command line parameters, for example, <i origin="teamcity-help" id="0a1a13b3">maximum heap size</i> or parameters enabling <i origin="teamcity-help" id="9db18194">remote debugging</i>. These values are passed by the JVM used to run your build.<br>Example:</p><div class="code-block" data-lang="bash">-Xmx512m -Xms256m

</div></td></tr></tbody></table></div><a name="InspectionParameters"></a><a name="Inspection-Parameters"></a><h3 id="Inspections-InspectionParameters">Inspection Parameters</h3><p id="d8333c6e">In IntelliJ IDEA-based IDEs, the code inspections reported are configured by an <a href="http://www.jetbrains.com/idea/webhelp/code-inspection.html#d559109e437" data-external="true" target="_blank" rel="noopener noreferrer">inspection profile</a>.<br>When running the inspections in TeamCity, you can specify the inspection profile to use: first you need to configure the inspection profile in IntelliJ IDEA-based IDE and then specify it in TeamCity.</p><p id="41ffc7c2">Follow these rules when preparing inspection profiles:</p><ul class="list _ul"><li class="list__item" id="698cf24e"><p>if your inspection profile uses scopes, make sure the scopes are shared;</p></li><li class="list__item" id="156b1cc6"><p>lock the profile (this ensures that inspections present in TeamCity but not enabled in your IDEA installation will not be run by TeamCity);</p></li><li class="list__item" id="23194b97"><p>ensure the profile does not have inspections provided by plugins not included into the default IntelliJ IDEA Ultimate distribution (otherwise they will just be ignored by TeamCity);</p></li><li class="list__item" id="19651649"><p>for best results, edit the inspection profile in the IntelliJ IDEA of the same version as used by TeamCity (can be looked up in the inspection build log).</p></li></ul><p id="f33e0958">The logic of selecting an inspection profile is as follows:</p><ul class="list _ul"><li class="list__item" id="3c6bd831"><p>if the path to the inspection profile is specified, then the profile will be loaded from the file. If the loading fails, the inspection runner will fail too.</p></li><li class="list__item" id="b6f266ce"><p>if the name of the inspection profile is specified, the profile is searched for in the project's shared profiles. If there is no such profile, the inspection runner will fail.</p></li><li class="list__item" id="5563910f"><p>if neither the name nor path is specified, the default profile of the project is used.</p></li></ul><div class="table-wrapper"><table width="100%" id="b9830294"><thead><tr id="13e0638d" class="ijRowHead"><th id="8cdef387"><p id="8c804fcd">Option</p></th><th id="d44aa110"><p id="07703472">Description</p></th></tr></thead><tbody><tr id="c4a0c3e7" class="ijRowOdd"><td id="fcefeb19"><p id="48a1ff74">Inspections profile path</p></td><td id="2fdd58b9"><p id="20d53b11">Use this text field to specify the path to inspections profiles file relative to the project root directory. Use this field only if you do not want to use the shared project profile specified in "Inspections profile name".</p></td></tr><tr id="ab4b2c82" class="ijRowEven"><td id="efe6813f"><p id="e2cbca55">Inspections profile name</p></td><td id="2d6665d3"><p id="cefdee4c">Enter the name of the desired shared project profile. If the field is left blank and no profile path is specified, the default project profile will be used.</p></td></tr><tr id="6eaf628a" class="ijRowOdd"><td id="993008d1"><p id="2f772818">Include / exclude patterns:</p></td><td id="abfe205f"><p id="85d0a331">Optional, specify to restrict the sources scope to run Inspections on.</p></td></tr></tbody></table></div><p id="efd7a9fb">Include/exclude patterns are newline-delimited set of rules of the form:</p><div class="code-block" data-lang="none">[+:|-:]pattern

</div><p id="7b13fadc">where the pattern must satisfy the following rules:</p><ul class="list _ul"><li class="list__item" id="25d59d8a"><p>must end with either <code class="code">**</code> or <code class="code">*</code> (this effectively limits the patterns to only the directories level, they do not support file-level patterns);</p></li><li class="list__item" id="400ba02c"><p>references to modules can be included as <code class="code">[&lt;IDEA_module_name&gt;]/&lt;path_within_module&gt;</code>. If you have a Maven project configured, you can use Maven module's artifactId as <code class="code">&lt;IDEA_module_name&gt;</code>;</p></li><li class="list__item" id="644faa2d"><p>the configured paths are treated as relative paths within content roots of the IDEA project modules. That is, the paths should be relative to the module's roots.</p></li></ul><p id="762c8ed1">Some notes on patterns processing:</p><ul class="list _ul"><li class="list__item" id="9000e09e"><p>excludes have precedence over includes</p></li><li class="list__item" id="5a7159f2"><p>if include patterns are specified, only directories matching these patterns will be included, all other directories will be excluded</p></li><li class="list__item" id="47284241"><p>the include pattern has a special behavior (due to underlying limitations): it includes the directory specified and all the files residing directly in the directories above the one specified.</p></li></ul><p id="f958ef4e">Example:</p><div class="code-block" data-lang="none">+:testData/tables/**
-:testData/**
-:testdata/**
-:[testData]/**

</div><aside class="tip sideblock" data-title="" rel="895b9f8b" id="73331000"><p id="6d251454">For the file paths to be reported correctly, the "References to resources outside project/module file directory" option for the project and all modules should be set to "Relative" in IDEA project.</p></aside><p id="84ca15c2">For Maven inspections run, to ensure correct Java is used for the project JDK, define <code class="code">env.JAVA_HOME</code> configuration parameter pointing to the JDK to be used as the project JDK.</p><a name="GettingthesameresultsinIntelliJIDEAandTeamCityInspectionsBuild"></a><a name="Getting-the-same-results-in-IntelliJ-IDEA-and-TeamCity-Inspections-Build"></a><h3 id="Inspections-GettingthesameresultsinIntelliJIDEAandTeamCityInspectionsBuild">Getting the same results in IntelliJ IDEA and TeamCity Inspections Build</h3><p id="3f65cf6c">The code inspections reported by IntelliJ IDEA and TeamCity Java Code Inspections build depend on a number of factors. You would need to ensure equal settings in IntelliJ IDEA and the build to get the same reports. The relevant settings include:</p><ul class="list _ul"><li class="list__item" id="eb69e540"><p><a href="#Inspection-Parameters">inspections profile</a> used in IntelliJ IDEA and TeamCity build;</p></li><li class="list__item" id="3178a8b0"><p>environment-specific project dependencies (files not in version control, and so on);</p></li><li class="list__item" id="c1cb6136"><p>IDE-level settings, like defined SDKs, path variables, and so on;</p></li><li class="list__item" id="b693a37a"><p>generated files: should be present in the TeamCity agent if they are present when working with the project in IntelliJ IDEA;</p></li><li class="list__item" id="1d131b9f"><p>IntelliJ IDEA version. It is recommended to use the same IntelliJ IDEA version that is used in the TeamCity build. TeamCity bundled an installation of IntelliJ IDEA. The version is written in the Inspections build log;</p></li><li class="list__item" id="d8eadf4a"><p>the set and versions of the IntelliJ IDEA plugins that the project relies on.</p></li></ul><hr id="61dc143f"></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>