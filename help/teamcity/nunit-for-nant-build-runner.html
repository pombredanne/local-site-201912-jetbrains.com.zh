<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>NUnit for NAnt Build Runner-帮助|帮助团队城市</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="NUnit for NAnt Build Runner" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-unit-testing-and-code-coverage.md|Configuring Unit Testing and Code Coverage/net-testing-frameworks-support.md|.NET Testing Frameworks Support/nunit-support.md|NUnit Support/nunit-for-nant-build-runner.md|NUnit for NAnt Build Runner" data-main-title="NUnit for NAnt Build Runner" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/nunit-for-nant-build-runner.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="nunit-for-nant-build-runner.md" data-toc="NUnit for NAnt Build Runner">NUnit适用于NAnt Build Runner</h1><aside class="tip sideblock" rel="nunit-for-nant-build-runner.md" id="efc63887" data-title=""><p id="92c875cc">支持NUnit的版本<b id="1ff50f50"><b id="62c64aa1"><b id="74e46502"><b id="f5498c50"><b id="97679c23"><b id="c65bda19"><b id="869c94cf"><b id="85eb0a2a"><b id="fdff58b6"><b id="0465c636"><b id="486cb242"><b id="7a9cb4c2">：2.2.10，2.4.1，2.4.6，2.4.7，2.4.8，2.5.0，2.5.2，2.5.3，2.5.4，2.5.5，2.5.6，2.5。</b></b></b></b></b></b></b></b></b></b></b> <b id="c1f6daa2"><b id="286633b7"><b id="db812bcb"><b id="9c53a61d"><b id="1dce794e"><b id="b8ea2b61"><b id="e37cc5f7">7，2.5.8，2.5.9，2.5.10，2.6.0，2.6.1，2.6.2，2.6.3。</b></b></b></b></b></b></b></b></p></aside><p id="f40ccf8e">本节假设您已经拥有一个NAnt构建脚本，其中配置了<code class="code">nunit2</code>任务，并希望TeamCity跟踪测试报告，而不对现有的构建脚本进行任何更改。否则，请考虑将<a href="nunit.html">NUnit构建运行器</a>添加为构建配置的步骤之一。</p><p id="cc4a676e">跟踪通过标准在NAnt构建中定义的测试<code class="code">nunt2</code>任务，TeamCity提供了自定义<a href="http://nant.sourceforge.net/nightly/latest/help/tasks/nunit2.html" rel="noopener noreferrer" data-external="true" target="_blank">任务</a>实现，并自动替换了原始<a href="http://nant.sourceforge.net/nightly/latest/help/tasks/nunit2.html" rel="noopener noreferrer" data-external="true" target="_blank">任务</a> <code class="code"><nunit2></code>任务与自己的任务。因此，当触发构建时，TeamCity使用自己的实现来启动TeamCity NUnit Test Launcher。 <code class="code"><nunit2></code> 。这样，您就可以保留构建脚本而不进行任何更改，并在TeamCity中接收即时测试报告。</p><p id="52a2cd76">如果您不希望TeamCity替换原来的<code class="code">nunit2</code>任务，请考虑以下选项：</p><ul class="list _ul"><li class="list__item" id="31bb939a"><p>将NUnit控制台与TeamCity Addin for NUnit一起使用。</p></li><li class="list__item" id="50ca6b9a"><p>通过XML测试报告插件导入XML测试结果。</p></li><li class="list__item" id="cd61d782"><p>使用命令行TeamCity NUnit测试启动器。</p></li><li class="list__item" id="8b9ed1b3"><p>通过服务消息手动配置报告测试。</p></li><li class="list__item" id="3bd45ed7"><p>禁用<code class="code">nunit2</code>任务替换，设置<code class="code">teamcity.dotnet.nant.replaceTasks</code> <a href="configuring-build-parameters.html">系统属性</a> <code class="code">false</code> 。</p></li></ul><p id="d0f98af6">的<code class="code">nunt2</code> TeamCity中的任务实现支持可以指定为NAnt的其他选项<code class="code"><property></code> <b id="4ea440b3">生成</b>脚本中的任务，或作为“ <b id="4ea440b3">生成配置” |“</b> <b id="120b327b">系统属性”</b>下的“ <b id="120b327b">系统属性</b> ” <b id="4ea440b3">构建参数</b> 。</p><p id="95c18ff4">TeamCity支持以下选项<code class="code"><nunit2></code>任务执行：</p><div class="table-wrapper"><table width="100%" id="a0cea2c5"><thead><tr id="cf0f74b0" class="ijRowHead"><th id="1217c2a0"><p id="a06eb45b">属性</p></th><th id="0c18df09"><p id="47962653">描述</p></th></tr></thead><tbody><tr id="860f3f82" class="ijRowOdd"><td id="ac236a4c"><p id="7c7761df"><code class="code">teamcity.dotnet.nant.nunit2.failonfailureatend</code></p></td><td id="da66af2d"><p id="01e9c4ae">运行<b id="edd8a1fc">所有测试，</b>而不考虑失败的数量，如果至少一项测试失败，则失败。</p></td></tr><tr id="93bfe9e4" class="ijRowEven"><td id="27746419"><p id="b1fccf50"><code class="code">teamcity.dotnet.nant.nunit2.platform</code></p></td><td id="dd779f8d"><p id="99905ba9">为x64计算机上的.NET 2.0设置所需的运行时执行模式。支持的值为<b id="e9509f52">x86</b> ， <b id="484cb763">x64</b>和<b id="2e740fee">ANY</b> （默认值）。</p></td></tr><tr id="f88288ec" class="ijRowOdd"><td id="83811f49"><p id="d04725aa"><code class="code">teamcity.dotnet.nant.nunit2.platformVersion</code></p></td><td id="f29f5438"><p id="7bf4b055">设置所需的.NET Framework版本。支持的值是<b id="ffbd6780">v1.1</b> ， <b id="49f46976">v2.0</b> ， <b id="f31fb484">v4.0</b> 。默认值等于NAnt目标框架</p></td></tr><tr id="47a19304" class="ijRowEven"><td id="bf461e11"><p id="d7e424c0"><code class="code">teamcity.dotnet.nant.nunit2.version</code></p></td><td id="78ec3e88"><p id="e093d0b6">指定要使用的NUnit运行器版本。该值必须以以下格式指定： <code class="code">NUnit-<version></code> 。</p><p id="ac17ad4c">可能在代理计算机上安装了多个版本的NUnit并在构建中使用它们中的任何一个。</p></td></tr><tr id="abb03e6d" class="ijRowOdd"><td id="25674a84"><p id="8856f43d"><code class="code">teamcity.dotnet.nant.nunit2.addins</code></p></td><td id="70095f1c"><p id="386d8871">指定用于NAnt构建运行器的第三方NUnit加载项列表。</p></td></tr><tr id="7fbdf09f" class="ijRowEven"><td id="fd339f5c"><p id="ca1b0e70"><code class="code">teamcity.dotnet.nant.nunit2.runProcessPerAssembly</code></p></td><td id="d967ed89"><p id="11d4d7c8">如果要在新进程中运行每个程序集，请设置<b id="5eb0cb47">true</b> 。</p></td></tr></tbody></table></div><p id="02aadfc5">TeamCity NUnit测试启动器将在.NET Framework中运行测试，该测试由NAnt目标框架指定，即在.NET Framework 1.1、2.0或4.0运行时上。TeamCity还支持以下测试类别<code class="code"><nunit2></code>任务。</p><aside class="note " rel="02aadfc5" id="7ff7a011" data-title=""><p id="8831d798">将列出的属性添加到NAnt构建脚本使其成为TeamCity依赖的。为避免这种情况，请在“ <b id="eab5dc31">构建配置”</b>下将属性指定为“ <b id="5febb250">系统属性</b> ”，或考虑添加<code class="code"><if></code>任务。</p></aside><aside class="tip sideblock" rel="nunit-for-nant-build-runner.md" id="ed7c004e" data-title=""><p id="191c4000">如果您需要TeamCity测试运行程序来支持第三方NUnit插件，请参阅“ <a href="nunit-addins-support.html">NUnit插件支持”</a>部分以获取详细信息。</p></aside><a name="Examples"></a><a name="Examples"></a><h3 id="NUnitforNAntBuildRunner-Examples">例子</h3><p id="a7a44b9e">在.NET 2.0上，启动测试在x64模式下形成单个程序集文件。</p><div class="code-block" data-lang="markup"><property name="teamcity.dotnet.nant.nunit2.platform" value="x64"></property>
<nunit2>
    <formatter type="Plain"></formatter>
    <test assemblyname="MyProject.Tests.dll"></test>
</nunit2>

</div><p id="2495a513">运行类别C1中的所有测试，但不运行C2。</p><div class="code-block" data-lang="markup"><nunit2 verbose="true" haltonfailure="false" failonerror="true">
         <formatter type="Plain"></formatter>
          <test>
            <assemblies>
              <include name="dll.dll"></include>
            </assemblies>
            <categories>
               <include name="C1"></include>
               <exclude name="C2"></exclude>
            </categories>
          </test>
        </nunit2>

</div><p id="536879f5">在NUnit上明确指定用于运行测试的版本。<br>注意，在这种情况下，以下属性应<b id="f4e0a219">前</b>的加<code class="code">nunit2</code>任务调用。</p><div class="code-block" data-lang="markup"><property name="teamcity.dotnet.nant.nunit2.version" value="NUnit-2.4.10"></property>
<nunit2> <!--....--> </nunit2>

</div><hr id="bae952b6"></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>