<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Build Agent-帮助|团队城市</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Build Agent" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/concepts.md|Concepts/build-agent.md|Build Agent" data-main-title="Build Agent" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/build-agent.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="build-agent.md" data-toc="Build Agent">建立代理</h1><p id="2dcf35f1">TeamCity <i id="4e22acfc">Build Agent</i>是一款软件，可侦听TeamCity服务器的命令并启动实际的构建过程。它是<a href="setting-up-and-running-additional-build-agents.html">与</a> TeamCity服务器分开<a href="setting-up-and-running-additional-build-agents.html">安装和配置的</a> 。代理可以与服务器安装在同一台计算机上，也可以安装在另一台计算机上（出于服务器性能的考虑，后者是首选设置）；代理可以运行与TeamCity服务器相同的操作系统（OS），也可以运行其他操作系统。</p><p id="90358591"></p><ul class="list" data-skip-index="skip"></ul><p></p><p id="aedf8fda">TeamCity构建代理包含<a href="configuring-build-agent-startup-properties.html">两个过程</a> ：</p><ul class="list _ul"><li class="list__item" id="6de1c01c"><p>代理启动器-启动代理进程的Java进程</p></li><li class="list__item" id="ce78f7a4"><p>代理-构建代理的主要过程；作为代理启动器的子进程运行</p></li></ul><p id="242e8138">代理通常签出源代码，下载其他构建的工件并运行构建过程。代理一次可以运行一个构建。代理程序的数量基本上限制了并行构建的数量以及运行构建过程的环境。<br>代理可以运行任何兼容版本配置的版本。</p><p id="3a4670fc">TeamCity服务器监视所有连接的代理，并根据<a href="agent-requirements.html">兼容性要求</a> ， <a href="agent-pools.html">代理池</a> ，为代理配置的构建配置限制以及<a href="build-queue.html">此处</a>介绍的选择算法，将排队的构建分配给<a href="agent-pools.html">代理</a> 。</p><a name="BuildAgentStatus"></a><a name="Build-Agent-Status"></a><h3 id="BuildAgent-BuildAgentStatus">Build Agent状态</h3><p id="8511c215">在TeamCity中，构建代理可以具有以下状态：</p><div class="table-wrapper"><table width="100%" id="f94dfab7"><thead><tr id="2d5b19df" class="ijRowHead"><th width="200" id="fa7f498f"><p id="ce9ad00e">状态</p></th><th id="efa7fda1"><p id="fb5193df">描述</p></th></tr></thead><tbody><tr id="20c99792" class="ijRowOdd"><td id="a62adbea"><p id="90a242b9"><b id="7b7875b0">连接/断开</b></p></td><td id="4f912955"><p id="28330c89">如果代理在TeamCity服务器上注册并响应服务器命令，则该代理已连接，否则将<b id="2a687447">断开连接</b> 。此状态是自动确定的。</p></td></tr><tr id="b51d80f8" class="ijRowEven"><td id="025c9ecf"><a name="agent-authorization"></a><a name="BuildAgent-agent-authorization"></a><p id="dd27388e"><b id="4a8e4238">授权/未授权</b></p></td><td id="60305171"><p id="2b19acdf">代理是通过“ <b id="4b6b6fae">代理”</b>页面上的Web UI手动授权的（ <a href="teamcity-integration-with-cloud-solutions.html">云集成</a>启动的计算机中的代理除外）。只有授权的构建代理才能运行构建。任何给定时间的授权代理数量不能超过在服务器上输入的<a href="licensing-policy.html#Number-of-Agents">代理许可证</a>数量。当代理未经授权时，将释放许可证，并可以授权其他构建代理。购买额外的许可证以增加可以同时运行内部版本的代理数量。第一次在服务器上注册新代理时，默认情况下<b id="236d291b">未经授权</b> ，因此需要人工授权才能运行构建。</p><p id="8d409dfe">如果将构建代理与TeamCity构建服务器安装在同一计算机上并在同一计算机上运行，则将自动对其进行授权。</p></td></tr><tr id="adcb95e5" class="ijRowOdd"><td id="7d79c6db"><a name="enable-agent"></a><a name="BuildAgent-enable-agent"></a><p id="25b08448"><b id="96c7d815">启用/禁用</b></p></td><td id="09a0caf8"><p id="db762dc4">可通过<a href="build-agents-configuration-and-maintenance.html#Enabling/Disabling-Agents-via-UI">Web UI</a>手动启用/禁用代理。 TeamCity服务器仅将内部版本分发给已启用的代理。</p><p id="a018ec6e">禁用代理不会影响（停止）代理上当前正在运行的构建。</p><p id="479fe52b">将构建分配给特殊代理后， <b id="173c89d2">禁用的</b>代理仍可以运行构建（例如，通过<a href="triggering-a-custom-build.html">触发自定义构建</a> ）。此功能通常用于从构建网格中临时删除代理以调查特定于代理的问题。</p></td></tr></tbody></table></div><p id="dcdff1e2">连接到服务器的所有代理必须具有唯一的代理名称。</p><p id="42d5af4d">只有具有特定角色的用户才能管理代理。有关更多信息，请参见<a href="role-and-permission.html">角色和权限</a> 。</p><p id="a5a1d7d3">有关构建代理配置，请参阅“ <a href="build-agent-configuration.html">构建代理配置”</a>部分。</p><a name="AgentUpgrade"></a><a name="Agent-Upgrade"></a><h3 id="BuildAgent-AgentUpgrade">代理升级</h3><p id="6bc45a1d">必要时会自动升级TeamCity代理。该过程涉及从TeamCity服务器下载新的代理文件，然后在新文件上重新启动代理。为了成功完成此操作，代理在其帐户下运行的用户应具有<a href="setting-up-and-running-additional-build-agents.html#Necessary-OS-and-environment-permissions">足够的</a>权限。</p><p id="bc4a460e">通常，在以下情况下会发生代理升级：</p><ul class="list _ul"><li class="list__item" id="9032e558"><p>服务器已<a href="upgrade.html#Upgrading-TeamCity-Server">升级</a></p></li><li class="list__item" id="36c06e53"><p>在服务器上<a href="installing-additional-plugins.html">添加</a>或<a href="https://plugins.jetbrains.com/docs/teamcity/plugins-packaging.html#PluginsPackaging-AgentUpgradeonUpdatingPlugins" rel="noopener noreferrer" data-external="true" target="_blank">更新</a>了代理插件</p></li><li class="list__item" id="7dde5614"><a href="installing-agent-tools.html">安装了新工具</a></li></ul><hr id="3b0df22f"><p id="4e1bef69"><b id="b0cf64a8">也可以看看：</b></p><p id="dccd85b0"><b id="6794f965">概念</b> ： <a href="build-grid.html">构建网格</a> | <a href="agent-work-directory.html">代理商工作目录</a> | <a href="role-and-permission.html">角色和权限</a><br><b id="2952c81f">安装和升级</b> ： <a href="installation.html#Install-Additional-Build-Agents">安装和运行Build Agent</a> | <a href="setting-up-and-running-additional-build-agents.html">设置并运行其他构建代理</a><br><b id="40712102">管理员指南</b> ： <a href="agent-pools.html">代理程序池</a> | <a href="assigning-build-configurations-to-specific-build-agents.html">将构建配置分配给特定的构建代理</a> | <a href="licensing-policy.html">许可政策</a></p><hr id="b0986b38"></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>