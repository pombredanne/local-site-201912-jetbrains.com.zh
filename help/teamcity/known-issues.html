<html lang="en-US"  xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');</script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>已知问题-帮助|团队城市</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Known Issues" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/troubleshooting.md|Troubleshooting/known-issues.md|Known Issues" data-main-title="Known Issues" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/known-issues.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="known-issues.md" data-toc="Known Issues">已知的问题</h1><p id="2f04bf5b">此页面包含TeamCity中已知问题的变通办法列表。</p><p id="99b0d5be"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#KnownIssues-AgentrunningasWindowsServiceLimitations">代理作为Windows服务限制运行</a><ul class="list _bullet"><li class="list__item"><a href="#KnownIssues-Security-relatedissues">与安全相关的问题</a></li><li class="list__item"><a href="#KnownIssues-Windowsservicelimitations">Windows服务限制</a><ul class="list _bullet"><li class="list__item"><a href="#KnownIssues-IssueswithautomatedGUIandbrowsertesting">自动化GUI和浏览器测试的问题</a></li><li class="list__item"><a href="#KnownIssues-RunningautomatedGUItestsandusingRDP">运行自动化GUI测试并使用RDP</a></li><li class="list__item"><a href="#KnownIssues-Issueswith.NETSelenium">.NET Selenium的问题</a></li></ul></li><li class="list__item"><a href="#KnownIssues-Earlystartoftheservicebeforeotherresourcesareinitialized">在初始化其他资源之前提早启动服务</a></li></ul></li><li class="list__item"><a href="#KnownIssues-java.lang.OutOfMemoryError:unabletocreatenewnativethreaderror">java.lang。OutOfMemoryError：无法创建新的本机线程错误</a></li><li class="list__item"><a href="#KnownIssues-ClearingBrowserCahes">清除浏览器缓存</a></li><li class="list__item"><a href="#KnownIssues-LoggingwithLog4jinYourTests">在测试中使用Log4j记录</a></li><li class="list__item"><a href="#KnownIssues-AgentServiceCanExitonUserLogoutunderWindowsx64">在Windows x64下用户注销时代理服务可以退出</a></li><li class="list__item"><a href="#KnownIssues-FailedBuildCanbeReportedasaSuccessfulOneWithMaven2.0.7">使用Maven 2.0.7可以将失败的构建报告为成功的构建</a></li><li class="list__item"><a href="#KnownIssues-ConflictingSoftware">冲突软件</a></li><li class="list__item"><a href="#KnownIssues-Subversionissues">颠覆问题</a><ul class="list _bullet"><li class="list__item"><a href="#KnownIssues-svn:E175002:Receivedfatalalert:badrecordmac">svn：E175002：收到致命警报：bad_record_mac</a></li><li class="list__item"><a href="#KnownIssues-Subversion-relatedJVMCrashes">与Subversion相关的JVM崩溃</a></li></ul></li><li class="list__item"><a href="#KnownIssues-NUnit2.4.6Performance">NUnit 2.4.6性能</a></li><li class="list__item"><a href="#KnownIssues-StarTeamPerformance">星际联盟绩效</a></li><li class="list__item"><a href="#KnownIssues-Perforce2009.2PerformanceonWindows">Windows上的Perforce 2009.2性能</a></li><li class="list__item"><a href="#KnownIssues-Wrongtimesforbuildscheduledtriggering(Timezoneissues)">构建计划的触发时间错误（时区问题）</a></li><li class="list__item"><a href="#KnownIssues-UpgradingIntelliJIDEAMayAffectActivePre-TestedCommits">升级IntelliJ IDEA可能会影响活动的预测试提交</a></li><li class="list__item"><a href="#KnownIssues-OtherJavaApplicationsRunningontheSameServer">在同一服务器上运行的其他Java应用程序</a></li><li class="list__item"><a href="#KnownIssues-TheServerDoesNotStartClaimingtheDatabaseisinUse">服务器没有开始声明数据库正在使用中</a></li><li class="list__item"><a href="#KnownIssues-SlowdownloadfromTeamCityserver">从TeamCity服务器下载缓慢</a></li><li class="list__item"><a href="#KnownIssues-FailuretopublishartifactstoserverbehindIISreverseproxy">无法将工件发布到IIS反向代理后面的服务器</a></li><li class="list__item"><a href="#KnownIssues-PrereleasepackagesarenotvisibleintheTeamCityNuGetfeed">预发行包在TeamCity NuGet提要中不可见</a></li><li class="list__item"><a href="#KnownIssues-PackagesindexingisslowinTeamCityNuGetfeed">TeamCity NuGet提要中的包索引编制速度很慢</a></li><li class="list__item"><a href="#KnownIssues-SSLproblemswhenconnectingtoHTTPSfromTeamCity(handshakealert:unrecognizedname)">从TeamCity连接到HTTPS时的SSL问题（握手警报：无法识别的名称）</a></li><li class="list__item"><a href="#KnownIssues-SSLproblemsconnectingMSSQLServerandTeamCity">连接MS SQL Server和TeamCity的SSL问题</a></li><li class="list__item"><a href="#KnownIssues-DistortedConfigurationWindowDuringAgentReinstallation">重新安装代理程序时配置窗口变形</a></li><li class="list__item"><a href="#KnownIssues-WindowsDockerContainers">Windows Docker容器</a><ul class="list _bullet"><li class="list__item"><a href="#KnownIssues-InformationaboutinstalledDockerserverOSonWindowsmissingonAgent">Agent上缺少有关Windows上已安装的Docker服务器操作系统的信息</a></li><li class="list__item"><a href="#KnownIssues-LinuxDockerContainersunderWindows">Windows下的Linux Docker容器</a></li><li class="list__item"><a href="#KnownIssues-ProblemswithalocaltimeinWindowscontainers">Windows容器中的本地时间问题</a></li><li class="list__item"><a href="#KnownIssues-" accessisdenie="or" accesstothepathisdenie="problemoncontainerstart" ="">容器启动时出现“访问被拒绝”或“对路径的访问被拒绝”问题</a></li></ul></li><li class="list__item"><a href="#KnownIssues-dotCoverdoesnotsupportWindowsNanoServer">dotCover不支持Windows Nano Server</a></li><li class="list__item"><a href="#KnownIssues-Xcode10isunabletocleanartifactsincustomoutputdirectory">Xcode 10无法清除自定义输出目录中的工件</a></li><li class="list__item"><a href="#KnownIssues-IssuesperTeamCityversions">每个TeamCity版本的问题</a><ul class="list _bullet"><li class="list__item"><a href="#KnownIssues-2019.1.4KnownIssues">2019.1.4已知问题</a><ul class="list _bullet"><li class="list__item"><a href="#KnownIssues-UnavailableDefaultCredentialProviderChainoptionforAmazonECR">Amazon ECR的不可用默认凭证提供者链选项</a></li><li class="list__item"><a href="#KnownIssues-MissingpackagesinNuGetfeed">NuGet提要中缺少软件包</a></li></ul></li></ul></li></ul><p></p><a name="AgentrunningasWindowsServiceLimitations"></a><a name="Agent-running-as-Windows-Service-Limitations"></a><div class="chapter"><h2 id="KnownIssues-AgentrunningasWindowsServiceLimitations">代理作为Windows服务限制运行</h2><p id="67cb2dff">当TeamCity构建代理作为Windows服务安装时，在构建过程中可能会出现各种“权限被拒绝”或“访问被拒绝”错误，请参见下面的详细信息。</p><a name="Security-relatedissues"></a><a name="Security-related-issues"></a><div class="chapter"><h3 id="KnownIssues-Security-relatedissues">与安全相关的问题</h3><p id="e6a4f566">服务所使用的用户帐户必须具有足够的权限才能执行构建和<a href="setting-up-and-running-additional-build-agents.html">管理服务</a> 。如果您在SYSTEM帐户下运行TeamCity代理服务，请执行以下操作：</p><ol class="list _decimal"><li class="list__item" id="f9057e0c"><p><a href="setting-up-and-running-additional-build-agents.html#Changing-Communication-Protocol">更改</a> SYSTEM为具有授予必要权限的普通用户帐户。</p></li><li class="list__item" id="35a202c3"><p>重新启动服务。</p></li></ol></div><a name="Windowsservicelimitations"></a><a name="Windows-service-limitations"></a><div class="chapter"><h3 id="KnownIssues-Windowsservicelimitations">Windows服务限制</h3><p id="e14bfc4d">作为Windows服务，TeamCity代理和生成过程无法访问网络共享和映射的驱动器。</p><p id="f35bfd91">要克服这些限制，请<a href="setting-up-and-running-additional-build-agents.html#Starting-the-Build-Agent">通过console</a>运行TeamCity代理。</p><a name="IssueswithautomatedGUIandbrowsertesting"></a><a name="Issues-with-automated-GUI-and-browser-testing"></a><div class="chapter"><h4 id="KnownIssues-IssueswithautomatedGUIandbrowsertesting">自动化GUI和浏览器测试的问题</h4><p id="e6375b9f">这些问题包括无头运行测试的错误，TeamCity代理与Windows桌面之间的交互问题等。</p><aside class="tip sideblock" rel="e6375b9f" id="6d4dba20" data-title=""><p id="38e156d2">请注意，Windows通过mstsc访问远程计算机有一个限制：远程计算机的桌面将在RDP断开连接时被锁定，这将导致运行测试的问题。VNC协议允许您在不锁定另一台计算机的情况下对其进行远程控制。要运行GUI测试并能够使用RDP，请参阅下面的<a href="#Running-automated-GUI-tests-and-using-RDP">解决方法</a> 。</p></aside><p id="c57f2926">解决/避免这些问题：</p><ol class="list _decimal"><li class="list__item" id="935b5ebf"><p><a href="setting-up-and-running-additional-build-agents.html#Starting-the-Build-Agent">通过控制台</a>运行TeamCity代理。</p></li><li class="list__item" id="4abd63e4"><p>配置构建代理程序计算机，使其不启动锁定桌面的屏幕保护程序。</p></li><li class="list__item" id="ffadf308"><p>配置TeamCity的试剂以开始<a href="setting-up-and-running-additional-build-agents.html#Starting-the-Build-Agent">自动</a> （例如，在Windows上配置的自动用户登录开始，然后配置的TeamCity剂开始（通过agent.bat开始）上的用户登录）。</p></li></ol><p id="0741060c">对于图形测试，不能将构建代理作为服务启动，建议在用户自动登录后延迟1分钟配置构建代理的启动，例如使用<code class="code">bin\agent.bat start</code>任务计划程序中的命令并在那里配置延迟。</p></div><a name="RunningautomatedGUItestsandusingRDP"></a><a name="Running-automated-GUI-tests-and-using-RDP"></a><div class="chapter"><h4 id="KnownIssues-RunningautomatedGUItestsandusingRDP">运行自动化GUI测试并使用RDP</h4><p id="300ea780">RDP使用自己的视频驱动程序来覆盖会话中计算机视频卡中的驱动程序。将会话重定向到控制台将卸载Windows图形驱动程序。这可以通过在测试之前在构建配置中添加以下步骤来完成（以下示例适用于PowerShell，但也可以使用其他语言（DOS，Python））：</p><div class="code-block" data-lang="bash">$ sessionInfo =（（（quser $ env：USERNAME | select -Skip 1）-split'\ s +'）if（$ sessionInfo [1] -like“ rdp-tcp *”）{tscon $ sessionInfo [2] / dest：console }</div><p id="320dc0d9">在“ <code class="code">quser [current username]</code> ”中列出了该用户与该计算机的所有连接，包括控制台或图形。<br>列出为<code class="code">rdp-tcp#*</code>是远程桌面连接，可以使用“ <code class="code">tscon [connection id] /dest:console</code> ”。</p><aside class="note " rel="320dc0d9" id="779f4d82" data-title=""><p id="ace8f34f">具有永久性登录用户会话的正在运行的台式机的不受监督的计算机可能会被视为网络安全威胁，因为对其进行访问可能很难跟踪。因此，建议在与敏感公司网络资源隔离的虚拟机上（例如，在Windows域中未包括的计算机上）运行自动GUI和浏览器测试。</p></aside></div><a name="Issueswith.NETSelenium"></a><a name="Issues-with-.NET-Selenium"></a><div class="chapter"><h4 id="KnownIssues-Issueswith.NETSelenium">.NET Selenium的问题</h4><p id="31bd7ad9">当TeamCity代理作为Windows服务启动并且.NET应用程序的自动化测试使用Selenium WebDriver时，由于浏览器驱动程序的限制，测试可能会失败。作为解决方案，请考虑<a href="setting-up-and-running-additional-build-agents.html#Manual-Start">手动</a>启动代理。</p></div></div><a name="Earlystartoftheservicebeforeotherresourcesareinitialized"></a><a name="Early-start-of-the-service-before-other-resources-are-initialized"></a><div class="chapter"><h3 id="KnownIssues-Earlystartoftheservicebeforeotherresourcesareinitialized">在初始化其他资源之前提早启动服务</h3><p id="ed86f2e2">要解决此问题，请考虑使用服务设置的“ <b id="71ed23ca">自动（延迟启动）”</b>选项或配置<a href="http://youtrack.jetbrains.com/issue/TW-32987#comment=27-608269" rel="noopener noreferrer" data-external="true" target="_blank">服务依赖项</a> 。</p><p id="7657dbb7">有关更多调查步骤，请参阅“ <a href="common-problems.html#Build-works-locally-but-fails-or-misbehaves-in-TeamCity">常见问题”</a>页面。</p></div></div><a name="java.lang.OutOfMemoryError:unabletocreatenewnativethreaderror"></a><a name="java.lang.OutOfMemoryError:-unable-to-create-new-native-thread-error"></a><div class="chapter"><h2 id="KnownIssues-java.lang.OutOfMemoryError:unabletocreatenewnativethreaderror">java.lang。OutOfMemoryError：无法创建新的本机线程错误</h2><p id="1393be29">如果您的TeamCity服务器在SUSE®Linux Enterprise上运行（或使用systemd守护程序），则为<b id="b43a4bc8">java.lang。OutOfMemoryError：无法创建新的本机线程错误</b>可能是由于<a href="https://www.kernel.org/doc/Documentation/cgroup-v1/pids.txt" rel="noopener noreferrer" data-external="true" target="_blank">cgroup进程号控制器</a>功能将<a href="https://www.kernel.org/doc/Documentation/cgroup-v1/pids.txt" rel="noopener noreferrer" data-external="true" target="_blank">cgroup中的进程数</a>和线程数默认限制为512引起的。</p><p id="ea419c7c">增加TeamCity服务器上的限制（例如4096）应该可以解决此问题。</p><p id="efd0595e">另请参阅此外部过<a href="https://www.elastic.co/blog/we-are-out-of-memory-systemd-process-limits" rel="noopener noreferrer" data-external="true" target="_blank">帐</a> 。</p></div><a name="ClearingBrowserCahes"></a><a name="Clearing-Browser-Ca-hes"></a><div class="chapter"><h2 id="KnownIssues-ClearingBrowserCahes">清除浏览器缓存</h2><p id="2cd37b2f">我们的某些用户遇到了一个与Web UI相关的问题（该问题无法在其他计算机上重现），该问题与内容的缓存版本有关。如果遇到此类问题，请<a href="http://en.wikipedia.org/wiki/Wikipedia:Bypass_your_cache" rel="noopener noreferrer" data-external="true" target="_blank">清除浏览器缓存</a> ，以确保浏览器不使用内容的缓存版本。</p></div><a name="LoggingwithLog4jinYourTests"></a><a name="Logging-with-Log4j-in-Your-Tests"></a><div class="chapter"><h2 id="KnownIssues-LoggingwithLog4jinYourTests">在测试中使用Log4j记录</h2><p id="d71997d7">如果在测试中使用Log4j日志记录，则在某些情况下，您可能会错过日志中的Log4j输出。在这种情况下，请执行以下操作：</p><ul class="list _ul"><li class="list__item" id="8a9052cc"><p id="a74f2ab5">使用Log4j 1.2.12</p></li><li class="list__item" id="e6965c2c"><p id="2b66340e">对于Log4j 1.2.13+，添加<code class="code">"Follow=true"</code> Log4j配置中使用的控制台附加程序的参数：</p><div class="code-block" data-lang="bash"><appender name="CONSOLE" class="org.apache.log4j.ConsoleAppender">
  <param name="Follow" value="true">
</appender>
</div></li></ul></div><a name="AgentServiceCanExitonUserLogoutunderWindowsx64"></a><a name="Agent-Service-Can-Exit-on-User-Logout-under-Windows-x64"></a><div class="chapter"><h2 id="KnownIssues-AgentServiceCanExitonUserLogoutunderWindowsx64">在Windows x64下用户注销时代理服务可以退出</h2><p id="8c7b172f">使用的<a href="http://wrapper.tanukisoftware.org/" rel="noopener noreferrer" data-external="true" target="_blank">Java Service Wrapper</a>版本不完全支持Windows 64，这会导致代理启动器进程在用户注销时被杀死。代理本身将一直起作用，直到下一次重新启动（服务器升级或代理属性更改）为止。</p></div><a name="FailedBuildCanbeReportedasaSuccessfulOneWithMaven2.0.7"></a><a name="Failed-Build-Can-be-Reported-as-a-Successful-One-With-Maven-2.0.7"></a><div class="chapter"><h2 id="KnownIssues-FailedBuildCanbeReportedasaSuccessfulOneWithMaven2.0.7">使用Maven 2.0.7可以将失败的构建报告为成功的构建</h2><p id="ad021db3">这是此版本的Maven中的一个已知错误。考虑使用任何更高版本。<br>万一不可能，您可以打补丁<code class="code">mvn.bat</code>替换第148行的片段即可<code class="code">mvn.bat</code> ：</p><div class="code-block" data-lang="bash">：错误集ERROR_CODE = 1</div><p id="ac9c7348">与以下之一：</p><div class="code-block" data-lang="bash">：错误，如果“％OS％” ==“ Windows_NT” @endlocal设置为ERROR_CODE = 1</div></div><a name="ConflictingSoftware"></a><a name="Conflicting-Software"></a><div class="chapter"><h2 id="KnownIssues-ConflictingSoftware">冲突软件</h2><p id="8e8a103e">冲突软件的最常见指示是诸如“访问被拒绝”，“权限被拒绝”或java.io之类的错误。FileNotFoundException提及存在的文件，该文件可以由运行代理/构建的用户写入。而且，某些在后台运行的软件（例如防病毒软件）可能会大大减慢构建代理的操作，例如源签出，工件发布甚至构建运行。</p><p id="9a3bd1cd">某些防病毒软件（如Kaspersky Internet Security）可能会导致Java进程崩溃或其他无法访问文件的不良行为。例如，请参阅<a href="http://jetbrains.net/tracker/issue/TW-7138" rel="noopener noreferrer" data-external="true" target="_blank">问题</a> 。</p><p id="8cfdc21f">ESET防病毒软件还可以减慢Ant / IntelliJ IDEA项目的构建速度（减慢与代理上的localhost的TCP连接）。</p><p id="022673c4">如果您在TeamCity服务器或代理计算机上运行防病毒程序并遇到磁盘访问错误或性能下降，请在调查问题并将问题报告给JetBrains之前禁用或更好地完全卸载防病毒软件。</p><p id="64e51e58">建议从后台检查中排除整个TeamCity服务器主<a href="teamcity-data-directory.html">目录</a>和<a href="teamcity-data-directory.html">TeamCity数据目录</a> ，并在众所周知的维护窗口中进行定期检查，以免对服务器性能产生太大影响。在TeamCity代理上，建议从后台检查中排除TeamCity代理主目录。</p><p id="9f8063f1">Windows索引服务可能存在问题，因此请禁用各种索引服务。有关更多详细信息，请参见<a href="http://youtrack.jetbrains.net/issue/TW-10033#comment=27-82484" rel="noopener noreferrer" data-external="true" target="_blank">相关问题</a> 。Windows系统还原功能可能还需要禁用。</p><p id="40891284">请勿安装带有后台索引的软件，例如WinCVS，TortoiseCVS，TortoiseSVN和其他Tortoise *产品。这适用于服务器，也适用于代理（如果您使用代理端检出）。</p><p id="44d93128">Skype软件众所周知：</p><ul class="list _ul"><li class="list__item" id="4b5885dd"><p>使用系统上的端口80，因此您可能无法使用默认端口80上的TeamCity服务器。</p></li><li class="list__item" id="78349f62"><p>Internet Explorer中显示的页面布局损坏。归咎于Internet Explorer Skype插件。（ <a href="http://youtrack.jetbrains.net/issue/TW-13052" rel="noopener noreferrer" data-external="true" target="_blank">TW-13052</a> ）。</p></li></ul></div><a name="Subversionissues"></a><a name="Subversion-issues"></a><div class="chapter"><h2 id="KnownIssues-Subversionissues">颠覆问题</h2><a name="svn:E175002:Receivedfatalalert:badrecordmac"></a><a name="svn:-E175002:-Received-fatal-alert:-bad-record-mac"></a><div class="chapter"><h3 id="KnownIssues-svn:E175002:Receivedfatalalert:badrecordmac">svn：E175002：收到致命警报：bad_record_mac</h3><p id="90a2beca">添加系统属性<code class="code">-Dsvnkit.http.sslProtocols=SSLv3,TLS</code>在构建服务器上（请参阅<a href="configuring-teamcity-server-startup-properties.html">配置TeamCity Server启动属性</a> ）。<br>如果在代理上使用签出，请<a href="configuring-build-agent-startup-properties.html">在构建代理</a>上也添加此属性。</p></div><a name="Subversion-relatedJVMCrashes"></a><a name="Subversion-related-JVM-Crashes"></a><div class="chapter"><h3 id="KnownIssues-Subversion-relatedJVMCrashes">与Subversion相关的JVM崩溃</h3><p id="a5ba4685">如果JVM在执行与SVN相关的代码时崩溃（例如，在org.tmatesoft.svn软件包下），则可以尝试使用以下选项之一禁用它：</p><ul class="list _ul"><li class="list__item" id="69a27323"><p>通过<code class="code">-Dsvnkit.useJNA=false</code>崩溃进程（服务器或代理）的JVM选项</p></li><li class="list__item" id="f8e74046"><p>通过传递NTLM来降低对NTLM支持的优先级<code class="code">-Dsvnkit.http.methods=Basic,Digest,NTLM</code> JVM选项。<br>无论如何，建议将使用的JVM升级到<a href="http://java.sun.com/javase/downloads" rel="noopener noreferrer" data-external="true" target="_blank">最新的可用版本</a> 。</p></li></ul></div></div><a name="NUnit2.4.6Performance"></a><a name="NUnit-2.4.6-Performance"></a><div class="chapter"><h2 id="KnownIssues-NUnit2.4.6Performance">NUnit 2.4.6性能</h2><p id="9ad3dd11">由于NUnit 2.4.6中的问题，其性能可能比NUnit 2.4.1慢。有关其他信息，请参阅我们的问题跟踪器中的相应问题： <a href="http://www.jetbrains.net/tracker/issue/TW-4709" rel="noopener noreferrer" data-external="true" target="_blank">TW-4709</a></p></div><a name="StarTeamPerformance"></a><a name="StarTeam-Performance"></a><div class="chapter"><h2 id="KnownIssues-StarTeamPerformance">星际联盟绩效</h2><p id="4600ee14">当TeamCity和StarTeam服务器之间的连接速度较慢时，在TeamCity服务器上使用StarTeam SDK 9.0而不是StarTeam SDK 9.3可以显着提高VCS性能。</p></div><a name="Perforce2009.2PerformanceonWindows"></a><a name="Perforce-2009.2-Performance-on-Windows"></a><div class="chapter"><h2 id="KnownIssues-Perforce2009.2PerformanceonWindows">Windows上的Perforce 2009.2性能</h2><p id="59dff911">如果您在Windows上运行Perforce 2009.2，则可能会遇到严重的问题。这是Windows上运行的P4服务器的问题。请参阅Perforce文档中的相应<a href="http://kb.perforce.com/article/1175/20092-server-performance-on-windows" rel="noopener noreferrer" data-external="true" target="_blank">部分</a> 。</p></div><a name="Wrongtimesforbuildscheduledtriggering(Timezoneissues)"></a><a name="Wrong-times-for-build-scheduled-triggering-(Timezone-issues)"></a><div class="chapter"><h2 id="KnownIssues-Wrongtimesforbuildscheduledtriggering(Timezoneissues)">构建计划的触发时间错误（时区问题）</h2><p id="753ec998">确保使用适用于您的平台的Java 8安装的最新更新（例如<a href="https://adoptopenjdk.net/" rel="noopener noreferrer" data-external="true" target="_blank">AdoptOpenJDK的</a> OpenJDK 8）。</p></div><a name="UpgradingIntelliJIDEAMayAffectActivePre-TestedCommits"></a><a name="Upgrading-IntelliJ-IDEA-May-Affect-Active-Pre-Tested-Commits"></a><div class="chapter"><h2 id="KnownIssues-UpgradingIntelliJIDEAMayAffectActivePre-TestedCommits">升级IntelliJ IDEA可能会影响活动的预测试提交</h2><p id="b17a65f4">在升级到IntelliJ IDEA X（或其他IntelliJ X平台产品）之前，请确保您没有活动的经过预先测试的提交，否则升级后将无法提交它们。仅当您使用基于目录的IDEA项目（项目文件存储在<code class="code">.idea</code>目录）。</p></div><a name="OtherJavaApplicationsRunningontheSameServer"></a><a name="Other-Java-Applications-Running-on-the-Same-Server"></a><div class="chapter"><h2 id="KnownIssues-OtherJavaApplicationsRunningontheSameServer">在同一服务器上运行的其他Java应用程序</h2><p id="e2c3c964">如果其他Web应用程序可通过相同的主机名访问，则可能会发生会话cookie冲突。这通常是通过随机用户注销或丢失会话级数据而可见的。 （例如<a href="http://youtrack.jetbrains.net/issue/TW-12654" rel="noopener noreferrer" data-external="true" target="_blank">TW-12654</a> ）。要解决此问题，您可以在访问应用程序时使用不同的主机名。</p></div><a name="TheServerDoesNotStartClaimingtheDatabaseisinUse"></a><a name="The-Server-Does-Not-Start-Claiming-the-Database-is-in-Use"></a><div class="chapter"><h2 id="KnownIssues-TheServerDoesNotStartClaimingtheDatabaseisinUse">服务器没有开始声明数据库正在使用中</h2><p id="2648f95e">只有一个TeamCity服务器可以使用一个数据库，这需要在TeamCity服务器启动时进行检查。</p><p id="c9351e39">” <code class="code">The Database is in Use</code>在以下两种情况下，都会报告“启动错误”：</p><ul class="list _ul"><li class="list__item" id="496b23d2"><p>尝试启动多个连接到同一数据库的TeamCity服务器</p></li><li class="list__item" id="b92f63f2"><p>检测到第二个TeamCity实例</p></li><li class="list__item" id="b01b58bb"><p>内部HSQL数据库正在由另一个应用程序使用</p></li></ul><p id="719af52e">该错误很可能是由于存在另一个正在运行的TeamCity安装程序连接到相同的数据库而导致的。注意， <a href="setting-up-an-external-database.html">数据库属性</a>正确，并且没有其他TeamCity服务器使用同一数据库。</p><p id="fadd89b5"><b id="51f5d8e9">在TeamCity 8.0和更早版本中</b> ，如果所有设置都正确，则在错误关闭了TeamCity服务器或数据库服务器后，可能会发生该错误。解决方案取决于数据库类型：</p><ul class="list _ul"><li class="list__item" id="39fe447f"><p><b id="033c5ffd">MySQL</b> ：重新启动MySQL服务器，然后再次启动TeamCity。</p></li><li class="list__item" id="06297add"><p><b id="577c437e">PostgreSQL</b> ， <b id="7ca05777">Oracle</b> ， <b id="99a4e0d2">MS SQL</b> ：从错误关闭的TeamCity中终止连接，然后再次启动TeamCity。</p></li><li class="list__item" id="356d7025"><p>内部数据库（ <b id="dff161ec">HSQL</b> ）：删除<code class="code">buildserver.lck</code> < <a href="teamcity-home-directory.html">TeamCity主页</a> > \ system目录中的文件，然后再次启动TeamCity。</p></li></ul></div><a name="SlowdownloadfromTeamCityserver"></a><a name="Slow-download-from-TeamCity-server"></a><div class="chapter"><h2 id="KnownIssues-SlowdownloadfromTeamCityserver">从TeamCity服务器下载缓慢</h2><p id="fa5b4f67">如果从TeamCity下载工件时遇到缓慢的速度，请尝试检查服务器计算机的速度，并从localhost下载。如果本地主机的速度正常，则与TeamCity（Tomcat）设置结合使用时，问题可能出在网络配置或OS /硬件设置中。</p><p id="169b4814">确保< <a href="teamcity-home-directory.html">TeamCity主页</a> > \ conf \ server.xml文件与TeamCity发行版中包含的文件相对应（可以在.tar.gz发行版中进行检查）。如果具有以下“连接器”节点（端口号可以不同）：</p><div class="code-block" data-lang="bash"><connector port="8111" protocol="HTTP/1.1" connectiontimeout="60000" redirectport="8543" usebodyencodingforuri="true"></connector>

</div><p id="fc77c721">更改为：</p><div class="code-block" data-lang="bash"><connector port="8111" protocol="org.apache.coyote.http11.Http11NioProtocol" connectiontimeout="60000" redirectport="8543" usebodyencodingforuri="true" socket.txbufsize="64000" socket.rxbufsize="64000" tcpnodelay="1"></connector>

</div><p id="5df16ed8">并重新启动TeamCity服务器。</p><p id="f45816f9">如果这对下载速度没有帮助，则要调查此案例，您可能需要寻找具有适当的网络相关问题调查技能的管理员来调查该案例。</p></div><a name="FailuretopublishartifactstoserverbehindIISreverseproxy"></a><a name="Failure-to-publish-artifacts-to-server-behind-IIS-reverse-proxy"></a><div class="chapter"><h2 id="KnownIssues-FailuretopublishartifactstoserverbehindIISreverseproxy">无法将工件发布到IIS反向代理后面的服务器</h2><p id="7de0e325">此问题仅与在构建服务器和代理之间涉及IIS反向代理的配置有关。有时，可以在无限循环中找到构建代理，以尝试将构建工件发布到服务器。构建日志如下所示：</p><div class="code-block" data-lang="bash">[11:15:05]发布工件[11:15:05] [发布工件]收集要发布的文件：[toZip / ** => artifact.zip] [11:15:06] [发布工件]创建存档工件.zip（9s）[11:15:06] [创建归档工件.zip]创建C：\ BuildAgent \ temp \ buildTmp \ ZipPreprocessor2847146024236637664 \ artifact.zip [11:15:15] [创建归档工件.zip]归档文件为已创建，文件大小为32142324字节[11:15:15] [发布工件]正在发送toZip / ** [11:15:25] [发布工件]正在发送toZip / ** [11:15:39] [发布工件]正在发送toZip / ** [11:15:48] [发布工件]发送toZip / ** [11:16:01] [发布工件]发送toZip / ** [11:16:16] [发布工件]发送toZip / **</div><p id="301a4249">同时，teamcity-agent.log充满了来自IIS的404响应：</p><div class="code-block" data-lang="bash">[2012-08-01 12：04：55,514]警告-jetbrains.buildServer。代理商


<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>404-找不到文件或目录。</title>
<style type="text/css"></style></div></div></article></div></section></main></div></body></html>