<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>远程调试-帮助|团队城市</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Remote Debug" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/concepts.md|Concepts/remote-debug.md|Remote Debug" data-main-title="Remote Debug" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/remote-debug.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="remote-debug.md" data-toc="Remote Debug">远程调试</h1><p id="ac56e5a2"><i id="18da3d41">远程调试</i>是一项功能，允许您从本地开发人员计算机上的IDE远程调试TeamCity代理计算机上的测试。当代理环境在某些方面是唯一的，这会导致测试失败，并且很难在本地重现问题时，可以使用此功能。</p><aside class="note " rel="ac56e5a2" id="f84c4977" data-title=""><p id="3b28d21f">通过启用<a href="intellij-platform-plugin.html">基于IntelliJ的IDE的TeamCity集成，</a>可以直接从IntelliJ IDEA启动远程调试会话，以基于IntelliJ IDEA项目和Ant构建步骤进行构建。</p><p id="f3822054">当前，支持以下IntelliJ IDEA运行配置：</p><ul class="list _ul"><li class="list__item" id="143b9ccb"><p>Java应用程序运行配置</p></li><li class="list__item" id="0822099f"><p>JUnit运行配置</p></li><li class="list__item" id="38f5c61a"><p>TestNG运行配置对Ant步骤的远程调试要求构建配置具有<code class="code">teamcity.remote-debug.ant.supported=true</code> <a href="configuring-build-parameters.html#Defining-Build-Parameters-in-Build-Configuration">参数</a> 。</p></li></ul></aside><a name="Prerequisites:"></a><a name="Prerequisites:"></a><h3 id="RemoteDebug-Prerequisites:">先决条件：</h3><ul class="list _ul"><li class="list__item" id="013a666e"><p>使用安装<a href="intellij-platform-plugin.html">了IntelliJ IDEA</a>的<a href="intellij-platform-plugin.html">TeamCity插件</a>的本地开发人员机器上的IntelliJ IDEA运行配置</p></li><li class="list__item" id="a44f811b"><p>使用<a href="intellij-idea-project.html">IntelliJ IDEA项目</a>运行程序在TeamCity服务器上进行构建配置，将其作为<a href="configuring-build-steps.html">构建步骤之一</a></p></li><li class="list__item" id="abcfbb74"><p>远程<a href="build-agent.html">TeamCity代理</a>通过套接字连接运行可用于本地计算机的此版本</p></li></ul><a name="DebuggingTestsRemotely"></a><a name="Debugging-Tests-Remotely"></a><h3 id="RemoteDebug-DebuggingTestsRemotely">远程调试测试</h3><ol class="list _decimal"><li class="list__item" id="72644766"><p>要开始测试的远程调试，请选择测试，然后从上下文菜单中选择“ <b id="cfc4a8c0"><test name="">在TeamCity Agent上</test></b>进行<b id="784710d1">远程调试”</b>选项（TeamCity插件菜单中也提供了“ <b id="784710d1">远程调试”</b>操作）。该操作将要求您选择IntelliJ IDEA运行配置。</p></li><li class="list__item" id="e7c56662"><p>完成此操作后，TeamCity插件将要求您选择要在其中启动调试会话的构建配置。该过程类似于开始个人构建。例如，如果有个人更改，将创建个人补丁并将其发送给代理。另外，由于过程基本相同，因此在选择构建配置时，可以指定代理，自定义属性等。</p><figure><img alt="remote_debug_conf_selected.png" title="remote_debug_conf_selected.png" src="/help/img/teamcity/2019.1/remote_debug_conf_selected.png" id="10cb093f" width="991" height="696"></figure><p></p></li><li class="list__item" id="b7013795"><p>如果所选配置包含多个IntelliJ IDEA项目构建步骤，则插件将要求您选择在何处启动调试会话的构建步骤。</p><figure><img alt="remote_debug_step_selected.png" title="remote_debug_step_selected.png" src="/help/img/teamcity/2019.1/remote_debug_step_selected.png" id="1438f82e" width="362" height="187"></figure><p></p></li><li class="list__item" id="9300e269"><p>之后，将构建添加到队列中，并显示标准的IntelliJ IDEA调试工具窗口：</p><figure><img alt="remote_debug_tool_window.png" title="remote_debug_tool_window.png" src="/help/img/teamcity/2019.1/remote_debug_tool_window.png" id="e85d60cd" width="1161" height="320"></figure>调试工具窗口在侦听模式下工作，即，它等待代理连接到它。代理连接后，代理上的Java进程将暂停，并且“代理已附加”通知将显示在IDE中：<figure><img alt="agent_attached_popup.png" title="agent_attached_popup.png" src="/help/img/teamcity/2019.1/agent_attached_popup.png" id="cbb5a5a2" width="554" height="106"></figure><p></p></li><li class="list__item" id="45e0ceca"><p>现在，我们可以设置一些断点，并通过在通知弹出窗口或调试工具窗口中单击“ <b id="11ef7937">启动”</b>来实际启动调试会话。<br>JVM进程退出后，IDE中将出现另一个通知弹出窗口：</p><figure><img alt="repeat_debug_notification.png" title="repeat_debug_notification.png" src="/help/img/teamcity/2019.1/repeat_debug_notification.png" id="dd957342" width="554" height="120"></figure>调试会话尚未结束，可以重复或结束它。选择“ <b id="c118cea2">重复”</b>将再次重新运行同一构建步骤，这比启动新的调试会话快得多。<p></p></li></ol><hr id="539801d9"></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>