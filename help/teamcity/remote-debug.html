<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Remote Debug - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Remote Debug" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/concepts.md|Concepts/remote-debug.md|Remote Debug" data-main-title="Remote Debug" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/remote-debug.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Remote Debug" id="remote-debug.md">Remote Debug</h1><p id="ac56e5a2"><i id="18da3d41">Remote Debug</i> is a feature allowing you to remotely debug your tests on the TeamCity agent machine from the IDE on the local developer machine. This feature is of use when the agent environment is unique in some aspect, which causes a test to fail, and it is difficult to reproduce the problem locally.</p><aside class="note " data-title="" rel="ac56e5a2" id="f84c4977"><p id="3b28d21f">With <a href="intellij-platform-plugin.html">TeamCity integration for IntelliJ-based IDEs</a> enabled, remote debug sessions can be launched right from IntelliJ IDEA for the builds based on the IntelliJ IDEA Project and Ant build steps.</p><p id="f3822054">Currently, the following IntelliJ IDEA run configurations are supported:</p><ul class="list _ul"><li class="list__item" id="143b9ccb"><p>Java application run configuration</p></li><li class="list__item" id="0822099f"><p>JUnit run configuration</p></li><li class="list__item" id="38f5c61a"><p>TestNG run configurationRemote debug for Ant steps requires that the build configuration have the <code class="code">teamcity.remote-debug.ant.supported=true</code> <a href="configuring-build-parameters.html#Defining-Build-Parameters-in-Build-Configuration">parameter</a>.</p></li></ul></aside><a name="Prerequisites:"></a><a name="Prerequisites:"></a><h3 id="RemoteDebug-Prerequisites:">Prerequisites:</h3><ul class="list _ul"><li class="list__item" id="013a666e"><p>IntelliJ IDEA run configuration on the local developer machine with the <a href="intellij-platform-plugin.html">TeamCity plugin for IntelliJ IDEA</a> installed</p></li><li class="list__item" id="a44f811b"><p>Build configuration on the TeamCity Server with the <a href="intellij-idea-project.html">IntelliJ IDEA Project</a> runner as one of the <a href="configuring-build-steps.html">build steps</a></p></li><li class="list__item" id="abcfbb74"><p>Remote <a href="build-agent.html">TeamCity agent</a> to run this build available to the local machine by socket connection</p></li></ul><a name="DebuggingTestsRemotely"></a><a name="Debugging-Tests-Remotely"></a><h3 id="RemoteDebug-DebuggingTestsRemotely">Debugging Tests Remotely</h3><ol class="list _decimal"><li class="list__item" id="72644766"><p>To start remote debugging of a test, select the test and choose the <b id="cfc4a8c0">Debug &lt;Test Name&gt; Remotely on TeamCity Agent</b> option from the context menu (the <b id="784710d1">Remote Debug</b> action is also available from the TeamCity plugin menu. The action will require you to select an IntelliJ IDEA run configuration).</p></li><li class="list__item" id="e7c56662"><p>Once you do this, the TeamCity plugin will ask you to select a build configuration where you want to start the debug session. The process is similar to starting a personal build. For example, if there are personal changes, a personal patch will be created and sent to an agent. Also, since the process is basically the same, when you select a build configuration, you can specify an agent, customize properties, and so on. <figure><img alt="remote_debug_conf_selected.png" title="remote_debug_conf_selected.png" src="/help/img/teamcity/2019.1/remote_debug_conf_selected.png" id="10cb093f" width="991" height="696"></figure></p></li><li class="list__item" id="b7013795"><p>If the selected configuration contains more than one IntelliJ IDEA Project build step, the plugin will ask you to choose build steps where to start the debug session. <figure><img alt="remote_debug_step_selected.png" title="remote_debug_step_selected.png" src="/help/img/teamcity/2019.1/remote_debug_step_selected.png" id="1438f82e" width="362" height="187"></figure></p></li><li class="list__item" id="9300e269"><p>After that, a build is added to the queue and the standard IntelliJ IDEA debug tool window appears: <figure><img alt="remote_debug_tool_window.png" title="remote_debug_tool_window.png" src="/help/img/teamcity/2019.1/remote_debug_tool_window.png" id="e85d60cd" width="1161" height="320"></figure>The debug tool window works in the listening mode, i.e. it waits for the agent to connect to it. Once the agent connects, the Java process on the agent is paused and the Agent Attached notification appears in the IDE: <figure><img alt="agent_attached_popup.png" title="agent_attached_popup.png" src="/help/img/teamcity/2019.1/agent_attached_popup.png" id="cbb5a5a2" width="554" height="106"></figure></p></li><li class="list__item" id="45e0ceca"><p>Now we can set some breakpoints and actually start the debug session by clicking <b id="11ef7937">Start</b> either in the notification popup or in the debug tool window.<br>Once JVM process exits, another notification popup appears in the IDE: <figure><img alt="repeat_debug_notification.png" title="repeat_debug_notification.png" src="/help/img/teamcity/2019.1/repeat_debug_notification.png" id="dd957342" width="554" height="120"></figure>The debug session is not finished yet, it is possible to either repeat or finish it. Selecting <b id="c118cea2">Repeat</b> will rerun the same build step again, which is much faster than starting a new debug session.</p></li></ol><hr id="539801d9"></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>