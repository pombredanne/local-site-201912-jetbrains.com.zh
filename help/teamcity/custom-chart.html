<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>自定义图表-帮助|团队城市</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Custom Chart" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/extending-teamcity.md|Extending TeamCity/custom-chart.md|Custom Chart/edit-custom-chart-limitations.md|Edit Custom Chart Limitations" data-main-title="Custom Chart" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/custom-chart.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="custom-chart.md" data-toc="Custom Chart">自定义图表</h1><p id="959a2103">在此页：</p><p id="3eb7a482"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#CustomChart-ManagingCustomChartsviatheTeamCityWebUI">通过TeamCity Web UI管理自定义图表</a><ul class="list _bullet"><li class="list__item"><a href="#CustomChart-AddingCustomCharts">添加自定义图表</a></li><li class="list__item"><a href="#CustomChart-ModifyingCustomCharts">修改自定义图表</a></li><li class="list__item"><a href="#CustomChart-ReorderingCustomCharts">重新排序自定义图表</a></li></ul></li><li class="list__item"><a href="#CustomChart-ManagingCustomChartsManually">手动管理自定义图表</a><ul class="list _bullet"><li class="list__item"><a href="#CustomChart-DisplayingCustomChartinTeamCityWebUI">在TeamCity Web UI中显示自定义图表</a><ul class="list _bullet"><li class="list__item"><a href="#CustomChart-ParametersReference">参数参考</a></li><li class="list__item"><a href="#CustomChart-ChartDimensions">图表尺寸</a></li><li class="list__item"><a href="#CustomChart-ChartAxisSettings">图表轴设置</a></li><li class="list__item"><a href="#CustomChart-DefaultStatisticsValuesProvidedbyTeamCity">TeamCity提供的默认统计值</a></li><li class="list__item"><a href="#CustomChart-CustomBuildMetrics">自定义构建指标</a></li></ul></li></ul></li></ul><p></p><p id="aff0d529">除了由TeamCity在“统计”选项卡上自动生成的统计图之外，还可以根据<a href="#Default-Statistics-Values-Provided-by-TeamCity">TeamCity提供</a>的一组<a href="#Default-Statistics-Values-Provided-by-TeamCity">统计值</a>或从构建脚本报告的<a href="#Default-Statistics-Values-Provided-by-TeamCity">值</a>来配置自己的统计图。在后一种情况下，您将需要配置构建脚本以向TeamCity报告自定义统计数据。</p><p id="0e630f65">您可以在“构建参数”页面上查看由构建报告的统计值。</p><aside class="tip sideblock" rel="0e630f65" id="595ab576" data-title=""><p id="d3afc4de">本节中的信息参考<b id="e37c5220">TeamСity10+</b> 。对于其他版本，请参考<a href="https://confluence.jetbrains.com/display/TW/Documentation" rel="noopener noreferrer" data-external="true" target="_blank">清单</a>以选择相应的文档。</p></aside><a name="ManagingCustomChartsviatheTeamCityWebUI"></a><a name="Managing-Custom-Charts-via-the-TeamCity-Web-UI"></a><div class="chapter"><h2 id="CustomChart-ManagingCustomChartsviatheTeamCityWebUI">通过TeamCity Web UI管理自定义图表</h2><p id="44941b13">可以使用TeamCity Web UI管理自定义图表。</p><a name="AddingCustomCharts"></a><a name="Adding-Custom-Charts"></a><div class="chapter"><h3 id="CustomChart-AddingCustomCharts">添加自定义图表</h3><ul class="list _ul"><li class="list__item" id="9eb99dd6"><p>项目或构建配置的“ <b id="361078f1">统计信息”</b>选项卡提供了创建新图表的选项。请注意，当前只能添加一个构建配置作为数据源。可以手动添加更多配置。</p></li><li class="list__item" id="f3b8bebe">在<a href="working-with-build-results.html">构建结果</a>页面的“ <b id="6c9f8da2">参数”</b>选项卡上，“ <b id="7db604af">报告的统计值</b> ”列表提供了复选框，以选择新<a href="statistic-charts.html">项目或构建配置级</a>图表的统计类型。<ul class="list _ul"><li class="list__item" id="baa2c7b4"><p>项目级图表将添加到所选目标项目中。无法将<a href="project.html">根项目</a>选择为目标。</p></li><li class="list__item" id="849c8ac0"><p>构建配置级别的图表将被添加到所选目标项目及其子项目的所有构建配置中。将<a href="project.html#Root-Project">根项目</a>指定为目标会将图表添加到服务器上所有可用的构建配置中。</p></li></ul></li></ul></div><a name="ModifyingCustomCharts"></a><a name="Modifying-Custom-Charts"></a><div class="chapter"><h3 id="CustomChart-ModifyingCustomCharts">修改自定义图表</h3><p id="9d11aa3c">用铅笔<img alt="铅笔。JPG格式" title="铅笔。JPG格式" src="/help/img/teamcity/2019.1/pencil.JPG" id="56edfba5" width="28" height="23" class="inline-icon-28">图标以编辑或删除自定义图表。请注意，“ <b id="b4a622d3">添加统计值”</b>下拉列表将显示在服务器上注册的所有统计值，而不会按构建过滤它们。如果在编辑图表时选择了当前构建配置或项目中不存在的值，则不会保存该图表。</p><p id="a7515228">使用齿轮<img alt="齿轮JPG格式" title="齿轮JPG格式" src="/help/img/teamcity/2019.1/cog.JPG" id="303556ec" width="27" height="20" class="inline-icon-27">图标，您还可以配置Y轴设置并将其保存为所有用户的默认设置。</p><p id="e6fd43c0">请注意，从TeamCity UI编辑图表有很多<a href="edit-custom-chart-limitations.html">限制</a> 。</p></div><a name="ReorderingCustomCharts"></a><a name="Reordering-Custom-Charts"></a><div class="chapter"><h3 id="CustomChart-ReorderingCustomCharts">重新排序自定义图表</h3><p id="5699bdad"><b id="b3b4a429">要</b>对项目/构建配置的<b id="b3b4a429">自定义图表</b>进行<b id="c8ee221d">重新排序</b> ，请单击“ <b id="c8ee221d">重新排序”</b>按钮，然后拖放图表以根据需要进行排列并应用更改。</p></div></div><a name="ManagingCustomChartsManually"></a><a name="Managing-Custom-Charts-Manually"></a><div class="chapter"><h2 id="CustomChart-ManagingCustomChartsManually">手动管理自定义图表</h2><aside class="note " rel="CustomChart-ManagingCustomChartsManually" id="f75e5c5e" data-title=""><p id="b85ecce9"><b id="a1355e49">从TeamCity 10开始</b> ，自定义图表的手动编辑已更改。对于早期版本，请参见相应<a href="https://confluence.jetbrains.com/display/TW/Documentation" rel="noopener noreferrer" data-external="true" target="_blank">文档</a>中的此页面。</p></aside><p id="0761323a">要手动创建要在TeamCity Web UI中显示的自定义图表，请配置<code class="code"><</code> <a href="teamcity-data-directory.html"><code class="code">TeamCity Data Directory</code></a> <code class="code">>/config/projects/<</code> <a href="identifier.html"><code class="code">ProjectID</code></a> <code class="code">>/project-config.xml</code>文件。该文件具有<code class="code"><project-extensions></code>包含所有项目功能（包括自定义图表）的元素。对于每个图表<code class="code"><extention></code>元素已添加。</p><a name="DisplayingCustomChartinTeamCityWebUI"></a><a name="Displaying-Custom-Chart-in-TeamCity-Web-UI"></a><div class="chapter"><h3 id="CustomChart-DisplayingCustomChartinTeamCityWebUI">在TeamCity Web UI中显示自定义图表</h3><p id="dd8cb16b">要使TeamCity在网络用户界面中显示自定义图表，请更新<code class="code"><</code> <a href="teamcity-data-directory.html"><code class="code">TeamCity Data Directory</code></a> <code class="code">>/config/projects/<</code> <a href="identifier.html"><code class="code">ProjectID</code></a> <code class="code">>/project-config.xml</code>配置文件添加新的<code class="code"><extention></code>的子元素<code class="code"><project-extensions></code>元件。</p><p id="40a4caf3">每个扩展名必须具有唯一性<code class="code">id</code>在项目中。</p><p id="1310ca1f">的<code class="code">type</code>属性设置为</p><ul class="list _ul"><li class="list__item" id="ae8306d6"><p><code class="code"><project-graphs></code>用于项目级图表</p></li><li class="list__item" id="eb446906"><p><code class="code"><buildType-graphs></code>用于构建配置级别的图表。</p></li></ul><p id="d5825c55">每个图表由<code class="code"><param></code>元件。它必须包含<code class="code"><param></code>子元素的数据显示在图表中<code class="code">name/value</code>对; “ <b id="e37b340c"><code class="code">series"</code></b>参数使用JSON格式列出图表上显示的一系列数据。</p><p id="a5f5d01a">请参阅以下示例：</p><p id="b32c66c1"><b id="937c9492">project-config.xml中的自定义构建配置级别图表</b></p><div class="code-block" data-lang="markup"><project-extensions>
 <extension id="customChart1" type="buildtype-graphs">
   <parameters>
     <param name="title" value="Custom chart">
     <param name="hideFilters" value="showFailed">
     <param name="seriesTitle" value="Some key">
     <param name="format" value="duration">
     <param name="series"><![CDATA[[
{
 "type": "valueType",
 "key": "BuildDuration",
 "title": "duration1",
 "sourceBuildTypeId": "my_first_configuration_id"
}, {
 "type": "valueType",
 "key": "customKey",
 "title": "Custom data",
 "color": "#ee0055 "
}, {
 "type": "valueTypes",
 "pattern": "buildStageDuration:*",
 "title": "Stage: {1}"
}
]]] gtc:encodedoriginal="PCFbQ0RBVEFbWwp7CsKgInR5cGUiOiAidmFsdWVUeXBlIiwKwqAia2V5IjogIkJ1aWxkRHVyYXRpb24iLArCoCJ0aXRsZSI6ICJkdXJhdGlvbjEiLArCoCJzb3VyY2VCdWlsZFR5cGVJZCI6ICJteV9maXJzdF9jb25maWd1cmF0aW9uX2lkIgp9LCB7CsKgInR5cGUiOiAidmFsdWVUeXBlIiwKwqAia2V5IjogImN1c3RvbUtleSIsCsKgInRpdGxlIjogIkN1c3RvbSBkYXRhIiwKwqAiY29sb3IiOiAiI2VlMDA1NSAiCn0sIHsKwqAidHlwZSI6ICJ2YWx1ZVR5cGVzIiwKwqAicGF0dGVybiI6ICJidWlsZFN0YWdlRHVyYXRpb246KiIsCsKgInRpdGxlIjogIlN0YWdlOiB7MX0iCn0KXV1dPg==">
     
     <param name="properties.width" value="300"></param>
     <param name="properties.height" value="300"></param>
     <param name="properties.axis.y.type" value="logarithmic"></param>
     <param name="properties.axis.y.includeZero" value="false"></param>
     <param name="properties.axis.y.max" value="10000"></param>
   </parameters>
 </extension>
 <extension id="secondChart" type="buildtype-graphs">
   <parameters>
     <param name="title" value="empty"></param>
   </parameters>
 </extension>
</project-extensions>

</div><p id="5ad6eb99">该图表将显示在项目的“构建配置”的“ <b id="12f6cf9f">统计”</b>选项卡上，其中<code class="code" data-markx="171"></code>文件及其所有子项目都位于。要显示所有构建配置的图表，请将其添加到<code class="code" data-markx="172"></code> <a href="project.html#Root-Project">根项目</a> 。</p><a name="ParametersReference"></a><a name="Parameters-Reference"></a><div class="chapter"><h4 id="CustomChart-ParametersReference">参数参考</h4><hr id="976f75f8"><div class="table-wrapper"><table width="100%" id="9d7af0a7"><thead><tr id="cd425d2e" class="ijRowHead"><th id="12cd5f49"><p id="98a9c899">名称</p></th><th id="4c383aaf"><p id="61246919">描述</p></th></tr></thead><tbody><tr id="afc7c6cc" class="ijRowOdd"><td id="e78f51c2"><p id="982b72b9"><code class="code" data-markx="191"></code></p></td><td id="843bd1a8"><p id="567d5ca6">图表上方的标题。</p></td></tr><tr id="4ed8ec60" class="ijRowEven"><td id="b5263b6b"><p id="72deaae3"><code class="code" data-markx="197"></code></p></td><td id="72fec175"><p id="25948363">图表上使用的系列列表上方的标题（单数形式）。默认值为“ Serie”。</p></td></tr><tr id="62eaa6e9" class="ijRowOdd"><td id="a4a3e23f"><p id="c51d9ded"><code class="code" data-markx="203"></code></p></td><td id="de1b919c"><p id="0602cad1">默认情况下要检查的逗号分隔选项列表。可以包括以下内容：</p><ul class="list _ul"><li class="list__item" id="fd57b32d"><p><code class="code" data-markx="209"></code> –默认情况下，包含失败构建的结果。</p></li><li class="list__item" id="c9d257fe"><p><code class="code" data-markx="212"></code> –默认情况下，在图表上显示平均值。</p></li></ul></td></tr><tr id="3e4fac07" class="ijRowEven"><td id="84722145"><p id="ed79139b"><code class="code" data-markx="216"></code></p></td><td id="dd7d13a3"><p id="0d7adc8a">逗号分隔的过滤器名称列表将不会显示在图表旁边：</p><ul class="list _ul"><li class="list__item" id="564342b3"><p><code class="code" data-markx="222"></code> –隐藏所有过滤器。</p></li><li class="list__item" id="b70a6c0d"><p><code class="code" data-markx="225"></code> –隐藏系列过滤器（您将无法仅显示为图表指定的特定valueType中的数据。）</p></li><li class="list__item" id="9816c944"><p><code class="code" data-markx="228"></code> –隐藏日期范围过滤器。</p></li><li class="list__item" id="674db67b"><p><code class="code" data-markx="231"></code> –隐藏复选框，其中包括失败构建的数据。</p></li><li class="list__item" id="148bc021"><p><code class="code" data-markx="234"></code> –隐藏可查看平均值的复选框。 <code class="code" data-markx="235"></code> –空（显示所有过滤器）。</p></li></ul></td></tr><tr id="a02a2d72" class="ijRowOdd"><td id="a0c4abaa"><p id="4e49235b"><code class="code" data-markx="239"></code></p></td><td id="d4cb9e3b"><p id="75bff190">y轴值的格式。支持的格式有：</p><ul class="list _ul"><li class="list__item" id="57ebcb72"><p><code class="code" data-markx="245"></code> ，数据应以毫秒为单位；</p></li><li class="list__item" id="9dc6c660"><p><code class="code" data-markx="248"></code> ，数据应为百分比（从0到100）；</p></li><li class="list__item" id="03f74bbf"><p><code class="code" data-markx="251"></code> ，格式将显示介于0到1之间的数据（以百分比表示（从0到100））；</p></li><li class="list__item" id="d125c07d"><p><code class="code" data-markx="254"></code> ，数据应以字节为单位。如果未指定格式，则使用数字格式。</p></li></ul></td></tr></tbody></table></div><hr id="03df79e9"><p id="d01eed6c">的<code class="code" data-markx="257"></code>参数使用JSON格式列出图表上显示的一系列数据。每个系列均以单独的颜色绘制，您可以使用滤镜选择一个或另一个系列。</p><hr id="7580ae6b"><div class="table-wrapper"><table width="100%" id="62b78c35"><thead><tr id="ef4ba6b8" class="ijRowHead"><th id="f5d10dcb"><p id="13e01445">名称</p></th><th id="0438386c"><p id="93c4af4c">描述</p></th></tr></thead><tbody><tr id="6f48a501" class="ijRowOdd"><td id="1870923c"><p id="bf84f486"><code class="code" data-markx="271"></code></p></td><td id="07c7d910"><ul class="list _ul"><li class="list__item" id="35413c27"><p><code class="code" data-markx="276"></code>描述了图表上显示的一系列数据。每个系列均以单独的颜色绘制，您可以使用滤镜选择一个或另一个系列。</p></li><li class="list__item" id="27602e71"><p><code class="code" data-markx="279"></code>允许通过<code class="code" data-markx="280"></code> （ <a href="#patternedValues">如下所述</a> ）</p></li></ul></td></tr><tr id="beea8fe8" class="ijRowEven"><td id="50ff0488"><p id="04c35db8"><code class="code" data-markx="285"></code></p></td><td id="bec6d679"><p id="8dd9f68e">valueType（系列）的名称。可以由TeamCity预定义，例如<code class="code" data-markx="288"></code>要么<code class="code" data-markx="289"></code> （有关预定义统计值的完整列表，请参见<a href="#Default-Statistics-Values-Provided-by-TeamCity">下文</a> ），也可以通过从构建脚本中报告数据来提供自己的数据。</p></td></tr><tr id="9f5770ec" class="ijRowOdd"><td id="55de958c"><p id="60c8a75d"><code class="code" data-markx="294"></code></p></td><td id="7e86ff9a"><p id="7b8b8063">系列选择器中显示的系列名称。默认为<code class="code" data-markx="297"></code> 。对于多个系列，可以使用模式组标记： <code class="code" data-markx="298"></code>代表模式中第一个捕获的组， <code class="code" data-markx="299"></code>代表整个模式。</p></td></tr><tr id="8f9a205e" class="ijRowEven"><td id="98de4c6d"><p id="ac46e3a2"><code class="code" data-markx="303"></code></p></td><td id="2753634f"><p id="9b302895">该字段允许您显式指定构建配置，以使用给定系列的数据。如果图表是在项目级别添加的，则此字段对于图表中使用的第一个valueType是必填字段。在其他情况下，它是可选的。但是，请注意，TeamCity根据以下规则选择构建配置以从中获取数据：</p><ol class="list _decimal"><li class="list__item" id="fc4e4bc2"><p>如果<code class="code" data-markx="309"></code>设置在<code class="code" data-markx="310"></code> ，即使数据属于另一个项目，也会从此构建配置中获取数据。</p></li><li class="list__item" id="1239e1ee"><p>如果<code class="code" data-markx="313"></code>未在当前范围内设置<code class="code" data-markx="314"></code> ，但设置在<code class="code" data-markx="315"></code>在图表中当前图表的上方，将采用上述构建配置中的数据。请参阅示例<code class="code" data-markx="316"></code>文件上方。</p></li><li class="list__item" id="b84be0e9"><p>如果<code class="code" data-markx="319"></code>未在当前范围内设置<code class="code" data-markx="320"></code>并且未在上方进行设置，该图表将显示当前构建配置的数据，即该图表仅适用于构建配置。</p></li></ol></td></tr><tr id="c5acb223" class="ijRowOdd"><td id="b83b995f"><p id="3516670a"><code class="code" data-markx="324"></code></p></td><td id="9643c7e6"><p id="f123a060">图表中要使用的系列的颜色。可以使用标准的Web颜色格式-“ #RRGGBB”，颜色名称等。有关更多信息，请参见<a href="http://www.w3schools.com/html/html_colors.asp" rel="noopener noreferrer" data-external="true" target="_blank">HTML颜色参考</a>和<a href="http://www.w3schools.com/html/html_colornames.asp" rel="noopener noreferrer" data-external="true" target="_blank">HTML颜色名称参考</a> 。如果未指定，将根据系列标题分配自动颜色。</p></td></tr><tr id="6ccca78f" class="ijRowEven"><td id="c4d6d20c"><a name="patternedValues"></a><a name="CustomChart-patternedValues"></a><p id="402e7f41"><code class="code" data-markx="334"></code></p></td><td id="9353fa38"><p id="37bd3fce">值类型（或系列）名称的模式，将在图表上显示。允许使用星号（*）过滤由TeamCity预定义的值类型（或系列），例如<code class="code" data-markx="337"></code>要么<code class="code" data-markx="338"></code> （有关预定义统计值的完整列表，请参见<a href="#Default-Statistics-Values-Provided-by-TeamCity">下文</a> ），也可以通过从构建脚本中报告数据来提供您自己的数据。</p></td></tr></tbody></table></div><hr id="6404a99c"></div><a name="ChartDimensions"></a><a name="Chart-Dimensions"></a><div class="chapter"><h4 id="CustomChart-ChartDimensions">图表尺寸</h4><p id="d3d91b77">您可以使用设置自定义图表的宽度/高度（以像素为单位） <code class="code" data-markx="346"></code>和<code class="code" data-markx="347"></code>的属性<code class="code" data-markx="348"></code>元素：<code class="code" data-markx="349"></code></p></div><a name="ChartAxisSettings"></a><a name="Chart-Axis-Settings"></a><div class="chapter"><h4 id="CustomChart-ChartAxisSettings">图表轴设置</h4><p id="4579b4e3">您还可以通过以以下名称开头的参数名称来自定义图表的默认轴设置<code class="code" data-markx="355"></code> ，例如“ <code class="code" data-markx="356"></code> ”</p><p id="9a486a9c">支持的属性：</p><hr id="b84ffeca"><div class="table-wrapper"><table width="100%" id="5b72dcb2"><thead><tr id="c15b5ad9" class="ijRowHead"><th id="bfb257d3"><p id="993526d9">名称</p></th><th id="4b6b6241"><p id="3528164f">描述</p></th></tr></thead><tbody><tr id="a7d21645" class="ijRowOdd"><td id="d872a6e2"><p id="d250997f"><code class="code" data-markx="371"></code></p></td><td id="6930a075"><ul class="list _ul"><li class="list__item" id="15d72508"><p><code class="code" data-markx="376"></code> （默认）为标准比例。</p></li><li class="list__item" id="ef1d1146"><p><code class="code" data-markx="379"></code> Y轴的对数刻度</p></li></ul></td></tr><tr id="660f798f" class="ijRowEven"><td id="b222a8a4"><p id="0beb614f"><code class="code" data-markx="383"></code></p></td><td id="c8664b85"><p id="ffe92ff5">Y轴上是否包含零值：</p><ul class="list _ul"><li class="list__item" id="30878af0"><p><code class="code" data-markx="389"></code> （默认）</p></li><li class="list__item" id="bdcebbac"><p><code class="code" data-markx="392"></code> （不包括零）</p></li></ul></td></tr><tr id="f3e29a34" class="ijRowOdd"><td id="84632bbe"><p id="453579c1"><code class="code" data-markx="396"></code></p></td><td id="4fa43bf5"><p id="74539b29">从其开始Y轴的整数值。</p></td></tr><tr id="c61b3006" class="ijRowEven"><td id="93bf7aae"><p id="59d240fd"><code class="code" data-markx="402"></code></p></td><td id="0f8201c8"><p id="415d871d">一个整数值，用作Y轴值的最大值。</p></td></tr></tbody></table></div><hr id="e4115288"><p id="a2ccc6d2"><a name="listOfDefaultStatisticValues"></a><a name="CustomChart-listOfDefaultStatisticValues"></a></p><p id="36c85559"><a name="Build Metrics Provided by TeamCity"></a><a name="CustomChart-Build Metrics Provided by TeamCity"></a></p><p id="0dde9a63"><a name="predefinedStatisticsKeys"></a><a name="CustomChart-predefinedStatisticsKeys"></a></p></div><a name="DefaultStatisticsValuesProvidedbyTeamCity"></a><a name="Default-Statistics-Values-Provided-by-TeamCity"></a><div class="chapter"><h4 id="CustomChart-DefaultStatisticsValuesProvidedbyTeamCity">TeamCity提供的默认统计值</h4><p id="d382ca90">下表列出了可用于配置自定义图表的预定义值提供程序。为每个构建报告的值因构建配置设置而异。</p><p id="e29cbebe"><a name=" reportedStatValues"></a><a name="CustomChart- reportedStatValues"></a></p><p id="840ea9bd">您可以在“ <b id="03d24e01">构建结果” |</b> “ <b id="03d24e01">生成结果”中</b>查看由构建报告的所有统计值<b id="03d24e01">。参数“报告的统计值”</b>选项卡。对于每个值，单击“ <i id="d4e735f8">查看趋势”</i>图标即可获得统计图表。 <img alt="ViewTrend。PNG" title="ViewTrend。PNG" src="/help/img/teamcity/2019.1/ViewTrend.PNG" id="37215c9b" width="22" height="26" class="inline-icon-22"> 。</p><hr id="43d48ed7"><div class="table-wrapper"><table class=" wide" width="100%" id="7ace8549"><thead><tr id="6dd4c8f2" class="ijRowHead"><th id="3d04936e"><p id="39bc4925">键</p></th><th id="716ec2a6"><p id="34d7ee61">描述</p></th><th id="2e137890"><p id="b0179a34">单元</p></th></tr></thead><tbody><tr id="6f942c4b" class="ijRowOdd"><td id="71ca53d8"><p id="547d680a"><code class="code" data-markx="442"></code></p></td><td id="b590571b"><p id="ad4c0a81">工件目录中所有<a href="build-artifact.html">工件</a>文件大小的总和</p></td><td id="0e72335b"><p id="623a1ae7">字节数</p></td></tr><tr id="289a1ebe" class="ijRowEven"><td id="348a4d59"><p id="2786cfff"><code class="code" data-markx="451"></code></p></td><td id="224852f6"><p id="53e5e5b2">所有<a href="build-artifact.html">工件</a>文件大小的总和，不包括隐藏的工件（位于.teamcity目录下的那些工件）</p></td><td id="79302a8b"><p id="cd42d7fd">字节数</p></td></tr><tr id="44ca3c3a" class="ijRowOdd"><td id="8396310f"><p id="3208eef6"><code class="code" data-markx="460"></code></p></td><td id="5a7d617c"><p id="e9ad524e">构建中工件发布步骤的持续时间</p></td><td id="e218b43e"><p id="d3d21258">毫秒</p></td></tr><tr id="4aba8fd5" class="ijRowEven"><td id="4c191c6d"><p id="d88ead35"><code class="code" data-markx="468"></code></p></td><td id="6f709c0d"><p id="72507430">每个步骤的持续时间。将自动生成构建步骤名称，以避免在构建步骤名称过长或重命名构建步骤时出现问题。可以在构建配置的xml文件中找到每个步骤的ID。</p></td><td id="08467219"><p id="4168aaa0">毫秒</p></td></tr><tr id="c71af4a7" class="ijRowOdd"><td id="9d548d53"><p id="e356e877"><code class="code" data-markx="476"></code></p></td><td id="545fb114"><p id="86e665a0">源检出步骤的持续时间</p></td><td id="75307256"><p id="2e3c1f82">毫秒</p></td></tr><tr id="5423dfac" class="ijRowEven"><td id="7dd3e37c"><p id="d6b6dab0"><code class="code" data-markx="484"></code></p></td><td id="9129d8a4"><p id="3832ef40">解决构建依赖关系的持续时间</p></td><td id="c87ef05a"><p id="ac76bee6">毫秒</p></td></tr><tr id="e7763bda" class="ijRowOdd"><td id="169fbd6c"><p id="b1a6664b"><code class="code" data-markx="492"></code></p></td><td id="960e5ac0"><p id="35144a51">构建持续时间（所有构建阶段）</p></td><td id="02bfe49a"><p id="7337ca0d">毫秒</p></td></tr><tr id="d5aec014" class="ijRowEven"><td id="cd970cef"><p id="ac33b32e"><code class="code" data-markx="500"></code></p></td><td id="09c0c162"><p id="67f7186d">构建步骤的持续时间（不包括签出和工件发布时间等）</p></td><td id="f4df5c25"><p id="c86b5965">毫秒</p></td></tr><tr id="01d4716c" class="ijRowOdd"><td id="5f8c5cf1"><p id="2f5c2e59"><code class="code" data-markx="508"></code></p></td><td id="0ef8d35b"><p id="df979cd2">块级代码覆盖率</p></td><td id="c629c39e"><p id="7e77e093">％</p></td></tr><tr id="7e981c09" class="ijRowEven"><td id="8867f21d"><p id="217c8e8c"><code class="code" data-markx="516"></code></p></td><td id="41c182cf"><p id="a9e6b929">类级代码覆盖率</p></td><td id="e158245e"><p id="f67dfd63">％</p></td></tr><tr id="7ccafa50" class="ijRowOdd"><td id="53688e9d"><p id="bf3f0b1e"><code class="code" data-markx="524"></code></p></td><td id="58d14b71"><p id="7acb84fa">行级代码覆盖率</p></td><td id="ae6dd635"><p id="0164090c">％</p></td></tr><tr id="8b46ccc1" class="ijRowEven"><td id="b18d557d"><p id="d5eabaf6"><code class="code" data-markx="532"></code></p></td><td id="ac4d5f8b"><p id="fab8eab1">方法级代码覆盖率</p></td><td id="5aef21c9"><p id="c2648e97">％</p></td></tr><tr id="21901304" class="ijRowOdd"><td id="80595510"><p id="0fea4e22"><code class="code" data-markx="540"></code></p></td><td id="f5c66783"><p id="ef5d2264">分行覆盖</p></td><td id="38b72e9f"><p id="52724d44">％</p></td></tr><tr id="be7e284f" class="ijRowEven"><td id="43eb633a"><p id="1d2d97fe"><code class="code" data-markx="548"></code></p></td><td id="558b8495"><p id="8bc4a0a4">声明范围</p></td><td id="c771284f"><p id="e03d593e">％</p></td></tr><tr id="1e13901c" class="ijRowOdd"><td id="35defa43"><p id="3f7f841e"><code class="code" data-markx="556"></code></p></td><td id="1a52ab0f"><p id="9ffa25a5">覆盖块数</p></td><td id="f995d6a6"><p id="3cb60f69">整型</p></td></tr><tr id="93839059" class="ijRowEven"><td id="d2d2c4ef"><p id="3e5cdb91"><code class="code" data-markx="564"></code></p></td><td id="b4bdbb8d"><p id="80a165a7">块总数</p></td><td id="240cfcbb"><p id="ff9450ef">整型</p></td></tr><tr id="334bf9b0" class="ijRowOdd"><td id="148f3477"><p id="d670c566"><code class="code" data-markx="572"></code></p></td><td id="cb9fc092"><p id="667d3d88">覆盖班数</p></td><td id="d3a610b5"><p id="9da7adf2">整型</p></td></tr><tr id="f838b865" class="ijRowEven"><td id="fcc84bc1"><p id="62e9c46d"><code class="code" data-markx="580"></code></p></td><td id="a39f7b36"><p id="2076a0c0">总班数</p></td><td id="ff28f270"><p id="d4ecb7ac">整型</p></td></tr><tr id="e469ebac" class="ijRowOdd"><td id="16fd6284"><p id="5ce693d7"><code class="code" data-markx="588"></code></p></td><td id="81d76bc5"><p id="1c418cfe">覆盖线数</p></td><td id="8987ced7"><p id="a75c3c66">整型</p></td></tr><tr id="1406064b" class="ijRowEven"><td id="816eb0f8"><p id="2936587a"><code class="code" data-markx="596"></code></p></td><td id="ca2045c5"><p id="2be03cd2">总行数</p></td><td id="766edf3c"><p id="577298d2">整型</p></td></tr><tr id="4f483ddb" class="ijRowOdd"><td id="8d376a67"><p id="10d6fbdb"><code class="code" data-markx="604"></code></p></td><td id="b7c0c60b"><p id="a77e866f">涵盖方法的数量</p></td><td id="0b54ac64"><p id="9d445005">整型</p></td></tr><tr id="a6b79342" class="ijRowEven"><td id="07eda232"><p id="176ea5fa"><code class="code" data-markx="612"></code></p></td><td id="3622755c"><p id="d5639108">方法总数</p></td><td id="1d07c9f9"><p id="cf31ac68">整型</p></td></tr><tr id="bcc2f2b6" class="ijRowOdd"><td id="bc1bb810"><p id="7bc8cb35"><code class="code" data-markx="620"></code></p></td><td id="d22f8cdf"><p id="951eb709">分支机构数</p></td><td id="d6cef615"><p id="ea7b1c74">整型</p></td></tr><tr id="a762af52" class="ijRowEven"><td id="888c665c"><p id="8915eb98"><code class="code" data-markx="628"></code></p></td><td id="f389c414"><p id="ab47dc2f">分支机构总数</p></td><td id="759f1ca3"><p id="343b6b0f">整型</p></td></tr><tr id="4a49fc9f" class="ijRowOdd"><td id="886d02f4"><p id="3b75fb7e"><code class="code" data-markx="636"></code></p></td><td id="980899be"><p id="1d7f1079">涵盖陈述的数量</p></td><td id="389fb17b"><p id="0a0d0080">整型</p></td></tr><tr id="94158a93" class="ijRowEven"><td id="687e517d"><p id="12bdfeea"><code class="code" data-markx="644"></code></p></td><td id="c7672075"><p id="4587ad7d">报表总数</p></td><td id="3cad7b04"><p id="362ce668">整型</p></td></tr><tr id="1b8ea526" class="ijRowOdd"><td id="1906ac3c"><p id="592b62c9"><code class="code" data-markx="652"></code></p></td><td id="df84d48e"><p id="06246a4d">找到的代码重复数</p></td><td id="59f898a8"><p id="0fd7f0c6">整型</p></td></tr><tr id="da95de68" class="ijRowEven"><td id="95e6f96e"><p id="37b85cff"><code class="code" data-markx="660"></code></p></td><td id="18c1d61b"><p id="03e61484">构建中的测试总数</p></td><td id="b9541c88"><p id="45966abb">整型</p></td></tr><tr id="646bc40f" class="ijRowOdd"><td id="1b3ecfa5"><p id="770e5937"><code class="code" data-markx="668"></code></p></td><td id="71e2eb25"><p id="94f92cbd">构建中成功通过测试的数量</p></td><td id="bdd319f5"><p id="41d6cfca">整型</p></td></tr><tr id="fcaca690" class="ijRowEven"><td id="5fd8fbfd"><p id="7ee91725"><code class="code" data-markx="676"></code></p></td><td id="5c4abf23"><p id="c57818b6">生成中失败的测试数</p></td><td id="215a0147"><p id="a25112de">整型</p></td></tr><tr id="c63c77fa" class="ijRowOdd"><td id="9ef35524"><p id="7fa3c706"><code class="code" data-markx="684"></code></p></td><td id="0ffc021a"><p id="e159b04d">构建中被忽略的测试数</p></td><td id="4b442bcb"><p id="9befdb02">整型</p></td></tr><tr id="7e4cb344" class="ijRowEven"><td id="c4a192f6"><p id="3ea8ba1d"><code class="code" data-markx="692"></code></p></td><td id="2441f02a"><p id="c2f26e3e">构建中的检查错误数</p></td><td id="f63c5fbd"><p id="12b44ff0">整型</p></td></tr><tr id="1b166bfc" class="ijRowOdd"><td id="10cefff2"><p id="0fe117e1"><code class="code" data-markx="700"></code></p></td><td id="5efd71d5"><p id="cf521d88">内部版本中检查警告的数量</p></td><td id="bd6383de"><p id="c239df8b">整型</p></td></tr><tr id="1f10ec9d" class="ijRowEven"><td id="2ac1d436"><p id="9afa0591"><code class="code" data-markx="708"></code></p></td><td id="057a7cd2"><p id="17cefd1d">指示构建是否成功</p></td><td id="be4055cb"><p id="1cf88dc1">0-失败，1-成功</p></td></tr><tr id="171e092c" class="ijRowOdd"><td id="e45f2971"><p id="f48c8e1b"><code class="code" data-markx="716"></code></p></td><td id="74a65e99"><p id="c3e1f8e8">构建排队的时间</p></td><td id="52bce121"><p id="4609ca45">毫秒</p></td></tr></tbody></table></div></div><a name="CustomBuildMetrics"></a><a name="Custom-Build-Metrics"></a><div class="chapter"><h4 id="CustomChart-CustomBuildMetrics">自定义构建指标</h4><p id="d1f611a7">如果预定义的构建指标不能满足您的需求，则可以从构建脚本向TeamCity报告自定义指标，并使用它们来创建自定义图表。有两种方法可以向TeamCity报告自定义指标：</p><ul class="list _ul"><li class="list__item" id="8c7881be"><p>使用您构建中的<a href="build-script-interaction-with-teamcity.html#Reporting-Build-Statistics">服务消息</a> ，</p></li><li class="list__item" id="c8c4bde4"><p>或者（过时的方法）使用<a href="build-script-interaction-with-teamcity.html#Providing-data-using-the-teamcity-info.xml-file">与TeamCity</a>文件的<a href="build-script-interaction-with-teamcity.html#Providing-data-using-the-teamcity-info.xml-file">构建脚本交互</a> 。请注意，自定义值键应该是唯一的，并且不应干扰TeamCity预定义的值键。</p></li></ul><hr id="ee619345"><p id="3848b7e9"><b id="13351f32">也可以看看：</b></p><p id="b39d67c9"><b id="29539a3c">概念</b> ： <a href="code-coverage.html">代码覆盖率</a> | <a href="code-inspection.html">代码检查</a> | <a href="code-duplicates.html">代码重复</a><br><b id="d2535628">用户指南</b> ： <a href="statistic-charts.html">统计图</a><br><b id="f1b6ca18">扩展TeamCity</b> ： <a href="build-script-interaction-with-teamcity.html">与TeamCity建立脚本交互</a> | <a href="https://confluence.jetbrains.com/display/TCD18/Custom+Statistics" rel="noopener noreferrer" data-external="true" target="_blank">自定义统计</a></p><hr id="83b1bb3b"></div></div></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>]]></parameters></extension></project-extensions></div></div></div></article></div></section></main></div></body></html>