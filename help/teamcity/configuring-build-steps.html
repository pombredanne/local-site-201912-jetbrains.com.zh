<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>配置构建步骤-帮助|帮助团队城市</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Configuring Build Steps" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-build-steps.md|Configuring Build Steps/working-with-meta-runner.md|Working with Meta-Runner/net-process-runner.md|.NET Process Runner/ant.md|Ant/command-line.md|Command Line/duplicates-finder-resharper.md|Duplicates Finder (ReSharper)/duplicates-finder-java.md|Duplicates Finder (Java)/fxcop.md|FxCop/gradle.md|Gradle/inspections.md|Inspections/inspections-resharper.md|Inspections (ReSharper)/intellij-idea-project.md|IntelliJ IDEA Project/ipr-deprecated.md|Ipr (deprecated)/maven.md|Maven/msbuild.md|MSBuild/mspec.md|MSpec/nant.md|NAnt/nuget-pack.md|NuGet Pack/nuget-publish.md|NuGet Publish/nuget-installer.md|NuGet Installer/nunit.md|NUnit/powershell.md|PowerShell/rake.md|Rake/simple-build-tool-scala.md|Simple Build Tool (Scala)/visual-studio-2003.md|Visual Studio 2003/visual-studio-sln.md|Visual Studio (sln)/visual-studio-tests.md|Visual Studio Tests/xcode-project.md|Xcode Project/deployers.md|Deployers/smb-upload.md|SMB Upload/ftp-upload.md|FTP Upload/ssh-upload.md|SSH Upload/container-deployer.md|Container Deployer/ssh-exec.md|SSH Exec/docker.md|Docker/docker-compose.md|Docker Compose/net-cli-dotnet.md|.NET CLI (dotnet)" data-main-title="Configuring Build Steps" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/configuring-build-steps.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="configuring-build-steps.md" data-toc="Configuring Build Steps">配置构建步骤</h1><p id="43b61778">创建构建配置时，重要的是配置要执行的构建步骤的顺序。</p><p id="aaacb195">在“ <b id="a6954c48">构建</b> <a href="creating-and-editing-build-configurations.html">配置设置”</a>页面的“ <b id="a6954c48">构建步骤”</b>部分配置<b id="a6954c48">构建步骤</b> ：TeamCity可以自动检测这些步骤，也可以手动添加这些步骤。</p><p id="76dc864a">每个构建步骤由a表示<a href="build-runner.html">构建浇道</a>并且提供与特定的构建或测试工具集成。您可以根据需要向构建配置添加任意多个构建步骤。例如，在编译VS解决方案之前调用NAnt脚本。</p><p id="856f227b">依次调用构建步骤。</p><p id="fae4997a">是否运行下一构建步骤的决定可以取决于先前构建步骤的退出状态和当前构建状态。</p><p id="b66930fc">如果构建过程返回了一个非零的退出代码，则认为构建步骤状态为<i id="692f9289">失败；</i>如果<b id="9690563e">构建过程的退出代码不为零</b> ，则认为<b id="9690563e">Fail</b>构建失败：启用了构建失败条件（请参阅<a href="build-failure-conditions.html">构建失败条件</a> ）；否则，构建步骤将<i id="703a8c79">成功</i> 。</p><p id="e28dffec">请注意，构建步骤和构建的状态可以不同。构建步骤可以成功，但是由于另一个构建失败条件（而不是基于退出代码）（例如测试失败或其他原因），构建可能会失败。另一方面，如果构建步骤失败，则构建也会失败。</p><a name="Executionpolicy"></a><a name="Execution-policy"></a><h3 id="ConfiguringBuildSteps-Executionpolicy">执行政策</h3><p id="066575ca">您可以通过<b id="286a2b60">执行步骤</b>选项指定步骤执行策略：</p><ul class="list _ul"><li class="list__item" id="2421dc50"><p><b id="36695cb5">仅当构建状态成功时</b> ：在开始此步骤之前，构建代理会从服务器请求构建状态，如果状态失败则跳过该步骤。这将考虑服务器处理的故障状况，例如测试故障或度量标准更改的故障。请注意，由于某些故障情况是在服务器上异步处理的（ <a href="https://youtrack.jetbrains.com/issue/TW-17015" rel="noopener noreferrer" data-external="true" target="_blank">TW-17015</a> ），因此这仍然可能不准确</p></li><li class="list__item" id="cab05f20"><p><b id="5993731a">如果先前的所有步骤都成功完成</b> ：该构建仅分析构建代理上的构建步骤状态，并且不向服务器发送请求以检查构建状态，并且仅考虑重要步骤失败。</p></li><li class="list__item" id="bcf633bb"><p><b id="e4542b90">即使先前的某些步骤失败了</b> ：无论先前的步骤状态和构建状态如何，都选择使TeamCity执行此步骤。</p></li><li class="list__item" id="a063ec5b"><p><b id="304d2e29">始终，即使发出了构建停止命令</b> ：选择以确保即使用户取消了构建，也始终执行此步骤。例如，如果您配置了两个步骤并配置了此选项，则在第一步执行过程中停止生成将中断此步骤，而第二步仍将运行。第二次发出stop命令将导致忽略执行策略：构建将终止。</p></li></ul><aside class="tip sideblock" rel="e22dcd43" id="ee6936b0" data-title=""><ul class="list _ul"><li class="list__item" id="d7f8a31d"><p>您可以从原始构建配置设置页面将构建步骤从一个构建配置复制到另一个构建配置。</p></li><li class="list__item" id="a33dff3f"><p>您可以根据需要重新排序构建步骤。请注意，如果您具有从模板继承的构建配置，则无法对继承的构建步骤进行重新排序。但是，即使在继承的构建步骤之前或之间，您也可以在任何位置以任何顺序插入自定义构建步骤（不继承）。继承的构建步骤只能在原始模板中重新排序。</p></li><li class="list__item" id="462bfccc"><p>即使使用构建步骤列表最后一栏中的相应选项从构建配置模板继承构建步骤，也可以临时或永久禁用该步骤。</p></li></ul></aside><a name="Bundledrunners"></a><a name="Bundled-runners"></a><h3 id="ConfiguringBuildSteps-Bundledrunners">捆绑赛跑者</h3><p id="44ffa36f">有关配置各个构建步骤的详细信息，请参阅：</p><ul class="list _links" data-skip-index="skip"><li class="list__item"><a href="working-with-meta-runner.html">与Meta-Runner合作</a></li><li class="list__item"><a href="net-process-runner.html">.NET Process Runner</a></li><li class="list__item"><a href="ant.html">蚂蚁</a></li><li class="list__item"><a href="command-line.html">命令行</a></li><li class="list__item"><a href="duplicates-finder-resharper.html">重复查找器（ReSharper）</a></li><li class="list__item"><a href="duplicates-finder-java.html">重复查找器（Java）</a></li><li class="list__item"><a href="fxcop.html">FxCop</a></li><li class="list__item"><a href="gradle.html">摇篮</a></li><li class="list__item"><a href="inspections.html">视察</a></li><li class="list__item"><a href="inspections-resharper.html">检查（ReSharper）</a></li><li class="list__item"><a href="intellij-idea-project.html">IntelliJ IDEA项目</a></li><li class="list__item"><a href="ipr-deprecated.html">Ipr（已弃用）</a></li><li class="list__item"><a href="maven.html">马文</a></li><li class="list__item"><a href="msbuild.html">MSBuild</a></li><li class="list__item"><a href="mspec.html">规格书</a></li><li class="list__item"><a href="nant.html">南特</a></li><li class="list__item"><a href="nuget-pack.html">NuGet包</a></li><li class="list__item"><a href="nuget-publish.html">NuGet发布</a></li><li class="list__item"><a href="nuget-installer.html">NuGet安装程序</a></li><li class="list__item"><a href="nunit.html">NUnit</a></li><li class="list__item"><a href="powershell.html">电源外壳</a></li><li class="list__item"><a href="rake.html">耙</a></li><li class="list__item"><a href="simple-build-tool-scala.html">简单构建工具（Scala）</a></li><li class="list__item"><a href="visual-studio-2003.html">Visual Studio 2003</a></li><li class="list__item"><a href="visual-studio-sln.html">Visual Studio（sln）</a></li><li class="list__item"><a href="visual-studio-tests.html">Visual Studio测试</a></li><li class="list__item"><a href="xcode-project.html">Xcode项目</a></li><li class="list__item"><a href="deployers.html">部署者</a><ul class="list _links"><li class="list__item"><a href="smb-upload.html">SMB上传</a></li><li class="list__item"><a href="ftp-upload.html">FTP上传</a></li><li class="list__item"><a href="ssh-upload.html">SSH上传</a></li><li class="list__item"><a href="container-deployer.html">容器部署器</a></li><li class="list__item"><a href="ssh-exec.html">SSH执行</a></li></ul></li><li class="list__item"><a href="docker.html">码头工人</a></li><li class="list__item"><a href="docker-compose.html">Docker撰写</a></li><li class="list__item"><a href="net-cli-dotnet.html">.NET CLI（dotnet）</a></li></ul><hr id="96d41b3c"><p id="cead6d13"><b id="8e48e761">也可以看看：</b></p><p id="1adc285c"><b id="40134529">概念</b> ： <a href="build-runner.html">Build Runner</a></p><hr id="a0ee7701"></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>