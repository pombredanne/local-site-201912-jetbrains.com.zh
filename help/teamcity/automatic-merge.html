<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Automatic Merge - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Automatic Merge" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/adding-build-features.md|Adding Build Features/automatic-merge.md|Automatic Merge" data-main-title="Automatic Merge" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/automatic-merge.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Automatic Merge" id="automatic-merge.md">Automatic Merge</h1><p id="c79da757">The <i id="0a27a019">Automatic Merge</i> build feature tracks builds in branches matched by the configured filter and merges them into a specified destination branch if the build satisfies the condition configured (for example, the build is successful).<br>The feature is supported for Git and Mercurial VCS roots for build configurations with enabled <a href="working-with-feature-branches.html">feature branches</a>.<br>TeamCity also allows merging branches <a href="working-with-feature-branches.html#Manual-branch-merging">manually</a>.</p><p id="8ff8ad18">On this page:</p><p id="57419cd3"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#AutomaticMerge-AutomaticMergeSettings">Automatic Merge Settings</a></li><li class="list__item"><a href="#AutomaticMerge-CascadingMerge">Cascading Merge</a></li></ul></p><a name="AutomaticMergeSettings"></a><a name="Automatic-Merge-Settings"></a><div class="chapter"><h2 id="AutomaticMerge-AutomaticMergeSettings">Automatic Merge Settings</h2><p id="1173f408">Check <a href="adding-build-features.html">Adding Build Features</a> for notes on how to add a build feature.<br>All branches that are used in this feature <b id="5d8b624c">must</b> be present in a repository and included into the <b id="cc1fa41a">Branch Specification</b> of the current build configuration.</p><div class="table-wrapper"><table width="100%" id="1bbd5da4"><thead><tr id="38bd65ad" class="ijRowHead"><th id="6c0480d1"><p id="6002d917">Option</p></th><th id="fd6ab25f"><p id="617a2402">Description</p></th></tr></thead><tbody><tr id="9c840acc" class="ijRowOdd"><td id="8c6b7241"><p id="5b83d02b">Watch builds in branches</p></td><td id="fd18bec8"><p id="a71ffbe4">Specify the branches whose builds' sources will be merged. Read more in <a href="branch-filter.html">Branch Filter</a>.</p></td></tr><tr id="cf2d35f5" class="ijRowEven"><td id="fc1ca6cf"><p id="111bb51a">Merge into branch</p></td><td id="68ef5c3c"><p id="7c4e059d">A <a href="working-with-feature-branches.html#Logical-branch-name">logical name</a> of the destination branch the sources will be merged to. Parameter references are supported here. The branch <b id="160c2b6c">must</b> be present in a repository and included into the <b id="f95c65be">Branch Specification</b>.</p></td></tr><tr id="b4aabc95" class="ijRowOdd"><td id="919790b1"><p id="79f31971">Merge commit message</p></td><td id="4e58b17c"><p id="77f9dd91">A message for a merge commit. The default is set to <code class="code">Merge branch '%teamcity.build.branch%'</code>. Parameter references are supported here.</p></td></tr><tr id="be0c71c8" class="ijRowEven"><td id="36790732"><p id="7a7eb607">Perform merge if</p></td><td id="2caa1d30"><p id="fc582844">A condition defining when the merge will be performed (either for successful builds only, or if build from the branch does not add new problems to destination branch).</p></td></tr><tr id="7ffebcb0" class="ijRowOdd"><td id="6c13a462"><p id="126827fa">Merge policy</p></td><td id="43d70d27"><p id="0a17256f">Select to create a merge commit or do a fast-forward merge.</p></td></tr><tr id="ebe62660" class="ijRowEven"><td id="c2b1e5d3"><p id="f4da69b9">Run policy</p></td><td id="c84b486d"><p id="a791bcf8">Choose when to merge:</p><ul class="list _ul"><li class="list__item" id="30740ff7"><p><i id="d193888b">Merge after build finish</i>: the build finishes, and then the merge starts. The build duration does not include the merging time. Dependent builds can start even if merging is still in process.</p></li><li class="list__item" id="8341df9f"><p><i id="763baa02">Merge before build finish</i>: the build is considered finished only when the merge is completed. Dependent builds will start only after the merge is completed.</p></li></ul></td></tr></tbody></table></div></div><a name="CascadingMerge"></a><a name="Cascading-Merge"></a><div class="chapter"><h2 id="AutomaticMerge-CascadingMerge">Cascading Merge</h2><p id="89b14aa9">It is possible to define a cascade of merge operations by adding several such build features to a build configuration.</p><p id="c2eb8858">For example, you want to automatically merge all feature branches into an <code class="code">integration</code> branch, and then configure another merge from the <code class="code">integration</code> to the default branch. To achieve this, you can add two <i id="e8530860">Automatic Merge</i> build features: one watching <code class="code">+:feature-*</code> branches and merging into <code class="code">integration</code> branch and the second watching <code class="code">+:integration</code> branch and merging into <code class="code">default</code> branch. The build configuration should then allow for building <code class="code">feature-*</code> and <code class="code">integration</code> branches.</p><p id="8b88f181">See also a related <a href="http://blog.jetbrains.com/teamcity/2013/10/automatic-merge/" data-external="true" target="_blank" rel="noopener noreferrer">TeamCity blog post</a>.</p><hr id="31312c9a"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>