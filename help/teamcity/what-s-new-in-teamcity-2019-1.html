<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>TeamCity 2019.1的新增功能-帮助|帮助团队城市</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="What's New in TeamCity 2019.1" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/what-s-new-in-teamcity-2019.1.md|What's New in TeamCity 2019.1" data-main-title="What's New in TeamCity 2019.1" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/what-s-new-in-teamcity-2019.1.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="what-s-new-in-teamcity-2019.1.md" data-toc="What's New in TeamCity 2019.1">TeamCity 2019.1的新增功能</h1><p id="6ef81954"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-NewTeamCitydocumentationwebsite">新的TeamCity文档网站</a></li><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-RevampedexperimentalTeamCityUI">改良的实验版TeamCity UI</a></li><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-SupportforGitLab">对GitLab的支持</a><ul class="list _bullet"><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-SupportforGitLabmergerequests">支持GitLab合并请求</a></li></ul></li><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-SupportforBitbucketServerpullrequests">支持Bitbucket Server拉取请求</a></li><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-TeamCitymultinodesetupimprovements">TeamCity多节点设置改进</a><ul class="list _bullet"><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-Cachedconfigurationfilesonnodes">节点上的缓存配置文件</a></li></ul></li><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-ImprovementsforAmazonspotinstances">Amazon Spot实例的改进</a><ul class="list _bullet"><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-AWSSpotFleetrequests">AWS Spot Fleet请求</a></li><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-Otherimprovements">其他改进</a></li></ul></li><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-Buildartifactspublishingoptions">构建工件发布选项</a></li><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-Golanguagesupport">Go语言支持</a></li><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-Usingsnapshotdependencieswithoutsynchronizingrevisions">使用快照依赖项而不同步修订</a></li><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-BranchfilterforVCSofbuildconfiguration">用于构建配置的VCS的分支过滤器</a></li><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-Logoutofallsessions">注销所有会话</a></li><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-Token-basedauthentication">基于令牌的身份验证</a></li><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-PermanenttokenforauthenticationinTeamCity-YouTrackintegration">TeamCity-YouTrack集成中用于身份验证的永久令牌</a></li><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-Cancelingbuildviaservicemessage">通过服务消息取消构建</a></li><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-Fasteragentsupgrade">更快的代理商升级</a></li><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-SeparateMavenartifactrepositoryforallbuildsonagent">适用于代理上所有构建的单独的Maven工件存储库</a></li><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-Otherimprovements2">其他改进</a></li><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-Knownissues">已知的问题</a></li><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-Fixedissues">解决的问题</a></li><li class="list__item"><a href="#WhatsNewinTeamCity2019.1-Previousreleases">先前版本</a></li></ul><p></p><a name="NewTeamCitydocumentationwebsite"></a><a name="New-TeamCity-documentation-website"></a><div class="chapter"><h2 id="WhatsNewinTeamCity2019.1-NewTeamCitydocumentationwebsite">新的TeamCity文档网站</h2><p id="afd15702">我们对TeamCity 2019.1的文档进行了重新整理，以创建更好的用户体验，并确保所有公司产品的文档中的外观均相同。</p><p id="0272e06f">在<a href="https://www.jetbrains.com/help/teamcity/teamcity-documentation.html" rel="noopener noreferrer" data-external="true" target="_blank">新的文档网站</a>上可以访问主要产品文档。</p><p id="c2d8038b">现在，“插件开发帮助”位于<a href="https://plugins.jetbrains.com/docs/teamcity/developing-teamcity-plugins.html" rel="noopener noreferrer" data-external="true" target="_blank">单独的位置</a> ，其源文件已移至公共<a href="https://github.com/JetBrains/teamcity-sdk-docs" rel="noopener noreferrer" data-external="true" target="_blank">GitHub存储库，</a>因此我们的社区可以对此做出贡献。</p><p id="27b802db">Confluence中提供<a href="https://confluence.jetbrains.com/display/TW/Documentation" rel="noopener noreferrer" data-external="true" target="_blank">了以前版本</a>的<a href="https://confluence.jetbrains.com/display/TW/Documentation" rel="noopener noreferrer" data-external="true" target="_blank">文档</a> 。</p></div><a name="RevampedexperimentalTeamCityUI"></a><a name="Revamped-experimental-TeamCity-UI"></a><div class="chapter"><h2 id="WhatsNewinTeamCity2019.1-RevampedexperimentalTeamCityUI">改良的实验版TeamCity UI</h2><p id="64697305">新的TeamCity版本带有重新设计的UI，旨在改善您对产品的体验。</p><p id="fa533c1c"></p><figure><img alt="樱UI" title="樱UI" src="/help/img/teamcity/2019.1/SakuraUI.png" id="f21a02a9" width="1000px" height="1394"></figure><p></p><ul class="list _ul"><li class="list__item" id="6a53b825"><p id="bb3e9e10"><b id="647bc2f7">新的侧边栏</b> ：现在，您可以轻松地从侧边栏访问和搜索所有项目以及构建配置，将构建配置或整个项目标记为收藏夹，以在侧边栏顶部看到它们。新更改，构建状态，新测试和正在运行的构建：所有这些现在都可见。</p></li><li class="list__item" id="07bd3bfe"><p id="5ed421a4">重新设计的<b id="dd97c976">Project Home</b>页面提供了有关构建配置的仪表板样式视图。每种配置都有其自己的卡，该卡显示直方图以及最多14个最新版本。状态，构建时间以及队列中的时间也可用。单击单个卡将带您到此构建配置的概述。</p></li><li class="list__item" id="12e85b7f"><p id="c6c4eebc">改进的“ <b id="1d51d302">分支”</b>选项卡：现在将分支划分为多个类别，您可以根据需要展开和折叠它们。这有助于您概览分支机构并方便地浏览它们。</p><figure><img alt="樱花店" title="樱花店" src="/help/img/teamcity/2019.1/SakuraBranches.png" id="b4b48951" width="600" height="990"></figure><p></p></li><li class="list__item" id="e6f4c38c"><p id="466e2911">可扩展的<b id="f23df8e3">构建行</b> ：现在，TeamCity可以在页面上显示有关构建的更多信息，如果您需要特定构建的详细信息，请单击该行将展开该行，以提供更多信息。</p></li><li class="list__item" id="b8fbe240"><p id="dbbf2002">新版UI处于<b id="2e644e97">实验</b>阶段，您可以使用屏幕右上角的图标切换到新版。您的个人资料中还有一个新设置，默认情况下启用实验性用户界面。由于新UI并不支持所有功能，因此在需要时很容易回到经典的TeamCity风格。</p></li></ul></div><a name="SupportforGitLab"></a><a name="Support-for-GitLab"></a><div class="chapter"><h2 id="WhatsNewinTeamCity2019.1-SupportforGitLab">对GitLab的支持</h2><p id="be4682fe">TamCity 2019.1支持GitLab。它允许创建到<a href="https://about.gitlab.com/" rel="noopener noreferrer" data-external="true" target="_blank">GitLab.com</a>和<a href="https://about.gitlab.com/install/ce-or-ee/" rel="noopener noreferrer" data-external="true" target="_blank">GitLab CE / EE的</a> <a href="integrating-teamcity-with-vcs-hosting-services.html#Connecting-to-GitLab">连接</a> ，因此在创建新项目或构建配置时，您可以轻松地选择预定义的GitLab存储库。<br>为了能够在连接期间向GitLab进行身份验证，请<a href="https://docs.gitlab.com/ee/integration/oauth_provider.html" rel="noopener noreferrer" data-external="true" target="_blank">使用以下命令</a>在GitLab中注册<a href="https://docs.gitlab.com/ee/integration/oauth_provider.html" rel="noopener noreferrer" data-external="true" target="_blank">OAuth应用程序：</a> <code class="code">api</code>和<code class="code">read_repository</code>范围并生成机密和应用程序ID。<br>添加新连接时，输入密码和应用程序ID以及GitLab服务器URL。</p><p id="d600dbb6"></p><figure><img alt="连连看" title="连连看" src="/help/img/teamcity/2019.1/GitLabConnection.png" id="25e89099" width="600" height="1045"></figure><p></p><a name="SupportforGitLabmergerequests"></a><a name="Support-for-GitLab-merge-requests"></a><div class="chapter"><h3 id="WhatsNewinTeamCity2019.1-SupportforGitLabmergerequests">支持GitLab合并请求</h3><p id="d3ad8404">我们还增加了对<a href="pull-requests.html#GitLab-Merge-Requests">GitLab合并请求的</a>支持，因此，您现在可以设置TeamCity在每个合并请求上自动运行构建，并在构建成功后自动批准。</p></div></div><a name="SupportforBitbucketServerpullrequests"></a><a name="Support-for-Bitbucket-Server-pull-requests"></a><div class="chapter"><h2 id="WhatsNewinTeamCity2019.1-SupportforBitbucketServerpullrequests">支持Bitbucket Server拉取请求</h2><p id="f8ce0052">现在，“ <a href="pull-requests.html">拉取请求”</a>构建功能可以检测在Bitbucket Server中创建的拉取请求。<br>要添加Bitbucket VCS根目录，请选择<i id="4f7507a3">Bitbucket Server</i>作为<i id="f4378d9c">VSC托管类型</i>并配置连接参数：</p><ul class="list _ul"><li class="list__item" id="99fe198c"><p>身份验证类型：VCS根凭据或用户名/密码</p></li><li class="list__item" id="ca82d9e1"><p>按目标公关部门过滤</p></li><li class="list__item" id="33f7b9ff"><p>Bitbucket服务器的基本URL</p></li></ul><p id="18a38c8e"></p><figure><img alt="PR BitbucketServer" title="公关BitbucketServer" src="/help/img/teamcity/2019.1/PR_BitbucketServer.png" id="c6194799" width="600" height="1072"></figure><p></p></div><a name="TeamCitymultinodesetupimprovements"></a><a name="TeamCity-multinode-setup-improvements"></a><div class="chapter"><h2 id="WhatsNewinTeamCity2019.1-TeamCitymultinodesetupimprovements">TeamCity多节点设置改进</h2><p id="85b92b82">为了提高TeamCity的可伸缩性，我们正在努力建立集群的能力，该集群中的主节点在其他节点之间分配不同的职责，并处理升级，许可，诊断和服务器配置等任务。这种多节点设置意味着所有辅助节点都是统一的，并且可以以可互换的方式执行所有任务。<br>除了可以由辅助节点执行的任务之外，在此版本中，还可以为辅助节点分配“处理构建生命周期”职责，该职责将主服务器从与构建相关的任务中释放出来，例如处理构建消息。来自代理商，并可以大大增加代理商的数量。<br>结果，可以启动单个辅助节点并为其分配多个职责，或者在多个辅助节点之间分配这些职责：</p><ul class="list _ul"><li class="list__item" id="8789a2ca"><p>VCS变更收集</p></li><li class="list__item" id="abfaf7d3"><p>运行构建处理</p></li><li class="list__item" id="8bcdd259"><p>用作只读备份节点：以只读模式提供用户界面</p></li></ul><a name="Cachedconfigurationfilesonnodes"></a><a name="Cached-configuration-files-on-nodes"></a><div class="chapter"><h3 id="WhatsNewinTeamCity2019.1-Cachedconfigurationfilesonnodes">节点上的缓存配置文件</h3><p id="2a9d55be">在多节点设置中，TeamCity数据目录通过网络在辅助节点之间共享。当辅助节点启动时，它将读取位于共享数据目录中的配置文件。在具有数千个项目和构建配置的大型设置中，从网络存储中下载大量文件可能会花费大量时间。<br>在TeamCity 2019.1中，我们通过创建存储在节点本地数据目录下的配置文件缓存来优化此操作。这些文件在第一个节点启动时被缓存，然后在运行时更新，这使得下一次启动更快。</p></div></div><a name="ImprovementsforAmazonspotinstances"></a><a name="Improvements-for-Amazon-spot-instances"></a><div class="chapter"><h2 id="WhatsNewinTeamCity2019.1-ImprovementsforAmazonspotinstances">Amazon Spot实例的改进</h2><a name="AWSSpotFleetrequests"></a><a name="AWS-Spot-Fleet-requests"></a><div class="chapter"><h3 id="WhatsNewinTeamCity2019.1-AWSSpotFleetrequests">AWS Spot Fleet请求</h3><p id="563d1e7c">现在，您可以配置<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/spot-fleet.html" rel="noopener noreferrer" data-external="true" target="_blank">竞价型队列</a> （实例集合）来运行映像，这可以通过始终利用足够的实例来削减成本。<br>要为现货机队配置分配策略，请打开AWS管理控制台并转到<b id="8f8447c6">EC2 |</b> AWS <b id="8f8447c6">。现货请求|请求竞价型实例</b> 。在这里，您可以选择策略，设置目标容量，添加标签等。有关可用参数的更多信息， <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/spot-fleet-requests.html" rel="noopener noreferrer" data-external="true" target="_blank">请</a>参阅<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/spot-fleet-requests.html" rel="noopener noreferrer" data-external="true" target="_blank">现货机队请求</a> 。完成后，将配置下载为JSON文件。现在，您可以将此配置添加到TeamCity中的Amazon映像的设置。在“ <i id="1228a9fd">源</i> ”下拉列表中选择“ <i id="161aed57">竞价型实例队列</i> ”，将JSON配置插入下面的文本区域，然后保存新的图像配置。</p><p id="b49d030a"></p><figure><img alt="SpotFleetConfig" title="SpotFleetConfig" src="/help/img/teamcity/2019.1/SpotFleetConfig.png" id="0e2989c5" width="600" height="1276"></figure><p></p><p id="7430a266">您可以在“ <b id="db08ad8e">代理” |</b> “ <b id="db08ad8e">代理”</b>上监视所有正在运行的实例的状态。 <b id="db08ad8e">云</b>标签。</p></div><a name="Otherimprovements"></a><a name="Other-improvements"></a><div class="chapter"><h3 id="WhatsNewinTeamCity2019.1-Otherimprovements">其他改进</h3><p id="297b9a6e">根据EC2服务如何管理实例，我们使<a href="setting-up-teamcity-for-amazon-ec2.html#Amazon-EC2-Spot-Instances-support">现货实例</a>的“最高价格”值可选，因此可以像按需<a href="setting-up-teamcity-for-amazon-ec2.html#Amazon-EC2-Spot-Instances-support">实例</a>一样启动它们。</p></div></div><a name="Buildartifactspublishingoptions"></a><a name="Build-artifacts-publishing-options"></a><div class="chapter"><h2 id="WhatsNewinTeamCity2019.1-Buildartifactspublishingoptions">构建工件发布选项</h2><p id="ff6aa2ac">构建工件可能包括分发程序包，日志文件，报告等，占用了大量存储空间。当构建经常失败时，您可能只想将工件发布限制为成功的构建，以节省磁盘空间。<br>在其他情况下，即使构建已中断，您也可能需要调查工件。<br>为了支持所有这些情况，我们添加了两个新选项，用于将构件发布到构建配置的“常规设置”中。</p><p id="c4066e05">现在，您可以选择何时发布工件：</p><ul class="list _ul"><li class="list__item" id="719dba93"><p><i id="6a0de9dd">即使构建失败</i> （默认）：如在TeamCity的先前版本中一样，如果先前的所有步骤都已成功完成或未成功，则构件会在构建的最后一步发布。如果发出“停止”命令，则不会发布工件。</p></li><li class="list__item" id="472edb9e"><p><i id="de6b2acb">仅当构建状态为成功</i> （ <b id="76ddc844">新</b> ）时：如果先前的所有步骤均已成功完成，则在构建的最后一步发布工件。在发布构件之前，TeamCity检查服务器上的当前构建状态。</p></li><li class="list__item" id="f207a979"><p><i id="417fc256">始终，即使发出了build stop命令</i> （ <b id="862d1144">新</b> ）：也会为所有构建发布工件，即使是中断的工件也可以发布工件（例如，在发出“ stop”命令后或超时后，在构建失败条件中指定了工件） 。</p></li></ul></div><a name="Golanguagesupport"></a><a name="Go-language-support"></a><div class="chapter"><h2 id="WhatsNewinTeamCity2019.1-Golanguagesupport">Go语言支持</h2><p id="5a20edda">TeamCity现在支持Go语言：</p><p id="a49f6649">要构建Go项目：</p><ol class="list _decimal"><li class="list__item" id="176c1542"><p>确保在代理上安装了Go编译器。</p></li><li class="list__item" id="b057ee0e"><p>将“ <i id="b6af01b5">Golang</i> ”构建功能添加到构建配置中。</p></li></ol><p id="1f0bda81">要在TeamCity UI中查看Go测试，请使用<code class="code">-json</code>标志添加到<a href="command-line.html">命令行</a>构建运行器的脚本中： <code class="code">go test -json</code>或添加<code class="code">env.GOFLAGS = -json</code>构建配置的参数。</p><p id="167bb234"></p><figure><img alt="GoEnvParameter" title="GoEnvParameter" src="/help/img/teamcity/2019.1/GoEnvParameter.png" id="0859c8b3" width="600" height="702"></figure><p></p><aside class="note " rel="167bb234" id="db8926e1" data-title=""><p id="fdbad796">确保仅使用一种方法来设置<code class="code">-json</code>旗。在构建参数和运行者脚本中都设置它会使Go无法构建。</p></aside></div><a name="Usingsnapshotdependencieswithoutsynchronizingrevisions"></a><a name="Using-snapshot-dependencies-without-synchronizing-revisions"></a><div class="chapter"><h2 id="WhatsNewinTeamCity2019.1-Usingsnapshotdependencieswithoutsynchronizingrevisions">使用快照依赖项而不同步修订</h2><p id="288c2fd5">在TeamCity构建链中，所有通过快照依赖关系链接的构建都使用源代码的同步修订版，但是在某些情况下，这可能是不可取的。<br>在此版本中，您可以通过“ <i id="ea6079e4">强制修订同步”</i>选项禁用快照依赖项中的<i id="ea6079e4">修订同步</i> ，例如，在将较旧的构建升级为部署构建配置时。该构建将使用最新的部署脚本运行。</p><p id="feafb692"></p><figure><img alt="EnforceRevisionSync" title="EnforceRevisionSync" src="/help/img/teamcity/2019.1/EnforceRevisionSync.png" id="11a7291d" width="600" height="721"></figure><p></p></div><a name="BranchfilterforVCSofbuildconfiguration"></a><a name="Branch-filter-for-VCS-of-build-configuration"></a><div class="chapter"><h2 id="WhatsNewinTeamCity2019.1-BranchfilterforVCSofbuildconfiguration">用于构建配置的VCS的分支过滤器</h2><p id="b50d09f0">我们在构建配置的<a href="configuring-vcs-settings.html">版本控制设置</a>中添加了分支过滤器，类似于构建触发器或测试详细信息中的过滤器。在TeamCity的早期版本中，VCS设置仅允许在默认分支中禁用构建，但是分支过滤器提供了更灵活的方法。要过滤分支，请使用<a href="working-with-feature-branches.html">配置分支中</a>描述的语法。</p><p id="4805fdb7">在任何其他分支过滤器之前应用VCS分支过滤器，并限制自定义构建对话框中显示的分支，触发器可见的分支以及快照相关性的更改。</p></div><a name="Logoutofallsessions"></a><a name="Log-out-of-all-sessions"></a><div class="chapter"><h2 id="WhatsNewinTeamCity2019.1-Logoutofallsessions">注销所有会话</h2><p id="d0bf0878">如果用户的密码遭到破坏，并在TeamCity服务器上启用了内置身份验证，则更改用户密码并不意味着该用户已退出所有当前正在进行的会话，这有潜在的安全风险。<br>现在，您的用户配置文件中有一个新选项，“ <b id="f6d04ea1">注销所有会话”</b> ，迫使TeamCity使具有该用户集的所有用户会话（包括当前用户会话）无效。管理员帐户还可以选择强制用户注销所有会话。也可以使用“ <b id="0be08b7c">管理” |</b> “ <b id="0be08b7c">管理”</b>上的相应选项注销所有用户<b id="0be08b7c">。认证</b>页面。</p></div><a name="Token-basedauthentication"></a><a name="Token-based-authentication"></a><div class="chapter"><h2 id="WhatsNewinTeamCity2019.1-Token-basedauthentication">基于令牌的身份验证</h2><p id="b1727bfd">除了通过凭证进行基本身份验证外，TeamCity现在还支持基于永久访问令牌的身份验证。使用令牌，您无需在脚本中公开用户登录名和密码。令牌对于REST API身份验证也很有用。<br>您可以在“ <b id="e4fb6f99">身份验证”</b>页面的高级模式下启用/禁用基于令牌的身份验证模块：</p><p id="f93bd1fe"></p><figure><img alt="令牌验证" title="令牌验证" src="/help/img/teamcity/2019.1/TokenAuth.png" id="ff034e9b" width="1000px" height="1076"></figure><p></p></div><a name="PermanenttokenforauthenticationinTeamCity-YouTrackintegration"></a><a name="Permanent-token-for-authentication-in-TeamCity-YouTrack-integration"></a><div class="chapter"><h2 id="WhatsNewinTeamCity2019.1-PermanenttokenforauthenticationinTeamCity-YouTrackintegration">TeamCity-YouTrack集成中用于身份验证的永久令牌</h2><p id="34e354f2">如果您将TeamCity与YouTrack集成在一起使用，则应该知道登录密码身份验证已被弃用，YouTrack将很快不再支持。</p><p id="b4e7adf8">现在，TeamCity-YouTrack集成支持REST API调用中基于令牌的授权。建议您获取令牌，并在<b id="8aeb202f">项目设置|项目设置|事件</b>跟踪器的连接设置中指定令牌<b id="8aeb202f">。问题跟踪器</b>页面。</p></div><a name="Cancelingbuildviaservicemessage"></a><a name="Canceling-build-via-service-message"></a><div class="chapter"><h2 id="WhatsNewinTeamCity2019.1-Cancelingbuildviaservicemessage">通过服务消息取消构建</h2><p id="0f2d2ed5">例如，当您需要从脚本中取消构建时，由于环境的原因，构建无法正常进行，或者应从子进程中取消构建，则可以通过TeamCity REST API传递构建ID来进行，服务器URL以及脚本的身份验证参数（用户名和密码）。<br>现在，TeamCity提供了一种使用服务消息的更优雅的方法，只需在构建脚本中添加一行，告诉TeamCity取消构建即可。如果需要，您可以在取消构建后将其重新添加到队列中：</p><div class="code-block" data-lang="bash">回声## teamcity [buildStop comment ='取消评论'readdToQueue ='true']</div><p id="f6be5c9e">阅读有关<a href="build-script-interaction-with-teamcity.html">TeamCity服务消息的</a>更多<a href="build-script-interaction-with-teamcity.html">信息</a> 。</p></div><a name="Fasteragentsupgrade"></a><a name="Faster-agents-upgrade"></a><div class="chapter"><h2 id="WhatsNewinTeamCity2019.1-Fasteragentsupgrade">更快的代理商升级</h2><p id="8f8dc0e1">以前，构建代理在服务器升级后立即从服务器下载了所有可用工具，这可能会极大地加载服务器并降低其速度。为了减少代理程序的请求对服务器的影响并加快代理程序的升级，代理程序现在仅在启动要求这些工具的第一个构建时才从服务器下载工具。已下载的工具存储在代理程序上，因此构建无需花时间再次下载它们。</p></div><a name="SeparateMavenartifactrepositoryforallbuildsonagent"></a><a name="Separate-Maven-artifact-repository-for-all-builds-on-agent"></a><div class="chapter"><h2 id="WhatsNewinTeamCity2019.1-SeparateMavenartifactrepositoryforallbuildsonagent">适用于代理上所有构建的单独的Maven工件存储库</h2><p id="df99314a">我们已经更改了Maven的<a href="maven.html#Local-Artifact-Repository-Settings">本地工件存储库设置</a>选择，并添加了一个选项来为代理运行的所有构建创建单独的存储库。</p><p id="ecef3938">这是更改的内容：</p><div class="table-wrapper"><table class=" wide" width="100%" id="cefa913c"><thead><tr id="dc4200a8" class="ijRowHead"><th id="abcaf51e"><p id="947833d5">旧选项</p></th><th id="3f96f8d6"><p id="3714dc92">新选项</p></th><th id="a5843834"><p id="65512205">描述</p></th></tr></thead><tbody><tr id="621e7aee" class="ijRowOdd"><td id="38b11656"><ul class="list _ul"></ul></td><td id="2730304a"><p id="b2417cf4">每个代理（默认）</p></td><td id="8aae3b13"><p id="69560b88">使用单独的存储库在代理系统目录下存储由代理运行的所有构建生成的工件。</p></td></tr><tr id="12351a6f" class="ijRowEven"><td id="923bd88e"><p id="9a4f37fc">启用“为此构建配置使用自己的本地存储库”</p></td><td id="116db8db"><p id="c876d7a0">每个构建配置</p></td><td id="eee21487"><p id="f39a4697">使用单独的存储库来存储由当前构建配置的所有构建产生的工件。</p></td></tr><tr id="63591dfc" class="ijRowOdd"><td id="e166fb86"><p id="d7d5709d">禁用“为此构建配置使用自己的本地存储库”</p></td><td id="bccbd80c"><p id="a3bbf59d">Maven默认</p></td><td id="36a6ba53"><p id="463d0b23">使用默认的Maven存储库位置。该存储库在计算机上的所有构建配置和所有代理之间共享。</p></td></tr></tbody></table></div></div><a name="Otherimprovements"></a><a name="Other-improvements"></a><div class="chapter"><h2 id="WhatsNewinTeamCity2019.1-Otherimprovements2">其他改进</h2><ul class="list _ul"><li class="list__item" id="0e54bb6f"><p>如果将“ <i id="987c99e1">Docker支持</i> ”功能添加到构建配置中，TeamCity服务器将自动为已安装的Docker添加代理要求，因此构建将仅在兼容代理上运行。</p></li><li class="list__item" id="2604a25d"><p>从此版本开始，TeamCity在相关的运行程序中支持Visual Studio 2019： <a href="visual-studio-sln.html">Visual Studio（sln）</a> ， <a href="msbuild.html">MSBuild</a> ， <a href="visual-studio-tests.html">Visual Studio测试</a> ， <a href="inspections-resharper.html">Inspections（ReSharper）</a> ， <a href="duplicates-finder-resharper.html">重复项Finder（ReSharper）</a> 。</p></li><li class="list__item" id="0f432b2f"><p>调查自动分配器有一个新选项“ <i id="9d5fde4a">第二次失败</i> ”，可以防止用户分配不稳定的测试/问题。仅当故障连续第二次重复发生时，才指派用户调查故障。</p></li><li class="list__item" id="e4299db1"><p>用于根据构建功能设置代理要求的新API。</p></li><li class="list__item" id="a3de8438"><p>以前的<i id="b0fa551b">GitHub Pull Requests</i>插件用于<i id="d4beb6f5">Pull Requests</i> 。</p></li><li class="list__item" id="b439defe"><p>服务器启动性能已得到改善。</p></li><li class="list__item" id="63d6c196"><p><b id="04a58482"><a href="investigating-and-muting-build-failures.html#Viewing-My-Investigations">我的调查</a></b>页面现在显示当前正在运行的构建中的失败。</p></li><li class="list__item" id="9412e017"><p>现在， <a href="supported-platforms-and-environments.html#Supported-.NET-platform-build-runners">构建运行器</a>支持.NET Framework 4.8。</p></li></ul></div><a name="Knownissues"></a><a name="Known-issues"></a><div class="chapter"><h2 id="WhatsNewinTeamCity2019.1-Knownissues">已知的问题</h2><ul class="list _ul"><li class="list__item" id="6530ffd8"><p id="91b7ba29">当您使用.NET CLI运行试图通过某些NuGet命令传递凭据的生成时，您可能会收到以下错误之一。</p><ul class="list _ul"><li class="list__item" id="13e3a5fd"><p>如果已安装.NET Core SDK 2.x，但其版本早于2.1.400：<br>“ <i id="581df3c2">无法加载文件或程序集'System。运行时，版本= <version>，文化=中性，PublicKeyToken = <key>或其依赖项之一。该系统找不到指定的文件。</key></version></i> ”</p></li><li class="list__item" id="54923e49"><p>如果您的服务器上仅安装了.NET Core SDK 3.0：<br>“ <i id="31340111"><path>如果在代理上仅安装了dotnet 3.0版，则</path>在路径中找不到插件<path>。</path></i> ”</p></li></ul><p id="f34f443a">若要解决这些问题中的任何一个，我们建议您在当前SDK版本之外另外安装.NET Core SDK 1.x和/或2.1.400或更高版本。</p></li><li class="list__item" id="33c62f2f"><p id="ee23ce8c">如果您将Docker映像和Windows Server 2019与进程隔离一起使用，则构建代理可能无法启动。要变通解决此问题，请使用<code class="code">hyper-v</code> Docker容器的隔离：</p><div class="code-block" data-lang="bash">un --isolation = hyperv…</div></li></ul></div><a name="Fixedissues"></a><a name="Fixed-issues"></a><div class="chapter"><h2 id="WhatsNewinTeamCity2019.1-Fixedissues">解决的问题</h2><p id="64b04b0d"><a href="https://confluence.jetbrains.com/display/TW/TeamCity+2019.1+Release+Notes" rel="noopener noreferrer" data-external="true" target="_blank">已解决问题的完整列表</a></p></div><a name="Previousreleases"></a><a name="Previous-releases"></a><div class="chapter"><h2 id="WhatsNewinTeamCity2019.1-Previousreleases">先前版本</h2><p id="9cad8c1b"><a href="https://confluence.jetbrains.com/display/TCD18/What's+New+in+TeamCity+2018.2" rel="noopener noreferrer" data-external="true" target="_blank">TeamCity 2018.2的新增功能</a></p><hr id="b56bb141"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>