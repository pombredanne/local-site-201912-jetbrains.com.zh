<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>IntelliJ IDEA - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="IntelliJ IDEA" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-unit-testing-and-code-coverage.md|Configuring Unit Testing and Code Coverage/configuring-java-code-coverage.md|Configuring Java Code Coverage/intellij-idea.md|IntelliJ IDEA" data-main-title="IntelliJ IDEA" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/intellij-idea.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="IntelliJ IDEA" id="intellij-idea.md">IntelliJ IDEA</h1><p id="a39c59d3">The IntelliJ IDEA coverage engine in TeamCity is the same engine that is used within IntelliJ IDEA to measure code coverage. This coverage attaches to the JVM as a java agent and instruments classes on the fly when they are loaded by the JVM. In particular that means that classes are not changed on the disk and can be safely used for distribution packages.</p><p id="31002af7">The IntelliJ IDEA coverage engine currently supports Class, Method and Line coverage. There is no Branch/Block coverage yet.</p><aside class="note " data-title="" rel="31002af7" id="e3ce9069"><p id="5bb81f17">Make sure your tests run in the <code class="code">fork=true</code> mode. Otherwise the coverage data may not be properly collected.</p></aside><p id="44347573">To configure code coverage  using IntelliJ IDEA engine, follow these steps:</p><ol class="list _decimal"><li class="list__item" id="4bcdd7d8"><p>While creating/editing Build Configuration, go to the <b id="547b5b67">Build Step</b> page.</p></li><li class="list__item" id="ab15004a"><p>Select the <a href="ant.html">Ant</a>, <a href="intellij-idea-project.html">IntelliJ IDEA Project</a>, <a href="gradle.html">Gradle</a> or <a href="maven.html">Maven</a> build runner.</p></li><li class="list__item" id="85620d25"><p>In the <b id="a53bf957">Code Coverage</b> section, select <b id="ec8e7e12">IntelliJ IDEA</b> as a coverage tool in the <b id="e46d8243">Choose coverage</b> runner drop-down.</p></li><li class="list__item" id="1308fad4"><p>Set up the coverage options - refer to the description of the available options below.</p></li></ol><div class="table-wrapper"><table width="100%" id="a9515414"><thead><tr id="577e0400" class="ijRowHead"><th id="d52b4bf8"><p id="167a8522">Option</p></th><th id="2ddc1c00"><p id="f7dea46a">Description</p></th></tr></thead><tbody><tr id="5378551d" class="ijRowOdd"><td id="5c419f54"><p id="3774d364">Classes to instrument</p></td><td id="efaa6f5e"><p id="0a751d4f">Specify Java packages for which code coverage will be gathered. Use new-line delimited patterns that start with a valid package name and contain <code class="code">*</code>. For example: <code class="code">org.apache.*</code>.</p></td></tr><tr id="6c4b3390" class="ijRowEven"><td id="5c112d6b"><p id="d64d70f8">Classes to exclude from instrumentation</p></td><td id="f83d5c04"><p id="ecccd3a8">Use newline-separated patterns for fully qualified class names to be excluded from the coverage, for example: <code class="code">*Test</code>.  Exclude patterns have priority over include patterns.</p></td></tr></tbody></table></div><p id="edcc4b8d"><b id="35fa57f0">See also:</b></p><p id="319d54b4"><b id="bd35c42f">Concepts</b>: <a href="build-runner.html">Build Runner</a> | <a href="code-coverage.html">Code Coverage</a><br><b id="087c418b">Administrator's Guide</b>: <a href="configuring-java-code-coverage.html">Configuring Java Code Coverage</a> | <a href="emma.html">EMMA</a></p><hr id="841fdb88"></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>