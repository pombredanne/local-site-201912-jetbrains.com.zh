<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>搜索-帮助|团队城市</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Search" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/user-s-guide.md|User's Guide/search.md|Search" data-main-title="Search" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/search.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="search.md" data-toc="Search">搜索</h1><p id="e8dfef4c">安装并开始运行TeamCity之后，它将收集有关构建，测试等的信息并对其进行索引。您可以按内部版本号，标记，内部版本配置名称以及其他指定一个或多个关键字的不同参数来搜索内部版本。您还可以通过构建日志中的文本以及构建配置的<a href="identifier.html#External-IDs">外部ID搜索</a>构建。</p><p id="99b2d285">在此页：</p><p id="665fc518"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#Search-SearchQuery">搜索查询</a><ul class="list _bullet"><li class="list__item"><a href="#Search-DifferencesfromLuceneSyntax">与Lucene语法的差异</a></li><li class="list__item"><a href="#Search-PerformingFuzzySearch">执行模糊搜索</a></li><li class="list__item"><a href="#Search-BooleanOperatorsandWildcardsSupport">布尔运算符和通配符支持</a></li></ul></li><li class="list__item"><a href="#Search-CompleteListofAvailableSearchFields,Shortcuts,andKeywords">可用搜索字段，快捷方式和关键字的完整列表</a><ul class="list _bullet"><li class="list__item"><a href="#Search-SearchFields">搜寻栏位</a></li><li class="list__item"><a href="#Search-Shortcuts">捷径</a><ul class="list _bullet"><li class="list__item"><a href="#Search-UsingDouble-Colon">使用双冒号</a></li></ul></li><li class="list__item"><a href="#Search-" magi="keywords" ="">“魔术”关键字</a></li></ul></li><li class="list__item"><a href="#Search-SearchbyBuildLog">按构建日志搜索</a></li><li class="list__item"><a href="#Search-ResettingSearchIndex">重置搜索索引</a></li></ul><p></p><a name="SearchQuery"></a><a name="Search-Query"></a><div class="chapter"><h2 id="Search-SearchQuery">搜索查询</h2><p id="212ea038">在TeamCity中，您可以使用<a href="http://lucene.apache.org/" rel="noopener noreferrer" data-external="true" target="_blank">Lucene查询语法</a>搜索构建；然而，TeamCity的搜索查询描述了两个主要区别<a href="#Differences-from-Lucene-Syntax">如下</a> 。</p><p id="207c3378">要缩小搜索范围并获得更精确的结果，请使用可用的搜索字段-每个版本的索引参数。有关可用搜索字段（关键字）的完整列表，请参阅<a href="#Complete-List-of-Available-Search-Fields,-Shortcuts,-and-Keywords">页面的</a>本<a href="#Complete-List-of-Available-Search-Fields,-Shortcuts,-and-Keywords">部分</a> 。</p><a name="DifferencesfromLuceneSyntax"></a><a name="Differences-from-Lucene-Syntax"></a><div class="chapter"><h3 id="Search-DifferencesfromLuceneSyntax">与Lucene语法的差异</h3><p id="4af6e9c5">在TeamCity中使用搜索查询时，请注意与Lucene本机语法的以下主要区别：</p><ol class="list _decimal"><li class="list__item" id="5ba98367"><p>默认情况下，TeamCity使用<code class="code">AND</code>查询中的运算符。也就是说，如果您键入以下查询： <code class="code">failed @agent123</code> ，那么您将获得所有包含关键字的构建的列表<code class="code">failed</code>在其任何搜索字段中，并在名为<code class="code">agent123</code> 。</p></li><li class="list__item" id="ca01ed33"><p>默认情况下，TeamCity使用“前缀搜索”，而不是像Lucene这样的完全匹配项。例如，如果您搜索<code class="code">c:main</code> ，TeamCity将找到名称以开头的构建配置的所有构建。 <code class="code">main</code>串。</p></li></ol></div><a name="PerformingFuzzySearch"></a><a name="Performing-Fuzzy-Search"></a><div class="chapter"><h3 id="Search-PerformingFuzzySearch">执行模糊搜索</h3><p id="0138cda1">您还可以使用波浪号（ <code class="code">~</code> ）字词末尾的符号，以搜索具有相似拼写的项目。</p></div><a name="BooleanOperatorsandWildcardsSupport"></a><a name="Boolean-Operators-and-Wildcards-Support"></a><div class="chapter"><h3 id="Search-BooleanOperatorsandWildcardsSupport">布尔运算符和通配符支持</h3><p id="797c7315">您可以将多个术语与布尔运算符结合使用以创建更复杂的搜索查询。在TeamCity中，您可以使用<code class="code">AND</code> ， <code class="code">+</code> ， <code class="code">OR</code> ， <code class="code">NOT</code>和<code class="code">-</code> 。</p><p id="e644bccd">使用布尔运算符时，将它们键入ALL CAPS。</p><ul class="list _ul"><li class="list__item" id="ee1399aa"><p><code class="code">AND</code> （与加号相同）。所链接的所有单词<code class="code">AND</code>包含在搜索结果中。默认情况下使用此运算符。</p></li><li class="list__item" id="3b5538b9"><p><code class="code">NOT</code> （与查询词前面的减号相同）。从搜索结果中排除单词或短语。</p></li><li class="list__item" id="aa6eb09c"><p><code class="code">OR</code>运算符可帮助您获取包含您在搜索字段中指定的任一术语的搜索词。</p></li></ul><p id="0200d3b8">TeamCity还支持<code class="code">*</code>和<code class="code">?</code>查询中的通配符。不建议使用星号（ <code class="code">*</code> ），因为TeamCity可能需要大量时间才能搜索其数据库。例如， <code class="code">*onfiguration</code>搜索词不正确。</p></div></div><a name="CompleteListofAvailableSearchFields,Shortcuts,andKeywords"></a><a name="Complete-List-of-Available-Search-Fields,-Shortcuts,-and-Keywords"></a><div class="chapter"><h2 id="Search-CompleteListofAvailableSearchFields,Shortcuts,andKeywords">可用搜索字段，快捷方式和关键字的完整列表</h2><a name="SearchFields"></a><a name="Search-Fields"></a><div class="chapter"><h3 id="Search-SearchFields">搜寻栏位</h3><p id="d75faa8b">使用搜索关键字时，请使用以下查询语法：</p><div class="code-block" data-lang="json"><search name="" field="">： <value to="" search="">

</value></search></div><div class="table-wrapper"><table class=" wide" width="100%" id="70ae724d"><thead><tr id="989f2c60" class="ijRowHead"><th id="4e7190b9"><p id="a08d9cdd">搜索领域</p></th><th id="89f4788e"><p id="3d46a0c9">捷径</p></th><th id="ad7c1d65"><p id="0e403a71">描述</p></th><th id="a71fdbe3"><p id="17837580">例</p></th></tr></thead><tbody><tr id="ac81524a" class="ijRowOdd"><td id="9ddb6ab3"><p id="4ae13a30">代理人</p></td><td id="e7fe50f9"></td><td id="96737837"><p id="4a759d78">查找在指定代理上运行的所有构建。</p></td><td id="fa002936"><p id="89747719"><code class="code">agent:unit-77</code> ， 要么<code class="code">agent:agent14*</code></p></td></tr><tr id="dbee2168" class="ijRowEven"><td id="d2ae0553"><p id="7acff491">建立</p></td><td id="075f3519"></td><td id="82fc27d0"><p id="e88673c8">查找所有包含带有指定字符串的更改的内部版本。</p></td><td id="beb0a2d9"><p id="b4953b3f"><code class="code">build:254</code>要么<code class="code">build:failed</code></p></td></tr><tr id="5274caab" class="ijRowOdd"><td id="9c5c3486"><p id="067a6c89">buildLog</p></td><td id="0d18e38f"></td><td id="222534b7"><p id="ed6d03cf">在构建日志中查找所有包含某些文本的构建。默认情况下<a href="#Using-Double-Colon">禁用</a> 。</p></td><td id="b3f0c795"><p id="77437357"><code class="code">buildLog: "NUnit report"</code></p></td></tr><tr id="29522623" class="ijRowEven"><td id="a68d9463"><p id="32ca2aa2">变化</p></td><td id="2054dc28"></td><td id="9bc907f4"><p id="7c022454">查找所有包含带有指定字符串的更改的内部版本。</p></td><td id="39a58783"><p id="7c34e55c"><code class="code">changes:(fix test)</code></p></td></tr><tr id="316f8f22" class="ijRowOdd"><td id="146e65b0"><p id="57c0be40">提交者</p></td><td id="8b0abae9"></td><td id="ec478cca"><p id="a7e6d302">查找所有包含指定开发人员提交的更改的内部版本。</p></td><td id="338a7188"><p id="01185d8e"><code class="code">committers:ivan_ivanov</code></p></td></tr><tr id="41fd9cfa" class="ijRowEven"><td id="e5df53a8"><p id="6c7578ec">组态</p></td><td id="9467e4cf"><p id="0d49b071">C</p></td><td id="c485ab2b"><p id="c4011b56">从指定的构建配置中查找所有构建。</p></td><td id="54b48597"><p id="b30702c3"><code class="code">configuration:IPR</code></p><p id="236ce0fa"><code class="code">c:(Nightly Build)</code></p></td></tr><tr id="08514d07" class="ijRowOdd"><td id="addfe17c"><p id="7be2e109">file_revision</p></td><td id="068d1787"></td><td id="ea8dae9b"><p id="4e52c869">（自TeamCity 2017.1起默认不支持）查找包含指定修订版本文件的所有内部版本。</p></td><td id="514a4dc0"><p id="066d0163"><code class="code">file_revision:5</code></p></td></tr><tr id="365fb35d" class="ijRowEven"><td id="4e9bff89"><p id="5f6ff7f7">档案</p></td><td id="1326cb55"></td><td id="cf5af2b0"><p id="02bbb106">（自TeamCity 2017.1起默认不支持）查找所有包含具有指定文件名的文件的内部版本。</p></td><td id="c79524db"><p id="65785bf5"><code class="code">files:</code></p></td></tr><tr id="ad8e58f5" class="ijRowOdd"><td id="99d6a6e4"><p id="c36f1d96">标签</p></td><td id="39024c6d"><p id="b78d7172">升</p></td><td id="b470533f"><p id="4ac4d88d">查找所有包含带有指定VCS标签的更改的内部版本。</p></td><td id="8e5e0f1f"><p id="efc7ffd8"><code class="code">label:EAP</code></p><p id="17019e61"><code class="code">l:release</code></p></td></tr><tr id="da3d6a20" class="ijRowEven"><td id="d0672b07"><p id="5e736385">pin_comment</p></td><td id="b1aeb190"></td><td id="c06007d2"><p id="d04e5e3e">在图钉注释中查找所有已固定并具有指定单词（字符串）的构建。</p></td><td id="80d7aa33"><p id="110700af"><code class="code">pin_comment:publish</code></p></td></tr><tr id="c6149d37" class="ijRowOdd"><td id="45e48516"><p id="d618f467">项目</p></td><td id="f824f583"><p id="775f40cf">p</p></td><td id="20cb3fdb"><p id="fafc2a0b">查找指定项目中的所有构建。</p></td><td id="1563e1c0"><p id="e8107cbc"><code class="code">project:Diana</code></p><p id="22e72919"><code class="code">p:Calcutta</code></p></td></tr><tr id="2b29349a" class="ijRowEven"><td id="baeb467e"><p id="ef776d36">修订版</p></td><td id="fe36ee57"></td><td id="193d9fa0"><p id="c8b0e0b3">查找所有包含指定修订版本更改的内部版本（例如，您可以从Perforce中搜索具有特定更改列表的版本，或者从Subversion中搜索修订版本）。</p></td><td id="2ca9eb4e"><p id="1ed149e3"><code class="code">revision:4536</code></p></td></tr><tr id="9b11ca55" class="ijRowOdd"><td id="b4246363"><p id="be7a417f">邮票</p></td><td id="0feb88a9"></td><td id="78b26e8a"><p id="db93a601">查找在指定时间开始的所有构建（按时间戳搜索）。</p></td><td id="bccaef8c"><p id="6f076c80"><code class="code">stamp:200811271753</code></p></td></tr><tr id="0004d930" class="ijRowEven"><td id="d8aad7d1"><p id="aee9abe5">状态</p></td><td id="b53c641b"></td><td id="d6f5ae7f"><p id="d44f4ad0">在构建状态文本中查找具有指定文本的所有构建。</p></td><td id="6299b2de"><p id="d9425683"><code class="code">status:"Compilation failed"</code></p></td></tr><tr id="0360f4e5" class="ijRowOdd"><td id="47ad349c"><p id="66cb8cea">标签</p></td><td id="eca4131e"><p id="d6036fb1">Ť</p></td><td id="e4b5adb8"><p id="5d58467a">查找具有指定标签的所有内部版本。</p></td><td id="edea710a"><p id="5c0de6e5"><code class="code">tags:buildserver</code></p><p id="d1f78472"><code class="code">t:release</code></p></td></tr><tr id="2ccc414d" class="ijRowEven"><td id="a6940b8a"><p id="0a69d2e8">测试</p></td><td id="414168e7"></td><td id="cad3f780"><p id="d0e24eef">查找包含指定测试的所有内部版本。</p></td><td id="da96f013"><p id="ed26dd96"><code class="code">tests:</code></p></td></tr><tr id="654fa5e3" class="ijRowOdd"><td id="5d7d89b4"><p id="77cb9e0e">触发者</p></td><td id="9ce60974"></td><td id="d57b88cf"><p id="071dd6bf">查找由指定用户触发的所有构建。</p></td><td id="32c69af6"><p id="75dffbc4"><code class="code">triggerer:ivan.ivanov</code></p></td></tr><tr id="eb087660" class="ijRowEven"><td id="154a5250"><p id="9954ce9e">vcs</p></td><td id="2c45c186"></td><td id="dbe1bc40"><p id="dac616e0">查找具有指定VCS的内部版本。</p></td><td id="75d9c015"><p id="29eada35"><code class="code">vcs:perforce</code></p></td></tr><tr id="aaacdf8c" class="ijRowOdd"><td id="4990898a"><p id="6812aadc">建造问题</p></td><td id="9da99791"></td><td id="0f0d92c7"><p id="375a5004"><b id="ae5bd3eb">从TeamCity 10.x开始，</b>查找具有指定生成问题的生成</p></td><td id="0052ea5e"><p id="cb2e43b7"><code class="code">buildProblem:Compilation failed</code></p></td></tr></tbody></table></div></div><a name="Shortcuts"></a><a name="Shortcuts"></a><div class="chapter"><h3 id="Search-Shortcuts">捷径</h3><p id="d1da5259">除了上述搜索字段外，您还可以在查询中使用以下快捷方式：</p><aside class="note " rel="d1da5259" id="ba38e9fc" data-title=""><p id="be236c69">请注意，使用这些快捷方式时，请勿在其后插入冒号。也就是说，查询语法如下： <code class="code"><shortcut><value to search></code> 。</p></aside><div class="table-wrapper"><table class=" wide" width="100%" id="5e26a10b"><thead><tr id="d55afc3b" class="ijRowHead"><th id="660cb68e"><p id="5bda2c29">捷径</p></th><th id="bd231a62"><p id="798507e0">描述</p></th><th id="fef4826a"><p id="04a69b09">例</p></th></tr></thead><tbody><tr id="863bb73d" class="ijRowOdd"><td id="cd2e62b9"><p id="98ed12ff"><code class="code">#</code></p></td><td id="075fac03"><p id="a1d021aa">搜索指定的内部版本号。</p></td><td id="7a4e2abb"><p id="2f85698c"><code class="code">#<number></code> ， 例如，<code class="code">#1234</code></p></td></tr><tr id="e05dfc97" class="ijRowEven"><td id="ee773cdf"><p id="04f1885f"><code class="code">@</code></p></td><td id="1c7d62d8"><p id="a8e1b72d">查找在指定代理上运行的所有构建。</p></td><td id="3d500696"><p id="871fff56"><code class="code">@<agent's name></code> ， 例如，<code class="code">@buildAgent1</code></p></td></tr></tbody></table></div><a name="UsingDouble-Colon"></a><a name="Using-Double-Colon"></a><div class="chapter"><h4 id="Search-UsingDouble-Colon">使用双冒号</h4><p id="1b505912">您可以使用双冒号（ <code class="code">::</code> ）以按名称搜索项目和/或构建配置：</p><ul class="list _ul"><li class="list__item" id="d6da25be"><p><code class="code">pro::best</code> –搜索名称以“ best”开头的配置的构建，并在名称以“ pro”开头的项目中搜索。</p></li><li class="list__item" id="cf351cd1"><p><code class="code">mega::</code> –在所有名称以“ mega”开头的项目中搜索版本。</p></li><li class="list__item" id="a8605e32"><p><code class="code">::super</code> –搜索名称以“ super”开头的构建配置的构建。</p></li></ul></div></div><a name="" magi="keywords" =""></a><a name="" magi="-keywords" =""></a><div class="chapter"><h3 id="Search-" magi="keywords" ="">“魔术”关键字</h3><p id="841990e1">TeamCity还提供“魔术”关键字（完整列表请参见下表）。这些魔术关键字由<code class="code">$</code>标志和一个词本身。单词可以缩短到一个（第一个）音节，即<code class="code">$labeled</code> ， <code class="code">$l</code>和<code class="code">$lab</code>关键字在查询中将相等。例如，要在“ Mega”项目中搜索“ Nightly build”配置的固定版本，可以使用以下任何查询：</p><ul class="list _ul"><li class="list__item" id="63dc2bb6"><code class="code">configuration:nightly project:Mega $pinned</code></li><li class="list__item" id="60d7ddd6"><code class="code">c:nigh p:mega $pin</code></li><li class="list__item" id="7ed03d09"><code class="code">M::night $pin</code></li></ul><div class="table-wrapper"><table width="100%" id="d67161c6"><thead><tr id="30c8ff90" class="ijRowHead"><th width="250" id="a9fa9b00"><p id="dc603397">魔术词</p></th><th id="b8941983"><p id="0c2de0a1">描述</p></th></tr></thead><tbody><tr id="08f5468c" class="ijRowOdd"><td id="eaab5708"><p id="7bca935e"><code class="code">$tagged</code></p></td><td id="3bda2b09"><p id="523ee0d2">搜索带有标签的构建。例如， <code class="code">Calcutta::Master $t</code>查询将产生一个标记有名称以“ Calcutta”开头的项目的任何名称为“ Master”的版本配置配置的所有版本的列表。</p></td></tr><tr id="9340a650" class="ijRowEven"><td id="96417ea6"><p id="183aa1bf"><code class="code">$pinned</code></p></td><td id="44ed6454"><p id="1ad0eaf1">搜索固定的版本。</p></td></tr><tr id="205cb996" class="ijRowOdd"><td id="aaaa99be"><p id="bded18d8"><code class="code">$labeled</code></p></td><td id="06975b4e"><p id="5d2f1a70">搜索在VCS中已标记为标签的内部版本。例如，要查找标记为Main项目的内部版本，可以使用以下查询： <code class="code">p:Main $labeled</code> ， 要么<code class="code">project:Mai $l</code> ， 要么<code class="code">m:: $lab</code> ， 等等。</p></td></tr><tr id="81688524" class="ijRowEven"><td id="3971ba4e"><p id="6c9a539c"><code class="code">$commented</code></p></td><td id="562bd430"><p id="5a886c8e">搜索已评论的内部版本。</p></td></tr><tr id="52d6cb7c" class="ijRowOdd"><td id="26ac9caa"><p id="9e30079f"><code class="code">$personal</code></p></td><td id="4750d390"><p id="277fb718">搜索个人版本。例如，使用<code class="code">-$p</code>查询中的表达式会从搜索结果中排除所有个人生成的内容。</p></td></tr></tbody></table></div></div></div><a name="SearchbyBuildLog"></a><a name="Search-by-Build-Log"></a><div class="chapter"><h2 id="Search-SearchbyBuildLog">按构建日志搜索</h2><p id="2e5094f3">默认情况下，TeamCity不会通过构建日志中的特定文本搜索构建。</p><p id="3e84507a">要启用按构建日志进行搜索，请执行以下操作：</p><ol class="list _decimal"><li class="list__item" id="042fa1f0"><p>由于逻辑会增加服务器的内存使用情况，您需要增加<a href="installing-and-configuring-the-teamcity-server.html#Setting-Up-Memory-settings-for-TeamCity-Server">内存大小</a>在<code class="code">-Xmx</code>至少5 Gb上的JVM选项（如果您有大型构建日志/许多构建，则更多）。为此，您将需要切换到<a href="installing-and-configuring-the-teamcity-server.html#Using-64-bit-Java-to-Run-TeamCity-Server">64位JVM</a> 。</p></li><li class="list__item" id="c254702f"><p>设置<code class="code">tc.search.indexBuildLog=true</code> TeamCity <a href="configuring-teamcity-server-startup-properties.html#TeamCity-internal-properties">内部属性</a> 。</p></li><li class="list__item" id="e364e844"><p><a href="#Resetting-Search-Index">重置</a>搜索索引。</p></li></ol><p id="c5a61e84">重新索引后，TeamCity将能够通过构建日志中的指定文本执行搜索，并将列出相关的构建。</p></div><a name="ResettingSearchIndex"></a><a name="Resetting-Search-Index"></a><div class="chapter"><h2 id="Search-ResettingSearchIndex">重置搜索索引</h2><p id="6be20234">搜索使用磁盘上缓存的“索引”。只有先前添加到索引的数据才可搜索，并显示在搜索结果中。通常，数据更新（例如新版本）只会导致索引的增量更新。这意味着当某些索引设置更改并且磁盘上的缓存索引不同步时，需要重置索引以重新索引所有构建。</p><p id="c2324c66">要重置缓存的搜索索引，请单击<code class="code">reset</code>管理上的“搜索”条目<b id="6512d958">|服务器管理|诊断</b> ，“高速<b id="93b06946">缓存”</b>选项卡或在服务器未运行时从< <a href="teamcity-data-directory.html">TeamCity数据目录</a> > \ system \ caches \ search手动删除文件。之后，重新索引将开始，这是服务器上的一项资源密集型操作，可能需要几个小时（取决于构建的数量和“大小”以及服务器计算机和数据库的性能）。您可以在“搜索”页面上的UI或服务器日志中监视进度。</p><hr id="036f60f7"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>