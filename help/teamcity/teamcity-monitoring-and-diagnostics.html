<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>TeamCity监视和诊断-帮助|帮助团队城市</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="TeamCity Monitoring and Diagnostics" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/teamcity-configuration-and-maintenance.md|TeamCity Configuration and Maintenance/teamcity-monitoring-and-diagnostics.md|TeamCity Monitoring and Diagnostics" data-main-title="TeamCity Monitoring and Diagnostics" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/teamcity-monitoring-and-diagnostics.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="teamcity-monitoring-and-diagnostics.md" data-toc="TeamCity Monitoring and Diagnostics">TeamCity监控和诊断</h1><p id="163927b8">TeamCity提供了各种诊断工具和指示器来监视服务器并对其进行故障排除，可从“ <b id="4a497b8e">管理” |</b> “ <b id="4a497b8e">管理”</b>中访问<b id="4a497b8e">。诊断</b>页面。</p><p id="b9c274d3">这些工具使您可以更轻松地识别和调查问题，并在需要时在服务器上<a href="reporting-issues.html">报告问题</a> 。</p><p id="666b2a68">您可以使用以下选项：</p><p id="3b56a065"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#TeamCityMonitoringandDiagnostics-Troubleshooting">故障排除</a><ul class="list _bullet"><li class="list__item"><a href="#TeamCityMonitoringandDiagnostics-CPU&MemoryUsage">CPU和内存使用率</a></li><li class="list__item"><a href="#TeamCityMonitoringandDiagnostics-Troubleshooting2">故障排除</a><ul class="list _bullet"><li class="list__item"><a href="#TeamCityMonitoringandDiagnostics-DebugLogging">调试日志</a></li><li class="list__item"><a href="#TeamCityMonitoringandDiagnostics-HangsandThreadDumps">挂起和线程转储</a></li><li class="list__item"><a href="#TeamCityMonitoringandDiagnostics-ServerRestart">服务器重启</a></li></ul></li><li class="list__item"><a href="#TeamCityMonitoringandDiagnostics-JavaConfiguration">Java配置</a></li></ul></li><li class="list__item"><a href="#TeamCityMonitoringandDiagnostics-VCSStatus">VCS状态</a></li><li class="list__item"><a href="#TeamCityMonitoringandDiagnostics-ServerLogs">服务器日志</a></li><li class="list__item"><a href="#TeamCityMonitoringandDiagnostics-InternalProperties">内部性质</a></li><li class="list__item"><a href="#TeamCityMonitoringandDiagnostics-LoggingPresets">记录预设</a></li><li class="list__item"><a href="#TeamCityMonitoringandDiagnostics-Caches">快取</a></li><li class="list__item"><a href="#TeamCityMonitoringandDiagnostics-Search">搜索</a></li><li class="list__item"><a href="#TeamCityMonitoringandDiagnostics-BrowseDataDirectory">浏览数据目录</a></li></ul><p></p><a name="Troubleshooting"></a><a name="Troubleshooting"></a><div class="chapter"><h2 id="TeamCityMonitoringandDiagnostics-Troubleshooting">故障排除</h2><p id="7f8083ce">此选项卡提供了许多指标，可帮助您检测和解决TeamCity服务器性能问题。</p><a name="CPU&MemoryUsage"></a><a name="CPU-&-Memory-Usage"></a><div class="chapter"><h3 id="TeamCityMonitoringandDiagnostics-CPU&MemoryUsage">CPU和内存使用率</h3><p id="0dcc3374">此部分显示由<a href="teamcity-memory-monitor.html">TeamCity内存监视器</a>提供的数据，该<a href="teamcity-memory-monitor.html">内存监视器</a>会定期检查可用内存并在<a href="reporting-issues.html#OutOfMemory-Problems">内存</a>或<a href="reporting-issues.html#Collecting-CPU-Profiling-Data-on-Server">CPU使用率</a>过高时发出警告。另请参阅有关为TeamCity服务器配置<a href="installing-and-configuring-the-teamcity-server.html#Setting-Up-Memory-settings-for-TeamCity-Server">内存设置的</a>信息。</p><p id="78762ff5">根据您的操作系统和Java设置，下面显示的属性列表可能会有所不同。</p><p id="88bbd1ac"><b id="6bcf6d01">CPU使用率</b></p><ul class="list _ul"><li class="list__item" id="96b1e588"><p><b id="692ad61b">TeamCity进程的CPU使用率</b>显示了一段时间内平均使用的TeamCity主进程的CPU时间。不包括消耗CPU资源的其他进程（数据库，Maven服务器，VCS）。</p></li><li class="list__item" id="72163f72"><p><b id="bb94d6e0">垃圾回收</b>显示了一段时间内平均在清理服务器内存上花费的时间。长时间内较高的数字通常表示服务器内存不足。</p></li><li class="list__item" id="8933bbb9"><p><b id="ba4463f3">系统负载</b>基于一段时间内平均的CPU队列长度（即，排队到可用处理器的可运行实体的数量与一段时间内平均的在可用处理器上运行的实体的数量的总和）来显示CPU负载信息。 1分钟）</p></li><li class="list__item" id="acc2b3d2"><p><b id="23b70c7e">总体CPU使用率</b>以[0.0,1.0]间隔的值显示整个系统的近期CPU使用率。值0.0表示最近一段时间内所有CPU都处于空闲状态，而值1.0表示最近一段时间内所有CPU 100％处于活动状态</p></li></ul><p id="bf5b1edd"><b id="75923db6">内存使用情况</b></p><ul class="list _ul"><li class="list__item" id="29452064"><p><b id="2ccf7c7f">总堆</b>显示TeamCity用于存储所有数据（包括即将收集的临时数据）使用的内存总量。用java表示所有堆内存池（年轻人和老一代）。垃圾收集快速且频繁地运行。</p></li><li class="list__item" id="91f9da3a"><p><b id="8b0638bb">数据</b>显示TeamCity用于存储持久数据的内存量。仅用Java表示旧世代。垃圾收集运行缓慢且不频繁。</p></li></ul></div><a name="Troubleshooting"></a><a name="Troubleshooting"></a><div class="chapter"><h3 id="TeamCityMonitoringandDiagnostics-Troubleshooting2">故障排除</h3><a name="DebugLogging"></a><a name="Debug-Logging"></a><div class="chapter"><h4 id="TeamCityMonitoringandDiagnostics-DebugLogging">调试日志</h4><p id="95866a85">这允许更改内部TeamCity服务器<a href="teamcity-server-logs.html#Logging-related-Diagnostics-UI">日志记录设置</a> 。</p></div><a name="HangsandThreadDumps"></a><a name="Hangs-and-Thread-Dumps"></a><div class="chapter"><h4 id="TeamCityMonitoringandDiagnostics-HangsandThreadDumps">挂起和线程转储</h4><p id="3d220011">可以在浏览器中查看<a href="reporting-issues.html#Server-Thread-Dump">服务器线程转储</a>或将其保存到文件中。</p><p id="509f772e">如果遇到内存问题，本节提供了一个转储内存快照的选项。</p></div><a name="ServerRestart"></a><a name="Server-Restart"></a><div class="chapter"><h4 id="TeamCityMonitoringandDiagnostics-ServerRestart">服务器重启</h4><p id="569e8475"><b id="e54948bf">自TeamCity 2017.2起</b>提供的此部分允许从UI重新启动服务器。</p></div></div><a name="JavaConfiguration"></a><a name="Java-Configuration"></a><div class="chapter"><h3 id="TeamCityMonitoringandDiagnostics-JavaConfiguration">Java配置</h3><p id="926a3b89">本部分向您介绍<a href="installing-and-configuring-the-teamcity-server.html#Java-Installation">服务器</a>上<a href="installing-and-configuring-the-teamcity-server.html#Java-Installation">安装</a>的Java和已配置的<a href="configuring-teamcity-server-startup-properties.html#JVM-Options">JVM选项</a> 。</p></div></div><a name="VCSStatus"></a><a name="VCS-Status"></a><div class="chapter"><h2 id="TeamCityMonitoringandDiagnostics-VCSStatus">VCS状态</h2><p id="8ac98897">该选项卡显示有关受监视的VCS根的信息，包括它们对更改状态和持续时间的检查。</p><p id="c02af11a">您可以通过检查更改持续时间来过滤可用的VCS根目录。</p></div><a name="ServerLogs"></a><a name="Server-Logs"></a><div class="chapter"><h2 id="TeamCityMonitoringandDiagnostics-ServerLogs">服务器日志</h2><p id="1381a571">该选项卡使您可以查看和下载可用的<a href="teamcity-server-logs.html">TeamCity服务器日志</a>以及已保存的线程转储和内存转储。</p></div><a name="InternalProperties"></a><a name="Internal-Properties"></a><div class="chapter"><h2 id="TeamCityMonitoringandDiagnostics-InternalProperties">内部性质</h2><p id="30ab11a7">此选项卡显示TeamCity <a href="configuring-teamcity-server-startup-properties.html#TeamCity-internal-properties">服务器的内部属性，</a>并允许对其进行修改。</p></div><a name="LoggingPresets"></a><a name="Logging-Presets"></a><div class="chapter"><h2 id="TeamCityMonitoringandDiagnostics-LoggingPresets">记录预设</h2><p id="77e8931e">TeamCity使用<code class="code">log4j</code>用于<a href="teamcity-server-logs.html">记录</a>内部服务器活动的库。在此部分中，您可以查看和下载可用的预设，以及上载新的预设，然后可以在“ <b id="5c868821">诊断” |“</b>启用”中启用这些预设<b id="5c868821">。故障排除| <a href="#Debug-Logging">调试日志记录</a></b> 。</p><p id="67119d97">也可以<a href="teamcity-server-logs.html#Changing-Logging-Configuration">手动</a>更改日志记录配置。</p></div><a name="Caches"></a><a name="Caches"></a><div class="chapter"><h2 id="TeamCityMonitoringandDiagnostics-Caches">快取</h2><p id="281d571e">此选项卡显示存储在< <a href="teamcity-data-directory.html">TeamCity数据目录</a> /> / system / caches / system / caches中的TeamCity进程的缓存。服务器会在清除过程中自动重置一些缓存，但是有时您可能需要使用重置链接手动清除缓存。</p><ul class="list _ul"><li class="list__item" id="3f9e317a"><p><code class="code">vcsContentCache</code> -TeamCity为源维护vcsContentCache缓存，以优化与VCS服务器的通信。在清理期间将重置缓存。要解决源更新的问题，可能需要手动重置缓存。</p></li><li class="list__item" id="62073fcc"><p><code class="code">search</code> -启用<a href="search.html#Search-by-Build-Log">通过构建日志进行搜索时，</a>需要重置此缓存。</p></li><li class="list__item" id="e2d21b79"><p><code class="code">git</code> -包含TeamCity使用的远程<a href="git.html">Git</a>存储库的裸露克隆。</p></li><li class="list__item" id="bfb889b8"><p><code class="code">buildsMetadata</code> -需要重置此缓存才能为<a href="common-problems.html#Problems-with-TeamCity-NuGet-Feed">TeamCity NuGet feed</a>重新<a href="common-problems.html#Problems-with-TeamCity-NuGet-Feed">编制索引</a> 。</p></li></ul></div><a name="Search"></a><a name="Search"></a><div class="chapter"><h2 id="TeamCityMonitoringandDiagnostics-Search">搜索</h2><p id="1663dc14">显示与<a href="search.html">搜索</a>有关的TeamCity数据索引的<a href="search.html">信息</a> 。</p></div><a name="BrowseDataDirectory"></a><a name="Browse-Data-Directory"></a><div class="chapter"><h2 id="TeamCityMonitoringandDiagnostics-BrowseDataDirectory">浏览数据目录</h2><p id="d84ed9dc">此选项卡显示<a href="teamcity-data-directory.html">TeamCity数据目录</a>中的文件，并允许您上载新文件。</p><hr id="58582f3a"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>