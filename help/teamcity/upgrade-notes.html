<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Upgrade Notes - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Upgrade Notes" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/installation-and-upgrade.md|Installation and Upgrade/upgrade-notes.md|Upgrade Notes" data-main-title="Upgrade Notes" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/upgrade-notes.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Upgrade Notes" id="upgrade-notes.md">Upgrade Notes</h1><a name="Changesfrom2019.1.4to2019.1.5"></a><a name="Changes-from-2019.1.4-to-2019.1.5"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2019.1.4to2019.1.5">Changes from 2019.1.4 to 2019.1.5</h2><ul class="list _ul"><li class="list__item" id="5ddcae36"><p>In the <a href="https://hub.docker.com/r/jetbrains/teamcity-agent/" data-external="true" target="_blank" rel="noopener noreferrer">TeamCity agent Docker image</a>, Docker has been updated to version 19.0.3 and Docker Compose has been updated to version 1.24.1.</p></li></ul></div><a name="Changesfrom2019.1.3to2019.1.4"></a><a name="Changes-from-2019.1.3-to-2019.1.4"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2019.1.3to2019.1.4">Changes from 2019.1.3 to 2019.1.4</h2><ul class="list _ul"><li class="list__item" id="1a29663b"><p>The bundled Java was updated to OpenJDK 8u222 (except for the Docker Windows TeamCity images).</p></li></ul></div><a name="Changesfrom2019.1.2to2019.1.3"></a><a name="Changes-from-2019.1.2-to-2019.1.3"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2019.1.2to2019.1.3">Changes from 2019.1.2 to 2019.1.3</h2><a name="Knownissues"></a><a name="Known-issues"></a><div class="chapter"><h3 id="UpgradeNotes-Knownissues">Known issues</h3><ul class="list _ul"><li class="list__item" id="02f2b9f4"><p>When using versioned settings, build history can be lost on importing settings from VCS. <a href="https://youtrack.jetbrains.com/issue/TW-62106" data-external="true" target="_blank" rel="noopener noreferrer">Details</a>.</p></li></ul></div><a name="BundledToolsUpdates"></a><a name="Bundled-Tools-Updates"></a><div class="chapter"><h3 id="UpgradeNotes-BundledToolsUpdates">Bundled Tools Updates</h3><ul class="list _ul"><li class="list__item" id="20fa7a43"><p>The bundled ReSharper Command Line Tools (Inspections and Duplicates Finder) have been upgraded to version 2019.2.1.</p></li></ul></div></div><a name="Changesfrom2019.1.1to2019.1.2"></a><a name="Changes-from-2019.1.1-to-2019.1.2"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2019.1.1to2019.1.2">Changes from 2019.1.1 to 2019.1.2</h2><p id="2c7a73ae"><a name="running-builds-node-deprecated"></a><a name="UpgradeNotes-running-builds-node-deprecated"></a></p><ul class="list _ul"><li class="list__item" id="6bbb8ab6"><p>The <a href="https://confluence.jetbrains.com/display/TCD18/Configuring+Running+Builds+Node" data-external="true" target="_blank" rel="noopener noreferrer">Running Builds Node</a> is deprecated and will be discontinued in TeamCity 2019.2. In a <a href="multinode-setup.html">multinode setup</a>, you can instead <a href="configuring-secondary-node.html">configure a secondary node</a> with the <i id="f194ff11">"Processing data produced by running builds"</i> responsibility.</p></li></ul><a name="Knownissues"></a><a name="Known-issues"></a><div class="chapter"><h3 id="UpgradeNotes-Knownissues2">Known issues</h3><ul class="list _ul"><li class="list__item" id="cc4683fc"><p>When using versioned settings, build history can be lost on importing settings from VCS. <a href="https://youtrack.jetbrains.com/issue/TW-62106" data-external="true" target="_blank" rel="noopener noreferrer">Details</a>.</p></li><li class="list__item" id="6a9639a8"><p>If you use the .NET Core ("dotnet") steps on Windows agents, you can get the <i id="22647296">".NET SDK was not found"</i> error if you have .NET Core runtime (not SDK) installed on the agent in the location like <code class="code">C:\Program Files (x86)\dotnet</code>. As a workaround, set the <code class="code">env.DOTNET_HOME</code> parameter to the location of .NET Core SDK.<br>See the related <a href="https://youtrack.jetbrains.com/issue/TW-61413" data-external="true" target="_blank" rel="noopener noreferrer">issue</a> for details.</p></li></ul></div></div><a name="Changesfrom2019.1to2019.1.1"></a><a name="Changes-from-2019.1-to-2019.1.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2019.1to2019.1.1">Changes from 2019.1 to 2019.1.1</h2><a name="BundledToolsUpdates"></a><a name="Bundled-Tools-Updates"></a><div class="chapter"><h3 id="UpgradeNotes-BundledToolsUpdates2">Bundled Tools Updates</h3><ul class="list _ul"><li class="list__item" id="d3bb9c6d"><p>The bundled IntelliJ IDEA has been updated to 2019.1.3.</p></li><li class="list__item" id="b1acf9c3"><p>The bundled ReSharper tools (Inspections and Duplicates Finder) have been upgraded to 2019.1.0-eap08d version.</p></li></ul></div></div><a name="Changesfrom2018.2.xto2019.1"></a><a name="Changes-from-2018.2.x-to-2019.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2018.2.xto2019.1">Changes from 2018.2.x to 2019.1</h2><a name="MandatorytagsforAmazoninstances"></a><a name="Mandatory-tags-for-Amazon-instances"></a><div class="chapter"><h3 id="UpgradeNotes-MandatorytagsforAmazoninstances">Mandatory tags for Amazon instances</h3><p id="41dcc6b6">Tags are now <b id="892ac4e3">mandatory</b> for all Amazon instances run by TeamCity, which helps identify them. If you use integration with Amazon EC2, make sure to add the <a href="https://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/ec2-supported-iam-actions-resources.html#supported-iam-actions-tagging" data-external="true" target="_blank" rel="noopener noreferrer">ec2:CreateTags</a> resource-level permission in Amazon.</p></div><a name="Changedbehaviorofreverseddependenciesproperties"></a><a name="Changed-behavior-of-reversed-dependencies-properties"></a><div class="chapter"><h3 id="UpgradeNotes-Changedbehaviorofreverseddependenciesproperties">Changed behavior of reversed dependencies properties</h3><p id="0278f26a">Starting with 2019.1, the behavior of <a href="predefined-build-parameters.html#Overriding-Dependencies-Properties"><code class="code">reverse.dep</code></a> parameters has been changed, and this change can affect your existing builds. In versions prior to 2019.1, when a build chain is triggered, TeamCity only took into account the <code class="code">reverse.dep</code> parameters specified in the top-most build of the chain, i.e. in the build which depends on all other builds. If some intermediate builds of the chain had <code class="code">reverse.dep</code> parameters, they were ignored.<br>After <a href="https://youtrack.jetbrains.com/issue/TW-41341" data-external="true" target="_blank" rel="noopener noreferrer">this fix</a> this is no longer the case. Now, when a build chain is triggered, all <code class="code">reverse.dep</code> parameters specified in all nodes of the build chain will be processed.</p></div><a name="Lazyagenttoolloading"></a><a name="Lazy-agent-tool-loading"></a><div class="chapter"><h3 id="UpgradeNotes-Lazyagenttoolloading">Lazy agent tool loading</h3><p id="299a32a5"><a href="installing-agent-tools.html">Agent tools</a> (located under the <code class="code">&lt;agent_installation&gt;/tools</code> directory on agents) are now transferred to an agent not on the agent upgrade, but right before the first build that uses the respective tool. You might need to update the build configuration settings so TeamCity knows which tools are required by the builds.<br>Before starting a build on an agent, TeamCity checks for the references to <code class="code">teamcity.tool.&lt;tool_ID&gt;</code> configuration parameters to collect the set of tools used by the build. If some tool is referenced via this parameter, TeamCity will make sure this tool is present on the agent before the build logic starts executing.<br>If some of your builds use tools on agent assuming their locations under the <code class="code">&lt;agent installation&gt;/tools</code> directory, such references should be changed to a TeamCity-provided parameter reference. Paths like <code class="code">&lt;agent_installation&gt;/tools/&lt;tool_ID&gt;</code> used in TeamCity settings should be changed to the <code class="code">%teamcity.tool.&lt;tool_ID&gt;%</code> parameter reference. For example, <code class="code">../tools/maven3.4.5/bin/mvn</code> should be replaced with <code class="code">%teamcity.tool.maven3.4.5%/bin/mvn</code>.</p></div><a name="Changed.NETbuildrequirementsinReSharpertools"></a><a name="Changed-.NET-build-requirements-in-ReSharper-tools"></a><div class="chapter"><h3 id="UpgradeNotes-Changed.NETbuildrequirementsinReSharpertools">Changed .NET build requirements in ReSharper tools</h3><p id="0cd77675">The requirements for the .NET Framework version used by ReSharper tools have changed. Now, if you use ReSharper tools (dotCover and ReSharper Inspections) of version 2018.2 or newer (including the version bundled with TeamCity 2019.1) in your build configuration, the requirements to build agents will change to .NET Framework 4.6.1 or newer. Make sure to update .NET Framework on agents.</p></div><a name="Token-basedauthenticationenabledbydefault"></a><a name="Token-based-authentication-enabled-by-default"></a><div class="chapter"><h3 id="UpgradeNotes-Token-basedauthenticationenabledbydefault">Token-based authentication enabled by default</h3><p id="c9724919">On upgrading to 2019.1, the Token-Based Authentication module will be enabled by default, so you can generate <a href="managing-your-user-account.html#Managing-Access-Tokens">access tokens</a> and start using them right away.</p></div><a name="NewCSPheadervalue"></a><a name="New-CSP-header-value"></a><div class="chapter"><h3 id="UpgradeNotes-NewCSPheadervalue">New CSP header value</h3><p id="eaabebc4">Now TeamCity web UI uses more restrictive value for the <a href="https://content-security-policy.com/" data-external="true" target="_blank" rel="noopener noreferrer">Content-Security-Policy</a> HTTP header. This provides extra security at the expense of prohibiting usage of the web resources not hosted on the TeamCity server.<br>If you rely on external resources (for example, in the build report tabs content or by using not yet updated plugins), you can specify new header value in the <code class="code">teamcity.web.header.Content-Security-Policy.protectedValue=&lt;full_header_value&gt;</code> <a href="configuring-teamcity-server-startup-properties.html#TeamCity-internal-properties">internal property</a> (and <code class="code">teamcity.web.header.Content-Security-Policy.adminUI.protectedValue</code> property for the web pages in Administration area). Plugins can use <a href="http://javadoc.jetbrains.net/teamcity/openapi/current/jetbrains/buildServer/web/ContentSecurityPolicyConfig.html" data-external="true" target="_blank" rel="noopener noreferrer">ContentSecurityPolicyConfig</a> open API interface to add to the value configured.</p></div><a name="ChangeindotCoverartifacts"></a><a name="Change-in-dotCover-artifacts"></a><div class="chapter"><h3 id="UpgradeNotes-ChangeindotCoverartifacts">Change in dotCover artifacts</h3><p id="7abfcde0">The <code class="code">dotCover.dcvr</code> hidden artifact is no longer published by default. It is now created in the build temporary folder and removed when the build finishes.<br>If you use dotCover and rely on this artifact, specify the path to the <code class="code">%system.teamcity.build.tempDir%\..\agentTmp\dotNetCoverageResults\dotCover.dcvr</code> file explicitly in the <a href="configuring-general-settings.html#Artifact-Paths">Artifact paths</a>.</p></div><a name="BundledToolsUpdates"></a><a name="Bundled-Tools-Updates"></a><div class="chapter"><h3 id="UpgradeNotes-BundledToolsUpdates3">Bundled Tools Updates</h3><ul class="list _ul"><li class="list__item" id="d7e3ee9d"><p>The latest JaCoCo version (0.8.4) has been added to TeamCity.</p></li><li class="list__item" id="a2d1e475"><p>The bundled .NET tools (dotCover and ReSharper CLT) have been upgraded to the latest released version, 2019.1.1.</p></li><li class="list__item" id="e14c3448">JDBC drivers for external databases suggested on the fresh TeamCity installation have been updated to the following versions:<ul class="list _ul"><li class="list__item" id="65df6d1b"><p>MySQL - 8.0.16</p></li><li class="list__item" id="6466be11"><p>MSSQL - 7.2.2</p></li><li class="list__item" id="e47078c2"><p>PostgreSQL - 42.2.5</p></li></ul></li></ul></div><a name="NoteonbetaversionsofPowerShell"></a><a name="Note-on-beta-versions-of-PowerShell"></a><div class="chapter"><h3 id="UpgradeNotes-NoteonbetaversionsofPowerShell">Note on beta versions of PowerShell</h3><p id="83c69f60">If you have been using beta versions of PowerShell, make sure to remove all beta versions earlier than <code class="code">v6.0.0-beta.9</code> before installing any new released PowerShell version. Due to updates in the PowerShell detector, if the old beta version is installed, TeamCity will use it instead of the new released one.</p></div><a name="NoteonusingDockerandWindowsServerwithprocessisolation"></a><a name="Note-on-using-Docker-and-Windows-Server-with-process-isolation"></a><div class="chapter"><h3 id="UpgradeNotes-NoteonusingDockerandWindowsServerwithprocessisolation">Note on using Docker and Windows Server with process isolation</h3><p id="8e5b1ec4">If you use Docker images and Windows Server 2019 with process isolation, build agents may fail to start (read more in <a href="known-issues.html#&#34;Access-is-denied&#34;-or-&#34;Access-to-the-path-is-denied&#34;-problem-on-container-start">Known Issues</a>). To work around the issue, grant the "Full control" access to the "Authenticated Users" group.</p></div></div><a name="Changesfrom2018.2.3to2018.2.4"></a><a name="Changes-from-2018.2.3-to-2018.2.4"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2018.2.3to2018.2.4">Changes from 2018.2.3 to 2018.2.4</h2><p id="ef012ac2">There is a regression in TeamCity 2018.2.4 related to the data displayed on the unauthorized agents' page: the data on agent authorization, enabling/disabling comments, and the latest activity time has been removed from the page. This data is displayed on the agent details page.</p><p id="7d9652ce">When the performance is improved, we will return the data to the unauthorized agents' page.</p></div><a name="Changesfrom2018.2.2to2018.2.3"></a><a name="Changes-from-2018.2.2-to-2018.2.3"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2018.2.2to2018.2.3">Changes from 2018.2.2 to 2018.2.3</h2><p id="6479007e">TeamCity now ships Windows Docker images for 1803/1809 platforms.</p><a name="Knownissues"></a><a name="Known-issues"></a><div class="chapter"><h3 id="UpgradeNotes-Knownissues3">Known issues</h3><p id="c737a2cc">Running builds are not shown on the build configuration page if there are no finished builds. To workaround the issue, stop the TeamCity server, replace the <code class="code">TEAMCITY_DIRECTORY/webapps/ROOT/js/ring/bundle.js</code> with the <code class="code">bundle.js</code> file  attached to <a href="https://youtrack.jetbrains.com/issue/TW-59529#focus=streamItem-27-3327362.0-0" data-external="true" target="_blank" rel="noopener noreferrer">this issue</a> and start the server.</p></div></div><a name="Changesfrom2018.2.1to2018.2.2"></a><a name="Changes-from-2018.2.1-to-2018.2.2"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2018.2.1to2018.2.2">Changes from 2018.2.1 to 2018.2.2</h2><ul class="list _ul"><li class="list__item" id="5e69d7c8"><p>The bundled Tomcat has been updated to version 8.5.3</p></li><li class="list__item" id="be0baa93"><p>The TeamCity agent Docker image supports .NET Core 2.2</p></li></ul></div><a name="Changesfrom2018.2to2018.2.1"></a><a name="Changes-from-2018.2-to-2018.2.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2018.2to2018.2.1">Changes from 2018.2 to 2018.2.1</h2><p id="da72a6af">No noteworthy changes</p></div><a name="Changesfrom2018.1.xto2018.2"></a><a name="Changes-from-2018.1.x-to-2018.2"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2018.1.xto2018.2">Changes from 2018.1.x to 2018.2</h2><a name="Knownissues"></a><a name="Known-issues"></a><div class="chapter"><h3 id="UpgradeNotes-Knownissues4">Known issues</h3><ul class="list _ul"><li class="list__item" id="0493f3f7"><p>If upgrade fails with an error in MoveCustomDataStorageToDatabaseConverter or MoveRepositoryStateToCustomDataStorageConverter, apply workaround from <a href="https://youtrack.jetbrains.com/issue/TW-58289#focus=streamItem-27-3207962-0-0" data-external="true" target="_blank" rel="noopener noreferrer">the issue</a>.</p></li><li class="list__item" id="69c90519"><p>If you're using Subversion externals from the same repository, you may face an issue with incorrect revision detection. A workaround for the problem is described in <a href="https://youtrack.jetbrains.com/issue/TW-58336" data-external="true" target="_blank" rel="noopener noreferrer">this issue</a>.</p></li><li class="list__item" id="97927e33"><p>If you see OutOfMemoryError during TeamCity startup with <code class="code">org.jetbrains.dokka</code> in stack trace, set the internal property <code class="code">teamcity.kotlinConfigsDsl.docsGenerationXmx=768m</code> (as described in <a href="https://youtrack.jetbrains.com/issue/TW-56408" data-external="true" target="_blank" rel="noopener noreferrer">this issue</a>)</p></li></ul></div><a name="BundledToolsUpdates"></a><a name="Bundled-Tools-Updates"></a><div class="chapter"><h3 id="UpgradeNotes-BundledToolsUpdates4">Bundled Tools Updates</h3><ul class="list _ul"><li class="list__item" id="f15e6b0e"><p>The bundled .NET Tools (dotCover and ReSharper CLT) have been upgraded to the latest released version, 2018.1.4</p></li><li class="list__item" id="3e63331d"><p>TeamCity 2018.2 comes bundled with IntelliJ IDEA 2018.3.1. The IntelliJ IDEA Project Runner uses JPS 2018.3.1</p></li><li class="list__item" id="da66e923"><p>OpenJDK is bundled in the Windows <code class="code">.exe</code> TeamCity distribution instead of Oracle Java.</p></li></ul></div><a name="NuGetfeed"></a><a name="NuGet-feed"></a><div class="chapter"><h3 id="UpgradeNotes-NuGetfeed">NuGet feed</h3><p id="8a9b0755">The parameters that were previously used to reference the global NuGet feed are removed. After upgrading, all of them will be converted to <a href="using-teamcity-as-nuget-feed.html">the parameters referencing the default NuGet feed in Root project</a>.</p><p id="d6645430">If you're still using deprecated NuGet feed references in project parameters please update them as following:</p><div class="table-wrapper"><table width="100%" id="70a7adbd"><thead><tr id="0d3c3d78" class="ijRowHead"><th id="1cd1c326"><p id="c1a19923">Global feed name</p></th><th id="ee8e267f"><p id="66165c71">Project feed name</p></th></tr></thead><tbody><tr id="8f835e00" class="ijRowOdd"><td id="9a0e4711"><p id="2252189e">teamcity.nuget.feed.server</p></td><td id="e16da46d"><p id="88a368f8">teamcity.nuget.feed.guestAuth._Root.default.v2</p></td></tr><tr id="f8ae2ffd" class="ijRowEven"><td id="1d2d9db3"><p id="c2480043">teamcity.nuget.feed.auth.server</p></td><td id="b0a20bb5"><p id="912d7b95">teamcity.nuget.feed.httpAuth._Root.default.v2</p></td></tr><tr id="2ad5758b" class="ijRowOdd"><td id="25b667fc"><p id="6216a816">system.teamcity.nuget.feed.auth.serverRootUrlBased.server</p></td><td id="fdce9e45"><p id="8f181ca5">teamcity.nuget.feed.httpAuth._Root.default.v2</p></td></tr></tbody></table></div></div></div><a name="Changesfrom2018.1.4to2018.1.5"></a><a name="Changes-from-2018.1.4-to-2018.1.5"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2018.1.4to2018.1.5">Changes from 2018.1.4 to 2018.1.5</h2><p id="fc9e40f3">No noteworthy changes</p></div><a name="Changesfrom2018.1.3to2018.1.4"></a><a name="Changes-from-2018.1.3-to-2018.1.4"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2018.1.3to2018.1.4">Changes from 2018.1.3 to 2018.1.4</h2><a name="Knownissues"></a><a name="Known-issues"></a><div class="chapter"><h3 id="UpgradeNotes-Knownissues5">Known issues</h3><ul class="list _ul"><li class="list__item" id="41f9c1d0"><p>Builds which are running while the server upgrades to 2018.1.4 can get their build log and status truncated, not duly reporting build failure. The build log gets warning with "__tc_longResponseMarker" text (<a href="https://youtrack.jetbrains.com/issue/TW-58266" data-external="true" target="_blank" rel="noopener noreferrer">details</a>). It is recommended to wait till there are not running builds when upgrading to this version.</p></li></ul></div><a name="Misc"></a><a name="Misc"></a><div class="chapter"><h3 id="UpgradeNotes-Misc">Misc</h3><p id="c5094f90">Support for Microsoft Internet Explorer 10 is discontinued in TeamCity 2018.1.4.</p></div></div><a name="Changesfrom2018.1.2to2018.1.3"></a><a name="Changes-from-2018.1.2-to-2018.1.3"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2018.1.2to2018.1.3">Changes from 2018.1.2 to 2018.1.3</h2><a name="BundledToolsUpdates"></a><a name="Bundled-Tools-Updates"></a><div class="chapter"><h3 id="UpgradeNotes-BundledToolsUpdates5">Bundled Tools Updates</h3><p id="cb5a8c8d">The latest JaCoCo version (0.8.2) has been added to TeamCity.</p></div><a name="Knownissues"></a><a name="Known-issues"></a><div class="chapter"><h3 id="UpgradeNotes-Knownissues6">Known issues</h3><p id="73dc5eaa">If you use JaCoCo coverage and you decide to downgrade from TeamCity 2018.1.3+ to TeamCity versions 2018.1 - 2018.1.2,  you may experience issues requiring manual fixes to make the affected configurations work again.</p></div></div><a name="Changesfrom2018.1.1to2018.1.2"></a><a name="Changes-from-2018.1.1-to-2018.1.2"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2018.1.1to2018.1.2">Changes from 2018.1.1 to 2018.1.2</h2><a name="Knownissues"></a><a name="Known-issues"></a><div class="chapter"><h3 id="UpgradeNotes-Knownissues7">Known issues</h3><p id="7386af5d">If you are using <a href="https://plugins.jetbrains.com/plugin/8948-web-hooks-tcwebhooks-" data-external="true" target="_blank" rel="noopener noreferrer">tcWebHooks</a> third-party TeamCity plugin, update it to the latest version before upgrading (<a href="https://youtrack.jetbrains.com/issue/TW-56626" data-external="true" target="_blank" rel="noopener noreferrer">details</a>).</p><p id="f1dc0e39">We increased accuracy for recognizing similar TeamCity exit code build problems. The existing investigations and mutes for these build problems will be reset.</p></div><a name="BundledToolsUpdates"></a><a name="Bundled-Tools-Updates"></a><div class="chapter"><h3 id="UpgradeNotes-BundledToolsUpdates6">Bundled Tools Updates</h3><p id="20b7883e">The bundled Tomcat has been updated to version 8.5.32.</p></div></div><a name="Changesfrom2018.1to2018.1.1"></a><a name="Changes-from-2018.1-to-2018.1.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2018.1to2018.1.1">Changes from 2018.1 to 2018.1.1</h2><a name="Knownissues"></a><a name="Known-issues"></a><div class="chapter"><h3 id="UpgradeNotes-Knownissues8">Known issues</h3><p id="683b4059">If you're upgrading from 2018.1 to 2018.1.1 and you want to see the NuGet packages missing due to issues <a href="https://youtrack.jetbrains.com/issue/TW-55703" data-external="true" target="_blank" rel="noopener noreferrer">TW-55703</a> and <a href="https://youtrack.jetbrains.com/issue/TW-55833" data-external="true" target="_blank" rel="noopener noreferrer">TW-55833</a>, do the following:</p><ul class="list _ul"><li class="list__item" id="e65db0ec"><p>Cleanup <code class="code">.teamcity/nuget/packages.json</code> files in the build artifacts. Consider using this PowerShell script:</p></li></ul><div class="code-block" data-lang="bash">
&gt; cd "%TeamCityDataDir%system\artifacts\"
&gt; Get-ChildItem -Recurse | Where-Object { $_.FullName -match '\.teamcity\\nuget\\packages\.json' } | Remove-Item

</div><ul class="list _ul"><li class="list__item" id="19a22d63"><p>On the <b id="c0a5448a">Administration | Diagnostics | Caches</b> page, reset the "buildsMetadata" cache and wait while re-indexing is finished. To temporary increase indexing speed, see the <a href="https://confluence.jetbrains.com/display/TCD18/Known+Issues#KnownIssues-PackagesindexingisslowinTeamCityNuGetfeed" data-external="true" target="_blank" rel="noopener noreferrer">following tip</a>.</p></li></ul></div><a name="DockerImages"></a><a name="Docker-Images"></a><div class="chapter"><h3 id="UpgradeNotes-DockerImages">Docker Images</h3><p id="01e30ed9">Since 2018.1.1 TeamCity has multi-platform docker images marked by the "latest" and version number tags published in Docker Hub, e.g. "jetbrains/teamcity-server", "jetbrains/teamcity-server:2018.1.1". This allows using the same docker image reference for Linux and Windows docker containers, see <a href="https://youtrack.jetbrains.com/issue/TW-56088" data-external="true" target="_blank" rel="noopener noreferrer">TW-55061</a> for details.</p></div></div><a name="Changesfrom2017.2.xto2018.1"></a><a name="Changes-from-2017.2.x-to-2018.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2017.2.xto2018.1">Changes from 2017.2.x to 2018.1</h2><a name="Knownissues"></a><a name="Known-issues"></a><div class="chapter"><h3 id="UpgradeNotes-Knownissues9">Known issues</h3><p id="673d3c15">While publishing NuGet packages into the TeamCity NuGet feed in multiple build steps, only the packages published by the first build step will be visible. See <a href="https://youtrack.jetbrains.com/issue/TW-55703" data-external="true" target="_blank" rel="noopener noreferrer">TW-55703</a> for details. If you experience problems with download of NuGet packages published within archives see <a href="https://youtrack.jetbrains.com/issue/TW-55833" data-external="true" target="_blank" rel="noopener noreferrer">TW-55833</a>.</p></div><a name="Stricterrulesforparameternamesusedinparameterreferences"></a><a name="Stricter-rules-for-parameter-names-used-in-parameter-references"></a><div class="chapter"><h3 id="UpgradeNotes-Stricterrulesforparameternamesusedinparameterreferences">Stricter rules for parameter names used in parameter references</h3><p id="4c98affc">Names of the Build Configuration parameters are now validated in more strict manner. While already existing parameters should continue to work, it is highly recommended to review the names and use Latin letters and no special symbols. <a href="configuring-build-parameters.html">Details</a></p></div><a name="Userself-registration"></a><a name="User-self-registration"></a><div class="chapter"><h3 id="UpgradeNotes-Userself-registration">User self-registration</h3><p id="06274099">If you have Built-in authentication enabled with the "Allow user registration from the login page" setting on, the setting will be disabled on upgrade. If you need the registration, make sure the server is not open to unauthorized users access (e.g. not accessible from Internet) and enable the setting via the health item displayed at the top of the administration pages or in the "Administration | Authentication" under the "Built-in" module settings.</p></div><a name="BundledToolsUpdate"></a><a name="Bundled-Tools-Update"></a><div class="chapter"><h3 id="UpgradeNotes-BundledToolsUpdate">Bundled Tools Update</h3><ul class="list _ul"><li class="list__item" id="f110b855"><p>The IntelliJ IDEA Project Runner uses JPS 2017.3.4 requiring Java 1.8 as the minimal version.</p></li><li class="list__item" id="19b72b64"><p>The bundled ReSharper CLT and dotCover have been updated to version 2018.1.2</p></li></ul></div><a name="NuGetfeed"></a><a name="NuGet-feed"></a><div class="chapter"><h3 id="UpgradeNotes-NuGetfeed2">NuGet feed</h3><ul class="list _ul"><li class="list__item" id="1c41b430"><p id="72edab5f">Configuration of the NuGet feed was moved from the server level to the project level: now each project can have its own feed. The "NuGet packages indexer" build feature can be added to build configurations whose artifacts should be indexed.</p></li><li class="list__item" id="3df4e2fc"><p id="2436705c">The following NuGet feed-related build parameters are deprecated:</p><ul class="list _ul"><li class="list__item" id="ea9b79ff"><code class="code">teamcity.nuget.feed.auth.server</code></li><li class="list__item" id="407d7b3a"><code class="code">teamcity.nuget.feed.server</code></li><li class="list__item" id="795f8ad3"><code class="code">system.teamcity.nuget.feed.auth.serverRootUrlBased.server</code></li></ul><p id="c604fbf7">You now need to explicitly specify the URL from the <a href="using-teamcity-as-nuget-feed.html">NuGet Feed</a> page in the <b id="00fff8d0">Project Settings</b>.</p></li><li class="list__item" id="dc3676d1"><p id="9a7a77af">The enabled default NuGet feed with all published packages accessed by URL <code class="code">/app/nuget/v1/FeedService.svc/</code> is now moved to the Root project feed <code class="code">/app/nuget/feed/_Root/default/v2/</code>. It is recommended to switch to new URL in your projects.</p></li><li class="list__item" id="6e3ed0f7"><p id="93f6ee0f">.nupkg files are now indexed on the agent side instead of the server which could slightly increase the time of builds for projects with the NuGet Feed feature and the automatic package indexing enabled or for builds with NuGet Packages Indexer build feature.</p></li></ul></div><a name="RESTAPI"></a><a name="REST-API"></a><div class="chapter"><h3 id="UpgradeNotes-RESTAPI">REST API</h3><p id="d6e437ae">REST API uses version 2018.1. The previous versions of the API are still available under /app/rest/2017.2, /app/rest/2017.1 (/app/rest/10.0), app/rest/9.1, /app/rest/9.0, /app/rest/8.1, /app/rest/7.0, /app/rest/6.0 URLs. It is recommended to stop using previous APIs URLs as we are going to remove them in the following releases.</p><a name="Filteringbuildsbyagentnames"></a><a name="Filtering-builds-by-agent-names"></a><div class="chapter"><h4 id="UpgradeNotes-Filteringbuildsbyagentnames">Filtering builds by agent names</h4><p id="c056b633">When agent name contains the parentheses symbols, instead of using agentName:&lt;name&gt;, use "agentName:(value:&lt;value&gt;)</p></div><a name="Locatorswith&#34;value:text&#34;"></a><a name="Locators-with-&#34;value:-text-&#34;"></a><div class="chapter"><h4 id="UpgradeNotes-Locatorswith&#34;value:text&#34;">Locators with "value:<text>"</h4><p id="79f48541">Requests which used "value:&lt;text&gt;" locators (e.g. for matching properties) and no "matchType" dimension specification will start to use "equals" matching by default. Add "matchType:contains" to preserve the old behavior. <a href="https://youtrack.jetbrains.com/issue/TW-55350" data-external="true" target="_blank" rel="noopener noreferrer">Details</a></p></div></div><a name="VSSpluginisunbundled"></a><a name="VSS-plugin-is-unbundled"></a><div class="chapter"><h3 id="UpgradeNotes-VSSpluginisunbundled">VSS plugin is unbundled</h3><p id="d8c1c4aa">The Visual SourceSafe plugin is no longer bundled with TeamCity but is available as a <a href="https://plugins.jetbrains.com/plugin/10902-vcs-support-vss" data-external="true" target="_blank" rel="noopener noreferrer">separate download</a>. Please contact our <a href="https://confluence.jetbrains.com/display/TW/Feedback" data-external="true" target="_blank" rel="noopener noreferrer">support</a>, if you still use this VSS for your builds.</p></div><a name="Other"></a><a name="Other"></a><div class="chapter"><h3 id="UpgradeNotes-Other">Other</h3><ul class="list _ul"><li class="list__item" id="092ae0c4"><p>Commit Status Publisher supports Gerrit 2.6+ versions. For support for older Gerrit versions, please turn to our <a href="https://confluence.jetbrains.com/display/TW/Feedback" data-external="true" target="_blank" rel="noopener noreferrer">support</a>.</p></li><li class="list__item" id="76c6fef8"><p>When upgrading from TeamCity versions before 9.1, if TeamCity 2018.1 starts and agents are upgraded, but then you decide to roll back the server to the previous TeamCity version, the agents will not be able to connect back to the old server and will need to be reinstalled manually.</p></li><li class="list__item" id="5346310a"><p>Make sure that no HTTP requests from the agents to the server are blocked (e.g. requests to .../app/agents/... URLs)</p></li><li class="list__item" id="62ecd9d8"><p>Since 2018.1, TeamCity uses the full project name with "/" instead of "::" as the separator for Project - Subproject wherever the full project name is present.</p></li></ul></div></div><a name="Changesfrom2017.2.3to2017.2.4"></a><a name="Changes-from-2017.2.3-to-2017.2.4"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2017.2.3to2017.2.4">Changes from 2017.2.3 to 2017.2.4</h2><p id="a307c0f9">The Inspections (.NET) and Duplicates Finder (.NET) build steps were renamed to Inspections (ReSharper) and Duplicates finder (ReSharper).</p></div><a name="Changesfrom2017.2.2to2017.2.3"></a><a name="Changes-from-2017.2.2-to-2017.2.3"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2017.2.2to2017.2.3">Changes from 2017.2.2 to 2017.2.3</h2><a name="Buildrevisions"></a><a name="Build-revisions"></a><div class="chapter"><h3 id="UpgradeNotes-Buildrevisions">Build revisions</h3><p id="449c342b">In all the build configurations, the builds run before the upgrade will not be reused in the chains and will run anew (only the last build on the default branch is affected if branches are used). This may also result in a clean checkout in the first run build for VCSs like Perforce. The behavior is similar to that after VCS root editing.</p><p id="1235bb01"><b id="83358937">Security</b></p><p id="0bf30686">When upgrading to 2017.2.x versions (please ignore when upgrading to 2018.1 and further versions): It is recommended to add "<code class="code">teamcity.artifacts.restrictRequestsWithArtifactReferer=true</code>" <a href="configuring-teamcity-server-startup-properties.html">internal property</a> to enhance security of the server.</p></div></div><a name="Changesfrom2017.2.1to2017.2.2"></a><a name="Changes-from-2017.2.1-to-2017.2.2"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2017.2.1to2017.2.2">Changes from 2017.2.1 to 2017.2.2</h2><p id="cdffc3c2"><a name="knownIssues_2017_2_2"></a><a name="UpgradeNotes-knownIssues_2017_2_2"></a></p><a name="Knownissues"></a><a name="Known-issues"></a><div class="chapter"><h3 id="UpgradeNotes-Knownissues10">Known issues</h3><p id="318e0b43">(Fixed 2017.2.3) If you use the Artifactory plugin and get the "Invalid RSA public key" browser message on opening build step settings, please apply the <a href="https://youtrack.jetbrains.com/issue/TW-53562#comment=27-2698895" data-external="true" target="_blank" rel="noopener noreferrer">workaround</a>.</p><p id="5d5907d0">Under Windows, when TeamCity server is started as a service, "logs\teamcity-winservice.log" file is not created and server startup errors are nowhere to be seen. <a href="https://youtrack.jetbrains.com/issue/TW-54483" data-external="true" target="_blank" rel="noopener noreferrer">Details</a></p></div><a name="IDEPlugins"></a><a name="IDE-Plugins"></a><div class="chapter"><h3 id="UpgradeNotes-IDEPlugins">IDE Plugins</h3><p id="fe99b509">It is highly recommended to update the IDE plugins for all users to the latest version and then add the <code class="code">teamcity.uploadPersonalPatch.requireAuthorization=true</code> <a href="configuring-teamcity-server-startup-properties.html">internal property</a> to enhance security of the server.</p></div><a name="PerforceVCSRootexecutablepaths"></a><a name="Perforce-VCS-Root-executable-paths"></a><div class="chapter"><h3 id="UpgradeNotes-PerforceVCSRootexecutablepaths">Perforce VCS Root executable paths</h3><p id="e1fc2646"><b id="12108c88">Since TeamCity 2017.2.2</b>, the field which specifies the path to p4 works only on the agent side, for agent-side checkout.</p><p id="d1bc7e4b">For the server, the p4 binary should be present in the PATH of the TeamCity server (or can be specified via the <code class="code">teamcity.perforce.customP4Path</code> <a href="configuring-teamcity-server-startup-properties.html">internal property</a>). The <code class="code">teamcity.perforce.p4PathOnServerWhitelist</code> <a href="configuring-teamcity-server-startup-properties.html">internal property</a> can be used to specify a  semi-colon-separated list of allowed p4 paths. The paths from this list can be set in VCS Root p4 path parameter for the server side (to restore old behavior).</p></div><a name="MercurialVCSRootproperties"></a><a name="Mercurial-VCS-Root-properties"></a><div class="chapter"><h3 id="UpgradeNotes-MercurialVCSRootproperties">Mercurial VCS Root properties</h3><p id="0d945cf3"><b id="0756ae10">Since TeamCity 2017.2.2</b>, a number of Mercurial VCS root properties change their behavior for security reasons.</p><ul class="list _ul"><li class="list__item" id="5bcb8c05"><p>the "HG command path" is used on the TeamCity server only if included into the <a href="https://confluence.jetbrains.com/display/TCD10/Mercurial#Mercurial-Pathtohgexecutabledetection" data-external="true" target="_blank" rel="noopener noreferrer">whitelist</a></p></li><li class="list__item" id="128fe0a9"><p>the "Clone repository to" property is hidden if the VCS root doesn't have it already and is ignored by default. To make TeamCity display the property in all VCS roots, add the <code class="code">teamcity.hg.showCustomClonePath=true</code> <a href="configuring-teamcity-server-startup-properties.html">internal property</a>. The value of the VCS root property is respected only if it is included into the whitelist specified by the <code class="code">teamcity.hg.customClonePathWhitelist</code> <a href="configuring-teamcity-server-startup-properties.html">internal property</a>, which is a semi-colon-separated list of directories where a clone is allowed. Use <code class="code">/path/to/dir/*</code> to allow clones to the child directories of the <code class="code">/path/to/dir</code>.</p></li><li class="list__item" id="470852f5"><p>the "Mercurial config" is ignored on the server. If you need to enable some Mercurial plugins, please do that in the global .<code class="code">hgrc</code> on the TeamCity server machine.</p></li></ul></div></div><a name="Changesfrom2017.2to2017.2.1"></a><a name="Changes-from-2017.2-to-2017.2.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2017.2to2017.2.1">Changes from 2017.2 to 2017.2.1</h2><a name="KotlinDSLchanges"></a><a name="Kotlin-DSL-changes"></a><div class="chapter"><h3 id="UpgradeNotes-KotlinDSLchanges">Kotlin DSL changes</h3><p id="38813a0d">The versions in pom.xml were updated: <code class="code">kotlin.version</code> is updated to <code class="code">1.2.0</code>, <code class="code">teamcity.dsl.version</code> is updated to <code class="code">2017.2.1</code>. The dependency on <code class="code">kotlin-stdlib</code> is replaced with the dependency on <code class="code">kotlin-stdlib-jdk8</code> in order to provide access to additional functionality available in jdk8 (e.g. named groups in regexps). The dependency on the deprecated <code class="code">kotlin-runtime</code> and the redundant dependency on <code class="code">kotlin-compiler-embeddable</code> were dropped.</p><p id="efc952a1">Now TeamCity provides a parent maven project for Kotlin DSL which defines the <code class="code">teamcity.dsl.version</code> and <code class="code">kotlin.version</code> properties. With such a parent project, you will not have to update your pom.xml after eachTeamCity upgrade.</p><p id="518eb452">The easiest way to apply these changes is to run the 'Download settings in Kotlin format' action in project admin area and use the pom.xml from the zip produced by  theTeamCity server.</p></div><a name="BundledJavausedinDockerimages"></a><a name="Bundled-Java-used-in-Docker-images"></a><div class="chapter"><h3 id="UpgradeNotes-BundledJavausedinDockerimages">Bundled Java used in Docker images</h3><p id="809f17eb">The bundled Java used in Docker images has been updated to 8u151.</p></div></div><a name="Changesfrom2017.1.xto2017.2"></a><a name="Changes-from-2017.1.x-to-2017.2"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2017.1.xto2017.2">Changes from 2017.1.x to 2017.2</h2><p id="ed1d170b"><a name="knownIssues_2017_2"></a><a name="UpgradeNotes-knownIssues_2017_2"></a></p><a name="Knownissues"></a><a name="Known-issues"></a><div class="chapter"><h3 id="UpgradeNotes-Knownissues11">Known issues</h3><p id="6c8cb8cf">(Fixed 2017.2.1) TFS in Java working mode (when Team Explorer is not installed on the machine) report "TFS subsystem was destroyed" errors. See <a href="https://youtrack.jetbrains.com/issue/TW-52685" data-external="true" target="_blank" rel="noopener noreferrer">TW-52685</a> for details.</p><p id="d49a46fb">Upgrading using Windows installer can take significant time if your TeamCity installation directory contains lots of nested directories (e.g. TeamCity Data Directory is under it). The long stage can occur after "Extract: Uninstall.exe..." progress message. In you encounter this long step, please wait for the completion of the operation (the installer runs icacls.exe utility as a nested process). To prevent the issue it is recommendd to move the <a href="teamcity-data-directory.html">Data Directory</a> out of TeamCity server installation home.</p></div><a name="Perforcebranchspecificationchange"></a><a name="Perforce-branch-specification-change"></a><div class="chapter"><h3 id="UpgradeNotes-Perforcebranchspecificationchange">Perforce branch specification change</h3><p id="70bd5a77">There is a breaking change which requires your action if you use Perforce streams with enabled feature branches and you're using a non-default branch filter.</p><p id="f097c5ca">Starting from TeamCity 2017.2, Perforce VCS Roots use the same format for Perforce streams and TeamCity feature branches specification.</p><p id="2935171a">In the VCS Root branch specification for Perforce, <code class="code">+:stream_name</code> must now be replaced with <code class="code">+://stream_depot/stream_name</code>. Also, for better presentation of stream names in the UI, you may want to replace the default branch specifications like <code class="code">+:*</code> with <code class="code">+://your_stream_depot/*</code>.</p><p id="fc81d649">This change was made in the scope of fixing <a href="https://youtrack.jetbrains.com/issue/TW-48038" data-external="true" target="_blank" rel="noopener noreferrer">TW-48038</a>.</p></div><a name="Serverprocessrestart"></a><a name="Server-process-restart"></a><div class="chapter"><h3 id="UpgradeNotes-Serverprocessrestart">Server process restart</h3><p id="0dd9480b">Now if the server process is stopped unexpectedly or killed, the process will automatically restart. The server should be stopped using the <code class="code">teamcity-server.bat/sh stop</code> command which performs a graceful stop.</p></div><a name="Bundledplugins"></a><a name="Bundled-plugins"></a><div class="chapter"><h3 id="UpgradeNotes-Bundledplugins">Bundled plugins</h3><a name="Dockerintegrationplugin"></a><a name="Docker-integration-plugin"></a><div class="chapter"><h4 id="UpgradeNotes-Dockerintegrationplugin">Docker integration plugin</h4><p id="9b99291f">The Docker integration plugin is bundled since TeamCity 2017.2.x. If you installed the plugin for the previous version manually, please <a href="https://confluence.jetbrains.com/display/TCD10/Installing+Additional+Plugins" data-external="true" target="_blank" rel="noopener noreferrer">remove it</a>.</p></div><a name=".NETCLIplugin"></a><a name=".NET-CLI-plugin"></a><div class="chapter"><h4 id="UpgradeNotes-.NETCLIplugin">.NET CLI plugin</h4><p id="578f2b01">The .NET CLI (.NET Core) plugin is bundled since TeamCity 2017.2.x. If you installed the plugin for the previous version manually, please <a href="https://confluence.jetbrains.com/display/TCD10/Installing+Additional+Plugins" data-external="true" target="_blank" rel="noopener noreferrer">remove it</a>.</p><p id="eed6a292">During upgrade all existing .NET Core build steps will be converted into .NET CLI steps and existing .NET Core plugin will be disabled.</p><p id="761fab71"><b id="889a4939">Note</b>: The <code class="code">DotNetCore</code> and <code class="code">DotNetCore_Path</code> agent configuration parameters will be changed to  <code class="code">DotNetCLI</code> and <code class="code">DotNetCLI_Path</code>; please consider updating your agent requirements which depend on these parameters.</p></div></div><a name="RESTAPI"></a><a name="REST-API"></a><div class="chapter"><h3 id="UpgradeNotes-RESTAPI2">REST API</h3><p id="ba82ff2e">REST API uses version 2017.2. The previous versions of the API are still available under /app/rest/2017.1 (/app/rest/10.0), app/rest/9.1, /app/rest/9.0, /app/rest/8.1, /app/rest/7.0, /app/rest/6.0 URLs.</p><p id="0de2e8d6"><b id="480b260b">buildType entity</b></p><p id="4c94f40b">has "templates" sub-element now instead of "template" to support multiple templates.</p><p id="ca47d902"><b id="0de1a782">build entity</b> No longer expose boolean "running" attribute, textual "state" attribute with value "running" is used instead.</p></div><a name="WindowsVersionsSupport"></a><a name="Windows-Versions-Support"></a><div class="chapter"><h3 id="UpgradeNotes-WindowsVersionsSupport">Windows Versions Support</h3><p id="7e8374b9">Windows XP and Vista are no longer the supported versions of Windows for the TeamCity Server and Agent. While the server and agent will still most probably work on these old versions, we do not target the versions during our development. <a href="https://confluence.jetbrains.com/display/TW/Feedback" data-external="true" target="_blank" rel="noopener noreferrer">Let us know</a> if the support for the versions is important for your TeamCity usage or you find any issues with the systems support.</p></div><a name="J2EEServlet2.5containerisnolongersupported"></a><a name="J2EE-Servlet-2.5-container-is-no-longer-supported"></a><div class="chapter"><h3 id="UpgradeNotes-J2EEServlet2.5containerisnolongersupported">J2EE Servlet 2.5 container is no longer supported</h3><p id="9bbf9171">J2EE Servlet container version 2.5 is not supported since TeamCity 2017.2. TeamCity does not guarantee support for Tomcat 6.x and Jetty 7.x implementing Servlet 2.5. For .war distribution (not recommended, .tar.gz distribution is recommended), TeamCity supports Apache Tomcat 7+, J2EE Servlet 3.0+ and JSP 2.2+.</p></div><a name="Other"></a><a name="Other"></a><div class="chapter"><h3 id="UpgradeNotes-Other2">Other</h3><ul class="list _ul"><li class="list__item" id="f857f860"><p>The bundled Tomcat 8.5. restricted usage of special characters in the URL including curly bracket symbols ({ }). <a href="https://youtrack.jetbrains.com/issue/TW-51052" data-external="true" target="_blank" rel="noopener noreferrer">Details</a>.</p></li><li class="list__item" id="42d2b002"><p>TeamCity integration with Intellij-based IDEs no longer supports StarTeam and Visual Source Safe version controls.</p></li></ul></div></div><a name="Changesfrom2017.1.4to2017.1.5"></a><a name="Changes-from-2017.1.4-to-2017.1.5"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2017.1.4to2017.1.5">Changes from 2017.1.4 to 2017.1.5</h2><p id="647f7cab">The bundled JetBrains dotCover has been updated to version 2017.2</p><p id="7654a019">The SSH Agent build feature started to report a build problem if it fails to start an SSH agent with the specified SSH key (in the scope of <a href="https://youtrack.jetbrains.com/issue/TW-42707" data-external="true" target="_blank" rel="noopener noreferrer">TW-42707</a>). Previously errors were only logged, but not reported as build problems. As a result, builds with invalid SSH Agent settings would start to fail after the upgrade.</p></div><a name="Changesfrom2017.1.3to2017.1.4"></a><a name="Changes-from-2017.1.3-to-2017.1.4"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2017.1.3to2017.1.4">Changes from 2017.1.3 to 2017.1.4</h2><a name="Knownissues"></a><a name="Known-issues"></a><div class="chapter"><h3 id="UpgradeNotes-Knownissues12">Known issues</h3><p id="d0e3fc9f">TFS Personal support lists all build configurations for TFVC VCS root. See <a href="https://youtrack.jetbrains.com/issue/TW-51497" data-external="true" target="_blank" rel="noopener noreferrer">TW-51497</a> for details.</p></div></div><a name="Changesfrom2017.1.2to2017.1.3"></a><a name="Changes-from-2017.1.2-to-2017.1.3"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2017.1.2to2017.1.3">Changes from 2017.1.2 to 2017.1.3</h2><p id="eb5dea43"><a href="https://youtrack.jetbrains.com/issue/TW-50148" data-external="true" target="_blank" rel="noopener noreferrer">TW-50148</a> was fixed and the DSL API documentation was improved. If you need these changes for local development, please update the <a href="upgrading-dsl.html">maven dependency version</a> to 2017.1.3.</p><p id="0e33c0e1">Now TeamCity server runs 'git gc' automatically to improve performance of git operations. This requires a git client to be installed on the server and be  the server via the PATH environment variable. If a native git client cannot be found, then the corresponding health report is shown. For TeamCity to find the git client, the client needs to be installed on the server machine and added to <code class="code">$PATH</code> (the server restart is required afterwards). Instead of modifying PATH, the path to the git client can be specified via the <code class="code">teamcity.server.git.executable.path</code> <a href="configuring-teamcity-server-startup-properties.html">internal property</a>.</p></div><a name="Changesfrom2017.1.1to2017.1.2"></a><a name="Changes-from-2017.1.1-to-2017.1.2"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2017.1.1to2017.1.2">Changes from 2017.1.1 to 2017.1.2</h2><p id="7b6c1f7d">No noteworthy changes.</p></div><a name="Changesfrom2017.1to2017.1.1"></a><a name="Changes-from-2017.1-to-2017.1.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2017.1to2017.1.1">Changes from 2017.1 to 2017.1.1</h2><p id="bb7859ba">The bundled IntelliJ IDEA has been updated to 2017.1.2</p></div><a name="Changesfrom10.0.xto2017.1"></a><a name="Changes-from-10.0.x-to-2017.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom10.0.xto2017.1">Changes from 10.0.x to 2017.1</h2><a name="Knownissues"></a><a name="Known-issues"></a><div class="chapter"><h3 id="UpgradeNotes-Knownissues13">Known issues</h3><p id="10eafdef">Editing cloud profile cancels all builds on profile agents. See <a href="https://youtrack.jetbrains.com/issue/TW-49616" data-external="true" target="_blank" rel="noopener noreferrer">TW-49616</a> for details.</p></div><a name="TeamCityVersioningChanges"></a><a name="TeamCity-Versioning-Changes"></a><div class="chapter"><h3 id="UpgradeNotes-TeamCityVersioningChanges">TeamCity Versioning Changes</h3><p id="e308abfb">Since 2017, TeamCity adopts the common JetBrains versioning scheme that identifies versions by year following the pattern: &lt;year&gt;.&lt;number of the feature release within the year&gt;.&lt;bugfix update number&gt;. The current version is TeamCity 2017.1 formerly known as TeamCity 10.1.</p></div><a name="UpdatesettingsinKotlinDSL"></a><a name="Update-settings-in-Kotlin-DSL"></a><div class="chapter"><h3 id="UpgradeNotes-UpdatesettingsinKotlinDSL">Update settings in Kotlin DSL</h3><p id="46367841">In this version TeamCity settings format has been changed and if your settings are stored in Kotlin DSL, you might need to <a href="upgrading-dsl.html">update Kotlin DSL scripts</a> before continuing to use them. Check any related server health reports after the server upgrade.</p><p id="c0e51c1b"><a name="2017.1-CSRF"></a><a name="UpgradeNotes-2017.1-CSRF"></a></p></div><a name="CSRFProtection:ModifyingGETrequestsandProperProxyconfigurations"></a><a name="CSRF-Protection:-Modifying-GET-requests-and-Proper-Proxy-configurations"></a><div class="chapter"><h3 id="UpgradeNotes-CSRFProtection:ModifyingGETrequestsandProperProxyconfigurations">CSRF Protection: Modifying GET requests and Proper Proxy configurations</h3><p id="db14c76f">TeamCity now implements <a href="csrf-protection.html">CSRF protection</a> to improve web UI security and this introduces several changes in behavior which might affect your installation. In particular:</p><ul class="list _ul"><li class="list__item" id="1c9f7830"><p>If you use a <b id="95ea3125">reverse proxy</b> before TeamCity, the proxy should not change the original "Host" request header (this typically requires configuring the proxy to set the Host header to the original request value). Also, it should not modify the "Origin" and "Referer" headers present in the original request. While this has been the recommended setup for a long time, now it becomes critical for the TeamCity web UI functioning;</p></li><li class="list__item" id="8a1001c0"><p>if you use non-bundled clients which perform HTTP <b id="79bbd9dd">GET requests</b> to TeamCity, some of the GET requests (those which change the state of the server, like http://server/action.html?add2Queue=XXX) stop working in 2017.1, please change the requests to use POST instead of GET;</p></li><li class="list__item" id="c0ff0935"><p>the non-browser clients which reuse authentication by supplying the <b id="dde61873">TCSESSIONID</b> cookie with the request, need to be updated to supply the "Origin" HTTP header with the value the same as the host the request is being sent to.If the check fails, you get the HTTP <b id="3bef0653">403 response</b> with the details of the failed check. The details are also logged into teamcity-auth.log.</p></li></ul></div><a name="OldIPRRunner"></a><a name="Old-IPR-Runner"></a><div class="chapter"><h3 id="UpgradeNotes-OldIPRRunner">Old IPR Runner</h3><p id="bbcaee47">The old (TeamCity 6.0) IPR runner has been removed from the TeamCity. It was deprecated and has not been offered as an option since TeamCity 6.0, and now it is gone completely (the corresponding build configurations will not run anymore).</p></div><a name="Log4jconfiguration"></a><a name="Log4j-configuration"></a><div class="chapter"><h3 id="UpgradeNotes-Log4jconfiguration">Log4j configuration</h3><p id="17ea6e51">It is recommended to overwrite the server's <code class="code">conf\teamcity-server-log4j.xml</code> file with the content of the <code class="code">conf\teamcity-server-log4j.xml.dist</code> file which represents the default logging configuration which has changed in this release. If you do need a custom logging configuration, consider using <a href="teamcity-server-logs.html">logging presets</a> instead of modifying <code class="code">conf\teamcity-server-log4j.xml</code>.</p><p id="b5eed47d">The same overwriting from the sibling .dist file is recommended for the TeamCity agents.The <code class="code">conf\teamcity-*-log4j.xml.dist</code> file is created after the first start of the upgraded TeamCity version.</p></div><a name="Buildsmetadatastorage(NuGetfeed)"></a><a name="Builds-metadata-storage-(NuGet-feed)"></a><div class="chapter"><h3 id="UpgradeNotes-Buildsmetadatastorage(NuGetfeed)">Builds metadata storage (NuGet feed)</h3><p id="f91b022f">Builds metadata storage will be re-created and builds will be reindexed right after the upgrade. As a result, immediately after the upgrade, the TeamCity internal NuGet feed will not contain all of the packages.During the builds reindexing, the following messages may appear in the <code class="code">teamcity-server.log</code>:</p><div class="code-block" data-lang="bash">
INFO - .index.BuildIndexer (metadata) - Enqueued next 100 builds for indexing, builds left: 2000, last build id: 3813
INFO - .index.BuildIndexer (metadata) - Enqueued next 100 builds for indexing, builds left: 1900, last build id: 3713

</div><p id="3fd49e50">"builds left:" indicates the number of builds left to process. Note that TeamCity starts reindexing from the most recent builds, so all fresh builds should appear in the TeamCity NuGet feed in a relatively short time.</p><p id="f21e4929">To increase the metadata indexing speed you could use the <a href="known-issues.html">following tip</a>.</p></div><a name="RESTAPI"></a><a name="REST-API"></a><div class="chapter"><h3 id="UpgradeNotes-RESTAPI3">REST API</h3><p id="75d7d754">REST API has only minor changes, so the same API is exposed under the <code class="code">app/rest/10.0</code> and <code class="code">/app/rest/2017.1</code> URLs. API version has been updated to 2017.1 though to reflect the changes.The build's node "triggeredBy" now has more correct values of "type" attribute for the builds started after 2017.1 upgrade. In particular, the "buildType" value is not used anymore, the"finishBuild", "snapshot", etc. values are used instead.</p></div><a name="VisualStudioAdd-infailstoinstallfromTeamCityUI"></a><a name="Visual-Studio-Add-in-fails-to-install-from-TeamCity-UI"></a><div class="chapter"><h3 id="UpgradeNotes-VisualStudioAdd-infailstoinstallfromTeamCityUI">Visual Studio Add-in fails to install from TeamCity UI</h3><p id="6303a5a0">As a workaround could be used <a href="https://www.jetbrains.com/resharper/download/#section=web-installer" data-external="true" target="_blank" rel="noopener noreferrer">ReSharper web installer</a>. See <a href="https://youtrack.jetbrains.com/issue/TW-51680" data-external="true" target="_blank" rel="noopener noreferrer">TW-51680</a> for details.</p></div></div><a name="Changesfrom10.0.4to10.0.5"></a><a name="Changes-from-10.0.4-to-10.0.5"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom10.0.4to10.0.5">Changes from 10.0.4 to 10.0.5</h2><p id="5d1d4228">If you are using TFS with agent-side checkout, note that due to the fix of  <a href="https://youtrack.jetbrains.com/issue/TW-48555" data-external="true" target="_blank" rel="noopener noreferrer">TW-48555</a>  TeamCity will have to re-create TFS workspaces, which may result in a clean checkout on the agents after the upgrade.</p></div><a name="Changesfrom10.0.3to10.0.4"></a><a name="Changes-from-10.0.3-to-10.0.4"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom10.0.3to10.0.4">Changes from 10.0.3 to 10.0.4</h2><a name="Precedenceofdep.ID.NAMEparameterreferences"></a><a name="Precedence-of--dep.ID.NAME--parameter-references"></a><div class="chapter"><h3 id="UpgradeNotes-Precedenceofdep.ID.NAMEparameterreferences">Precedence of %dep.ID.NAME% parameter references</h3><p id="3c833714">When <code class="code">%dep.ID.NAME%</code> parameter reference is used and there are several dependency paths to the same build configuration with id "ID" so that different builds are accessible via (direct or indirect) artifact dependencies, the result of the reference resolution could have used any of the builds without any guaranteed precedence.</p><p id="f811fe1d">Since 10.0.4 <code class="code">dep.</code> parameter resolution works as follows:</p><ol class="list _decimal"><li class="list__item" id="4f9133bb"><p>if there is a snapshot dependency, the build from the same chain wins.</p></li><li class="list__item" id="4d4ca1fd"><p>if there is no snapshot dependency and several builds are accessible via an artifact dependency, the build with a greater <code class="code">buildId</code> wins. If there are several artifact dependencies from a single build configuration, only the first one is considered.</p></li></ol></div><a name="Updates"></a><a name="Updates"></a><div class="chapter"><h3 id="UpgradeNotes-Updates">Updates</h3><p id="cb365096">AWS SDK has been updated to 1.11.66 to support new instance types (r4.4xlarge, f1.16xlarge, t2.2xlarge, t2.xlarge, r4.2xlarge, r4.xlarge, r4.large, r4.16xlarge, r4.8xlarge, f1.2xlarge).</p></div></div><a name="Changesfrom10.0.2to10.0.3"></a><a name="Changes-from-10.0.2-to-10.0.3"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom10.0.2to10.0.3">Changes from 10.0.2 to 10.0.3</h2><a name="AmazonEBSOptimizedInstances"></a><a name="Amazon-EBS-Optimized-Instances"></a><div class="chapter"><h3 id="UpgradeNotes-AmazonEBSOptimizedInstances">Amazon EBSOptimized Instances</h3><p id="80e14994">The behavior of <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSOptimized.html" data-external="true" target="_blank" rel="noopener noreferrer">EBS optimization</a>, enabled by default since TeamCity 10.0, is changed similarly to what EC2 console offers:</p><ol class="list _decimal"><li class="list__item" id="15646d4c"><p>EBS optimization is turned on by default for <code class="code">c4.*</code>, <code class="code">m4.*</code>, and <code class="code">d2.*</code> (non-configurable).</p></li><li class="list__item" id="5c69373a"><p>EBS optimization is turned off by default for any other instance types.</p></li><li class="list__item" id="9bc2da98"><p>EBS optimization can be turned on for instances that support it (such as <code class="code">c3.xlarge</code>) by checking the appropriate box when configuring the image of the Amazon cloud profile.</p></li></ol></div><a name="Bundledtoolsupdates"></a><a name="Bundled-tools-updates"></a><div class="chapter"><h3 id="UpgradeNotes-Bundledtoolsupdates">Bundled tools updates</h3><p id="a615e1dc">The bundled dotCover has been updated to version 2016.2.2</p></div></div><a name="Changesfrom10.0.1to10.0.2"></a><a name="Changes-from-10.0.1-to-10.0.2"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom10.0.1to10.0.2">Changes from 10.0.1 to 10.0.2</h2><ul class="list _ul"><li class="list__item" id="64680b8d"><p>The known issue mentioned for 10.0.1 is fixed.</p></li><li class="list__item" id="ed5ce56c"><p>The bundled JetBrains dotCover has been updated to version 2016.2.</p></li><li class="list__item" id="bb28ddb6"><p>Jabber integration is now <a href="https://youtrack.jetbrains.com/issue/TW-47046" data-external="true" target="_blank" rel="noopener noreferrer">more restrictive</a> with regard to SSL connection checking. If you are using jabber.org for sending notifications, and face a problem regarding SSL certificate, you should either enable "Use legacy SSL" option or (better) change JVM version for running TeamCity to at least 1.8.0_101.</p></li><li class="list__item" id="7ad07eda"><p>Precedence of %dep.ID.NAME% parameters resolution was changed unintentionally in case of several different builds used as dependency. See <a href="https://youtrack.jetbrains.com/issue/TW-47518" data-external="true" target="_blank" rel="noopener noreferrer">TW-47518</a> for details.</p></li></ul></div><a name="Changesfrom10.0to10.0.1"></a><a name="Changes-from-10.0-to-10.0.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom10.0to10.0.1">Changes from 10.0 to 10.0.1</h2><p id="324a0965">All known issues mentioned for 10.0 are fixed.</p><a name="KnownIssues"></a><a name="Known-Issues"></a><div class="chapter"><h3 id="UpgradeNotes-KnownIssues">Known Issues</h3><p id="e22d920c">(fixed in 10.0.2) TeamCity server temp folder can fill up if an <a href="installing-agent-tools.html">agent tool</a> is installed as a directory in &lt;<a href="teamcity-data-directory.html">TeamCity Data Directory</a>&gt;/plugins/.tools. <a href="http://youtrack.jetbrains.net/issue/TW-46648" data-external="true" target="_blank" rel="noopener noreferrer">Details and workaround</a>.</p></div></div><a name="Changesfrom9.1.xto10.0"></a><a name="Changes-from-9.1.x-to-10.0"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom9.1.xto10.0">Changes from 9.1.x to 10.0</h2><a name="KnownIssues"></a><a name="Known-Issues"></a><div class="chapter"><h3 id="UpgradeNotes-KnownIssues2">Known Issues</h3><p id="6fd769b9">(These known issues are fixed in 10.0.1)</p><a name="FailedtocollectTFSchanges-Fromversionxisgreaterthencurrentversiony"></a><a name="Failed-to-collect-TFS-changes---From-version--x--is-greater-then-current-version--y-"></a><div class="chapter"><h4 id="UpgradeNotes-FailedtocollectTFSchanges-Fromversionxisgreaterthencurrentversiony">Failed to collect TFS changes - From version <x> is greater then current version <y></h4><p id="7a59f5ea">If you use TFS version control and get "Error collecting changes for VCS repository ... Failed to collect TFS changes - From version x is greater then current version y" error, either commit a new change so that it appears in the affected build configuration, ot install an <a href="https://youtrack.jetbrains.com/issue/TW-46336#comment=27-1534797" data-external="true" target="_blank" rel="noopener noreferrer">updated plugin</a> (related <a href="https://youtrack.jetbrains.com/issue/TW-46336" data-external="true" target="_blank" rel="noopener noreferrer">issue</a>).</p></div><a name="Projectadministratormaynotbeabletore-defineparametersinheritedfromtheparentproject"></a><a name="Project-administrator-may-not-be-able-to-re-define-parameters-inherited-from-the-parent-project"></a><div class="chapter"><h4 id="UpgradeNotes-Projectadministratormaynotbeabletore-defineparametersinheritedfromtheparentproject">Project administrator may not be able to re-define parameters inherited from the parent project</h4><p id="b88afdc4">See request <a href="https://youtrack.jetbrains.com/issue/TW-46372" data-external="true" target="_blank" rel="noopener noreferrer">TW-46372</a> for details and possible workaround.</p></div><a name="UpgradeformTeamCityversionbefore8.1failswith&#34;Canttakeexclusivelockwhendblockisnotheld&#34;"></a><a name="Upgrade-form-TeamCity-version-before-8.1-fails-with-&#34;Can-t-take-exclusive-lock-when-db-lock-is-not-held&#34;"></a><div class="chapter"><h4 id="UpgradeNotes-UpgradeformTeamCityversionbefore8.1failswith&#34;Canttakeexclusivelockwhendblockisnotheld&#34;">Upgrade form TeamCity version before 8.1 fails with "Can't take exclusive lock when db lock is not held"</h4><p id="42faff62">See request <a href="https://youtrack.jetbrains.com/issue/TW-46385" data-external="true" target="_blank" rel="noopener noreferrer">TW-46385</a> for details and possible workaround.</p></div><a name="SubversionVCSrootswithsvnssh://protocolcanreport&#34;Hostkey(xxx)cannotbeverified.&#34;"></a><a name="Subversion-VCS-roots-with-svn-ssh://-protocol-can-report-&#34;Host-key-(xxx)-can-not-be-verified.&#34;"></a><div class="chapter"><h4 id="UpgradeNotes-SubversionVCSrootswithsvnssh://protocolcanreport&#34;Hostkey(xxx)cannotbeverified.&#34;">Subversion VCS roots with svn+ssh:// protocol can report "Host key (xxx) can not be verified."</h4><p id="cc09f5cd">See request <a href="https://youtrack.jetbrains.com/issue/TW-46489" data-external="true" target="_blank" rel="noopener noreferrer">TW-46385</a>  for details and for the plugin with the fix</p></div></div><a name="Changesinagentpropertiesreporting.NET4.xruntime"></a><a name="Changes-in-agent-properties-reporting-.NET-4.x-runtime"></a><div class="chapter"><h3 id="UpgradeNotes-Changesinagentpropertiesreporting.NET4.xruntime">Changes in agent properties reporting .NET 4.x runtime</h3><p id="2e0d524d">TeamCity agents before version 10 used to report DotNetFramework4.0_* properties whenever any of 4.x versions of .NET framework were installed on the agent. Since TeamCity 10, DotNetFramework4.0_* properties are reported only when 4.0 runtime (without updates) is installed. For 4.5.*, 4.6.* updates corresponding DotNetFramework4.N_* properties are reported. This change in behavior allows for more precise requirements definition.</p><p id="cca83450">If after the upgrade you get incompatible agents with <b id="5b56482f">Unmet requirement: Exists=&gt;DotNetFramework4.0_x86(/x64) exists</b> message, review the explicit requirements in your build configuration. If your build is compatible with any .NET 4.x runtime (it is a most common case) please use <b id="3cd40ea8">Exists=&gt;DotNetFramework4.*_x86(/x64)</b> requirement. If you would like to run on .NET 4.5+ agents - use  <b id="de0e1399">Exists=&gt;DotNetFramework4.(5|6).*</b> requirement.</p><p id="49f62b9d">Some third-party plugins are known to be affected. On the upgrade, make sure to upgrade <b id="b73c5d55">xUnit</b> plugin to version <a href="https://github.com/carlpett/xUnit-TeamCity/releases/tag/1.1.2" data-external="true" target="_blank" rel="noopener noreferrer">1.1.2+</a></p></div><a name="Ignoredteststableoptimization"></a><a name="Ignored-tests-table-optimization"></a><div class="chapter"><h3 id="UpgradeNotes-Ignoredteststableoptimization">Ignored tests table optimization</h3><p id="7b95b1d2">During upgrade TeamCity will optimize data in the ignored_tests table (we do that in order to speedup the TeamCity built-in backup / restore process). In some rare cases, when this table contains millions of rows, the process of table optimization may take significant time - possibly a few hours. Among other data, the table contains the reasons why a particular test in a build was marked as ignored. If this information for old builds is not very important for you, you can start TeamCity server with the additional <a href="configuring-teamcity-server-startup-properties.html#JVM-Options">JVM option</a>: <code class="code">-Dteamcity.truncateIgnoreReasonConverter.copyReasons=false</code></p><p id="ddeccf27">In this case TeamCity will not copy the ignore reasons into the new, optimized table, and this particular step of the upgrade process will run much faster.</p></div><a name="Java8"></a><a name="Java-8"></a><div class="chapter"><h3 id="UpgradeNotes-Java8">Java 8</h3><p id="c8c1b5c8">Starting from TeamCity 10, the TeamCity server <b id="d948f564"><a href="supported-platforms-and-environments.html">requires Java 8 </a></b> JRE/JDK (included in the Windows <code class="code">.exe</code> distribution).</p><p id="39c3c2d0"><b id="459e6f2b">TeamCity agents</b> currently require Java 1.6+, but starting from the next TeamCity version, the minimum requirement for <a href="supported-platforms-and-environments.html">the Java on the agent</a> will be Java 8 (included in agent's Windows <code class="code">.exe</code> distribution). It is recommended that you now consider upgrading the agents Java.</p><p id="655be589"><b id="b07ce29c">Java memory options change</b></p><p id="47631053">It is recommended to remove the " <code class="code">-XX:MaxPermSize=..."</code>  <a href="configuring-teamcity-server-startup-properties.html">JVM option</a> from <code class="code">TEAMCITY_SERVER_MEM_OPTS</code> environment variable, if previously configured. (This is due to the fact that Java 8 <a href="http://javaeesupportpatterns.blogspot.ru/2013/02/java-8-from-permgen-to-metaspace.html" data-external="true" target="_blank" rel="noopener noreferrer">does not use</a> permanent generation (PermGen) anymore)</p></div><a name="Agentrequirementsandartifactdependenciesdisabling"></a><a name="Agent-requirements-and-artifact-dependencies-disabling"></a><div class="chapter"><h3 id="UpgradeNotes-Agentrequirementsandartifactdependenciesdisabling">Agent requirements and artifact dependencies disabling</h3><p id="2ae45af6">Agent requirements and artifact dependencies can be disabled now. TeamCity plugins and REST API- based code using a version of API prior to TeamCity 10 is likely to ignore the disabled status of these settings.</p></div><a name="TFS"></a><a name="TFS"></a><div class="chapter"><h3 id="UpgradeNotes-TFS">TFS</h3><p id="b8657a8c">TeamCity comes with cross-platform TFS integration: to work with TFS, you no longer need to install a TeamCity server on a Windows machine.</p></div><a name="VisualStudioOnlineWorkItemsplugin"></a><a name="Visual-Studio-Online-Work-Items-plugin"></a><div class="chapter"><h3 id="UpgradeNotes-VisualStudioOnlineWorkItemsplugin">Visual Studio Online Work Items plugin</h3><p id="282aeb46">Visual Studio Online Work Items plugin is <b id="2a9976fd">obsolete since TeamCity 10.0</b> and can be safely removed. TeamCity 10.0 has a built-in integration with <a href="https://confluence.jetbrains.com/display/TCD10/Team+Foundation+Work+Items" data-external="true" target="_blank" rel="noopener noreferrer">Team Foundation Work Items</a> which supports TFS 2010+ and Visual Studio Team Services. After upgrade, TeamCity will detect the existing issue tracker connections of this plugin and convert them into TFS Work Items.</p></div><a name="DefaultCheckoutmodefornewlycreatedbuildconfigurations"></a><a name="Default-Checkout-mode-for-newly-created-build-configurations"></a><div class="chapter"><h3 id="UpgradeNotes-DefaultCheckoutmodefornewlycreatedbuildconfigurations">Default Checkout mode for newly created build configurations</h3><p id="67976416">The default setting for the VCS checkout mode on creating new build configurations has changed: now TeamCity will check out the sources on the agent before the build. If the agent-side checkout is not possible, TeamCity  will use the server-side checkout. Explicit server-side or agent-side checkout is still in place. The new default applies only to newly created build configurations; all the existing ones will work as configured before.</p></div><a name="Project-basedAgentManagementPermissions"></a><a name="Project-based-Agent-Management-Permissions"></a><div class="chapter"><h3 id="UpgradeNotes-Project-basedAgentManagementPermissions">Project-based Agent Management Permissions</h3><p id="534c7812">New TeamCity installations now have different agent management permissions assignments: Project Administrator role does not include (global) Agent Manager role. Instead, Project administrator role has <a href="role-and-permission.html#Project-level-Agent-Management-Permissions">agent-project permissions</a> which allow managing agents from the agent pools with only projects where user has Project Administrator role.</p><p id="fed5f4b9">Existing installations are not affected by this change in order not to change the user permissions. However, it is recommended to review the Project Administrator role and consider excluding "Agent Manager" role and adding the following permissions:</p><ul class="list _ul"><li class="list__item" id="716bf17f"><p>Enable / disable agents associated with project</p></li><li class="list__item" id="0cea5049"><p>Start / Stop cloud agent for project</p></li><li class="list__item" id="7c741659"><p>Change agent run configuration policy for project</p></li><li class="list__item" id="35427800"><p>Administer project agent machines (for example, reboot, view agent logs)</p></li><li class="list__item" id="fa9d7b8c"><p>Remove project agent</p></li><li class="list__item" id="14783ea3"><p>Authorize project agent</p></li></ul></div><a name="UIChanges"></a><a name="UI-Changes"></a><div class="chapter"><h3 id="UpgradeNotes-UIChanges">UI Changes</h3><a name="ServerAdministrationUI"></a><a name="Server-Administration-UI"></a><div class="chapter"><h4 id="UpgradeNotes-ServerAdministrationUI">Server Administration UI</h4><p id="3fcbaf76">The new <b id="94ffcef1">Administration | Tools</b> page allows setting up tools to be used by appropriate plugins. Tools are automatically distributed to all build agents and can be used in related runners.</p></div><a name="NewCreateproject/Createbuildconfigurationbuttons"></a><a name="New-Create-project-/-Create-build-configuration-buttons"></a><div class="chapter"><h4 id="UpgradeNotes-NewCreateproject/Createbuildconfigurationbuttons">New Create project / Create build configuration buttons</h4><p id="c1f2f54b">The new <b id="7edfa2a2">Create subproject</b> and <b id="af705f9a">Create build configuration</b> buttons have a drop-down now allowing you to select whether you want to create a project from scratch (manually), from URL, or using the popular version control systems GitHub.com and Bitbucket.</p></div><a name="NuGet-relatedUI"></a><a name="NuGet-related-UI"></a><div class="chapter"><h4 id="UpgradeNotes-NuGet-relatedUI">NuGet-related UI</h4><p id="52dd9a2f">NuGet settings page is removed. NuGet.exe can be installed using the new <b id="44ea2fd7">Tools</b> page;  to set up TeamCity as a NuGet Server, go to the  <b id="785a36e7">Administration</b>  |  <b id="c24f8bc5">NuGet Feed</b>  page.</p></div><a name="Tests-relatedUI"></a><a name="Tests-related-UI"></a><div class="chapter"><h4 id="UpgradeNotes-Tests-relatedUI">Tests-related UI</h4><p id="87435adf">The Problematic Tests tab is no longer available and the View all tests failed within the last 120 hours link is removed from the the  Current Problems tab.</p><p id="ad03a52b">TeamCity now detects <a href="viewing-tests-and-configuration-problems.html">Flaky tests</a> displayed on the dedicated tab for a given project.</p></div></div><a name="VisualStudioAdd-in"></a><a name="Visual-Studio-Add-in"></a><div class="chapter"><h3 id="UpgradeNotes-VisualStudioAdd-in">Visual Studio Add-in</h3><p id="5dcf1506">The legacy version of the TeamCity Visual Studio Add-in is no longer supported. Visual Studio 2005 and 2008 are not supported.</p><p id="0d258a76">TeamCity Visual Studio Add-in is shipped <a href="visual-studio-addin.html">as a part of ReSharper Ultimate</a>. After installation, the TeamCity Add-in will be available under the RESHARPER menu in Visual studio.</p><p id="e9917907">Note that the installer will remove the pre-bundle products versions: TeamCity and ReSharper versions prior to 9.0, dotCover prior to 3.0, dotTrace prior to 6.0.ReSharper Ultimate does not support the Visual Studio versions 2005 and 2008.</p></div><a name="IntelliJIDEACompatibility"></a><a name="IntelliJ-IDEA-Compatibility"></a><div class="chapter"><h3 id="UpgradeNotes-IntelliJIDEACompatibility">IntelliJ IDEA Compatibility</h3><p id="30114c73">IntelliJ IDEA 12.1 and older, as well as other IntelliJ-based products released prior to year 2013, is no longer supported by <a href="https://confluence.jetbrains.com/" data-external="true" target="_blank" rel="noopener noreferrer">IntelliJ Platform Plugin</a> .</p></div><a name="Snapshotdependenciesbuildsrebuilding"></a><a name="Snapshot-dependencies-builds-rebuilding"></a><div class="chapter"><h3 id="UpgradeNotes-Snapshotdependenciesbuildsrebuilding">Snapshot dependencies builds rebuilding</h3><p id="152a1332">After the server upgrade, the builds used as snapshot dependencies may be rebuilt once even if the snapshot dependency has the "Do not run new build if there is a suitable one" option set to ON. This is done to fix the <a href="https://youtrack.jetbrains.com/issue/TW-43226" data-external="true" target="_blank" rel="noopener noreferrer">issue</a>.</p></div><a name="Perforce"></a><a name="Perforce"></a><div class="chapter"><h3 id="UpgradeNotes-Perforce">Perforce</h3><p id="876b8678">Clean checkout will be enforced in builds with Stream-based and Client-based Perforce VCS Roots.</p></div><a name="Subversion"></a><a name="Subversion"></a><div class="chapter"><h3 id="UpgradeNotes-Subversion">Subversion</h3><p id="36beebc0">Starting from TeamCity 10, TeamCity does not accept by default connections to SVN servers accessed by https:// protocol with non-trusted server SSL certificate. To enable access with such certificates, you should either import the certificate to server JVM keychain, or enable VCS Root option "<b id="e322ea9b">Accept non-trusted SSL certificate</b>" (Enable non-trusted SSL certificate in 10.0)  (<a href="https://youtrack.jetbrains.com/issue/TW-45592" data-external="true" target="_blank" rel="noopener noreferrer">issue</a>).</p></div><a name="Bundledtoolsupdates"></a><a name="Bundled-tools-updates"></a><div class="chapter"><h3 id="UpgradeNotes-Bundledtoolsupdates2">Bundled tools updates</h3><p id="de6d473e">Ant runner: the bundled Ant distribution has been upgraded from 1.9.6 to 1.9.7</p><p id="61b8cea7">.NET dotCover coverage: the bundled dotCover is updated to 2016.1</p><p id="9adc8953">ReSharper command line tools: the bundled R# CLT is updated to 2016.1</p><p id="a1759e01">Java inspections and duplicates: the bundled IntelliJ IDEA is updated to 2016.2</p></div><a name="GitHubIssueTracker"></a><a name="GitHub-Issue-Tracker"></a><div class="chapter"><h3 id="UpgradeNotes-GitHubIssueTracker">GitHub Issue Tracker</h3><p id="400a1673">If you were using the TeamCity-GitHub  <a href="https://github.com/milgner/TeamCityGithub" data-external="true" target="_blank" rel="noopener noreferrer">third-party plugin</a>  prior to TeamCity 10.0, you can safely <a href="installing-additional-plugins.html">remove</a>  it: the built-in TeamCity integration will detect the existing connection to GitHub issue tracker and pick up your settings automatically.</p></div><a name="NuGetSupport"></a><a name="NuGet-Support"></a><div class="chapter"><h3 id="UpgradeNotes-NuGetSupport">NuGet Support</h3><p id="372ff603">Configuration parameters <code class="code">teamcity.tool.NuGet.CommandLine.%NUGET_VERSION%.nupkg</code> are not reported anymore. The <code class="code">teamcity.tool.NuGet.CommandLine.%NUGET_VERSION%</code> parameters should be referenced instead.</p><p id="2e582f56">For example, instead of using <code class="code">%teamcity.tool.NuGet.CommandLine.DEFAULT.nupkg%</code> parameter reference <code class="code">%teamcity.tool.NuGet.CommandLine.DEFAULT%</code> should be used.</p></div><a name="BuildStatistics"></a><a name="Build-Statistics"></a><div class="chapter"><h3 id="UpgradeNotes-BuildStatistics">Build Statistics</h3><p id="cb3ab4dc">Several statistic values (metrics) has been reworked and renamed:</p><ul class="list _ul"><li class="list__item" id="69f3ef7f"><p><code class="code">BuildCheckoutTime</code> into <code class="code">buildStageDuration:sourcesUpdate</code></p></li><li class="list__item" id="669b01e5"><p><code class="code">BuildArtifactsPublishingTime</code> into <code class="code">buildStageDuration:artifactsPublishing</code></p></li><li class="list__item" id="007c7ff8"><p><code class="code">ArtifactsResolvingTime</code> into <code class="code">buildStageDuration:dependenciesResolving</code></p></li></ul><p id="c5b3b77a">Old keys are still supported in charts definitions.</p></div><a name="RESTAPI"></a><a name="REST-API"></a><div class="chapter"><h3 id="UpgradeNotes-RESTAPI4">REST API</h3><p id="1d2e2c8e">REST API uses version 10.0.  The previous versions of the API are still available under <code class="code">/app/rest/9.1</code>,<code class="code">/app/rest/9.0</code>,<code class="code">/app/rest/8.1</code>, <code class="code">/app/rest/7.0</code>,<code class="code">/app/rest/6.0</code> URLs.</p><p id="5e7e4380">Requests for a set of items with the locator addressing a single item which resulted in 404 responses previously will now return an empty set as a more consistent approach. For example, <code class="code">.../app/rest/builds?locator=id:&lt;non-existent build id&gt;</code>. REST debug logging might have diagnostics message with more details as to the case.</p><p id="12a5a88c">Requests for set of items <b id="b0b8fba8">may return not all/incomplete results</b> (with zero or more items included) and provide <code class="code">nextHref</code> sub-element with the link to retrieve the next "page" of items. The search result is complete when no <code class="code">nextHref</code> sub-element is provided.</p><p id="59f337d2">Some requests for set of items (e.g. ...<code class="code">/app/rest/vcs-roots</code> and .../<code class="code">app/rest/vcs-root-instances</code>) will use paged results by default when queried without a locator (they used to list all the items). Add the "<code class="code">count:NNN"</code> locator dimension to set page size.</p><p id="dccc824a"><b id="256c4b4e">Finding builds</b> (<code class="code">.../app/rest/builds/...</code> URL)<br>When performing builds scan to find those matched by the locator specified, by default for performance reasons TeamCity will return partial result limited by scanning only 5000 most recent builds. To process a larger portion of the history, check the <code class="code">nextHref</code> attribute returned or set the <code class="code">lookupLimit</code> locator dimension to a larger value.<br>Previously, until specifically requested the builds from non-default branch as well as canceled, personal and failed to start builds were not returned. Now these filtered out builds are returned by default for running and queued builds queries as well as when filtering by agent or user. Use <code class="code">defaultFIlter:true/false</code> locator dimension to manage the default filtering explicitly.<br>Also, <code class="code">number:NNN</code> locator now adheres to the same default logic: only "usual" finished builds from default branch are searched by number and several builds can be returned if found.</p><p id="34fcc8a5"><b id="44f7884b">Finding VCS roots</b> (<code class="code">.../app/rest/vcsRoots/... URL</code>)(minor)<br>A VCS root locator with <code class="code">project</code> and <code class="code">buildType</code> specified used <code class="code">project</code> as the context for finding <code class="code">buildType</code>. This is no longer the case,the  <code class="code">buildType</code> locator should be full one to find the build configuration.</p><p id="0a0f028c"><b id="7104f1b8">Build Configuration's Artifact Dependencies</b> (entities returned by<code class="code">.../app/rest/buildTypes/...</code> URL)<br>The <code class="code">artifact-dependencies</code> sub-element of the <code class="code">buildType</code> element now uses textual generated ids instead of numeric ones which depended on the order previously. This also affects requests for artifact dependencies modification.<br>The <code class="code">agent-requirements</code> sub-element of the <code class="code">buildType</code> element now uses generated ids instead of the parameter name as id. This also affects requests for agent requirements modification.</p><p id="a29e781a"><b id="b63b8196">Editing agent requirements</b> (<code class="code">.../app/rest/buildTypes/.../artifact-requirements/...</code> URL)<br>Previously, on adding  a new agent requirement for the same parameter, the existing one was overridden by the new one; now a new one is added.Previously, on adding  a new agent requirement, the parameter name was derived from the <code class="code">id</code> attribute of the <code class="code">agent-requirement</code> node. Since TeamCity 10, the parameter name is derived from the "<code class="code">property-name</code>" property.</p><p id="55fa40c5"><b id="890e2949">Test and problem occurrences</b> (<code class="code">.../app/rest/testOccurrences</code>,<code class="code">.../app/rest/problemOccurrences</code> URL)<br>The sorting of the returned results is changed for some of the queries compared to the previous versions. For example, the<code class="code">"../app/rest/testOccurrences?locator=build:(xxx)</code>" request now returns the tests in the order they were run in the build.<br>Previously, test occurrences were sorted by the new status and then by name. Problem occurrences were sorted by problem id.<br>Also, the <code class="code">build</code> dimension in the test/problem-related locators now supports multiple builds so for the requests which matched several builds via the "<code class="code">build</code>" dimension, all the builds will be processed; previously only the first matching build was processed.</p><p id="49e2648d"><b id="6668f1ef">Entities</b><br>The <code class="code">property</code> entity used to have its "own" Boolean attribute indicating whether the parameter is redefined in the build configuration as opposed to inherited from a template/project. Now the attribute is renamed to '<code class="code">inherited</code>' and its value is inverted.<br>The <code class="code">vcs-root</code> and <code class="code">vcs-root-instance</code> used to have <code class="code">status</code> and <code class="code">lastChecked</code> attributes. Now VCS root instance has <code class="code">status</code> element (with <code class="code">current</code> node which has <code class="code">status</code> and and <code class="code">timestamp</code> attributes) and VCS root does not have the data as it produced undefined results in case of several VCS root instances.<br>The <code class="code">test</code> entity <code class="code">id</code> became Sring instead of Long (due to <a href="https://youtrack.jetbrains.com/issue/TW-42028" data-external="true" target="_blank" rel="noopener noreferrer">inability</a> to represent some Java Long value in JavaScript)</p><p id="f8c0a8e9"><b id="cc0af37b">Build type and template</b><br>The <code class="code">settings</code> node used to contain all the supported settings. Now only those defined in the build configuration or template are present. The same is true for <code class="code">.../app/rest/buldTypes/XXX/settings/*</code> requests: only the values changed from defaults are present.</p><p id="cde43ce4"><b id="ee491f02">Compatible agents</b><br>When querying for compatible agents, only the agents which can actually run the builds are now returned. By default, unauthorized, disconnected and disabled agents are not listed. This behavior differs from that in previous versions which had a number of discrepancies. Affected requests and entities: <code class="code">.../app/rest/agents?locator=compatible:(...)</code>; <code class="code">../app/rest/agents/.../compatibleBuildTypes</code> and <code class="code">incompatibleBuildTypes</code>; nested nodes <code class="code">Agent.compatibleBuildTypes</code>, <code class="code">QueuedBuild.compatibleAgents</code>, <code class="code">BuildType.compatibleAgents</code>.</p></div></div><a name="Changesfrom9.1.6to9.1.7"></a><a name="Changes-from-9.1.6-to-9.1.7"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom9.1.6to9.1.7">Changes from 9.1.6 to 9.1.7</h2><p id="c4a19ccc">No noteworthy changes.</p></div><a name="Changesfrom9.1.5to9.1.6"></a><a name="Changes-from-9.1.5-to-9.1.6"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom9.1.5to9.1.6">Changes from 9.1.5 to 9.1.6</h2><a name="KnownIssues"></a><a name="Known-Issues"></a><h4 id="UpgradeNotes-KnownIssues3">Known Issues</h4><p id="8c600d3b">There is a <a href="https://youtrack.jetbrains.com/issue/TW-43731" data-external="true" target="_blank" rel="noopener noreferrer">known issue</a> in the bundled dotCover run on Windows XP and Vista. You can use the <a href="https://youtrack.jetbrains.com/issue/TW-43731#comment=27-1286417" data-external="true" target="_blank" rel="noopener noreferrer">hotfix</a> or the <a href="https://youtrack.jetbrains.com/issue/TW-43731#comment=27-1286522" data-external="true" target="_blank" rel="noopener noreferrer">workaround</a>provided. The issue will be fixed in the next dotCover release.</p><p id="24009f91">There is a <a href="https://youtrack.jetbrains.com/issue/TW-44479" data-external="true" target="_blank" rel="noopener noreferrer">known issue</a> with <a href="https://confluence.jetbrains.com/display/TCD9/NuGet+Feed+Credentials" data-external="true" target="_blank" rel="noopener noreferrer">NuGet Credentials</a> not working for the Authenticated Feed URL of the internal TeamCity NuCet server on the local agents. As a workaround, instead of using <code class="code">%teamcity.nuget.feed.auth.server%</code>, please specify the external server URL in the build step and the build feature.</p><a name="NuGet"></a><a name="NuGet"></a><h4 id="UpgradeNotes-NuGet">NuGet</h4><p id="ae909ad3">NuGet versions prior to 2.8.6 require .Net Framework 4.0+ installed on the build agent, NuGet 2.8.6 and later requires .NET 4.5.</p><a name="NUnit"></a><a name="NUnit"></a><h4 id="UpgradeNotes-NUnit">NUnit</h4><p id="cb43194f">Since version 9.1.6, TeamCity does not support NUnit 3 beta versions (released before NUnit 3.0.0).</p><p id="4c59d8cb">The "Run a process per assembly" option of the <a href="nunit.html">NUnit runner</a> has been removed from NUnit 3 settings. Configure the desired behavior using the required <a href="https://github.com/nunit/nunit/wiki/Console-Command-Line" data-external="true" target="_blank" rel="noopener noreferrer">command line options</a> in the <a href="nunit.html">corresponding field</a>.</p><a name="Bundledtoolsupdates"></a><a name="Bundled-tools-updates"></a><h4 id="UpgradeNotes-Bundledtoolsupdates3">Bundled tools updates</h4><p id="29f4c9d0">Bundled IntelliJ IDEA updated to version # 143.1945 (roughly equivalent to 15.0.3 with a few additional fixes).</p><p id="dfabc053">Bundled version of Maven 3.2.x updated to 3.2.5.</p><a name="PerformanceMonitor"></a><a name="Performance-Monitor"></a><h4 id="UpgradeNotes-PerformanceMonitor">Performance Monitor</h4><a name="Noteonpermissions:tomonitorperformanceofabuildagentrunasaWindowsservice,makesuretheuserstartingtheagentismemberofthePerformanceMonitorUsersgroup."></a><a name="Note-on-permissions:-to-monitor-performance-of-a-build-agent-run-as-a-Windows-service,-make-sure-the-user-starting-the-agent-is-member-of-the-Performance-Monitor-Users-group."></a><h4 id="UpgradeNotes-Noteonpermissions:tomonitorperformanceofabuildagentrunasaWindowsservice,makesuretheuserstartingtheagentismemberofthePerformanceMonitorUsersgroup.">Note on permissions: to monitor performance of a build agent run as a Windows service, make sure the user starting the agent is member of the Performance Monitor Users group.</h4></div><a name="Changesfrom9.1.4to9.1.5"></a><a name="Changes-from-9.1.4-to-9.1.5"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom9.1.4to9.1.5">Changes from 9.1.4 to 9.1.5</h2><a name="KnownIssues"></a><a name="Known-Issues"></a><h4 id="UpgradeNotes-KnownIssues4">Known Issues</h4><p id="89dd5f9a">There is a <a href="https://youtrack.jetbrains.com/issue/TW-43731" data-external="true" target="_blank" rel="noopener noreferrer">known issue</a> in the bundled dotCover run on Windows XP and Vista. You can use the <a href="https://youtrack.jetbrains.com/issue/TW-43731#comment=27-1286417" data-external="true" target="_blank" rel="noopener noreferrer">hotfix</a> or the <a href="https://youtrack.jetbrains.com/issue/TW-43731#comment=27-1286522" data-external="true" target="_blank" rel="noopener noreferrer">workaround</a> provided. The issue will be fixed in the next dotCover release.</p><a name="Producticons"></a><a name="Product-icons"></a><h4 id="UpgradeNotes-Producticons">Product icons</h4><p id="13a17692">JetBrains product icons are updated in accordance with the <a href="http://blog.jetbrains.com/blog/2015/12/10/the-drive-to-develop/" data-external="true" target="_blank" rel="noopener noreferrer">new JetBrains branding</a>.</p><a name="Git"></a><a name="Git"></a><h4 id="UpgradeNotes-Git">Git</h4><p id="36f9241f">Since TeamCity 9.1.5, <code class="code">git sparse-checkout</code>  <a href="https://youtrack.jetbrains.com/issue/TW-43330#comment=27-1229510" data-external="true" target="_blank" rel="noopener noreferrer">is disabled</a> by default. To enable it in a TeamCity project, add the <code class="code">teamcity.git.useSparseCheckout=true</code> <a href="https://confluence.jetbrains.com/display/TCD9/Project+and+Agent+Level+Build+Parameters#ProjectandAgentLevelBuildParameters-ProjectLevelBuildParameters" data-external="true" target="_blank" rel="noopener noreferrer">parameter</a>to this project.</p><a name="Gradle:Breakingchangecomparedto9.1.2"></a><a name="Gradle:-Breaking-change-compared-to-9.1.2"></a><h4 id="UpgradeNotes-Gradle:Breakingchangecomparedto9.1.2">Gradle: Breaking change compared to 9.1.2</h4><p id="48a06474">Gradle runner <code class="code">system.*</code> <a href="gradle.html">properties</a>, introduced in <b id="ffe26337">TeamCity 9.1.2</b>, defined for the build as JVM's system properties of the Gradle process, will not work <b id="82210cc6">since 9.1.5</b>. Now the TeamCity system properties can be accessed in Gradle scripts as Gradle properties (similarly to the ones defined in the <code class="code">gradle.properties</code>file) and are to be referenced as follows:</p><p id="20c70175">a) name allowed as a Groovy identifier (the property name does not contain dots): <code class="code">customUserProperty</code><br>b) name not allowed as a Groovy identifier (the property name contains dots, e.g. <code class="code">build.vcs.number.1</code>): <code class="code">project.ext["build.vcs.number.1"]</code></p><a name="Bundledtoolsupdates"></a><a name="Bundled-tools-updates"></a><h4 id="UpgradeNotes-Bundledtoolsupdates4">Bundled tools updates</h4><p id="355bde84">The bundled JetBrains IntelliJ IDEA (IDEA inspections and duplicates) has been updated to version 15.0.2</p><a name=".Nettoolsupdates"></a><a name=".Net-tools-updates"></a><h4 id="UpgradeNotes-.Nettoolsupdates">.Net tools updates</h4><p id="a4f4c02a">JetBrains ReSharper command line tools (.NET inspection and duplicates) have been updated to match ReSharper 10.0.2 releaseTeamCity Visual Studio Addin Web installer updated to ReSharper 10.0.2 releaseBundled JetBrains dotCover updated to version 10.0.2</p></div><a name="Changesfrom9.1.3to9.1.4"></a><a name="Changes-from-9.1.3-to-9.1.4"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom9.1.3to9.1.4">Changes from 9.1.3 to 9.1.4</h2><a name="KnownIssues"></a><a name="Known-Issues"></a><h4 id="UpgradeNotes-KnownIssues5">Known Issues</h4><p id="688cfa25">Certain roles/permissions configurations can result in error loading roles and no ability for regular users to view projects. In such cases the  "<b id="62a65707">Circular reference is detected between roles</b>" critical server error is displayed on the server administration pages for those logged in as server administrator. Please check the <a href="https://youtrack.jetbrains.com/issue/TW-43186#comment=27-1211556" data-external="true" target="_blank" rel="noopener noreferrer">workaround</a> for the issue.</p><p id="7f276e9d"><b id="677f02aa">Git agent-side checkout</b> may malfunction (details at <a href="https://youtrack.jetbrains.com/issue/TW-43202" data-external="true" target="_blank" rel="noopener noreferrer">TW-43202</a> ) when the <code class="code">teamcity.git.use.native.ssh=true</code> parameter is specified in a build configuration or in the agent config. To fix that, install the <a href="https://teamcity.jetbrains.com/viewType.html?buildTypeId=TeamCityPluginsByJetBrains_Git_JetBrainsGitPluginTeamCity91x" data-external="true" target="_blank" rel="noopener noreferrer">#snapshot-34</a> build of the Git-plugin.</p><p id="e894b8df"><b id="5f4bab58">Git agent-side checkout</b> works incorrectly with git client versions 1.7.0-1.7.4: the checkout directory contains files only, all directories are missing (details at <a href="https://youtrack.jetbrains.com/issue/TW-43330" data-external="true" target="_blank" rel="noopener noreferrer">TW-43330</a>). To workaround the problem, add the <code class="code">teamcity.git.useSparseCheckout=false</code> parameter in the Root TeamCity project.</p><a name="TeamCityWindowsbinariessignatures"></a><a name="TeamCity-Windows-binaries-signatures"></a><h4 id="UpgradeNotes-TeamCityWindowsbinariessignatures">TeamCity Windows binaries signatures</h4><p id="662194ad">Since 9.1.4  the TeamCity Windows binaries are signed with SHA-2 code-signing certificate following the <a href="http://social.technet.microsoft.com/wiki/contents/articles/32288.windows-enforcement-of-authenticode-code-signing-and-timestamping.aspx" data-external="true" target="_blank" rel="noopener noreferrer">Microsoft SHA-2 policies</a>. This means that on systems prior to Windows XP SP3, the executables will not pass code signing verification; newer Windows systems require the corresponding security update from Microsoft.</p><a name="Bundledtoolsupdates"></a><a name="Bundled-tools-updates"></a><h4 id="UpgradeNotes-Bundledtoolsupdates5">Bundled tools updates</h4><p id="8ed34592">Bundled Oracle JRE (in both Server and Agent.exe installers) has been updated to version  1.8.0_66 (32-bit)</p><a name=".Nettoolsupdates"></a><a name=".Net-tools-updates"></a><h4 id="UpgradeNotes-.Nettoolsupdates2">.Net tools updates</h4><p id="f480a8d8">JetBrains ReSharper command line tools (.NET inspection and duplicates) have been updated to match ReSharper 10.0 release</p><p id="2c07e77d">TeamCity Visual Studio Addin Web installer updated to ReSharper 10.0 release</p><p id="38e170fd">Bundled JetBrains dotCover updated to version 10.0</p></div><a name="Changesfrom9.1.2to9.1.3"></a><a name="Changes-from-9.1.2-to-9.1.3"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom9.1.2to9.1.3">Changes from 9.1.2 to 9.1.3</h2><a name="KnownIssues"></a><a name="Known-Issues"></a><h4 id="UpgradeNotes-KnownIssues6">Known Issues</h4><p id="e5adc8de">There is a <a href="https://youtrack.jetbrains.com/issue/DCVR-7708" data-external="true" target="_blank" rel="noopener noreferrer">known issue</a> in the bundled dotCover 3.2 which could cause a build's failure with the following exception: "System.Security.VerificationException: System.Security.VerificationException: Operation could destabilize the runtime". The issue is fixed in dotCover 10.0 bundled with TeamCity 9.1.4 release.</p><p id="9af4293b">Bundled JVM (Server Windows installer and Agent Windows installer) is updated which results in disabled SSL RC4 chiper suite for outgoing HTTPS connections. For example this makes connections to CloudForge SVN servers non-functional with "SSLHandshakeException: Received fatal alert: handshake_failure" error. (<a href="https://youtrack.jetbrains.com/issue/TW-42577" data-external="true" target="_blank" rel="noopener noreferrer">details</a>)</p><p id="b894e3df">Changes from 9.1.1 to 9.1.2</p><a name="Knownissues"></a><a name="Known-issues"></a><h4 id="UpgradeNotes-Knownissues14">Known issues</h4><p id="70fe7106">The Command line runner can fail to execute a custom script if it has a non-default hashbang specified at the beginning of the script: <a href="https://youtrack.jetbrains.com/issue/TW-42498" data-external="true" target="_blank" rel="noopener noreferrer">TW-42498</a></p><p id="0ebb7e43">When using Amazon EC2 cloud integration, an AMI-image, containing build agent versions 9.1.2-9.1.5 will appear twice with name EC2-i-abcdefgh and EC2-i-abcdefgh-1 consuming 2 licenses. To fix the issue please use an AMI-image with agent 9.1.6+. Just updating server to 9.1.6 won't help, if AMI remains the same. (<a href="https://youtrack.jetbrains.com/issue/TW-43992" data-external="true" target="_blank" rel="noopener noreferrer">details</a>)</p><a name="Buildstatusicons"></a><a name="Build-status-icons"></a><h4 id="UpgradeNotes-Buildstatusicons">Build status icons</h4><p id="304935ba">Build status icons updated to a more "standard" look and are of a bit larger now.</p><a name="Bundledtoolsupdates"></a><a name="Bundled-tools-updates"></a><h4 id="UpgradeNotes-Bundledtoolsupdates6">Bundled tools updates</h4><p id="fc9853c2">JetBrains ReSharper command line tools (.NET inspection and duplicates) have been updated to match ReSharper 9.2 release</p><p id="290d231c">TeamCity Visual Studio Addin Web installer updated to ReSharper 9.2 release</p><p id="28ab63c9">Bundled JetBrains dotCover updated to version 3.2</p><p id="7838bad3">Bundled Oracle JRE (in both Server and Agent .exe installers) updated to version 1.8.0_60 (32-bit)</p></div><a name="Changesfrom9.1to9.1.1"></a><a name="Changes-from-9.1-to-9.1.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom9.1to9.1.1">Changes from 9.1 to 9.1.1</h2><p id="bb4d9a91">Bundled Jacoco coverage library updated to version 0.7.5</p><p id="48f641c8">Perforce VCS Roots with disabled ticket authentication won't run 'p4 login' operation anymore if password authentication is disabled on the Perforce server.<br>I.e. if password authentication is disabled, "Use ticked-based authentication" option must be enabled on the VCS Root. <a href="https://youtrack.jetbrains.com/issue/TW-42818" data-external="true" target="_blank" rel="noopener noreferrer">TW-42818</a></p></div><a name="Changesfrom9.0.xto9.1"></a><a name="Changes-from-9.0.x-to-9.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom9.0.xto9.1">Changes from 9.0.x to 9.1</h2><a name="BundledAnt"></a><a name="Bundled-Ant"></a><h4 id="UpgradeNotes-BundledAnt">Bundled Ant</h4><p id="4ee8235e">Bundled Ant distribution has been upgraded form 1.8.4 to 1.9.6. Note that Ant build steps using bundled Ant will use another version of Ant after the server upgrade.  Ant 1.9.6 requires Java 1.5 at least, so builds using Ant and running under Java 1.4 will stop working.</p><a name="MSTestrunnerconvertedintoVisualStudioTestsrunner"></a><a name="MSTest-runner-converted-into-Visual-Studio-Tests-runner"></a><h4 id="UpgradeNotes-MSTestrunnerconvertedintoVisualStudioTestsrunner">MSTest runner converted into Visual Studio Tests runner</h4><p id="74f4d4f1">MSTest runner is merged with <a href="https://confluence.jetbrains.com/display/TW/VSTest.Console+Runner" data-external="true" target="_blank" rel="noopener noreferrer">VSTest console runner</a> (previously provided as a separate plugin) into the <a href="visual-studio-tests.html">Visual Studio Tests</a> runner. Note that after upgrade to TeamCity 9.1, MSTest build steps are automatically converted to the Visual Studio Tests runner steps, while VSTest steps remain unchanged.</p><aside class="note " data-title="" rel="74f4d4f1" id="468df5cd"><p id="646b84b3">If you have used <a href="https://confluence.jetbrains.com/display/TW/VSTest.Console+Runner" data-external="true" target="_blank" rel="noopener noreferrer">VSTest.Console runner plugin</a>, make sure that you have latest version (build <b id="a88ee869">32407</b>) installed. The plugin version can be viewed on <b id="d9740960">Administration | Plugins List</b> page. Earlier versions of this plugin are <b id="ff1ba926">not compatible</b> with TeamCity 9.1 and may cause malfunction of .NET related build runners which can manifest with <code class="code">java.lang.NoSuchMethodError: jetbrains.buildServer.runner.NUnit.NUnitVersion.parse(Ljava/lang/String;)</code> build errors. The plugin can be downloaded from <a href="https://confluence.jetbrains.com/display/TW/VSTest.Console+Runner" data-external="true" target="_blank" rel="noopener noreferrer">its page</a>.Consider migrating your vstest.console execution steps to the bundled Visual Studio Tests runner.</p></aside><a name="MSTestinstallationagentproperties"></a><a name="MSTest-installation-agent-properties"></a><h4 id="UpgradeNotes-MSTestinstallationagentproperties">MSTest installation agent properties</h4><p id="f05bb03f">TeamCity agent automatically detects the installed MSTest and used to expose the locations in <code class="code">system.MSTest.N.N</code> system properties.</p><p id="04c3ddc5"><b id="2296edb9">Since TeamCity 9.1</b>, the locations are exposed via <code class="code">teamcity.dotnet.mstest.N.N</code> configuration parameters. Check <a href="https://youtrack.jetbrains.com/issue/TW-41845" data-external="true" target="_blank" rel="noopener noreferrer">TW-41845</a> for a workaround if you cannot easily change the properties usage.</p><a name="Nestedtestreporting"></a><a name="Nested-test-reporting"></a><h4 id="UpgradeNotes-Nestedtestreporting">Nested test reporting</h4><p id="e97b9b10">Previously TeamCity supported a case when one test could have been reported from within another test using <a href="build-script-interaction-with-teamcity.html">service messages</a>. Now, after the fix of <a href="https://youtrack.jetbrains.com/issue/TW-40319" data-external="true" target="_blank" rel="noopener noreferrer">TW-40319</a>, starting another test finishes the currently started test in the same "flow". To still report tests from within other tests, you will need to specify another <a href="build-script-interaction-with-teamcity.html">flowId</a> in the nested test service messages.</p><a name="RESTAPI"></a><a name="REST-API"></a><h4 id="UpgradeNotes-RESTAPI5">REST API</h4><p id="dbfcb035">REST API uses version 9.1. Previous versions of API are still available under <code class="code">/app/rest/9.0</code>, <code class="code">/app/rest/8.1</code>, <code class="code">/app/rest/7.0</code>, <code class="code">/app/rest/6.0</code> URLs.</p><p id="6e6028cf"><b id="a4ab42e1">Finding builds</b><br>Summary (tl;dr): Some build filtering rules has subtle changes. Most importantly, a queued build can now be returned instead of 404 when searching by build id and meaning of the "project" locator dimension has changed to be not recursive. Also, failed to start builds are now not included until "failedToStart:any" locator dimension is specified.</p><p id="2b775b74">Details:<br>Affected requests: /app/builds/&lt;locator&gt;..., /app/builds?locator=&lt;locator&gt;, /app/buildTypes/&lt;btLocator&gt;/builds and others with build locator</p><p id="ba299ff7">locator: id:&lt;number&gt; or taskId:&lt;number&gt;</p><ul class="list _ul"><li class="list__item" id="88096c3e"><p>previously, if the matching build was a queued one, 404 (Not Found) was returned</p></li><li class="list__item" id="d8a34f1a"><p>now the queued build is returned</p></li></ul><p id="9e979d69">locator: project:&lt;id&gt;...</p><ul class="list _ul"><li class="list__item" id="2059174e"><p>previously, all the builds belonging to build configurations of the project and all it's subprojects (recursively) were found</p></li><li class="list__item" id="831c4de5"><p>now only the builds belonging to build configurations of the project specified are found. For finding the builds recursively, use "affectedProject:&lt;id&gt;." dimension. This makes the usage consistent with build type locators.</p></li></ul><p id="26e26700">locator: tag:&lt;text&gt;</p><ul class="list _ul"><li class="list__item" id="51e05268"><p>previously, when "&lt;text&gt;" used ":" character, that used to treat the entire "&lt;text&gt;" as tag name</p></li><li class="list__item" id="af13d8bf"><p>now the "&lt;text&gt;" is parsed as a nested locator. For searhing tags with ":" character, locator "tag:(name:(&lt;tag&gt;))" should be used</p></li></ul><p id="338da36f">locator: &lt;text&gt;</p><ul class="list _ul"><li class="list__item" id="07d4becb"><p>previously, if &lt;text&gt; is not a number, response was 400 (Bad Request) with "LocatorProcessException: Invalid single value: '&lt;text&gt;'. Should be a number." message.</p></li><li class="list__item" id="ee304961"><p>now search by build number across all builds on the server is performed (this is not recommended to be used on production servers). For not found builds 404 (Not found) response is returned</p></li></ul><p id="5a112a69">locator: id:&lt;number&gt;,xxx:yyyy</p><ul class="list _ul"><li class="list__item" id="ae77d7a4"><p>previously, build was found by id "&lt;number&gt;, other dimensions were ignored</p></li><li class="list__item" id="d9e92e6e"><p>now if the build found by id does not match other dimensions, response is 404 (Not Found)</p></li></ul><p id="cf04976c">locator: agent:&lt;agentLocator&gt;</p><ul class="list _ul"><li class="list__item" id="f77f8708"><p>previously &lt;agentLocator&gt; was used as is, without applying any defaults (unauthorized agents were included until specifically excluded)</p></li><li class="list__item" id="ed2923ba"><p>now &lt;agentLocator&gt; has the same behavior as in /app/rest/agents request: unauthorized agents are excluded by default</p></li></ul><p id="825a48b2"><b id="836d6a4a">Finding projects</b><br>Searching project by name used to return 404 error is several projects were matched. Now will return the first project found.</p><p id="8358254f"><b id="1e6fa963">Build's artifacts</b><br>There are several bugs fixed in listing build artifacts via /app/rest/builds/&lt;locator&gt;/artifacts/* requests which can cause subtle changes in the results for the request. Check the new behavior if you relied on the response.The most important changes are:</p><ul class="list _ul"><li class="list__item" id="c89d7daa"><p>the initial path specified via URL part is searched for without current locator value, it will not generate 404 responses until there is no such artifact on disk.</p></li><li class="list__item" id="3ff78898"><p>archives are not treated as directories (do not have children elements) by default. Specify "browseArchives:true" to treat archives as directories (in "recursive:true" mode only one level of archives is treated as directories)</p></li></ul><p id="6f94c9ac"><b id="a3ec3e4f">Agents</b><br>Agents which are not known to the system (which were deleted) used to have id "-1". Now "id", "pool" and some other entries are no longer included for such agents.</p><a name="Xcode7Support"></a><a name="Xcode-7-Support"></a><h4 id="UpgradeNotes-Xcode7Support">Xcode 7 Support</h4><p id="5f0005c0"><a href="xcode-project.html">Experimental support</a> for Xcode 7 has been added.</p><a name="Issuetrackersintegration"></a><a name="Issue-trackers-integration"></a><h4 id="UpgradeNotes-Issuetrackersintegration">Issue trackers integration</h4><p id="cd563408">Due to API changes, third party issue trackers integration plugins might not be compatible with TeamCity version 9.1. Old plugins will not work and will report "java.lang.NoSuchMethodError: jetbrains.buildServer.issueTracker.AbstractIssueProviderFactory.&lt;init&gt;(Ljetbrains/buildServer/issueTracker/IssueFetcher;Ljava/lang/String;)V" error in <code class="code">teamcity-server.log</code> log (more details in the <a href="https://youtrack.jetbrains.com/issue/TW-41508" data-external="true" target="_blank" rel="noopener noreferrer">issue</a>). If you observe such errors, please contact the <a href="https://plugins.jetbrains.com/teamcity" data-external="true" target="_blank" rel="noopener noreferrer">plugin authors</a>. If you are the author of affected plugin, please refer to the related notes in <a href="https://confluence.jetbrains.com/display/TCD18/Open+API+Changes" data-external="true" target="_blank" rel="noopener noreferrer">Open API Changes</a>.</p></div><a name="Changesfrom9.0.4to9.0.5"></a><a name="Changes-from-9.0.4-to-9.0.5"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom9.0.4to9.0.5">Changes from 9.0.4 to 9.0.5</h2><p id="7b2fa51a">No noteworthy changes.</p></div><a name="Changesfrom9.0.3to9.0.4"></a><a name="Changes-from-9.0.3-to-9.0.4"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom9.0.3to9.0.4">Changes from 9.0.3 to 9.0.4</h2><p id="cc8272cf">No noteworthy changes.</p></div><a name="Changesfrom9.0.2to9.0.3"></a><a name="Changes-from-9.0.2-to-9.0.3"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom9.0.2to9.0.3">Changes from 9.0.2 to 9.0.3</h2><p id="86ec15b5">No noteworthy changes.</p></div><a name="Changesfrom9.0.1to9.0.2"></a><a name="Changes-from-9.0.1-to-9.0.2"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom9.0.1to9.0.2">Changes from 9.0.1 to 9.0.2</h2><p id="983cbc64">No noteworthy changes.</p></div><a name="Changesfrom9.0to9.0.1"></a><a name="Changes-from-9.0-to-9.0.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom9.0to9.0.1">Changes from 9.0 to 9.0.1</h2><a name="KnownIssues"></a><a name="Known-Issues"></a><h4 id="UpgradeNotes-KnownIssues7">Known Issues</h4><p id="b9153fc1">If you have enabled versioned settings for projects which use meta-runners in TeamCity 9.0, on upgrade and following commit into the settings VCS root, the meta runners will be deleted from the server. Workaround is to commit the meta-runners definitions into the settings repository manually. Related issue: <a href="https://youtrack.jetbrains.com/issue/TW-39519" data-external="true" target="_blank" rel="noopener noreferrer">TW-39519</a>.</p><a name="Oracle10.xJDBCdriverisnotsupportedanymore"></a><a name="Oracle-10.x-JDBC-driver-is-not-supported-anymore"></a><h4 id="UpgradeNotes-Oracle10.xJDBCdriverisnotsupportedanymore">Oracle 10.x JDBC driver is not supported anymore</h4><p id="07aeac1c">Due to missing support for national character sets (nvarchar) in Oracle 10.x JDBC drivers, TeamCity 9.0.1 will ask to upgrade Oracle JDBC drivers to the latest version. The minimal supported version of Oracle JDBC driver is 11.1.</p></div><a name="Changesfrom8.1.xto9.0"></a><a name="Changes-from-8.1.x-to-9.0"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom8.1.xto9.0">Changes from 8.1.x to 9.0</h2><a name="KnownIssues"></a><a name="Known-Issues"></a><h4 id="UpgradeNotes-KnownIssues8">Known Issues</h4><ul class="list _ul"><li class="list__item" id="a681ef20"><p>If you have custom artifact cleanup rules configured which mention ".teamcity" directory, build logs can be deleted by the cleanup procedure. Make sure you have build logs backup before upgrade and remove all the custom artifacts cleanup rules with ".teamcity". Related issue: <a href="https://youtrack.jetbrains.com/issue/TW-40042" data-external="true" target="_blank" rel="noopener noreferrer">TW-40042</a>. This issue is fixed in 9.0.3 release.</p></li><li class="list__item" id="929abcbb"><p>If you use Microsoft SQL Server database with TeamCity, after the scheduled cleanup background run, TeamCity UI pages can lock until the server restart. See <a href="https://youtrack.jetbrains.com/issue/TW-39549" data-external="true" target="_blank" rel="noopener noreferrer">TW-39549</a> for details. This issue is fixed in 9.0.2 release.</p></li><li class="list__item" id="71b0e110"><p>If you use LDAP authentication on the server and there are lots of login attempts on the server (e.g. there is an active REST-using script), OutOfMemory errors can occur and require server restart. Consider installing an LDAP plugin with a fix from the <a href="https://youtrack.jetbrains.com/issue/TW-39316" data-external="true" target="_blank" rel="noopener noreferrer">issue</a>. This issue is fixed in 9.0.1 release.</p></li><li class="list__item" id="c78e2897"><p>If you have large Maven projects, you can see builds failing with OutOfMemoryError. This is caused by update of back-end embedded Maven to 3.2.3 which has bigger memory footprint. Consider increasing Build Agent <a href="https://confluence.jetbrains.com/display/TCD9/Configuring+Build+Agent+Startup+Properties" data-external="true" target="_blank" rel="noopener noreferrer">memory limits</a> Related issue: <a href="https://youtrack.jetbrains.com/issue/TW-41052" data-external="true" target="_blank" rel="noopener noreferrer">TW-41052</a></p></li></ul><a name="UUIDinXMLsettingsfiles"></a><a name="UUID-in-XML-settings-files"></a><h4 id="UpgradeNotes-UUIDinXMLsettingsfiles">UUID in XML settings files</h4><p id="b22df1af"><b id="e4f4716f">Since TeamCity 9.0</b>, disk-stored XML settings definitions of projects, build configurations and VCS roots have unique non-human-readable id (uuid) stored. These ids are automatically generated and are assumed to globally unique. On settings files copying, you need to change/make unique not only id (file name) and name (across siblings) of the entity, but also remove it's uuid from the file. TeamCity will generate new uuid automatically.</p><a name="Buildlogsstorage"></a><a name="Build-logs-storage"></a><h4 id="UpgradeNotes-Buildlogsstorage">Build logs storage</h4><p id="138c4ad1">The location of the build logs in the internal format stored under <a href="teamcity-data-directory.html">TeamCity Data Directory</a> has changed. The build log files in internal format are now stored under hidden build artifacts.Namely, the location has changed from <code class="code">system/messages/CHyy/xxyy.*</code> to <code class="code">system/artifacts/&lt;PROJECT EXTERNAL ID&gt;/&lt;BUILD CONFIGURATION NAME&gt;/xxyy/.teamcity/logs/buildLog.*</code>.</p><p id="9a675762">Old build logs are migrated to the new location on TeamCity server startup (<a href="http://youtrack.jetbrains.com/issue/TW-37362" data-external="true" target="_blank" rel="noopener noreferrer">TW-37362</a>). To avoid this migration, <code class="code">teamcity.skip.logs.migration</code> internal property should be set <b id="57c877f5">before</b> server startup.</p><a name="Buildsre-indexingafterupgrade"></a><a name="Builds-re-indexing-after-upgrade"></a><h4 id="UpgradeNotes-Buildsre-indexingafterupgrade">Builds re-indexing after upgrade</h4><p id="a4cba889">On the first server start after upgrade from a version prior to 9.0, the server will reindex all builds for the purpose of builds search functionality and NuGet feeds. During the indexing time, some builds will not be available in the search results and in NuGet feeds. The server can also behave in less performant manner way during the indexing. <code class="code">teamcity-server.log</code> has corresponding logging. On indexing finishing, there are "BuildIndexer (search) - Finished re-indexing builds" and "BuildIndexer (metadata) - Finished re-indexing builds" lines in the log.</p><a name="Integrationwithissuetrackers"></a><a name="Integration-with-issue-trackers"></a><h4 id="UpgradeNotes-Integrationwithissuetrackers">Integration with issue trackers</h4><p id="0b343d86"><b id="d035a75a">Since TeamCity 9.0</b>, the issue trackers are configured on the project level instead of the global server-wide configuration.On the server upgrade, all existing issue tracker integrations are moved to the Root project, which makes them still accessible to all the projects on the server.</p><a name="WebSocketconnectionsandproxyservers"></a><a name="WebSocket-connections-and-proxy-servers"></a><h4 id="UpgradeNotes-WebSocketconnectionsandproxyservers">WebSocket connections and proxy servers</h4><p id="f51ae1c4"><b id="f0de4a11">Since 9.0</b>, TeamCity tries to establish WebSocket connections between the browser and the server for the UI updates. If you have a proxy server (like nginx) in front of the TeamCity web UI, make sure that the proxy is <a href="how-to.html#Set-Up-TeamCity-behind-a-Proxy-Server">configured</a> properly to support WebSocket connections.</p><p id="a3bd312e">If the proxy is misconfigured or does not support the WebSocket protocol, a server health item will be shown for TeamCity system administrators. In this case TeamCity will use plain old polling for the UI updates as before.</p><a name="RESTAPI"></a><a name="REST-API"></a><h4 id="UpgradeNotes-RESTAPI6">REST API</h4><p id="0f30dfaf">REST API uses version 9.0. Previous versions of API are still available under <code class="code">/app/rest/8.1</code>, <code class="code">/app/rest/7.0</code>, <code class="code">/app/rest/6.0</code> URLs.</p><ul class="list _ul"><li class="list__item" id="b2e39e09"><p>Change bean: the <code class="code">webLink</code> attribute is renamed to <code class="code">webUrl</code> to match other beans (<a href="http://youtrack.jetbrains.com/issue/TW-34398" data-external="true" target="_blank" rel="noopener noreferrer">TW-34398</a>).</p></li><li class="list__item" id="f6f03d9b"><p>Sub-elements representing empty collections in some of the beans are no longer included into responses (used to be included as an empty tag in XML).</p></li><li class="list__item" id="bca78e2b"><p>the builds <code class="code">changes</code> element does not include the "count" attribute by default (for performance reasons), count can still be included by providing fields parameter like: "fields=$long,changes(count,href)"</p></li><li class="list__item" id="1c0c9214"><p>The <code class="code">/app/rest/agents</code> request now returns all the authorized agents by default (used to include unauthorized connected agents as well)</p></li><li class="list__item" id="67d3ccaa"><p>queued builds now have the <code class="code">id</code> attribute instead of the <code class="code">taskId</code> attribute (they are the same for new builds since TeamCity 9.0)</p></li></ul><p id="12303ad1"><b id="5649ecf7">Build tags-related changes</b><br>The <code class="code">/app/rest/builds/&lt;buildLocator&gt;/tags</code> build request now returns a different XML: <code class="code">&lt;tags count="1"&gt;&lt;tag name="TAG"/&gt;&lt;/tags&gt;</code> instead of <code class="code">&lt;tags&gt;&lt;tag&gt;TAG&lt;/tag&gt;&lt;/tags&gt;</code>.<br>The same applies to the <code class="code">/app/rest/buildTypes/&lt;buildTypeLocator&gt;/&lt;buildTypeLocator&gt;/buildTags</code> request.<br>The same change in the structure also applies to the build's entity nested "tags" element.</p><p id="08c01275">To create a tag, there is an old way to post a plain-text tag name to the <code class="code">app/rest/builds/&lt;buildLocator&gt;/tags</code> URL.<br>When sending POST or PUT XML or JSON requests to the URL, the new XML format is to be used (<code class="code">&lt;tag name="TAG"/&gt;&lt;/tags&gt;</code> instead of <code class="code">&lt;tag&gt;TAG&lt;/tag&gt;</code>).</p><a name="Handlingtestswiththesamenamewithinabuild"></a><a name="Handling-tests-with-the-same-name-within-a-build"></a><h4 id="UpgradeNotes-Handlingtestswiththesamenamewithinabuild">Handling tests with the same name within a build</h4><p id="74607163">In TeamCity 9.0, multiple tests with the same name within the same build are considered a single test with an invocation count. If any of these test runs fail, the whole test is considered failed in the build. The related issue is <a href="https://youtrack.jetbrains.com/issue/TW-24212" data-external="true" target="_blank" rel="noopener noreferrer">TW-24212</a>.</p><p id="4581c011">This change results in drop of test number counters in builds which have multiple runs for the same test. If you have a build failure condition which relies on test number in the build, this change may affect you.</p><p id="4cae562b">If you need the tests to be treated as separate ones, consider running them in the test suites with different names or otherwise changing the test/running logic to change the full test name displayed in TeamCity.</p><a name="Database-relatedchanges"></a><a name="Database-related-changes"></a><h4 id="UpgradeNotes-Database-relatedchanges">Database-related changes</h4><p id="ffe9855c">The national character sets (nchar, nvarchar, nclob types) for text fields are now supported in MS SQL databases used by TeamCity. It is recommended to use the Microsoft native JDBC driver, as jTDS JDBC driver does not support the nchar and nvarchar characters. If you still use jTDS, please <a href="setting-up-an-external-database.html">migrate</a>.</p><p id="2ee17e33">Upon upgrade and entering the normal working status, TeamCity starts a background process to move the entries from the vcs_changes database table to vcs_change table. This process is transparent and you can continue working with the server as usual. It has negligible impact on the server performance and the only affected logic is the projects import feature (it is recommended to be used only with backups taken after the process is completed). The progress of the process can be seen on the Backup section in the server administration, along with "TeamCity is currently optimizing VCS-related data in the database for better backup/restore performance" message.<br>The other important thing is that the data copying increases the size of the raw database storage.<br>If this is an issue for your case (e.g. it might be with Microsoft SQL Server database with set database size limit), it is recommended to ensure the database size limit is twice the current size before the upgrade. It is possible to perform database-specific procedures to shrink the storage to match the actually stored data after the VCS changes migration process finishes.</p><a name="VCSRoot-relatedchanges"></a><a name="VCS-Root-related-changes"></a><h4 id="UpgradeNotes-VCSRoot-relatedchanges">VCS Root-related changes</h4><p id="3a33fbf5">The Git and Mercurial VCS roots no longer provide the ability to specify a custom clone path on the server for new VCS roots. If you need this ability, set the following internal properties to <code class="code">true</code> for git and mercurial respectively: <code class="code">teamcity.git.showCustomClonePath</code>, <code class="code">teamcity.hg.showCustomClonePath</code>.</p><a name="VisualStudioAddin"></a><a name="Visual-Studio-Addin"></a><h4 id="UpgradeNotes-VisualStudioAddin">Visual Studio Addin</h4><p id="02df581d">The TeamCity Add-in installed as a part of <a href="https://www.jetbrains.com/dotnet/" data-external="true" target="_blank" rel="noopener noreferrer">ReSharper Ultimate</a> will remove the pre-bundle products versions: TeamCity and ReSharper versions prior to 9.0, dotCover prior to 3.0, dotTrace prior to 6.0.</p><p id="4b97a270">Besides, it will not use the settings provided by the 8.1 version. The traditional add-in downloaded from TeamCity server can still use settings from previous version.</p><a name="Other"></a><a name="Other"></a><h4 id="UpgradeNotes-Other3">Other</h4><p id="0358038f">TeamCity agent installation via the Java web start installation package is no longer available.</p></div><a name="Changesfrom8.1.1to8.1.4"></a><a name="Changes-from-8.1.1-to-8.1.4"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom8.1.1to8.1.4">Changes from 8.1.1 to 8.1.4</h2><p id="e49b2ca0">No noteworthy changes.</p></div><a name="Changesfrom8.1to8.1.1"></a><a name="Changes-from-8.1-to-8.1.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom8.1to8.1.1">Changes from 8.1 to 8.1.1</h2><a name="CommandLineRunner"></a><a name="Command-Line-Runner"></a><h4 id="UpgradeNotes-CommandLineRunner">Command Line Runner</h4><p id="60f4a027">The change in behavior introduced in 8.1 (see <a href="#Known-issue-with-Command-Line-Runner">below</a>) has been fixed. Command line runners using "Executable with parameters" option which were created/changed with TeamCity 8.1can expose a change in behavior with the upgrade. The recommended approach is to switch to "Custom script" option instead of "Executable with parameters" in command line runner.</p><a name="SeparatedownloadforVSTest.Consolerunner"></a><a name="Separate-download-for-VSTest.Console-runner"></a><h4 id="UpgradeNotes-SeparatedownloadforVSTest.Consolerunner">Separate download for VSTest.Console runner</h4><p id="09417071">VSTest console runner is no longer bundled with TeamCity and is available as a separate plugin. For download details, see the <a href="https://confluence.jetbrains.com/display/TW/VSTest.Console+Runner" data-external="true" target="_blank" rel="noopener noreferrer">plugin page</a></p></div><a name="Changesfrom8.0.6to8.1"></a><a name="Changes-from-8.0.6-to-8.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom8.0.6to8.1">Changes from 8.0.6 to 8.1</h2><a name="KnownissuewithcreatingMSSQLdatabasewithintegratedsecurity"></a><a name="Known-issue-with-creating-MS-SQL-database-with-integrated-security"></a><h4 id="UpgradeNotes-KnownissuewithcreatingMSSQLdatabasewithintegratedsecurity">Known issue with creating MS SQL database with integrated security</h4><p id="a3b91843">When installing TeamCity anew and creating an MS SQL database with integrated security using the database setup UI, you may receive an error. We are planning to resolve it in the next bugfix, meanwhile use the following workaround:</p><ol class="list _decimal"><li class="list__item" id="687338f9"><p>After receiving the error, stop the TeamCity server.</p></li><li class="list__item" id="259dd30e"><p>Start the TeamCity server.</p></li><li class="list__item" id="b0034e0d"><p>On the database configuration screen, fill out the required information. <b id="058959fb">Do not use the Refresh button.</b> Make sure the information specified is correct.</p></li><li class="list__item" id="ee1c6f0a"><p>Continue with the configuration steps.</p></li></ol><p id="56127ab1">If for some reason the workaround above does not resolve the problem, do the following:</p><ol class="list _decimal"><li class="list__item" id="32c644d5"><p>Start the TeamCity server, approve a new database creation, configure the MS SQL access with a login and password, without <a href="setting-up-an-external-database.html">integrated security</a>.</p></li><li class="list__item" id="123635f4"><p>Ensure that TeamCity works properly.</p></li><li class="list__item" id="9bfb21cd"><p>Stop the TeamCity server.</p></li><li class="list__item" id="1eea38f6"><p>Modify the <a href="setting-up-an-external-database.html">Setting up an External Database</a> file: configure MS SQL connection string to use integrated security, and remove the login and password.</p></li><li class="list__item" id="043c886c"><p>Start the TeamCity server again.</p></li></ol><a name="KnownissuewithVSTest.Consolerunner"></a><a name="Known-issue-with-VSTest.Console-runner"></a><h4 id="UpgradeNotes-KnownissuewithVSTest.Consolerunner">Known issue with VSTest.Console runner</h4><p id="72c48bec">A new "VSTest.Console" runner which first appeared in TeamCity 8.1 is in experimental state and is not recommended for production use at this time. It will not be present in TeamCity 8.1.x by default (will be available as a separate download).</p><a name="KnownissuewithPowerShellrunner"></a><a name="Known-issue-with-PowerShell-runner"></a><h4 id="UpgradeNotes-KnownissuewithPowerShellrunner">Known issue with PowerShell runner</h4><p id="ca2f389e">PowerShell runner plugin is broken in 8.1. Fix is available, please follow instructions in <a href="http://youtrack.jetbrains.com/issue/TW-21554#comment=27-676676" data-external="true" target="_blank" rel="noopener noreferrer">issue comment</a>.</p><a name="KnownissuewithCommandLineRunner"></a><a name="Known-issue-with-Command-Line-Runner"></a><h4 id="UpgradeNotes-KnownissuewithCommandLineRunner">Known issue with Command Line Runner</h4><p id="8c53a4c6">Command line runner using "Executable with parameters" option can process quotes (") and percentage signs (%) in a bit different way then in previous TeamCity versions (see details in the <a href="http://youtrack.jetbrains.com/issue/TW-35087" data-external="true" target="_blank" rel="noopener noreferrer">issue</a>). To switch back to the previous (8.0) behavior you may specify command.line.run.as.script=false configuration parameter in a build configuration or in a project. The issue is fixed in 8.1.1.<br>The recommended approach is to switch to "Custom script" option instead of "Executable with parameters" in command line runner.</p><a name="MemorySettings"></a><a name="Memory-Settings"></a><h4 id="UpgradeNotes-MemorySettings">Memory Settings</h4><p id="5513c351">If you have not <a href="installing-and-configuring-the-teamcity-server.html">switched to 64 bit JVM</a> yet and use <code class="code">-Xmx1300</code> memory setting for the server and the server is running on Windows, consider decreasing the setting to <code class="code">-Xmx1200</code> as otherwise you might encounter "Native memory allocation (malloc) failed" JVM crash. See the <a href="installing-and-configuring-the-teamcity-server.html">recommended memory settings</a> for details.</p><a name="Actionsmenu"></a><a name="Actions-menu"></a><h4 id="UpgradeNotes-Actionsmenu">Actions menu</h4><p id="2532a2e7">Some actions has moved under the "Actions" button available at the top-right of the page, near Run button.<br>These include:"Label this build sources" on Changes tab of a build,<br>"Pause", "Copy", "Move", "Delete", "Associate with Template", "Extract Template", "Extract Meta-Runner" on build configuration settings administration page,<br>"Copy", "Move", "Delete", "Archive", "Bulk edit IDs" on the <b id="333e2b31">Project Settings</b> administration page.</p><a name="CreateMavenbuildconfigurationisnotavailablebydefault"></a><a name="Create-Maven-build-configuration-is-not-available-by-default"></a><h4 id="UpgradeNotes-CreateMavenbuildconfigurationisnotavailablebydefault">Create Maven build configuration is not available by default</h4><p id="d4c81fa5">Action "Create Maven build configuration" is no longer available. Most of its functionality is covered by create project from URL and create VCS root from URL pages.</p><a name="triggeredByparameterfromGroovyPlugplugin"></a><a name="triggeredBy-parameter-from-GroovyPlug-plugin"></a><h4 id="UpgradeNotes-triggeredByparameterfromGroovyPlugplugin">triggeredBy parameter from GroovyPlug plugin</h4><p id="3598f99c">The <code class="code">build.triggeredBy</code> and <code class="code">build.triggeredBy.username</code> configuration parameters provided by the <a href="https://confluence.jetbrains.com/display/TW/Groovy+plug" data-external="true" target="_blank" rel="noopener noreferrer">plugin</a> added by the plugin are now <a href="predefined-build-parameters.html">available</a> without the plugin under teamcity.build.triggeredBy and teamcity.build.triggeredBy.username names respectively. Consider migrating to the latter set of parameters in your settings if you used the plugin's ones.</p><a name="SharedResourcesbuildfeature"></a><a name="Shared-Resources-build-feature"></a><h4 id="UpgradeNotes-SharedResourcesbuildfeature">Shared Resources build feature</h4><p id="44f31cae">If the build takes lock on all values of a resource with custom values, these values are provided as lock values in build parameters. Corresponding issue: <a href="http://youtrack.jetbrains.com/issue/TW-29779" data-external="true" target="_blank" rel="noopener noreferrer">TW-29779</a></p><a name="TeamCityDiskSpaceWatcher"></a><a name="TeamCity-Disk-Space-Watcher"></a><h4 id="UpgradeNotes-TeamCityDiskSpaceWatcher">TeamCity Disk Space Watcher</h4><p id="fc51053b">The following <a href="configuring-teamcity-server-startup-properties.html">internal properties</a> define free disk space thresholds on the TeamCity server machine:</p><ul class="list _ul"><li class="list__item" id="9f79372f"><p><code class="code">teamcity.diskSpaceWatcher.threshold</code> set to 500 Mb by default displays a warning on all the pages of the TeamCity web UI.</p></li><li class="list__item" id="5d30e174"><p><code class="code">teamcity.pauseBuildQueue.diskSpace.threshold</code> set to 50 Mb by default pauses the build queue.The <code class="code">teamcity.diskSpaceWatcher.softThreshold</code> property is removed.</p></li></ul><a name="PowerShell"></a><a name="PowerShell"></a><h4 id="UpgradeNotes-PowerShell">PowerShell</h4><p id="efcc2824">The PowerShell plugin now uses the version that was specified in the UI as the <code class="code">-Version</code> command line argument when executing scripts. Corresponding issue: <a href="http://youtrack.jetbrains.com/issue/TW-33472" data-external="true" target="_blank" rel="noopener noreferrer">TW-33472</a></p><a name="RESTAPI"></a><a name="REST-API"></a><h4 id="UpgradeNotes-RESTAPI7">REST API</h4><p id="ef0c9993">The latest version of the API has not changed, it is still "8.0" while there are changes in the API detailed below. If you find this inconvenient for your REST API usages, please comment in the corresponding <a href="http://youtrack.jetbrains.com/issue/TW-35227" data-external="true" target="_blank" rel="noopener noreferrer">issue</a>.</p><p id="1c8d2c21">Entities returned in the response of REST API requests might now exclude attributes/elements with empty/default values. This is relevant for boolean fields with "false" value and empty collections. The recommended approach is to make sure the client code assumes "false" as a value for not present boolean attributes/elements.</p><p id="2d28f1ef">"projectName" of buildType node now contains full project name (with the names of the parent projects) instead of the short name of the project.</p><p id="afaf8a45">In the lists of builds, "startDate" attribute is not longer included in the "build" node. It has become an element instead of attribute to match the full build data representation. If your REST API usage is affected, check <a href="http://youtrack.jetbrains.com/issue/TW-35032#comment=27-704059" data-external="true" target="_blank" rel="noopener noreferrer">a way</a> to get that element in a request for the list of builds.</p><p id="b1e1e86c">Requests /app/rest/buildTypes/XXX/parameters/YYY and /app/rest/projects/XXX/parameters/YYY now support "text/plain" and "application/xml" responses. To get plain text response (which was the only supported way before 8.1) you will need to supply "Accept: text/plain" header to the request.</p><p id="d8654c8c">Password properties of the VCS roots are now included into the responses, just without values.</p><p id="a14d4445">CCTray-format XML (<code class="code">app/rest/cctray/projects.xml</code>) does not include paused build configurations now.</p><p id="d5acbc25">Response to the experimental request <code class="code">/app/rest/buildTypes/XXX/investigations</code> has changed the format and got additional fields to cover tests and problem investigations. There is an internal property <code class="code">rest.beans.buildTypeInvestigationCompatibility</code> to include removed sub-items. Please let us know via <a href="https://confluence.jetbrains.com/display/TW/Feedback" data-external="true" target="_blank" rel="noopener noreferrer">support email</a> if you need to use the internal property.</p><a name="Eclipseplugin"></a><a name="Eclipse-plugin"></a><h4 id="UpgradeNotes-Eclipseplugin">Eclipse plugin</h4><p id="47eb8fa0">Dropped support of Subversion 1.4-1.6. Now only Subversion 1.7-1.8 working copies formats supported.</p></div><a name="Changesfrom8.0.5to8.0.6"></a><a name="Changes-from-8.0.5-to-8.0.6"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom8.0.5to8.0.6">Changes from 8.0.5 to 8.0.6</h2><p id="08b34447">No noteworthy changes.</p></div><a name="Changesfrom8.0.4to8.0.5"></a><a name="Changes-from-8.0.4-to-8.0.5"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom8.0.4to8.0.5">Changes from 8.0.4 to 8.0.5</h2><p id="901352c1">No noteworthy changes.</p></div><a name="Changesfrom8.0.3to8.0.4"></a><a name="Changes-from-8.0.3-to-8.0.4"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom8.0.3to8.0.4">Changes from 8.0.3 to 8.0.4</h2><a name="FirstCleanup"></a><a name="First-Cleanup"></a><h4 id="UpgradeNotes-FirstCleanup">First Cleanup</h4><p id="7a349d8a">First Cleanup after server upgrade might take a bit more time then regularly if there are many builds on the server. Following cleanups will then run a bit faster then in previous versions.</p></div><a name="Changesfrom8.0to8.0.3"></a><a name="Changes-from-8.0-to-8.0.3"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom8.0to8.0.3">Changes from 8.0 to 8.0.3</h2><p id="bac14a04">No noteworthy changes.</p></div><a name="Changesfrom7.1.xto8.0"></a><a name="Changes-from-7.1.x-to-8.0"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom7.1.xto8.0">Changes from 7.1.x to 8.0</h2><a name="ProjectandBuildConfigurationIDs"></a><a name="Project-and-Build-Configuration-IDs"></a><h4 id="UpgradeNotes-ProjectandBuildConfigurationIDs">Project and Build Configuration IDs</h4><p id="06a5b516">This version introduces user-assignable IDs for projects and build configurations. This new ID is now used instead of internal id (projectN and btNNN) in at least:</p><ul class="list _ul"><li class="list__item" id="93ea6fd6"><p>URLs of the web pages and artifact downloads</p></li><li class="list__item" id="e5e4a493"><p>in REST API</p></li><li class="list__item" id="66810b70"><p>project IDs are also used in directory names on the server under <code class="code">&lt;TeamCity Data Directory&gt;\system\artifacts</code> instead of project names used prior to TeamCity 8.0</p></li></ul><p id="1e791f8b">If you used any of the above, please, verify if you are affected by the change.<br>Learn more about IDs at <a href="identifier.html">Identifier</a>.</p><p id="d266c4bc">On upgrade, all the projects get automatically generated IDs based on their names.<br>Build configuration IDs are set to be equal to internal (btNNN) ids and can be later changed from the Administration UI via the <b id="dd7170f5">Regenerate ID</b> or <b id="00cd91dd">Bulk Edit IDs</b> actions.</p><p id="414036ca">Please note that the names of the projects and build configurations are no longer unique server-wide (are only unique within the direct parent project) and can contain any symbols which might be relevant if you used these in directory or file names.</p><a name="Projectsettingsformatondisk"></a><a name="Project-settings-format-on-disk"></a><h4 id="UpgradeNotes-Projectsettingsformatondisk">Project settings format on disk</h4><p id="d504e588">The format of the project settings storage on the disk under <code class="code">&lt;</code><a href="teamcity-data-directory.html"><code class="code">TeamCity Data Directory</code></a><code class="code">&gt;/config</code> has been changed.<br>If you used any tools to read or update <code class="code">project-config.xml</code> files, you will need to update the tools. It is recommended to use REST API or TeamCity open API (Java) to make changes so that the tools are not hugely affected by the format change.</p><a name="BuildConfigurationtemplates"></a><a name="Build-Configuration-templates"></a><h4 id="UpgradeNotes-BuildConfigurationtemplates">Build Configuration templates</h4><p id="fcd8f9ef">In version 8.0 build configuration templates support project hierarchy and TeamCity uses new rules:</p><ul class="list _ul"><li class="list__item" id="2c11d7b5"><p>The TeamCity administration UI limits the use of templates only to those from the current project and its parents. On copying a project or a build configuration, the templates which do not belong to the target project or one of its parents are automatically copied.</p></li><li class="list__item" id="19d09767"><p>TeamCity no longer allows attaching a build configuration to a template if the template does not belong to the current project or one of its parents.</p></li><li class="list__item" id="18eec223"><p>Before version 8.0 it was possible to extract templates from a build configuration of one project to an unrelated project or to associate a build configuration in one project with a template in another. After upgrade to TC 8.0, such templates will become inaccessible in the current project. To reuse build configuration templates from an unrelated project, it is recommended to manually move them into the common parent project (or the Root project if you want them to be globally available).</p></li></ul><a name="JVM-originatedagentparameters(os.archandothers)"></a><a name="JVM-originated-agent-parameters-(os.arch-and-others)"></a><h4 id="UpgradeNotes-JVM-originatedagentparameters(os.archandothers)">JVM-originated agent parameters (os.arch and others)</h4><p id="ffdde23c">The agent no longer reports system properties which come from the agent JVM: <code class="code">system.os.arch, system.os.name, system.os.version, system.user.home, system.user.name, system.user.timezone, system.user.language, system.user.country, system.user.variant, system.path.separator, system.file.encoding, system.file.separator</code>).All the aforementioned parameters are now reported as configuration parameters with the <code class="code">teamcity.agent.jvm.</code> prefix instead.If you used any of the parameters, make sure you update them to the new values.</p><a name="IntelliJIDEAprojectrunner"></a><a name="IntelliJ-IDEA-project-runner"></a><h4 id="UpgradeNotes-IntelliJIDEAprojectrunner">IntelliJ IDEA project runner</h4><p id="b724f07c">IntelliJ IDEA project runner now uses IntelliJ IDEA's external make tool to build projects. Since this tool requires Java 1.6 to work, IntelliJ IDEA project runner now requires Java 1.6 (at least) too.</p><a name="Clean-upforbuildconfigurationswithfeaturebranches"></a><a name="Clean-up-for-build-configurations-with-feature-branches"></a><h4 id="UpgradeNotes-Clean-upforbuildconfigurationswithfeaturebranches">Clean-up for build configurations with feature branches</h4><p id="790b7a7b">Build configurations with feature branches now process clean-up rules per-branch which can result in more builds preserved during clean-up than in previous versions. See <a href="clean-up.html">details</a>.</p><a name="TeamFoundationServerintegration"></a><a name="Team-Foundation-Server-integration"></a><h4 id="UpgradeNotes-TeamFoundationServerintegration">Team Foundation Server integration</h4><p id="6011b1f6">TFS now prefers Team Explorer 2012 to Team Explorer 2010 (if both are installed) for TFS operations</p><a name="CompatibilitywithYouTrack"></a><a name="Compatibility-with-YouTrack"></a><h4 id="UpgradeNotes-CompatibilitywithYouTrack">Compatibility with YouTrack</h4><p id="08a110f4">If you use JetBrains YouTrack and use its TeamCity integration features, please note that only YouTrack version 4.2.4 and later are compatible with TeamCity 8.0.<br>If you need earlier YouTrack versions to work with TeamCity 8.0, please <a href="https://confluence.jetbrains.com/display/TW/Feedback" data-external="true" target="_blank" rel="noopener noreferrer">let us know</a>.</p><a name="RESTAPI"></a><a name="REST-API"></a><h4 id="UpgradeNotes-RESTAPI8">REST API</h4><p id="1b2feb3c"><b id="ccaedeab">External ids</b> There are changes in the API related to the new external ids for project/build types/templates as well as other changes.<br>The old API compatible with TeamCity 7.1 is still provided under "/app/rest/7.0" URL.</p><p id="ad02ff6d">If you used URLs with locators having "id" for projects, build configuration or templates (like <code class="code">.../app/rest/projects/id:XXX</code> or <code class="code">.../app/rest/buildTypes/id:XXX</code>), please, update the locators to one of the following:</p><ul class="list _ul"><li class="list__item" id="ef55229e"><p>(recommended) "id:EXTERNAL_ID" (you can get the external ID in web UI URLs or via a request to <code class="code">.../app/rest/projects/internalId:OLD\_ID/id</code></p></li><li class="list__item" id="44e67e81"><p>just "ANY_ID" to find the entity either by its internal, external id or name (use with caution: you can find more than you expect)</p></li><li class="list__item" id="c6304721"><p>"internalId:INTERNAL_ID" to find the entity by the internal idYou can also use the "/app/rest/7.0/" URL prefix instead of "/app/rest/" to work with 7.0-version of REST API which still uses internal IDs except for finish build trigger properties.</p></li></ul><p id="26a784bd">Also, it is possible to set the internal property <code class="code">rest.compatibility.allowExternalIdAsInternal=true</code> to turn on the compatibility mode so that id:xxx locators will search also by the internal id. Note that this will be dropped in the future versions of TeamCity and is not recommended for use.</p><p id="3f71185f"><b id="52683bc4">Other Changes</b><br>Requests for builds ".../builds/&lt;locator&gt;/..." and ".../builds?locator=&lt;locator&gt;" no longer return personal and canceled builds by default. To include those, make sure you add ",personal:any,canceled:any" to the locators.</p><p id="60022b65">The "relatedIssues" element of the build entity no longer contains a full list of related issues. It has only the "href" attribute whose value can be used to get the related issues via a separate request.<br>There is also an internal property "rest.beans.build.inlineRelatedIssues" which can be set to <code class="code">true</code> to return the "relatedIssues" node back for compatibility. See <a href="http://youtrack.jetbrains.com/issue/TW-20025" data-external="true" target="_blank" rel="noopener noreferrer">TW-20025</a> for details. Also, the ".../builds/xxx/related-issues" URL is renamed to ".../builds/xxx/relatedIssues".</p><p id="0d086687">The "source_buildTypeId" property is dropped from snapshot and artifact dependency nodes. Instead, the "source-buildType" sub-element is added with a reference to the build type.<br>Creating dependencies is still supported with the "source_buildTypeId" property, but is deprecated. There is an internal property "rest.compatibility.includeSourceBuildTypeInDependencyProperties" which can be set to <code class="code">true</code> to include the "source_buildTypeId" property back.</p><p id="20176620">In version 8.0 VCS roots support project hierarchy:</p><ul class="list _ul"><li class="list__item" id="e3e6c98e"><p>When creating a VCS root, the <code class="code">project</code> element should always be provided now. The element supports the <code class="code">locator</code> attribute to specify the project.</p></li><li class="list__item" id="23b9fef2"><p>the <code class="code">shared</code> attribute is dropped from the VCS root: after upgrade, such VCS roots are attached to the root project (with the "_Root" ID) and become globally available.</p></li><li class="list__item" id="9cf6ab37"><p>when copying projects and build configurations, the <code class="code">shareVCSRoots</code> attribute is no longer present. To make the VCS root available to projects and build configurations, move it to the parent/root project and then proceed with the copying.</p></li></ul><p id="d3489263">It is recommended to create projects hierarchy which corresponds to organizational/settings sharing structure and move the VCS roots to most nested umbrella projects. Users then can be granted "Create / delete VCS root" role in the project to be able to edit VCS roots. Please note that users can edit a VCS root only if it is used in the projects they have "Edit project" permission for.</p><p id="1df06afb">The "template" attribute in a build configuration template node is renamed to "templateFlag".</p><p id="e82aaa13">PUT for /users/&lt;locator&gt;/roles and /userGroups/&lt;locator&gt;/roles now accepts list of roles as it should and replaces existing roles instead of accepting single riles and adding it.</p><p id="a0229059">Many of PUT and POST requests which used to return nothing now return the entities created.</p><a name="OpenAPIchanges"></a><a name="Open-API-changes"></a><h4 id="UpgradeNotes-OpenAPIchanges">Open API changes</h4><p id="fc060fd1">See <a href="https://confluence.jetbrains.com/display/TCD18/Open+API+Changes" data-external="true" target="_blank" rel="noopener noreferrer">details</a></p><a name="SharedResourcesplugin"></a><a name="Shared-Resources-plugin"></a><h4 id="UpgradeNotes-SharedResourcesplugin">Shared Resources plugin</h4><p id="6013d673">If you used the <a href="https://confluence.jetbrains.com/display/TW/TeamCity+Shared+Resources" data-external="true" target="_blank" rel="noopener noreferrer">Shared Resources plugin</a> with TeamCity 7.1.x, make sure to remove it as it is now bundled. See the <a href="https://confluence.jetbrains.com/display/TW/TeamCity+Shared+Resources" data-external="true" target="_blank" rel="noopener noreferrer">upgrade instructions</a>.</p><a name="QueueManagerplugin"></a><a name="Queue-Manager-plugin"></a><h4 id="UpgradeNotes-QueueManagerplugin">Queue Manager plugin</h4><p id="e56996d7">If you used the <a href="https://confluence.jetbrains.com/display/TW/TeamCity+Queue+Manager" data-external="true" target="_blank" rel="noopener noreferrer">QueueManager plugin</a>, make sure to remove it as it is now bundled. See the <a href="https://confluence.jetbrains.com/display/TW/TeamCity+Queue+Manager" data-external="true" target="_blank" rel="noopener noreferrer">upgrade instructions</a></p><a name="BundledMaven"></a><a name="Bundled-Maven"></a><h4 id="UpgradeNotes-BundledMaven">Bundled Maven</h4><p id="bda1e2bb">Maven bundled with TeamCity upgraded to version 3.0.5.</p><a name="HTTPSconnectionsfromagentstoserver"></a><a name="HTTPS-connections-from-agents-to-server"></a><h4 id="UpgradeNotes-HTTPSconnectionsfromagentstoserver">HTTPS connections from agents to server</h4><p id="5c15be1c">If your agents connect to the TeamCity server by HTTPS protocol, and after upgrade agents fail to connect with error messages like:javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure</p><p id="454f1198">then you should change Tomcat SSL connector configuration, i.e. add the following attribute to SSL connector and restart TeamCity server:sslEnabledProtocols="TLSv1,SSLv3,SSLv2Hello"</p><p id="934d2524">The issue only manifests when the server runs under Java 1.7.</p><p id="bf827938">See also:</p><ul class="list _ul"><li class="list__item" id="8126e181"><a href="http://mail-archives.apache.org/mod_mbox/tomcat-users/201302.mbox/%3C512559F7.4080001@gmail.com%3E" data-external="true" target="_blank" rel="noopener noreferrer">http://mail-archives.apache.org/mod_mbox/tomcat-users/201302.mbox/%3C512559F7.4080001@gmail.com%3E</a></li><li class="list__item" id="36674bb8"><a href="http://youtrack.jetbrains.com/issue/TW-30221#comment=27-561843" data-external="true" target="_blank" rel="noopener noreferrer">http://youtrack.jetbrains.com/issue/TW-30221#comment=27-561843</a></li></ul></div><a name="Changesfrom7.1.4to7.1.5"></a><a name="Changes-from-7.1.4-to-7.1.5"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom7.1.4to7.1.5">Changes from 7.1.4 to 7.1.5</h2><p id="d6d10144"><b id="483e331a">teamcity.build.branch</b> parameter semantics has changed, see <a href="http://youtrack.jetbrains.com/issue/TW-23699#comment=27-448002" data-external="true" target="_blank" rel="noopener noreferrer">http://youtrack.jetbrains.com/issue/TW-23699#comment=27-448002</a></p></div><a name="Changesfrom7.1.3to7.1.4"></a><a name="Changes-from-7.1.3-to-7.1.4"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom7.1.3to7.1.4">Changes from 7.1.3 to 7.1.4</h2><p id="c9d27099">No noteworthy changes.</p></div><a name="Changesfrom7.1.2to7.1.3"></a><a name="Changes-from-7.1.2-to-7.1.3"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom7.1.2to7.1.3">Changes from 7.1.2 to 7.1.3</h2><p id="8a5c779a">No noteworthy changes.</p><p id="ece419ce">Please check up-to-date list of <a href="http://youtrack.jetbrains.com/issues/TW?q=Affected+versions%3A+%7BFaradi+7.1.3+%2824266%29%7D+tag%3Aregression" data-external="true" target="_blank" rel="noopener noreferrer">known regressions</a> for the version in our issue tracker.</p></div><a name="Changesfrom7.1.1to7.1.2"></a><a name="Changes-from-7.1.1-to-7.1.2"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom7.1.1to7.1.2">Changes from 7.1.1 to 7.1.2</h2><p id="b20d7180"><b id="8fc55d0e">Possible issues with hg server-side checkout</b><br>There is a known issue with 7.1.2 release: <a href="http://youtrack.jetbrains.com/issue/TW-24405" data-external="true" target="_blank" rel="noopener noreferrer">TW-24405</a> which can reproduce when server-side checkout, labeling or file content viewing are used for Mercurial repository.If you experience the error with message "abort: destination 'hg1' is not empty", please install the patch attached to the issue.</p><p id="bea21fe1"><b id="9d555946">Other known issues</b><br>Please also check a list of <a href="http://youtrack.jetbrains.com/issues/TW?q=Affected+versions%3A+%7BFaradi+7.1.2+%2824170%29%7D+tag%3Aregression" data-external="true" target="_blank" rel="noopener noreferrer">known regressions</a> for the version in our issue tracker.</p></div><a name="Changesfrom7.1to7.1.1"></a><a name="Changes-from-7.1-to-7.1.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom7.1to7.1.1">Changes from 7.1 to 7.1.1</h2><p id="7b884b05">No noteworthy changes.</p></div><a name="Changesfrom7.0.xto7.1"></a><a name="Changes-from-7.0.x-to-7.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom7.0.xto7.1">Changes from 7.0.x to 7.1</h2><p id="83fb7a7e"><b id="c5217c6f">Windows service configuration</b><br>Since version 7.1, TeamCity uses its own service wrapping solution for the TeamCity server as opposed to that of default Tomcat one in previous versions.This changes the way TeamCity service is configured (Data Directory and server startup options including memory settings) and makes it unified between service and console startup.<br>Please refer to the updated <a href="configuring-teamcity-server-startup-properties.html">section</a> on configuring the server startup properties.</p><p id="4a7b7065">Agent windows service started to use OS-provided environment variables. Once Agent server (and JVM) are x86 processes, agent will report x86 environment variables. The change may affect your CPU bitness checks. See <a href="http://blogs.msdn.com/b/david.wang/archive/2006/03/26/howto-detect-process-bitness.aspx" data-external="true" target="_blank" rel="noopener noreferrer">MSDN Blog</a> on how to check if machine supports x64 by reported environment variables</p><p id="c95ede2c"><b id="a48e0058">Default location for TeamCity Data Directory when installed with Windows installer</b><br>This is only relevant for fresh TeamCity installations with Windows installer. Existing settings are preserved if you upgrade an existing installation.<br>Windows installer now uses <code class="code">%ALLUSERSPROFILE%JetBrains\TeamCity</code> location as default one for <a href="teamcity-data-directory.html">TeamCity Data Directory</a>. In TeamCity 7.0 and previous versions that used to be <code class="code">%USERPROFILE%.BuildServer</code>.</p><p id="0fca9626"><b id="ac3dfe93">Windows domain login module</b><br>When TeamCity server runs under Windows and Windows domain user authentication is used, TeamCity now uses another library (Waffle) to talk to the Windows domain.Under Linux the behavior is unchanged: jCIFS library is used as it were.</p><p id="03ec5876">Unless you specified specific settings for jCIFS library in ntlm-config.properties file, your installation should not be affected.<br>If you experience any issues with login into TeamCity with your Windows username/password after upgrade, please provide details <a href="https://confluence.jetbrains.com/display/TW/Feedback" data-external="true" target="_blank" rel="noopener noreferrer">to us</a>. In the mean time you can switch to using old jCIFS library. For this, add <code class="code">teamcity.ntlm.use.jcifs=true</code> line into <a href="configuring-teamcity-server-startup-properties.html">internal properties file</a>.<br>Please note that jCIFS library approach can be depricated in future versions of TeamCity, so the property specification is not recommended if you can go without it.</p><p id="e1fd84f5"><b id="1239a4de">Checkout directory change for Git and Mercurial</b><br>Build configurations that have either Git or Mercurial VCS roots and use default checkout directory will perform clean checkout upon upgrade. The clean checkout will be triggered by changed default checkout directory name. Further builds will reuse the checkout directory more aggressively (all builds using different branches but using the same VCS root will use the same directory). This affects agent- and server-side checkouts.</p><p id="ff229610"><b id="211a5daf">Perforce agent checkout workspace names change</b><br>Build configurations using Perforce agent-side checkout will perform clean checkout once after server upgrade. This is related to changed names for automatically generated Perforce workspaces.</p><p id="dae43d13"><b id="da06a6ec">SVN revision format</b><br>For changes, detected in external repositories, SVN revision got format <code class="code">NNN_MMM:EXTUUID_CHANGEDATE</code>, where <code class="code">NNN</code> - revision of the main repository, <code class="code">MMM</code> - revision of externals repository, <code class="code">EXTUUID</code> - UUID of externals repository, <code class="code">CHANGEDATE</code> - change timestamp. This change may affect plugins/REST api clients which use revision of the last build change somehow.</p><p id="d94edd67"><b id="94a119f1">Eclipse IDE plugin compatibility</b><br>Since TeamCity 7.1, Eclipse version 3.3 (Europa) is no longer supported by TeamCity Eclipse plugin.Eclipse 3.8 and Eclipse 4.2 (Juno) are now supported.</p><p id="55ba56bd"><b id="6c8c8d28">Default schema when Microsoft SQL Server is used as an external database</b><br>Starting with version 7.1 TeamCity works only with a single database schema unlike previous versions when it could work with tables in any schemas of the database server.</p><p id="751b81eb">TeamCity-related tables should now be located in the database schema which is set as default one for the database user used by TeamCity to connect to the database.</p><p id="09a7ecd0">This change may require reconfiguration of the database to set default schema for the user used by TeamCity server to connect to the database.</p><p id="705ee72e">Please check that all TeamCity-related tables are located in the default user's schema before performing the upgrade. (e.g. <a href="http://blog.sqlauthority.com/2009/06/17/sql-server-list-schema-name-and-table-name-for-database/" data-external="true" target="_blank" rel="noopener noreferrer">using</a> the 'sys.tables' view)</p><p id="69727ef2">If the default user's schema is not set right, TeamCity can report "TeamCity database is empty or doesn't exist. If you proceed, a new database will be created." message on the first start of newer TeamCity.</p><p id="13a38326">To change user's default schema, use the '<a href="http://msdn.microsoft.com/en-us/library/ms176060.aspx" data-external="true" target="_blank" rel="noopener noreferrer">alter user</a>' SQL command.</p><p id="ca116279">For the default schema description, see the "Default Schemas" section in the <a href="http://msdn.microsoft.com/en-us/library/ms190387.aspx" data-external="true" target="_blank" rel="noopener noreferrer">corresponding documentation</a>.</p><p id="4fa23add"><b id="3f700ff6">Open API changes</b><br>See <a href="https://confluence.jetbrains.com/display/TCD18/Open+API+Changes" data-external="true" target="_blank" rel="noopener noreferrer">details</a></p></div><a name="Changesfrom7.0.1to7.0.4"></a><a name="Changes-from-7.0.1-to-7.0.4"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom7.0.1to7.0.4">Changes from 7.0.1 to 7.0.4</h2><p id="a557ddc2">No noteworthy changes.</p></div><a name="Changesfrom7.0to7.0.1"></a><a name="Changes-from-7.0-to-7.0.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom7.0to7.0.1">Changes from 7.0 to 7.0.1</h2><p id="06f17ad6"><b id="12548dd5">HTML report tabs URLs Change</b><br>If you use direct links for build-level or project-level <a href="including-third-party-reports-in-the-build-results.html">report tabs</a>, please update the links as they will <a href="http://youtrack.jetbrains.com/issue/TW-20462#comment=27-302397" data-external="true" target="_blank" rel="noopener noreferrer">change</a> after upgrade. The change is necessary to make the feature more reliable.</p></div><a name="Changesfrom6.5.xto7.0"></a><a name="Changes-from-6.5.x-to-7.0"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom6.5.xto7.0">Changes from 6.5.x to 7.0</h2><p id="2be0006c"><b id="64ef339b">(Known issue) Build can hang or produce memory error for NUnit and other .Net test runners</b><br>Affected are: .Net test runners (NUnit, MSTest, MSpec) as well as TeamCity NUnit console launcher.<br>Reproduces when path to test assemblies has several deep paths without wildcards ("*").</p><p id="8d4d9b00">Visible outcome: build hangs or fails with OutOfMemoryException error after "Starting ...JetBrains.BuildServer.NUnitLauncher.exe" link in the build log.</p><p id="b901a78f">The issue (<a href="http://youtrack.jetbrains.com/issue/TW-20482" data-external="true" target="_blank" rel="noopener noreferrer">TW-20482</a>) is fixed and the fix will be included in the next release.<br>Patch with a fix is <a href="http://youtrack.jetbrains.com/issue/TW-20482#comment=27-302393" data-external="true" target="_blank" rel="noopener noreferrer">available</a>.</p><p id="68a6f831"><b id="b3bc2d4d">Minimum Supported Project JDK for Ant Runner</b><br>Starting with this version Ant runner requires minimum of JDK 1.4 in <b id="f724510b">runtime</b> build part (was 1.3 previously). This means that you will not be able to use TeamCity Ant runner if your project uses JDK 1.3 for compilation or tests running.For projects that require JDK 1.3 you can use command-line runner instead and configure "XML report processing" build feature to parse test reports.</p><p id="3fe05891"><b id="4e04e696">Supported Java for Server and Agent</b><br>Starting with this version the following requirements</p><ul class="list _ul"><li class="list__item" id="b4665133"><p>TeamCity <b id="913f0ab5">server</b> should be run with JRE 1.6 or above (was 1.5 previously). TeamCity .exe distribution is already bundled with appropriate Java. For .tar.gz or .war TeamCity distributions you might need to install and configure server <a href="installing-and-configuring-the-teamcity-server.html">manualy</a>.</p></li><li class="list__item" id="f32b7c2c"><p>TeamCity <b id="14cf698e">agent</b> should be run with JRE 1.6 or above (was 1.5 previously). Agent .exe distribution is already bundled with appropriate Java. If you used .zip agent distribution or installed the TeamCity agent with TeamCity version 5.0 or earlier, you might need <a href="setting-up-and-running-additional-build-agents.html">manual steps</a>. If you run TeamCity 6.5.x, please check "Agents" page of your existing TeamCity server: the page will have a yellow warning in case any of the connected agents are running JDK less than 1.6.</p></li></ul><aside class="note " data-title="" rel="77204bff" id="5dcb9379"><p id="9ea3f0ae">If any of your agents are running under JDK version less than 1.6, the agents will fail to upgrade and will stop running on the server upgrade. You will need to recover them manually by installing JDK 1.6 and making sure the agents will <a href="setting-up-and-running-additional-build-agents.html">use it</a>.</p></aside><p id="a0f4502d"><b id="16bcc142">Project/Template parameters override</b><br>In TeamCity 7.0 project parameters have higher priority than parameters defined in template, i.e. if there is a parameter with some name and value in the project and there is parameter with the same name and different value in template of the same project, value from the project will be used. This was not so in TeamCity 6.5 and was <a href="http://youtrack.jetbrains.com/issue/TW-17247" data-external="true" target="_blank" rel="noopener noreferrer">changed</a> to be more flexible when template belongs to anohter project.Build configuration parameters have the highest priority, as usual.</p><p id="fd0cbd8f"><a name="no-sybase-support"></a><a name="UpgradeNotes-no-sybase-support"></a></p><p id="b5843125"><b id="100e95ee">Support for Sybase is discontinued</b><br>From this version support for Sybase as external database is shifted back into "experimental" state.<br>The reason for this decision is that it does not seem like the database is actively used with TeamCity, and supporting it requires a significant effort from TeamCity team which otherwise can be directed to improving more important areas of the product.<br>While it should be still <a href="https://confluence.jetbrains.com/display/TCD65/Setting+up+an+External+Database" data-external="true" target="_blank" rel="noopener noreferrer">possible</a>, we do not recommend using Sybase as an external database and we are not planning to provide support for the Sybase-related issues.<br>Please consider using one of the other <a href="supported-platforms-and-environments.html">databases supported</a>. If you use Sybase, please migrate to another database before upgrading TeamCity.</p><p id="109d6acb"><b id="061866d1">REST API Changes</b></p><ul class="list _ul"><li class="list__item" id="17c20426"><p>Several objects got additional attributes and sub-elements (e.g. BuildType, VcsRoot). Please check that your parsing code still works. <i id="f01b3a43">/buildTypes/</i> path: BuildType object dropped runParameters field (as well as <i id="8c08d3a6">/&lt;locator&gt;/runParameters</i> path is dropped) in favor of <i id="97980aee">steps</i> collection and <i id="1a38bd3d">/&lt;locator&gt;/steps/</i> path.</p></li><li class="list__item" id="6d345af9"><p>A <a href="http://youtrack.jetbrains.net/issue/TW-17478" data-external="true" target="_blank" rel="noopener noreferrer">bug</a> fixed which resulted in non-array JSON representation of single element arrays for some resources. Please check if your code is affected.</p></li><li class="list__item" id="e788ee33"><p>in build object, "dependency-build" element is renamed to "snapshot-dependencies", revisions/revision/vcs-root is renamed to revisions/revision/vcs-root-intance (and it points to resolved VCS root instance now), revisions/revision/display-version is renamed to "version".</p></li><li class="list__item" id="a82b25a1"><p>in buildType object, "vcs-root" element is renamed to "vcs-root-entries"</p></li></ul><p id="aa273fe5">Old version of the REST API is available via <code class="code">/app/rest/6.0/...</code> URL in TeamCity 7.0. Please update your REST-using code as future versions of TeamCity might drop support for 6.0 protocol.</p><p id="218099cd"><b id="7a7f18a8">Minimum version of supported Tomcat</b><br>If you use TeamCity .war distribution, please note that Tomcat 5.5 is no longer supported. Please update Tomcat to version 6.0.27 or above (Tomcat 7 is recommended).</p><p id="0a21a5a5"><b id="d1b15f8f">Swabra</b></p><p id="6ad882d5">swabra.handle.exe.path and handle.exe.path configuration parameters are no longer supported for providing path to Sysinternals handle.exe on agents. See the <a href="build-files-cleaner-swabra.html">plugin page</a> for the details.</p><p id="d5b09ee3"><b id="2389edf2">Open API Changes</b></p><p id="bceacf23">Classes from <b id="6754eed9">jetbrains.buildServer.messages.serviceMessages</b> package like <b id="49badf06">jetbrains.buildServer.messages.serviceMessages.BuildStatus</b> no longer depend on <b id="547812c9">jetbrains.buildServer.messages.Status</b> class. To make your code compatible with TeamCity 6.0 - 7.0 you can use <b id="fc9773af">jetbrains.buildServer.messages.serviceMessages.ServiceMessage#asString</b> methods, for example:</p><div class="code-block" data-lang="bash">
ServiceMessage.asString("buildStatus", new HashMap&lt;String, String&gt;() {{
&nbsp;&nbsp;put("text", "Errors found");
&nbsp;&nbsp;put("status", "FAILURE");
}});

</div><p id="a3aa9a47">See also <a href="https://confluence.jetbrains.com/display/TCD18/Open+API+Changes" data-external="true" target="_blank" rel="noopener noreferrer">Open API Changes</a></p></div><a name="Changesfrom6.5.4to6.5.6"></a><a name="Changes-from-6.5.4-to-6.5.6"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom6.5.4to6.5.6">Changes from 6.5.4 to 6.5.6</h2><p id="f0c75e6d">No noteworthy changes</p></div><a name="Changesfrom6.5.4to6.5.5"></a><a name="Changes-from-6.5.4-to-6.5.5"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom6.5.4to6.5.5">Changes from 6.5.4 to 6.5.5</h2><p id="170d831f">(Known issue infex in 6.5.6) .NET Duplicates finder may stop working, the patch is available, please see this comment: <a href="http://youtrack.jetbrains.net/issue/TW-18784#comment=27-261174" data-external="true" target="_blank" rel="noopener noreferrer">http://youtrack.jetbrains.net/issue/TW-18784#comment=27-261174</a></p></div><a name="Changesfrom6.5.3to6.5.4"></a><a name="Changes-from-6.5.3-to-6.5.4"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom6.5.3to6.5.4">Changes from 6.5.3 to 6.5.4</h2><p id="d40ca9d4">No noteworthy changes</p></div><a name="Changesfrom6.5.3to6.5.4"></a><a name="Changes-from-6.5.3-to-6.5.4"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom6.5.3to6.5.42">Changes from 6.5.3 to 6.5.4</h2><p id="5343f34a">No noteworthy changes</p></div><a name="Changesfrom6.5.2to6.5.3"></a><a name="Changes-from-6.5.2-to-6.5.3"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom6.5.2to6.5.3">Changes from 6.5.2 to 6.5.3</h2><p id="020533b7">No noteworthy changes</p></div><a name="Changesfrom6.5.1to6.5.2"></a><a name="Changes-from-6.5.1-to-6.5.2"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom6.5.1to6.5.2">Changes from 6.5.1 to 6.5.2</h2><p id="9365953c"><b id="1a0d17a0">Maven runner</b><br>Working with MAVEN_OPTS has changed again. Hopefully for the last time within the 6.5.x iteration. (see <a href="http://youtrack.jetbrains.net/issue/TW-17393" data-external="true" target="_blank" rel="noopener noreferrer">http://youtrack.jetbrains.net/issue/TW-17393</a>)<br>Now TeamCity acts as follows:</p><ol class="list _decimal"><li class="list__item" id="e13b27a3"><p>If MAVEN_OPTS is set TeamCity takes JVM arguments from MAVEN_OPTS</p></li><li class="list__item" id="14bc373e"><p>If "JVM command line parameters" are provided in the runner settings, they are taken instead of MAVEN_OPTS and <b id="72523a64">MAVEN_OPTS is overwritten with this value to propagate it to nested Maven executions</b>.</p></li></ol><p id="1df6af52">Those who after upgrading to 6.5 had problems of not using MAVEN_OPTS and who had to copy its value to the "JVM command line parameters" to make their builds work, now don't need to change anything in their configuration. Builds will work the same way they do in 6.5 or 6.5.1.</p></div><a name="Changesfrom6.5to6.5.1"></a><a name="Changes-from-6.5-to-6.5.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom6.5to6.5.1">Changes from 6.5 to 6.5.1</h2><p id="d3870370"><b id="daeb16b9">(Fixed known issue) Long upgrade time and slow cleanup under Oracle</b></p></div><a name="Changesfrom6.0.xto6.5"></a><a name="Changes-from-6.0.x-to-6.5"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom6.0.xto6.5">Changes from 6.0.x to 6.5</h2><p id="13e568af"><b id="95420840">(Known issue) Long upgrade time and slow cleanup under Oracle</b><br>On first upgraded server start the database structures are converted and this can take a long time (hours on a large database) if you use Oracle external database (<a href="http://youtrack.jetbrains.net/issue/TW-17094" data-external="true" target="_blank" rel="noopener noreferrer">TW-17094</a>). This is already fixed in 6.5.1.</p><p id="02b2e174"><b id="7d2fdc4c">Agent JVM upgrade</b><br>With this version of TeamCity we added semi-automatic upgrade of JVM used by the agents. If there is a Java 1.6 installed on the agent, and the agent itself is still running under the Java 1.5, TeamCity will ask to switch agent to Java 1.6. All you need is to review that detected path to Java is correct and confirm this switch, the rest should be done automatically. The operation is per-agent, you'll have to make it for each agent separately. Note that we recommend to switch to Java 1.6, as at some point TeamCity will not be compatible with Java 1.5. Make sure newly selected java process has same firewall rules (i.e. port 9090 is opened to accept connections from server)</p><p id="c52bf75d"><b id="550510bb">IntelliJ IDEA Coverage data</b><br>Coverage data produced by IntelliJ IDEA coverage engine bundled with TeamCity 6.5 can only be loaded in IntelliJ IDEA 10.5+. Due to coverage data format changes older versions of IntelliJ IDEA won't be able to load coverage from the server.</p><p id="37103a34"><b id="2a1b3f50">IntelliJ IDEA 8 is not supported</b><br>Plugin for IntelliJ IDEA no longer supports IntelliJ IDEA 8.</p><p id="c75a66fe"><b id="4b98bb5e">Unsupported MySQL versions</b><br>Due to <a href="http://youtrack.jetbrains.net/issue/TW-16508#comment=27-219601" data-external="true" target="_blank" rel="noopener noreferrer">bugs</a> in MySQL 5.1.x TeamCity no longer supports MySQL versions in range 5.1 - 5.1.48. TeamCity won't start with appropriate message if unsupported MySQL version is detected. Please upgrade your MySQL server to version 5.1.49 or later.</p><p id="62a7e72b"><b id="65b0390e">Finish build properties are displayed</b><br>Finished builds now display all their properties used in the build on "Parameters" tab. This can potentially expose names and values of parameters from other builds (those that the given build uses as artifact or snapshot dependency). Please make sure this is acceptable in your environment. You can also manage users who see the tab with "View build runtime parameters and data" permissions which is assigned "Project Developers" role by default.</p><p id="9af510e6"><b id="beea8d18">PowerShell runner is bundled</b><br>If you installed <a href="https://confluence.jetbrains.com/display/TW/PowerShell" data-external="true" target="_blank" rel="noopener noreferrer">PowerShell plugin</a> manually, please remove it form <code class="code">.BuildServer/plugins</code> as a fresh version is now bundled with TeamCity.</p><p id="338babf7"><b id="718487b6">Changed settings location</b></p><ul class="list _ul"><li class="list__item" id="978078f9"><p>XML test reporting settings are moved from runner settings into a dedicated <a href="adding-build-features.html">build feature</a>.</p></li><li class="list__item" id="71924a3c"><p>"Last finished build" artifact dependency on a build which has snapshot dependency is automatically converted into dedicated "Build from the same chain" source build setting.</p></li></ul><p id="c09ee292"><b id="c53b5ef7">Responsibility is renamed to Investigation</b><br>A responsibility assigned for a failing build configuration or a test is now called investigation. This is just a terminology change to make the action more neutral.<br>If you have any email processing rules for TeamCity investigation assignment activity, please check is they need updating to use new text patterns.</p><p id="55d74167"><b id="9d5eba2c">REST API Changes</b><br>Several objects got additional attributes and sub-elements (e.g. "startDate" in reference to a build, "personal" in a change). Please check that your parsing code still works.</p><p id="a8bee27c"><b id="b6d2db48">Cleaning Non-default Checkout Directories</b><br>In previous releases, if you have specified build <a href="build-checkout-directory.html">checkout directory</a> explicitly using absolute path, TeamCity would not clean the content of the directory to free space on the disk.<br>This is no longer the case.<br>So if you have absolute path specified for the checkout directory and you need the directory to be present on agent for other build or for the machine environment, please set <code class="code">system.teamcity.build.checkoutDir.expireHours</code> <a href="build-checkout-directory.html">property</a> to "never" and re-run the build. Please take into account that using <a href="build-checkout-directory.html">custom checkout directory</a> is not recommended.</p><p id="f75c00f3">If you are using one of <a href="build-checkout-directory.html">system.teamcity.build.checkoutDir.expireHours</a> properties and it is set to "never" to prevent the checkout directory from automatic deletion, the directory might be deleted once after TeamCity upgrade. Running the build in the build configuration once after the upgrade (and within 8 days from the previous build) will ensure that the directory preserves the "protected" behavior and will not be automatically removed by TeamCity.</p><p id="2b29e504"><b id="e3f7fa77">Free disk space</b><br>This release exposes <a href="free-disk-space.html">Free disk space feature</a> in UI that was earlier only available via setting build configuration properties.<br>While the old properties still work and take precedence, it is highly recommended to remove them and specify the value via "Disk Space" build feature instead. Future TeamCity versions might stop to consider the properties specified manually.</p><p id="efef5b22"><b id="ffdeae47">Command line runner</b><br><code class="code">@echo off</code> which turns off command-echoing is added to scripts provided by "Custom script" runner parameter. To enable command-echoing add <code class="code">@echo on</code> to the script.</p><p id="c9566a52"><b id="9f7b4b94">Windows Tray Notifier</b><br>You will need to upgrade windows tray notifier by uninstalling it and installing it again. Unfortunately, auto-upgrade will not work due to issues in old version of Windows Tray Notifier.</p><p id="a5b7dee3"><b id="97bd519a">Maven runner</b></p><ul class="list _ul"><li class="list__item" id="ceabc734"><p>In earlier TeamCity versions Maven was executed by invoking the 'mvn' shell script. You could specify some parameters in MAVEN_OPTS and some in UI. Maven build runner created its own MAVEN_OPT by concatenating these two (<code class="code">%MAVEN\_OPTS%+jvmArgs</code>). In this case, if some parameter was specified twice - in MAVEN_OPTS and in UI, only the one specified in MAVEN_OPTS was effective. Starting with TeamCity 6.5 Maven runner forms direct java command. While this approach solves many different problems, it also means that MAVEN_OPTS isn't effective anymore and all JVM command line parameters should be specified in build runner settings instead of MAVEN_OPTS.</p></li><li class="list__item" id="7ab3af95"><p>Those who had to manually setup surefire XML reporting for Maven release builds in TeamCity 6.0.x because otherwise tests weren't reported, now can forget about that. Since TeamCity 6.5 surefire tests run by release:prepare or release:perform goals are automatically detected. So don't forget to switch surefire XML reporting off in the build configuration settings to avoid double-reporting!</p></li></ul><p id="7bef970c"><b id="32264b8d">Email sending settings</b><br>Please check email sending settings are working correctly after upgrade (via Test connection on Administration &gt; Server Configuration &gt; EMail Notifier). If no authentication is needed, make sure login and password fields are blank. Non-blank fields may cause email sending errors if SMTP server is not expecting authentication requests.</p><p id="a1b67e91"><b id="edd45389">XML Report Processing</b><br>Tests from Ant JUnit XML reports can be reported twice (see <a href="http://youtrack.jetbrains.net/issue/TW-19058" data-external="true" target="_blank" rel="noopener noreferrer">TW-19058</a>), as we no longer automatically ignore TESTS-xxx.xml report.<br>To workaround this avoid using *.xml mask and specify more concrete rules like TEST-*.xml or alike that will not match report with name starting with "TESTS-"</p><p id="fc483c0d"><b id="892ebe11">Open API Changes</b><br>Several return types have changes in TeamCity open API, so plugins might need recompilation against new TeamCity version to continue working.<br>Also, some API was deprecated and will be discontinued in later releases. It is recommended to update plugins not to use deprecated API.<br>See also <a href="https://confluence.jetbrains.com/display/TCD18/Open+API+Changes" data-external="true" target="_blank" rel="noopener noreferrer">Open API Changes</a></p></div><a name="Changesfrom6.0.2to6.0.3"></a><a name="Changes-from-6.0.2-to-6.0.3"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom6.0.2to6.0.3">Changes from 6.0.2 to 6.0.3</h2><p id="065f31f9">No noteworthy changes</p></div><a name="Changesfrom6.0.1to6.0.2"></a><a name="Changes-from-6.0.1-to-6.0.2"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom6.0.1to6.0.2">Changes from 6.0.1 to 6.0.2</h2><p id="b12fbcc0"><b id="ae0ce95c">Maven and XML Test Reporting Load CPU on Agent</b><br>If you use Maven or XML test reporter and your build is CPU-intensive, you might find important the <a href="http://youtrack.jetbrains.net/issue/TW-15335" data-external="true" target="_blank" rel="noopener noreferrer">known issue</a>. Patch is available, fixed in the following updates.</p></div><a name="Changesfrom6.0to6.0.1"></a><a name="Changes-from-6.0-to-6.0.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom6.0to6.0.1">Changes from 6.0 to 6.0.1</h2><p id="874a09b2">No noteworthy changes</p></div><a name="Changesfrom5.1.xto6.0"></a><a name="Changes-from-5.1.x-to-6.0"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom5.1.xto6.0">Changes from 5.1.x to 6.0</h2><p id="fc937a24"><b id="2be15678">Visual Studio Add-in and Perforce</b><br>There is critical bug in TeamCity 6.0 VS Add-in when Perforce is enabled. This can cause Visual Studio hangs and crashes. The fixed add-in version is <a href="ftp://ftp.intellij.net/pub/.teamcity/TW-14765/vsAddinInstaller.zip" data-external="true" target="_blank" rel="noopener noreferrer">available</a>. (related <a href="http://youtrack.jetbrains.net/issue/TW-14765" data-external="true" target="_blank" rel="noopener noreferrer">issue</a>). The issue is fixed in TeamCity 6.0.1.</p><p id="e0586404"><b id="4ba1b3a2">TFS checkout on agent</b><br>TFS checkout on agent might refuse to work with errors. Patch is available, see the <a href="http://youtrack.jetbrains.net/issue/TW-14804#comment=27-185725" data-external="true" target="_blank" rel="noopener noreferrer">comment</a>. Related <a href="http://youtrack.jetbrains.net/issue/TW-14804" data-external="true" target="_blank" rel="noopener noreferrer">issue</a>. The issue is fixed in TeamCity 6.0.1.</p><p id="b14dfeea"><b id="25407f69">Error Changing Priority class</b><br>You may encounter a browser error while changing priority number of a priority class. A patch is available in a related <a href="http://youtrack.jetbrains.net/issue/TW-14816" data-external="true" target="_blank" rel="noopener noreferrer">issue</a>. The issue is fixed in TeamCity 6.0.1.</p><p id="5b5c9bb4"><b id="d28b48d7">IntelliJ IDEA Compatibility</b><br>IntelliJ IDEA 6 and 7 are no longer supported in TeamCity plugin for IntelliJ IDEA.</p><p id="b97cffff">Also, if you plan to upgrade to IntelliJ IDEA X (or other JetBrains IDE) please review this <a href="known-issues.html">known issue</a>.</p><p id="d6df1597"><b id="b5f8ab87">Build Failure Notifications</b><br>TeamCity 6.0 differentiates between build failure occurred while running a build script and one occurred while preparing for the build. The errors occurring in the latter case are called "failed to start" errors and are hidden by default from web UI (see "Show canceled and failed to start builds" option on Build Configuration page).</p><p id="f7593c31">Since TeamCity 6.0, there is a separate notification rule "The build fails to start" which applies for "failed to start" builds. All the rest build failure notifications relate to build script-related failures.</p><p id="bd01a100">Please note that on upgrade, all users who had "The build fails" notification on, will automatically get "The build fails to start" option to preserve old behavior.</p><p id="38e26d6c"><b id="f341ac9b">Properties Changes</b><br><code class="code">teamcity.build.workingDir</code> property should no longer be used in non-runner settings. For backward compatibility, the property is supported in non-runner settings and is resolved to the working directory of the first defined build step.</p><p id="35855b17"><b id="6b62783b">Swabra and Build Queue Priorities Plugins are Bundled</b><br>If you have installed the plugins previously, please remove them (typically form <code class="code">.BuildServer/plugins</code>) before starting upgraded TeamCity version.</p><p id="1ec654e9"><b id="f499f826">Maven runner</b><br>Java older than 1.5 is no longer supported by the agent part of Maven runner. Please make sure you specify 1.6+ JVM in Maven runner settings or ensure JAVA_HOME points to such JVM.</p><p id="5ca4f2d1"><b id="2d585134">NUnit and MSTest Tests</b><br>If you had NUnit or MSTest tests configured in TeamCity UI (sln and MSBuild runners), the settings are extracted form the runners and converted to a new runner of corresponding type.</p><p id="a37fb846">Please note that implementation of tests launching has changed and this affected relative paths usage: in TeamCity 6.0 the working directory and all the UI-specified wildcards are resolved based on the build's <a href="build-checkout-directory.html">checkout directory</a>, while they used to be based on the directory containing .sln file. Simple settings are converted on TeamCity upgrade, but you might need to verify the runners contain appropriate settings.</p><p id="71a85c52"><b id="079b1ed1">"%" Escaping in the Build Configuration Properties</b><br>Now, two percentage signs (%%) in values defined in Build Configuration settings are treated as escape for a single percentage sign. Your existing settings are converted on upgrade to preserve functioning like in previous versions. However, you might need to review the settings for unexpected "%" sign-related issues.</p><p id="9401fa03"><b id="e7d8bb17">.Net Framework Properties are Reported as Configuration Parameters</b><br>In previous TeamCity versions, installed .Net Frameworks, Visual Studios and Mono were reported as System Properties of the build agents.<br>This made the properties available in the build script.In order to reduce number of TeamCity-specific properties pushed into the build scripts, the values are now reported via Configuration Parameters (that is, without "system." prefix) and are not available in the build script by default. They still be used in the Build Configuration settings via %-references by their previous names, just without "system." prefix.</p><p id="2e036db4"><b id="a56bf541">Ipr runner is deprecated in favor of IntelliJ IDEA Project runner</b><br>Runner for IntelliJ IDEA projects was completely rewritten. It is not named "IntelliJ IDEA Project" runner. Previously available Ipr runner is also preserved but is marked as deprecated and will be removed in one of the further major releases of TeamCity. It is highly recommended to migrate your existing build configurations to the new runner.<br>Please note that the new runner uses different approach to run tests: you need to have a shared Run Configuration created in IntelliJ IDEA and reference it in the runner settings.</p><p id="108fec67"><b id="301cc2da">Cleanup for Inspection and Duplicates data</b><br>Starting from 6.0 Inspection and Duplicates reports for the builds are cleaned when build is cleaned from history, not when build's artifacts are cleaned as it used to be.</p><p id="8d60e400"><b id="a73345de">Inspection and Duplicates runners require Java 1.6</b><br>"Inspections" and "Duplicates (Java)" runners now require Java JDK 1.6. Please ensure Java 1.6 is installed on relevant agents and check it is specified in the "JDK home path" setting of the runners.</p><p id="2afc5d40"><b id="51739a70">XML Report Validation</b><br>If you had invalid settings of "XML Report Processing" section of the build runners, you might find the Build Configurations reporting "Report paths must be specified" messages upon upgrade. In this case, please go to the runner settings and correct the configuration. (related <a href="http://youtrack.jetbrains.net/issue/TW-14821" data-external="true" target="_blank" rel="noopener noreferrer">issue</a>)</p><p id="f4fa56eb"><b id="ba0c4ad7">Open API Changes</b><br>See <a href="https://confluence.jetbrains.com/display/TCD18/Open+API+Changes" data-external="true" target="_blank" rel="noopener noreferrer">Open API Changes</a> Several jars in <code class="code">devPackage</code> were reordered, some moved under <code class="code">runtime</code> subdirectory. Please update your plugin projects to accommodate for these changes.</p><p id="d81b5eb6"><b id="2db2044d">REST API Changes</b><br>Several objects got additional attributes and sub-elements. Please check that your parsing code still works.</p><p id="5336e423"><b id="7680b8d1">Perforce Clean Checkout</b><br>All builds using Perforce checkout will do a clean checkout after server upgrade. Please note that this can impose a high load on the server in the first hours after upgrade and server can be unresponsive while many builds are in "transferring sources" stage.</p></div><a name="Changesfrom5.1.2to5.1.3"></a><a name="Changes-from-5.1.2-to-5.1.3"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom5.1.2to5.1.3">Changes from 5.1.2 to 5.1.3</h2><p id="e2d5cb05"><b id="f0ac768e">Path to executable in Command line runner</b><br>The <a href="http://youtrack.jetbrains.net/issue/TW-11840" data-external="true" target="_blank" rel="noopener noreferrer">bug</a> was fully fixed. The behavior is the same as in pre-5.1 builds.</p></div><a name="Changesfrom5.1.1to5.1.2"></a><a name="Changes-from-5.1.1-to-5.1.2"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom5.1.1to5.1.2">Changes from 5.1.1 to 5.1.2</h2><p id="dd5bb099">Jabber notification sending errors are displayed in web UI for administrators again (these messages were disabled in 5.1.1). If you do not use Jabber notifications, please pause the Jabber notifier on the Jabber settings server settings page.</p></div><a name="Changesfrom5.1to5.1.1"></a><a name="Changes-from-5.1-to-5.1.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom5.1to5.1.1">Changes from 5.1 to 5.1.1</h2><p id="1e92ca61"><b id="0391e51f">Path to executable in Command line runner</b><br>The <a href="http://youtrack.jetbrains.net/issue/TW-11840" data-external="true" target="_blank" rel="noopener noreferrer">bug</a> was partly fixed. The behavior is the same as in pre-5.1 builds except for the case when you have the working directory specified and have the script in both checkout and working directory. The script from the working directory is used.</p><p id="d6d7c71b"><b id="2a120c90">Path to script file in Solution runner and MSBuild runner</b><br>The <a href="http://youtrack.jetbrains.net/issue/TW-11854" data-external="true" target="_blank" rel="noopener noreferrer">bug</a> was fixed. The behavior is the same as in pre-5.1 builds.</p></div><a name="Changesfrom5.0.3to5.1"></a><a name="Changes-from-5.0.3-to-5.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom5.0.3to5.1">Changes from 5.0.3 to 5.1</h2><aside class="tip sideblock" data-title="" rel="UpgradeNotes-Changesfrom5.0.3to5.1" id="8c2df241"><p id="db837627">If you plan to upgrade from version 3.1.x to 5.1, you will need to modify some dtd files in <code class="code">&lt;TeamCity Data Directory&gt;/config</code> before upgrade, read more in the issue: <a href="http://youtrack.jetbrains.net/issue/TW-11813#comment=27-148589" data-external="true" target="_blank" rel="noopener noreferrer">TW-11813</a></p></aside><aside class="tip sideblock" data-title="" rel="UpgradeNotes-Changesfrom5.0.3to5.1" id="39406a18"><p id="8a335870">NCover 3 support may not work. See <a href="http://youtrack.jetbrains.net/issue/TW-11680#comment=27-148573" data-external="true" target="_blank" rel="noopener noreferrer">TW-11680</a></p></aside><p id="88fe6e9f"><b id="ddae259e">Notification templates change</b><br>Since 5.1, TeamCity uses <a href="customizing-notifications.html">new template engine</a> (Freemarker) to generate notification messages. New default templates are supplied and customizations to the templates made prior to upgrading are no longer effective.</p><p id="7ba593ee">If you customized notification templates prior to this upgrade, please review the new notification templates and make changes to them if necessary. Old notification templates are copied into <code class="code">&lt;TeamCity Data Directory&gt;/config/_trash/_notifications</code> directory. Hope, you will enjoy the new templates and new extended customization capabilities.</p><p id="7a641bc3"><b id="4eee5233">External database drivers location</b><br>JDBC drivers can now be placed into <code class="code">&lt;TeamCity Data Directory&gt;/lib/jdbc</code> directory instead of <code class="code">WEB-INF/lib</code>. It is recommended to use the new location. See details at <a href="setting-up-an-external-database.html">Setting up an External Database</a>.</p><p id="ddd5b99d">PostgresSQL jdbc driver is no more bundled with TeamCity installation package, you will need to <a href="setting-up-an-external-database.html">install</a> it yourself upon upgrade.</p><p id="b2613b35"><b id="db08b0dc">Database connection properties</b><br>Database connection properties template files have changed their names and are placed into <code class="code">database.&lt;database-type&gt;.properties.dist</code> files under <code class="code">&lt;TeamCity Data Directory&gt;/config</code> directory. They follow <a href="teamcity-data-directory.html">.dist files convention</a>.</p><p id="56857415">It is recommended to review your <code class="code">database.properties</code> file by comparing it with the new template file for your database and remove any options that you did not customize specifically.</p><p id="97b7c89e"><b id="8bd22061">Default memory options change</b><br>We changed the default <a href="installing-and-configuring-the-teamcity-server.html">memory option</a> for PermGen memory space and if you had <code class="code">-Xmx</code> JVM option changed to about 1.3G and are running on 32 bit JVM, the server may fail to start with a message like: <code class="code">Error occurred during initialization of VM Could not reserve enough space for object heap Could not create the Java virtual machine.</code></p><p id="561be5aa">On this occasion, please consider either:</p><ul class="list _ul"><li class="list__item" id="1f1bb881"><p>switching to 64 bit JVM. Please consider the <a href="installing-and-configuring-the-teamcity-server.html">note</a>.</p></li><li class="list__item" id="fe55eddb"><p>reducing PermGen memory via <code class="code">-XX:MaxPermSize</code> <a href="configuring-teamcity-server-startup-properties.html">JVM option</a> (to previous default 120m)</p></li><li class="list__item" id="b60f4ffd"><p>reducing heap memory via <code class="code">-Xmx</code> <a href="configuring-teamcity-server-startup-properties.html">JVM option</a></p></li></ul><p id="8e70a6ef"><b id="8c77a1ea">Vault Plugin is bundled</b><br>In this version we bundled <a href="https://confluence.jetbrains.com/display/TW/Vault" data-external="true" target="_blank" rel="noopener noreferrer">SourceGear Vault VCS plugin</a> (with experimental status). Please make sure to uninstall the plugin from .BuildServer/plugins (just delete plugin's zip) if you installed it previously.</p><p id="dea40bca"><b id="4f5109c1">Path to executable in Command line runner</b> A <a href="http://youtrack.jetbrains.net/issue/TW-11840" data-external="true" target="_blank" rel="noopener noreferrer">bug</a> was introduced that requires changing the path to executable if working directory is specified in the runner.The bug is partly fixed in 5.1.1 and fully fixed in 5.1.3.</p><p id="020f5ac8"><b id="9debb5a8">Path to script file in Solution runner and MSBuild runner</b><br>A <a href="http://youtrack.jetbrains.net/issue/TW-11854" data-external="true" target="_blank" rel="noopener noreferrer">bug</a> was introduced that requires changing the path to script if working directory is specified in the runner. The bug is fixed in 5.1.1.</p><p id="6c9df851"><b id="fe432da1">Open API Changes</b><br>See <a href="https://confluence.jetbrains.com/display/TCD18/Open+API+Changes" data-external="true" target="_blank" rel="noopener noreferrer">Open API Changes</a></p></div><a name="Changesfrom5.0.2to5.0.3"></a><a name="Changes-from-5.0.2-to-5.0.3"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom5.0.2to5.0.3">Changes from 5.0.2 to 5.0.3</h2><p id="37105768">No noteworthy changes.</p><aside class="tip sideblock" data-title="" rel="37105768" id="b00f2838"><p id="f52e1dd0">There is a known issue with .NET duplicates finder: <a href="http://youtrack.jetbrains.net/issue/TW-11320" data-external="true" target="_blank" rel="noopener noreferrer">TW-11320</a><br>Please use the patch attached to the issue.</p></aside></div><a name="Changesfrom5.0.1to5.0.2"></a><a name="Changes-from-5.0.1-to-5.0.2"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom5.0.1to5.0.2">Changes from 5.0.1 to 5.0.2</h2><p id="07da55e7"><b id="ce9d44e1">External change viewers</b><br>The <code class="code">relativePath</code> variable is now replaced with relative path of a file <i id="1238a35d">without</i> checkout rules. The previous value can be accessed via <code class="code">relativeAgentPath</code>. More information at <a href="http://jetbrains.net/tracker/issue/TW-10801" data-external="true" target="_blank" rel="noopener noreferrer">TW-10801</a>.</p></div><a name="Changesfrom5.0to5.0.1"></a><a name="Changes-from-5.0-to-5.0.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom5.0to5.0.1">Changes from 5.0 to 5.0.1</h2><p id="39962168">No noteworthy changes.</p></div><a name="Changesfrom4.5.6to5.0"></a><a name="Changes-from-4.5.6-to-5.0"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom4.5.6to5.0">Changes from 4.5.6 to 5.0</h2><p id="f9aeb44c"><b id="81487bbb">Pre-5.0 Enterprise Server Licenses and Agent Licenses need upgrade</b><br>With the version 5.0, we announce changes to the upgrade policy: Upgrade to 5.0 is not free. Every license (server and agent) bought since 5.0 will work with any TeamCity version released within one year since the license purchase. Please review the detailed information at <a href="http://www.jetbrains.com/teamcity/buy/index.jsp" data-external="true" target="_blank" rel="noopener noreferrer">Licensing and Upgrade</a> section of the official site.</p><p id="e2909d3e"><b id="04225205">Bundled plugins</b><br>If you used standalone plugins that are now bundled in 5.0, do not forget to remove the plugins from <code class="code">.BuildServer/plugins</code> directory.The newly bundled plugins are:</p><ul class="list _ul"><li class="list__item" id="56e359bc"><p>Mercurial</p></li><li class="list__item" id="73bbf061"><p>Git (JetBrains)</p></li><li class="list__item" id="f40dd4e2"><p>REST API (was provided with YouTrack previously)</p></li></ul><p id="1efef334"><b id="705c65e3">Other plugins</b><br>If you use any plugins that are not bundled with TeamCity, please make sure you are using the latest version and it is compatible with the 5.0 release. e.g. You will need the latest version of <a href="https://confluence.jetbrains.com/display/TW/Groovy+plug" data-external="true" target="_blank" rel="noopener noreferrer">Groovy plug</a> and other properties-providing extensions.Pre-5.0 notifier plugins may lack support for per-test and assignment responsibility notifications.</p><p id="fba5855c"><b id="33ddcb1f">Obsolete Properties</b><br>The system property "build.number.format" and environment variable "BUILD_NUMBER_FORMAT" are removed. If you need to use build number format in your build (let us know why), you can define build number format as <code class="code">%system.&lt;property name&gt;%</code> and define &lt;property name&gt; system property in the build configuration (it will be passed to the build then).</p><p id="6d952410"><b id="2feee089">Oracle database</b><br>If you use TeamCity with Oracle database, you should add an addition privilege to the TeamCity Oracle user. In order to do it, log in to Oracle as user SYS and perform</p><div class="code-block" data-lang="bash">
grant execute on dbms_lock to &lt;TeamCity_User&gt;;

</div><p id="f416cee7"><b id="1fcb3183">PostgreSQL database</b><br>TeamCity 5.0 supports PostrgeSQL version 8.3+.<br>So if the version of your PostgreSQL server is less than 8.3 then it needs to be upgraded.</p><p id="00995fba"><b id="8169c972">Open API Changes</b> See <a href="https://confluence.jetbrains.com/display/TCD18/Open+API+Changes" data-external="true" target="_blank" rel="noopener noreferrer">Open API Changes</a></p></div><a name="Changesfrom4.5.2to4.5.6"></a><a name="Changes-from-4.5.2-to-4.5.6"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom4.5.2to4.5.6">Changes from 4.5.2 to 4.5.6</h2><p id="a447b434">No noteworthy changes.</p></div><a name="Changesfrom4.5.1to4.5.2"></a><a name="Changes-from-4.5.1-to-4.5.2"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom4.5.1to4.5.2">Changes from 4.5.1 to 4.5.2</h2><p id="bc2450ad">Here is a critical issue with Rake runner in 4.5.2 release. Please see <a href="http://jetbrains.net/tracker/issue2/TW-8485" data-external="true" target="_blank" rel="noopener noreferrer">TW-8485</a> for details and a fixing patch.</p></div><a name="Changesfrom4.5.0to4.5.1"></a><a name="Changes-from-4.5.0-to-4.5.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom4.5.0to4.5.1">Changes from 4.5.0 to 4.5.1</h2><p id="6fc77b51">No noteworthy changes.</p></div><a name="Changesfrom4.0.2to4.5"></a><a name="Changes-from-4.0.2-to-4.5"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom4.0.2to4.5">Changes from 4.0.2 to 4.5</h2><p id="b0dc927c"><b id="e428ba6a">Default User Roles</b><br>The roles assigned as default for new users will be moved to "All Users" groups and will be effectively granted to all users already registered in TeamCity.</p><p id="8c8e833e"><b id="b2909c38">Running builds during server restart</b><br>Please ensure there are no running builds during server upgrade.If there are builds that run during server restart and these builds have test, the builds will be canceled and re-added to build queue (<a href="http://jetbrains.net/tracker/issue/TW-7476" data-external="true" target="_blank" rel="noopener noreferrer">TW-7476</a>).</p><p id="05e3d6ba"><b id="f7b27259">LDAP settings rename</b><br>If you had LDAP integration configured, several settings will be automatically converted on first start of the new server. The renamed settings are:</p><ul class="list _ul"><li class="list__item" id="acf517ac"><p><code class="code">formatDN</code>  is renamed to <code class="code">teamcity.auth.formatDN</code></p></li><li class="list__item" id="58e0e949"><p><code class="code">loginFilter</code>  is renamed to <code class="code">teamcity.auth.loginFilter</code></p></li></ul></div><a name="Changesfrom4.0.1to4.0.2"></a><a name="Changes-from-4.0.1-to-4.0.2"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom4.0.1to4.0.2">Changes from 4.0.1 to 4.0.2</h2><p id="dbb65dca"><b id="caf48f31">Increased first cleanup time</b><br>The first server cleanup after the update can take significantly more time. Further cleanups should return to usual times. During this first cleanup the data associated with deleted build configuration is cleaned. It was not cleaned earlier because of a bug in TeamCity versions 4.0 and 4.0.1.</p></div><a name="Changesfrom4.0to4.0.1"></a><a name="Changes-from-4.0-to-4.0.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom4.0to4.0.1">Changes from 4.0 to 4.0.1</h2><p id="d0ed0602"><b id="5c80cc97">"importData" service message arguments id</b> argument renamed to <b id="5d913d3f">type</b> and <b id="c37b21be">file</b> to <b id="0a2025f4">path</b>. This change is backward-compatible. See <a href="fxcop.html">Using Service Messages</a> section for examples of new syntax.</p></div><a name="Changesfrom3.1.2to4.0"></a><a name="Changes-from-3.1.2-to-4.0"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom3.1.2to4.0">Changes from 3.1.2 to 4.0</h2><p id="969f2efb"><b id="88771c9a">Initial startup time</b><br>On the very first start of the new version of TeamCity, the database structure will be upgraded. This process can increase the time of the server startup. The first startup can take up to 20 minutes more then regular one. This time depends on the size of your builds history, average number of tests in a build and the server hardware.</p><p id="0061e831"><b id="20aacdce">Users re-login will be forced after upgrade</b><br>Upon upgrade, all users will be automatically logged off and will need to re-login in their browsers to TeamCity web UI. After the first login since upgrade, <b id="f6e7a231">Remember me</b> functionality will work as usual.</p><p id="bafbbfab"><b id="87e7dfda">Previous IntelliJ IDEA versions support</b><br>IntelliJ IDEA plugin in this release is no longer compatible with IntelliJ IDEA 6.x versions. Supported IDEA versions are 7.0.3 and 8.0.</p><p id="e29b1472"><b id="41609604">Using VCS revisions in the build</b><br><code class="code">build.vcs.number.N</code> system properties are replaced with <code class="code">build.vcs.number.&lt;escaped VCS root name&gt;</code> properties (or just <code class="code">build.vcs.number</code> if there is only one root). If you used the properties in the build script you should update the usages manually or switch compatibility mode on. References to the properties in the build configuration settings are updated automatically. Corresponding environment variable has been affected too. <a href="configuring-build-parameters.html">Read more</a>.</p><p id="8f8d2270"><b id="daa5e435">Test suite</b><br>Due to the fact that TeamCity started to handle tests suites, the tests with suite name defined will be treated as new tests (thus, test history can start from scratch for these tests.)</p><p id="883377bd"><b id="8209ffe4">Artifact dependency pattern</b><br>Artifact dependencies patterns now support <a href="https://confluence.jetbrains.com/display/TCD4/Wildcards" data-external="true" target="_blank" rel="noopener noreferrer">Ant-like wildcards</a>.<br>If you relied on <code class="code">""</code> pattern to match directory names, please adjust your pattern to use <code class="code">"/"</code> instead of single <code class="code">"*"</code>.<br>If you relied on the <code class="code">""</code> pattern to download only the files without extension, please update your pattern to use <code class="code">"."</code> for that.</p><p id="02cb55cc"><b id="4ab7aa97">Downloading of artifacts with help of Ivy</b><br>If you downloaded artifacts from the build scripts (like Ant build.xml) with help of Ivy tasks you should modify your ivyconf.xml file and remove all statuses from there except "integration". You can take the ivyconf.xml file from the following page as reference: <a href="http://www.jetbrains.net/confluence/display/TCD4/Configuring+Dependencies" data-external="true" target="_blank" rel="noopener noreferrer">http://www.jetbrains.net/confluence/display/TCD4/Configuring+Dependencies</a></p><p id="ec0b1679"><b id="87eb74e4">Browser caches (IE)</b><br>To force Internet Explorer to use updated icons (i.e. for the Run button) you may need to force page reload (Ctrl+Shift+R) or delete "Temporary Internet Files".</p></div><a name="Changesfrom3.1.1to3.1.2"></a><a name="Changes-from-3.1.1-to-3.1.2"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom3.1.1to3.1.2">Changes from 3.1.1 to 3.1.2</h2><p id="a203db93">No noteworthy changes.</p></div><a name="Changesfrom3.1to3.1.1"></a><a name="Changes-from-3.1-to-3.1.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom3.1to3.1.1">Changes from 3.1 to 3.1.1</h2><p id="a5aac28d">No noteworthy changes.</p></div><a name="Changesfrom3.0.1to3.1"></a><a name="Changes-from-3.0.1-to-3.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom3.0.1to3.1">Changes from 3.0.1 to 3.1</h2><p id="1d8976c6"><b id="bb9124db">Guest User and Agent Details</b></p><p id="6716c932">Starting from version 3.1, the Guest user does not have access to the agent details page. This has been done to reduce exposing potentially sensitive information regarding the agents' environment. In the Enterprise Edition, the Guest user's roles can be edited at the <b id="05d471da">Users and Groups</b> page to provide the needed level of permission.</p><p id="58ed5ce5"><b id="850975a5">StarTeam Support</b></p><p id="a6ad67f2"><b id="50390314">Working Folders in Use</b></p><p id="c8064c77">Since version 3.1 when checking out files from a StarTeam repository TeamCity builds directory structure on the base of the working folder names, not just folder names as it was in earlier versions. So if you are satisfied with the way TeamCity worked with StarTeam folders in version 3.0, ensure the working folders' names are equal to the corresponding folder names (which is so by default).</p><p id="36e837cd">Also note, that although StarTeam allows using absolute paths as working folders, TeamCity supports relative paths only and doesn't detect absolute paths presence. So be careful and review your configuration.</p><p id="5414e6b5"><b id="97a093f5">StarTeam URL Parser Fixed</b></p><p id="ca5503a5">In version 3.0 a user must have followed a wrong URL scheme. It was like <i id="960b86fc">starteam://server:49201/project/view/rootFolder/subfolder/...</i> and didn't work when user tried to refer a non-default view. In version 3.1 the native StarTeam URL parser is utilized. This means you now don't have to specify the root folder in the URL, and the previous example should look like <i id="2050488d">starteam://server:49201/project/view/subfolder/...</i></p></div><a name="Changesfrom3.0to3.0.1"></a><a name="Changes-from-3.0-to-3.0.1"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom3.0to3.0.1">Changes from 3.0 to 3.0.1</h2><p id="71fdf28a"><b id="a7e34536">Linux Agent Upgrade</b></p><ul class="list _ul"><li class="list__item" id="af105029"><p>Due to an issue with Agent upgrade under Linux, Agent auxiliary Launcher processes may have been left running after agent upgrades. Versions 3.0.1 and up fix the issue. To get rid of the stale running processes, after automatic agent upgrade, please stop the agent (via <code class="code">agent.sh kill</code> command) and kill any running <code class="code">java jetbrains.buildServer.agent.Launcher</code> processes and start the agent again.</p></li></ul></div><a name="Changesfrom2.xto3.0"></a><a name="Changes-from-2.x-to-3.0"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom2.xto3.0">Changes from 2.x to 3.0</h2><p id="83f49d26"><b id="bcf7b885">Incompatible changes</b></p><p id="84cd0bc2">Please note that TeamCity 3.0 introduces several changes incompatible with TeamCity 2.x:</p><ul class="list _ul"><li class="list__item" id="f8ad1141"><p><b id="ee7159bc">build.working.dir</b> system property is renamed to <b id="890c77c9">teamcity.build.checkoutDir</b>. If you use the property in you build scripts, please update the scripts.</p></li><li class="list__item" id="d1911e8b"><p><code class="code">runAll.bat</code> script now accepts a required parameter: <b id="96799a5e">start</b> to start server and agent, <b id="c742079d">stop</b> to stop server and agent.</p></li><li class="list__item" id="11161b90"><p>Under Windows, <code class="code">agent.bat</code> script now accepts a required parameter: <b id="d176f45e">start</b> to start agent, <b id="b205d1b7">stop</b> to stop agent. Note that in this case agent will be stopped only after it becomes idle (no builds are run). To force immediate agent stopping, use <code class="code">agent.bat stop force</code> command that is available under both Windows and Linux (<code class="code">agent.sh stop force</code>). Under Linux you can also use <code class="code">agent.sh stop kill</code> command to stop agents not responding to <code class="code">agent.sh stop force</code>.</p></li></ul><p id="de427557"><b id="6cb32444">Build working directory</b></p><p id="e0182817">Since TeamCity 3.0 introduces ability to configure VCS roots on per-Build Configuration basis, rather then per-Project, the default directory in which build configuration sources are checked out on agent now has generated name. If you need to know the directory used by a build configuration, you can refer to <code class="code">&lt;agent home&gt;/work/directory.map</code> file which lists build configurations with the directory used by them. See also <a href="build-checkout-directory.html">Build Checkout Directory</a></p><p id="9a4d9ee6"><b id="0b3ce95a">User Roles when upgrading from TeamCity 1.x/2.x/3.x Professional to 3.x Enterprise</b></p><p id="3ecf18db">When upgrading from TeamCity 1.x/2.x/3.x Professional to 3.x Enterprise for the first time TeamCity's accounts will be assigned the following <a href="role-and-permission.html">roles</a> by default:</p><ul class="list _ul"><li class="list__item" id="bbe3fb8c"><p><i id="21988b0e">Administrators</i> become System Administrators</p></li><li class="list__item" id="50074ae7"><p><i id="e78948b6">Users</i> become Project Developers for all of the projects</p></li><li class="list__item" id="cc9d6712"><p>The <i id="4869d057">Guest</i> account is able to view all of the projects</p></li><li class="list__item" id="7d4b46a4"><p><i id="c61304a0">Default user</i> roles are set to Project Developer for all of the projects</p></li></ul></div><a name="Changesfrom1.xto2.0"></a><a name="Changes-from-1.x-to-2.0"></a><div class="chapter"><h2 id="UpgradeNotes-Changesfrom1.xto2.0">Changes from 1.x to 2.0</h2><p id="3182bf0b"><b id="8bd5616e">Database Settings Move</b><br>Move your database settings from the <code class="code">&lt;TeamCity installation folder&gt;/ROOT/WEB-INF/buildServerSpring.xml</code> file to the <code class="code">database.properties</code> file located in the TeamCity configuration Data Directory (<code class="code">&lt;TeamCity Data Directory&gt;/config</code>).</p><p id="0dfe14d0">.NET inspection and duplicatesinherited</p><aside class="tip sideblock" data-title="" rel="0dfe14d0" id="b9a34097"><p id="c53c90f7">If you were using the TeamCity-GitHub <a href="https://github.com/milgner/TeamCityGithub" data-external="true" target="_blank" rel="noopener noreferrer">third-party plugin</a> prior to TeamCity 10.0, you can safely <a href="installing-additional-plugins.html">remove</a> it: the built-in TeamCity integration will detect the existing connection to GitHub issue tracker and pick up your settings automatically.</p></aside><p id="5c984be8"><code class="code">teamcity.TruncateIgnoreReasonConverter.copyReasons</code>:</p><div class="code-block" data-lang="bash">
 Error
   collecting changes 
  for
   VCS repository 
  ...
  

  Failed
   to collect TFS changes 
  -
   
  From
   version x 
  is
   greater 
  then
   current version y 

</div><p id="6a8decaa">The <a href="https://youtrack.jetbrains.com/issue/TW-46648" data-external="true" target="_blank" rel="noopener noreferrer">bug with temp tool folders</a> introduced in the previous version has been fixed.</p><hr id="66f224f1"><p id="98686e1b"><b id="bafe0bd2">See also:</b></p><p id="026cfd3b"><b id="e505b947">Administrator's Guide</b>: <a href="licensing-policy.html">Licensing Policy</a></p><hr id="fb88b566"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>