<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>MSBuild服务任务-帮助|帮助团队城市</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="MSBuild Service Tasks" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-unit-testing-and-code-coverage.md|Configuring Unit Testing and Code Coverage/net-testing-frameworks-support.md|.NET Testing Frameworks Support/nunit-support.md|NUnit Support/msbuild-service-tasks.md|MSBuild Service Tasks" data-main-title="MSBuild Service Tasks" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/msbuild-service-tasks.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="msbuild-service-tasks.md" data-toc="MSBuild Service Tasks">MSBuild服务任务</h1><p id="9e8656f1">对于MSBuild，TeamCity提供了以下服务任务，这些任务实现<a href="build-script-interaction-with-teamcity.html">与与TeamCity</a>进行<a href="build-script-interaction-with-teamcity.html">构建脚本交互</a>相同的选项：</p><p id="436b2681">在此页：</p><p id="035ba65b"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#MSBuildServiceTasks-TeamCitySetBuildNumber">TeamCitySetBuildNumber</a></li><li class="list__item"><a href="#MSBuildServiceTasks-TeamCityProgressMessage">TeamCityProgressMessage</a></li><li class="list__item"><a href="#MSBuildServiceTasks-TeamCityPublishArtifacts">TeamCityPublish Artifacts</a></li><li class="list__item"><a href="#MSBuildServiceTasks-TeamCityReportStatsValue">TeamCityReportStatsValue</a></li><li class="list__item"><a href="#MSBuildServiceTasks-TeamCityBuildProblem">TeamCityBuild问题</a></li><li class="list__item"><a href="#MSBuildServiceTasks-TeamCitySetStatus">TeamCitySetStatus</a></li></ul><p></p><a name="TeamCitySetBuildNumber"></a><a name="TeamCitySetBuildNumber"></a><div class="chapter"><h2 id="MSBuildServiceTasks-TeamCitySetBuildNumber">TeamCitySetBuildNumber</h2><p id="b07c210e"><code class="code">TeamCitySetBuildNumber</code>允许用户更改BuildNumber：</p><div class="code-block" data-lang="markup"><teamcitysetbuildnumber buildnumber="1.3_{build.number}"></teamcitysetbuildnumber>

</div><p id="3e9696e1">可以使用<code class="code">{build.number}</code>作为旧版本号的占位符。</p></div><a name="TeamCityProgressMessage"></a><a name="TeamCityProgressMessage"></a><div class="chapter"><h2 id="MSBuildServiceTasks-TeamCityProgressMessage">TeamCityProgressMessage</h2><p id="3ab7faf2"><code class="code">TeamCityProgressMessage</code>允许您编写进度消息。</p><div class="code-block" data-lang="markup"><teamcityprogressmessage text="Progress message text"></teamcityprogressmessage>

</div></div><a name="TeamCityPublishArtifacts"></a><a name="TeamCityPublishArtifacts"></a><div class="chapter"><h2 id="MSBuildServiceTasks-TeamCityPublishArtifacts">TeamCityPublish Artifacts</h2><p id="305d2dc1"><code class="code">TeamCityPublishArtifacts</code>允许您发布从MSBuild项目组获取的所有工件</p><div class="code-block" data-lang="markup"><itemgroup>
    <files include="*.dll"></files>
  </itemgroup>
  <teamcitypublishartifacts sourcefiles="@(Files-> '%(FullPath)' )" condition=" '$(TEAMCITY_VERSION)' != '' "></teamcitypublishartifacts>

</div></div><a name="TeamCityReportStatsValue"></a><a name="TeamCityReportStatsValue"></a><div class="chapter"><h2 id="MSBuildServiceTasks-TeamCityReportStatsValue">TeamCityReportStatsValue</h2><p id="9b691cb9"><code class="code">TeamCityReportStatsValue</code>发布统计值是一项方便的任务</p><div class="code-block" data-lang="markup"><teamcityreportstatsvalue value="42" key="StatsValueType"></teamcityreportstatsvalue>

</div></div><a name="TeamCityBuildProblem"></a><a name="TeamCityBuildProblem"></a><div class="chapter"><h2 id="MSBuildServiceTasks-TeamCityBuildProblem">TeamCityBuild问题</h2><p id="678d844b"><code class="code">TeamCityBuildProblem</code>任务报告一个构建问题，该问题实际上使构建失败。生成问题会显示在生成结果页面上，并且还会影响生成状态文本。</p><div class="code-block" data-lang="markup"><teamcitybuildproblem description="description" identity="identity"></teamcitybuildproblem>

</div><ul class="list _ul"><li class="list__item" id="b049f349"><p>强制性的<code class="code">description</code>属性是描述构建问题的可读文本。默认<code class="code">description</code>出现在构建状态文本中。</p></li></ul><ul class="list _ul"><li class="list__item" id="df3511b9"><p><code class="code">identity</code>是可选属性，用于描述特定的构建问题实例。如果发生相同的问题（例如，相同的编译错误），则不应在整个构建过程中进行更改。应为有效的Java ID，最多60个字符。默认<code class="code">identity</code>是根据<code class="code">description</code> 。</p></li></ul></div><a name="TeamCitySetStatus"></a><a name="TeamCitySetStatus"></a><div class="chapter"><h2 id="MSBuildServiceTasks-TeamCitySetStatus">TeamCitySetStatus</h2><p id="d15147ce"><code class="code">TeamCitySetStatus</code>是更改当前构建状态文本的任务。<br>在TeamCity 8.0之前，此任务还用于将构建状态更改为失败。但是，从TeamCity 7.1开始，应将<a href="#TeamCityBuildProblem">TeamCityBuildProblem</a>任务用于此目的。</p><div class="code-block" data-lang="markup"><teamcitysetstatus status="<status value>" text="{build.status.text} and some aftertext"></teamcitysetstatus>

</div><p id="5007e923"><code class="code">{build.status.text</code>替换为较旧的状态文本。<br>状态可以有<code class="code">SUCCESS</code>值。</p><hr id="51b81150"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>