<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Viewing Tests and Configuration Problems - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Viewing Tests and Configuration Problems" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/user-s-guide.md|User's Guide/viewing-tests-and-configuration-problems.md|Viewing Tests and Configuration Problems" data-main-title="Viewing Tests and Configuration Problems" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/viewing-tests-and-configuration-problems.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Viewing Tests and Configuration Problems" id="viewing-tests-and-configuration-problems.md">Viewing Tests and Configuration Problems</h1><p id="0c8fedc2">On this page:</p><p id="6f130cb6"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#ViewingTestsandConfigurationProblems-ViewingProblemsonProjectOverviewPage">Viewing Problems on Project Overview Page</a></li><li class="list__item"><a href="#ViewingTestsandConfigurationProblems-UsingCurrentProblemsTab">Using Current Problems Tab</a></li><li class="list__item"><a href="#ViewingTestsandConfigurationProblems-FlakyTests">Flaky Tests</a></li></ul></p><a name="ViewingProblemsonProjectOverviewPage"></a><a name="Viewing-Problems-on-Project-Overview-Page"></a><div class="chapter"><h2 id="ViewingTestsandConfigurationProblems-ViewingProblemsonProjectOverviewPage">Viewing Problems on Project Overview Page</h2><p id="2e1e0df5">The <b id="200493f4">Project Overview</b> page also displays the number of tests failed in build configurations as well as other problems. When the data in the problematic build configuration is not expanded, the link under the tests number takes you to the <b id="60b04d00">Current Problems</b> tab (see <a href="#Using-Current-Problems-Tab">below</a>).</p><p id="197a3bca">When you expand the build configuration data, the problem summary appears. The presentation of problems is shortened if your browser does not have enough horizontal space.</p></div><a name="UsingCurrentProblemsTab"></a><a name="Using-Current-Problems-Tab"></a><div class="chapter"><h2 id="ViewingTestsandConfigurationProblems-UsingCurrentProblemsTab">Using Current Problems Tab</h2><p id="dc4ba13d">To view problematic build configurations and tests in your project, open the <b id="ea750cf4">Project Home</b> page and go to the <b id="6e572a25">Current Problems</b> tab.</p><p id="349ae90f">By default, the <b id="a2d562ca">Current Problems</b> tab displays data for all build configurations within a project. To limit the data displayed, use the <i id="52cee785">Filter by build configuration</i> drop-down menu.</p><p id="0ed3733b">From this page you can view problems in your project divided into the following groups:</p><ul class="list _ul"><li class="list__item" id="3e8ce97f"><p>build configuration problems</p></li><li class="list__item" id="3f6d20d9"><p>failed tests</p></li><li class="list__item" id="18d6c249"><a href="investigating-and-muting-build-failures.html#Muting-Failed-Tests">muted test failures</a></li><li class="list__item" id="1b7ea417"><p>build problems</p></li></ul><p id="92abe021">Each of the sections is expandable and you can further drill down to the smallest relevant item using the up and down arrows <img alt="UpDownArrows.PNG" title="UpDownArrows.PNG" src="/help/img/teamcity/2019.1/UpDownArrows.PNG" id="407ee0a7" width="58" height="21" class="inline-icon-58">.</p><p id="e8aa8f77">The links appearing in build configuration problems and build problems sections enable you to monitor a great deal of useful data, for example, you can navigate to build results, view build log and changes. More options are available when you click the arrow next to a link.</p><p id="ba42d258">The failed test and muted failures sections have grouping options and allow viewing the test stack trace available when clicking the test name link. You can also view the test history, open the test in the active IDE, start investigating a particular test failure, fix and unmute a test or start investigating a particular test failure.</p></div><a name="FlakyTests"></a><a name="Flaky-Tests"></a><div class="chapter"><h2 id="ViewingTestsandConfigurationProblems-FlakyTests">Flaky Tests</h2><p id="4e5bbb08">TeamCity detects flaky tests and displays them on the dedicated tab for a given project.</p><p id="621c8d00">A flaky test is a test that is unstable (can exhibit both a passing and a failing result) with the same code.</p><p id="2e249321">Flaky test detection is based on the following heuristics:</p><ol class="list _decimal"><li class="list__item" id="891114c3"><p>High flip rate (Frequent test status changes). A flip in TeamCity is a test status change â€“ either from "OK" to "Failure", or vice versa. The Flip Rate is the ratio of such "flips" to the invocation count of a given test, measured per agent, per build configuration, or over a certain time period (7 days by default). A test which constantly fails, while having a 100% failure rate, will have its flip rate close to zero; a test which "flips" each time it is invoked will have the flip rate close to 100%.If the flip rate is too high, TeamCity will consider the test flaky.</p></li><li class="list__item" id="0c057eb3"><p>Different test status for build configurations with the same VCS change: if two builds of different configurations are run on the same VCS change and the test result is different in these builds, the test is reported as flaky. This may be an indication of environmental issues.</p></li><li class="list__item" id="c4ae9cee"><p>If the status of a test "flipped" in the new build with no changes, i.e. a previously successful test failed in a build without changes or a previously failing test passed in a build without changes, TeamCity will consider the test flaky.</p></li><li class="list__item" id="34e74799"><p>Different test status for multiple invocations in the same build (flaky failure): if the same test is invoked multiple times and the test status flips, TeamCity will consider the test flaky.<br>This heuristic is supported for <a href="http://testng.org/" data-external="true" target="_blank" rel="noopener noreferrer">TestNG</a> unit tests with  <code class="code">invocationCount</code> [<a href="http://testng.org/doc/documentation-main.html" data-external="true" target="_blank" rel="noopener noreferrer">1</a>][<a href="http://testng.org/javadocs/org/testng/annotations/Test.html#invocationCount--" data-external="true" target="_blank" rel="noopener noreferrer">2</a>] greater than <code class="code">1</code>.</p></li></ol><aside class="note " data-title="" rel="cd2ed83f" id="29a54b11"><p id="7632b051">There is a known issue with parameterized test invocations with TestNG: TeamCity relies on the Surefire and Failsafe Maven plugins for the purposes of test result reporting, and these plugins ignore test parameters in their XML output. As a result, parameterized test invocations within the same build are erroneously treated as multiple identical test invocations, and, if some of the invocations fail, the test is marked as flaky with the <i id="b92b3afa">Flaky Failure</i> reason. See the <a href="https://youtrack.jetbrains.com/issue/TW-48097" data-external="true" target="_blank" rel="noopener noreferrer">related issue</a>.</p></aside><p id="82fc54ce">For <a href="http://junit.org/" data-external="true" target="_blank" rel="noopener noreferrer">http://junit.org/</a> tests, a 3rd party <a href="http://tempusfugitlibrary.org/" data-external="true" target="_blank" rel="noopener noreferrer">tempus-fugit</a> library can be used together with <i id="9643aeac">JUnit</i>. It is sufficient to annotate a test with <code class="code">@Intermittent</code> and use the <code class="code">IntermittentTestRunner</code> test runner, as in the minimal example below:</p><div class="code-block" data-lang="none">import org.junit.Test;
import org.junit.runner.RunWith;
 
import com.google.code.tempusfugit.concurrency.IntermittentTestRunner;
import com.google.code.tempusfugit.concurrency.annotations.Intermittent;
 
@RunWith(IntermittentTestRunner.class)
public class MultipleViaTempusFugit {
    @Test
    @Intermittent(repetition = 10)
    public void test() {
        // ...
    }
}

</div><p id="27450e3f">If such a test flakes at least once at multiple invocations within a single build, the <i id="51c61b79">Flaky Failure</i> heuristic will be triggered.</p><p id="e4421686">Such tests are displayed on the dedicated project tab, <b id="f1c7b1f8">Flaky Tests</b>,  along with the total number of test failures, the flip rate for the given test and reasons for qualifying the test as a flaky one.</p><p id="70ae8828">You can also see if the test is flaky when viewing the expanded stack trace for a failed test on the build results page.</p><p id="89e01aee"><figure><img alt="Flaky test in Build Overview" title="Flaky test in Build Overview" src="/help/img/teamcity/2019.1/flaky-test.png" id="7d4a8835" width="1311" height="1229"></figure></p><p id="8967eba2">As with any failed test, you can assign investigations for a flaky test (or multiple tests). For flaky tests the resolution method is automatically set to "Manual"; otherwise the investigation will be automatically removed once the test is successful, which does not mean that the flaky test has been fixed.</p><aside class="tip sideblock" data-title="" rel="8967eba2" id="7c023aa9"><p id="241ca19c"><b id="85bafe7b">Since TeamCity 2019.1</b>, Investigation Auto Assigner can <a href="investigations-auto-assigner.html#delay-auto-assign">delay automatic assignment of investigations</a>, which prevents wrong auto assignments in projects with flaky tests.</p></aside><p id="641467e4">Note that if <a href="working-with-feature-branches.html#Configuring-branches">branches</a> are configured for a VCS Root, flaky tests are detected for the default branch only.</p><hr id="c80f26cd"><p id="962c8c42"><b id="15340bf9">See also:</b></p><p id="755f8000"><b id="fbdd2e84">Concepts</b>: <a href="testing-frameworks.html">Testing Frameworks</a><br><b id="154a5b2c">User's Guide</b>: <a href="working-with-build-results.html">Working with Build Results</a></p><hr id="bb57b6be"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>