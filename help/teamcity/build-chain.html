<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Build Chain - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Build Chain" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/concepts.md|Concepts/build-chain.md|Build Chain" data-main-title="Build Chain" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/build-chain.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Build Chain" id="build-chain.md">Build Chain</h1><p id="d3b7bea5">On this page:</p><p id="f0929a49"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#BuildChain-CommonUseCase">Common Use Case</a></li><li class="list__item"><a href="#BuildChain-ConfiguringBuildChains">Configuring Build Chains</a></li><li class="list__item"><a href="#BuildChain-Stopping/RemovingFromQueueBuildsfromBuildChain">Stopping/Removing From Queue Builds from Build Chain</a></li><li class="list__item"><a href="#BuildChain-DisablingRevisionsSynchronizationBetweenChainParts">Disabling Revisions Synchronization Between Chain Parts</a></li><li class="list__item"><a href="#BuildChain-BuildChainsVisualRepresentation">Build Chains Visual Representation</a><ul class="list _bullet"><li class="list__item"><a href="#BuildChain-Dependenciespageofbuildconfigurationsettings">Dependencies page of build configuration settings</a></li><li class="list__item"><a href="#BuildChain-BuildChainstabofProjectHomeandBuildConfigurationHomepages">Build Chains tab of Project Home and Build Configuration Home pages</a></li><li class="list__item"><a href="#BuildChain-Dependenciestabofbuildresultspage">Dependencies tab of build results page</a></li></ul></li></ul></p><p id="d0d75ede">A <i id="7e5d6125">build chain</i> is a sequence of builds interconnected by <a href="dependent-build.html#Snapshot-Dependency">snapshot dependencies</a>. Sometimes the build chain is called a "pipeline". Parts of a build chain linked with snapshot dependencies with enabled revisions synchronization use the same snapshot of the sources.</p><a name="CommonUseCase"></a><a name="Common-Use-Case"></a><div class="chapter"><h2 id="BuildChain-CommonUseCase">Common Use Case</h2><p id="6ef91bdb">The most common use case for specifying a build chain is running the same test suite of your project on different platforms. For example, before a <i id="3aaf7bcd">release build</i> you want to make sure the tests are run correctly under different platforms and environments. For this purpose, you can instruct TeamCity to run tests, then an integration build first, and a release build after that.</p><p id="a0f54e37">Let's see how the build chain mechanism works in details. On triggering a dependent build of the <i id="875a0436">Release</i> build configuration, TeamCity does the following:</p><ol class="list _decimal"><li class="list__item" id="48464ea4"><p>Resolves a chain of all build configurations that the <i id="43063de7">Release</i> build configuration snapshot depends on.</p></li><li class="list__item" id="f67c4cf6"><p>Checks for changes for all dependent build configurations and synchronizes them when the first build in the build chain enters a build queue.</p></li><li class="list__item" id="93b869e6"><p>Adds all the builds that need building with specific revisions to the build queue.</p></li></ol></div><a name="ConfiguringBuildChains"></a><a name="Configuring-Build-Chains"></a><div class="chapter"><h2 id="BuildChain-ConfiguringBuildChains">Configuring Build Chains</h2><p id="012f0017"><b id="9f2063c2">To specify dependencies in your build configuration</b>:</p><ol class="list _decimal"><li class="list__item" id="ad29cf09"><p>On the <b id="c4354433">Build Configuration Settings</b> page, select <b id="c0cc9618">Dependencies</b>.</p></li><li class="list__item" id="b3406451"><p>On the <b id="c829ec1b">Dependencies</b> page, click the <b id="39eeea65">Add new snapshot dependency</b> link.</p></li></ol><p id="8bea7b44">See also <a href="build-dependencies-setup.html">Build Dependencies Setup</a> for details and an example.</p></div><a name="Stopping/RemovingFromQueueBuildsfromBuildChain"></a><a name="Stopping/Removing-From-Queue-Builds-from-Build-Chain"></a><div class="chapter"><h2 id="BuildChain-Stopping/RemovingFromQueueBuildsfromBuildChain">Stopping/Removing From Queue Builds from Build Chain</h2><p id="7c2ed37d">If a build being stopped or removed from the build queue is a part of a build chain, there is a message below the comment field: "<i id="1b7a2742">This build is a part of a build chain</i>".</p><p id="db40cf2c">If there are other running or queued parts of the build chain (i.e. other running builds or queued builds, which are connected with the build under the action), these builds will be listed below under the label "<i id="ede63675">Stop other parts</i>".</p><p id="747c0045">If a user has access rights to stop a build in the list, there is a checkbox near it. The checkbox is selected by default if stopping the current build will definitely cause the build in the list to fail (for instance, if the listed build depends on the original build being stopped).</p><p id="ece11e18">If user has no access right to stop a build from the list, the checkbox is not visible.</p><p id="97a11aba">Selecting the checkbox marks the selected build for a stop/removal from queue.</p><p id="9ea362cc">If a user has no access right to view a build which is a part of the build chain, this build is not visible to the user at all. If there is at least one such build, there is a warning displayed: "<i id="9b1216e7">You don't have access rights to all its parts</i>". The stripe is shown right under the message "<i id="a582d9f0">This build is a part of a build chain</i>".</p><p id="9db9d92f">In case when all other parts of the build chain cannot be viewed by the current user, we show a yellow stripe with warning: "<i id="f9021d84">You don't have access rights to see its other parts</i>".</p><p id="7e394421">If there are no running or queued builds for the build chain (i.e. all other parts of the build chain have finished), no additional information is shown.</p></div><a name="DisablingRevisionsSynchronizationBetweenChainParts"></a><a name="Disabling-Revisions-Synchronization-Between-Chain-Parts"></a><div class="chapter"><h2 id="BuildChain-DisablingRevisionsSynchronizationBetweenChainParts">Disabling Revisions Synchronization Between Chain Parts</h2><p id="4d48722c"><b id="3c041dda">Since TeamCity 2019.1</b>, you can <a href="snapshot-dependencies.html#enforce-rev-sync">disable revisions synchronization</a> for a snapshot dependency of a build configuration when promoting a build.<br>This option works if you promote a build from chain part 1 to chain part 2, and the first build configuration of part 2 has this option disabled. In this case, TeamCity can use different sources revisions for builds in part 1 and part 2. See the build setup example in <a href="build-dependencies-setup.html#Turned-off-Enforced-Revisions-Synchronization">Build Dependencies Setup</a>.</p><p id="f734c5f5">This is useful when you need to run a dependent build without synchronizing its code revision with its dependencies (preceding builds in a chain).<br>For example, you can promote an older build to a <a href="deployment-build-configuration.html">deployment build configuration</a>, and this build will be run using the latest deployment scripts.In load/acceptance testing, when you store tests in a version control system and often change them to test your system, you do not need to rebuild your application entirely; instead, you can pick up the chain directly from the testing phase.</p></div><a name="BuildChainsVisualRepresentation"></a><a name="Build-Chains-Visual-Representation"></a><div class="chapter"><h2 id="BuildChain-BuildChainsVisualRepresentation">Build Chains Visual Representation</h2><p id="71ed7f8a">Basically, each build chain is a <a href="http://en.wikipedia.org/wiki/Directed_acyclic_graph" data-external="true" target="_blank" rel="noopener noreferrer">directed acyclic graph</a>, i.e. it cannot have cycles.</p><p id="acc4eab5">Build Chains are visible in various places in the TeamCity web UI:</p><ul class="list _ul"><li class="list__item" id="1cd92898"><a href="#Dependencies-page-of-build-configuration-settings">Dependencies page of build configuration settings</a></li><li class="list__item" id="891d888e"><a href="#Build-Chains-tab-of-Project-Home-and-Build-Configuration-Home-pages">Build Chains tab of the Project Home and Build Configuration Home pages</a></li></ul><a name="Dependenciespageofbuildconfigurationsettings"></a><a name="Dependencies-page-of-build-configuration-settings"></a><div class="chapter"><h3 id="BuildChain-Dependenciespageofbuildconfigurationsettings">Dependencies page of build configuration settings</h3><p id="c07eb85a">If a build configuration is a part of a build chain, the corresponding information is displayed in the <b id="9d82e8e9">Build Configuration settings | Dependencies | Snapshot dependencies</b>. Clicking the build chain link opens the preview of the build chain and its configuration in a separate window. The preview shows builds of the chain; the builds with automatic triggering configured are marked with ths icon: <img alt="v.png" title="v.png" src="/help/img/teamcity/2019.1/v.png" id="df9426d5" width="17" height="18" class="inline-icon-17">.</p><p id="9fd17dd2"><figure><img alt="Preview of snapshot dependencies" title="Preview of snapshot dependencies" src="/help/img/teamcity/2019.1/snapshotDepPreview.png" id="0622cafe" width="1550" height="613"></figure></p><aside class="note " data-title="" rel="9fd17dd2" id="7c9be94e"><p id="e93c4e31">If build configurations in a chain use feature branches, the <a href="working-with-feature-branches.html#Logical-branch-name">logical names</a> of the branches are also represented as build labels on the chain graph. Note that these names <a href="working-with-feature-branches.html#Dependencies">may differ</a> from the VCS roots actually used for the builds: if a build uses a default branch but depends on a build that uses a non-default branch, the label of the dependency build will reflect this. For example, if build A uses the default branch "master" but depends on build B that uses branch "v1.1", both builds will be labeled with "v1.1".</p></aside></div><a name="BuildChainstabofProjectHomeandBuildConfigurationHomepages"></a><a name="Build-Chains-tab-of-Project-Home-and-Build-Configuration-Home-pages"></a><div class="chapter"><h3 id="BuildChain-BuildChainstabofProjectHomeandBuildConfigurationHomepages">Build Chains tab of Project Home and Build Configuration Home pages</h3><p id="bc8aa0fe">You can review build chains on both project and build configuration pages: each of those pages has a <b id="2af77392">Build Chains</b> tab appearing when snapshot dependencies are configured.</p><p id="a1590b56">The tab displays the list of build chains that contain builds of this project or this build configuration with the ability to filter them. Note that build chains are sorted so that the build chain with the last finished build appears at the top of the list.</p><p id="9d3e46b7">The pie-chart icon displays the ratio of the statuses for builds that are parts of the chains. On hovering over the pie chart, the details are displayed:</p><p id="838fb8ee"><figure><img alt="Collapsed build chains" title="Collapsed build chains" src="/help/img/teamcity/2019.1/buildChainsCollapsed.png" id="97195cc3" width="1573" height="509"></figure></p><p id="aeee5550">When a chain is expanded, the following information is also available:</p><ul class="list _ul"><li class="list__item" id="69fc20eb"><p>all builds this build chain is comprised of</p></li><li class="list__item" id="72244929"><p>status of these builds: not triggered, in queue, running or finished and its details</p></li><li class="list__item" id="692b3f6f"><p>the chain displays builds in order of actual execution, i.e. builds that start first are on the left.</p></li></ul><p id="80fb5605">Clicking a build in a chain highlights the selected build and all its direct dependencies. This page:</p><ul class="list _ul"><li class="list__item" id="080b3c71"><p>provides a compact representation of chains: if several top builds triggered the same chain of dependent builds, TeamCity displays one build chain with several top builds.</p></li><li class="list__item" id="e0877a84"><p>has additional display options: Group by projects and Hide details.</p></li><li class="list__item" id="121866ad"><p>transitively highlights all the downstream/upstream builds when a build is selected in a build chain.</p></li></ul><p id="e38577c5">From this page you can also:</p><ul class="list _ul"><li class="list__item" id="919e20e5"><p>Continue a chain, if there are yet "not triggered" builds. Click the <b id="31271b94">Run</b> button and a new build will be started on the chain revisions and associated with builds from this chain.</p></li><li class="list__item" id="1a73cea4"><p>Click <img alt="custom_build(1).png" title="custom_build(1).png" src="/help/img/teamcity/2019.1/custom_build_1.png" id="07485c9a" width="14" height="14" class="inline-icon-14">  to open the <a href="triggering-a-custom-build.html">custom build dialog</a> with build chain revisions preselected. This action can be used if you want to re-run some build in the chain.</p></li></ul></div><a name="Dependenciestabofbuildresultspage"></a><a name="Dependencies-tab-of-build-results-page"></a><div class="chapter"><h3 id="BuildChain-Dependenciestabofbuildresultspage">Dependencies tab of build results page</h3><p id="c8e95c9f">If dependencies are configured, you can view their details on the build results page, the <b id="bc39d32d">Dependencies</b> tab. This tab also displays indirect dependencies, for example, if a build A depends on a build B which depends on builds C and D, then these builds C and D are indirect dependencies for build A.<br>The tab also displays artifacts downloaded and delivered by the builds of the chain. It also allows grouping/ungrouping builds and highlighting the builds reused from previous chains (<a href="snapshot-dependencies.html#Suitable-Builds">suitable builds</a>).</p><hr id="0636a6f8"><p id="43e32467"><b id="4a3fa826">See also:</b></p><p id="b98b5991"><b id="d07ba6e5">Concepts</b>: <a href="dependent-build.html">Dependent Build</a><br><b id="a30b8d58">Administrator's Guide</b>: <a href="configuring-dependencies.html">Configuring Dependencies</a> | <a href="build-dependencies-setup.html">Build Dependencies Setup</a></p><hr id="a9d2d95d"></div></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>