<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Reporting Issues - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Reporting Issues" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/troubleshooting.md|Troubleshooting/reporting-issues.md|Reporting Issues" data-main-title="Reporting Issues" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/reporting-issues.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Reporting Issues" id="reporting-issues.md">Reporting Issues</h1><p id="a6386da7">If you experience problems running TeamCity and believe they are related to the software, please <a href="troubleshooting.html">contact us</a> with a detailed description of the issue.</p><p id="8f6b7f31">To fix a problem, we may need a wide range of information about your system as well as various logs. The section below explains how to collect such information for different issues.</p><p id="0075ade6">In this section:</p><p id="7e3814f0"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#ReportingIssues-BestPracticesWhenReportingIssues">Best Practices When Reporting Issues</a></li><li class="list__item"><a href="#ReportingIssues-Slowness,HangingsandLowPerformance">Slowness, Hangings and Low Performance</a><ul class="list _bullet"><li class="list__item"><a href="#ReportingIssues-ServerThreadDump">Server Thread Dump</a></li><li class="list__item"><a href="#ReportingIssues-CollectingCPUProfilingDataonServer">Collecting CPU Profiling Data on Server</a></li><li class="list__item"><a href="#ReportingIssues-AgentThreadDump">Agent Thread Dump</a></li><li class="list__item"><a href="#ReportingIssues-TakingThreadDump">Taking Thread Dump</a><ul class="list _bullet"><li class="list__item"><a href="#ReportingIssues-UnderWindows">Under Windows</a></li><li class="list__item"><a href="#ReportingIssues-UnderLinux">Under Linux</a></li></ul></li><li class="list__item"><a href="#ReportingIssues-Database-relatedSlowdowns">Database-related Slowdowns</a><ul class="list _bullet"><li class="list__item"><a href="#ReportingIssues-MySQL">MySQL</a></li></ul></li></ul></li><li class="list__item"><a href="#ReportingIssues-OutOfMemoryProblems">OutOfMemory Problems</a></li><li class="list__item"><a href="#ReportingIssues-&#34;Toomanyopenfiles&#34;Error">"Too many open files" Error</a></li><li class="list__item"><a href="#ReportingIssues-Agentdoesnotconnecttotheserver">Agent does not connect to the server</a></li><li class="list__item"><a href="#ReportingIssues-Loggingevents">Logging events</a><ul class="list _bullet"><li class="list__item"><a href="#ReportingIssues-VersionControldebuglogging">Version Control debug logging</a><ul class="list _bullet"><li class="list__item"><a href="#ReportingIssues-Subversiondebuglogging">Subversion debug logging</a></li><li class="list__item"><a href="#ReportingIssues-ClearCase">ClearCase</a></li></ul></li></ul></li><li class="list__item"><a href="#ReportingIssues-PatchApplicationProblems">Patch Application Problems</a></li><li class="list__item"><a href="#ReportingIssues-Loggingfor.NETRunners">Logging for .NET Runners</a></li><li class="list__item"><a href="#ReportingIssues-RemoteRunProblems">Remote Run Problems</a></li><li class="list__item"><a href="#ReportingIssues-LogginginIntelliJIDEA/Platform-basedIDEs">Logging in IntelliJ IDEA/Platform-based IDEs</a><ul class="list _bullet"><li class="list__item"><a href="#ReportingIssues-OpeninIDEFunctionalityLogging">Open in IDE Functionality Logging</a></li><li class="list__item"><a href="#ReportingIssues-NoSuitableBuildConfigurationsFoundforRemoteRun">No Suitable Build Configurations Found for Remote Run</a></li></ul></li><li class="list__item"><a href="#ReportingIssues-LogginginTeamCityEclipseplugin">Logging in TeamCity Eclipse plugin</a></li><li class="list__item"><a href="#ReportingIssues-TeamCityVisualStudioAddinissues">TeamCity Visual Studio Addin issues</a><ul class="list _bullet"><li class="list__item"><a href="#ReportingIssues-TeamCityAddinlogging">TeamCity Addin logging</a></li><li class="list__item"><a href="#ReportingIssues-VisualStudiologging">Visual Studio logging</a></li></ul></li><li class="list__item"><a href="#ReportingIssues-dotCoverIssues">dotCover Issues</a></li><li class="list__item"><a href="#ReportingIssues-JVMCrashes">JVM Crashes</a></li><li class="list__item"><a href="#ReportingIssues-BuildLogIssues">Build Log Issues</a></li><li class="list__item"><a href="#ReportingIssues-IntelliJIDEAInspections">IntelliJ IDEA Inspections</a></li><li class="list__item"><a href="#ReportingIssues-UploadingLargeDataArchives">Uploading Large Data Archives</a></li></ul></p><a name="BestPracticesWhenReportingIssues"></a><a name="Best-Practices-When-Reporting-Issues"></a><div class="chapter"><h2 id="ReportingIssues-BestPracticesWhenReportingIssues">Best Practices When Reporting Issues</h2><p id="909ba08a">Following these guidelines will ensure timely response and effective issue resolution. Check <a href="https://confluence.jetbrains.com/display/TW/Feedback" data-external="true" target="_blank" rel="noopener noreferrer">Feedback</a> for appropriate ways to contact us.</p><aside class="note " data-title="" rel="909ba08a" id="814504a7"><ul class="list _ul"><li class="list__item" id="0d44c612"><p>if you have issue with your build logic, make sure it is a TeamCity-related issue (i.e. it does not <a href="common-problems.html#Build-works-locally-but-fails-or-misbehaves-in-TeamCity">reproduce in the same environment</a> without TeamCity) and include details of your investigation</p></li><li class="list__item" id="cc92a79e"><p>note the <b id="8b8aa66c">TeamCity version</b> in use, including the build number (can be found in the footer and the teamcity-server.log). Consider checking if the issue is still relevant in the most recent TeamCity version;</p></li><li class="list__item" id="d50c20ca"><p>update previous postings of yours on the topic instead of creating new ones, if you still create a duplicate make sure to note all previous postings on the same topic you have made or found;</p></li><li class="list__item" id="fda04f41"><p>post one issue per submission, post the most important issue first, or post several issues noting others if they are related;</p></li><li class="list__item" id="99d25f55"><p>note the pattern of issue occurrence (first time, recurring), how it was mitigated before, whether there were any recent environment changes;</p></li><li class="list__item" id="1a342cd1"><p>be specific: note exact times, error messages, and so on;</p></li><li class="list__item" id="aa112268"><p>describe the expected and actual behavior;</p></li><li class="list__item" id="0dfbeaae"><p>detail the related settings configured in TeamCity (include screenshots, settings files, actual values, <a href="rest-api.html">REST API</a> entity representations);</p></li><li class="list__item" id="60a5935a"><p>include related <b id="387d9655">screenshots</b> of the TeamCity UI (always include the entire page and the browser URL in the capture);</p></li><li class="list__item" id="283d24aa"><p>include related text messages as text (not as image), include the messages with all the details;</p></li><li class="list__item" id="205091a0"><p>when reporting build procedure issues, try to <a href="common-problems.html#Build-works-locally-but-fails-or-misbehaves-in-TeamCity">reproduce</a> them without TeamCity on the agent machine in the same environment and let us know the results;</p></li><li class="list__item" id="0d132831"><p>do not include large portions (above 10Kb) of the textual data into the email text, rather attach it in a file;</p></li><li class="list__item" id="c9256a7d"><p>attach/<a href="#Uploading-Large-Data-Archives">upload</a> archive with TeamCity <b id="c030e13b">server logs</b> (see <a href="teamcity-server-logs.html">details</a>, ideally, the entire &lt;server home&gt;\logs directory with all the directories inside. If impractical, all the files updated around or later than the issue time); if related to the build-time or agent behavior, attach the entire &lt;agent home&gt;\logs directory;</p></li><li class="list__item" id="45fc4161"><p>if specific builds are affected, include the build logs (downloaded via dedicated link from the build results' Build Log tab);</p></li><li class="list__item" id="5f696310"><p>for performance/slowness/delays issues, take a set of (10+ spread across the issue time) server or agent <a href="#Server-Thread-Dump">thread dumps</a> during the issue occurrence and make sure to send us the dumps with the <a href="#Server-Thread-Dump">related data</a>;</p></li><li class="list__item" id="eb973183"><p>when sending files greater than 500Kb in size or more than three files, package them into a single archive;</p></li><li class="list__item" id="9f92d944"><p>when replacing/masking data in logs, note the replacements patterns used;</p></li><li class="list__item" id="01748ea4"><p>note if there is an anti-virus installed and if there is a network proxy or reverse proxy in front of the TeamCity server;</p></li><li class="list__item" id="2e836a4e"><p>when relevant, note the OS, versions of any manually installed components like Java, the TeamCity distribution used (.exe, .tar.gz)</p></li><li class="list__item" id="be4aa550"><p>note any customizations/not standard environment settings;</p></li><li class="list__item" id="8fc24163"><p>list any non-bundled plugins installed;</p></li><li class="list__item" id="1352ad92"><p>if any, note the previous manual modifications of the TeamCity Data Directory or the database;</p></li><li class="list__item" id="72d42647"><p>when suggesting an improvement or feature or asking for settings advice, detail <i id="e9279a84">why</i> you need the feature and what the <b id="f12f2f01">original goal</b> you want to achieve is. Suggestions as to <i id="dc1c5126">how</i> you would like to see the feature are welcome too;</p></li><li class="list__item" id="e2054435"><p>check the sections below for common cases and specific information to collect and send to us.</p></li></ul></aside></div><a name="Slowness,HangingsandLowPerformance"></a><a name="Slowness,-Hangings-and-Low-Performance"></a><div class="chapter"><h2 id="ReportingIssues-Slowness,HangingsandLowPerformance">Slowness, Hangings and Low Performance</h2><p id="5682c3a7">If TeamCity is running slower than you would expect, please use the notes below to locate the slow process and send us all the relevant details if the process is a TeamCity one.</p><a name="DetermineWhichProcessIsSlow"></a><a name="Determine-Which-Process-Is-Slow"></a><h4 id="ReportingIssues-DetermineWhichProcessIsSlow">Determine Which Process Is Slow</h4><p id="f01f4ce9">If you experience a slow TeamCity web UI response, checking for changes process, server-side sources checkout, long cleanup times or other slow server activity, your target should be the machine where the TeamCity server is installed.<br>If the issue is related only to a single build, you will need to investigate the TeamCity agent machine, which is running the build, and the server.</p><p id="4c736c7e">Investigate the system resources (CPU, memory, IO) load. If there is a high load, determine the process causing it. If it is not a TeamCity-related process, that might need addressing outside of the TeamCity scope. Also check for generic slow-down reasons like anti-virus software, maintenance time, and so on.</p><p id="b358aedc">If it is the TeamCity server that is loading the CPU/IO or there is no substantial CPU/IO load and everything runs just fine except for TeamCity, then this is to be investigated further.</p><p id="bea012ab">Check if you have any <a href="known-issues.html#Conflicting-Software">Conflicting Software</a> like anti-virus running on the machine and disable/uninstall it.</p><p id="c21ba941">Check that the database used by TeamCity and the file storage of the TeamCity Data Directory do not have performance issues.</p><p id="ca506135">If you have a substantial TeamCity installation, check your <a href="installing-and-configuring-the-teamcity-server.html#Setting-Up-Memory-settings-for-TeamCity-Server">memory settings</a> as the first step.</p><a name="CollectData"></a><a name="Collect-Data"></a><h4 id="ReportingIssues-CollectData">Collect Data</h4><p id="465abe23">During the slow operation, take several thread dumps of the slow process (see below for thread dump taking approaches) with 5-10 seconds interval. If the slowness continues, take several more thread dumps (for example, 3-5 within several minutes) and then repeat after some time (for example, 10 minutes) while the process is still being slow.</p><p id="a7491e53">Then <a href="https://confluence.jetbrains.com/display/TW/Feedback" data-external="true" target="_blank" rel="noopener noreferrer">send</a> us a detailed description of the issue accompanied with the thread dumps and full server (or agent) <a href="#Logging-events">logs</a> covering the issue. Unless it is undesirable for some reason, the preferred way is to file an issue into our <a href="http://youtrack.jetbrains.com/issues/TW" data-external="true" target="_blank" rel="noopener noreferrer">issue tracker</a> and let us know via support email. Please include all the relevant details of investigation, including the CPU/IO load information, what specifically is slow and what is not, note affected URLs, visible effects, and so on. For large amounts of data, use <a href="#Uploading-Large-Data-Archives">our file upload</a> service to share the archives with us.</p><a name="ServerThreadDump"></a><a name="Server-Thread-Dump"></a><div class="chapter"><h3 id="ReportingIssues-ServerThreadDump">Server Thread Dump</h3><p id="9237b239">When an operation on the server is slow, take a set of the server thread dumps (10+) spread over the time of the slowness. TeamCity automatically saves thread dumps on super slow operations, so there might already be some saved in <code class="code">logs/threadDumps-&lt;date&gt;</code> directories. It is recommended to send us an archive of the entire content of server's  <code class="code">&lt;</code><a href="teamcity-home-directory.html"><code class="code">TeamCity Home</code></a><code class="code">&gt;/logs/threadDumps-&lt;date&gt;</code> directories for all the recent dates.</p><p id="ecff66a5">It is recommended that you take a thread dump of the TeamCity server from the Web UI if the hanging is local and you can still open the TeamCity <b id="47795ae7">Administration</b> pages: go to the <b id="4709df06">Administration</b> | <b id="64b28d88">Server Administration</b> | <b id="19bf32b1">Diagnostics</b> page and click the <b id="e080bef0">Save Thread Dump</b> button to save a dump under the <code class="code">&lt;</code><a href="teamcity-home-directory.html"><code class="code">TeamCity Home</code></a><code class="code">&gt;/logs/threadDumps-&lt;date&gt;</code> directory (where you can later download the files from "Server Logs"). If the server is fully started but the web UI is not responsive, try the <a href="http://YOUR_TEAMCITY_SERVER_URL/admin/diagnostic.html?actionName=threadDump&amp;save=false" data-external="true" target="_blank" rel="noopener noreferrer">direct URL</a> using the actual URL of your TeamCity server.</p><p id="e9f83d64">If the UI is not accessible (or the server is not yet fully started), you can take a server thread dump manually using the approaches described <a href="#Taking-Thread-Dump">below</a>.</p><p id="bf82d087">You can also adjust the <code class="code">teamcity.diagnostics.requestTime.threshold.ms=30000</code> <a href="configuring-teamcity-server-startup-properties.html#TeamCity-internal-properties">internal property</a> to change the timeout after which a thread dump is automatically created in the <code class="code">threadDumps-&lt;date&gt;</code> directory under TeamCity logs whenever there is a user-originated web request taking longer than timeout.</p></div><a name="CollectingCPUProfilingDataonServer"></a><a name="Collecting-CPU-Profiling-Data-on-Server"></a><div class="chapter"><h3 id="ReportingIssues-CollectingCPUProfilingDataonServer">Collecting CPU Profiling Data on Server</h3><p id="096eb94e">If you experience degraded server performance and the TeamCity server process is producing a large CPU load, take a CPU profiling snapshot and send it to us accompanied with the detailed description of what you were doing and what your system setup is. You can take CPU profiling and memory snapshots by installing the <a href="https://plugins.jetbrains.com/plugin/8979-server-profiling" data-external="true" target="_blank" rel="noopener noreferrer">server profiling plugin</a> and following the instructions on the plugin page.</p><p id="c65cb349">Here are some hints to get the best results from CPU profiling:</p><ul class="list _ul"><li class="list__item" id="9a833b46"><p>after starting the server, wait for some time to allow it to "warm up". This can take from 5 to 20 minutes depending on the data volume that TeamCity stores.</p></li><li class="list__item" id="10b5d982"><p>when a CPU usage increase is found on the server, try to indicate what actions cause the load.</p></li><li class="list__item" id="bb4044ff"><p>start CPU profiling and repeat the action several times (5 - 10).</p></li><li class="list__item" id="7bf89182"><p>capture a snapshot.</p></li><li class="list__item" id="6346aac4"><p>archive the snapshot and send it to us including the description of the actions that cause the CPU load.</p></li></ul></div><a name="AgentThreadDump"></a><a name="Agent-Thread-Dump"></a><div class="chapter"><h3 id="ReportingIssues-AgentThreadDump">Agent Thread Dump</h3><p id="9a523b58">It is recommended that you take an agent thread dump from the Web UI: go to the Agent page, <b id="88d8b854">Agent Summary</b> tab, and use the <b id="eb9838c9">Dump threads on agent</b> action.</p><p id="38eea9a4">If the UI is not accessible, you can take the dump thread manually using the approaches described <a href="#Taking-Thread-Dump">below</a>. Note that the TeamCity agent consists of two <code class="code">java</code> processes: the launcher and agent itself. The agent is triggered by the launcher. You will usually be interested in the agent (nested) process and not the launcher one.</p></div><a name="TakingThreadDump"></a><a name="Taking-Thread-Dump"></a><div class="chapter"><h3 id="ReportingIssues-TakingThreadDump">Taking Thread Dump</h3><p id="abf6dd22">These can help if you are unable to take a thread dump from the TeamCity web UI.</p><p id="c663f316">To take a thread dump:</p><a name="UnderWindows"></a><a name="Under-Windows"></a><div class="chapter"><h4 id="ReportingIssues-UnderWindows">Under Windows</h4><p id="174a4c39">You have several options:</p><ul class="list _ul"><li class="list__item" id="347b78b2"><p>To take a server thread dump if the server is run from the console, press <b id="90c8dd15">Ctrl+Break</b> (Ctrl+Pause on some keyboards) in the console window (this will not work for an agent, since its console belongs to the launcher process). If the server is run as a service, try running it from console by logging under the same use as configured in the service and executing <code class="code">&lt;TeamCity server home&gt;\bin\teamcity-server.bat run</code> command.Another approach is to figure out the process id of the TeamCity server process (it's the top-most "java" proces with "org.apache.catalina.startup. Bootstrap  start" at the end og the command line and use of the following approaches:</p></li><li class="list__item" id="329e6455"><p>run <code class="code">jstack &lt;pid_of_java_process&gt;</code> in the bin directory of the Java installation used to by the process (the Java home can be looked up in the process command line. If the installation does not have jstack utility, you might need to get the java version via java -version command, download full JDK of the same version and use "jstack" utility form there). You might also need to supply <code class="code">-F</code> flag to the command.</p></li><li class="list__item" id="4c87f6a1"><p>use TeamCity-bundled agent thread dump tool (can be found in the agent's plugins). Run the command:</p></li></ul><div class="code-block" data-lang="bash">
&lt;TeamCity agent&gt;\plugins\stacktracesPlugin\bin\x86\JetBrains.TeamCity.Injector.exe &lt;pid_of_java_process&gt;

</div><p id="13376a5b">Note that if the hanging process is run as a service, the thread dumping tool must be run from a console with elevated permissions (using Run as Administrator). If the service is run under System account, you might also need to launch the thread dumping tools via <a href="http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx" data-external="true" target="_blank" rel="noopener noreferrer">PsExec.exe</a><code class="code">-s &lt;path to the tool&gt;\&lt;tool&gt; &lt;options&gt;</code>. When the service is run under a regular user, wrapping the tool invocation in "<code class="code">PsExec.exe -u &lt;user&gt; -p &lt;password&gt; &lt;path to the tool&gt;\&lt;tool&gt; &lt;options&gt;</code> might also help.</p><p id="384103f9">If neither of these work for the server running as a service, try <a href="installing-and-configuring-the-teamcity-server.html#Starting-TeamCity-server">running the server</a> from console and not as a service. This way the first (Ctrl+Break) option can be used.</p></div><a name="UnderLinux"></a><a name="Under-Linux"></a><div class="chapter"><h4 id="ReportingIssues-UnderLinux">Under Linux</h4><ul class="list _ul"><li class="list__item" id="4b55e592"><p>run <code class="code">jstack &lt;pid_of_java_process&gt;</code> (using jstack from the Java installation as used by the process) or <code class="code">kill -3 &lt;pid_of_java_process&gt;</code>. In the latter case output will appear in <code class="code">&lt;</code><a href="teamcity-home-directory.html"><code class="code">TeamCity Home</code></a><code class="code">&gt;logs/catalina.out</code> or <code class="code">&lt;</code><a href="agent-home-directory.html"><code class="code">TeamCity agent home</code></a><code class="code">&gt;/logs/error.log</code>.</p></li></ul><p id="654e5a55">See also <a href="#Determine-Which-Process-Is-Slow">Server Performance</a> section above.</p></div></div><a name="Database-relatedSlowdowns"></a><a name="Database-related-Slowdowns"></a><div class="chapter"><h3 id="ReportingIssues-Database-relatedSlowdowns">Database-related Slowdowns</h3><p id="71062722">When the server is slow, check if the problem is caused by database operations.It is recommended to use database-specific tools.</p><p id="144dbc59">You can also use the <code class="code">debug-sql</code> server <a href="teamcity-server-logs.html#Logging-related-Diagnostics-UI">logging preset</a>. Upon enabling, all the queries which take longer 1 second will be logged into the <code class="code">teamcity-sql.log</code> file. The time can be changed by setting the <code class="code">teamcity.sqlLog.slowQuery.threshold</code> <a href="configuring-teamcity-server-startup-properties.html#TeamCity-internal-properties">internal property</a>. The value should be set in milliseconds and is 1000 by default.</p><a name="MySQL"></a><a name="MySQL"></a><div class="chapter"><h4 id="ReportingIssues-MySQL">MySQL</h4><p id="2fbb7413">Along with the server thread dump, make sure to attach the output of the <code class="code">show processlist;</code> SQL command executed in MySQL console. Like with thread dumps, it makes sense to execute the command several times if slowness occurred and send us the output. Also, MySQL can be set up to keep a log of long queries executed with the changes in <code class="code">my.ini</code>:</p><div class="code-block" data-lang="bash">
[mysqld]
...
log-slow-queries
long_query_time=15

</div><p id="8614d442">The log can also be sent to us for analysis.</p></div></div></div><a name="OutOfMemoryProblems"></a><a name="OutOfMemory-Problems"></a><div class="chapter"><h2 id="ReportingIssues-OutOfMemoryProblems">OutOfMemory Problems</h2><p id="ddd1b540">If you experience problems with TeamCity consuming too much memory or "OutOfMemoryError"/"Java heap space" errors in the log, do the following:</p><ul class="list _ul"><li class="list__item" id="f660db62"><p>Determine what process encounters the error (the actual building process, the TeamCity server, or the TeamCity agent). You can track memory and CPU usage by TeamCity with the charts on the <b id="6a8f83c3">Administration | Server Administration | Diagnostics</b> page of your TeamCity web UI.</p></li><li class="list__item" id="72d1b6f3"><p>If the server is to blame, check you have increased memory settings from the default ones for using the server in production (see the <a href="installing-and-configuring-the-teamcity-server.html#Setting-Up-Memory-settings-for-TeamCity-Server">section</a>).</p></li><li class="list__item" id="d8439982"><p>If the build process is to blame, set "JVM Command Line Parameters" settings in the build runner. Increase the value for the <code class="code">-Xmx</code> JVM option: for instance, <code class="code">-Xmx1200m</code>. Note that Java Inspections builds may specifically need increasing the <code class="code">-Xmx</code> value.</p></li><li class="list__item" id="a434b4b8">If the TeamCity server is to blame and increasing the memory size does not help, please report the case for us to investigate. For this, while the server is high on memory consumption, take several server thread dumps as described <a href="#Taking-Thread-Dump">above</a>, get the memory dump (see below) and all the server logs including <code class="code">threadDumps-*</code> sub-directories, archive the results, and <a href="#Uploading-Large-Data-Archives">send them</a> to us for further analysis. Make sure that the <code class="code">-Xmx</code> setting is less than 8Gb before getting the dump:<ul class="list _ul"><li class="list__item" id="37e9b589"><p id="35d771a5">if a memory dump (<code class="code">hprof</code> file) is created automatically, the <code class="code">java\_xxx.hprof</code> file is created in the process startup directory (&lt;<a href="teamcity-home-directory.html">TeamCity Home</a>&gt;/bin or &lt;<a href="agent-home-directory.html">TeamCity Agent home</a>&gt;/bin`);</p></li><li class="list__item" id="3f6145a4"><p id="79848887">for the server, you can also take memory dump manually when the memory usage is at its peak. Go to the <b id="36bddb07">Administration | Server Administration | Diagnostics</b> page of your TeamCity web UI and click <b id="bb158a3c">Dump Memory Snapshot</b>.</p></li><li class="list__item" id="1e46fa58"><p id="48802022">another approach to take a memory dump manually is to use the <code class="code">jmap</code> standard JVM command line utility of the full JVM installation of the same version as the Java used by the process. Example command line is:</p><div class="code-block" data-lang="bash">jmap -dump:file=&lt;file_on_disk_to_save_dump_into&gt;.hprof &lt;pid_of_the_process&gt;
</div></li></ul></li></ul><p id="9c77e067">See how to change JVM options for the <a href="configuring-teamcity-server-startup-properties.html#JVM-Options">server</a> and for <a href="configuring-build-agent-startup-properties.html#Agent-Properties">agents</a>.</p></div><a name="&#34;Toomanyopenfiles&#34;Error"></a><a name="&#34;Too-many-open-files&#34;-Error"></a><div class="chapter"><h2 id="ReportingIssues-&#34;Toomanyopenfiles&#34;Error">"Too many open files" Error</h2><ol class="list _decimal"><li class="list__item" id="180fa6f0"><p>Determine what computer it occurs on</p></li><li class="list__item" id="a89bc616"><p>Determine the process which has opened a lot of files and the files list (on Linux use <code class="code">lsof</code>, on Windows you can use <a href="http://technet.microsoft.com/en-us/sysinternals/bb896655" data-external="true" target="_blank" rel="noopener noreferrer">handle</a> or <a href="http://technet.microsoft.com/en-us/sysinternals/bb897437.aspx" data-external="true" target="_blank" rel="noopener noreferrer">TCPView</a> for listing sockets)</p></li><li class="list__item" id="283702ca"><p>If the number is under thousands, check the OS and the process limits on the file handles (on Linux use <code class="code">ulimit -n</code>) and increase them if necessary. Note that default Linux 1024 handles per process is way too small for a server application like TeamCity. Increase the number to at least 16000. Check the actual process limits after the change as there are different settings in the OS for settings global and per-session limits (e.g. see the <a href="http://stackoverflow.com/questions/13988780/too-many-open-files-ulimit-already-changed" data-external="true" target="_blank" rel="noopener noreferrer">post</a>)</p></li></ol><p id="eb63c2d3">If the number of files is large and looks suspicious and the locking process is a TeamCity one (the TeamCity agent or server with no other web applications running), then, while the issue is still occurring, grab the list of open handles several times with several minutes interval and send the result to us for investigation together with the relevant details.</p><p id="313a386a">Note that you will most probably need to reboot the machine with the error after the investigation to restore normal functioning of the applications.</p></div><a name="Agentdoesnotconnecttotheserver"></a><a name="Agent-does-not-connect-to-the-server"></a><div class="chapter"><h2 id="ReportingIssues-Agentdoesnotconnecttotheserver">Agent does not connect to the server</h2><p id="13e948f9">Please refer to <a href="common-problems.html#Started-Build-Agent-is-not-available-on-the-server-to-run-builds">Common Problems</a></p></div><a name="Loggingevents"></a><a name="Logging-events"></a><div class="chapter"><h2 id="ReportingIssues-Loggingevents">Logging events</h2><p id="08f60119">The TeamCity server and agent create logs that can be used to investigate issues.</p><aside class="note " data-title="" rel="08f60119" id="4d18803f"><p id="6932ede3">Before reproducing the problem it makes sense to enable 'DEBUG' log level for TeamCity classes. On the server side, go to the <b id="c0ded3a1">Administration</b> | <b id="6fe80ca8">Server Administration</b> | <b id="6cc79eb8">Diagnostics</b> page and select logging preset (<code class="code">debug-all</code>, <code class="code">debug-vcs</code>, etc).After that, DEBUG messages will go to <code class="code">teamcity-*.log</code> files (<a href="teamcity-server-logs.html">read more</a>).</p></aside><p id="3ca1133f">For detailed information, refer to the corresponding sections:</p><ul class="list _ul"><li class="list__item" id="8c6dd787"><a href="teamcity-server-logs.html">TeamCity Server Logs</a></li><li class="list__item" id="229597c3"><a href="viewing-build-agent-logs.html">Viewing Build Agent Logs</a></li></ul><a name="VersionControldebuglogging"></a><a name="Version-Control-debug-logging"></a><div class="chapter"><h3 id="ReportingIssues-VersionControldebuglogging">Version Control debug logging</h3><aside class="note " data-title="" rel="ReportingIssues-VersionControldebuglogging" id="e0467c26"><p id="e7f22202">To enable VCS logging on the server side, <a href="teamcity-server-logs.html">switch logging preset</a> to "debug-vcs" in administration web UI and then retrieve <code class="code">logs/teamcity-vcs.log</code> log file.</p></aside><p id="19947a98">Most VCS operations occur on the TeamCity server, but if you're using the <a href="vcs-checkout-mode.html#agent-checkout">agent-side checkout</a>, VCS checkout occurs on the build agents.</p><p id="444b0be0">For the agent and the server, you can change the Log4j configuration manually in <code class="code">&lt;</code><a href="teamcity-home-directory.html"><code class="code">TeamCity Home</code></a><code class="code">&gt;/conf/teamcity-server-log4j.xml</code> or <code class="code">&lt;</code><a href="agent-home-directory.html"><code class="code">BuildAgent home</code></a><code class="code">&gt;/conf/teamcity-agent-log4j.xml</code> files to include the following fragment:</p><div class="code-block" data-lang="bash">
&lt;category name="jetbrains.buildServer.VCS" additivity="false"&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;appender-ref ref="ROLL.VCS"/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;appender-ref ref="CONSOLE-ERROR"/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;priority value="DEBUG"/&gt;
&lt;/category&gt;
&nbsp;
&lt;category name="jetbrains.buildServer.buildTriggers.vcs" additivity="false"&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;appender-ref ref="ROLL.VCS"/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;appender-ref ref="CONSOLE-ERROR"/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;priority value="DEBUG"/&gt;
&lt;/category&gt;

</div><p id="98b14c1d">Be sure to update the <code class="code">&lt;appender name="ROLL.VCS"&gt;</code> node to increase the number of the files to store:</p><div class="code-block" data-lang="bash">
    &lt;param name="maxBackupIndex" value="30"/&gt;

</div><p id="8631b4d0">If there are separate logging options for specific version controls, they are described below.</p><a name="Subversiondebuglogging"></a><a name="Subversion-debug-logging"></a><div class="chapter"><h4 id="ReportingIssues-Subversiondebuglogging">Subversion debug logging</h4><aside class="note " data-title="" rel="ReportingIssues-Subversiondebuglogging" id="cefeaf95"><p id="87c60d93">To enable SVN logging on the server side, <a href="teamcity-server-logs.html">switch the logging preset</a> to "debug-SVN" in the administration web UI and then retrieve the <code class="code">logs/teamcity-vcs.log</code> and <code class="code">logs/teamcity-svn.log</code> files.</p></aside><p id="1724c13a">An alternative manual approach is also necessary for agent-side logging.</p><p id="782e871e">First, enable the generic VCS debug logging, as described <a href="#Version-Control-debug-logging">above</a>.</p><p id="d82032b8">Uncomment the SVN-related parts (the <code class="code">SVN.LOG</code> appender and <code class="code">javasvn.output</code> category) of the Log4j configuration file on the server and on the agent (if the <a href="vcs-checkout-mode.html#agent-checkout">agent-side checkout</a> is used). The log will be saved to the <code class="code">logs/teamcity-svn.log</code> file. Generic VCS log should be also taken from <code class="code">logs/teamcity-vcs.log</code></p></div><a name="ClearCase"></a><a name="ClearCase"></a><div class="chapter"><h4 id="ReportingIssues-ClearCase">ClearCase</h4><p id="f0eac822">Uncomment the Clearcase-related lines in the <code class="code">&lt;</code><a href="teamcity-home-directory.html"><code class="code">TeamCity Home</code></a><code class="code">&gt;/conf/teamcity-server-log4j.xml</code> file. The log will be saved to <code class="code">logs/teamcity-clearcase.log</code> directory.</p></div></div></div><a name="PatchApplicationProblems"></a><a name="Patch-Application-Problems"></a><div class="chapter"><h2 id="ReportingIssues-PatchApplicationProblems">Patch Application Problems</h2><p id="c54a88be">In case the <a href="vcs-checkout-mode.html#server-checkout">server-side checkout</a> is used, the "patch" that is passed from the server to the agent can be retrieved by:</p><ul class="list _ul"><li class="list__item" id="aebca244"><p>add the property <code class="code">system.agent.save.patch=true</code> to the build configuration.</p></li><li class="list__item" id="fa29f58a"><p>trigger the build.the build log and the agent log will contain the line "Patch is saved to file ${file.name}"Get the file and supply it with the problem description.</p></li></ul></div><a name="Loggingfor.NETRunners"></a><a name="Logging-for-.NET-Runners"></a><div class="chapter"><h2 id="ReportingIssues-Loggingfor.NETRunners">Logging for .NET Runners</h2><p id="eee43eaf">To investigate process launch issues for <a href="supported-platforms-and-environments.html#Supported-.NET-platform-build-runners">.NET-related runners</a>, enable debugging as described below. The detailed information will then be printed into the build log. It is recommended not to have the debug logging for a long time and revert the settings after investigation.</p><p id="d310d3a7">Aa alternative way to enable the logging is as follows:Add the <code class="code">teamcity.agent.dotnet.debug=true</code> <a href="configuring-build-parameters.html">configuration parameter</a> in the build configuration or on the agent and run the build.</p><ol class="list _decimal"><li class="list__item" id="f5a33fd5"><p>Open the <code class="code">&lt;</code><a href="agent-home-directory.html"><code class="code">agent home</code></a><code class="code">&gt;/plugins/dotnetPlugin/bin</code> folder.</p></li><li class="list__item" id="69a2d9d5"><p>Make a backup copy of <code class="code">teamcity-log4net.xml</code></p></li><li class="list__item" id="9dad462b"><p>Replace <code class="code">teamcity-log4net.xml</code> with the content of <code class="code">teamcity-log4net-debug.xml</code></p></li></ol><aside class="note " data-title="" rel="7770fa4d" id="ce8a6d38"><p id="b324dee3">After a debug log is created, it is recommended to roll back the change. The change in the <code class="code">teamcity-log4net.xml</code> will be removed on the build agent autoupgrade.</p></aside></div><a name="RemoteRunProblems"></a><a name="Remote-Run-Problems"></a><div class="chapter"><h2 id="ReportingIssues-RemoteRunProblems">Remote Run Problems</h2><p id="fbdc745d">The changes that are sent from the IDE to the server on a <a href="remote-run.html">remote run</a> can be retrieved from the server <code class="code">.BuildServer/system/changes</code> directory. Locate the <code class="code">&lt;change_number&gt;.changes</code> file that corresponds to your change (you can pick the latest number available or deduce the URL of the change from the web UI). The file contains the patch in the binary form. Please send it with the problem description.</p></div><a name="LogginginIntelliJIDEA/Platform-basedIDEs"></a><a name="Logging-in-IntelliJ-IDEA/Platform-based-IDEs"></a><div class="chapter"><h2 id="ReportingIssues-LogginginIntelliJIDEA/Platform-basedIDEs">Logging in IntelliJ IDEA/Platform-based IDEs</h2><p id="71b4947b">To enable debug logging for the <a href="intellij-platform-plugin.html">IntelliJ Platform-based IDE plugin</a>, include the following fragment into the Log4j configuration of the <code class="code">&lt;IDE home&gt;/bin/log.xml</code> file:</p><div class="code-block" data-lang="bash">
&lt;appender name="TC-FILE" class="org.apache.log4j.RollingFileAppender"&gt;
&nbsp;&nbsp;&lt;param name="MaxFileSize" value="10Mb"/&gt;
&nbsp;&nbsp;&lt;param name="MaxBackupIndex" value="10"/&gt;
&nbsp;&nbsp;&lt;param name="file" value="$LOG_DIR$/idea-teamcity.log"/&gt;
&nbsp;&nbsp;&lt;layout class="org.apache.log4j.PatternLayout"&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;param name="ConversionPattern" value="%d [%7r] %6p - %30.30c - %m \n"/&gt;
&nbsp;&nbsp;&lt;/layout&gt;
&lt;/appender&gt;
&nbsp;
&lt;appender name="TC-XMLRPC-FILE" class="org.apache.log4j.RollingFileAppender"&gt;
&nbsp;&nbsp;&lt;param name="MaxFileSize" value="10Mb"/&gt;
&nbsp;&nbsp;&lt;param name="MaxBackupIndex" value="10"/&gt;
&nbsp;&nbsp;&lt;param name="file" value="$LOG_DIR$/idea-teamcity-xmlrpc.log"/&gt;
&nbsp;&nbsp;&lt;layout class="org.apache.log4j.PatternLayout"&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;param name="ConversionPattern" value="%d [%7r] %6p - %30.30c - %m \n"/&gt;
&nbsp;&nbsp;&lt;/layout&gt;
&lt;/appender&gt;
&nbsp;
&lt;category name="jetbrains.buildServer.XMLRPC" additivity="false"&gt;
&nbsp;&nbsp;&lt;priority value="DEBUG"/&gt;
&nbsp;&nbsp;&lt;appender-ref ref="TC-XMLRPC-FILE"/&gt;
&lt;/category&gt;
&nbsp;
&lt;category name="jetbrains.buildServer" additivity="false"&gt;
&nbsp;&nbsp;&lt;priority value="DEBUG"/&gt;
&nbsp;&nbsp;&lt;appender-ref ref="TC-FILE"/&gt;
&lt;/category&gt;

</div><p id="f31de437">After changing this file, restart the IDE. The TeamCity plugin debug logs are saved into <code class="code">idea-teamcity\*</code> files and will appear in the logs directory of the <a href="http://www.jetbrains.com/idea/webhelp/project-and-ide-settings.html#d1270417e197" data-external="true" target="_blank" rel="noopener noreferrer">IDE settings</a> (<code class="code">&lt;IDE settings/Data Directory&gt;/system/log</code> directory).</p><a name="OpeninIDEFunctionalityLogging"></a><a name="Open-in-IDE-Functionality-Logging"></a><div class="chapter"><h3 id="ReportingIssues-OpeninIDEFunctionalityLogging">Open in IDE Functionality Logging</h3><p id="0aa8e1fd">(Applicable to IntelliJ IDEA and Eclipse) Add the following JVM option before starting IDE:<br><code class="code">-Dteamcity.activation.debug=true</code></p><p id="e4cd6696">The logging related to the <b id="49579264">open in IDE</b> functionality will appear in the IDE <i id="19b60225">console</i>.</p></div><a name="NoSuitableBuildConfigurationsFoundforRemoteRun"></a><a name="No-Suitable-Build-Configurations-Found-for-Remote-Run"></a><div class="chapter"><h3 id="ReportingIssues-NoSuitableBuildConfigurationsFoundforRemoteRun">No Suitable Build Configurations Found for Remote Run</h3><p id="0c59d230">First of all, check that your <a href="http://www.jetbrains.com/idea/webhelp/configuring-general-vcs-settings.html" data-external="true" target="_blank" rel="noopener noreferrer">VCS settings in IDEA</a> correspond to the <a href="configuring-vcs-settings.html">VCS settings</a> in TeamCity. If they do not, change them and it should fix the problem.</p><p id="43f0f078">Secondly, check that the build configurations you expect to be suitable with your IDEA project has either <a href="vcs-checkout-mode.html#server-checkout">server-side VCS checkout mode</a> or <a href="vcs-checkout-mode.html#agent-checkout">agent-side checkout</a> and NOT manual VCS checkout mode (it is not possible to apply a personal patch for a build with the manual checkout mode because TeamCity must apply that patch after the VCS checkout is done, but it does not know or manage the time when it is performed).</p><p id="b59ee96f">If the settings are the same and you do not use the manual checkout mode but the problem is there, do the following:</p><ul class="list _ul"><li class="list__item" id="4f359b24"><p>Provide us with your IDEA VCS settings and TeamCity VCS settings (for the build configurations you expect to be suitable with your IDEA project)</p></li><li class="list__item" id="9afb31ce"><p>Enable debug logs for the TeamCity IntelliJ plugin (see <a href="#Logging-in-IntelliJ-IDEA/Platform-based-IDEs">above</a>)</p></li><li class="list__item" id="9ea5ca05"><p>Enable the TeamCity server debug logs (see <a href="#Logging-events">above</a>)</p></li><li class="list__item" id="1ddffe78"><p>In the <a href="intellij-platform-plugin.html">TeamCity IntelliJ plugin</a>, try to start a remote run build</p></li><li class="list__item" id="08b0f32b"><p>Provide us with the debug logs from the TeamCity IntelliJ plugin and from the TeamCity server.</p></li></ul></div></div><a name="LogginginTeamCityEclipseplugin"></a><a name="Logging-in-TeamCity-Eclipse-plugin"></a><div class="chapter"><h2 id="ReportingIssues-LogginginTeamCityEclipseplugin">Logging in TeamCity Eclipse plugin</h2><p id="db0c7d73">To enable tracing for the <a href="eclipse-plugin.html">plugin</a>, run Eclipse IDE with the <code class="code">-debug &lt;filename&gt;</code> command line parameter. The <code class="code">&lt;filename&gt;</code> portion of the argument should be a properties file containing key-value pairs. The name of each property corresponds to the plugin module and the value is either <code class="code">true</code> (to enable debug) or <code class="code">false</code>. Here is an example of enabling most common tracing options:</p><div class="code-block" data-lang="bash">
jetbrains.teamcity.core/debug = true
jetbrains.teamcity.core/debug/communications = false
jetbrains.teamcity.core/debug/ui = true
jetbrains.teamcity.core/debug/vcs = true
jetbrains.teamcity.core/debug/vcs/detail = true
jetbrains.teamcity.core/debug/parser = true
jetbrains.teamcity.core/debug/platform = true
jetbrains.teamcity.core/debug/teamcity = true
jetbrains.teamcity.core/perfomance/vcs = true
jetbrains.teamcity.core/perfomance/teamcity = true

</div><p id="6496ab99">Read more about Eclipse Debug mode <a href="http://www.eclipse.org/eclipse/platform-core/documents/3.1/debug.html" data-external="true" target="_blank" rel="noopener noreferrer">Gathering Information About Your Plug-in</a> and built-in Eclipse help.</p></div><a name="TeamCityVisualStudioAddinissues"></a><a name="TeamCity-Visual-Studio-Addin-issues"></a><div class="chapter"><h2 id="ReportingIssues-TeamCityVisualStudioAddinissues">TeamCity Visual Studio Addin issues</h2><a name="TeamCityAddinlogging"></a><a name="TeamCity-Addin-logging"></a><div class="chapter"><h3 id="ReportingIssues-TeamCityAddinlogging">TeamCity Addin logging</h3><p id="dfc7427f">To capture logs from the TeamCity <a href="visual-studio-addin.html">Visual Studio Addin</a>:</p><ol class="list _decimal"><li class="list__item" id="78d13dc1"><p id="8c3a20ae">Locate the Visual Studio installation directory (in the example below <code class="code">c:\Program Files (x86)\Microsoft Visual Studio\2017\Common7\IDE</code>)</p></li><li class="list__item" id="25806870"><p id="0db84c8a">Run Microsoft Visual Studio executable (<code class="code">INSTALLATION_DIRECTORY\Common7\IDE\devenv.exe</code>) from the command line with the ReSharper-related command line arguments:</p><ul class="list _ul"><li class="list__item" id="3d6fbe0d"><p>For TeamCity VS Add-in as a part of <a href="https://www.jetbrains.com/dotnet/" data-external="true" target="_blank" rel="noopener noreferrer">ReSharper Ultimate</a>, use <code class="code">/ReSharper.LogFile &lt;PATH_TO_FILE&gt;</code> and <code class="code">/ReSharper.LogLevel &lt;Normal|Verbose|Trace&gt;</code> switches<div class="code-block" data-lang="bash">c:\Program Files (x86)\Microsoft Visual Studio\2017\Common7\IDE&gt;devenv.exe /ReSharper.LogFile C:\Users\jetbrains\Desktop\vs.log /ReSharper.LogLevel Verbose
</div></p></li><li class="list__item" id="3a12c543"><p>For the legacy version of TeamCity VS Add-in, use <code class="code">/TeamCity.LogFile &lt;PATH_TO_FILE&gt;</code> and  <code class="code">/TeamCity.LogLevel &lt;Normal|Verbose|Trace&gt;</code> switches</p></li></ul></li></ol></div><a name="VisualStudiologging"></a><a name="Visual-Studio-logging"></a><div class="chapter"><h3 id="ReportingIssues-VisualStudiologging">Visual Studio logging</h3><p id="ac4c1835">To troubleshoot common Visual Studio, run Microsoft Visual Studio executable <code class="code">INSTALLATION_DIRECTORY\Common7\IDE\devenv.exe</code> with the <code class="code">/</code><a href="http://msdn.microsoft.com/en-us/library/ms241272.aspx" data-external="true" target="_blank" rel="noopener noreferrer">Log</a> command Line switch and send us the resulting log file.</p></div></div><a name="dotCoverIssues"></a><a name="dotCover-Issues"></a><div class="chapter"><h2 id="ReportingIssues-dotCoverIssues">dotCover Issues</h2><p id="d37bb639">To collect additional logs generated by <a href="jetbrains-dotcover.html">JetBrains dotCover</a>, add the <code class="code">teamcity.agent.dotCover.log</code> <a href="configuring-build-parameters.html">configuration parameter</a> to the build configuration with a path to an empty directory on the agent. All dotCover log files will be placed there and TeamCity will publish zipped logs as hidden build artifact <code class="code">.teamcity/.NETCoverage/dotCoverLogs.zip</code>.</p></div><a name="JVMCrashes"></a><a name="JVM-Crashes"></a><div class="chapter"><h2 id="ReportingIssues-JVMCrashes">JVM Crashes</h2><p id="ec06c2c6">On a rare occasion of the TeamCity server or agent process terminating unexpectedly with no apparent reason, it can happen that this is caused by a Java runtime crash.If this happens, the JVM regularly creates a file named <code class="code">hs_err_pid*.log</code> in the working directory of the process. The working directory is usually <code class="code">&lt;</code><a href="teamcity-home-directory.html"><code class="code">TeamCity server</code></a><code class="code">&gt;</code> or <a href="agent-home-directory.html"><code class="code">agent home</code></a><code class="code">&gt;/bin</code>.<br>Under Windows when running as a service, it can be other like <code class="code">C:\Windows\SysWOW64</code>. You can also search the disk for the recent files with "hs_err_pid" in the name. See also the related Fatal Error Log section in this <a href="http://www.oracle.com/technetwork/java/javase/felog-138657.html" data-external="true" target="_blank" rel="noopener noreferrer">document</a>.</p><p id="69a6c4d5">Please send this file to us for investigation and consider updating the JVM for the <a href="installing-and-configuring-the-teamcity-server.html#Java-Installation">server</a> (or for <a href="setting-up-and-running-additional-build-agents.html#Configuring-Java">agents</a>) to the latest version available.</p><p id="82536821">If you get the "There is insufficient memory for the Java Runtime Environment to continue. Native memory allocation (malloc) failed to allocate ..." message with the crash or in the crash report file, make sure to <a href="installing-and-configuring-the-teamcity-server.html#Using-64-bit-Java-to-Run-TeamCity-Server">switch to 64 bits JVM</a> or reduce the <code class="code">-Xmx</code> setting below <code class="code">1024m</code>, see details in the <a href="installing-and-configuring-the-teamcity-server.html#Setting-Up-Memory-settings-for-TeamCity-Server">memory configuration section</a>.</p></div><a name="BuildLogIssues"></a><a name="Build-Log-Issues"></a><div class="chapter"><h2 id="ReportingIssues-BuildLogIssues">Build Log Issues</h2><p id="322b77a3">While investigating issues related to a build log, we might need the raw binary build log as stored by TeamCity. It can be downloaded via the Web UI from the Build Log build's tab: select "Verbose" log detail and use the "raw messages file" link at the top-right.</p></div><a name="IntelliJIDEAInspections"></a><a name="IntelliJ-IDEA-Inspections"></a><div class="chapter"><h2 id="ReportingIssues-IntelliJIDEAInspections">IntelliJ IDEA Inspections</h2><p id="c63c0ff7">The inspections result from a TeamCity build may not match inspections from a local run in IntelliJ IDEA.</p><p id="d9a405e3">To help us investigate issues with inspections, do the following:</p><ol class="list _decimal"><li class="list__item" id="8b7ca363"><p>Add <code class="code">system.teamcity.dont.delete.temp.result.dir=true</code> to the <a href="configuring-build-parameters.html">configuration parameters</a></p></li><li class="list__item" id="9d84b273"><p>Add <code class="code">%system.teamcity.build.tempDir%/inspection*result/** =&gt; inspections-reports-data-%build.number%.zip</code> rule to <a href="configuring-general-settings.html#Artifact-Paths">Artifact paths</a></p></li><li class="list__item" id="5c45b43e"><p>Add <code class="code">%system.teamcity.build.tempDir%/idea-logs/** =&gt; inspections-reports-idea-logs-%build.number%.zip</code> rule to <a href="configuring-general-settings.html#Artifact-Paths">Artifact paths</a></p></li><li class="list__item" id="2f48a45c"><p>Add <code class="code">-Didea.log.path=%system.teamcity.build.tempDir%/idea-logs/</code> to the runner's <a href="inspections.html#Java-Parameters">JVM command line parameters</a> field.</p></li><li class="list__item" id="387021f5"><p>Run a  new build.</p></li><li class="list__item" id="596c35d9"><p>Send us <code class="code">inspections-reports-*.zip</code> files.</p></li></ol></div><a name="UploadingLargeDataArchives"></a><a name="Uploading-Large-Data-Archives"></a><div class="chapter"><h2 id="ReportingIssues-UploadingLargeDataArchives">Uploading Large Data Archives</h2><p id="b4e642de">Files under 10 MB in size can be attached right into the <a href="http://youtrack.jetbrains.net/issues/TW" data-external="true" target="_blank" rel="noopener noreferrer">tracker issue</a> (if you do not want the attachments to be publicly accessible, limit the attachment visibility to "teamcity-developers" user group only).<br>You can also send small files (up to 2 MB) via email: <a href="mailto:teamcity-support@jetbrains.com" data-external="true">teamcity-support@jetbrains.com</a> or via <a href="https://teamcity-support.jetbrains.com/hc/en-us/requests/new?ticket_form_id=66621" data-external="true" target="_blank" rel="noopener noreferrer">online form</a> (up to 20 MB). Please do not forget to mention your TeamCity version and environment and archive the files before attaching.</p><p id="4bd5716a"><b id="8d6562f1">FTP</b></p><p id="ea6aaa67">If the file is over 10 MB, you can upload the archived files to <a href="ftp://ftp.intellij.net/.uploads" data-external="true" target="_blank" rel="noopener noreferrer">ftp://ftp.intellij.net/.uploads</a> and let us know the exact file name. If you receive the permission denied error on an upload attempt, rename the file. It's OK that you do not see the file listing on the FTP.<br>The FTP accepts standard anonymous credentials: username: "anonymous", password: "&lt;your email&gt;".<br>In addition to usual, unencrypted connections, TLS ones are also supported.</p><p id="6d1c918e">In case of access issues, time-out errors, and so on, please try using passive FTP mode.</p><p id="0bdb7dee"><b id="8fce5711">HTTP</b></p><p id="6d516ae0">You can upload a file via <a href="https://uploads.services.jetbrains.com/" data-external="true" target="_blank" rel="noopener noreferrer">https://uploads.services.jetbrains.com/</a> form and let us know the exact file name.</p><p id="7562884c">If you cannot upload a large file in one go, try splitting the file into parts and upload them separately.</p><hr id="aee3ccb1"><p id="9ee3615a"><br></p><p id="25de7d37"><br></p><p id="5faaa84d"><br></p><p id="47b5c0c1"><br></p><p id="e5bd7059"><br></p><p id="885463f4"><br></p><p id="c54800a1"><br></p><p id="48a5d23b"><br></p><p id="bbd96561"><br></p><p id="b5ab1fcd"><br></p></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>