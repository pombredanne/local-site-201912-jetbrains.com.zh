<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Ant - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Ant" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-build-steps.md|Configuring Build Steps/ant.md|Ant" data-main-title="Ant" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/ant.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Ant" id="ant.md">Ant</h1><p id="b4274a28">This is a runner for Ant <code class="code">build.xml</code> files.</p><p id="26ef1429">On this page:</p><p id="de0824fd"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#Ant-TestingFrameworksSupport">Testing Frameworks Support</a></li><li class="list__item"><a href="#Ant-ReportingandLogging">Reporting and Logging</a></li><li class="list__item"><a href="#Ant-AntRunnerSettings">Ant Runner Settings</a><ul class="list _bullet"><li class="list__item"><a href="#Ant-AntParameters">Ant Parameters</a><ul class="list _bullet"><li class="list__item"><a href="#Ant-ant-net-tasksTool">ant-net-tasks Tool</a></li></ul></li><li class="list__item"><a href="#Ant-JavaParameters">Java Parameters</a></li><li class="list__item"><a href="#Ant-TestParameters">Test Parameters</a></li><li class="list__item"><a href="#Ant-DockerSettings">Docker Settings</a></li><li class="list__item"><a href="#Ant-CodeCoverage">Code Coverage</a></li><li class="list__item"><a href="#Ant-BundledAntVersions">Bundled Ant Versions</a></li></ul></li></ul></p><a name="TestingFrameworksSupport"></a><a name="Testing-Frameworks-Support"></a><div class="chapter"><h2 id="Ant-TestingFrameworksSupport">Testing Frameworks Support</h2><p id="312e85b8">The TeamCity Ant runner supports the JUnit and TestNG frameworks. When tests are run by the <code class="code">junit</code> and <code class="code">testng</code> tasks directly within the script, TeamCity reports tests on the fly.</p><p id="ea433d96">By using the <code class="code">&lt;parallel&gt;</code> tag in your Ant script, it is possible to have the JUnit and TestNG tasks run in parallel. TeamCity supports this and should concurrently log the parallel processes correctly.</p></div><a name="ReportingandLogging"></a><a name="Reporting-and-Logging"></a><div class="chapter"><h2 id="Ant-ReportingandLogging">Reporting and Logging</h2><p id="89882abb">TeamCity collects detailed data from  Ant as to the performed activities, provides structured error reporting, and reports tests. However, you can start a build with no specific reporting or to turn off TeamCity-specific logging:</p><ul class="list _ul"><li class="list__item" id="9f7efea0"><p>To disable TeamCity-specific reporting in Ant, use <code class="code">teamcity.ant.listener.enabled=false</code> <a href="configuring-build-parameters.html">build configuration parameter</a></p></li><li class="list__item" id="107b6220"><p>To disable JUnit reporting, use the <code class="code">teamcity.ant.junit-support.enabled=false</code> <a href="configuring-build-parameters.html">system property</a></p></li><li class="list__item" id="64ab304b"><p>To disable TestNG reporting,  use <code class="code">teamcity.ant.testng-support.enabled=false</code> <a href="configuring-build-parameters.html">system property</a></p></li></ul></div><a name="AntRunnerSettings"></a><a name="Ant-Runner-Settings"></a><div class="chapter"><h2 id="Ant-AntRunnerSettings">Ant Runner Settings</h2><p id="0c0aa7d8"><a name="antAntParamsOptionDescription"></a><a name="Ant-antAntParamsOptionDescription"></a></p><p id="9d3a86e8"><a name="Path to build.xml file"></a><a name="Ant-Path to build.xml file"></a></p><p id="53050a29"><a name="Build file content"></a><a name="Ant-Build file content"></a></p><p id="d8057c33"><a name="Working directory"></a><a name="Ant-Working directory"></a></p><p id="56166292"><a name="Targets"></a><a name="Ant-Targets"></a></p><p id="6dc3aaaf"><a name="Ant home path"></a><a name="Ant-Ant home path"></a></p><p id="b2bd6bef"><a name="Additional Ant command line parameters"></a><a name="Ant-Additional Ant command line parameters"></a></p><a name="AntParameters"></a><a name="Ant-Parameters"></a><div class="chapter"><h3 id="Ant-AntParameters">Ant Parameters</h3><div class="table-wrapper"><table width="100%" id="58fe39a5"><thead><tr id="0674a66b" class="ijRowHead"><th id="a6e52f9a"><p id="32ba25f4">Option</p></th><th id="d22b97dd"><p id="77e3a827">Description</p></th></tr></thead><tbody><tr id="a006f08b" class="ijRowOdd"><td id="d18cb63c"><p id="1d423742">Path to build.xml file</p></td><td id="af389d60"><p id="2d71e5df">If you choose the option, you can type the path to an Ant build script file of the project. The path is relative to the project root directory. Alternatively, click <img alt="VCS-browserIcon.png" title="VCS-browserIcon.png" src="/help/img/teamcity/2019.1/VCS-browserIcon.png" id="3e493c89" width="26" height="27" class="inline-icon-26"> to choose the file using the VCS repository browser.</p></td></tr><tr id="6df33879" class="ijRowEven"><td id="3e19da9d"><p id="ca943b86">Build file content</p></td><td id="a08c942f"><p id="f4028ee8">If you choose this option, click the <b id="739a66e0">Type build file content</b> link and type the source code of your custom build file in the text area. Note that the text area is resizeable. Use the <b id="d58b2f63">Hide</b> link to close the text area.</p></td></tr><tr id="9f254872" class="ijRowOdd"><td id="c9a1bd5b"><p id="bf1b2323">Working directory</p></td><td id="3397af91"><p id="f0962d2b">Specify the <a href="build-working-directory.html">build working directory</a> if it differs from the checkout directory.</p></td></tr><tr id="d5d0a495" class="ijRowEven"><td id="4cc58bc2"><p id="5d7c42bb">Targets</p></td><td id="15e9f665"><p id="a1ed8fa3">Use this text field to specify valid Ant targets as a list of space-separated strings. The available targets can be viewed in the Web UI by clicking the icon next to the field and added by checking the appropriate boxes. If this field is left empty, the default target specified in the build script file will be run.</p></td></tr><tr id="73bb6578" class="ijRowOdd"><td id="ac641f93"><p id="11a9fb39">Ant home path</p></td><td id="15e3e0f2"><p id="c8a02ef3">Specify the path to the distributive of your custom Ant. You do not need to specify this parameter if you are going to use the Ant distributive bundled with TeamCity.</p><aside class="note " data-title="" rel="c8a02ef3" id="8e263be4"><p id="87f085f4">Note that you should use Ant 1.7 if you want to run JUnit4 tests in your builds.</p></aside></td></tr><tr id="a6b73efa" class="ijRowEven"><td id="f106b132"><p id="983aeedb">Additional Ant command line parameters</p></td><td id="5ce1c88e"><p id="c7da969e">Optionally, specify additional command line parameters as a space-separated list. For example, you can specify the <a href="#ant-net-tasks-Tool">ant-net-tasks Tool</a> (see below).</p></td></tr></tbody></table></div><a name="ant-net-tasksTool"></a><a name="ant-net-tasks-Tool"></a><div class="chapter"><h4 id="Ant-ant-net-tasksTool">ant-net-tasks Tool</h4><p id="ccb501da">The Ant build runner comes with a bundled tool, <i id="af5ac616">ant-net-tasks</i>, which includes the jar files required for network tasks, such as FTP, sshexec, scp and mail.<br>It also contains <a href="https://code.google.com/p/missing-link/" data-external="true" target="_blank" rel="noopener noreferrer">missing link Ant task</a> which can be used for REST requests.</p><p id="28d2f969">To use the tool, specify <code class="code">-lib "%teamcity.tool.ant-net-tasks%"</code> in <a href="#Ant-Parameters">Additional Ant command line parameters</a> of the runner settings.</p><a name="java-param"></a></div></div><a name="JavaParameters"></a><a name="Java-Parameters"></a><div class="chapter"><h3 id="Ant-JavaParameters">Java Parameters</h3><div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="67bb205f"><thead><tr id="ba138086" class="ijRowHead"><th id="9b4314cb"><p id="38ddfade">Option</p></th><th id="85fd14e0"><p id="667f0d57">Description</p></th></tr></thead><tbody><tr id="fe0a0fe4" class="ijRowOdd"><td id="6e7ec25c"><p id="f1e7e456">JDK</p></td><td id="4f4e6434"><p id="5ec1bc87">Select a JDK. <a href="predefined-build-parameters.html#Defining-Java-related-Environment-Variables">This section</a> details the available options. The default is <code class="code">JAVA_HOME</code> environment variable or the agent's own Java.</p></td></tr><tr id="b35f318c" class="ijRowEven"><td id="e8c06470"><p id="e355e6b1">JDK home path</p></td><td id="e09f205b"><p id="d2fa819c"><i id="464ead80">The option is available when &lt;Custom&gt; is selected above.</i> Use this field to specify the path to your custom JDK used to run the build. If the field is left blank, the path to JDK Home is read either from the <code class="code">JAVA_HOME</code> environment variable on agent the computer, or from the <code class="code">env.JAVA_HOME</code> property specified in the <a href="build-agent-configuration.html">build agent configuration</a> file (<code class="code">buildAgent.properties</code>). If these values are not specified, TeamCity uses the Java home of the build agent process itself.</p></td></tr><tr id="106da354" class="ijRowOdd"><td id="86d5fe12"><p id="2256e4d9">JVM command line parameters</p></td><td id="35a472d4"><p id="ab818b36">You can specify such JVM command line parameters, for example, <i id="ff299a88">maximum heap size</i> or parameters enabling <i id="70b1f2d3">remote debugging</i>. These values are passed by the JVM used to run your build.<br>Example:</p><div class="code-block" data-lang="bash">-Xmx512m -Xms256m

</div></td></tr></tbody></table></div></div><a name="TestParameters"></a><a name="Test-Parameters"></a><div class="chapter"><h3 id="Ant-TestParameters">Test Parameters</h3><p id="d164d297">Tests reordering works the following way: TeamCity provides tests that should be run first (test classes), after that, when a JUnit task starts, it checks whether it includes these tests. If at least one test is included, TeamCity generates a new fileset containing included tests only and processes it before all other filesets. It also patches other filesets to exclude tests added to the automatically generated fileset. After that JUnit starts and runs as usual.</p><div class="table-wrapper"><table width="100%" id="c03a700a"><thead><tr id="887352d3" class="ijRowHead"><th id="8d5dbd03"><p id="0013f2ce">Option</p></th><th id="069d322e"><p id="7f739911">Description</p></th></tr></thead><tbody><tr id="41ac4a74" class="ijRowOdd"><td id="edcc6a6e"><p id="43258c62">Reduce test failure feedback time:</p></td><td id="8bc538a4"><p id="c463d69c">Use the following two options to instruct TeamCity to run some tests before others.</p><ul class="list _ul"><li class="list__item" id="2654bac8"><p>Run recently failed tests first – if checked,TeamCity will first run tests failed in the previous finished or running builds as well as tests having a high failure rate (so called <i id="aa876143">blinking</i> tests).</p></li><li class="list__item" id="0cf1fa59"><p>Run new and modified tests first – if checked, TeamCity will first run the tests added or modified in the change lists included in the running build.</p></li></ul></td></tr></tbody></table></div><aside class="note " data-title="" rel="c03a700a" id="28d24226"><p id="f8328e6c">If both options are enabled at the same time, the tests of the <b id="12ae48ee">new and modified tests</b> group will have higher priority, and will be executed first.</p></aside></div><a name="DockerSettings"></a><a name="Docker-Settings"></a><div class="chapter"><h3 id="Ant-DockerSettings">Docker Settings</h3><p id="50cb2784">In this section, you can specify a Docker image which will be <a href="docker-wrapper.html">used to run the build step</a>.</p></div><a name="CodeCoverage"></a><a name="Code-Coverage"></a><div class="chapter"><h3 id="Ant-CodeCoverage">Code Coverage</h3><p id="47ff0e86">To learn about configuring code coverage options, refer to the <a href="configuring-java-code-coverage.html">Configuring Java Code Coverage</a> page.</p></div><a name="BundledAntVersions"></a><a name="Bundled-Ant-Versions"></a><div class="chapter"><h3 id="Ant-BundledAntVersions">Bundled Ant Versions</h3><p id="01ec6e17">This section provides information on the versions of Ant bundled with TeamCity 10+ versions.</p><div class="table-wrapper"><table width="100%" id="826aa3b5"><thead><tr id="383af043" class="ijRowHead"><th id="5b224a84"><p id="9df43ae5">TeamCity Version</p></th><th id="0bc10972"><p id="b3124f66">Ant Version</p></th></tr></thead><tbody><tr id="aa2e7df1" class="ijRowOdd"><td id="7619c93a"><p id="ff0e216e">10</p></td><td id="a7cb4a0b"><p id="a86ec9a4">1.9.7</p></td></tr><tr id="315dcc58" class="ijRowEven"><td id="17066256"><p id="b9ef1b49">2017.1/2</p></td><td id="ee95387a"><p id="689cb318">1.9.9</p></td></tr><tr id="5093b2c3" class="ijRowOdd"><td id="25aa9921"><p id="3ebd6ad5">2018.1/2</p></td><td id="4de286b8"><p id="f1719867">1.9.11</p></td></tr><tr id="d8557d69" class="ijRowEven"><td id="f9abdaaa"><p id="a90073f7">2019.1</p></td><td id="5df8f330"><p id="c9f95665">1.9.11</p></td></tr></tbody></table></div><hr id="cf8ba928"><p id="390471ac"><b id="355db4ac">See also:</b></p><p id="6dad6efa"><b id="7b3aa0f8">Administrator's Guide</b>: <a href="configuring-java-code-coverage.html">Configuring Java Code Coverage</a></p><hr id="293f737c"></div></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>