<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>蚂蚁-帮助|团队城市</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Ant" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-build-steps.md|Configuring Build Steps/ant.md|Ant" data-main-title="Ant" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/ant.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="ant.md" data-toc="Ant">蚂蚁</h1><p id="b4274a28">这是蚂蚁的跑步者<code class="code">build.xml</code>文件。</p><p id="26ef1429">在此页：</p><p id="de0824fd"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#Ant-TestingFrameworksSupport">测试框架支持</a></li><li class="list__item"><a href="#Ant-ReportingandLogging">报告和记录</a></li><li class="list__item"><a href="#Ant-AntRunnerSettings">蚂蚁赛跑者设置</a><ul class="list _bullet"><li class="list__item"><a href="#Ant-AntParameters">蚂蚁参数</a><ul class="list _bullet"><li class="list__item"><a href="#Ant-ant-net-tasksTool">ant-net-tasks工具</a></li></ul></li><li class="list__item"><a href="#Ant-JavaParameters">Java参数</a></li><li class="list__item"><a href="#Ant-TestParameters">测试参数</a></li><li class="list__item"><a href="#Ant-DockerSettings">Docker设置</a></li><li class="list__item"><a href="#Ant-CodeCoverage">代码覆盖率</a></li><li class="list__item"><a href="#Ant-BundledAntVersions">捆绑的蚂蚁版本</a></li></ul></li></ul><p></p><a name="TestingFrameworksSupport"></a><a name="Testing-Frameworks-Support"></a><div class="chapter"><h2 id="Ant-TestingFrameworksSupport">测试框架支持</h2><p id="312e85b8">TeamCity Ant运行器支持JUnit和TestNG框架。当测试由<code class="code">junit</code>和<code class="code">testng</code>在脚本中直接执行任务时，TeamCity可以即时报告测试。</p><p id="ea433d96">通过使用<code class="code"><parallel></code>标记在您的Ant脚本中，则可以并行运行JUnit和TestNG任务。TeamCity支持此功能，并应同时正确记录并行进程。</p></div><a name="ReportingandLogging"></a><a name="Reporting-and-Logging"></a><div class="chapter"><h2 id="Ant-ReportingandLogging">报告和记录</h2><p id="89882abb">TeamCity从Ant收集有关已执行活动的详细数据，提供结构化错误报告并报告测试。但是，您可以在没有特定报告的情况下开始构建，或者关闭TeamCity特定的日志记录：</p><ul class="list _ul"><li class="list__item" id="9f7efea0"><p>要在Ant中禁用特定于TeamCity的报告，请使用<code class="code">teamcity.ant.listener.enabled=false</code> <a href="configuring-build-parameters.html">构建配置参数</a></p></li><li class="list__item" id="107b6220"><p>要禁用JUnit报告，请使用<code class="code">teamcity.ant.junit-support.enabled=false</code> <a href="configuring-build-parameters.html">系统属性</a></p></li><li class="list__item" id="64ab304b"><p>要禁用TestNG报告，请使用<code class="code">teamcity.ant.testng-support.enabled=false</code> <a href="configuring-build-parameters.html">系统属性</a></p></li></ul></div><a name="AntRunnerSettings"></a><a name="Ant-Runner-Settings"></a><div class="chapter"><h2 id="Ant-AntRunnerSettings">蚂蚁赛跑者设置</h2><p id="0c0aa7d8"><a name="antAntParamsOptionDescription"></a><a name="Ant-antAntParamsOptionDescription"></a></p><p id="9d3a86e8"><a name="Path to build.xml file"></a><a name="Ant-Path to build.xml file"></a></p><p id="53050a29"><a name="Build file content"></a><a name="Ant-Build file content"></a></p><p id="d8057c33"><a name="Working directory"></a><a name="Ant-Working directory"></a></p><p id="56166292"><a name="Targets"></a><a name="Ant-Targets"></a></p><p id="6dc3aaaf"><a name="Ant home path"></a><a name="Ant-Ant home path"></a></p><p id="b2bd6bef"><a name="Additional Ant command line parameters"></a><a name="Ant-Additional Ant command line parameters"></a></p><a name="AntParameters"></a><a name="Ant-Parameters"></a><div class="chapter"><h3 id="Ant-AntParameters">蚂蚁参数</h3><div class="table-wrapper"><table width="100%" id="58fe39a5"><thead><tr id="0674a66b" class="ijRowHead"><th id="a6e52f9a"><p id="32ba25f4">选项</p></th><th id="d22b97dd"><p id="77e3a827">描述</p></th></tr></thead><tbody><tr id="a006f08b" class="ijRowOdd"><td id="d18cb63c"><p id="1d423742">build.xml文件的路径</p></td><td id="af389d60"><p id="2d71e5df">如果选择该选项，则可以键入项目的Ant构建脚本文件的路径。该路径是相对于项目根目录的。或者，单击<img alt="VCS-browserIcon.png" title="VCS-browserIcon.png" src="/help/img/teamcity/2019.1/VCS-browserIcon.png" id="3e493c89" width="26" height="27" class="inline-icon-26">使用VCS存储库浏览器选择文件。</p></td></tr><tr id="6df33879" class="ijRowEven"><td id="3e19da9d"><p id="ca943b86">建立档案内容</p></td><td id="a08c942f"><p id="f4028ee8">如果选择此选项，请单击“ <b id="739a66e0">键入构建文件内容”</b>链接，然后在文本区域中键入自定义构建文件的源代码。请注意，文本区域是可调整大小的。使用“ <b id="d58b2f63">隐藏”</b>链接关闭文本区域。</p></td></tr><tr id="9f254872" class="ijRowOdd"><td id="c9a1bd5b"><p id="bf1b2323">工作目录</p></td><td id="3397af91"><p id="f0962d2b">如果<a href="build-working-directory.html">构建工作目录</a>与检出目录不同，请指定该目录。</p></td></tr><tr id="d5d0a495" class="ijRowEven"><td id="4cc58bc2"><p id="5d7c42bb">目标</p></td><td id="15e9f665"><p id="a1ed8fa3">使用此文本字段可将有效的Ant目标指定为以空格分隔的字符串列表。通过单击字段旁边的图标，可以在Web UI中查看可用的目标，然后选中相应的框来添加可用的目标。如果将此字段保留为空，则将运行构建脚本文件中指定的默认目标。</p></td></tr><tr id="73bb6578" class="ijRowOdd"><td id="ac641f93"><p id="11a9fb39">蚂蚁回家的路</p></td><td id="15e3e0f2"><p id="c8a02ef3">指定您的定制Ant分发版的路径。如果要使用与TeamCity捆绑在一起的Ant分发版，则无需指定此参数。</p><aside class="note " rel="c8a02ef3" id="8e263be4" data-title=""><p id="87f085f4">请注意，如果要在构建中运行JUnit4测试，则应使用Ant 1.7。</p></aside></td></tr><tr id="a6b73efa" class="ijRowEven"><td id="f106b132"><p id="983aeedb">其他Ant命令行参数</p></td><td id="5ce1c88e"><p id="c7da969e">（可选）将其他命令行参数指定为以空格分隔的列表。例如，您可以指定<a href="#ant-net-tasks-Tool">ant-net-tasks工具</a> （请参见下文）。</p></td></tr></tbody></table></div><a name="ant-net-tasksTool"></a><a name="ant-net-tasks-Tool"></a><div class="chapter"><h4 id="Ant-ant-net-tasksTool">ant-net-tasks工具</h4><p id="ccb501da">Ant构建运行程序附带了一个捆绑工具<i id="af5ac616">ant-net-tasks</i> ，该工具包含网络任务（例如FTP，sshexec，scp和mail）所需的jar文件。<br>它还包含<a href="https://code.google.com/p/missing-link/" rel="noopener noreferrer" data-external="true" target="_blank">缺少的链接Ant任务</a> ，该<a href="https://code.google.com/p/missing-link/" rel="noopener noreferrer" data-external="true" target="_blank">任务</a>可用于REST请求。</p><p id="28d2f969">要使用该工具，请指定<code class="code">-lib "%teamcity.tool.ant-net-tasks%"</code>运行程序设置的<a href="#Ant-Parameters">其他Ant命令行参数</a>中。</p><a name="java-param"></a></div></div><a name="JavaParameters"></a><a name="Java-Parameters"></a><div class="chapter"><h3 id="Ant-JavaParameters">Java参数</h3><div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="67bb205f"><thead><tr id="ba138086" class="ijRowHead"><th id="9b4314cb"><p id="38ddfade">选项</p></th><th id="85fd14e0"><p id="667f0d57">描述</p></th></tr></thead><tbody><tr id="fe0a0fe4" class="ijRowOdd"><td id="6e7ec25c"><p id="f1e7e456">JDK</p></td><td id="4f4e6434"><p id="5ec1bc87">选择一个JDK。 <a href="predefined-build-parameters.html#Defining-Java-related-Environment-Variables">本节</a>详细介绍了可用的选项。默认是<code class="code">JAVA_HOME</code>环境变量或代理程序自己的Java。</p></td></tr><tr id="b35f318c" class="ijRowEven"><td id="e8c06470"><p id="e355e6b1">JDK主页路径</p></td><td id="e09f205b"><p id="d2fa819c"><i id="464ead80"><custom>上面选择</custom>时，此选项可用<custom>。</custom></i> 使用此字段可以指定用于运行构建的自定义JDK的路径。如果该字段为空，则从<code class="code">JAVA_HOME</code>代理计算机上的环境变量，或来自<code class="code">env.JAVA_HOME</code>在<a href="build-agent-configuration.html">构建代理配置</a>文件中指定的属性（ <code class="code">buildAgent.properties</code> ）。如果未指定这些值，TeamCity将使用构建代理进程本身的Java主页。</p></td></tr><tr id="106da354" class="ijRowOdd"><td id="86d5fe12"><p id="2256e4d9">JVM命令行参数</p></td><td id="35a472d4"><p id="ab818b36">您可以指定此类JVM命令行参数，例如<i id="ff299a88">最大堆大小</i>或启用<i id="70b1f2d3">远程调试的</i>参数。这些值由用于运行构建的JVM传递。<br>例：</p><div class="code-block" data-lang="bash">-Xmx512m -Xms256m</div></td></tr></tbody></table></div></div><a name="TestParameters"></a><a name="Test-Parameters"></a><div class="chapter"><h3 id="Ant-TestParameters">测试参数</h3><p id="d164d297">测试重新排序的工作方式如下：TeamCity提供应首先运行的测试（测试类），然后，当JUnit任务启动时，它将检查是否包括这些测试。如果至少包含一个测试，TeamCity将生成一个仅包含所包含测试的新文件集，并在所有其他文件集之前对其进行处理。它还修补其他文件集，以排除添加到自动生成的文件集的测试。之后，JUnit将启动并照常运行。</p><div class="table-wrapper"><table width="100%" id="c03a700a"><thead><tr id="887352d3" class="ijRowHead"><th id="8d5dbd03"><p id="0013f2ce">选项</p></th><th id="069d322e"><p id="7f739911">描述</p></th></tr></thead><tbody><tr id="41ac4a74" class="ijRowOdd"><td id="edcc6a6e"><p id="43258c62">减少测试失败的反馈时间：</p></td><td id="8bc538a4"><p id="c463d69c">使用以下两个选项来指示TeamCity先进行一些测试。</p><ul class="list _ul"><li class="list__item" id="2654bac8"><p>首先运行最近失败的测试–如果选中，TeamCity将首先运行在先前已完成或正在运行的构建中失败的测试以及失败率较高的测试（所谓的<i id="aa876143">闪烁</i>测试）。</p></li><li class="list__item" id="0cf1fa59"><p>首先运行新的和修改的测试–如果选中，TeamCity将首先运行在运行中的版本中包含的更改列表中添加或修改的测试。</p></li></ul></td></tr></tbody></table></div><aside class="note " rel="c03a700a" id="28d24226" data-title=""><p id="f8328e6c">如果同时启用两个选项，则<b id="12ae48ee">新的和修改的测试</b>组的<b id="12ae48ee">测试</b>将具有更高的优先级，并将首先执行。</p></aside></div><a name="DockerSettings"></a><a name="Docker-Settings"></a><div class="chapter"><h3 id="Ant-DockerSettings">Docker设置</h3><p id="50cb2784">在本部分中，您可以指定一个Docker映像，该映像将<a href="docker-wrapper.html">用于运行构建步骤</a> 。</p></div><a name="CodeCoverage"></a><a name="Code-Coverage"></a><div class="chapter"><h3 id="Ant-CodeCoverage">代码覆盖率</h3><p id="47ff0e86">要了解有关配置代码覆盖率选项的信息，请参阅“ <a href="configuring-java-code-coverage.html">配置Java代码覆盖率”</a>页面。</p></div><a name="BundledAntVersions"></a><a name="Bundled-Ant-Versions"></a><div class="chapter"><h3 id="Ant-BundledAntVersions">捆绑的蚂蚁版本</h3><p id="01ec6e17">本节提供了与TeamCity 10+版本捆绑在一起的Ant版本的信息。</p><div class="table-wrapper"><table width="100%" id="826aa3b5"><thead><tr id="383af043" class="ijRowHead"><th id="5b224a84"><p id="9df43ae5">TeamCity版本</p></th><th id="0bc10972"><p id="b3124f66">蚂蚁版</p></th></tr></thead><tbody><tr id="aa2e7df1" class="ijRowOdd"><td id="7619c93a"><p id="ff0e216e">10</p></td><td id="a7cb4a0b"><p id="a86ec9a4">1.9.7</p></td></tr><tr id="315dcc58" class="ijRowEven"><td id="17066256"><p id="b9ef1b49">2017.1 / 2</p></td><td id="ee95387a"><p id="689cb318">1.9.9</p></td></tr><tr id="5093b2c3" class="ijRowOdd"><td id="25aa9921"><p id="3ebd6ad5">2018.1 / 2</p></td><td id="4de286b8"><p id="f1719867">1.9.11</p></td></tr><tr id="d8557d69" class="ijRowEven"><td id="f9abdaaa"><p id="a90073f7">2019.1</p></td><td id="5df8f330"><p id="c9f95665">1.9.11</p></td></tr></tbody></table></div><hr id="cf8ba928"><p id="390471ac"><b id="355db4ac">也可以看看：</b></p><p id="6dad6efa"><b id="7b3aa0f8">管理员指南</b> ： <a href="configuring-java-code-coverage.html">配置Java代码覆盖率</a></p><hr id="293f737c"></div></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>