<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>颠覆-帮助|团队城市</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Subversion" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/configuring-vcs-settings.md|Configuring VCS Settings/configuring-vcs-roots.md|Configuring VCS Roots/subversion.md|Subversion" data-main-title="Subversion" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/subversion.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="subversion.md" data-toc="Subversion">颠覆</h1><p id="6a68731d">此页面包含Subversion特定字段的说明以及设置VCS根目录时可用的选项。</p><p id="74e4ecc8"><a href="configuring-vcs-roots.html#Common-VCS-Root-Properties">此处</a>介绍<a href="configuring-vcs-roots.html#Common-VCS-Root-Properties">了</a>常见的VCS根属性。</p><p id="e353d9d3">您不需要在TeamCity服务器或代理上安装Subversion客户端。TeamCity捆绑了SVN客户端（ <a href="http://svnkit.com/" rel="noopener noreferrer" data-external="true" target="_blank">SVNKit</a> ）的Java实现。</p><a name="SVNConnectionSettings"></a><a name="SVN-Connection-Settings"></a><div class="chapter"><h2 id="Subversion-SVNConnectionSettings">SVN连接设置</h2><div class="table-wrapper"><table width="100%" id="12517e6f"><thead><tr id="ed37f422" class="ijRowHead"><th id="b757f3f9"><p id="d95b5039">选项</p></th><th id="d3cb297c"><p id="f8809ac4">描述</p></th></tr></thead><tbody><tr id="6403dd53" class="ijRowOdd"><td id="37721782"><p id="17b2607b">网址</p></td><td id="94f0e22b"><p id="15a0a6aa">指定指向项目源的SVN URL。</p></td></tr><tr id="d3991dd4" class="ijRowEven"><td id="307ffed3"><p id="245f3701">用户名</p></td><td id="573b58e4"><p id="213c2810">指定SVN用户名。</p></td></tr><tr id="788e38c7" class="ijRowOdd"><td id="73b6c28b"><p id="0ac189d4">密码</p></td><td id="9ad4ab6b"><p id="7657779f">指定SVN密码。</p></td></tr><tr id="50b3e3b5" class="ijRowEven"><td id="9954e227"><p id="164a06af">配置目录</p></td><td id="d401ef2a"><p id="8e16a4cf">您可以指定一个替代的Subversion配置目录，或使用默认的（推荐）目录。此设置也适用于业务代表方结帐。TeamCity不会将身份验证存储在SVN配置目录中，但可以读取存储在该目录中的设置。</p></td></tr><tr id="d12cfd60" class="ijRowOdd"><td id="364127e3"><p id="08cad179">使用默认配置目录</p></td><td id="b9eaeebe"><p id="351968c0">选中此选项可将其设置为SVN连接的默认配置目录。</p></td></tr><tr id="789cc181" class="ijRowEven"><td id="0da396c3"><p id="4d620f4f">外部支持</p></td><td id="e9b90570"><p id="5330ceff">检查以下选项之一以控制SVN外部处理。</p><ul class="list _ul"><li class="list__item" id="a347b1ff"><p>全面支持（负载更改和签出）-选择该选项后，TeamCity将签出所有配置的源（包括来自外部的源），并将在“ <a href="viewing-your-changes.html">更改”</a>选项卡上收集并显示有关外部更改的信息。</p></li><li class="list__item" id="7c4eb815"><p>签出，但忽略更改-选择该选项时，TeamCity将从外部签出源，但外部源文件中的任何更改都不会收集并显示在“ <a href="viewing-your-changes.html">更改”</a>选项卡上。如果您有多个SVN外部组件，并且不想获取有关在外部组件的源文件中进行的任何更改的信息，则可以使用此选项。</p></li></ul><aside class="note " rel="d920cbe6" id="e3693eb1" data-title=""><p id="9ef2ac64"><b id="c0ace9dd">版本号影响</b></p><p id="e7bd5d3a">如果您使用“ <i id="f53da9e6">签出，但忽略更改</i> ”选项，TeamCity将始终使用最新的存储库修订版作为签出的修订版（相同的修订版将用于<code class="code">build.vcs.number</code>参数）。对于其他两个选项，TeamCity将检测到的最新更改的修订作为签出的修订。</p></aside><ul class="list _ul"><li class="list__item" id="ab90ee7e"><p>忽略外部-选择该选项时，TeamCity将忽略任何已配置<code class="code">svn:externals</code>属性，因此TeamCity将不会检查更改或从SVN外部检出任何源文件。</p></li></ul><aside class="note " rel="2b444802" id="b948c167" data-title=""><p id="26e6cfb7"><b id="b15203a1">Subversion储存库UUID</b></p><p id="241970a6">TeamCity依赖Subversion存储库UUID作为存储库的唯一标识符。如果您有2个具有相同UUID的不同存储库（由于存储库副本），TeamCity可能无法正常运行，例如，可以签出外部存储库的HEAD修订版。</p></aside></td></tr><tr id="d124ddca" class="ijRowOdd"><td id="b6380a11"><p id="3223d101">HTTPS连接：接受不受信任的SSL证书</p><p id="2fc9d0b3">（在10.0中启用不受信任的SSL证书）</p></td><td id="49780b3e"><p id="9525d853">启用此选项后，TeamCity无需正确签名的SSL证书即可连接到SVN服务器。</p></td></tr></tbody></table></div><aside class="note " rel="12517e6f" id="69ea38d4" data-title=""><p id="252ccde3">请注意，如果您可以匿名访问SVN中的某些路径，则在访问其任何子文件夹时，输入的用户名将永远不会用于进行身份验证。将会使用匿名访问。此规则仅适用于<code class="code">svn://</code>和<code class="code">http(s)://</code>协议；即，如果您具有使用此VCS Root + <a href="vcs-checkout-rules.html">VCS Checkout规则</a>的组合的构建配置，该<a href="vcs-checkout-rules.html">规则</a>引用了另一构建配置的受限路径上方的非受限路径，则<i id="d18c5876">即使</i>您指定了正确的用户名/密码，受限路径下的更改也将被忽略。 VCS根本身。</p></aside></div><a name="SSHsettings"></a><a name="SSH-settings"></a><div class="chapter"><h2 id="Subversion-SSHsettings">SSH设置</h2><div class="table-wrapper"><table width="100%" id="2320f2fa"><thead><tr id="3167d4e8" class="ijRowHead"><th id="d65ed1fe"><p id="19296d30">选项</p></th><th id="e86cab0d"><p id="333ba1f1">描述</p></th></tr></thead><tbody><tr id="32a9e979" class="ijRowOdd"><td id="f9d5e818"><p id="e80943bd">私钥文件路径</p></td><td id="23ce81b9"><p id="56c854aa">指定包含OpenSSH格式的私钥的文件的完整路径。</p><p id="33257ac4">您还可以指定<a href="ssh-keys-management.html">上传到TeamCity</a>的<a href="ssh-keys-management.html">SSH密钥</a></p></td></tr><tr id="9b2d4ef3" class="ijRowEven"><td id="2e86dcf3"><p id="2f78b299">私钥文件密码</p></td><td id="6eb0d850"><p id="012ff6e4">输入SSH私钥的密码。</p></td></tr><tr id="f8e1039e" class="ijRowOdd"><td id="a80b9f97"><p id="f859e900">SSH端口</p></td><td id="68227973"><p id="f6f11dce">指定SSH使用的端口。</p></td></tr></tbody></table></div><p id="72870db3">密钥仅支持OpenSSH格式。必须将TeamCity不支持的格式的密钥转换为OpenSSH格式（例如，Putty私钥（ <code class="code">*.ppk</code> ）可以使用<code class="code">PuTTYgen.exe</code> ：请参见转化>导出OpenSSH密钥）。</p></div><a name="Checkoutonagentsettings"></a><a name="Checkout-on-agent-settings"></a><div class="chapter"><h2 id="Subversion-Checkoutonagentsettings">检出代理设置</h2><div class="table-wrapper"><table width="100%" id="0ea35259"><thead><tr id="069ed436" class="ijRowHead"><th id="92c3b62f"><p id="075bf9c8">选项</p></th><th id="66d6b81e"><p id="945fe91d">描述</p></th></tr></thead><tbody><tr id="5734abad" class="ijRowOdd"><td id="c0f7cf96"><p id="e67f7226">工作副本格式</p></td><td id="b672f2f8"><p id="9905e5ef">选择工作副本的格式。此选项的可用值为1.4到1.8（当前默认值）。<br>此选项定义位于以下位置的Subversion文件的格式版本<code class="code">.svn</code>目录，当使用<a href="vcs-checkout-mode.html#agent-checkout">代理模式检出</a>时。在两种情况下，指定的格式很重要：</p><ul class="list _ul"><li class="list__item" id="e2d00b7b"><p>如果运行命令行<code class="code">svn</code> TeamCity检出的文件上的命令。例如，如果您的工作副本的版本为1.5，则将无法使用Subversion 1.4二进制文件对其进行操作。</p></li><li class="list__item" id="11c3e467"><p>如果您使用新的Subversion功能；例如，在Subversion 1.6中添加的基于文件的外部组件。因此，除非将工作副本格式设置为1.6，否则基于文件的外部组件<b id="bd12f236">在代理</b>模式下的<b id="bd12f236">签出</b>中将不可用。</p></li></ul></td></tr><tr id="026ba26f" class="ijRowEven"><td id="bcb79e16"><p id="d4e201af">更新前还原</p></td><td id="0992d629"><p id="4c157a6a">如果选择了该选项，则TeamCity始终运行<code class="code">svn revert</code>更新源代码之前执行命令；也就是说，它将还原位于checkout目录中的版本文件中的所有更改。如果禁用该选项并且在更新过程中检测到本地修改，TeamCity将运行<code class="code">svn revert</code>更新后。<br>还原期间，TeamCity不会删除工作目录中非版本化的文件。要删除非版本文件，请考虑使用<a href="build-files-cleaner-swabra.html">Swabra</a> 。</p></td></tr></tbody></table></div></div><a name="Labelingsettings"></a><a name="Labeling-settings"></a><div class="chapter"><h2 id="Subversion-Labelingsettings">标签设定</h2><div class="table-wrapper"><table width="100%" id="21bd2778"><thead><tr id="0edfbccb" class="ijRowHead"><th id="1bfb2d0b"><p id="4dad9840">选项</p></th><th id="dec01d44"><p id="9bb26263">描述</p></th></tr></thead><tbody><tr id="059471ac" class="ijRowOdd"><td id="1a5e0781"><p id="39652d23">标签规则</p></td><td id="c45346cc"><p id="f6dffcba">指定一组以换行符分隔的规则，这些规则定义了存储库的结构。有关更多详细信息，请参见<a href="vcs-labeling.html#Subversion-Labeling-Rules">详细的格式说明</a> 。</p></td></tr></tbody></table></div></div><a name="AuthenticationforSVNexternals"></a><a name="Authentication-for-SVN-externals"></a><div class="chapter"><h2 id="Subversion-AuthenticationforSVNexternals">SVN外部验证</h2><p id="ddbd755e">TeamCity不允许在用户界面中显式指定SVN外部身份验证参数。要在SVN外部服务器上进行身份验证，请使用以下方法：</p><ul class="list _ul"><li class="list__item" id="d0c614d7"><p>使用与主存储库相同的凭据（用户名/密码）进行身份验证</p></li><li class="list__item" id="ea4f9542"><p>在没有显式用户名/密码的情况下进行身份验证。在这种情况下，凭据应该已可用于svn进程（通常，它们存储在subversion配置目录中）。因此，这需要在<a href="#SVN-Connection-Settings">SVN连接设置</a>下设置正确的“配置目录”或“默认配置目录”选项</p></li></ul><p id="2198f400">当TeamCity必须连接到SVN外部设备时，它使用以下顺序：</p><ul class="list _ul"><li class="list__item" id="2625d24b"><p>如果SVN外部URL与主存储库具有相同的前缀（匹配项> 20个字符），TeamCity将首先尝试主存储库凭据，如果出现故障，则尝试在没有用户名/密码的情况下进行连接（因此，他们选择了从SVN配置目录）</p></li><li class="list__item" id="75d528b3"><p>如果SVN外部URL与主存储库明显不同，则TeamCity尝试在没有用户名/密码的情况下进行连接，如果出现故障，请尝试使用主存储库中的凭据</p></li></ul></div><a name="Timeouts"></a><a name="Timeouts"></a><div class="chapter"><h2 id="Subversion-Timeouts">超时时间</h2><p id="cf2f3f14">有时，远程SVN服务器的SVN检出操作可能会失败，并显示以下错误： <code class="code">svn: E175002: timed out waiting for server</code> 。通常，这可能是由于网络速度慢或SVN服务器过载导致的。可以配置连接和读取操作的超时值。</p><a name="Connectiontimeout"></a><a name="Connection-timeout"></a><div class="chapter"><h3 id="Subversion-Connectiontimeout">连接超时</h3><p id="ea34718e">当TeamCity创建与SVN服务器的连接时，将应用连接超时。此操作的默认超时为<b id="4e5ca868">60秒</b> ，可以通过TeamCity内部属性指定<code class="code">teamcity.svn.connect.timeout</code> ， 很快。对于服务器端检出和代理程序端检出，该属性的值设置不同：</p><ul class="list _ul"><li class="list__item" id="f9d4b51e"><p>服务器端操作– <a href="configuring-teamcity-server-startup-properties.html#TeamCity-internal-properties">配置内部属性</a></p></li><li class="list__item" id="8f1b2948"><p>代理方结帐– <a href="configuring-build-agent-startup-properties.html#Agent-Properties">添加启动属性</a></p></li></ul></div><a name="Readtimeout"></a><a name="Read-timeout"></a><div class="chapter"><h3 id="Subversion-Readtimeout">读取超时</h3><p id="da955a07">建立与SVN服务器的连接并且TeamCity正在等待来自服务器的数据时，将使用读取超时。超时值取决于SVN服务器访问协议。</p><a name="SubversionserveraccessviaHTTP/HTTPS(bothserver/agent)"></a><a name="Subversion-server-access-via-HTTP/HTTPS-(both-server/agent)"></a><div class="chapter"><h4 id="Subversion-SubversionserveraccessviaHTTP/HTTPS(bothserver/agent)">通过HTTP / HTTPS（服务器/代理）进行Subversion服务器访问</h4><p id="4ec75375">对于HTTP读取超时，TeamCity使用<code class="code">http-timeout</code>在中指定的设置<code class="code">servers</code> Subversion配置目录中的文件。在Win32系统上，此目录通常位于用户的配置文件目录的“应用程序数据”区域中。在Unix / Mac上，该目录通常命名为<code class="code">$HOME/.subversion</code>适用于运行TeamCity服务器/代理的用户帐户。</p><p id="b97198dd">如果未指定，则超时的默认值为1小时。</p></div><a name="Subversionserveraccessviasvn://orsvnssh://"></a><a name="Subversion-server-access-via-svn://-or-svn-ssh://"></a><div class="chapter"><h4 id="Subversion-Subversionserveraccessviasvn://orsvnssh://">通过svn：//或svn + ssh：//访问Subversion服务器</h4><p id="4c39ebd5">在这种情况下，可以通过TeamCity内部属性以秒为单位指定读取超时<code class="code">teamcity.svn.read.timeout</code> 。默认值为30分钟。对于服务器端检出和代理程序端检出，该属性的值设置不同：</p><ul class="list _ul"><li class="list__item" id="d3b9155f"><p>服务器端操作– <a href="configuring-teamcity-server-startup-properties.html#TeamCity-internal-properties">配置内部属性</a></p></li><li class="list__item" id="3200fb7c"><p>代理方结帐– <a href="configuring-build-agent-startup-properties.html#Agent-Properties">添加启动属性</a></p></li></ul></div></div></div><a name="Miscellaneous"></a><a name="Miscellaneous"></a><div class="chapter"><h2 id="Subversion-Miscellaneous">杂</h2><p id="5b17fd72">具有目录的目录不被视为已更改<code class="code">svn:mergeinfo</code> Subversion属性仅更改。查看<a href="http://youtrack.jetbrains.com/issue/TW-11452#comment=27-509638" rel="noopener noreferrer" data-external="true" target="_blank">详细信息</a> 。</p><hr id="3d8baf00"><p id="bbd753b0"><b id="34f4d5d3">也可以看看：</b></p><p id="b9dc894b"><b id="4b78cea7">管理员指南</b> ： <a href="configuring-vcs-settings.html">配置VCS设置</a> | <a href="vcs-checkout-mode.html">VCS Checkout模式</a></p><hr id="358a8261"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>