<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Maven Server-Side Settings - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Maven Server-Side Settings" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/maven-server-side-settings.md|Maven Server-Side Settings" data-main-title="Maven Server-Side Settings" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/maven-server-side-settings.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Maven Server-Side Settings" id="maven-server-side-settings.md">Maven Server-Side Settings</h1><a name="MavenSettingsResolutionontheServerSide"></a><a name="Maven-Settings-Resolution-on-the-Server-Side"></a><div class="chapter"><h2 id="MavenServer-SideSettings-MavenSettingsResolutionontheServerSide">Maven Settings Resolution on the Server Side</h2><p id="211ca860">The TeamCity server invokes Maven on the server side for functionality like Maven dependency triggers and  the Maven model display on the "Maven" build configuration tab.</p><p id="7a58939a">You can upload Maven settings using the <b id="0b5f553c">Administration | Project Settings | Maven Settings</b> tab and then select one of the uploaded settings on the <a href="maven.html">Maven step</a> settings.</p><p id="a9bbc0d0">During the process, TeamCity uses the usual Maven logic for finding the <code class="code">settings.xml</code> files with several differences (see below).</p><a name="GlobalSettings"></a><a name="Global-Settings"></a><div class="chapter"><h3 id="MavenServer-SideSettings-GlobalSettings">Global Settings</h3><p id="7ed0d414">Maven <i id="2b719a03">global-level</i> settings are used from the <code class="code">.xml</code> file in the default Maven location for the TeamCity server process: <code class="code">${env.M2_HOME}/conf/settings.xml</code> or <code class="code">${system.maven.home}/conf/settings.xml</code>.<br>The global values of <code class="code">M2_HOME</code> environment variable and<code class="code">maven.home</code> JVM option are used set for the TeamCity server process.</p></div><a name="User-LevelSettings"></a><a name="User-Level-Settings"></a><div class="chapter"><h3 id="MavenServer-SideSettings-User-LevelSettings">User-Level Settings</h3><p id="43a88328">Maven <i id="e512e104">user-level</i> settings are defined in the <b id="93b1b250">User settings selection</b> <a href="maven.html#User-Settings">section</a> of the Maven build step of the build configuration (if there are several Maven steps, settings from the first one are used).</p><p id="8a81429e">The following options are available:</p><div class="table-wrapper"><table width="100%" id="22c9e708"><thead><tr id="52eb03c8" class="ijRowHead"><th id="6ff345d1"><p id="be4b6c9a">Value</p></th><th id="2a4cabb1"><p id="705710a2">Description</p></th></tr></thead><tbody><tr id="ce31e018" class="ijRowOdd"><td id="1d7023c8"><p id="b1cf0999">&lt;Default&gt;</p></td><td id="6eeafc91"><p id="29a4194d">TeamCity searches the following locations for the <code class="code">settings.xml</code> file (listed in order of priority):</p><ol class="list _decimal"><li class="list__item" id="043432cf"><code class="code">&lt;</code><a href="teamcity-data-directory.html"><code class="code">TeamCity Data Directory</code></a><code class="code">&gt;/system/pluginData/maven/settings.xml</code></li><li class="list__item" id="26757fd1"><p><code class="code">&lt;User Home&gt;/.m2/settings.xml</code> (The home directory of the user under whom the TeamCity server process runs is used)</p></li></ol></td></tr><tr id="bc983409" class="ijRowEven"><td id="06db488a"><p id="934ae159">&lt;Custom&gt;</p></td><td id="58e51a39"><p id="54dd6cc1">The path to the file is provided by user. The file should be available both on the server and all the agents where the build will be run.</p></td></tr><tr id="031170ee" class="ijRowOdd"><td id="e4204be0"><p id="93971b4a">Uploaded settings name</p></td><td id="0a2da2bd"><p id="6bdd2446">TeamCity automatically uses the specified file content both on the server and agents. Maven settings are defined on the project level: the <b id="0d852792">Project Settings</b> | <b id="c533be11">Maven Settings</b> tab. The settings are stored in the <code class="code">&lt;</code><a href="teamcity-data-directory.html"><code class="code">TeamCity Data Directory</code></a><code class="code">&gt;/config/projects/&lt;projectID&gt;/pluginData/mavenSettings</code> directory.</p><aside class="note " data-title="" rel="6bdd2446" id="c28046f3"><p id="91d6139b">The settings are available in the current project and its subprojects. To override the inherited settings, in a subproject create a new settings file with the same name as the inherited one.</p></aside></td></tr></tbody></table></div><p id="580c126c">For the logic of Maven settings, refer to the related Maven <a href="http://maven.apache.org/settings.html" data-external="true" target="_blank" rel="noopener noreferrer">documentation</a>.</p><p id="f3576a87">User-level settings can be configured in the <a href="configuring-maven-triggers.html#Maven-Artifact-Dependency-Trigger">Maven Artifact Dependency Trigger</a>.</p><hr id="87d4de04"><p id="8090a3aa"><b id="89380bb8">See also:</b></p><p id="59a10c67"><b id="bb1437a2">Administrator's Guide</b>: <a href="maven.html">Maven</a> | <a href="configuring-maven-triggers.html">Maven Artifact Dependency Trigger</a></p><hr id="d45ee0ed"></div></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>