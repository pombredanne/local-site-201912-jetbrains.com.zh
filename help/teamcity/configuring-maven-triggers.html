<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Configuring Maven Triggers - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Configuring Maven Triggers" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-build-triggers.md|Configuring Build Triggers/configuring-maven-triggers.md|Configuring Maven Triggers" data-main-title="Configuring Maven Triggers" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/configuring-maven-triggers.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Configuring Maven Triggers" id="configuring-maven-triggers.md">Configuring Maven Triggers</h1><p id="ffff2974">The <b id="b6a738d4">Triggers</b> page of the Build Configuration Settings allows you to add the following Maven dependency triggers:</p><p id="ff6dba4c"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#ConfiguringMavenTriggers-MavenSnapshotDependencyTrigger">Maven Snapshot Dependency Trigger</a></li><li class="list__item"><a href="#ConfiguringMavenTriggers-MavenArtifactDependencyTrigger">Maven Artifact Dependency Trigger</a><ul class="list _bullet"><li class="list__item"><a href="#ConfiguringMavenTriggers-AdvancedOptions">Advanced Options</a></li><li class="list__item"><a href="#ConfiguringMavenTriggers-VersionRanges">Version Ranges</a></li></ul></li></ul></p><p id="3e3059e6"><b id="3d9da270">Checksum Based Triggering</b></p><p id="1ffc2d48">The trigger checks if the content of the dependency has actually changed by verifying its checksum from the repository against the locally stored version. Before triggering a build, TeamCity tries to determine the checksum of the required dependency by downloading the file digest (MD5/SHA-1) associated with that artifact.</p><p id="fa26dbec">If the checksum can be retrieved, and it matches a locally stored one, no build is triggered. If the checksum is different, a build is triggered.</p><p id="a93bc0b0">If the checksum cannot be retrieved from the remote server, the dependency will be downloaded, TeamCity will calculate its checksum and follow the build triggering mechanism described above.</p><a name="MavenSnapshotDependencyTrigger"></a><a name="Maven-Snapshot-Dependency-Trigger"></a><div class="chapter"><h2 id="ConfiguringMavenTriggers-MavenSnapshotDependencyTrigger">Maven Snapshot Dependency Trigger</h2><p id="a9cfbe49">Maven snapshot dependency trigger adds a new build to the queue when there is a real modification of the snapshot dependency content in the remote repository which is detected by the checksum change.</p><p id="90ce1564">Dependency artifacts are resolved according to the POM and the server-side <a href="maven-server-side-settings.html">Maven Settings</a>.</p><aside class="note " data-title="" rel="90ce1564" id="141f564f"><p id="1dfea256">Note that since Maven deploys artifacts to remote repositories sequentially during a build, not all artifacts may be up-to-date at the moment the snapshot dependency trigger detects the first updated artifact. To avoid inconsistency, select the <b id="e5934d24">Do not trigger a build if currently running builds can produce snapshot dependencies</b> check box when adding this trigger, which will ensure the build won't start while builds producing snapshot dependencies are still running.</p></aside><aside class="note " data-title="" rel="ConfiguringMavenTriggers-MavenSnapshotDependencyTrigger" id="85de1c03"><p id="b1de54ab"><b id="dcda9b2e">Simultaneous usage of snapshot dependency and dependency trigger for a build</b>Assume build A depends on build B by both snapshot and trigger dependency. Then, after the build B finishes, build A will be added into the queue, only if build B is not a part of the build chain containing A.</p></aside></div><a name="MavenArtifactDependencyTrigger"></a><a name="Maven-Artifact-Dependency-Trigger"></a><div class="chapter"><h2 id="ConfiguringMavenTriggers-MavenArtifactDependencyTrigger">Maven Artifact Dependency Trigger</h2><p id="f4d126d1">Maven artifact dependency trigger adds build to the queue when there is a real modification of the dependency content which is detected by the checksum change.</p><p id="7fabf1dc">To add a trigger, specify the following parameters in the <b id="c2b20ad3">Add New Trigger</b> dialog:</p><div class="table-wrapper"><table width="100%" id="18f029fe"><thead><tr id="f79f31e9" class="ijRowHead"><th id="cb7435fd"><p id="f9a57be5">Parameter</p></th><th id="2f660f03"><p id="4a3309a6">Description</p></th></tr></thead><tbody><tr id="1e61c87a" class="ijRowOdd"><td id="a2305265"><p id="6c51c76c">Group Id</p></td><td id="83f6d927"><p id="9820461f">Specify an identifier of a group the desired Maven artifact belongs to.</p></td></tr><tr id="9bd25dd1" class="ijRowEven"><td id="cfbd1bca"><p id="fbda8918">Artifact Id</p></td><td id="592e5e53"><p id="8fd4407c">Specify the artifact's identifier.</p></td></tr><tr id="c6180a3d" class="ijRowOdd"><td id="29a27653"><p id="a8cd3ba6">Version or Version range</p></td><td id="b8847f1a"><p id="c03c7c67">Specify a version or version range of the artifact. The version range syntax is described in the <a href="#Version-Ranges">section</a> below. SNAPSHOT versions can also be used.</p></td></tr><tr id="08c5e579" class="ijRowEven"><td id="67aae6ed"><p id="ca5b3072">Type</p></td><td id="77f8bfa5"><p id="9dda9063">Define explicitly the type of the specified artifact. By default, the type is <code class="code">jar</code>.</p></td></tr><tr id="5ced187f" class="ijRowOdd"><td id="277e3415"><p id="e70597e3">Classifier</p></td><td id="c0e9e1c4"><p id="a648e93b">(Optional) Specify the classifier of an artifact.</p></td></tr><tr id="21bb00ff" class="ijRowEven"><td id="57a8dc34"><p id="29bbb9a4">Maven repository URL</p></td><td id="cb3e459e"><p id="82c8558c">Specify a URL to the Maven repository. Note that this parameter is optional. If the URL is not specified, then:</p><ul class="list _ul"><li class="list__item" id="296e8755"><p>For a Maven project the repository URL is determined from the POM and the server-side <a href="maven-server-side-settings.html#Maven-Settings-Resolution-on-the-Server-Side">Maven Settings</a></p></li><li class="list__item" id="cbe7c22a"><p>For a non-Maven project the repository URL is determined from the server-side <a href="maven-server-side-settings.html#Maven-Settings-Resolution-on-the-Server-Side">Maven Settings</a> only</p></li></ul></td></tr><tr id="cb197e3d" class="ijRowOdd"><td id="15a7e773"><p id="aee343fe">Do not trigger a build if currently running builds can produce this artifact</p></td><td id="f2d2f0b6"><p id="8952f735">Select this option to trigger a build only after the build that produces artifacts used here is finished.</p></td></tr></tbody></table></div><a name="AdvancedOptions"></a><a name="Advanced-Options"></a><div class="chapter"><h3 id="ConfiguringMavenTriggers-AdvancedOptions">Advanced Options</h3><p id="329697e2">Since <b id="672d8fb3">TeamCity 9.0</b>, the following advanced options have been added to the trigger:</p><div class="table-wrapper"><table width="100%" id="098e5320"><thead><tr id="daeb5340" class="ijRowHead"><th id="48152470"><p id="4fd1e7a6">Parameter</p></th><th id="1a61c071"><p id="dde05c01">Description</p></th></tr></thead><tbody><tr id="72a596ff" class="ijRowOdd"><td id="ca483bc0"><p id="c61b6762">Repository ID</p></td><td id="3be21164"><p id="c5141321">Allows using authorization from the effective Maven settings</p></td></tr><tr id="2c09984d" class="ijRowEven"><td id="a7d63283"><p id="d1d5fa01">User settings selection</p></td><td id="21f654c9"><p id="32b03f5b">Allows selecting effective settings. The same as <a href="maven.html#User-Settings">User Settings</a> of the Maven runner.</p></td></tr></tbody></table></div><p id="b4746556">TeamCity determines the <b id="0fcf5a59">effective repository</b> to be checked for the artifact updates and to trigger builds if changes are detected as follows:</p><ul class="list _ul"><li class="list__item" id="36ae749e"><p>if a URL and Repository ID are set, authentication will be chosen from the effective settings (see below)</p></li><li class="list__item" id="86693993"><p>if only a URL is set, the old behavior is preserved: a temporary repository ID is used ("_tc_temp_remote_repo")</p></li><li class="list__item" id="1dda4dd9"><p>if URL is not set (regardless of the Repository ID), the artifact will be looked up in a repository available according to the effective settings.</p></li></ul><p id="e9f5bb10">TeamCity determines <b id="5c291b7a">effective settings</b> as follows:</p><ul class="list _ul"><li class="list__item" id="ddb214b1"><p>in the trigger settings a user can choose among the default, custom or uploaded Maven settings. See <a href="maven-server-side-settings.html">Maven Server-Side Settings</a> for details.</p></li><li class="list__item" id="697648f4"><p>if no specific settings are configured for the trigger, <a href="maven.html">Maven</a> build step settings are used</p></li><li class="list__item" id="3d8365cf"><p>if no settings for the trigger are configured and there are no Maven build steps, the <code class="code">default</code> <a href="maven-server-side-settings.html">server Maven settings</a> will be used.</p></li></ul></div><a name="VersionRanges"></a><a name="Version-Ranges"></a><div class="chapter"><h3 id="ConfiguringMavenTriggers-VersionRanges">Version Ranges</h3><p id="3d973d5f">For specifying version ranges use the following syntax, as <a href="http://docs.codehaus.org/display/MAVEN/Dependency+Mediation+and+Conflict+Resolution#DependencyMediationandConflictResolution-DependencyVersionRanges" data-external="true" target="_blank" rel="noopener noreferrer">proposed in the Maven documentation</a>.</p><p id="114a61e0">Note that Maven Artifact Dependency Trigger can be used not only for fixed-version artifacts but also for snapshots as a fine-grained alternative to the Maven Snapshots Dependency Trigger.</p><div class="table-wrapper"><table width="100%" id="edfc6a82"><thead><tr id="0cc12d6d" class="ijRowHead"><th id="fce3619d"><p id="a4f8c2bf">Range</p></th><th id="558629ec"><p id="1c8364b2">Meaning</p></th></tr></thead><tbody><tr id="9ebf6c60" class="ijRowOdd"><td id="09dd292d"><p id="a2590819"><code class="code">(,1.0]</code></p></td><td id="6d2dcf67"><p id="576f3439">x &lt;= 1.0</p></td></tr><tr id="3afbfc85" class="ijRowEven"><td id="4ca0c4a0"><p id="63f28566"><code class="code">1.0</code></p></td><td id="d85cfa95"><p id="42466e95">"Soft" requirement on 1.0 (just a recommendation - helps select the correct version if it matches all ranges)</p></td></tr><tr id="3de79800" class="ijRowOdd"><td id="03378524"><p id="f106777c"><code class="code">[1.0]</code></p></td><td id="5aa62800"><p id="c58bf860">Hard requirement on 1.0</p></td></tr><tr id="7d86cf4a" class="ijRowEven"><td id="07510577"><p id="73dd3476"><code class="code">[1.2,1.3]</code></p></td><td id="05882d33"><p id="41a5f4ca">1.2 &lt;= x &lt;= 1.3</p></td></tr><tr id="f45e887e" class="ijRowOdd"><td id="0f53290d"><p id="ead3a8e2"><code class="code">[1.0,2.0)</code></p></td><td id="20a58bca"><p id="8adff138">1.0 &lt;= x &lt; 2.0</p></td></tr><tr id="27363e88" class="ijRowEven"><td id="aaeb59ae"><p id="2ac2d6c8"><code class="code">[1.5,)</code></p></td><td id="d23e2d10"><p id="6148ed1f">x &gt;= 1.5</p></td></tr><tr id="e19d2cc6" class="ijRowOdd"><td id="dfd7dfac"><p id="4145898f"><code class="code">(,1.0],[1.2,)</code></p></td><td id="0e783709"><p id="657afed6">x &lt;= 1.0 or x &gt;= 1.2. Multiple sets are comma-separated</p></td></tr><tr id="b828c19a" class="ijRowEven"><td id="0aec399d"><p id="e12d2446"><code class="code">(,1.1),(1.1,)</code></p></td><td id="d52b6947"><p id="9eda7aca">This excludes 1.1, if it is known not to work in combination with this library</p></td></tr><tr id="fa8d8d69" class="ijRowOdd"><td id="16f495d1"><p id="023c0ac6">1.0-SNAPSHOT</p></td><td id="bc777394"><p id="33986397">The trigger will check the latest snapshot version for updates</p></td></tr></tbody></table></div><hr id="e2bbf773"></div></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>