<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Reporting Test Metadata - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Reporting Test Metadata" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/extending-teamcity.md|Extending TeamCity/reporting-test-metadata.md|Reporting Test Metadata" data-main-title="Reporting Test Metadata" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/reporting-test-metadata.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Reporting Test Metadata" id="reporting-test-metadata.md">Reporting Test Metadata</h1><p id="ee48e034">On this page:</p><p id="e3e50b75"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#ReportingTestMetadata-Reportingadditionaltestdata">Reporting additional test data</a><ul class="list _bullet"><li class="list__item"><a href="#ReportingTestMetadata-Number">Number</a></li><li class="list__item"><a href="#ReportingTestMetadata-String/Text">String/Text</a></li><li class="list__item"><a href="#ReportingTestMetadata-Externallinks">External links</a></li><li class="list__item"><a href="#ReportingTestMetadata-Linkstobuildartifacts">Links to build artifacts</a></li><li class="list__item"><a href="#ReportingTestMetadata-Imagefromartifactsdirectory">Image from artifacts directory</a></li></ul></li><li class="list__item"><a href="#ReportingTestMetadata-Displayingadditionaltestdata">Displaying additional test data</a><ul class="list _bullet"><li class="list__item"><a href="#ReportingTestMetadata-Additionaltestdataforafailedtest">Additional test data for a failed test</a></li><li class="list__item"><a href="#ReportingTestMetadata-Additionaltestdatagraphfornumericvalues">Additional test data graph for numeric values</a></li><li class="list__item"><a href="#ReportingTestMetadata-Additionaldataforsuccessfultests">Additional data for successful tests</a></li></ul></li></ul></p><p id="8063670a"><b id="2c3fba17">Since TeamCity 2018.2</b>, a test run in TeamCity can be associated with some additional information (metadata), complementing test status, execution time, and output. This information can be used to provide extra logs, screenshots, numeric values, tags, and so on.<br>You can now use service messages to report this kind of additional test data in TeamCity and then view it in the TeamCity web UI.</p><a name="Reportingadditionaltestdata"></a><a name="Reporting-additional-test-data"></a><div class="chapter"><h2 id="ReportingTestMetadata-Reportingadditionaltestdata">Reporting additional test data</h2><p id="f3ba97a2">Additional test data is reported using the <code class="code">testMetadata</code> service message, with the following attributes:</p><ul class="list _ul"><li class="list__item" id="795033b1"><p><code class="code">name</code> (optional) is a name of the metadata item, used to distinguish different metadata items for the same test and to show this item in UI. When omitted, TeamCity autogenerates the name, but does not show it in UI.</p></li><li class="list__item" id="9a909854"><p><code class="code">testName</code> (optional) is the name of the test for which this metadata is generated, excluding the suite name. If the service message is reported in the middle of the test or immediately after its finish, the testName attribute can be skipped. If the metadata is reported later, it should contain the full test name, including suites, packages and so on.</p></li><li class="list__item" id="fee1f682"><p><code class="code">value</code> (mandatory) contains the metadata value associated with the test. The max value length is 1024.</p></li><li class="list__item" id="d39b6b22"><p><code class="code">type</code> (optional) defaults to text unless otherwise specified. The type affects how metadata is stored and how its value is shown in the TeamCity UI.</p></li></ul><p id="267387d7">If the format of the service message is incorrect, a corresponding note about it is written into build log.The types of data which can be recognised by TeamCity are as follows:</p><a name="Number"></a><a name="Number"></a><div class="chapter"><h3 id="ReportingTestMetadata-Number">Number</h3><div class="code-block" data-lang="bash">
##teamcity[testMetadata testName='package.Test.testName' name='setUp time' type='number' value='434.5']

</div><p id="b8d34a61">You can see a graph of changes for a numeric value, from build to build for the given test.</p></div><a name="String/Text"></a><a name="String/Text"></a><div class="chapter"><h3 id="ReportingTestMetadata-String/Text">String/Text</h3><div class="code-block" data-lang="bash">##teamcity[testMetadata testName='package.Test.testName' name='some key' value='a text'] 

</div></div><a name="Externallinks"></a><a name="External-links"></a><div class="chapter"><h3 id="ReportingTestMetadata-Externallinks">External links</h3><div class="code-block" data-lang="bash"> ##teamcity[testMetadata testName='test.name' name='JetBrains' type='link' value='https://jetbrains.com']

</div></div><a name="Linkstobuildartifacts"></a><a name="Links-to-build-artifacts"></a><div class="chapter"><h3 id="ReportingTestMetadata-Linkstobuildartifacts">Links to build artifacts</h3><div class="code-block" data-lang="bash"> ##teamcity[testMetadata testName='test.name' type='artifact' value='path/to/catalina.out']

</div><p id="eb9f65d1">The path to the artifact should be relative to the <a href="build-artifact.html">build artifacts directory</a>, and can reference a file inside archive:</p><div class="code-block" data-lang="bash"> ##teamcity[testMetadata testName='test.name' type='artifact' value='logs.zip!/testTyping/full-log.txt']

</div><p id="ae99c8e4">When showing links to artifacts, TeamCity shows both the <code class="code">name</code> and the filename of the referenced image. If name was autogenerated, it is not shown.</p></div><a name="Imagefromartifactsdirectory"></a><a name="Image-from-artifacts-directory"></a><div class="chapter"><h3 id="ReportingTestMetadata-Imagefromartifactsdirectory">Image from artifacts directory</h3><div class="code-block" data-lang="bash">##teamcity[testMetadata testName='test.name' type='image' value='path/to/screenshot.png']

</div><p id="6ac446d7">The path to the image should be relative to the build artifacts directory. When showing images, TeamCity shows both the <code class="code">name</code> and the filename of the referenced image.</p></div></div><a name="Displayingadditionaltestdata"></a><a name="Displaying-additional-test-data"></a><div class="chapter"><h2 id="ReportingTestMetadata-Displayingadditionaltestdata">Displaying additional test data</h2><p id="37d1190d">You can view additional test data in various places in the TeamCity web UI.</p><a name="Additionaltestdataforafailedtest"></a><a name="Additional-test-data-for-a-failed-test"></a><div class="chapter"><h3 id="ReportingTestMetadata-Additionaltestdataforafailedtest">Additional test data for a failed test</h3><p id="c86f1e78">To view additional data for a test, expand the stacktrace: TeamCity shows it before test failure details in a separate Test Metadata section.</p><p id="9c8039f8"><figure><img alt="Additional test data for a failed test" title="Additional test data for a failed test" src="/help/img/teamcity/2019.1/add-test-data-failed-test.png" id="4f30b26d" width="800px" height="1212"></figure></p></div><a name="Additionaltestdatagraphfornumericvalues"></a><a name="Additional-test-data-graph-for-numeric-values"></a><div class="chapter"><h3 id="ReportingTestMetadata-Additionaltestdatagraphfornumericvalues">Additional test data graph for numeric values</h3><p id="23790bc6">To view the test data graph, expand the stacktrace: TeamCity shows it before test failure details in a separate Test Metadata section.</p><p id="42118435"><figure><img alt="Additional test data graph for numeric values" title="Additional test data graph for numeric values" src="/help/img/teamcity/2019.1/add-test-data-num-val.png" id="71a85343" width="800px" height="780"></figure></p></div><a name="Additionaldataforsuccessfultests"></a><a name="Additional-data-for-successful-tests"></a><div class="chapter"><h3 id="ReportingTestMetadata-Additionaldataforsuccessfultests">Additional data for successful tests</h3><p id="902d7735">To view additional data for a successful test, go to the Tests tab or the Test History tab: the OK status for a test is now clickable if additional test data is present:</p><p id="9710e76c"><figure><img alt="Additional data for successful tests" title="Additional data for successful tests" src="/help/img/teamcity/2019.1/add-test-data-success.png" id="911073eb" width="800px" height="1164"></figure></p><hr id="d1e838d1"></div></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>