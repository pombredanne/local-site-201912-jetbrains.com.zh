<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>报告测试元数据-帮助|帮助团队城市</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Reporting Test Metadata" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/extending-teamcity.md|Extending TeamCity/reporting-test-metadata.md|Reporting Test Metadata" data-main-title="Reporting Test Metadata" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/reporting-test-metadata.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="reporting-test-metadata.md" data-toc="Reporting Test Metadata">报告测试元数据</h1><p id="ee48e034">在此页：</p><p id="e3e50b75"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#ReportingTestMetadata-Reportingadditionaltestdata">报告其他测试数据</a><ul class="list _bullet"><li class="list__item"><a href="#ReportingTestMetadata-Number">数</a></li><li class="list__item"><a href="#ReportingTestMetadata-String/Text">字串/文字</a></li><li class="list__item"><a href="#ReportingTestMetadata-Externallinks">外部链接</a></li><li class="list__item"><a href="#ReportingTestMetadata-Linkstobuildartifacts">链接到构建工件</a></li><li class="list__item"><a href="#ReportingTestMetadata-Imagefromartifactsdirectory">来自工件目录的图像</a></li></ul></li><li class="list__item"><a href="#ReportingTestMetadata-Displayingadditionaltestdata">显示其他测试数据</a><ul class="list _bullet"><li class="list__item"><a href="#ReportingTestMetadata-Additionaltestdataforafailedtest">测试失败的其他测试数据</a></li><li class="list__item"><a href="#ReportingTestMetadata-Additionaltestdatagraphfornumericvalues">数值的附加测试数据图</a></li><li class="list__item"><a href="#ReportingTestMetadata-Additionaldataforsuccessfultests">成功测试的其他数据</a></li></ul></li></ul><p></p><p id="8063670a"><b id="2c3fba17">从TeamCity 2018.2开始</b> ，在TeamCity中运行的测试可以与一些其他信息（元数据）相关联，以补充测试状态，执行时间和输出。此信息可用于提供额外的日志，屏幕快照，数值，标签等。<br>现在，您可以使用服务消息在TeamCity中报告此类其他测试数据，然后在TeamCity Web UI中查看它们。</p><a name="Reportingadditionaltestdata"></a><a name="Reporting-additional-test-data"></a><div class="chapter"><h2 id="ReportingTestMetadata-Reportingadditionaltestdata">报告其他测试数据</h2><p id="f3ba97a2">使用<code class="code">testMetadata</code>服务消息，具有以下属性：</p><ul class="list _ul"><li class="list__item" id="795033b1"><p><code class="code">name</code> （可选）是元数据项的名称，用于区分同一测试的不同元数据项并在UI中显示该项目。如果省略，TeamCity会自动生成名称，但不会在UI中显示它。</p></li><li class="list__item" id="9a909854"><p><code class="code">testName</code> （可选）是为其生成此元数据的测试的名称，但套件名称除外。如果在测试中间或测试结束后立即报告服务消息，则可以跳过testName属性。如果稍后报告元数据，则该元数据应包含完整的测试名称，包括套件，软件包等。</p></li><li class="list__item" id="fee1f682"><p><code class="code">value</code> （必填）包含与测试关联的元数据值。最大值长度为1024。</p></li><li class="list__item" id="d39b6b22"><p><code class="code">type</code> （可选）除非另有说明，否则默认为文本。类型会影响元数据的存储方式以及在TeamCity UI中如何显示其值。</p></li></ul><p id="267387d7">如果服务消息的格式不正确，则将有关它的相应注释写入构建日志中。TeamCity可以识别的数据类型如下：</p><a name="Number"></a><a name="Number"></a><div class="chapter"><h3 id="ReportingTestMetadata-Number">数</h3><div class="code-block" data-lang="bash">## teamcity [testMetadata testName ='package。Test.testName'name ='setUp time'type ='number'value ='434.5']</div><p id="b8d34a61">您可以看到一个数字值的变化图，从给定测试的构建到构建。</p></div><a name="String/Text"></a><a name="String/Text"></a><div class="chapter"><h3 id="ReportingTestMetadata-String/Text">字串/文字</h3><div class="code-block" data-lang="bash">## teamcity [testMetadata testName ='package。Test.testName'name ='some key'value ='a text']</div></div><a name="Externallinks"></a><a name="External-links"></a><div class="chapter"><h3 id="ReportingTestMetadata-Externallinks">外部链接</h3><div class="code-block" data-lang="bash">## teamcity [testMetadata testName ='test.name'name ='JetBrains'type ='link'value ='https：//jetbrains.com']</div></div><a name="Linkstobuildartifacts"></a><a name="Links-to-build-artifacts"></a><div class="chapter"><h3 id="ReportingTestMetadata-Linkstobuildartifacts">链接到构建工件</h3><div class="code-block" data-lang="bash">## teamcity [testMetadata testName ='test.name'type ='artifact'value ='path / to / catalina.out']</div><p id="eb9f65d1">工件的路径应相对于<a href="build-artifact.html">build artifacts目录</a> ，并且可以引用归档文件中的文件：</p><div class="code-block" data-lang="bash">## teamcity [testMetadata testName ='test.name'type ='artifact'value ='logs.zip！/testTyping/full-log.txt']</div><p id="ae99c8e4">当显示到工件的链接时，TeamCity同时显示<code class="code">name</code>以及参考图片的文件名。如果名称是自动生成的，则不会显示。</p></div><a name="Imagefromartifactsdirectory"></a><a name="Image-from-artifacts-directory"></a><div class="chapter"><h3 id="ReportingTestMetadata-Imagefromartifactsdirectory">来自工件目录的图像</h3><div class="code-block" data-lang="bash">## teamcity [testMetadata testName ='test.name'type ='image'value ='path / to / screenshot.png']</div><p id="6ac446d7">映像的路径应相对于构建工件目录。显示图像时，TeamCity同时显示<code class="code">name</code>以及参考图片的文件名。</p></div></div><a name="Displayingadditionaltestdata"></a><a name="Displaying-additional-test-data"></a><div class="chapter"><h2 id="ReportingTestMetadata-Displayingadditionaltestdata">显示其他测试数据</h2><p id="37d1190d">您可以在TeamCity Web UI的各个位置查看其他测试数据。</p><a name="Additionaltestdataforafailedtest"></a><a name="Additional-test-data-for-a-failed-test"></a><div class="chapter"><h3 id="ReportingTestMetadata-Additionaltestdataforafailedtest">测试失败的其他测试数据</h3><p id="c86f1e78">要查看测试的其他数据，请展开stacktrace：TeamCity在单独的“测试元数据”部分中的测试失败详细信息之前显示它。</p><p id="9c8039f8"></p><figure><img alt="测试失败的其他测试数据" title="测试失败的其他测试数据" src="/help/img/teamcity/2019.1/add-test-data-failed-test.png" id="4f30b26d" width="800px" height="1212"></figure><p></p></div><a name="Additionaltestdatagraphfornumericvalues"></a><a name="Additional-test-data-graph-for-numeric-values"></a><div class="chapter"><h3 id="ReportingTestMetadata-Additionaltestdatagraphfornumericvalues">数值的附加测试数据图</h3><p id="23790bc6">要查看测试数据图，请展开stacktrace：TeamCity在单独的“测试元数据”部分中的测试失败详细信息之前显示它。</p><p id="42118435"></p><figure><img alt="数值的附加测试数据图" title="数值的附加测试数据图" src="/help/img/teamcity/2019.1/add-test-data-num-val.png" id="71a85343" width="800px" height="780"></figure><p></p></div><a name="Additionaldataforsuccessfultests"></a><a name="Additional-data-for-successful-tests"></a><div class="chapter"><h3 id="ReportingTestMetadata-Additionaldataforsuccessfultests">成功测试的其他数据</h3><p id="902d7735">要查看成功测试的其他数据，请转到“测试”选项卡或“测试历史记录”选项卡：如果存在其他测试数据，则现在可以单击测试的“确定”状态：</p><p id="9710e76c"></p><figure><img alt="成功测试的其他数据" title="成功测试的其他数据" src="/help/img/teamcity/2019.1/add-test-data-success.png" id="911073eb" width="800px" height="1164"></figure><p></p><hr id="d1e838d1"></div></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>