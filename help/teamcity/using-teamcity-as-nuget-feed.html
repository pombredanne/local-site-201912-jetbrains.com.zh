<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>将TeamCity用作NuGet提要-帮助|帮助团队城市</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Using TeamCity as NuGet Feed" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/nuget.md|NuGet/using-teamcity-as-nuget-feed.md|Using TeamCity as NuGet Feed" data-main-title="Using TeamCity as NuGet Feed" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/using-teamcity-as-nuget-feed.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="using-teamcity-as-nuget-feed.md" data-toc="Using TeamCity as NuGet Feed">使用TeamCity作为NuGet提要</h1><p id="e3263749">例如，如果要将NuGet软件包发布给有限的受众，以供内部使用，则可以将<a href="https://docs.microsoft.com/en-us/nuget/hosting-packages/overview" rel="noopener noreferrer" data-external="true" target="_blank">TeamCity用作NuGet feed</a> 。<br><b id="21c9a656">从TeamCity 2018.2开始</b> ，您可以在TeamCity中为一个项目配置多个NuGet提要。</p><aside class="note " rel="e3263749" id="21fa608d" data-title=""><p id="fe79870d">在任何受支持的操作系统（Windows，Linux，macOS）上运行的TeamCity都可以用作NuGet提要。</p></aside><p id="2b6fb1b5">在此页：</p><p id="8250af24"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#UsingTeamCityasNuGetFeed-EnablingNuGetFeed">启用NuGet提要</a></li><li class="list__item"><a href="#UsingTeamCityasNuGetFeed-IndexingNuGetPackages">索引NuGet软件包</a><ul class="list _bullet"><li class="list__item"><a href="#UsingTeamCityasNuGetFeed-Indexingpackagespublishedasartifacts">索引发布为工件的软件包</a></li><li class="list__item"><a href="#UsingTeamCityasNuGetFeed-UsingNuGetpushcommand">使用NuGet推送命令</a></li><li class="list__item"><a href="#UsingTeamCityasNuGetFeed-SymbolPackages">符号包</a></li></ul></li><li class="list__item"><a href="#UsingTeamCityasNuGetFeed-UsingTeamCityNuGetFeed">使用TeamCity NuGet提要</a></li></ul><p></p><a name="EnablingNuGetFeed"></a><a name="Enabling-NuGet-Feed"></a><div class="chapter"><h2 id="UsingTeamCityasNuGetFeed-EnablingNuGetFeed">启用NuGet提要</h2><p id="f1f3440b">要开始将TeamCity用作NuGet服务器，您需要在项目级别启用NuGet Feed。</p><p id="71da627a">转到“项目设置”页面上的“ <b id="c152a2c0">NuGet提要</b> ”页面并启用提要。<br><b id="d001b476">从TeamCity 2018.2开始</b> ，内置的TeamCity NuGet提要支持API v1 / v2 / v3。</p><p id="a00d343e">在页面上，您将看到以下提要端点：</p><ul class="list _ul"><li class="list__item" id="82c310af"><code class="code">http://<teamcityUrl>/<authSchema>/app/nuget/feed/<projectName>/<feedName>/v1</code></li><li class="list__item" id="f7493846"><code class="code">http://<teamcityUrl>/<authSchema>/app/nuget/feed/<projectName>/<feedName>/v2</code></li><li class="list__item" id="100f9ad7"><code class="code">http://<teamcityUrl>/<authSchema>/app/nuget/feed/<projectName>/<feedName>/v3/index.json</code></li></ul><p id="c2e50b2c">如果启用了<a href="guest-user.html">来宾用户</a> ，则将看到NuGet源端点的基本HTTP身份验证和来宾身份验证之间的切换。</p><ul class="list _ul"><li class="list__item" id="958d81e2"><p><b id="8ed2fb6c">基本HTTP身份验证</b> （带有httpAuth前缀）-访问包的用户应具有“查看项目”权限。</p></li><li class="list__item" id="e101bd23"><p><b id="196b6499">访客身份验证</b> （带有guestAuth前缀）-如果启用了访客用户登录，则包将对所有有权访问TeamCity服务器的用户可见。</p></li></ul><p id="38279e5b">要引用TeamCity项目提要，请使用以下参数：</p><div class="code-block" data-lang="bash">`teamcity.nuget.feed。 <authschema>。 <projectname>。 <feedname>。<apiversion>
</apiversion></feedname></projectname></authschema></div><p id="3fa28e6b">哪里：</p><ul class="list _ul"><li class="list__item" id="38899647"><p><code class="code">authSchema</code>可能<code class="code">guestAuth</code> / <code class="code">httpAuth</code> * <code class="code">apiVersion</code>是<code class="code">v1</code> / <code class="code">v2</code> / <code class="code">v3</code> ， 例如： <code class="code">teamcity.nuget.feed.httpAuth._Root.default.v2</code> 。</p></li></ul><p id="71119bca">在将TeamCity升级到版本2018.2或更高版本时，不推荐使用的引用全局NuGet提要的参数将自动转换为对默认NuGet提要的引用：</p><div class="table-wrapper"><table width="100%" id="b381dce8"><thead><tr id="20142c50" class="ijRowHead"><th id="e8cacbd4"><p id="ba8d979d">不推荐使用的参考</p></th><th id="2c4abfd0"><p id="1c3c1673">当前参考</p></th></tr></thead><tbody><tr id="1cace999" class="ijRowOdd"><td id="179876f3"><p id="992eb33a"><code class="code">teamcity.nuget.feed.server</code></p></td><td id="c1e667f7"><p id="c4a69fe5"><code class="code">teamcity.nuget.feed.guestAuth._Root.default.v2</code></p></td></tr><tr id="d54b5443" class="ijRowEven"><td id="ea413bb9"><p id="e81af45a"><code class="code">teamcity.nuget.feed.auth.server</code></p></td><td id="2cc9d36d"><p id="6e2694d2"><code class="code">teamcity.nuget.feed.httpAuth._Root.default.v2</code></p></td></tr><tr id="73ff3ddd" class="ijRowOdd"><td id="3ee7706d"><p id="7d658d41"><code class="code">system.teamcity.nuget.feed.auth.serverRootUrlBased.server</code></p></td><td id="96cb7422"><p id="8df04d5d"><code class="code">teamcity.nuget.feed.httpAuth._Root.default.v2</code></p></td></tr></tbody></table></div></div><a name="IndexingNuGetPackages"></a><a name="Indexing-NuGet-Packages"></a><div class="chapter"><h2 id="UsingTeamCityasNuGetFeed-IndexingNuGetPackages">索引NuGet软件包</h2><a name="Indexingpackagespublishedasartifacts"></a><a name="Indexing-packages-published-as-artifacts"></a><div class="chapter"><h3 id="UsingTeamCityasNuGetFeed-Indexingpackagespublishedasartifacts">索引发布为工件的软件包</h3><p id="50456fef">默认情况下，TeamCity不会将由构建发布的.nupkg工件添加到项目NuGet feed中。您可以选择以下选项之一：</p><ul class="list _ul"><li class="list__item" id="e29972a1"><p>若要仅索引由选定构建配置发布的<a href="nuget-packages-indexer.html">软件包，请</a>向这些构建配置添加<a href="nuget-packages-indexer.html">NuGet软件包索引器</a>构建功能</p></li><li class="list__item" id="496acfb1"><p>索引全部<code class="code">.nupkg</code>作为项目中的构建工件发布的文件，请在“ <b id="71e72a2c">项目设置”的“</b> <b id="8340af73">NuGet提要”</b>部分中启用“ <b id="65f16f8a">自动NuGet包索引</b> <b id="71e72a2c">”</b></p></li><li class="list__item" id="8a538c48"><p>将<a href="nuget-pack.html">NuGet Pack</a>构建步骤与“ <i id="6b668bd5">发布创建的软件包以构建工件”</i>复选框一起使用。<br>此外， <code class="code">.nupkg</code>文件索引是由代理本身在发布构建工件时执行的。</p></li></ul><aside class="note " rel="8d0a0aec" id="ffe62f90" data-title=""><p id="822f0351">从项目中删除其所有内容的NuGet提要将删除指向该提要的所有<a href="nuget-packages-indexer.html">NuGet包索引器</a>功能。</p></aside></div><a name="UsingNuGetpushcommand"></a><a name="Using-NuGet-push-command"></a><div class="chapter"><h3 id="UsingTeamCityasNuGetFeed-UsingNuGetpushcommand">使用NuGet推送命令</h3><p id="d9b691bc">发布<code class="code">.nupkg</code>文件在构建过程中添加到TeamCity NuGet feed中，您可以将NuGet feed URL指定为程序包源，然后将<code class="code">%teamcity.nuget.feed.api.key%</code>在以下构建步骤中将值作为供稿键：</p><ul class="list _ul"><li class="list__item" id="6d39729f"><a href="nuget-publish.html">NuGet发布</a></li><li class="list__item" id="f604b4ca"><p>。 <a href="net-cli-dotnet.html">NET CLI</a>与<code class="code">nuget push</code>命令</p></li></ul></div><a name="SymbolPackages"></a><a name="Symbol-Packages"></a><div class="chapter"><h3 id="UsingTeamCityasNuGetFeed-SymbolPackages">符号包</h3><p id="7136266b">使用外部源服务器时，将NuGet <a href="http://docs.nuget.org/ndocs/create-packages/symbol-packages" rel="noopener noreferrer" data-external="true" target="_blank">符号包发布</a>到内部TeamCity提要可能会导致问题。请参阅我们的公共跟踪器中的<a href="https://youtrack.jetbrains.com/issue/TW-25512" rel="noopener noreferrer" data-external="true" target="_blank">相应问题</a> 。</p></div></div><a name="UsingTeamCityNuGetFeed"></a><a name="Using-TeamCity-NuGet-Feed"></a><div class="chapter"><h2 id="UsingTeamCityasNuGetFeed-UsingTeamCityNuGetFeed">使用TeamCity NuGet提要</h2><p id="3d1eb33d">您可以在开发人员机器上将TeamCity NuGet提要添加为包源包，例如，在开发过程中使用包：在IDE中使用<a href="https://docs.microsoft.com/en-us/nuget/tools/cli-ref-sources" rel="noopener noreferrer" data-external="true" target="_blank">nuget sources</a>命令或NuGet包管理。</p><p id="5383193b">您可以使用TeamCity NuGet提要来还原构建中的软件包：使用<a href="nuget-installer.html">NuGet安装程序</a>或<a href="nuget-publish.html">NuGet发布发布</a>步骤时，TeamCity将使用<a href="https://docs.microsoft.com/en-us/nuget/reference/extensibility/nuget-exe-credential-providers" rel="noopener noreferrer" data-external="true" target="_blank">凭据提供程序</a>来自动验证对私有TeamCity NuGet提要的请求。</p><aside class="tip sideblock" rel="5383193b" id="ebf33a05" data-title=""><p id="c01e4560">提要中可用的软件包绑定到构建的工件： <a href="https://confluence.jetbrains.com/display/TCD18/Clean-Up" rel="noopener noreferrer" data-external="true" target="_blank">清理</a>产生它们的构建的工件时，将它们从提要中删除。为了避免清除特定内部版本中的工件，请<a href="pinned-build.html">将此内部版本固定</a> 。</p></aside><p id="abb0dfb1">在混合身份验证环境中工作时，可能需要将Internet Explorer设置设置为信任TeamCity Server。</p><hr id="8553d1c9"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>