<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Using TeamCity as NuGet Feed - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Using TeamCity as NuGet Feed" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/nuget.md|NuGet/using-teamcity-as-nuget-feed.md|Using TeamCity as NuGet Feed" data-main-title="Using TeamCity as NuGet Feed" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/using-teamcity-as-nuget-feed.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Using TeamCity as NuGet Feed" id="using-teamcity-as-nuget-feed.md">Using TeamCity as NuGet Feed</h1><p id="e3263749">If you want to publish your NuGet packages to a limited audience, for example, to use them internally, you can use <a href="https://docs.microsoft.com/en-us/nuget/hosting-packages/overview" data-external="true" target="_blank" rel="noopener noreferrer">TeamCity as a NuGet feed</a>.<br><b id="21c9a656">Since TeamCity 2018.2</b>, you can configure multiple NuGet feeds for a project in TeamCity.</p><aside class="note " data-title="" rel="e3263749" id="21fa608d"><p id="fe79870d">TeamCity running on any of the supported operating systems (Windows, Linux, macOS) can be used as a NuGet feed.</p></aside><p id="2b6fb1b5">On this page:</p><p id="8250af24"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#UsingTeamCityasNuGetFeed-EnablingNuGetFeed">Enabling NuGet Feed</a></li><li class="list__item"><a href="#UsingTeamCityasNuGetFeed-IndexingNuGetPackages">Indexing NuGet Packages</a><ul class="list _bullet"><li class="list__item"><a href="#UsingTeamCityasNuGetFeed-Indexingpackagespublishedasartifacts">Indexing packages published as artifacts</a></li><li class="list__item"><a href="#UsingTeamCityasNuGetFeed-UsingNuGetpushcommand">Using NuGet push command</a></li><li class="list__item"><a href="#UsingTeamCityasNuGetFeed-SymbolPackages">Symbol Packages</a></li></ul></li><li class="list__item"><a href="#UsingTeamCityasNuGetFeed-UsingTeamCityNuGetFeed">Using TeamCity NuGet Feed</a></li></ul></p><a name="EnablingNuGetFeed"></a><a name="Enabling-NuGet-Feed"></a><div class="chapter"><h2 id="UsingTeamCityasNuGetFeed-EnablingNuGetFeed">Enabling NuGet Feed</h2><p id="f1f3440b">To start using TeamCity as a NuGet Server, you need to enable the NuGet Feed at the project level.</p><p id="71da627a">Go to the <b id="c152a2c0">NuGet Feed</b> page on the Project Settings page and enable the feed.<br><b id="d001b476">Since TeamCity 2018.2</b>, the built-in TeamCity NuGet feed supports API v1/v2/v3.</p><p id="a00d343e">On the page you will see the following feed endpoints:</p><ul class="list _ul"><li class="list__item" id="82c310af"><code class="code">http://&lt;teamcityUrl&gt;/&lt;authSchema&gt;/app/nuget/feed/&lt;projectName&gt;/&lt;feedName&gt;/v1</code></li><li class="list__item" id="f7493846"><code class="code">http://&lt;teamcityUrl&gt;/&lt;authSchema&gt;/app/nuget/feed/&lt;projectName&gt;/&lt;feedName&gt;/v2</code></li><li class="list__item" id="100f9ad7"><code class="code">http://&lt;teamcityUrl&gt;/&lt;authSchema&gt;/app/nuget/feed/&lt;projectName&gt;/&lt;feedName&gt;/v3/index.json</code></li></ul><p id="c2e50b2c">If you have enabled <a href="guest-user.html">guest user</a> you will see the toggle between Basic HTTP authentication and Guest authentication for NuGet feed Endpoints.</p><ul class="list _ul"><li class="list__item" id="958d81e2"><p><b id="8ed2fb6c">Basic HTTP authentication</b> (with httpAuth prefix) - to access packages user should have "View project" permission.</p></li><li class="list__item" id="e101bd23"><p><b id="196b6499">Guest authentication</b> (with guestAuth prefix) - if a guest user login is enabled, packages will be visible to all users that have access to TeamCity server.</p></li></ul><p id="38279e5b">To reference TeamCity project feeds, use parameters as follows:</p><div class="code-block" data-lang="bash">`teamcity.nuget.feed.&lt;authSchema&gt;.&lt;projectName&gt;.&lt;feedName&gt;.&lt;apiVersion&gt;
</div><p id="3fa28e6b">where:</p><ul class="list _ul"><li class="list__item" id="38899647"><p><code class="code">authSchema</code> could be <code class="code">guestAuth</code>/<code class="code">httpAuth</code>*<code class="code">apiVersion</code> is <code class="code">v1</code>/<code class="code">v2</code>/<code class="code">v3</code>, for instance: <code class="code">teamcity.nuget.feed.httpAuth._Root.default.v2</code>.</p></li></ul><p id="71119bca">On upgrading TeamCity to version 2018.2 or later, the deprecated parameters referencing the global NuGet feed will be automatically converted to the references to the default NuGet feed:</p><div class="table-wrapper"><table width="100%" id="b381dce8"><thead><tr id="20142c50" class="ijRowHead"><th id="e8cacbd4"><p id="ba8d979d">Deprecated references</p></th><th id="2c4abfd0"><p id="1c3c1673">Current References</p></th></tr></thead><tbody><tr id="1cace999" class="ijRowOdd"><td id="179876f3"><p id="992eb33a"><code class="code">teamcity.nuget.feed.server</code></p></td><td id="c1e667f7"><p id="c4a69fe5"><code class="code">teamcity.nuget.feed.guestAuth._Root.default.v2</code></p></td></tr><tr id="d54b5443" class="ijRowEven"><td id="ea413bb9"><p id="e81af45a"><code class="code">teamcity.nuget.feed.auth.server</code></p></td><td id="2cc9d36d"><p id="6e2694d2"><code class="code">teamcity.nuget.feed.httpAuth._Root.default.v2</code></p></td></tr><tr id="73ff3ddd" class="ijRowOdd"><td id="3ee7706d"><p id="7d658d41"><code class="code">system.teamcity.nuget.feed.auth.serverRootUrlBased.server</code></p></td><td id="96cb7422"><p id="8df04d5d"><code class="code">teamcity.nuget.feed.httpAuth._Root.default.v2</code></p></td></tr></tbody></table></div></div><a name="IndexingNuGetPackages"></a><a name="Indexing-NuGet-Packages"></a><div class="chapter"><h2 id="UsingTeamCityasNuGetFeed-IndexingNuGetPackages">Indexing NuGet Packages</h2><a name="Indexingpackagespublishedasartifacts"></a><a name="Indexing-packages-published-as-artifacts"></a><div class="chapter"><h3 id="UsingTeamCityasNuGetFeed-Indexingpackagespublishedasartifacts">Indexing packages published as artifacts</h3><p id="50456fef">By default, TeamCity will not add .nupkg artifacts published by builds into the project NuGet feed. You can select one of the following options:</p><ul class="list _ul"><li class="list__item" id="e29972a1"><p>to index packages published by selected build configurations only, add the <a href="nuget-packages-indexer.html">NuGet packages indexer</a> build feature to these build configurations</p></li><li class="list__item" id="496acfb1"><p>to index all <code class="code">.nupkg</code> files published as build artifacts in the project, enable <b id="65f16f8a">Automatic NuGet Packages Indexing</b> in the <b id="8340af73">NuGet Feed</b> section of the <b id="71e72a2c">Project Settings</b></p></li><li class="list__item" id="8a538c48"><p>use the <a href="nuget-pack.html">NuGet Pack</a> build step with the <i id="6b668bd5">Publish created packages to build artifacts</i> checkbox.<br>Besides, the <code class="code">.nupkg</code> files indexing is performed by the agent itself while publishing build artifacts.</p></li></ul><aside class="note " data-title="" rel="8d0a0aec" id="ffe62f90"><p id="822f0351">Deleting a NuGet Feed with all its contents from a project will remove all <a href="nuget-packages-indexer.html">NuGet Packages Indexer</a> features pointing to this feed.</p></aside></div><a name="UsingNuGetpushcommand"></a><a name="Using-NuGet-push-command"></a><div class="chapter"><h3 id="UsingTeamCityasNuGetFeed-UsingNuGetpushcommand">Using NuGet push command</h3><p id="d9b691bc">To publish the <code class="code">.nupkg</code> file into TeamCity NuGet feed during the build, you can specify the NuGet feed URL as a package source and the <code class="code">%teamcity.nuget.feed.api.key%</code> value as a feed key in the following build steps:</p><ul class="list _ul"><li class="list__item" id="6d39729f"><a href="nuget-publish.html">NuGet Publish</a></li><li class="list__item" id="f604b4ca"><p>.<a href="net-cli-dotnet.html">NET CLI</a> with <code class="code">nuget push</code> command</p></li></ul></div><a name="SymbolPackages"></a><a name="Symbol-Packages"></a><div class="chapter"><h3 id="UsingTeamCityasNuGetFeed-SymbolPackages">Symbol Packages</h3><p id="7136266b">Publishing of NuGet <a href="http://docs.nuget.org/ndocs/create-packages/symbol-packages" data-external="true" target="_blank" rel="noopener noreferrer">symbol packages</a> to an internal TeamCity feed may cause issues when using an external source server. See the <a href="https://youtrack.jetbrains.com/issue/TW-25512" data-external="true" target="_blank" rel="noopener noreferrer">corresponding issue</a> in our public tracker.</p></div></div><a name="UsingTeamCityNuGetFeed"></a><a name="Using-TeamCity-NuGet-Feed"></a><div class="chapter"><h2 id="UsingTeamCityasNuGetFeed-UsingTeamCityNuGetFeed">Using TeamCity NuGet Feed</h2><p id="3d1eb33d">You can add TeamCity NuGet feeds as package sources package on your developer machine, for example, to use packages during development: use the <a href="https://docs.microsoft.com/en-us/nuget/tools/cli-ref-sources" data-external="true" target="_blank" rel="noopener noreferrer">nuget sources</a> command or NuGet package management in your IDE.</p><p id="5383193b">You can use TeamCity NuGet feeds to restore packages in your builds: when the <a href="nuget-installer.html">NuGet Installer</a> or <a href="nuget-publish.html">NuGet Publish</a> build step is used, TeamCity will use the <a href="https://docs.microsoft.com/en-us/nuget/reference/extensibility/nuget-exe-credential-providers" data-external="true" target="_blank" rel="noopener noreferrer">credentials provider</a> to automatically authenticate requests to the private TeamCity NuGet feeds.</p><aside class="tip sideblock" data-title="" rel="5383193b" id="ebf33a05"><p id="c01e4560">The packages available in the feed are bound to the builds' artifacts: they are removed from the feed when the artifacts of the build which produced them are <a href="https://confluence.jetbrains.com/display/TCD18/Clean-Up" data-external="true" target="_blank" rel="noopener noreferrer">cleaned up</a>. To avoid cleanup of artifacts in a specific build, <a href="pinned-build.html">pin this build</a>.</p></aside><p id="abb0dfb1">Internet Explorer settings may need to be set to trust the TeamCity Server when working in a mixed authentication environment.</p><hr id="8553d1c9"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>