<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Build Queue - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Build Queue" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/concepts.md|Concepts/build-queue.md|Build Queue" data-main-title="Build Queue" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/build-queue.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Build Queue" id="build-queue.md">Build Queue</h1><p id="95d455bb">The build queue is a list of builds that were <a href="configuring-build-triggers.html">triggered</a> and are waiting to be started. TeamCity will distribute them to <a href="agent-requirements.html">compatible</a> build agents as soon as the agents become idle. A queued build is assigned to an agent at the moment when it is started on the agent; no pre-assignment is made while the build is waiting in the build queue.</p><p id="2df9508d">When a build is triggered, first it is placed into the build queue, and, when a compatible agent becomes idle, TeamCity will run the build.</p><p id="b57bb0d2"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#BuildQueue-BuildQueueOptimizationbyTeamCity">Build Queue Optimization by TeamCity</a></li><li class="list__item"><a href="#BuildQueue-BuildQueueTab">Build Queue Tab</a><ul class="list _bullet"><li class="list__item"><a href="#BuildQueue-AgentSelectionforQueuedBuild">Agent Selection for Queued Build</a></li><li class="list__item"><a href="#BuildQueue-OrderingBuildQueue">Ordering Build Queue</a></li><li class="list__item"><a href="#BuildQueue-Pausing/ResumingBuildQueue">Pausing/Resuming Build Queue</a></li></ul></li></ul></p><a name="BuildQueueOptimizationbyTeamCity"></a><a name="Build-Queue-Optimization-by-TeamCity"></a><div class="chapter"><h2 id="BuildQueue-BuildQueueOptimizationbyTeamCity">Build Queue Optimization by TeamCity</h2><p id="725db60f">By default, TeamCity optimizes the build queue as follows:</p><ul class="list _ul"><li class="list__item" id="056cbc4e"><p>if a similar build exists in the queue, a new build (on the same change set and with the same custom properties) will not be added</p></li><li class="list__item" id="120d23b7"><p>if an automatically triggered build chain has more changes than a build chain that is already queued, the latter will be replaced with the automatically triggered build chain, if such replacement will not delay obtaining the build chain results (based on the <a href="#Build-Queue-Tab">estimated duration</a>)</p></li><li class="list__item" id="ead00324"><p>while a build chain is in the queue, TeamCity tries to replace the queued builds with equivalent started builds</p></li><li class="list__item" id="d5ceea5c"><p>builds that have been staying in a queue for longer than 15 days are canceled automatically (for example, if there are no compatible agents).</p></li></ul><p id="3de810a3">This default behavior can be manually disabled via the corresponding option in the <a href="configuring-vcs-triggers.html">VCS Build Trigger</a> and <a href="configuring-schedule-triggers.html">Schedule Build Trigger</a>.</p></div><a name="BuildQueueTab"></a><a name="Build-Queue-Tab"></a><div class="chapter"><h2 id="BuildQueue-BuildQueueTab">Build Queue Tab</h2><p id="9b935034">The list of builds waiting to be run can be viewed on the <b id="215eea4d">Build Queue</b> tab.</p><p id="6cc5e9ef">This tab displays the following information:</p><ul class="list _ul"><li class="list__item" id="6a1df98f"><p>The number of the build in the queue which is a link to the <a href="working-with-build-results.html">build results</a> page.</p></li><li class="list__item" id="0b427ae2"><p>The <b id="5652d8d5">branch</b> (if available).</p></li><li class="list__item" id="74f4f534"><p>The <b id="5b784d7e">build configuration</b> name in the following format: <b id="8b7c7773">&lt;project name&gt;::&lt;build configuration name&gt;</b>, where the project and build configuration names are the links to the corresponding overview pages;</p></li><li class="list__item" id="fb29734f"><b id="be99d2e1">Time to start</b>: the estimated wait duration. Hovering the mouse cursor over the estimated time value shows a tooltip with the following information:<ul class="list _ul"><li class="list__item" id="b5990ad2"><p>the expected start/finish time,</p></li><li class="list__item" id="028c2ca1"><p>the link to the planned agent page.</p></li><li class="list__item" id="b1022987"><p>If the current build is a part of a build chain and the builds it depends on are not finished yet, a corresponding note will be displayed. For some builds, like the builds that have never been run before, TeamCity can't estimate possible duration, so the relevant message will be displayed in the tooltip, for example:</p></li></ul></li></ul><p id="61b5be67"><figure><img alt="Unpredictable build duration" title="Unpredictable build duration" src="/help/img/teamcity/2019.1/unpredictableDuration.png" id="3cabca08" width="234" height="61"></figure></p><ul class="list _ul"><li class="list__item" id="01384405"><p><b id="64d03346">Triggered by</b> - a brief description of the <a href="configuring-build-triggers.html">event that triggered the build</a>.</p></li><li class="list__item" id="309a9a6a"><p><b id="6d96dfff">Can run on</b> - the number of agents compatible with this build configuration. You can click an agent's name link to open the <a href="viewing-build-agent-details.html">Agents page</a>, or use the down arrow to quickly view the list of compatible agents in the pop-up window.</p></li></ul><a name="AgentSelectionforQueuedBuild"></a><a name="Agent-Selection-for-Queued-Build"></a><div class="chapter"><h3 id="BuildQueue-AgentSelectionforQueuedBuild">Agent Selection for Queued Build</h3><p id="5b866646">When there are several idle agents that can run a queued build, TeamCity tries to select the fastest one as follows:</p><ol class="list _decimal"><li class="list__item" id="a28fc400"><p>If no builds have previously run on agents, the <a href="viewing-build-agent-details.html#Agent-Summary">CPU rank</a> is used to select an agent.</p></li><li class="list__item" id="f4354b94"><p>If builds have previously run on agents, the estimated build duration for the given build configuration is used to select an agent.  The estimate is made based on the heuristics of the latest builds in the history of the build configuration; for estimating, the execution time of the more recent builds has more weight than that of the earlier builds. <a href="personal-build.html">Personal</a> and <a href="build-state.html#Canceled/Stopped-build">canceled</a> builds are not taken into account, neither are any individual builds whose duration differs significantly from the rest of the builds for this build configuration.</p></li></ol></div><a name="OrderingBuildQueue"></a><a name="Ordering-Build-Queue"></a><div class="chapter"><h3 id="BuildQueue-OrderingBuildQueue">Ordering Build Queue</h3><p id="dda857d2">You can do the following:</p><ul class="list _ul"><li class="list__item" id="bef672a9"><p><a href="ordering-build-queue.html">reorder</a> the builds in the queue manually.</p></li><li class="list__item" id="71dfcfc6"><p><a href="ordering-build-queue.html#Removing-Builds-From-Build-Queue">remove</a> build configurations or personal builds from the queue.</p></li><li class="list__item" id="930cff52"><p>If you have System Administrator permissions, you can <a href="ordering-build-queue.html#Managing-Build-Priorities">assign different priorities to build configurations</a>, which will affect their position in the queue.</p></li></ul></div><a name="Pausing/ResumingBuildQueue"></a><a name="Pausing/Resuming-Build-Queue"></a><div class="chapter"><h3 id="BuildQueue-Pausing/ResumingBuildQueue">Pausing/Resuming Build Queue</h3><p id="28d7f6a0">The build queue can be paused manually or automatically.</p><p id="d683b390">Users with the <i id="78a39ad2">Enable/disable agent</i> permission (included in the <a href="role-and-permission.html#Per-Project-Authorization-Mode">Agent Manager</a> role by default) can manually Pause/Resume the Build Queue (since pausing the queue is equivalent to disabling all the agents on the server).</p><p id="08322dd4">The build queue can be paused automatically <a href="teamcity-disk-space-watcher.html">if the TeamCity Server runs out of disk space</a>. The queue will be automatically resumed when sufficient space is available.</p><p id="fd233ef4">When the queue is paused, every page in TeamCity will contain a message with information on the reasons for pausing.</p><hr id="bf0dd07c"><p id="e0f0fb9d"><b id="36643273">See also:</b></p><p id="327d0c25"><b id="567fd4a7">Concepts</b>: <a href="build-chain.html">Build Chain</a><br><b id="60ad8d8f">Administrator's Guide</b>: <a href="ordering-build-queue.html">Ordering Build Queue</a></p><hr id="7bde095f"></div></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>