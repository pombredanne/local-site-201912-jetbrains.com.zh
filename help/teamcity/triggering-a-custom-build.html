<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Triggering a Custom Build - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Triggering a Custom Build" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/triggering-a-custom-build.md|Triggering a Custom Build" data-main-title="Triggering a Custom Build" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/triggering-a-custom-build.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Triggering a Custom Build" id="triggering-a-custom-build.md">Triggering a Custom Build</h1><p id="e4082fcb">A build configuration usually has <a href="configuring-build-triggers.html">build triggers</a> configured which automatically start a new build each time the conditions are met, like scheduled time, or detection of VCS changes, and so on.</p><p id="71596aa5">Besides triggering a build automatically, TeamCity allows you to run a build manually whenever you need, and customize this build by adding properties, using specific changes, running the build on a specific agent, and so on.</p><p id="dcd7796d">On this page:</p><p id="907251a4"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#TriggeringaCustomBuild-RunCustomBuilddialog">Run Custom Build dialog</a><ul class="list _bullet"><li class="list__item"><a href="#TriggeringaCustomBuild-GeneralOptions">General Options</a></li><li class="list__item"><a href="#TriggeringaCustomBuild-Dependencies">Dependencies</a></li><li class="list__item"><a href="#TriggeringaCustomBuild-Changes">Changes</a></li><li class="list__item"><a href="#TriggeringaCustomBuild-Includechanges">Include changes</a></li><li class="list__item"><a href="#TriggeringaCustomBuild-Buildbranch">Build branch</a></li><li class="list__item"><a href="#TriggeringaCustomBuild-Usesettings">Use settings</a></li><li class="list__item"><a href="#TriggeringaCustomBuild-Parameters">Parameters</a></li><li class="list__item"><a href="#TriggeringaCustomBuild-CommentandTags">Comment and Tags</a></li></ul></li><li class="list__item"><a href="#TriggeringaCustomBuild-PromotingBuild">Promoting Build</a></li></ul></p><p id="43917add">There are several ways of launching a custom build in TeamCity:</p><ul class="list _ul"><li class="list__item" id="41fe2110"><p>Click the ellipsis on the <b id="5bb5df6f">Run</b> button, and specify the options in the <b id="12428854">Run Custom Build</b> dialog described <a href="#General-Options">below</a>.</p></li><li class="list__item" id="263c4a56"><p>To run a custom build with specific changes, open the build results page, go to the <a href="working-with-build-results.html#Changes">Changes</a> tab, expand the required change, click the <b id="c5f346af">Run build with this change</b>, and proceed with the <a href="#General-Options">options</a> in the <b id="d310e699">Run Custom Build</b> dialog.</p></li><li class="list__item" id="f0ab679b"><p>Use <a href="accessing-server-by-http.html">HTTP request</a> or <a href="rest-api.html#Triggering-a-Build">REST API request</a> to TeamCity to trigger a build.</p></li><li class="list__item" id="5c53af49"><p>Promote a build - see the section <a href="#Promoting-Build">below</a>.</p></li></ul><a name="RunCustomBuilddialog"></a><a name="Run-Custom-Build-dialog"></a><div class="chapter"><h2 id="TriggeringaCustomBuild-RunCustomBuilddialog">Run Custom Build dialog</h2><a name="GeneralOptions"></a><a name="General-Options"></a><div class="chapter"><h3 id="TriggeringaCustomBuild-GeneralOptions">General Options</h3><p id="1c0c956c">Select an agent you want to run the build on from the drop-down list. Note that for each agent in the list, TeamCity displays its current state and estimates when the agent will become idle if it is running a build at the moment. Besides the possibility to run a build on a particular agent from the list, you can also use one of the following options:</p><ul class="list _ul"><li class="list__item" id="e2b4a0cb"><p><b id="a9234f51">fastest idle agent</b>: <i id="e5db6a1b">default option</i>; if selected, TeamCity will automatically choose an agent to run a build on based on calculated estimates.</p></li><li class="list__item" id="18113738"><p><b id="f34ad22d">the fastest agent in &lt;a certain&gt; pool</b>: if selected, TeamCity will run a build on an agent from a specified pool</p></li><li class="list__item" id="04953e62"><p>if <a href="teamcity-integration-with-cloud-solutions.html">cloud integration</a> is configured, you can select to run a build on an agent from a <b id="4b307781">certain cloud image</b>. If no available cloud agents of this type exist, TeamCity will also attempt to start a new one.</p></li><li class="list__item" id="f447d04b"><b id="4f1e177a">run a build on &lt;a specified&gt; agent</b></li><li class="list__item" id="53fa28e9"><b id="89f8731a">All enabled compatible agents</b>: Use this option to run a build simultaneously on all agents that are enabled and compatible with the build configuration. This option may be useful in the following cases:<ul class="list _ul"><li class="list__item" id="393f1957"><p>run a build for agent maintenance purposes (e.g. you can create a configuration to check whether agents function properly after an environment upgrade/update).</p></li><li class="list__item" id="b224e55c"><p>run a build on different platforms (for example, you can set up a configuration, and specify for it a number of compatible build agents with different environments installed).</p></li></ul></li></ul><p id="b0922688">On the <b id="3032c3fd">General</b> options you can also specify whether</p><ul class="list _ul"><li class="list__item" id="b5e2ff75"><p>this particular build will be run as a <a href="personal-build.html">personal</a> one</p></li><li class="list__item" id="c1116875"><p>this particular build will be put at the top of the <a href="build-queue.html">build queue</a></p></li><li class="list__item" id="cfeaafb4">all files in the <a href="build-checkout-directory.html">build checkout directory</a> will be cleaned before this build.<ul class="list _ul"><li class="list__item" id="bb8f052d"><p><b id="be9da11b">Since TeamCity 2017.1</b>, if snapshot dependencies are configured, this option can be applied to snapshot dependencies. In this case, all the builds of the build chain will be forced to use clean checkout. The option also enables rebuilding all dependencies (unless custom dependencies are provided via this dialog or the schedule trigger promotes a build).</p></li></ul></li></ul></div><a name="Dependencies"></a><a name="Dependencies"></a><div class="chapter"><h3 id="TriggeringaCustomBuild-Dependencies">Dependencies</h3><p id="78221dfc"><i id="76a2d4b0">This tab is available only for builds that have dependencies on other builds</i>.<br>You can enforce rebuilding of all dependencies and select a particular build whose artifacts will be taken. By default, the last 20 builds are displayed. To increase the number of builds displayed in the drop-down to 50, use the <code class="code">teamcity.runCustomBuild.buildsLimit=50</code> <a href="configuring-teamcity-server-startup-properties.html#TeamCity-internal-properties">internal property</a>.</p></div><a name="Changes"></a><a name="Changes"></a><div class="chapter"><h3 id="TriggeringaCustomBuild-Changes">Changes</h3><p id="a9f69334"><i id="9ee98c4c">This tab is available only if you have permissions to access VCS roots for the build configuration.</i><br>The tab allows you to specify a particular change to be included to the build.</p><p id="896c9e46">The build will use the change's revision to checkout the sources. That is, all the changes up to the selected one will be included into the build.<br>Note that TeamCity displays only the changes detected earlier for the current build configuration VCS roots. If the VCS root was detached from the build configuration after the change occurred, there is no ability to run the build on such a change. A limited number of changes is displayed. If there is an earlier change in TeamCity that you need to run a build on, you can locate the change in the Change Log and use the <b id="87064988">Run build with this change</b> action.</p></div><a name="Includechanges"></a><a name="Include-changes"></a><div class="chapter"><h3 id="TriggeringaCustomBuild-Includechanges">Include changes</h3><p id="61b50637">The <b id="1aa3f383">Include changes</b> drop-down allows selecting the changes in the VCS roots attached to the configuration to run the build on.</p><ul class="list _ul"><li class="list__item" id="c09053b6"><p><b id="96baf84a">Latest changes at the moment the build is started</b>: TeamCity will automatically include all changes available at the moment.</p></li><li class="list__item" id="49e215e2"><p>&lt;Last change to include&gt;: When you select a change in the drop-down list, TeamCity runs the build with the selected change and all changes that were made before it. The build run with the changes earlier than the latest available is marked as a <a href="history-build.html">History Build</a>.</p></li></ul></div><a name="Buildbranch"></a><a name="Build-branch"></a><div class="chapter"><h3 id="TriggeringaCustomBuild-Buildbranch">Build branch</h3><p id="d1d3b165">The <b id="d487b870">Build branch</b> drop-down, available if you have branches in your build configuration (or in snapshot dependencies of this build configuration), allows choosing a branch to be used for the custom build.</p></div><a name="Usesettings"></a><a name="Use-settings"></a><div class="chapter"><h3 id="TriggeringaCustomBuild-Usesettings">Use settings</h3><p id="418e358c">If your project has <a href="storing-project-settings-in-version-control.html">versioned settings</a> enabled, you can tell TeamCity to run a build:</p><ul class="list _ul"><li class="list__item" id="7fac6ed8"><p>with the settings defined for the project, either the current settings on the server or the settings from VCS</p></li><li class="list__item" id="4e9fbd97"><p>with the project settings currently defined on the server</p></li><li class="list__item" id="9126743d"><p>with the settings loaded from the VCS revision calculated for the build.</p></li></ul><p id="b7703067">If changes are selected in the <a href="#Include-changes">step above</a>, the revision of the project settings corresponding to the selected changes will be loaded.</p><p id="a834cb74">To define which settings to take, use one of the corresponding options from the <i id="f85d22e1">Use settings</i> drop-down menu (the option here will override the <a href="storing-project-settings-in-version-control.html#Defining-Settings-to-Apply-to-Builds">project-level setting</a>).</p></div><a name="Parameters"></a><a name="Parameters"></a><div class="chapter"><h3 id="TriggeringaCustomBuild-Parameters">Parameters</h3><aside class="note " data-title="" rel="TriggeringaCustomBuild-Parameters" id="22ed8712"><p id="0d721855">These settings are available only if you have permissions to change system properties and environment variables for the build configuration.</p></aside><p id="be1ac65c">This tab allows adding, editing, and deleting new parameters/properties/variables, or redefining their <a href="predefined-build-parameters.html">predefined values</a>.<br>When adding/editing/deleting properties and variables, note the following:</p><ul class="list _ul"><li class="list__item" id="299e234f"><p>For a predefined property/variable, only the value is editable.</p></li><li class="list__item" id="fcd9017c"><p>Only newly added properties/variables can be deleted. You cannot delete predefined properties.</p></li><li class="list__item" id="ad794293"><p>Each parameter value must be no longer than 16,000 characters.</p></li></ul></div><a name="CommentandTags"></a><a name="Comment-and-Tags"></a><div class="chapter"><h3 id="TriggeringaCustomBuild-CommentandTags">Comment and Tags</h3><p id="d98852e5">Add an optional comment as well as one or more <a href="build-tag.html">tags</a> to the build. You can also add a custom build to <a href="favorite-build.html">favorites</a> by checking the corresponding box in this section.</p><aside class="note " data-title="" rel="d98852e5" id="80476620"><p id="2ed4bf44">A greater build number does not mean more recent changes and the last build in the builds history does not reflect the state of the latest project sources: builds in the builds history are sorted by their start time, not by changes they include.</p></aside></div></div><a name="PromotingBuild"></a><a name="Promoting-Build"></a><div class="chapter"><h2 id="TriggeringaCustomBuild-PromotingBuild">Promoting Build</h2><p id="6600eca3">Build promotion refers to triggering a custom build with an overridden <a href="dependent-build.html">artifact or snapshot dependency</a>, i.e. manual launching of a build with dependencies configured, but using a build different from the build specified in the dependency.</p><p id="c42881e2">To promote a build, open the build results page of the dependency build and click <b id="a67b3f85">Actions | Promote</b>.</p><p id="bcbc2634">For example, your build configuration A is configured to take artifacts from the last successful build of configuration B, but you want to run a build of configuration A using artifacts of a different build of configuration B (not the last successful build), so you promote an earlier build of B.<br>Build promotion affects only a single run of the dependent build. Once you click <b id="e9a09fc6">Promote</b>, a build of the dependent build configuration which uses the artifacts of the specified build is queued. Any further runs of the dependent build configuration will use artifacts as configured (last successful, last pinned etc.), unless you use another promotion.</p><p id="a7f4435e">More details are available in the <a href="http://blog.jetbrains.com/teamcity/2012/04/teamcity-build-dependencies-2/" data-external="true" target="_blank" rel="noopener noreferrer">related blog-post</a>.</p><hr id="09311f74"><p id="16ac1676"><b id="e55c7342">See also:</b></p><p id="a368c142"><b id="d240ecc7">Concepts</b>: <a href="build-queue.html">Build Queue</a> | <a href="dependent-build.html">Dependent Build</a> | <a href="personal-build.html">Personal Build</a><br><b id="ac6b434f">Administrator's Guide</b>: <a href="configuring-build-triggers.html">Configuring Build Triggers</a></p><hr id="a2c15472"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>