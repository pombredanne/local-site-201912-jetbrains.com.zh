<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>JetBrains dotCover-帮助|帮助团队城市</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="JetBrains dotCover" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-unit-testing-and-code-coverage.md|Configuring Unit Testing and Code Coverage/configuring-.net-code-coverage.md|Configuring .NET Code Coverage/jetbrains-dotcover.md|JetBrains dotCover" data-main-title="JetBrains dotCover" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/jetbrains-dotcover.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="jetbrains-dotcover.md" data-toc="JetBrains dotCover">JetBrains dotCover</h1><p id="f1a11163">TeamCity与<a href="http://www.jetbrains.com/dotcover/" rel="noopener noreferrer" data-external="true" target="_blank">JetBrains dotCover</a>的控制台运行程序捆绑在一起。<b id="8c9d4f6d">从TeamCity 2017.1开始</b> ，除了捆绑版本外，还可以安装其他版本的JetBrains dotCover命令行工具和/或使用<b id="9bc4469a"><a href="installing-agent-tools.html">管理|</a></b>更改默认值<b id="9bc4469a"><a href="installing-agent-tools.html">。工具</a></b>页面。</p><p id="30c21ff9">在构建步骤的.NET Coverage部分中选择适当的选项之后，您将能够收集.NET项目的代码覆盖率，然后在<a href="working-with-build-results.html">TeamCity Web UI中</a>查看覆盖率统计信息和详细的覆盖率报告。</p><p id="b5429cea">如果您拥有dotCover许可证并将其安装在开发人员机器上，则可以在Team Studio中使用<a href="visual-studio-addin.html">TeamCity Visual Studio</a>插件在Visual Studio中下载并查看TeamCity收集的涵盖结果。</p><aside class="tip sideblock" rel="b5429cea" id="4cb296fa" data-title=""><p id="d1785b78">.NET Framework 3.5或更高版本必须安装在代理计算机上。这对于捆绑的dotCover起作用是必需的。您的项目可以依赖于另一个.NET Framework版本。<br>dotCover 2018.2或更高版本需要.NET Framework 4.6.1或更高版本。</p></aside><a name="dotCoverSettings"></a><a name="dotCover-Settings"></a><div class="chapter"><h2 id="JetBrainsdotCover-dotCoverSettings">dotCover设置</h2><div class="table-wrapper"><table width="100%" id="3fba0369"><thead><tr id="037c5dd2" class="ijRowHead"><th id="26030f2d"></th><th id="c6f2d9f7"></th></tr></thead><tbody><tr id="13f6cf86" class="ijRowOdd"><td id="96379f42"><p id="bd80d324">dotCover主页的路径</p></td><td id="495bee7c"><p id="5fad2640">将此字段保留为空白以使用默认的dotCover。<a href="#Bundled-dotCover-Versions">捆绑版本</a>在TeamCity 2017.1之前设置为默认<a href="#Bundled-dotCover-Versions">版本</a> ；在此版本之后，您可以将任何<a href="installing-agent-tools.html">其他已安装的</a>版本标记为默认版本。<br>或者，指定安装在构建代理程序上的dotCover的路径。</p></td></tr><tr id="bf5e987c" class="ijRowEven"><td id="f3d0f2d3"><p id="bddb4cf4">筛选器</p></td><td id="f18e96e5"><p id="7d21ba19">指定换行符分隔的过滤器列表，以覆盖代码。使用<code class="code">+|-:assembly=*;type=**;method=***</code>从包括的程序集中包括或排除程序集：</p><a name="OR-syntax-tip"></a><aside class="tip sideblock" rel="5c852a17" id="db921599" data-title=""><p id="2bb5294c">在这里， <i id="2f6e2e27" origin="teamcity-help">管道</i>符号<code class="code">|</code>代表<b id="2b9f2c70" origin="teamcity-help">OR</b>命令，如正则表达式中一样：use <code class="code">+</code>用于包括， <b id="136692ee" origin="teamcity-help">或</b> <code class="code">-</code>排除。</p></aside><p id="8b8fc27d">例如，要覆盖所有<code class="code">MyDemoApp</code>组件，但不在<code class="code">MyDemoApp.*.Tests</code> ，指定以下程序集筛选器进行覆盖：<br><code class="code">+:MyDemoApp.*</code><br><code class="code">-:MyDemoApp.*.Tests</code></p><p id="46063be7">另请参阅<a href="https://blog.jetbrains.com/dotnet/2010/12/10/coverage-with-dotcover-teamcity-mstest-nunit-or-mspec/" rel="noopener noreferrer" data-external="true" target="_blank">此博客文章</a> 。</p></td></tr><tr id="3ee5ddff" class="ijRowOdd"><td id="7e9bf30d"><p id="12f88c08">属性过滤器</p></td><td id="554a1463"><p id="1b9630c7">如果您不希望了解整个解决方案的覆盖率数据，则可以排除标记有属性的代码（例如，使用<code class="code">ObsoleteAttribute</code> ）从覆盖率统计信息中。您只需在此处以以下格式指定这些属性过滤器：过滤器应为换行符分隔的列表；的<code class="code">-:attributeName</code>应该使用语法从代码覆盖率中排除标有属性的代码。使用星号（ <code class="code">*</code> ）作为通配符（如果需要）。<br>仅支持dotCover 2.0或更高版本。</p></td></tr><tr id="b78c4daa" class="ijRowEven"><td id="66e107f6"><a name="additional-arguments"></a><a name="JetBrainsdotCover-additional-arguments"></a><p id="5b865639">附加参数</p></td><td id="d1b9196a"><p id="4c9f12c5">提供一个新行分隔的其他命令行参数列表，以传递给dotCover.exe</p></td></tr></tbody></table></div><p id="1fef9f73">请注意，dotCover覆盖率引擎报告的是报表覆盖率，而不是行覆盖率。</p></div><a name="CompileandTestinDifferentBuilds"></a><a name="Compile-and-Test-in-Different-Builds"></a><div class="chapter"><h2 id="JetBrainsdotCover-CompileandTestinDifferentBuilds">在不同的版本中进行编译和测试</h2><p id="e4502e6d">要构建一致的覆盖率报告，dotCover必须能够在构建签出目录下找到源文件，如果您在同一版本中构建二进制文件并收集覆盖率，或者如果您使用不同的版本，但它们使用<a href="build-dependencies-setup.html#Snapshot-Dependencies">快照依赖关系</a> ，那么这应该很容易。以及相同的代理和相同的<a href="configuring-vcs-settings.html">VCS设置</a> 。</p><p id="33a36b57">如果您需要使用不同的<a href="vcs-checkout-rules.html">签出设置</a>在一个版本中构建二进制文件并在另一版本中收集代码覆盖率，则需要一些其他属性。假定：</p><ul class="list _ul"><li class="list__item" id="b9d6a20c"><p>构建配置<b id="8f6c0b75">A</b>使用调试信息编译代码，并使用程序集和<code class="code">.pdb</code>档案</p></li><li class="list__item" id="dfd36f69"><p>构建配置<b id="83b1e609">B</b>在启用dotCover的情况下运行测试，并且对A具有<a href="build-dependencies-setup.html#Snapshot-Dependencies">快照依赖性</a> 。</p></li></ul><p id="0466dfae">要显示源代码<a href="working-with-build-results.html#Code-Coverage-Results">的代码覆盖率选项卡</a> B的编译结果，你需要到B点到相同的<a href="configuring-vcs-roots.html">VCS根</a>为A，以获得合适的位置（在你的源代码<a href="build-checkout-directory.html">结帐根</a> ），并添加一个<a href="build-dependencies-setup.html#Artifact-Dependencies">神器依赖</a>于<b id="7c6855fb">构建从相同</b>的A <b id="7c6855fb">链</b> （用于dotCover从<code class="code">.pdb</code>文件）。</p><p id="6a0d2ad6">您还需要告诉TeamCity在哪里可以找到源代码。为此，请执行以下操作：</p><ol class="list _decimal"><li class="list__item" id="adc8a42d"><p>添加<code class="code">teamcity.dotCover.sourceBase</code>具有值的配置参数<code class="code">%teamcity.build.checkoutDir%</code>到编译版本配置A。</p></li><li class="list__item" id="941a9495"><p>添加配置参数<code class="code">dotNetCoverage.dotCover.source.mapping</code>值更改为测试配置B <code class="code">%dep.btA.teamcity.dotCover.sourceBase%=>%teamcity.build.checkoutDir%</code> ，在哪里<code class="code">btA</code>是配置A的实际<a href="identifier.html">ID</a> 。</p></li></ol><a name="BundleddotCoverVersions"></a><a name="Bundled-dotCover-Versions"></a><div class="chapter"><h3 id="JetBrainsdotCover-BundleddotCoverVersions">捆绑的dotCover版本</h3><p id="2d5624d5">本节提供与TeamCity 10+版本捆绑在一起的dotCover版本的信息。有关TeamCity早期发行版的信息，请参阅<a href="https://confluence.jetbrains.com/display/TCD9/JetBrains+dotCover#JetBrainsdotCover-BundleddotCoverVersions" rel="noopener noreferrer" data-external="true" target="_blank">先前的文档版本</a> 。</p><div class="table-wrapper"><table width="100%" id="242ffe19"><thead><tr id="d68daf35" class="ijRowHead"><th id="c277b9e9"><p id="8a0bc8f1">TeamCity版本</p></th><th id="d9c920fe"><p id="9515016a">dotCover版本</p></th></tr></thead><tbody><tr id="6bf72c2b" class="ijRowOdd"><td id="eb246955"><p id="b83185e8">2018.1</p></td><td id="67a5f216"><p id="49ad36cb">2018.1.2</p></td></tr><tr id="a2d5659d" class="ijRowEven"><td id="d64b5f12"><p id="5e5c3354">2018.2</p></td><td id="2cc14f68"><p id="e8f103c9">2018.1.4</p></td></tr><tr id="89262664" class="ijRowOdd"><td id="0c7287e0"><p id="be9bb1f0">2019.1</p></td><td id="fe868e16"><p id="10bbb570">2019.1.1</p></td></tr></tbody></table></div><p id="038f606d">您可以在<b id="7e1b8552">服务器管理|</b> Windows <b id="7e1b8552">Server</b> 2003中查看dotCover的安装版本。 <b id="7e1b8552">工具</b>页面。捆绑版本设置为默认版本，您可以安装其他版本并更改默认设置。</p><hr id="924b121c"><p id="c28f5720"><b id="d5d9fcb4">也可以看看：</b></p><p id="bc915d5c"><b id="83baca5f">dotCover的已知问题</b> ：[ <a href="known-issues.html#dotCover-does-not-support-Windows-Nano-Server">1</a> ]<br><b id="041e5a2e">管理员指南</b> ： <a href="manually-configuring-reporting-coverage.html">手动配置报告范围</a><br><b id="d6fa5813">故障排除</b> ： <a href="reporting-issues.html#dotCover-Issues">dotCover问题</a></p><hr id="1dc3adec"></div></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>