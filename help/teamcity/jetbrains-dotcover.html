<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>JetBrains dotCover - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="JetBrains dotCover" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-unit-testing-and-code-coverage.md|Configuring Unit Testing and Code Coverage/configuring-.net-code-coverage.md|Configuring .NET Code Coverage/jetbrains-dotcover.md|JetBrains dotCover" data-main-title="JetBrains dotCover" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/jetbrains-dotcover.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="JetBrains dotCover" id="jetbrains-dotcover.md">JetBrains dotCover</h1><p id="f1a11163">TeamCity comes bundled with the console runner of <a href="http://www.jetbrains.com/dotcover/" data-external="true" target="_blank" rel="noopener noreferrer">JetBrains dotCover</a>. <b id="8c9d4f6d">Since TeamCity 2017.1</b>, in addition to the bundled version, it is possible to install another version of JetBrains dotCover Command Line Tools and/or change the defaults using the <b id="9bc4469a"><a href="installing-agent-tools.html">Administration | Tools</a></b> page.</p><p id="30c21ff9">After choosing the appropriate option in the .NET coverage section of a build step, you will be able to collect code coverage for your .NET project and then view the coverage statistics and detailed coverage report inside the <a href="working-with-build-results.html">TeamCity web UI</a>.</p><p id="b5429cea">If you have a license for dotCover and have it installed on a developer machine, TeamCity-collected coverage results can be downloaded and viewed inside Visual Studio with the help of the <a href="visual-studio-addin.html">TeamCity Visual Studio Add-in</a>.</p><aside class="tip sideblock" data-title="" rel="b5429cea" id="4cb296fa"><p id="d1785b78">.NET Framework 3.5 or newer must be installed on the agent machine. This is necessary for the bundled dotCover to work. Your project can depend on another .NET Framework version.<br>dotCover 2018.2 or newer requires .NET Framework 4.6.1 or newer.</p></aside><a name="dotCoverSettings"></a><a name="dotCover-Settings"></a><div class="chapter"><h2 id="JetBrainsdotCover-dotCoverSettings">dotCover Settings</h2><div class="table-wrapper"><table width="100%" id="3fba0369"><thead><tr id="037c5dd2" class="ijRowHead"><th id="26030f2d"></th><th id="c6f2d9f7"></th></tr></thead><tbody><tr id="13f6cf86" class="ijRowOdd"><td id="96379f42"><p id="bd80d324">Path to dotCover Home</p></td><td id="495bee7c"><p id="5fad2640">Leave this field blank to use the default dotCover. The <a href="#Bundled-dotCover-Versions">bundled version</a> is set as default prior to TeamCity 2017.1; after this version you can mark any of the <a href="installing-agent-tools.html">additionally installed</a> versions as default.<br>Alternatively, specify the path to the dotCover installed on a build agent.</p></td></tr><tr id="bf5e987c" class="ijRowEven"><td id="f3d0f2d3"><p id="bddb4cf4">Filters</p></td><td id="f18e96e5"><p id="7d21ba19">Specify a new-line separated list of filters for code coverage. Use <code class="code">+|-:assembly=*;type=**;method=***</code> to include or exclude assemblies from covered assemblies:</p><a name="OR-syntax-tip"></a><aside class="tip sideblock" data-title="" rel="5c852a17" id="db921599"><p id="2bb5294c">Here, the <i origin="teamcity-help" id="2f6e2e27">pipe</i> symbol <code class="code">|</code> represents the <b origin="teamcity-help" id="2b9f2c70">OR</b> command, as in regular expressions: use <code class="code">+</code> for including, <b origin="teamcity-help" id="136692ee">OR</b> <code class="code">-</code> for excluding.</p></aside><p id="8b8fc27d">For example, to run coverage on all <code class="code">MyDemoApp</code> assemblies but not on <code class="code">MyDemoApp.*.Tests</code>, specify the following assembly filters for coverage:<br><code class="code">+:MyDemoApp.*</code><br><code class="code">-:MyDemoApp.*.Tests</code></p><p id="46063be7">See also <a href="https://blog.jetbrains.com/dotnet/2010/12/10/coverage-with-dotcover-teamcity-mstest-nunit-or-mspec/" data-external="true" target="_blank" rel="noopener noreferrer">this blog post</a>.</p></td></tr><tr id="3ee5ddff" class="ijRowOdd"><td id="7e9bf30d"><p id="12f88c08">Attribute Filters</p></td><td id="554a1463"><p id="1b9630c7">If you do not want to know the coverage data solution-wide, you can exclude the code marked with an attribute (for example, with <code class="code">ObsoleteAttribute</code>) from the coverage statistics. You only need to specify these attribute filters here in the following format: the filters should be a new-line separated list; the <code class="code">-:attributeName</code> syntax should be used to exclude the code marked with the attributes from code coverage. Use the asterisk (<code class="code">*</code>) as a wildcard if needed.<br>Supported only for dotCover 2.0 or newer.</p></td></tr><tr id="b78c4daa" class="ijRowEven"><td id="66e107f6"><a name="additional-arguments"></a><a name="JetBrainsdotCover-additional-arguments"></a><p id="5b865639">Additional arguments</p></td><td id="d1b9196a"><p id="4c9f12c5">Provide a new-line separated list of additional commandline parameters to pass to dotCover.exe</p></td></tr></tbody></table></div><p id="1fef9f73">Note that dotCover coverage engine reports statement coverage instead of line coverage.</p></div><a name="CompileandTestinDifferentBuilds"></a><a name="Compile-and-Test-in-Different-Builds"></a><div class="chapter"><h2 id="JetBrainsdotCover-CompileandTestinDifferentBuilds">Compile and Test in Different Builds</h2><p id="e4502e6d">To build a consistent coverage report, dotCover has to be able to find source files under the build checkout directory which should be easy if you build binaries and collect coverage in the same build, or if you use different builds, but they use a <a href="build-dependencies-setup.html#Snapshot-Dependencies">snapshot dependency</a> and the same agent as well as the same <a href="configuring-vcs-settings.html">VCS settings</a>.</p><p id="33a36b57">If you need to build binaries in one build and collect code coverage in another one using different <a href="vcs-checkout-rules.html">checkout settings</a>, some additional properties are required. It is assumed that:</p><ul class="list _ul"><li class="list__item" id="b9d6a20c"><p>Build configuration <b id="8f6c0b75">A</b> compiles code with debugging information and creates an artifact with assemblies and <code class="code">.pdb</code> files</p></li><li class="list__item" id="dfd36f69"><p>Build configuration <b id="83b1e609">B</b> runs tests with dotCover enabled and has a <a href="build-dependencies-setup.html#Snapshot-Dependencies">snapshot dependency</a> on A.</p></li></ul><p id="0466dfae">To display the source code in the <a href="working-with-build-results.html#Code-Coverage-Results">Code Coverage tab</a> of build results of B, you need to point B to the same <a href="configuring-vcs-roots.html">VCS root</a> as A to get your source code in an appropriate location (the <a href="build-checkout-directory.html">checkout root</a>) and add an <a href="build-dependencies-setup.html#Artifact-Dependencies">artifact dependency</a> on <b id="7c6855fb">build from the same chain</b> of A (for dotCover to get the paths to the sources from the <code class="code">.pdb</code> files).</p><p id="6a0d2ad6">You also need to tell TeamCity where to find the source code. To do this, perform the following:</p><ol class="list _decimal"><li class="list__item" id="adc8a42d"><p>Add the <code class="code">teamcity.dotCover.sourceBase</code> configuration parameter with the value <code class="code">%teamcity.build.checkoutDir%</code> to the compiling build configuration A.</p></li><li class="list__item" id="941a9495"><p>Add the configuration parameter <code class="code">dotNetCoverage.dotCover.source.mapping</code> to your test configuration B with the value <code class="code">%dep.btA.teamcity.dotCover.sourceBase%=&gt;%teamcity.build.checkoutDir%</code>, where <code class="code">btA</code> is the actual <a href="identifier.html">ID</a> of your configuration A.</p></li></ol><a name="BundleddotCoverVersions"></a><a name="Bundled-dotCover-Versions"></a><div class="chapter"><h3 id="JetBrainsdotCover-BundleddotCoverVersions">Bundled dotCover Versions</h3><p id="2d5624d5">This section provides information on the versions of dotCover bundled with TeamCity 10+ versions. For information on the earlier TeamCity releases, see the <a href="https://confluence.jetbrains.com/display/TCD9/JetBrains+dotCover#JetBrainsdotCover-BundleddotCoverVersions" data-external="true" target="_blank" rel="noopener noreferrer">previous documentation version</a>.</p><div class="table-wrapper"><table width="100%" id="242ffe19"><thead><tr id="d68daf35" class="ijRowHead"><th id="c277b9e9"><p id="8a0bc8f1">TeamCity Version</p></th><th id="d9c920fe"><p id="9515016a">dotCover Version</p></th></tr></thead><tbody><tr id="6bf72c2b" class="ijRowOdd"><td id="eb246955"><p id="b83185e8">2018.1</p></td><td id="67a5f216"><p id="49ad36cb">2018.1.2</p></td></tr><tr id="a2d5659d" class="ijRowEven"><td id="d64b5f12"><p id="5e5c3354">2018.2</p></td><td id="2cc14f68"><p id="e8f103c9">2018.1.4</p></td></tr><tr id="89262664" class="ijRowOdd"><td id="0c7287e0"><p id="be9bb1f0">2019.1</p></td><td id="fe868e16"><p id="10bbb570">2019.1.1</p></td></tr></tbody></table></div><p id="038f606d">You can view the installed versions of dotCover on the <b id="7e1b8552">Server Administration | Tools</b> page. The bundled version is set as default, you can install other versions and change the default settings.</p><hr id="924b121c"><p id="c28f5720"><b id="d5d9fcb4">See also:</b></p><p id="bc915d5c"><b id="83baca5f">dotCover Known Issues</b>: [<a href="known-issues.html#dotCover-does-not-support-Windows-Nano-Server">1</a>]<br><b id="041e5a2e">Administrator's Guide</b>: <a href="manually-configuring-reporting-coverage.html">Manually Configuring Reporting Coverage</a><br><b id="d6fa5813">Troubleshooting</b>: <a href="reporting-issues.html#dotCover-Issues">dotCover issues</a></p><hr id="1dc3adec"></div></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>