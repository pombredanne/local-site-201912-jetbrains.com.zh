<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>NUnit-帮助|团队城市</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="NUnit" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-build-steps.md|Configuring Build Steps/nunit.md|NUnit" data-main-title="NUnit" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/nunit.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="nunit.md" data-toc="NUnit">NUnit</h1><p id="28cff12e"><i id="44783ff4">NUnit</i>构建运行器旨在直接在TeamCity服务器上运行NUnit测试。但是，还有其他方法可以将NUnit测试结果报告给TeamCity，有关详细信息，请参考<a href="nunit-support.html">NUnit支持</a>页面。</p><aside class="tip sideblock" rel="28cff12e" id="594bd387" data-title=""><p id="b4d7e81f">支持NUnit的版本<b id="a4a057ed"><b id="1aad1978"><b id="27efd1db"><b id="f1c15582"><b id="79ee4386"><b id="3df8b33d"><b id="385ce0f7"><b id="c77c10fa"><b id="c2cd291a"><b id="a8e9d240"><b id="e082f2e2"><b id="02039dc6">：2.2.10，2.4.1，2.4.6，2.4.7，2.4.8，2.5.0，2.5.2，2.5.3，2.5.4，2.5.5，2.5.6，2.5。</b></b></b></b></b></b></b></b></b></b></b> <b id="e9c14e35"><b id="06618293"><b id="830ef15d"><b id="4df62442"><b id="668b1108"><b id="c646f30c"><b id="f0884c26">7，2.5.8，2.5.9，2.5.10，2.6.0，2.6.1，2.6.2，2.6.3。</b></b></b></b></b></b></b></b></p><p id="af3c495e"><b id="148a0305">从TeamCity 9.1开始</b> ，还支持NUnit <b id="a6cdecb9">3.0及更高版本</b> 。</p><p id="f6a97710">可能在代理计算机上安装了多个版本的NUnit并在构建中使用它们中的任何一个。</p></aside><aside class="warning " rel="nunit.md" id="cd9825f5" data-title=""><p id="ce6b1851">由于NUnit中的问题， <a href="https://github.com/nunit/docs/wiki/Release-Notes#issues-resolved-1" rel="noopener noreferrer" data-external="true" target="_blank">NUnit</a>构建运行器<b id="d21b8b1b">不</b>支持NUnit版本<b id="1f2094b1">3.4.0</b> 。仅3.4.0版本受到了影响，其他NUnit 3.x版本可以与TeamCity一起正常工作。</p></aside><p id="57782249">请注意，NUnit运行器仅支持<a href="https://docs.microsoft.com/en-us/dotnet/framework/get-started/overview" rel="noopener noreferrer" data-external="true" target="_blank">.NET Framework</a> 。要为<a href="https://docs.microsoft.com/en-us/dotnet/framework/get-started/net-core-and-open-source" rel="noopener noreferrer" data-external="true" target="_blank">.NET Core</a>项目（和.NET Framework项目4.0或更高版本）运行测试，请改用.NET CLI（dotnet）构建运行程序和<a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-test" rel="noopener noreferrer" data-external="true" target="_blank">test</a>命令。有关详细信息，请参考<a href="nunit-support.html#Framework-Compatibility">NUnit支持</a>页面。</p><p id="9328b676">在此页：</p><p id="8c9eea4b"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#NUnit-NUnit3Requirements">NUnit 3要求</a><ul class="list _bullet"><li class="list__item"><a href="#NUnit-InstallingNUnit">安装NUnit</a></li><li class="list__item"><a href="#NUnit-InstallingExtensions">安装扩展</a></li></ul></li><li class="list__item"><a href="#NUnit-NUnitTestSettings">NUnit测试设置</a></li><li class="list__item"><a href="#NUnit-CodeCoverage">代码覆盖率</a></li></ul><p></p><p id="4c8735ce"><a name="NUnit3Extensions"></a><a name="NUnit-NUnit3Extensions"></a></p><a name="NUnit3Requirements"></a><a name="NUnit-3-Requirements"></a><div class="chapter"><h2 id="NUnit-NUnit3Requirements">NUnit 3要求</h2><a name="InstallingNUnit"></a><a name="Installing-NUnit"></a><div class="chapter"><h3 id="NUnit-InstallingNUnit">安装NUnit</h3><a name="installing-nunit"></a><p id="e0268011">要使用TeamCity NUnit构建运行器，请首先<b id="89dcebb9">使用以下选项之一</b>在TeamCity代理上安装<a href="https://www.nuget.org/packages/NUnit/" rel="noopener noreferrer" data-external="true" target="_blank">NUnit NuGet软件包</a> ：</p><ul class="list _ul"><li class="list__item" id="e83ef8ed"><p id="06b2d258">将NuGet安装构建步骤添加为构建配置的第一步。<br>例如，您可以在NUnit构建步骤之前添加一个<a href="command-line.html">命令行</a>构建步骤，该步骤将安装<code class="code">NUnit.Console</code> NuGet包如下：</p><div class="code-block" data-lang="bash">％teamcity.tool。NuGet。命令行。DEFAULT％tools \ nuget.exe安装NUnit。控制台-版本3.6.0 -o软件包</div><p id="73bcebc0">注意<code class="code">%teamcity.tool.NuGet.CommandLine.DEFAULT%</code>是对TeamCity代理下安装的NuGet的引用。<br>您可以从<b id="0a48ff71">管理|</b>代理上安装NuGet。 <b id="0a48ff71">工具</b>页面，您还可以在其中将已安装的NuGet版本之一标记为默认版本。</p><p id="b71944a3">之后， <code class="code">%teamcity.tool.NuGet.CommandLine.DEFAULT%</code>参数参考应正确解析为代理上的NuGet安装路径。<br>然后，nunit3-console应该出现在packages目录下。</p><p id="d7d6d14e">要运行测试，请在下一个NUnit构建步骤中，将NUnit设置中的NUnit路径指定为<code class="code">packages\NUnit.ConsoleRunner.3.6.0\tools\nunit3-console.exe</code> 。</p><p id="fa40e652"><i id="17f06c9c">要么</i></p></li><li class="list__item" id="21f54222"><p id="f8480643">在某个标准位置的所有代理上手动安装NUnit并将路径配置为<code class="code">nunit-console.exe</code>在您的NUnit构建步骤中。</p></li></ul></div><a name="InstallingExtensions"></a><a name="Installing-Extensions"></a><div class="chapter"><h3 id="NUnit-InstallingExtensions">安装扩展</h3><p id="54dcfb2e">从3.2.0版开始，NUnit需要<code class="code">NUnit.Extension.NUnitProjectLoader</code>要安装在TeamCity代理上的扩展程序。<br>从3.4.1版开始，NUnit需要<code class="code">NUnit.Extension.TeamCityEventListener</code>要安装在TeamCity代理上的扩展程序。</p><p id="d39f7a16">NUnit运行程序检查扩展，如果未找到扩展，则在版本3.2.0和3.2.1中，构建将失败而不会发出警告。从3.4.1版开始，将显示一条消息，提示您安装它们。<br>这些扩展可以使用<a href="https://www.nuget.org/packages/NUnit.Console" rel="noopener noreferrer" data-external="true" target="_blank">NUnit Console版本3</a> NuGet软件包批量安装，也可以单独安装： <code class="code">NUnit.Extension.TeamCityEventListener</code>和<code class="code">NUnit.Extension.NUnitProjectLoader</code> 。</p></div></div><a name="NUnitTestSettings"></a><a name="NUnit-Test-Settings"></a><div class="chapter"><h2 id="NUnit-NUnitTestSettings">NUnit测试设置</h2><div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="2164349f"><thead><tr id="22f6d6f6" class="ijRowHead"><th id="084cd68a"><p id="3b0f99d9">设置</p></th><th id="f01c7332"><p id="628d341d">描述</p></th></tr></thead><tbody><tr id="ef834f23" class="ijRowOdd"><td id="bdf6cd9a"><a name="runner"></a><a name="NUnit-runner"></a><p id="aff0ba3d">NUnit亚军</p></td><td id="70954013"><p id="5f7bdc35">选择用于运行测试的NUnit版本。可用设置的集合将根据所选版本而有所不同。</p></td></tr><tr id="1f42f167" class="ijRowEven"><td id="dbbb30c6"><a name="pathToNUnitConsoleTool"></a><a name="NUnit-pathToNUnitConsoleTool"></a><p id="5cc595b3">NUnit控制台</p></td><td id="e4a14cf3"><p id="8d9ca0b1"><i id="ce934466">如果选择了NUnit 3.0，则可用</i> 。</p><p id="5f5d21f9">选择一个预装的控制台工具或指定一个自定义路径<code class="code">nunit3-console.exe</code> ：</p><ul class="list _ul"><li class="list__item" id="10722cf9"><p><b id="f17e7e3e">在TeamCity 9.1.4之前</b> ，请指定包含控制台可执行文件的目录</p></li><li class="list__item" id="5586f376"><p><b id="e6122438">从9.1.4开始</b> ，请指定控制台可执行文件的路径，包括文件名</p></li></ul></td></tr><tr id="c3b1bc53" class="ijRowOdd"><td id="96fdb6ab"><a name="workingDirectory"></a><a name="NUnit-workingDirectory"></a><p id="72f2b145">工作目录</p></td><td id="0648a3a1"><p id="6767439d"><i id="30d7b31f">如果选择了NUnit 3.0，则可用。可选的。</i></p><p id="968a0f40">如果<a href="build-working-directory.html">构建工作目录</a>与测试程序集的目录不同，则指定其路径。</p></td></tr><tr id="f3037b64" class="ijRowEven"><td id="28c8a20c"><a name="appConfigFile"></a><a name="NUnit-appConfigFile"></a><p id="dcffe32d">应用程序配置文件的路径</p></td><td id="fc1dcc36"><p id="434e70bd"><i id="df26d9f3">如果选择了NUnit 3.0，则可用</i> 。</p><p id="f880e978">指定运行测试时要使用的应用程序配置文件的路径。该路径是绝对路径或相对于<a href="build-checkout-directory.html">checkout目录</a>的路径。</p></td></tr><tr id="daf0a31c" class="ijRowOdd"><td id="83c4960b"><a name="NUnit-cmdParameters"></a><a name="NUnit-NUnit-cmdParameters"></a><p id="554af27f">附加命令行参数</p></td><td id="99b0d2aa"><p id="93ea7959"><i id="d6bf694a">如果选择了NUnit 3.0，则可用</i> 。</p><p id="6314e71f">输入<a href="https://github.com/nunit/docs/wiki/Console-Command-Line" rel="noopener noreferrer" data-external="true" target="_blank">其他命令行参数</a>以传递给<code class="code">nunit-console.exe</code> 。</p></td></tr><tr id="85e72ed0" class="ijRowEven"><td id="a8fa864e"><p id="bb1a37b9">.NET运行时</p></td><td id="296fe3e9"><p id="2b9e4534">从“ <b id="9afe883d">平台”</b>下拉菜单中，在x64计算机上选择所需的执行模式。支持的值为： <code class="code">Auto (MSIL)</code> ， <code class="code">x86</code>和<code class="code">x64</code> 。</p><p id="f540c48c">从“ <b id="780a377f">版本”</b>下拉菜单中，选择所需的.NET Framework版本。支持的值为： <code class="code">v2.0</code> ， <code class="code">v4.0</code> ;和<code class="code">auto</code> <i id="6d6b40c9">如果选择了NUnit 3.0</i> ，则<i id="6d6b40c9">可用</i> 。<br><i id="074a2960">对于NUnit 3.0</i> ，如果<code class="code">auto</code>选择后，测试将在编译时使用的框架下运行。</p></td></tr><tr id="34b92d90" class="ijRowOdd"><td id="5346fc7d"><p id="6f580782">从运行测试</p></td><td id="e7f4bf62"><p id="151e0184">指定要运行NUnit测试的.NET程序集。多个条目以逗号分隔；已启用MSBuild通配符用法。程序集文件的路径是绝对路径或相对于<a href="build-checkout-directory.html">checkout目录</a>的路径。在以下示例中，TeamCity将在所有项目目录中搜索测试程序集并运行这些测试。</p><div class="code-block" data-lang="bash">** \ *。dll</div><aside class="note " rel="9b064bb4" id="28e77a75" data-title=""><p id="d3a70e27">所有这些通配符都是相对于checkout目录指定的。</p></aside></td></tr><tr id="f3b0eaef" class="ijRowEven"><td id="f0e9239a"><p id="f5accde2">不要从</p></td><td id="198bb106"><p id="bcf8f504">指定应从要测试的程序集列表中排除的.NET程序集。多个条目以逗号分隔；已启用MSBuild通配符用法。程序集文件的路径是绝对路径或相对于<a href="build-checkout-directory.html">checkout目录</a>的路径。<br>在以下示例中，TeamCity将忽略此目录中指定的测试。</p><div class="code-block" data-lang="bash">** \ obj \ ** \ *。dll</div><aside class="note " rel="e4178bbb" id="2c3c6aa8" data-title=""><p id="c2def47b">所有这些通配符都是相对于checkout目录指定的。</p></aside></td></tr><tr id="110155e5" class="ijRowOdd"><td id="ca664253"><p id="6197e8e2">包括类别</p></td><td id="84aaf177"><p id="07a594ec">指定要运行的NUnit测试类别。多个条目以逗号分隔。<br>这里也支持<a href="teamcity-nunit-test-launcher.html#Category-Expression">类别表达式</a> 。逗号，分号和换行符被视为全局<b id="a03ae817">或</b>运算符（在表达式解析之前）。由于<b id="2c3dc931">不支持</b> NUnit 3.0 <b id="2c3dc931">类别表达式</b> ，因此必须按照<a href="https://github.com/nunit/docs/wiki/Test-Selection-Language" rel="noopener noreferrer" data-external="true" target="_blank">NUNit文档中的说明</a>通过命令行进行设置。</p></td></tr><tr id="5fa87bf7" class="ijRowEven"><td id="782edd27"><p id="ea3f8bbe">排除类别</p></td><td id="da61800d"><p id="19e1962d">指定要从要运行的测试中排除的NUnit类别。多个条目以逗号分隔。<br>这里也支持<a href="teamcity-nunit-test-launcher.html#Category-Expression">类别表达式</a> 。逗号，分号和换行符被视为全局<b id="b6d7de7e">或</b>运算符（在表达式解析之前）。由于<b id="46bf3b53">不支持</b> NUnit 3.0 <b id="46bf3b53">类别表达式</b> ，因此必须按照<a href="https://github.com/nunit/docs/wiki/Test-Selection-Language" rel="noopener noreferrer" data-external="true" target="_blank">NUNit文档中的说明</a>通过命令行进行设置。</p></td></tr><tr id="f367a535" class="ijRowOdd"><td id="c5af5b5d"><p id="6c264067">每个程序集运行过程</p></td><td id="31c3128c"><p id="772f6d6c">_仅适用于<i id="48bcad3e"><a href="upgrade-notes.html#UpgradeNotes-Changesfrom9.1.5to9.1.6">NUnit 3.0</a></i>之前的版本。</p><p id="f7eda595">如果要在新过程中运行每个程序集，请选择此选项。</p></td></tr><tr id="311a5a53" class="ijRowEven"><td id="e7d8c648"><p id="f1d0b22a">减少测试失败的反馈时间</p></td><td id="1e75e2bf"><p id="047c6c8d">使用此选项来指示TeamCity先进行一些测试。</p></td></tr></tbody></table></div></div><a name="CodeCoverage"></a><a name="Code-Coverage"></a><div class="chapter"><h2 id="NUnit-CodeCoverage">代码覆盖率</h2><p id="c845dc58">要了解有关配置代码覆盖率选项的信息，请参阅“ <a href="configuring-net-code-coverage.html">配置.NET代码覆盖率”</a>页面。</p><p id="ba27f355"><b id="8293ad64">对于NUnit 3.x</b> ，仅支持<a href="jetbrains-dotcover.html">JetBrains dotCover</a>作为覆盖率工具。</p><hr id="73696733"><p id="7edb0370"><b id="66b5fe30">也可以看看：</b></p><p id="939b5b3e"><b id="71b515ae">管理员指南</b> ： <a href="configuring-unit-testing-and-code-coverage.html">配置单元测试和代码覆盖率</a> | <a href="nunit-support.html">NUnit支持</a> | <a href="getting-started-with-nunit.html">NUnit入门</a></p><hr id="7bb33712"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>