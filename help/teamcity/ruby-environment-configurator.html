<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Ruby Environment Configurator - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Ruby Environment Configurator" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/adding-build-features.md|Adding Build Features/ruby-environment-configurator.md|Ruby Environment Configurator" data-main-title="Ruby Environment Configurator" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/ruby-environment-configurator.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Ruby Environment Configurator" id="ruby-environment-configurator.md">Ruby Environment Configurator</h1><p id="72f62bfc">The <i id="db238078">Ruby environment configurator</i> build feature passes Ruby interpreter to all build steps. The build feature adds the selected Ruby interpreter and gems bin directories to the system PATH environment variable and configures other necessary environment variables in case of the <a href="http://rvm.io/" data-external="true" target="_blank" rel="noopener noreferrer">RVM</a> interpreter. For example, in the <a href="command-line.html">Command Line</a> build runner you will be able to directly use such commands as <i id="6370acd3">ruby</i>, <i id="418918df">rake</i>, <i id="6ea7a9f5">gem</i>, <i id="56f3f223">bundle</i>, and so on. Thus, if you want to install gems before launching the <a href="rake.html">Rake</a> build runner, you need to add the <a href="command-line.html">Command Line</a> build step which launches a custom script, for example:</p><div class="code-block" data-lang="bash">gem install rake --no-ri --no-rdoc
gem install bundler --no-ri --no-rdoc

</div><a name="RubyEnvironmentConfiguratorSettings"></a><a name="Ruby-Environment-Configurator-Settings"></a><div class="chapter"><h2 id="RubyEnvironmentConfigurator-RubyEnvironmentConfiguratorSettings">Ruby Environment Configurator Settings</h2><div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="cec021dc"><thead><tr id="6af2c6a7" class="ijRowHead"><th id="b8e52d15"><p id="8eaaa1fc">Option</p></th><th id="d6676081"><p id="b6ee27d0">Description</p></th></tr></thead><tbody><tr id="c7b05409" class="ijRowOdd"><td id="54a8d5fd"><p id="74c55125">Ruby interpreter path</p></td><td id="13c1a5e6"><p id="617371ae">The path to Ruby interpreter. If not specified, the interpreter will be searched in the <code class="code">PATH</code>. In this field you can use values of environment and system variables.<br>For example:</p><div class="code-block" data-lang="none">%env.I_AM_DEFINED_IN_BUILDAGENT_CONFIGURATION%

</div></td></tr><tr id="0cbd685a" class="ijRowEven"><td id="07e8727e"><p id="5c0e46ed">RVM interpreter</p></td><td id="fd2d9976"><p id="3cd152ef">Specify here the RVM interpreter name and optionally a gemset configured on a build agent.Note, that the interpreter name cannot be empty. If gemset isn't specified, the default one will be used.</p><p id="4224edb5">This option can be used if you don't want to use the <code class="code">.rvmrc</code> settings, for instance to run tests on different ruby interpreters instead of those hard-coded in the <code class="code">.rvmrc</code> file.</p></td></tr><tr id="22be6e6a" class="ijRowOdd"><td id="e19df9f3"><p id="d3eb968d">RVM with .rvmrc file</p></td><td id="8e83970f"><p id="544f9681">Specify here the path to a <code class="code">.rvmrc</code> file relative to the checkout directory. If the file is specified, TeamCity will fetch environment variables using the rvm-shell and will pass it to all build steps.</p></td></tr><tr id="40200cc3" class="ijRowEven"><td id="849e25a8"><p id="64c8caf9">Fail build if Ruby interpreter wasn't found</p></td><td id="b068d3c0"><p id="8e5909bb">Check the option to fail a build if the Ruby environment configurator cannot pass the Ruby interpreter to the step execution environment because the interpreter wasn't found on the agent.</p></td></tr></tbody></table></div><hr id="81df1876"><p id="8f92c10c"><b id="a87e3ab4">See also:</b></p><p id="d936d206"><b id="61261f9f">Administrator's Guide</b>: <a href="configuring-build-steps.html">Configuring Build Steps</a> | <a href="command-line.html">Command Line</a> | <a href="rake.html">Rake</a></p><hr id="f9cca5d6"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>