<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Predefined Build Parameters - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Predefined Build Parameters" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-build-parameters.md|Configuring Build Parameters/predefined-build-parameters.md|Predefined Build Parameters" data-main-title="Predefined Build Parameters" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/predefined-build-parameters.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Predefined Build Parameters" id="predefined-build-parameters.md">Predefined Build Parameters</h1><p id="67a5182d">TeamCity provides a number of <a href="configuring-build-parameters.html">build parameters</a> which are ready to be used in the settings of a build configuration or in build scripts.</p><p id="8a16af2d">On this page:</p><p id="d3a189de"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#PredefinedBuildParameters-ServerBuildProperties">Server Build Properties</a></li><li class="list__item"><a href="#PredefinedBuildParameters-ConfigurationParameters">Configuration Parameters</a><ul class="list _bullet"><li class="list__item"><a href="#PredefinedBuildParameters-DependenciesProperties">Dependencies Properties</a></li><li class="list__item"><a href="#PredefinedBuildParameters-OverridingDependenciesProperties">Overriding Dependencies Properties</a></li><li class="list__item"><a href="#PredefinedBuildParameters-VCSProperties">VCS Properties</a></li><li class="list__item"><a href="#PredefinedBuildParameters-Branch-RelatedParameters">Branch-Related Parameters</a></li><li class="list__item"><a href="#PredefinedBuildParameters-OtherParameters">Other Parameters</a></li></ul></li><li class="list__item"><a href="#PredefinedBuildParameters-AgentProperties">Agent Properties</a></li><li class="list__item"><a href="#PredefinedBuildParameters-AgentEnvironmentVariables">Agent Environment Variables</a><ul class="list _bullet"><li class="list__item"><a href="#PredefinedBuildParameters-JavaHomeDirectories">Java Home Directories</a><ul class="list _bullet"><li class="list__item"><a href="#PredefinedBuildParameters-DetectingJavaonAgent">Detecting Java on Agent</a></li><li class="list__item"><a href="#PredefinedBuildParameters-DefiningCustomdirectorytoSearchforJava">Defining Custom directory to Search for Java</a></li><li class="list__item"><a href="#PredefinedBuildParameters-DefiningJava-relatedEnvironmentVariables">Defining Java-related Environment Variables</a></li></ul></li></ul></li><li class="list__item"><a href="#PredefinedBuildParameters-AgentBuildProperties">Agent Build Properties</a></li></ul></p><p id="83d6fac1">The predefined build parameters can originate from several scopes:</p><ul class="list _ul"><li class="list__item" id="9b82bbc6"><p><a href="#Server-Build-Properties">Server Build Properties</a> – the parameters generated by TeamCity on the server-side in the scope of a particular build. An example of such property is a build number.</p></li><li class="list__item" id="c2af1346"><p><a href="#Agent-Properties">Agent Properties</a> – the parameters provided by an agent on connection to the server. The parameters are not specific to any build and characterize the agent environment (for example, the path to .NET framework). These are mainly used in <a href="agent-requirements.html">agent requirements</a>.</p></li><li class="list__item" id="e8e31083"><p><a href="#Agent-Build-Properties">Agent Build Properties</a> – the parameters provided on the agent side in the scope of a particular build right before the build start. For example, a path to a file with a list of changed files.<br>All these parameters are finally passed to the build.</p></li></ul><p id="1b6ee2f2">There is also a special kind of server-side build parameters that can be used in references while defining other parameters, but which are not passed into the build. See <a href="#Configuration-Parameters">Configuration Parameters</a> below for the list of such properties.</p><aside class="note " data-title="" rel="1b6ee2f2" id="20e6f60c"><p id="9b11ecbd">The most up-to-date list of parameters can be obtained in the TeamCity web UI while defining a text value supporting parameters: either click the <img alt="paramsPopupHover.gif" title="paramsPopupHover.gif" src="/help/img/teamcity/2019.1/paramsPopupHover.gif" id="b8c09a19" width="10" height="10" class="inline-icon-10"> icon to the right of the text field, or enter "<code class="code">%</code>" in the text field.</p></aside><a name="ServerBuildProperties"></a><a name="Server-Build-Properties"></a><div class="chapter"><h2 id="PredefinedBuildParameters-ServerBuildProperties">Server Build Properties</h2><p id="b96989e2">System properties can be referenced using <code class="code">%system.propertyName%</code>.</p><div class="table-wrapper"><table class=" wide" width="100%" id="814fb199"><thead><tr id="7fe72d93" class="ijRowHead"><th width="280" id="00d2907b"><p id="74a43d2e">System Property Name</p></th><th width="230" id="668ee992"><p id="8f5202d2">Environment Variable Name</p></th><th id="c4882894"><p id="52fcea7c">Description</p></th></tr></thead><tbody><tr id="c62b327e" class="ijRowOdd"><td id="414e1019"><p id="10027ccf"><code class="code">teamcity.version</code></p></td><td id="2e66ca8b"><p id="ca7c6323"><code class="code">TEAMCITY_VERSION</code></p></td><td id="008b159b"><p id="c4d8584a">The version of TeamCity server. This property can be used to determine the build is run within TeamCity.</p></td></tr><tr id="65c86872" class="ijRowEven"><td id="5d073767"><p id="c4c2d682"><code class="code">teamcity.projectName</code></p></td><td id="7d6f21ed"><p id="84becbb6"><code class="code">TEAMCITY_PROJECT_NAME</code></p></td><td id="e5a1af2c"><p id="21c56295">The name of the project the current build belongs to.</p></td></tr><tr id="c9407b25" class="ijRowOdd"><td id="df0db71b"><p id="ccdd8098"><code class="code">teamcity.buildConfName</code></p></td><td id="ddede4e4"><p id="28e7a183"><code class="code">TEAMCITY_BUILDCONF_NAME</code></p></td><td id="0205de23"><p id="a97a3265">The name of the Build Configuration the current build belongs to.</p></td></tr><tr id="17f43c61" class="ijRowEven"><td id="c0a2413c"><p id="06accb92"><code class="code">teamcity.buildType.id</code></p></td><td id="2e57223a"><p id="6ba57a92">none</p></td><td id="800dae77"><p id="2cfd8d0d">The <a href="identifier.html">unique id</a> used by TeamCity to reference the Build Configuration the current build belongs to</p></td></tr><tr id="ac80b442" class="ijRowOdd"><td id="2a71a502"><p id="c43690c0"><code class="code">teamcity.configuration.properties.file</code></p></td><td id="9de31066"><p id="c47ba41d">none</p></td><td id="502a1a1a"><p id="44f20a26">Full name (including path) of the file containing all the build properties in alphabetical order.</p></td></tr><tr id="d14c4a0f" class="ijRowEven"><td id="c4b28914"><p id="7e94b36c"><code class="code">build.is.personal</code></p></td><td id="82a7e824"><p id="fa840674"><code class="code">BUILD_IS_PERSONAL</code></p></td><td id="b94c9ba4"><p id="c682e83a">Is set to <code class="code">true</code> if the build is a <a href="personal-build.html">personal one</a>. Is not defined otherwise.</p></td></tr><tr id="1b6faf2e" class="ijRowOdd"><td id="bd8683c6"><p id="2d1460a2"><code class="code">build.number</code></p></td><td id="b4d52f00"><p id="94db7b57"><code class="code">BUILD_NUMBER</code></p></td><td id="2fe49cf3"><p id="013d337f">The build number assigned to the build by TeamCity using the build number format. The property is assigned based on the <a href="configuring-general-settings.html#Build-Number-Format">build number format</a>.</p></td></tr><tr id="53ee5c5f" class="ijRowEven"><td id="0ee792e0"><p id="e1356469"><code class="code">teamcity.build.id</code></p></td><td id="b1e010ff"><p id="5e539688">none</p></td><td id="e8147f36"><p id="b166134b">The internal unique id used by TeamCity to reference builds.</p></td></tr><tr id="a9fffb30" class="ijRowOdd"><td id="a22a8fd3"><p id="81590ba8"><code class="code">teamcity.auth.userId</code></p></td><td id="ef96586f"><p id="4fd0539e">none</p></td><td id="16543873"><p id="add45b8f">A generated username that can be used to <a href="configuring-dependencies.html">download artifacts</a> of other build configurations. Valid only during the build. <a href="artifact-dependencies.html#Build-level-authentication">Details</a></p></td></tr><tr id="457af402" class="ijRowEven"><td id="948c9349"><p id="621152fd"><code class="code">teamcity.auth.password</code></p></td><td id="8bf00ac5"><p id="644c6f54">none</p></td><td id="cb0423fc"><p id="37ce3d2f">A generated password that can be used to download artifacts of other build configurations. Valid only during the build. <a href="artifact-dependencies.html#Build-level-authentication">Details</a></p></td></tr><tr id="f01715fc" class="ijRowOdd"><td id="6357c771"><p id="e1a22788"><code class="code">build.vcs.number.&lt;VCS root ID&gt;</code></p></td><td id="92d040a1"><p id="3e42390c"><code class="code">BUILD_VCS_NUMBER_&lt;VCS root ID&gt;</code></p></td><td id="16bdd1f0"><p id="4d5877fd">The latest VCS revision included in the build for the root identified. See <a href="configuring-vcs-roots.html">Configuring VCS Roots</a> for the <i id="bdaced0c">&lt;VCS root ID&gt;</i> description. If there is only a single root in the configuration, the <code class="code">build.vcs.number</code> property (without the VCS root ID) is also provided.</p><aside class="note " data-title="" rel="4d5877fd" id="e5b953fb"><p id="306d8844">Note that this value is a VCS-specific (for example, for SVN the value is a revision number while for CVS it is a timestamp)</p></aside></td></tr></tbody></table></div></div><a name="ConfigurationParameters"></a><a name="Configuration-Parameters"></a><div class="chapter"><h2 id="PredefinedBuildParameters-ConfigurationParameters">Configuration Parameters</h2><p id="baebb99e">These are the parameters that other properties can reference (only if defined on the <b id="bdb0da44">Parameters</b> page), but that are not passed to the build themselves.</p><p id="d06912d4">You can get the full set of such server properties by adding the <code class="code">system.teamcity.debug.dump.parameters</code> property to a build configuration and examining the "Available server properties" section in the build log.</p><p id="00c9acf2">Among these properties are the following:</p><a name="DependenciesProperties"></a><a name="Dependencies-Properties"></a><div class="chapter"><h3 id="PredefinedBuildParameters-DependenciesProperties">Dependencies Properties</h3><p id="7dc885ec">These are properties provided by the builds the current build depends on (via a snapshot or an artifact <a href="dependent-build.html">dependency</a>).</p><p id="9ac3261b">In the <a href="dependent-build.html">dependent build</a>, dependencies properties have the following format:</p><div class="code-block" data-lang="markup">dep.&lt;btID&gt;.&lt;property name&gt;

</div><ul class="list _ul"><li class="list__item" id="57f30774"><p><code class="code">&lt;btID&gt;</code> – is the <a href="configuring-general-settings.html">ID</a> of the build configuration to get the property from. Only the configurations the current one has snapshot or artifact dependencies on are supported. Indirect dependencies configurations are also available (e.g. A depends on B and B depends on C - A will have C's properties available).</p></li><li class="list__item" id="572a6711"><p><code class="code">&lt;property name&gt;</code> – the name of the <a href="configuring-build-parameters.html">build parameter</a> of the build configuration with the given ID.</p></li></ul><aside class="note " data-title="" rel="0508e2d7" id="6ca8d7af"><p id="ea11e4d6">When using build parameters of type "Password", referencing them from a dependency such as <code class="code">%dep.&lt;btID&gt;.password_parameter%</code> will not retrieve the actual value. This is done for security reasons to prevent dependencies from accessing the value, thus restricting the possibility of unauthorized access to it.</p></aside></div><a name="OverridingDependenciesProperties"></a><a name="Overriding-Dependencies-Properties"></a><div class="chapter"><h3 id="PredefinedBuildParameters-OverridingDependenciesProperties">Overriding Dependencies Properties</h3><p id="bf46915b">It is possible to redefine the <a href="configuring-build-parameters.html">build parameters</a> in the snapshot-dependency builds when the current build starts. For example, build configuration A depends on B and B depends on C; when triggering A, there is the ability to change parameters in any of its dependencies using the following format:</p><div class="code-block" data-lang="markup">reverse.dep.&lt;btID&gt;.&lt;property name&gt;

</div><p id="0a9e3a91">You can change a parameter in all dependencies at once using this syntax:</p><div class="code-block" data-lang="markup">reverse.dep.*.&lt;property name&gt;

</div><p id="61e4c5bf">Note that if a parameter is redefined in B, but only A is triggered, no parameters change occurs.</p><p id="7d570581">If build configurations A and B are trying to set different values for the same parameter in the build configuration C, the following rules apply:</p><ul class="list _ul"><li class="list__item" id="82bffc15"><p>if A depends on B by a snapshot dependency either directly or transitively, the value proposed by A will be used in C (and vice versa, if B depends on A)</p></li><li class="list__item" id="e4e263f8">if both A and B do not depend on each other, TeamCity will consider it a conflict and will not modify the original value in C. Instead, two other parameters will be created for C:<ul class="list _ul"><li class="list__item" id="a5fecc1f"><code class="code">conflict.&lt;btA&gt;.&lt;property name&gt;=&lt;valueA&gt;</code></li><li class="list__item" id="aafede8a"><code class="code">conflict.&lt;btB&gt;.&lt;property name&gt;=&lt;valueB&gt;</code></li></ul></li></ul><p id="38661efa">The <code class="code">reverse.dep.</code> parameters are processed on queuing of the build where the parameters are defined. As the parameters' values should be known at that stage, they can only be defined either as <a href="configuring-build-parameters.html#Defining-Build-Parameters-in-Build-Configuration">build configuration parameters</a> or in the <a href="triggering-a-custom-build.html#Run-Custom-Build-dialog">custom build dialog</a>. Setting the parameter during the build has no effect.</p><p id="396e085a">Pushing a new parameter into the build will supersede the <a href="snapshot-dependencies.html#Suitable-Builds">"Do not run new build if there is a suitable one"</a> snapshot dependency option and may trigger a new build if the parameter is set to a non-default value.</p><p id="d9b472a1">Note that the values of the <code class="code">reverse.dep.</code> parameters are pushed to the dependency builds "as is", without reference resolution. %-references, if any, will be resolved in the context of the build where the parameters are pushed to.<br><code class="code">&lt;property name&gt;</code> is the name of the property to set in the noted build configuration. To set system property, <code class="code">&lt;property name&gt;</code> should contain the <code class="code">system.</code> prefix.</p></div><a name="VCSProperties"></a><a name="VCS-Properties"></a><div class="chapter"><h3 id="PredefinedBuildParameters-VCSProperties">VCS Properties</h3><p id="eb9c16d5">These are the settings of VCS roots attached to the build configuration.</p><p id="99707e86">VCS properties have the following format:</p><div class="code-block" data-lang="markup">vcsroot.&lt;VCS root ID&gt;.&lt;VCS root property name&gt;

</div><ul class="list _ul"><li class="list__item" id="3128bb0e"><p><code class="code">&lt;VCS root ID&gt;</code> – is the VCS root ID as described on the <a href="configuring-vcs-roots.html">Configuring VCS Roots</a> page.</p></li><li class="list__item" id="cb324486"><p><code class="code">&lt;VCS root property name&gt;</code> – the name of the VCS root property. This is VCS-specific and depends on the VCS support. You can get the available list of properties as described <a href="#Configuration-Parameters">above</a>.If there is only one VCS root in a build configuration, the <code class="code">&lt;VCS root ID&gt;.</code> part can be omitted.</p></li></ul><p id="209e142a">Properties marked by the VCS support as <code class="code">secure</code> (for example, passwords) are not available as reference properties.</p></div><a name="Branch-RelatedParameters"></a><a name="Branch-Related-Parameters"></a><div class="chapter"><h3 id="PredefinedBuildParameters-Branch-RelatedParameters">Branch-Related Parameters</h3><p id="931256bb">When TeamCity starts a build in a build configuration where a <a href="working-with-feature-branches.html">branch specification</a> is configured, it adds a branch label to each build. This logical branch name is also available as a configuration parameter:</p><div class="code-block" data-lang="markup">teamcity.build.branch

</div><p id="d60303df">To distinguish builds started on a default and a non-default branch, there is an additional boolean configuration parameter available since 7.1.5 which allows differentiating these cases:</p><div class="code-block" data-lang="markup">teamcity.build.branch.is_default=true|false

</div><p id="cb2c3e39">For Git &amp; Mercurial, TeamCity provides additional parameters with the names of VCS branches known at the moment of the build start. Note that these may differ from the logical branch name as per branch specification configured. This VCS branch is available from a configuration parameter with the following name:</p><div class="code-block" data-lang="markup">teamcity.build.vcs.branch.&lt;VCS root ID&gt;

</div><p id="fbb772ca">Where <code class="code">&lt;VCS root ID&gt;</code> is the VCS root ID as described on the <a href="configuring-vcs-roots.html">Configuring VCS Roots</a> page.</p></div><a name="OtherParameters"></a><a name="Other-Parameters"></a><div class="chapter"><h3 id="PredefinedBuildParameters-OtherParameters">Other Parameters</h3><div class="table-wrapper"><table width="100%" id="3b4b588a"><thead><tr id="c4309fa1" class="ijRowHead"><th width="280" id="539da825"><p id="0341e4b4">Parameter Name</p></th><th id="8a85fe24"><p id="8fbfe021">Description</p></th></tr></thead><tbody><tr id="3be9f261" class="ijRowOdd"><td id="cf55a2ad"><p id="4acd85b3"><code class="code">teamcity.build.triggeredBy</code></p></td><td id="3851269b"><p id="b8f96c2f">Human-friendly description of how the build was triggered</p></td></tr><tr id="12fd9a72" class="ijRowEven"><td id="0ed314bb"><p id="6f654c94"><code class="code">teamcity.build.triggeredBy.username</code></p></td><td id="ab89a6e5"><p id="ae2ab005">If the build was triggered by a user, the username of this user is reported. When a build is triggered not by a user, this property is not reported.</p></td></tr></tbody></table></div></div></div><a name="AgentProperties"></a><a name="Agent-Properties"></a><div class="chapter"><h2 id="PredefinedBuildParameters-AgentProperties">Agent Properties</h2><p id="df68d0b1">Agent-specific properties are defined on each build agent and vary depending on its environment. Aside from standard properties (for example, <code class="code">teamcity.agent.jvm.os.name</code> or <code class="code">teamcity.agent.jvm.os.arch</code>, etc. – these are provided by the JVM running on agent) agents also have properties based on installed applications. TeamCity automatically detects a number of applications including the presence of .NET Framework, Visual Studio and adds the corresponding system properties and environment variables. A complete list of predefined agent-specific properties is provided in the <a href="#Agent-Properties">table</a> below.</p><p id="2c39f3e4">If additional applications/libraries are available in the environment, the administrator can manually define the property in the <code class="code">&lt;agent home&gt;/conf/buildAgent.properties</code> file. These properties can be used for setting various build configuration options, for defining build configuration requirements (for example, existence or absence of some property) and inside build scripts. For more information on how to reference these properties, see the <a href="configuring-build-parameters.html#Defining-Build-Parameters-in-Build-Configuration">Defining and Using Build Parameters in Build Configuration</a> section.</p><p id="1b7b178a">In the TeamCity web UI, the actual properties defined on the agent can be reviewed by going to the <b id="1f2224e1">Agents</b> tab at the top navigation bar <b id="42265cb7">&lt;Agent&gt; | &lt;Agent&gt;</b> page | the <b id="d2f7cabf">Agent Parameters</b> tab:</p><div class="table-wrapper"><table width="100%" id="e8a389dc"><thead><tr id="3fa23144" class="ijRowHead"><th width="280" id="31e847e7"><p id="6c7ca05b">Predefined Property</p></th><th id="86dae12d"><p id="452a4594">Description</p></th></tr></thead><tbody><tr id="6fdc6c41" class="ijRowOdd"><td id="2389e1bd"><p id="b87dc67e"><code class="code">teamcity.agent.name</code></p></td><td id="138ddab6"><p id="0edd0428">The name of the agent as specified in the <code class="code">buildAgent.properties</code> agent configuration file. Can be used to set a requirement of build configuration to run (or not run) on particular build agent.</p></td></tr><tr id="d0721260" class="ijRowEven"><td id="7d316298"><p id="5c326a1f"><code class="code">teamcity.agent.work.dir</code></p></td><td id="2dc1532a"><p id="eb3205b2">The path of <a href="agent-work-directory.html">Agent Work Directory</a>.</p></td></tr><tr id="8dc66513" class="ijRowOdd"><td id="0d5b3466"><p id="afe091d1"><code class="code">teamcity.agent.work.dir.freeSpaceMb</code></p></td><td id="b705c65b"><p id="b46ede3b">Free space available in the  <a href="agent-work-directory.html">Agent Work Directory</a>.</p></td></tr><tr id="ad24fb34" class="ijRowEven"><td id="95b6dee4"><p id="efd30e92"><code class="code">teamcity.agent.home.dir</code></p></td><td id="b0f431e5"><p id="160ef4ec">The path of <a href="agent-home-directory.html">Agent Home Directory</a>.</p></td></tr><tr id="30f2369c" class="ijRowOdd"><td id="1ed6a022"><p id="8775e781"><code class="code">teamcity.agent.tools.dir</code></p></td><td id="aa8f5e6f"><p id="c1c50cb9">The path to the <a href="installing-agent-tools.html">Tools</a> directory on the Agent</p></td></tr><tr id="4820ada9" class="ijRowEven"><td id="21352e01"><p id="c865e117"><code class="code">teamcity.agent.jvm.os.version</code></p></td><td id="d3783d1f"><p id="2769df46">The corresponding JVM property (see <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/System.html#getProperties()" data-external="true" target="_blank" rel="noopener noreferrer">JDK help</a> for properties description)</p></td></tr><tr id="ca9e0e01" class="ijRowOdd"><td id="04a2f9f7"><p id="034cf8ad"><code class="code">teamcity.agent.jvm.user.country</code></p></td><td id="01823eb5"><p id="165ceef7">The corresponding JVM property (see <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/System.html#getProperties()" data-external="true" target="_blank" rel="noopener noreferrer">JDK help</a> for properties description)</p></td></tr><tr id="de6c0648" class="ijRowEven"><td id="999e5e98"><p id="0dce4edf"><code class="code">teamcity.agent.jvm.user.home</code></p></td><td id="30bc2382"><p id="6757ab3b">The corresponding JVM property (see <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/System.html#getProperties()" data-external="true" target="_blank" rel="noopener noreferrer">JDK help</a> for properties description)</p></td></tr><tr id="c7badd72" class="ijRowOdd"><td id="16499b85"><p id="cb47eab4"><code class="code">teamcity.agent.jvm.user.timezone</code></p></td><td id="a14b2b48"><p id="d879f701">The corresponding JVM property (see <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/System.html#getProperties()" data-external="true" target="_blank" rel="noopener noreferrer">JDK help</a> for properties description)</p></td></tr><tr id="db92b004" class="ijRowEven"><td id="53e04e77"><p id="04d39d5e"><code class="code">teamcity.agent.jvm.user.name</code></p></td><td id="d169beaf"><p id="756d2b36">The corresponding JVM property (see <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/System.html#getProperties()" data-external="true" target="_blank" rel="noopener noreferrer">JDK help</a> for properties description)</p></td></tr><tr id="aac41021" class="ijRowOdd"><td id="324a8964"><p id="36ef4673"><code class="code">teamcity.agent.jvm.user.language</code></p></td><td id="4ce9a6a7"><p id="7b562796">The corresponding JVM property (see <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/System.html#getProperties()" data-external="true" target="_blank" rel="noopener noreferrer">JDK help</a> for properties description)</p></td></tr><tr id="8b806a3f" class="ijRowEven"><td id="9591dbd7"><p id="c06795fe"><code class="code">teamcity.agent.jvm.user.variant</code></p></td><td id="53784a87"><p id="03862ddc">The corresponding JVM property (see <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/System.html#getProperties()" data-external="true" target="_blank" rel="noopener noreferrer">JDK help</a> for properties description)</p></td></tr><tr id="1156c486" class="ijRowOdd"><td id="1bcc2bb9"><p id="aab7a5e9"><code class="code">teamcity.agent.jvm.file.encoding</code></p></td><td id="d7a192cf"><p id="4f699559">The corresponding JVM property (see <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/System.html#getProperties()" data-external="true" target="_blank" rel="noopener noreferrer">JDK help</a> for properties description)</p></td></tr><tr id="1f22a366" class="ijRowEven"><td id="c07edbc2"><p id="ba3181a9"><code class="code">teamcity.agent.jvm.file.separator</code></p></td><td id="66a6ee4b"><p id="0ccf285b">The corresponding JVM property (see <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/System.html#getProperties()" data-external="true" target="_blank" rel="noopener noreferrer">JDK help</a> for properties description)</p></td></tr><tr id="a03fb8d1" class="ijRowOdd"><td id="67009f63"><p id="f942bacc"><code class="code">teamcity.agent.jvm.path.separator</code></p></td><td id="50b8ccc5"><p id="003e0cc0">The corresponding JVM property (see <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/System.html#getProperties()" data-external="true" target="_blank" rel="noopener noreferrer">JDK help</a> for properties description)</p></td></tr><tr id="36cd1ffe" class="ijRowEven"><td id="5a747f83"><p id="0f4786f9"><code class="code">teamcity.agent.jvm.specification</code></p></td><td id="2986ea4d"><p id="27716771">The corresponding JVM property (see <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/System.html#getProperties()" data-external="true" target="_blank" rel="noopener noreferrer">JDK help</a> for properties description)</p></td></tr><tr id="3c10c271" class="ijRowOdd"><td id="a33f0e6f"><p id="496f18dc"><code class="code">teamcity.agent.jvm.version</code></p></td><td id="0fba9a03"><p id="4fc8b95f">The corresponding JVM property (see <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/System.html#getProperties()" data-external="true" target="_blank" rel="noopener noreferrer">JDK help</a> for properties description)</p></td></tr><tr id="7e472107" class="ijRowEven"><td id="fd7fe935"><p id="cb0e2f2d"><code class="code">teamcity.agent.jvm.java.home</code></p></td><td id="8a620ddd"><p id="360fdc7d">See the section <a href="#Java-Home-Directories">below</a> for details</p></td></tr><tr id="3774b608" class="ijRowOdd"><td id="3ea73a3b"><p id="5de1ed89"><code class="code">teamcity.agent.os.arch.bits</code></p></td><td id="5769cc29"><p id="f569d0f4"><b id="62737475">Since TeamCity 10.0</b> The agent's OS bitness</p></td></tr><tr id="a0f2c4e2" class="ijRowEven"><td id="b2a56f30"><p id="2c6f145a"><code class="code">DotNetFramework&lt;version&gt;[_x86|_x64]</code></p></td><td id="8bfbb35d"><p id="cbb8bf73">This property is defined if the corresponding version(s) of .NET Framework runtime is installed. (Supported versions are 1.1, 2.0, 3.5, <a href="http://msdn.microsoft.com/en-us/netframework/aa569263.aspx" data-external="true" target="_blank" rel="noopener noreferrer">4.0</a> - 4.6.1)</p></td></tr><tr id="a960251f" class="ijRowOdd"><td id="2c3702c2"><p id="2df552c1"><code class="code">DotNetFramework&lt;version&gt;[_x86|_x64]_Path</code></p></td><td id="ede8c788"><p id="8fc7977f">This property value is set to the corresponding framework runtime version(s) path(s)</p></td></tr><tr id="cac63992" class="ijRowEven"><td id="3935b478"><p id="283359a1"><code class="code">DotNetFrameworkSDK&lt;version&gt;[_x86|_x64]</code></p></td><td id="908c0f92"><p id="15fabd15">This property is defined if the corresponding version(s) of .NET Framework SDK is installed. (Supported versions are 1.1, <a href="http://www.microsoft.com/downloads/en/details.aspx?FamilyID=fe6f2099-b7b4-4f47-a244-c96d69c35dec&amp;displaylang=en" data-external="true" target="_blank" rel="noopener noreferrer">2.0</a>)</p></td></tr><tr id="f9ff6cac" class="ijRowOdd"><td id="127eab61"><p id="df7bb98f"><code class="code">DotNetFrameworkSDK&lt;version&gt;[_x86|_x64]_Path</code></p></td><td id="5b7848af"><p id="0a43ac05">This property value is the path of the corresponding framework SDK version.</p></td></tr><tr id="a7dd255e" class="ijRowEven"><td id="cfe54f4e"><p id="2bad38df"><code class="code">DotNetFrameworkTargetingPack&lt;version&gt;_Path</code></p></td><td id="74a2bc22"><p id="13aca613">This property value is the path to the corresponding Reference assemblies (AKA Targeting Pack) location. (Supported versions are 2.0 - 4.6.1)</p></td></tr><tr id="78995730" class="ijRowOdd"><td id="73799c24"><p id="d206bf30"><code class="code">WindowsSDK&lt;version&gt;</code></p></td><td id="aa296786"><p id="fa5335cc">This property is defined if the corresponding version of Windows SDK is installed. (Supported versions are 6.0, 6.0A, <a href="http://www.microsoft.com/downloads/en/details.aspx?FamilyID=c17ba869-9671-4330-a63e-1fd44e0e2505&amp;displaylang=en" data-external="true" target="_blank" rel="noopener noreferrer">7.0</a>, 7.0A, <a href="http://www.microsoft.com/downloads/en/details.aspx?FamilyID=6b6c21d2-2006-4afa-9702-529fa782d63b&amp;displaylang=en" data-external="true" target="_blank" rel="noopener noreferrer">7.1</a>, 8.0, 8.0A, 8.1, 8.1A, 10)</p></td></tr><tr id="250f208f" class="ijRowEven"><td id="4e2a3c31"><p id="b10098e3"><code class="code">WindowsSDK&lt;version&gt;_Path</code></p></td><td id="38240c1f"><p id="c531ace4">This property value is the path of the corresponding version of Windows SDK.</p></td></tr><tr id="9fb34120" class="ijRowOdd"><td id="19ee2837"><p id="2d84070b"><code class="code">VS[2003|2005|2008|2010|2012|2013|2015|2017]</code></p></td><td id="91bee2cd"><p id="464b680b">This property is defined if the corresponding version(s) of Visual Studio is installed</p></td></tr><tr id="20d807cd" class="ijRowEven"><td id="cfaef054"><p id="0270d6c0"><code class="code">VS[2003|2005|2008|2010|2012|2013|2015|2017]_Path</code></p></td><td id="649ba5bc"><p id="eb7b3ffd">This property value is the path to the directory that contains <code class="code">devenv.exe</code></p></td></tr><tr id="750c8845" class="ijRowOdd"><td id="6c3d3793"><p id="6e310acd"><code class="code">teamcity.dotnet.nunitlauncher&lt;version&gt;</code></p></td><td id="6398c3b4"><p id="f556bde7">This property value is the path to the directory that contains the standalone NUnit test launcher, <code class="code">NUnitLauncher.exe</code>. The version number refers to the version of .NET Framework under which the test will run. The version equals the version of .NET Framework and can have a value of 1.1, 2.0, or 2.0vsts.</p></td></tr><tr id="3652b76f" class="ijRowEven"><td id="1aa1754a"><p id="c7120ab1"><code class="code">teamcity.dotnet.nunitlauncher.msbuild.task</code></p></td><td id="3bc9cdf3"><p id="2ef02ed2">The property value is the path to the directory that contains the MSBuild task dll providing the NUnit task for MSBuild, Visual Studio (sln).</p></td></tr><tr id="e4ce37b2" class="ijRowOdd"><td id="4b8eeb34"><p id="ce025b1b"><code class="code">teamcity.dotnet.msbuild.extensions2.0</code></p></td><td id="af225b28"><p id="f1e9fd4e">The property value is the path to the directory that contains MSBuild 2.0 listener and tasks assemblies.</p></td></tr><tr id="43d194c8" class="ijRowEven"><td id="f43e0923"><p id="8848c4ce"><code class="code">teamcity.dotnet.msbuild.extensions4.0</code></p></td><td id="3a5e86eb"><p id="b84796e1">The property value is the path to the directory that contains MSBuild 4.0 listener and tasks assemblies.</p></td></tr><tr id="600d5ffc" class="ijRowOdd"><td id="a1b1b9dd"><p id="0b700ea4"><code class="code">teamcity.agent.ownPort</code></p></td><td id="1d235554"><p id="d6906064">The <a href="build-agent-configuration.html">agent port</a> used by the TeamCity server to connect to the agent</p></td></tr><tr id="8d65d048" class="ijRowEven"><td id="2f06a97b"><p id="d93a4bc1"><code class="code">teamcity.agent.protocol</code></p></td><td id="f27258e3"><p id="4163346e">The <a href="setting-up-and-running-additional-build-agents.html#Agent-Server-Data-Transfers">protocol</a> used for data transfers between the agent and the server</p></td></tr><tr id="1f117b68" class="ijRowOdd"><td id="6832aea1"><p id="89e720d1"><code class="code">teamcity.agent.cpuBenchmark</code></p></td><td id="201f46e7"><p id="a9905419"><a href="viewing-build-agent-details.html#Agent-Summary">CPU benchmarking</a> result for the agent</p></td></tr><tr id="c8eec331" class="ijRowEven"><td id="f343420e"><p id="f9d0c8b9"><code class="code">teamcity.agent.hardware.cpuCount</code></p></td><td id="e0ea0d57"><p id="a84e8ee8">The number of processors in the build agent system</p></td></tr><tr id="0413c528" class="ijRowOdd"><td id="7f994256"><p id="38c64916"><code class="code">teamcity.agent.hostname</code></p></td><td id="54187943"><p id="c6d094c8">The name of the build agent host</p></td></tr></tbody></table></div><aside class="note " data-title="" rel="e8a389dc" id="bf97b92d"><ul class="list _ul"><li class="list__item" id="ffe9b2bf"><p>Make sure to replace "<code class="code">.</code>" with "<code class="code">_</code>" when using properties in MSBuild scripts; e.g.use <code class="code">teamcity_dotnet_nunitlauncher_msbuild_task</code> instead of <code class="code">teamcity.dotnet.nunitlauncher.msbuild.task</code></p></li><li class="list__item" id="03a480db"><p><code class="code">_x86</code> and <code class="code">_x64</code> property suffixes are used to designate the specific version of the framework.</p></li><li class="list__item" id="3af4d4a5"><p><code class="code">teamcity.dotnet.nunitlauncher</code> properties cannot be hidden or disabled.</p></li></ul></aside></div><a name="AgentEnvironmentVariables"></a><a name="Agent-Environment-Variables"></a><div class="chapter"><h2 id="PredefinedBuildParameters-AgentEnvironmentVariables">Agent Environment Variables</h2><p id="3d8c9ee5">An agent can define some environment variables. These variables can be used in build scripts as usual environment variables.</p><a name="JavaHomeDirectories"></a><a name="Java-Home-Directories"></a><div class="chapter"><h3 id="PredefinedBuildParameters-JavaHomeDirectories">Java Home Directories</h3><p id="c4698f34">When a build agent starts, first the installed JDK and JRE are detected; when they are found, the Java-related environment variables are defined as described in the <a href="#Defining-Java-related-Environment-Variables">section below</a>.</p><aside class="note " data-title="" rel="c4698f34" id="4a530f8a"><p id="6df0d1ee">The environment variables are defined only if they are not already present in the environment: if a started agent already has the Java-related environment variables set, they are not redefined.</p></aside><a name="DetectingJavaonAgent"></a><a name="Detecting-Java-on-Agent"></a><div class="chapter"><h4 id="PredefinedBuildParameters-DetectingJavaonAgent">Detecting Java on Agent</h4><p id="8eca73e0">The installed Java is searched for in the ALL locations listed below. Then, every discovered Java is launched to verify that it is a valid Java installation, and the Java version and bitness are determined based on the output.</p><p id="22b1a279">The following locations are searched (a number of locations is common for all operating systems; some of them are OS-specific):</p><ul class="list _ul"><li class="list__item" id="2c3e0a1a"><p>If defined, a custom directory on the agent is searched for Java installations. Defining a custom directory to search for Java is described <a href="#Defining-Custom-directory-to-Search-for-Java">below</a>.</p></li><li class="list__item" id="06179fa2"><p>The <a href="installing-agent-tools.html">agent tools</a> directory, <code class="code">&lt;Agent Home Directory&gt;/tools,</code> is checked for containing a jre or jdk. By default, the subdirectories of <code class="code">/tools</code> are not scanned. To search the subdirectories, define <code class="code">teamcity.agent.java.search.path=%agent.tools.NAME%/INNER_PATH</code> in the <code class="code">buildAgent.properties</code> file.<br>For Unix and Mac OS, remember to <a href="https://plugins.jetbrains.com/docs/teamcity/plugins-packaging.html" data-external="true" target="_blank" rel="noopener noreferrer">set the executable bit</a> on the files for TeamCity to be able to launch the discovered Java.</p></li><li class="list__item" id="1c063891"><p>It is checked whether the <code class="code">JAVA_HOME</code>, <code class="code">JDK_HOME</code>, <code class="code">JRE_HOME</code> variables are defined</p></li><li class="list__item" id="cf1aa681"><p>The OS-specific locations, listen in the next section, are checked</p></li><li class="list__item" id="b7ed7740"><p>The <code class="code">PATH</code> environment variables are searched and the discovered directories are checked for containing Java</p></li></ul><p id="bbbfed56"><b id="4792ac28">Windows</b></p><ul class="list _ul"><li class="list__item" id="ecce4947"><p>The Windows Registry is searched for the Java installed with the Java installer</p></li><li class="list__item" id="776df1c2"><p><code class="code">C:\Program Files</code> and <code class="code">C:\Program Files (x86)</code> directories are searched for <code class="code">Java</code> and <code class="code">JavaSoft</code> subdirectories</p></li><li class="list__item" id="be178617"><p>the <code class="code">C:\Java</code> directory is searched</p></li></ul><p id="ea4e7567"><b id="8b6f13bb">Unix</b></p><p id="c7570f80">The following directories are searched for Java subdirectories:</p><ul class="list _ul"><li class="list__item" id="d2a7609c"><code class="code">/usr/local/java</code></li><li class="list__item" id="b0e10faf"><code class="code">/usr/local</code></li><li class="list__item" id="33e36eb2"><code class="code">/usr/java</code></li><li class="list__item" id="7f1a99fe"><code class="code">/usr/lib/jvm</code></li><li class="list__item" id="cb03cce6"><code class="code">/usr</code></li></ul><p id="278b3d3e"><b id="90514756">Mac OS</b> The following directories are searched:</p><ul class="list _ul"><li class="list__item" id="8dabed3b"><code class="code">/System/Library/Frameworks/JavaVM.framework/Versions/&lt;Java Version&gt;/Home</code></li><li class="list__item" id="fa39eb36"><code class="code">/Library/Java/JavaVirtualMachines/Versions/&lt;Java Version&gt;/Home</code></li><li class="list__item" id="672640c9"><code class="code">/Library/Java/JavaVirtualMachines/&lt;Java Version&gt;/Contents/Home</code></li></ul></div><a name="DefiningCustomdirectorytoSearchforJava"></a><a name="Defining-Custom-directory-to-Search-for-Java"></a><div class="chapter"><h4 id="PredefinedBuildParameters-DefiningCustomdirectorytoSearchforJava">Defining Custom directory to Search for Java</h4><p id="b028a1bc">You can define a custom directory on an agent to search for Java installations in by adding the <code class="code">teamcity.agent.java.search.path</code> property to the <a href="build-agent-configuration.html"><code class="code">buildAgent.properties</code></a> file.</p><p id="f707792a">You can define a list of directories separated by an OS-dependent character.</p></div><a name="DefiningJava-relatedEnvironmentVariables"></a><a name="Defining-Java-related-Environment-Variables"></a><div class="chapter"><h4 id="PredefinedBuildParameters-DefiningJava-relatedEnvironmentVariables">Defining Java-related Environment Variables</h4><p id="8a553f52">For each major version <b id="c25821ed">V</b> of java, the following variables can be defined:</p><ul class="list _ul"><li class="list__item" id="2ea22eb8"><code class="code">JDK_1V</code></li><li class="list__item" id="195f5789"><code class="code">JDK_1V_x64</code></li><li class="list__item" id="f738ebfe"><code class="code">JRE_1V</code></li><li class="list__item" id="068febfe"><code class="code">JRE_1V_x64</code></li></ul><p id="9c17c28a">The <b id="18a1ec44">JDK</b> variables are defined when the JDK is found, the <b id="9170c6da">JRE</b> variables are defined when the JRE is found but the JDK is not.<br>The <b id="eccc81bf">_x64</b> variables point to 64-bit java only; the variables without the <b id="977aa3de">_x64</b> suffix may point to both 32-bit or 64-bit installations but 32-bit ones are preferred.<br>If several installations with the same major version and the same bitness but different minor version/update are found, the latest one is selected.</p><p id="df18df9f">In addition, the following variables are defined:</p><ul class="list _ul"><li class="list__item" id="0291ea57"><p><code class="code">JAVA_HOME</code> – for the latest JDK installation (but 32-bit one is preferred)</p></li><li class="list__item" id="be4dd4c5"><p><code class="code">JDK_HOME</code> – the same as <code class="code">JAVA_HOME</code></p></li><li class="list__item" id="3ea3e673"><p><code class="code">JRE_HOME</code> – for the latest JRE or JDK installation (but 32-bit one is preferred), defined even if JDK is found.</p></li></ul><p id="b1d65da4">The <code class="code">JRE_HOME</code> and <code class="code">JDK_HOME</code> variables may points to different installations; for example, if JRE 1.7 and JDK 1.6 but no JDK 1.7 installed – <code class="code">JRE_HOME</code> will point to JRE 1.7 and <code class="code">JDK_HOME</code> will point to JDK 1.6.</p><p id="630cce59">All variables point to the java home directories, not to binary files. For example, if you want to execute javac version 1.6, you can use the following path:</p><p id="517988fb">In a TeamCity build configuration:</p><div class="code-block" data-lang="bash">%env.JDK_16%/bin/javac

</div><p id="fac6a070">In a Windows bat/cmd file:</p><div class="code-block" data-lang="bash">%JDK_16%bin\javac

</div><p id="2e1992fd">In a unix shell script:</p><div class="code-block" data-lang="bash">$JDK_16/bin/javac

</div></div></div></div><a name="AgentBuildProperties"></a><a name="Agent-Build-Properties"></a><div class="chapter"><h2 id="PredefinedBuildParameters-AgentBuildProperties">Agent Build Properties</h2><p id="8a1e098a">These properties are unique for each build: they are calculated on the agent right before build start and are then passed to the build.</p><div class="table-wrapper"><table class=" wide" width="100%" id="2ff0f316"><thead><tr id="feca6020" class="ijRowHead"><th width="280" id="e2f3e9ae"><p id="06645c6e">System Property Name</p></th><th width="230" id="1d853772"><p id="44d1f311">Environment Variable Name</p></th><th id="95ff0ec3"><p id="2836df4f">Description</p></th></tr></thead><tbody><tr id="ee6194fb" class="ijRowOdd"><td id="7f0742c8"><p id="d03ef350"><code class="code">teamcity.build.checkoutDir</code></p></td><td id="7c2eb66e"><p id="def6c92d">none</p></td><td id="6eb67e1c"><p id="66f9f333"><a href="build-checkout-directory.html">Checkout directory</a> used for the build.</p></td></tr><tr id="d47c8ecf" class="ijRowEven"><td id="77c61172"><p id="44e37301"><code class="code">teamcity.build.workingDir</code></p></td><td id="a03cf8f9"><p id="9167ca4a">none</p></td><td id="f78e6234"><p id="3773c2fb"><a href="build-working-directory.html">Working directory</a> where the build is started. This is a path where TeamCity build runner is supposed to start a process. This is a runner-specific property, thus it has different value for each new step.</p></td></tr><tr id="c54f66f3" class="ijRowOdd"><td id="20807c18"><p id="fd90ea17"><code class="code">teamcity.build.tempDir</code></p></td><td id="ce7fc1ca"><p id="a86e18cf">none</p></td><td id="87d53d78"><p id="ed223e88">Full path of the build temp directory automatically generated by TeamCity. The directory will be cleaned after the build.</p></td></tr><tr id="6432fc03" class="ijRowEven"><td id="46e6ada6"><p id="177e506c"><code class="code">teamcity.build.properties.file</code></p></td><td id="ab96b5ac"><p id="964b1803"><code class="code">TEAMCITY_BUILD_PROPERTIES_FILE</code></p></td><td id="4b716799"><p id="04559bb9">Full name (including path) of the file containing all the <code class="code">system.*</code> properties passed to the build. "system." prefix stripped off. The file uses <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/util/Properties.html#load(java.io.InputStream)" data-external="true" target="_blank" rel="noopener noreferrer">Java properties</a> file format (for example, special symbols are backslash-escaped).</p></td></tr><tr id="e1df48a1" class="ijRowOdd"><td id="750b0ed0"><p id="cdce3778"><code class="code">teamcity.build.changedFiles.file</code></p></td><td id="83f68369"><p id="9a0bd1cc">none</p></td><td id="9483bb58"><p id="e1ea7427">Full path to a file with information about changed files included in the build. This property is useful if you want to <a href="https://plugins.jetbrains.com/docs/teamcity/risk-tests-reordering-in-custom-test-runner.html" data-external="true" target="_blank" rel="noopener noreferrer">support running of new and modified tests in your tests runner</a>. This file is only available if there were changes in the build; it is not available for <a href="history-build.html">history builds</a>.</p></td></tr></tbody></table></div><p id="e97b50dc">See also system properties related to <a href="https://plugins.jetbrains.com/docs/teamcity/risk-tests-reordering-in-custom-test-runner.html" data-external="true" target="_blank" rel="noopener noreferrer">Risk Tests Reordering in Custom Test Runner</a>.</p><hr id="8004851c"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>