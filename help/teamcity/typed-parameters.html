<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>键入参数-帮助|团队城市</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Typed Parameters" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-build-parameters.md|Configuring Build Parameters/typed-parameters.md|Typed Parameters" data-main-title="Typed Parameters" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/typed-parameters.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="typed-parameters.md" data-toc="Typed Parameters">键入的参数</h1><p id="f18f333a">添加<a href="configuring-build-parameters.html">构建参数</a> （系统属性，环境变量或配置参数）时，可以使用规范来扩展其定义，该规范将控制参数的控件表示和验证。此规范是参数的“元”信息，用于在“ <a href="triggering-a-custom-build.html">触发自定义构建”</a>对话框中显示参数。它使非开发人员可以使自定义构建的运行更加用户友好和可用。考虑一个简单的例子。您有一个构建配置，其中有一个看起来很怪异的构建参数，该参数调节构建是否必须包含许可证。可以为真或为假；默认情况下为false。对于构建工程师而言，可能很清楚，哪个构建参数可控制许可证的生成及其应具有的价值，但对于普通用户而言可能并不明显。</p><p id="0ea93224">使用构建参数的规范，可以使参数在“ <b id="1efaa859">运行自定义构建”</b>对话框中更具可读性。</p><p id="c46414e5">在此页：</p><p id="db6c46fc"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#TypedParameters-AddingParameterSpecification">添加参数规范</a></li><li class="list__item"><a href="#TypedParameters-ManuallyConfiguringParameterSpecification">手动配置参数规格</a></li><li class="list__item"><a href="#TypedParameters-CopyingParameterSpecification">复制参数说明</a></li><li class="list__item"><a href="#TypedParameters-ModifyingParameterSpecificationviaRESTAPI">通过REST API修改参数规范</a></li></ul><p></p><a name="AddingParameterSpecification"></a><a name="Adding-Parameter-Specification"></a><div class="chapter"><h2 id="TypedParameters-AddingParameterSpecification">添加参数规范</h2><p id="cf29936e">要将规范添加到构建参数中，请在编辑/添加构建参数时单击“ <b id="b825d858">规范”</b>区域中的“ <b id="dab387a8">编辑”</b>按钮。</p><p id="98711260">所有参数规范都支持许多通用属性，例如：</p><ul class="list _ul"><li class="list__item" id="3092d9c0"><p><b id="1befb58c">标签</b> ：“运行自定义构建”对话框中控件附近显示的一些文本。</p></li><li class="list__item" id="63e898bb"><p><b id="b612e4a4">说明</b> ：控件下方显示的一些文本，其中包含控件用法的说明。</p></li><li class="list__item" id="5aca4208"><p><b id="01fd93d2">显示</b> ：如果指定了<i id="e2a97986">hidden</i> ，则该参数将不会显示在“ <b id="ed58a079">运行自定义构建”</b>对话框中，而是发送给构建；如果指定了<i id="f7ece94d">提示，</i>则在单击“ <b id="df0c305c">运行”</b>按钮时，TeamCity将始终需要检查参数值（如果自动触发构建，则不需要该参数）；如果选择<i id="f05b855b">正常</i> ，参数将照常显示。</p></li><li class="list__item" id="9b2a71a6"><p><b id="48da808c">只读</b> ：如果选中此框，将无法用其他值覆盖该参数</p></li><li class="list__item" id="83118340"><b id="968e36b5">类型</b> ：当前，您可以以下形式显示参数：<ul class="list _ul"><li class="list__item" id="5aef9c2e"><p>一个简单的文本字段，能够使用正则表达式验证其值；</p></li><li class="list__item" id="50332261"><p>一个复选框；</p></li><li class="list__item" id="b09a9fc0"><p>选择控件；</p></li><li class="list__item" id="b2d362ae"><p>密码字段。</p></li></ul></li></ul><p id="b2386076">下表提供了每种控件类型的更多详细信息。</p><div class="table-wrapper"><table width="100%" id="3d853cac"><thead><tr id="499994be" class="ijRowHead"><th width="150" id="de5f46d0"><p id="249523ca">类型</p></th><th id="7cb8aedb"><p id="1db00043">描述</p></th></tr></thead><tbody><tr id="9fab678a" class="ijRowOdd"><td id="ff59d85d"><p id="1e4d0ac2">文本</p></td><td id="09ba4a65"><p id="3cc27ac3">默认值。表示没有任何额外处理的普通文本字符串</p></td></tr><tr id="818c2a85" class="ijRowEven"><td id="84bdb84d"><p id="5c76d43b">复选框</p></td><td id="f7484cea"><p id="b981c334">复选框表示的对/错选项</p></td></tr><tr id="2a7e2fa8" class="ijRowOdd"><td id="5c62c805"><p id="eee34aba">选择</p></td><td id="c8b42bb1"><p id="b6914eda">“选择一个”或“选择多个”控件可将值设置为预定义设置之一</p></td></tr><tr id="58bcdbab" class="ijRowEven"><td id="7eac9be7"><p id="c5d38a9b">密码</p></td><td id="27869545"><p id="cf911447">旨在将密码或其他安全数据存储在TeamCity设置中。TeamCity使得password参数的值永远不会出现在TeamCity Web UI中：它会影响设置屏幕和出现密码字段的<b id="453bcedd">“运行自定义构建”</b>对话框。同样，该值将在构建的“ <b id="cfe12956">参数”</b>选项卡和构建日志中替换。该值被加扰存储在TeamCity数据目录下的配置文件中。请注意，构建日志值隐藏是通过简单的搜索和替换实现的，因此，如果您使用的普通密码为“ 123”，则所有出现的“ 123”将被替换，从而可能暴露出密码。将参数设置为键入密码并不能保证无法检索原始值。任何项目管理员都可以检索它，并且任何可以更改构建脚本的开发人员理论上都可以编写恶意代码来获取密码。</p></td></tr></tbody></table></div><p id="48fa00ff">根据规范的类型，还有其他设置。</p><div class="table-wrapper"><table width="100%" id="51060686"><thead><tr id="a4d3e0ad" class="ijRowHead"><th width="150" id="c2aad497"></th><th id="c47aba5c"></th></tr></thead><tbody><tr id="1696343a" class="ijRowOdd"><td id="fd0de049"><p id="1d89b951">文本</p></td><td id="8a663f5e"><p id="c86a529c"><b id="035e6376">允许值</b> -选择允许值。对于<b id="0eb498e5">Regex</b>选项，请指定<b id="3270fd6f">Pattern</b> ，一个Java样式的正则表达式以验证字段值以及一条<b id="a6993227">验证消息</b> 。</p></td></tr><tr id="b3110afd" class="ijRowEven"><td id="733582bf"><p id="f65b7dae">复选框</p></td><td id="f028bc5b"><p id="f2b19fbb"><b id="2ba7ed58">选中的值</b> / <b id="457ef55f">未选中的值</b> ：根据复选框的状态指定参数的值。</p><p id="acaf36fa">建议<b id="38d6cbe7">指定检查值，</b>并保持参数的默认值和未检查值<b id="ba0f8222">相同</b> 。</p><p id="db1a46c7">根据触发构建的方式，复选框的行为如下：</p><ul class="list _ul"><li class="list__item" id="61afd404"><p>如果构建是由自动触发器或单击“ <b id="cb0899e9">运行”</b>按钮（没有<a href="triggering-a-custom-build.html">运行自定义构建</a>对话框）触发的，则使用默认值</p></li><li class="list__item" id="e2a3ecc4"><p>如果通过<a href="triggering-a-custom-build.html">运行自定义构建</a>对话框触发<a href="triggering-a-custom-build.html">构建</a>而未更改任何内容，则使用“未检查的值”（如果不为空）；如果为空，则使用默认值</p></li><li class="list__item" id="270e7e12"><p>如果通过<a href="triggering-a-custom-build.html">运行自定义构建</a>对话框触发了<a href="triggering-a-custom-build.html">构建</a>并选中了复选框，则使用“ checked value”（如果不为空）；如果为空，则使用'true'值</p></li></ul></td></tr><tr id="be5b6570" class="ijRowOdd"><td id="6c8e4507"><p id="287c3dbb">选择</p></td><td id="fe8959b5"><p id="4c75e87a">选中<b id="632cf8e8">允许多个</b>框以启用多个选择。在<b id="0501aafa">项目</b>字段中，指定用换行符分隔的项目列表。使用以下语法<code class="code">label => value</code>要么<code class="code">value</code> 。</p></td></tr></tbody></table></div></div><a name="ManuallyConfiguringParameterSpecification"></a><a name="Manually-Configuring-Parameter-Specification"></a><div class="chapter"><h2 id="TypedParameters-ManuallyConfiguringParameterSpecification">手动配置参数规格</h2><p id="c812568d">另外，您也可以使用特殊格式的字符串手动配置规范，其语法类似于服务消息中使用的语法（ <code class="code">typeName key='value'</code> ）。<br>例如，对于文本： <code class="code">text label='some label' regex='some pattern'</code> 。</p></div><a name="CopyingParameterSpecification"></a><a name="Copying-Parameter-Specification"></a><div class="chapter"><h2 id="TypedParameters-CopyingParameterSpecification">复制参数说明</h2><p id="d572826d">如果您开始编辑具有规格的参数，则可以在“编辑参数”对话框中看到指向其原始值的链接。单击它以原始格式（以服务消息格式）查看规范。要在另一个构建配置中使用此规范，只需从此处复制它，然后粘贴到另一个配置中即可。</p></div><a name="ModifyingParameterSpecificationviaRESTAPI"></a><a name="Modifying-Parameter-Specification-via-REST-API"></a><div class="chapter"><h2 id="TypedParameters-ModifyingParameterSpecificationviaRESTAPI">通过REST API修改参数规范</h2><p id="e58920c7">您还可以通过<a href="rest-api.html#Typed-Parameters-Specification">REST API</a>查看/编辑类型化的参数规范。</p><hr id="8c1468a9"><p id="fa492805"><b id="c67c8837">也可以看看：</b></p><p id="fcdc9bed"><b id="acb86c3b">管理员指南</b> ： <a href="configuring-build-parameters.html">配置构建参数</a> | <a href="configuring-build-parameters.html">在构建配置中定义和使用构建参数</a> <a href="predefined-build-parameters.html">预定义的构建参数</a></p><hr id="4de306e8"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>