<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>File Content Replacer - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="File Content Replacer" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/adding-build-features.md|Adding Build Features/file-content-replacer.md|File Content Replacer" data-main-title="File Content Replacer" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/file-content-replacer.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="File Content Replacer" id="file-content-replacer.md">File Content Replacer</h1><p id="f97c20ed"><i id="c53cec48">File Content Replacer</i> is the <a href="adding-build-features.html">build feature</a> which processes text files by performing regular expression replacements before a build. After the build, it restores the file content to the original state.</p><p id="d86dd601">On this page:</p><p id="267da093"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#FileContentReplacer-FileContentReplacerSettings">File Content Replacer Settings</a><ul class="list _bullet"><li class="list__item"><a href="#FileContentReplacer-Templates">Templates</a><ul class="list _bullet"><li class="list__item"><a href="#FileContentReplacer-.NETtemplates">.NET templates</a></li><li class="list__item"><a href="#FileContentReplacer-.NetCoretemplates">.Net Core  templates</a></li><li class="list__item"><a href="#FileContentReplacer-MFCtemplates">MFC templates</a></li><li class="list__item"><a href="#FileContentReplacer-Xcodetemplates">Xcode templates</a></li></ul></li></ul></li><li class="list__item"><a href="#FileContentReplacer-Examples">Examples</a><ul class="list _bullet"><li class="list__item"><a href="#FileContentReplacer-Extendinganattributevaluewithacustomsuffix">Extending an attribute value with a custom suffix</a></li><li class="list__item"><a href="#FileContentReplacer-Patchingonlyspecifiedfiles">Patching only specified files</a></li><li class="list__item"><a href="#FileContentReplacer-Specifyingpathpatternswhichcontainspaces">Specifying path patterns which contain spaces</a></li><li class="list__item"><a href="#FileContentReplacer-Changingonlythelastversionpart/buildnumberoftheAssemblyVersionattribute:">Changing only the last version part / build number of the AssemblyVersion attribute:</a></li></ul></li></ul></p><aside class="tip sideblock" data-title="" rel="267da093" id="8bef10ee"><p id="5590aeb1"><i id="2db4b285">File Content Replacer</i> should be used with the <a href="vcs-checkout-mode.html">automatic checkout</a> only: after this build feature is configured, it will run <b id="7978954e">before the first build step</b>. TeamCity will first perform replacement in the specified files found in the build checkout directory and then run your build.</p></aside><p id="8289c92d">The common case of using File Content Replacer is replacing one attribute at a time in particular files, for example, it can be used to patch files with the build number.</p><p id="2b9415bf">You can add more than one File Content Replacer build feature if you wish to:</p><ul class="list _ul"><li class="list__item" id="d209c073"><p>replace more than one attribute</p></li><li class="list__item" id="12506470"><p>replace one and the same attribute in different files/projects with different values</p></li></ul><p id="487500f2">This feature extends the capabilities provided by <a href="assemblyinfo-patcher.html">AssemblyInfo Patcher</a>.</p><p id="0d94d488">Check the <a href="adding-build-features.html">Adding Build Features</a> section for notes on how to add a build feature.</p><a name="FileContentReplacerSettings"></a><a name="File-Content-Replacer-Settings"></a><div class="chapter"><h2 id="FileContentReplacer-FileContentReplacerSettings">File Content Replacer Settings</h2><p id="0762b7b0">You can specify the values manually or use value presets for replacement, which can be edited if needed.</p><div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="39a4a8b2"><thead><tr id="287f3605" class="ijRowHead"><th id="8a1426fe"><p id="f4a944be">Option</p></th><th id="ab301fde"><p id="e22fdfc9">Description</p></th></tr></thead><tbody><tr id="6d2ce2ba" class="ijRowOdd"><td id="1ea7b6a6"><p id="dabdab72">Template (optional)</p></td><td id="ff9395aa"><a name="Template"></a><a name="FileContentReplacer-Template"></a><p id="2fbdbef1">File Content Replacer provides a template for every attribute to be replaced. Clicking the <b id="aa6fd937">Load Template...</b> button displays the combobox with templates containing value presets for replacement. The templates can be filtered by <i id="121d85fe">language</i> (e.g. <code class="code">C#</code>), <i id="0588070c">file</i> (e.g. <code class="code">AssemblyInfo</code>) or <i id="133fca60">attribute</i> (e.g. <code class="code">AssemblyVersion</code>) by typing in the combobox. When a template is selected, the settings are automatically filled with predefined values. See the <a href="#Templates">section below</a> for template details.</p></td></tr><tr id="2ffee722" class="ijRowEven"><td id="ecca0f06"><p id="127c4fa6">Process files</p></td><td id="94e5aaad"><a name="Wildcards"></a><a name="FileContentReplacer-Wildcards"></a><p id="54cdac43">Click Edit file list and specify paths to files where the values to be replaced will be searched. Provide a newline- or comma-separated set of rules in the form of <code class="code">+|-:[path relative to the checkout directory]</code>.<br><a href="wildcards.html#Antlike-Wildcards">Ant-like wildcards</a> are supported, for example, <code class="code">dir/**/*.cs</code>.</p><a name="OR-syntax-tip"></a><aside class="tip sideblock" data-title="" rel="17585cea" id="03e42590"><p id="e296973f">Here, the <i origin="teamcity-help" id="9b8ac617">pipe</i> symbol <code class="code">|</code> represents the <b origin="teamcity-help" id="c297daff">OR</b> command, as in regular expressions: use <code class="code">+</code> for including, <b origin="teamcity-help" id="45c392b5">OR</b> <code class="code">-</code> for excluding.</p></aside><p id="d29b9488"><i id="b7d848e2">If a <a href="#Templates">pre-defined template</a> is selected, the files associated with that template will be used.</i></p></td></tr><tr id="d63ef23c" class="ijRowOdd"><td id="65f1f55b"><p id="bf88b76b">File encoding</p></td><td id="ddf0b75e"><a name="Fileencoding"></a><a name="FileContentReplacer-Fileencoding"></a><p id="359b0b56">By default, TeamCity will auto-detect the file encoding. To specify the encoding explicitly, select it from the drop-down. When specifying a <i id="b1571617">custom</i> encoding, make sure it is <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/intl/encoding.doc.html" data-external="true" target="_blank" rel="noopener noreferrer">supported</a> by the agent.</p><p id="93e3e8b7"><i id="c20f57fe">If a <a href="#Templates">pre-defined template</a> is selected, the file encoding associated with that template will be used.</i></p></td></tr><tr id="03fe24cc" class="ijRowEven"><td id="6d0b7e32"><p id="4df92187">Find what</p></td><td id="36781fc9"><a name="Pattern"></a><a name="FileContentReplacer-Pattern"></a><p id="c689c85a">Specify a pattern to search for, in the <a href="https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#sum" data-external="true" target="_blank" rel="noopener noreferrer">regular expression</a> format.<br>The <a href="https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#MULTILINE" data-external="true" target="_blank" rel="noopener noreferrer">MULTILINE</a> mode is on by default.<br><i id="6eda03f4">If a <a href="#Templates">pre-defined template</a> is selected, the pattern associated with that template will be used.</i></p><p id="c25b456b">You can disable the MULTILINE mode by adding "(?-m)" at the start of the pattern string.</p></td></tr><tr id="213402bc" class="ijRowOdd"><td id="1e27d868"><p id="4f8bcc82">Match case</p></td><td id="b11a6751"><a name="matchCase"></a><a name="FileContentReplacer-matchCase"></a><p id="e6d9d338">By default, the comparison is case-sensitive. Uncheck for case-insensitive languages.<br><i id="6e4c5c9b">If a <a href="#Templates">pre-defined template</a> is selected, the comparison associated with that template will be used.</i></p></td></tr><tr id="0dc2aa22" class="ijRowEven"><td id="7bea65d8"><p id="4783d0cf">Regex</p></td><td id="ddf3f694"><a name="Regex"></a><a name="FileContentReplacer-Regex"></a><p id="0c54b4eb">The box is checked by default and applies to both the search and replacement strings. Uncheck to use fixed strings.</p><a name="RegexMixed"></a><a name="FileContentReplacer-RegexMixed"></a><aside class="note " data-title="" rel="022ab8b6" id="fe78ea18"><p id="3fc599b5">If you use <a href="storing-project-settings-in-version-control.html">versioned settings</a> (<i id="4b264339">XML</i> or <i id="38a37683">Kotlin DSL</i>), in addition to the default <code class="code">REGEX</code> and non-default <code class="code">FIXED_STRINGS</code> mode, the <code class="code">REGEX_MIXED</code> mode is available. In this mode, the search pattern is interpreted as a regular expression, but the replacement text will be <a href="https://docs.oracle.com/javase/8/docs/api/java/util/regex/Matcher.html#quoteReplacement-java.lang.String-" data-external="true" target="_blank" rel="noopener noreferrer">quoted</a> (the <code class="code">\</code>and <code class="code">$</code> characters have no special meaning).</p><p id="cb45da0e">See a sample <i id="edfc4cd8">File Content Replacer</i> configuration for settings in <a href="kotlin-dsl.html">Kotlin</a>:</p><div class="code-block" data-lang="bash">features {
&nbsp;&nbsp;&nbsp;&nbsp;replaceContent {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fileRules = "**/*"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pattern = "(?iu)the\h+pattern\h+to\h+search\h+for"
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;regexMode = FileContentReplacer.RegexMode.REGEX_MIXED
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replacement = """%teamcity.agent.work.dir%nd_r\bin\isf"""
&nbsp;&nbsp;&nbsp;&nbsp;}
}

</div></aside></td></tr><tr id="28cbeaaf" class="ijRowOdd"><td id="016dadd7"><p id="65504f8c">Replace with</p></td><td id="359a0ee8"><a name="Replacement"></a><a name="FileContentReplacer-Replacement"></a><p id="49ef86c5">Type the text to be used for replacing the characters in the <b id="e552196f">Find what</b> box. To delete the characters in the <b id="4305f6ed">Find what</b> box from your file, leave this box blank.</p><p id="3e42353b">$N sequence references N-th capturing group. All backslashes (<code class="code">\</code>) and dollar signs (<code class="code">$</code>) without a special meaning should be quoted (as <code class="code">\\</code> and <code class="code">\$</code>, respectively).</p></td></tr></tbody></table></div><p id="8e1b0e71"><a name="Pre-defined templates"></a><a name="FileContentReplacer-Pre-defined templates"></a></p><a name="Templates"></a><a name="Templates"></a><div class="chapter"><h3 id="FileContentReplacer-Templates">Templates</h3><p id="0df62e4b">This section lists the available replacement templates.</p><a name=".NETtemplates"></a><a name=".NET-templates"></a><div class="chapter"><h4 id="FileContentReplacer-.NETtemplates">.NET templates</h4><p id="005797c8">The templates for replacing the following <a href="https://msdn.microsoft.com/en-us/library/4w8c1y2s(v=vs.110).aspx?cs-save-lang=1&amp;cs-lang=csharp#code-snippet-2" data-external="true" target="_blank" rel="noopener noreferrer">Assembly attributes</a> are provided (see <a href="#Templates">this section</a> for comparison with <a href="assemblyinfo-patcher.html">AssemblyInfo Patcher</a>):</p><ul class="list _ul"><li class="list__item" id="fc8f705c"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblytitleattribute.aspx" data-external="true" target="_blank" rel="noopener noreferrer">AssemblyTitle</a></li><li class="list__item" id="6bf01e65"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblydescriptionattribute.aspx" data-external="true" target="_blank" rel="noopener noreferrer">AssemblyDescription</a></li><li class="list__item" id="87ad411e"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblyconfigurationattribute.aspx" data-external="true" target="_blank" rel="noopener noreferrer">AssemblyConfiguration</a></li><li class="list__item" id="6479feb0"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblyproductattribute.aspx" data-external="true" target="_blank" rel="noopener noreferrer">AssemblyCompany</a></li><li class="list__item" id="a6de6f5d"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblyproductattribute.aspx" data-external="true" target="_blank" rel="noopener noreferrer">AssemblyProduct</a></li><li class="list__item" id="673ac611"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblycopyrightattribute.aspx" data-external="true" target="_blank" rel="noopener noreferrer">AssemblyCopyright</a></li><li class="list__item" id="6cee176d"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblytrademarkattribute.aspx" data-external="true" target="_blank" rel="noopener noreferrer">AssemblyTrademark</a></li><li class="list__item" id="3dfedc8a"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblycultureattribute.aspx" data-external="true" target="_blank" rel="noopener noreferrer">AssemblyCulture</a></li><li class="list__item" id="5c684345"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblyversionattribute.aspx" data-external="true" target="_blank" rel="noopener noreferrer">AssemblyVersion</a></li><li class="list__item" id="b86ca0e7"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblyfileversionattribute.aspx" data-external="true" target="_blank" rel="noopener noreferrer">AssemblyFileVersion</a></li><li class="list__item" id="876b6679"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblyinformationalversionattribute.aspx" data-external="true" target="_blank" rel="noopener noreferrer">AssemblyInformationalVersion</a></li><li class="list__item" id="298dd40b"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblykeyfileattribute.aspx" data-external="true" target="_blank" rel="noopener noreferrer">AssemblyKeyFile</a></li><li class="list__item" id="a2145de9"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblykeynameattribute.aspx" data-external="true" target="_blank" rel="noopener noreferrer">AssemblyKeyName</a></li><li class="list__item" id="2acdeb7a"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblydelaysignattribute.aspx" data-external="true" target="_blank" rel="noopener noreferrer">AssemblyDelaySign</a></li><li class="list__item" id="a8fafe5e"><a href="http://msdn.microsoft.com/en-us/library/system.clscompliantattribute.aspx" data-external="true" target="_blank" rel="noopener noreferrer">CLSCompliant</a></li><li class="list__item" id="8787b620"><a href="http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comvisibleattribute.aspx" data-external="true" target="_blank" rel="noopener noreferrer">ComVisible</a></li><li class="list__item" id="220c5a23"><a href="http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.guidattribute.aspx" data-external="true" target="_blank" rel="noopener noreferrer">Guid</a></li><li class="list__item" id="758afd60"><a href="http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx" data-external="true" target="_blank" rel="noopener noreferrer">InternalsVisibleTo</a></li><li class="list__item" id="ac3d0995"><a href="http://msdn.microsoft.com/en-us/library/system.security.allowpartiallytrustedcallersattribute.aspx" data-external="true" target="_blank" rel="noopener noreferrer">AllowPartiallyTrustedCallers</a></li><li class="list__item" id="43477c77"><a href="http://msdn.microsoft.com/en-us/library/system.resources.neutralresourceslanguageattribute.aspx" data-external="true" target="_blank" rel="noopener noreferrer">NeutralResourcesLanguageAttribute</a></li></ul></div><a name=".NetCoretemplates"></a><a name=".Net-Core-templates"></a><div class="chapter"><h4 id="FileContentReplacer-.NetCoretemplates">.Net Core  templates</h4><ul class="list _ul"><li class="list__item" id="45a45fad"><code class="code">AssemblyName</code></li><li class="list__item" id="4e5ee3ee"><code class="code">AssemblyTitle</code></li><li class="list__item" id="e8906f5d"><code class="code">AssemblyVersion</code></li><li class="list__item" id="f6cb2a79"><code class="code">Authors</code></li><li class="list__item" id="7464c5ae"><code class="code">Company</code></li><li class="list__item" id="2cb082bc"><code class="code">Copyright</code></li><li class="list__item" id="d2f31856"><code class="code">Description</code></li><li class="list__item" id="179ea6d0"><code class="code">FileVersion</code></li><li class="list__item" id="7adb760d"><code class="code">PackageId</code></li><li class="list__item" id="f1d5824f"><code class="code">PackageVersion</code></li><li class="list__item" id="946265b2"><code class="code">Product</code></li><li class="list__item" id="90b17120"><code class="code">Title</code></li><li class="list__item" id="bdb975a8"><code class="code">Version</code></li><li class="list__item" id="27840397"><code class="code">VersionPrefix</code></li><li class="list__item" id="2b1d6807"><code class="code">VersionSuffix</code></li></ul></div><a name="MFCtemplates"></a><a name="MFC-templates"></a><div class="chapter"><h4 id="FileContentReplacer-MFCtemplates">MFC templates</h4><p id="1ad48fc1">The templates for replacing the following <b id="6f6064b4">MFC C++ resource keys</b> are provided:</p><ul class="list _ul"><li class="list__item" id="e5d2500a"><code class="code">FileDescription</code></li><li class="list__item" id="b4185558"><code class="code">CompanyName</code></li><li class="list__item" id="bde47265"><code class="code">ProductName</code></li><li class="list__item" id="a9df7901"><code class="code">LegalCopyright</code></li><li class="list__item" id="5236b616"><code class="code">FileVersion*</code></li><li class="list__item" id="0dac1f64"><code class="code">ProductVersion*</code></li></ul><aside class="note " data-title="" rel="b7ad78da" id="3b135e39"><p id="6ced7b16">In <b id="779681a7">MFC*.rc</b> files, both <code class="code">FileVersion</code> and <code class="code">ProductVersion</code> occur twice, once in a <i id="764a1e27">dot-separated</i> (e.g. <code class="code">1.2.3.4</code>) and once in a <i id="1ed999b2">comma-separated</i> (e.g. <code class="code">1,2,3,4</code>) form. If your <code class="code">%build.number%</code> parameter has a format of <code class="code">1.2.3.{0}</code>, using two build parameters with different delimiters instead of a single <code class="code">%build.number%</code> is recommended.</p></aside></div><a name="Xcodetemplates"></a><a name="Xcode-templates"></a><div class="chapter"><h4 id="FileContentReplacer-Xcodetemplates">Xcode templates</h4><p id="ca72b6bf">The templates for replacing the following <a href="https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html" data-external="true" target="_blank" rel="noopener noreferrer">Core Foundation Keys</a> in <code class="code">Info.plist</code> files are provided:</p><ul class="list _ul"><li class="list__item" id="f2f268d1"><code class="code">CFBundleVersion</code></li><li class="list__item" id="b6dd75bb"><code class="code">CFBundleShortVersionString</code></li><li class="list__item" id="aa05a5a2"><p>or both <code class="code">CFBundleVersion</code> and <code class="code">CFBundleShortVersionString</code> at the same time</p></li></ul></div></div></div><a name="Examples"></a><a name="Examples"></a><div class="chapter"><h2 id="FileContentReplacer-Examples">Examples</h2><a name="Extendinganattributevaluewithacustomsuffix"></a><a name="Extending-an-attribute-value-with-a-custom-suffix"></a><div class="chapter"><h3 id="FileContentReplacer-Extendinganattributevaluewithacustomsuffix">Extending an attribute value with a custom suffix</h3><p id="31b9a7ce">Suppose you do not want to replace your <code class="code">AssemblyConfiguration</code> with a fixed literal, but want to preserve your <code class="code">AssemblyConfiguration</code> from <code class="code">AssemblyInfo.cs</code> and just extend it with a custom suffix, for example,: <code class="code">[assembly: AssemblyConfiguration("${AssemblyConfiguration} built by TeamCity")])</code>.</p><p id="6387bb12">Do the following: change the default replacement <code class="code">$1MyAssemblyConfiguration$7</code> to <code class="code">$1$5 built by TeamCity$7</code>.</p><p id="ad58e26f">For changing complex regex patterns, <a href="https://regex101.com/" data-external="true" target="_blank" rel="noopener noreferrer">this external tool</a> might be useful.</p></div><a name="Patchingonlyspecifiedfiles"></a><a name="Patching-only-specified-files"></a><div class="chapter"><h3 id="FileContentReplacer-Patchingonlyspecifiedfiles">Patching only specified files</h3><p id="e6c1cd8e">The default <code class="code">AssemblyInfo</code> templates follow the usual <i id="7ad55850">Visual Studio</i> project/solution layout; but a lot of information may be shared across multiple projects and can reside in a shared file (e.g. <code class="code">CommonAssemblyInfo.cs</code>).</p><p id="07b27bc7">Suppose you want to patch this shared file only; or you want to patch <code class="code">AssemblyInfo.cs</code> files on a per-project bassis.</p><p id="3c761636">Do the following:</p><ol class="list _decimal"><li class="list__item" id="545248b9"><p>Load the <code class="code">AssemblyInfo</code> template corresponding to the attribute you are trying to process (e.g. <code class="code">AssemblyVersion</code>)</p></li><li class="list__item" id="d4e8e6c6"><p>Change the list of file paths in the <a href="#Wildcards">Look in</a> field from the default <code class="code">*/Properties/AssemblyInfo.cs</code> to <code class="code">*/CommonAssemblyInfo.cs</code> or list several files comma- or new-line separated files here, e.g. <code class="code">myproject1/Properties/AssemblyInfo.cs, myproject2/Properties/AssemblyInfo.cs</code> .</p></li></ol></div><a name="Specifyingpathpatternswhichcontainspaces"></a><a name="Specifying-path-patterns-which-contain-spaces"></a><div class="chapter"><h3 id="FileContentReplacer-Specifyingpathpatternswhichcontainspaces">Specifying path patterns which contain spaces</h3><p id="f88a274e">Spaces are usually considered a part of the pattern, unless they follow a comma, as the comma is recognised as a delimiter.</p><p id="11aa1c41">Note that the TeamCity server UI trims leading and trailing spaces in input fields, so a single-line pattern like <code class="code">&lt;spaces&gt;foo.bar</code> will become <code class="code">foo.bar</code> upon save. The following workarounds are available:</p></div><a name="Changingonlythelastversionpart/buildnumberoftheAssemblyVersionattribute:"></a><a name="Changing-only-the-last-version-part-/-build-number-of-the-AssemblyVersion-attribute:"></a><div class="chapter"><h3 id="FileContentReplacer-Changingonlythelastversionpart/buildnumberoftheAssemblyVersionattribute:">Changing only the last version part / build number of the AssemblyVersion attribute:</h3><p id="f8199f0b">Suppose, your <code class="code">AssemblyVersion</code> in <code class="code">AssemblyInfo.cs</code> is <code class="code">Major.Minor.Revision.Build</code> (set to <code class="code">1.2.3.*</code>), and you want to replace the <code class="code">Build</code> portion (following the last dot (the <code class="code">*</code>) only.</p><p id="d97bc622">Load the <code class="code">AssemblyVersion</code> in AssemblyInfo (C#) template and change the default pattern:</p><div class="code-block" data-lang="bash">(^\s*\[\s*assembly\s*:\s*((System\s*\.)?\s*Reflection\s*\.)?\s*AssemblyVersion(Attribute)?\s*\(\s*@?\")(([0-9\*])+\.?)+(\"\s*\)\s*\])

</div><p id="b23cb901">to</p><div class="code-block" data-lang="bash">
(^\s*\[\s*assembly\s*:\s*((System\s*\.)?\s*Reflection\s*\.)?\s*AssemblyVersion(Attribute)?\s*\(\s*@?\")(([0-9\*]+\.)+)[0-9\*]+(\"\s*\)\s*\])

</div><p id="cb380a26">and change the default replacement:</p><div class="code-block" data-lang="bash">
$1\%build.number%$7

</div><p id="f32171e7">to</p><div class="code-block" data-lang="bash">$1$5\%build.number%$7

</div><aside class="note " data-title="" rel="04f56753" id="f8686319"><p id="365cb0b7">Make sure your <code class="code">%build.number%</code> <a href="configuring-general-settings.html">format</a> contains just a decimal number without any dots, or you may end up with a non-standard version like <code class="code">1.2.3.4.5.6.2600</code> (i.e. <code class="code">%build.counter%</code> <i id="d3eeb8a7">is</i> a valid value here while <code class="code">4.5.6.%build.counter%</code> is <i id="8a3ade4a">not</i>).</p></aside><hr id="38f36bd4"></div></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>