<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>文件内容替换器-帮助|帮助团队城市</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="File Content Replacer" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/adding-build-features.md|Adding Build Features/file-content-replacer.md|File Content Replacer" data-main-title="File Content Replacer" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/file-content-replacer.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="file-content-replacer.md" data-toc="File Content Replacer">文件内容替换器</h1><p id="f97c20ed"><i id="c53cec48">文件内容</i>替换程序是<a href="adding-build-features.html">构建功能</a> ，通过在构建之前执行正则表达式替换来处理文本文件。构建之后，它将文件内容还原到原始状态。</p><p id="d86dd601">在此页：</p><p id="267da093"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#FileContentReplacer-FileContentReplacerSettings">文件内容替换器设置</a><ul class="list _bullet"><li class="list__item"><a href="#FileContentReplacer-Templates">范本</a><ul class="list _bullet"><li class="list__item"><a href="#FileContentReplacer-.NETtemplates">.NET模板</a></li><li class="list__item"><a href="#FileContentReplacer-.NetCoretemplates">.Net Core模板</a></li><li class="list__item"><a href="#FileContentReplacer-MFCtemplates">MFC模板</a></li><li class="list__item"><a href="#FileContentReplacer-Xcodetemplates">Xcode模板</a></li></ul></li></ul></li><li class="list__item"><a href="#FileContentReplacer-Examples">例子</a><ul class="list _bullet"><li class="list__item"><a href="#FileContentReplacer-Extendinganattributevaluewithacustomsuffix">使用自定义后缀扩展属性值</a></li><li class="list__item"><a href="#FileContentReplacer-Patchingonlyspecifiedfiles">仅修补指定的文件</a></li><li class="list__item"><a href="#FileContentReplacer-Specifyingpathpatternswhichcontainspaces">指定包含空格的路径模式</a></li><li class="list__item"><a href="#FileContentReplacer-Changingonlythelastversionpart/buildnumberoftheAssemblyVersionattribute:">仅更改AssemblyVersion属性的最后一个版本零件/内部版本号：</a></li></ul></li></ul><p></p><aside class="tip sideblock" rel="267da093" id="8bef10ee" data-title=""><p id="5590aeb1"><i id="2db4b285">文件内容</i>替换器仅应与<a href="vcs-checkout-mode.html">自动签出一起</a>使用：配置此构建功能后，它将<b id="7978954e">在第一步构建之前</b>运行。TeamCity将首先在构建签出目录中找到的指定文件中执行替换，然后运行您的构建。</p></aside><p id="8289c92d">使用文件内容替换器的常见情况是一次替换特定文件中的一个属性，例如，它可用于用内部版本号修补文件。</p><p id="2b9415bf">如果您希望执行以下操作，则可以添加多个文件内容替换生成功能：</p><ul class="list _ul"><li class="list__item" id="d209c073"><p>替换多个属性</p></li><li class="list__item" id="12506470"><p>用不同的值替换不同文件/项目中的一个相同属性</p></li></ul><p id="487500f2">此功能扩展了<a href="assemblyinfo-patcher.html">AssemblyInfo Patcher</a>提供的功能。</p><p id="0d94d488">查看“ <a href="adding-build-features.html">添加构建功能”</a>部分，以获取有关如何<a href="adding-build-features.html">添加构建功能</a>的注释。</p><a name="FileContentReplacerSettings"></a><a name="File-Content-Replacer-Settings"></a><div class="chapter"><h2 id="FileContentReplacer-FileContentReplacerSettings">文件内容替换器设置</h2><p id="0762b7b0">您可以手动指定值，也可以使用值预设进行替换，可以根据需要进行编辑。</p><div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="39a4a8b2"><thead><tr id="287f3605" class="ijRowHead"><th id="8a1426fe"><p id="f4a944be">选项</p></th><th id="ab301fde"><p id="e22fdfc9">描述</p></th></tr></thead><tbody><tr id="6d2ce2ba" class="ijRowOdd"><td id="1ea7b6a6"><p id="dabdab72">模板（可选）</p></td><td id="ff9395aa"><a name="Template"></a><a name="FileContentReplacer-Template"></a><p id="2fbdbef1">文件内容替换器为每个要替换的属性提供了一个模板。单击“ <b id="aa6fd937">加载模板...”</b>按钮将显示组合框，其中包含包含要替换的值预设的模板。模板可以按<i id="121d85fe">语言</i>过滤（例如<code class="code">C#</code> ）， <i id="0588070c">文件</i> （例如<code class="code">AssemblyInfo</code> ）或<i id="133fca60">属性</i> （例如<code class="code">AssemblyVersion</code> ）（通过在组合框中输入）。选择模板后，设置将自动填充预定义的值。有关模板的详细信息，请参见以下<a href="#Templates">部分</a> 。</p></td></tr><tr id="2ffee722" class="ijRowEven"><td id="ecca0f06"><p id="127c4fa6">处理文件</p></td><td id="94e5aaad"><a name="Wildcards"></a><a name="FileContentReplacer-Wildcards"></a><p id="54cdac43">单击“编辑文件列表”，然后指定将在其中搜索要替换的值的文件的路径。提供以下形式的换行符或逗号分隔的规则集： <code class="code">+|-:[path relative to the checkout directory]</code> 。<br>支持<a href="wildcards.html#Antlike-Wildcards">类似Ant的通配符</a> ，例如， <code class="code">dir/**/*.cs</code> 。</p><a name="OR-syntax-tip"></a><aside class="tip sideblock" rel="17585cea" id="03e42590" data-title=""><p id="e296973f">在这里， <i id="9b8ac617" origin="teamcity-help">管道</i>符号<code class="code">|</code>代表<b id="c297daff" origin="teamcity-help">OR</b>命令，如正则表达式中一样：use <code class="code">+</code>用于包括， <b id="45c392b5" origin="teamcity-help">或</b> <code class="code">-</code>排除。</p></aside><p id="d29b9488"><i id="b7d848e2">如果选择了<a href="#Templates">预定义模板</a> ，则将使用与该模板关联的文件。</i></p></td></tr><tr id="d63ef23c" class="ijRowOdd"><td id="65f1f55b"><p id="bf88b76b">文件编码</p></td><td id="ddf0b75e"><a name="Fileencoding"></a><a name="FileContentReplacer-Fileencoding"></a><p id="359b0b56">默认情况下，TeamCity将自动检测文件编码。要明确指定编码，请从下拉列表中选择。指定<i id="b1571617">自定义</i>编码时，请确保代理<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/intl/encoding.doc.html" rel="noopener noreferrer" data-external="true" target="_blank">支持</a> 。</p><p id="93e3e8b7"><i id="c20f57fe">如果选择了<a href="#Templates">预定义的模板</a> ，则将使用与该模板关联的文件编码。</i></p></td></tr><tr id="03fe24cc" class="ijRowEven"><td id="6d0b7e32"><p id="4df92187">找什么</p></td><td id="36781fc9"><a name="Pattern"></a><a name="FileContentReplacer-Pattern"></a><p id="c689c85a">以<a href="https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#sum" rel="noopener noreferrer" data-external="true" target="_blank">正则表达式</a>格式指定要搜索的模式。<br>默认情况下， <a href="https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#MULTILINE" rel="noopener noreferrer" data-external="true" target="_blank">MULTILINE</a>模式为开。<br><i id="6eda03f4">如果选择了<a href="#Templates">预定义模板</a> ，则将使用与该模板关联的模式。</i></p><p id="c25b456b">您可以通过在模式字符串的开头添加“（？-m）”来禁用MULTILINE模式。</p></td></tr><tr id="213402bc" class="ijRowOdd"><td id="1e27d868"><p id="4f8bcc82">相符</p></td><td id="b11a6751"><a name="matchCase"></a><a name="FileContentReplacer-matchCase"></a><p id="e6d9d338">默认情况下，比较区分大小写。取消选中不区分大小写的语言。<br><i id="6e4c5c9b">如果选择了<a href="#Templates">预定义模板</a> ，则将使用与该模板关联的比较。</i></p></td></tr><tr id="0dc2aa22" class="ijRowEven"><td id="7bea65d8"><p id="4783d0cf">正则表达式</p></td><td id="ddf3f694"><a name="Regex"></a><a name="FileContentReplacer-Regex"></a><p id="0c54b4eb">默认情况下，此框处于选中状态，并且适用于搜索和替换字符串。取消选中以使用固定字符串。</p><a name="RegexMixed"></a><a name="FileContentReplacer-RegexMixed"></a><aside class="note " rel="022ab8b6" id="fe78ea18" data-title=""><p id="3fc599b5">如果您使用<a href="storing-project-settings-in-version-control.html">版本设置</a> （ <i id="4b264339">XML</i>或<i id="38a37683">Kotlin DSL</i> ），则除了默认设置<code class="code">REGEX</code>和非默认<code class="code">FIXED_STRINGS</code>模式， <code class="code">REGEX_MIXED</code>模式可用。在此模式下，搜索模式将解释为正则表达式，但替换文本将被<a href="https://docs.oracle.com/javase/8/docs/api/java/util/regex/Matcher.html#quoteReplacement-java.lang.String-" rel="noopener noreferrer" data-external="true" target="_blank">引号</a> （ <code class="code">\</code>和<code class="code">$</code>字符没有特殊含义）。</p><p id="cb45da0e">有关<a href="kotlin-dsl.html">Kotlin中的</a>设置，请参见<i id="edfc4cd8">文件内容替换器</i>配置示例：</p><div class="code-block" data-lang="bash">功能{replaceContent {fileRules =“ ** / *” pattern =“（？iu）“ regexMode = FileContentReplacer。\ h + pattern \ h + to \ h + search \ h +。RegexMode。REGEX_MIXED替换=“”“％teamcity.agent.work.dir％nd_r \ bin \ isf”“”}}</div></aside></td></tr><tr id="28cbeaaf" class="ijRowOdd"><td id="016dadd7"><p id="65504f8c">用。。。来代替</p></td><td id="359a0ee8"><a name="Replacement"></a><a name="FileContentReplacer-Replacement"></a><p id="49ef86c5">在<b id="e552196f">查找内容</b>框中键入用于替换字符的文本。要从文件中删除“ <b id="4305f6ed">查找内容”</b>框中的字符，请将此框留空。</p><p id="3e42353b">$ N序列引用第N个捕获组。所有反斜线（ <code class="code">\</code> ）和美元符号（ <code class="code">$</code> ）不应有特殊含义（如<code class="code">\\</code>和<code class="code">\$</code> ， 分别）。</p></td></tr></tbody></table></div><p id="8e1b0e71"><a name="Pre-defined templates"></a><a name="FileContentReplacer-Pre-defined templates"></a></p><a name="Templates"></a><a name="Templates"></a><div class="chapter"><h3 id="FileContentReplacer-Templates">范本</h3><p id="0df62e4b">本节列出了可用的替换模板。</p><a name=".NETtemplates"></a><a name=".NET-templates"></a><div class="chapter"><h4 id="FileContentReplacer-.NETtemplates">.NET模板</h4><p id="005797c8">提供了用于替换以下<a href="https://msdn.microsoft.com/en-us/library/4w8c1y2s(v=vs.110).aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2" rel="noopener noreferrer" data-external="true" target="_blank">Assembly属性</a>的模板（请参阅<a href="#Templates">本节</a>以与<a href="assemblyinfo-patcher.html">AssemblyInfo Patcher</a>进行比较）：</p><ul class="list _ul"><li class="list__item" id="fc8f705c"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblytitleattribute.aspx" rel="noopener noreferrer" data-external="true" target="_blank">AssemblyTitle</a></li><li class="list__item" id="6bf01e65"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblydescriptionattribute.aspx" rel="noopener noreferrer" data-external="true" target="_blank">组装说明</a></li><li class="list__item" id="87ad411e"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblyconfigurationattribute.aspx" rel="noopener noreferrer" data-external="true" target="_blank">AssemblyConfiguration</a></li><li class="list__item" id="6479feb0"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblyproductattribute.aspx" rel="noopener noreferrer" data-external="true" target="_blank">组装公司</a></li><li class="list__item" id="a6de6f5d"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblyproductattribute.aspx" rel="noopener noreferrer" data-external="true" target="_blank">组装产品</a></li><li class="list__item" id="673ac611"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblycopyrightattribute.aspx" rel="noopener noreferrer" data-external="true" target="_blank">大会版权</a></li><li class="list__item" id="6cee176d"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblytrademarkattribute.aspx" rel="noopener noreferrer" data-external="true" target="_blank">组装商标</a></li><li class="list__item" id="3dfedc8a"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblycultureattribute.aspx" rel="noopener noreferrer" data-external="true" target="_blank">大会文化</a></li><li class="list__item" id="5c684345"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblyversionattribute.aspx" rel="noopener noreferrer" data-external="true" target="_blank">AssemblyVersion</a></li><li class="list__item" id="b86ca0e7"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblyfileversionattribute.aspx" rel="noopener noreferrer" data-external="true" target="_blank">AssemblyFileVersion</a></li><li class="list__item" id="876b6679"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblyinformationalversionattribute.aspx" rel="noopener noreferrer" data-external="true" target="_blank">AssemblyInformationalVersion</a></li><li class="list__item" id="298dd40b"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblykeyfileattribute.aspx" rel="noopener noreferrer" data-external="true" target="_blank">AssemblyKeyFile</a></li><li class="list__item" id="a2145de9"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblykeynameattribute.aspx" rel="noopener noreferrer" data-external="true" target="_blank">AssemblyKeyName</a></li><li class="list__item" id="2acdeb7a"><a href="http://msdn.microsoft.com/en-us/library/system.reflection.assemblydelaysignattribute.aspx" rel="noopener noreferrer" data-external="true" target="_blank">AssemblyDelaySign</a></li><li class="list__item" id="a8fafe5e"><a href="http://msdn.microsoft.com/en-us/library/system.clscompliantattribute.aspx" rel="noopener noreferrer" data-external="true" target="_blank">符合CLS</a></li><li class="list__item" id="8787b620"><a href="http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comvisibleattribute.aspx" rel="noopener noreferrer" data-external="true" target="_blank">可见的</a></li><li class="list__item" id="220c5a23"><a href="http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.guidattribute.aspx" rel="noopener noreferrer" data-external="true" target="_blank">引导</a></li><li class="list__item" id="758afd60"><a href="http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx" rel="noopener noreferrer" data-external="true" target="_blank">内部可见</a></li><li class="list__item" id="ac3d0995"><a href="http://msdn.microsoft.com/en-us/library/system.security.allowpartiallytrustedcallersattribute.aspx" rel="noopener noreferrer" data-external="true" target="_blank">AllowPartiallyTrustedCallers</a></li><li class="list__item" id="43477c77"><a href="http://msdn.microsoft.com/en-us/library/system.resources.neutralresourceslanguageattribute.aspx" rel="noopener noreferrer" data-external="true" target="_blank">NeutralResourcesLanguageAttribute</a></li></ul></div><a name=".NetCoretemplates"></a><a name=".Net-Core-templates"></a><div class="chapter"><h4 id="FileContentReplacer-.NetCoretemplates">.Net Core模板</h4><ul class="list _ul"><li class="list__item" id="45a45fad"><code class="code">AssemblyName</code></li><li class="list__item" id="4e5ee3ee"><code class="code">AssemblyTitle</code></li><li class="list__item" id="e8906f5d"><code class="code">AssemblyVersion</code></li><li class="list__item" id="f6cb2a79"><code class="code">Authors</code></li><li class="list__item" id="7464c5ae"><code class="code">Company</code></li><li class="list__item" id="2cb082bc"><code class="code">Copyright</code></li><li class="list__item" id="d2f31856"><code class="code">Description</code></li><li class="list__item" id="179ea6d0"><code class="code">FileVersion</code></li><li class="list__item" id="7adb760d"><code class="code">PackageId</code></li><li class="list__item" id="f1d5824f"><code class="code">PackageVersion</code></li><li class="list__item" id="946265b2"><code class="code">Product</code></li><li class="list__item" id="90b17120"><code class="code">Title</code></li><li class="list__item" id="bdb975a8"><code class="code">Version</code></li><li class="list__item" id="27840397"><code class="code">VersionPrefix</code></li><li class="list__item" id="2b1d6807"><code class="code">VersionSuffix</code></li></ul></div><a name="MFCtemplates"></a><a name="MFC-templates"></a><div class="chapter"><h4 id="FileContentReplacer-MFCtemplates">MFC模板</h4><p id="1ad48fc1">提供了用于替换以下<b id="6f6064b4">MFC C ++资源键</b>的模板：</p><ul class="list _ul"><li class="list__item" id="e5d2500a"><code class="code">FileDescription</code></li><li class="list__item" id="b4185558"><code class="code">CompanyName</code></li><li class="list__item" id="bde47265"><code class="code">ProductName</code></li><li class="list__item" id="a9df7901"><code class="code">LegalCopyright</code></li><li class="list__item" id="5236b616"><code class="code">FileVersion*</code></li><li class="list__item" id="0dac1f64"><code class="code">ProductVersion*</code></li></ul><aside class="note " rel="b7ad78da" id="3b135e39" data-title=""><p id="6ced7b16">在<b id="779681a7">MFC * .rc</b>文件中，两者<code class="code">FileVersion</code>和<code class="code">ProductVersion</code>发生两次，一次以<i id="764a1e27">点分隔</i> （例如， <code class="code">1.2.3.4</code> ），并用<i id="1ed999b2">逗号分隔</i>一次（例如<code class="code">1,2,3,4</code> ）形式。如果你的<code class="code">%build.number%</code>参数的格式为<code class="code">1.2.3.{0}</code> ，使用两个带有不同定界符的构建参数，而不是单个<code class="code">%build.number%</code>被推荐。</p></aside></div><a name="Xcodetemplates"></a><a name="Xcode-templates"></a><div class="chapter"><h4 id="FileContentReplacer-Xcodetemplates">Xcode模板</h4><p id="ca72b6bf">用于替换以下<a href="https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html" rel="noopener noreferrer" data-external="true" target="_blank">核心基础密钥</a>的模板<code class="code">Info.plist</code>提供文件：</p><ul class="list _ul"><li class="list__item" id="f2f268d1"><code class="code">CFBundleVersion</code></li><li class="list__item" id="b6dd75bb"><code class="code">CFBundleShortVersionString</code></li><li class="list__item" id="aa05a5a2"><p>或两者<code class="code">CFBundleVersion</code>和<code class="code">CFBundleShortVersionString</code>同时</p></li></ul></div></div></div><a name="Examples"></a><a name="Examples"></a><div class="chapter"><h2 id="FileContentReplacer-Examples">例子</h2><a name="Extendinganattributevaluewithacustomsuffix"></a><a name="Extending-an-attribute-value-with-a-custom-suffix"></a><div class="chapter"><h3 id="FileContentReplacer-Extendinganattributevaluewithacustomsuffix">使用自定义后缀扩展属性值</h3><p id="31b9a7ce">假设您不想更换您的<code class="code">AssemblyConfiguration</code>使用固定的文字，但要保留您的<code class="code">AssemblyConfiguration</code>从<code class="code">AssemblyInfo.cs</code>并使用自定义后缀对其进行扩展，例如： <code class="code">[assembly: AssemblyConfiguration("${AssemblyConfiguration} built by TeamCity")])</code> 。</p><p id="6387bb12">请执行以下操作：更改默认替换<code class="code">$1MyAssemblyConfiguration$7</code>至<code class="code">$1$5 built by TeamCity$7</code> 。</p><p id="ad58e26f">对于更改复杂的正则表达式模式，此外部<a href="https://regex101.com/" rel="noopener noreferrer" data-external="true" target="_blank">工具</a>可能很有用。</p></div><a name="Patchingonlyspecifiedfiles"></a><a name="Patching-only-specified-files"></a><div class="chapter"><h3 id="FileContentReplacer-Patchingonlyspecifiedfiles">仅修补指定的文件</h3><p id="e6c1cd8e">默认值<code class="code">AssemblyInfo</code>模板遵循通常的<i id="7ad55850">Visual Studio</i>项目/解决方案布局；但是许多信息可能在多个项目之间共享，并且可以驻留在共享文件中（例如<code class="code">CommonAssemblyInfo.cs</code> ）。</p><p id="07b27bc7">假设您只想修补此共享文件；或者你想打补丁<code class="code">AssemblyInfo.cs</code>每个项目的bassis文件。</p><p id="3c761636">请执行下列操作：</p><ol class="list _decimal"><li class="list__item" id="545248b9"><p>加载<code class="code">AssemblyInfo</code>与您要处理的属性相对应的模板（例如<code class="code">AssemblyVersion</code> ）</p></li><li class="list__item" id="d4e8e6c6"><p>从默认值更改“ <a href="#Wildcards">查找范围”</a>字段中的文件路径列表<code class="code">*/Properties/AssemblyInfo.cs</code>至<code class="code">*/CommonAssemblyInfo.cs</code>或在此处列出以逗号或换行符分隔的几个文件，例如<code class="code">myproject1/Properties/AssemblyInfo.cs, myproject2/Properties/AssemblyInfo.cs</code> 。</p></li></ol></div><a name="Specifyingpathpatternswhichcontainspaces"></a><a name="Specifying-path-patterns-which-contain-spaces"></a><div class="chapter"><h3 id="FileContentReplacer-Specifyingpathpatternswhichcontainspaces">指定包含空格的路径模式</h3><p id="f88a274e">通常将空格视为模式的一部分，除非空格后跟逗号，否则空格会被视为分隔符。</p><p id="11aa1c41">请注意，TeamCity服务器用户界面会修剪输入字段中的前导空格和尾随空格，因此单行模式如<code class="code"><spaces>foo.bar</code>会变成<code class="code">foo.bar</code>保存后。可以使用以下变通办法：</p></div><a name="Changingonlythelastversionpart/buildnumberoftheAssemblyVersionattribute:"></a><a name="Changing-only-the-last-version-part-/-build-number-of-the-AssemblyVersion-attribute:"></a><div class="chapter"><h3 id="FileContentReplacer-Changingonlythelastversionpart/buildnumberoftheAssemblyVersionattribute:">仅更改AssemblyVersion属性的最后一个版本零件/内部版本号：</h3><p id="f8199f0b">假设你<code class="code">AssemblyVersion</code>在<code class="code">AssemblyInfo.cs</code>是<code class="code">Major.Minor.Revision.Build</code> （调成<code class="code">1.2.3.*</code> ），并且您要替换<code class="code">Build</code>部分（在最后一个点之后（ <code class="code">*</code> ） 只要。</p><p id="d97bc622">加载<code class="code">AssemblyVersion</code>在AssemblyInfo（C＃）模板中并更改默认模式：</p><div class="code-block" data-lang="bash">（^ \ s * \ [\ s * assembly \ s *：\ s *（（System \ s * \。）？\ s * Reflection \ s * \。）？\ s * AssemblyVersion（Attribute）？\ s * \（\ s * @？\“）（（[[0-9 \ *]）+ \。？）+（\“ \ s * \）\ s * \]）</div><p id="b23cb901">至</p><div class="code-block" data-lang="bash">（^ \ s * \ [\ s * assembly \ s *：\ s *（（System \ s * \。）？\ s * Reflection \ s * \。）？\ s * AssemblyVersion（Attribute）？\ s * \（\ s * @？\“）（（[[0-9 \ *] + \。）+）[0-9 \ *] +（\” \ s * \）\ s * \]）</div><p id="cb380a26">并更改默认替换：</p><div class="code-block" data-lang="bash">$ 1 \％build.number％$ 7</div><p id="f32171e7">至</p><div class="code-block" data-lang="bash">$ 1 $ 5 \％build.number％$ 7</div><aside class="note " rel="04f56753" id="f8686319" data-title=""><p id="365cb0b7">确保你的<code class="code">%build.number%</code> <a href="configuring-general-settings.html">格式</a>仅包含不带任何点的十进制数字，否则您可能会遇到非标准版本，例如<code class="code">1.2.3.4.5.6.2600</code> （即<code class="code">%build.counter%</code> <i id="d3eeb8a7">是</i>一个有效值，而<code class="code">4.5.6.%build.counter%</code> <i id="8a3ade4a">不是</i> ）。</p></aside><hr id="38f36bd4"></div></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>