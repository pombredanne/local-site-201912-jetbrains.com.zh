<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>订购构建队列-帮助|帮助团队城市</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Ordering Build Queue" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/ordering-build-queue.md|Ordering Build Queue" data-main-title="Ordering Build Queue" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/ordering-build-queue.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="ordering-build-queue.md" data-toc="Ordering Build Queue">订购构建队列</h1><p id="58f4fb98">此页面列出了用于手动管理队列生成的选项。自动构建队列优化在<a href="build-queue.html#Build-Queue-Optimization-by-TeamCity">单独的部分</a>中进行了详细<a href="build-queue.html#Build-Queue-Optimization-by-TeamCity">介绍</a> 。</p><p id="94ea0ad6">在此页：</p><p id="7dbd2c5a"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#OrderingBuildQueue-ManuallyReorderingBuildsinQueue">在队列中手动对构建进行重新排序</a><ul class="list _bullet"><li class="list__item"><a href="#OrderingBuildQueue-MovingBuildstoTop">将构建移至顶部</a></li></ul></li><li class="list__item"><a href="#OrderingBuildQueue-ManagingBuildPriorities">管理构建优先级</a></li><li class="list__item"><a href="#OrderingBuildQueue-RemovingBuildsFromBuildQueue">从构建队列中删除构建</a></li><li class="list__item"><a href="#OrderingBuildQueue-LimitingMaximumSizeofBuildQueue">限制构建队列的最大大小</a></li></ul><p></p><a name="ManuallyReorderingBuildsinQueue"></a><a name="Manually-Reordering-Builds-in-Queue"></a><div class="chapter"><h2 id="OrderingBuildQueue-ManuallyReorderingBuildsinQueue">在队列中手动对构建进行重新排序</h2><p id="d9348b15">要在“ <a href="build-queue.html">构建队列”</a>中对<a href="build-queue.html">构建进行</a>重新排序，可以将它们拖动到所需位置。</p><a name="MovingBuildstoTop"></a><a name="Moving-Builds-to-Top"></a><div class="chapter"><h3 id="OrderingBuildQueue-MovingBuildstoTop">将构建移至顶部</h3><ul class="list _ul"><li class="list__item" id="666ac630">对于任何排队的构建，请执行以下任一操作：<ul class="list _ul"><li class="list__item" id="b1132098"><p>在“ <a href="build-queue.html">构建队列”</a>页面上，单击构建序列号旁边的箭头按钮<img alt="moveToTop.png" title="moveToTop.png" src="/help/img/teamcity/2019.1/moveToTop.png" id="17db1f9d" width="22" height="23" class="inline-icon-22">将构建移动到队列的顶部。</p></li><li class="list__item" id="d2941ead"><p>在用户界面的任意位置单击内部版本号或内部状态链接，然后在<a href="working-with-build-results.html">排队的内部</a>页上，单击右上角的“ <b id="6df4bd2b">操作”</b>菜单。选择<b id="a497a2cc">移至顶部</b>动作。队列位置将改变。对于复合构建，整个构建链将移至队列的顶部。</p></li></ul></li><li class="list__item" id="a3b3393e"><p>对于具有尚未开始的依赖关系的正在运行的复合内部版本，请在用户界面的任何位置单击内部版本号或内部版本链接，然后在<a href="working-with-build-results.html">正在运行的内部版本</a>页面上，单击右上角的“ <b id="70000529">操作”</b>菜单。选择“ <b id="b8aa4065">将排队的依赖项移至顶部”</b>操作。此构建的所有排队依赖关系都将移至队列顶部。</p></li></ul></div></div><a name="ManagingBuildPriorities"></a><a name="Managing-Build-Priorities"></a><div class="chapter"><h2 id="OrderingBuildQueue-ManagingBuildPriorities">管理构建优先级</h2><p id="51e67562">默认情况下，构建按触发顺序放置在构建队列中：最近触发的构建将添加到队列底部。可以更改构建的优先级，以便将构建插入构建队列的位置取决于其定义的优先级和当前排队构建的等待时间。</p><p id="d8081f5f">在TeamCity中，您可以通过创建<i id="97ed0761">优先级类</i>来控制构建优先<i id="97ed0761">级</i> 。优先级类别是一组具有指定优先级的构建配置（数字越大，优先级越高。例如， <code class="code">priority=2</code>高于<code class="code">priority=1</code> ）。配置具有更高的优先级，将其添加到“构建队列”中时可获得的位置越高。<br>要访问这些设置，请在“ <b id="526e1dbd">构建队列”</b>选项卡上，单击页面右上角的“ <b id="6eb8984c">配置构建优先级”</b>链接。</p><aside class="tip sideblock" rel="d8081f5f" id="2da92fab" data-title=""><p id="2c2afc5c">请注意，只有具有<b id="5d61d810">系统管理员</b>角色的用户才能管理构建优先级类。</p></aside><p id="dfeb5e1d">默认情况下，有两个预定义的优先级类： <i id="ae6c3244">Personal</i>和<i id="f357755f">Default</i> ，都具有<code class="code">priority=0</code> 。</p><ul class="list _ul"><li class="list__item" id="296a0b0e"><p>一旦将所有个人构建（“ <a href="remote-run.html">远程运行”</a>或“ <a href="pre-tested-delayed-commit.html">预先测试的提交”</a> ）添加到构建队列中，便被分配给“ <i id="95dc574a">个人”</i>优先级类。请注意，您可以在此处更改个人构建的优先级。</p></li><li class="list__item" id="8397fe05"><p><i id="ffbdfe9f">Default</i>类包括不与任何其他类关联的所有内部版本。这允许创建一个优先级低于默认值的类，并将一些构建放置在队列的底部。</p></li></ul><p id="a13658ae">要创建一个新的优先级类：</p><ol class="list _decimal"><li class="list__item" id="c5fe55d5"><p>单击<b id="43cf1891">创建新的优先级类别</b> 。</p></li><li class="list__item" id="24a29f56"><p>指定其名称，优先级（在范围内<code class="code">-100..100</code> ）和其他说明。点击<b id="d987cc14">创建</b> 。</p></li><li class="list__item" id="99f772d1"><p>单击<b id="3c700d61">添加配置</b>链接，以指定应在此类中定义优先级的构建配置。</p></li></ol><p id="2464447a">仅当将构建添加到队列时才考虑此设置。为了确保优先级较低的构建始终有运行的机会，TeamCity还考虑了每个构建在队列中保留的时间。这样就可以以较低的优先级运行长时间等待的构建，然后再以更高的优先级运行最近添加的构建。有关此行为的详细说明，请参阅<a href="https://confluence.jetbrains.com/display/TW/Build+Queue+Priorities#BuildQueuePriorities-Algorithmdetails" rel="noopener noreferrer" data-external="true" target="_blank">算法描述</a> 。</p></div><a name="RemovingBuildsFromBuildQueue"></a><a name="Removing-Builds-From-Build-Queue"></a><div class="chapter"><h2 id="OrderingBuildQueue-RemovingBuildsFromBuildQueue">从构建队列中删除构建</h2><p id="2321973d">要从队列中删除版本，请选中所选版本旁边的“ <b id="af1508c1">删除”</b>框并确认删除。如果要从队列中删除的构建是构建链的一部分，则TeamCity在注释字段下方显示以下消息：“此构建是构建链的一部分”。有关详细信息，请参考<a href="build-chain.html#Stopping/Removing-From-Queue-Builds-from-Build-Chain">构建链</a>描述。</p><p id="744a4552">您也可以从“ <b id="e8877914">操作”</b>菜单一次将所有个人构建从队列中删除。</p><p id="1924947b">您还可以从队列中删除一些已<a href="build-configuration.html#Pausing-/-Activating-several-build-configurations-of-a-project">暂停的构建配置</a> 。</p></div><a name="LimitingMaximumSizeofBuildQueue"></a><a name="Limiting-Maximum-Size-of-Build-Queue"></a><div class="chapter"><h2 id="OrderingBuildQueue-LimitingMaximumSizeofBuildQueue">限制构建队列的最大大小</h2><p id="28499caa">可以限制队列中的最大构建数量。默认情况下，限制设置为3000个内部版本。可以使用<code class="code">teamcity.buildTriggersChecker.queueSizeLimit</code> <a href="configuring-teamcity-server-startup-properties.html#TeamCity-internal-properties">内部财产</a> 。</p><p id="b1ec96de">当队列大小达到限制时，TeamCity将暂停<a href="configuring-build-triggers.html">配置构建触发器</a> 。队列大小低于限制后，将重新启用自动构建触发。暂停触发后，将向所有用户显示警告消息。</p><p id="b34bd58a">暂停<b id="e00dbe3d">自动</b>触发后，仍然可以<a href="triggering-a-custom-build.html">手动</a>将构建版本添加到队列中。</p><hr id="ca65a4a4"><p id="13426a23"><b id="cecdd87e">也可以看看：</b></p><p id="711b3022"><b id="df09f4cc">概念</b> ： <a href="build-queue.html">构建队列</a></p><hr id="e8f5fc1e"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>