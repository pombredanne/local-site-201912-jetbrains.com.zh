<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>VCS Labeling - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="VCS Labeling" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/adding-build-features.md|Adding Build Features/vcs-labeling.md|VCS Labeling" data-main-title="VCS Labeling" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/vcs-labeling.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="VCS Labeling" id="vcs-labeling.md">VCS Labeling</h1><p id="032c7d43">TeamCity can label (tag) sources of a particular build (automatically or manually) in your version control. The list of labels applied and their application status is displayed on the <a href="working-with-build-results.html#Changes">Changes tab</a> of the build results page.</p><p id="b7ed0925">On this page:</p><p id="effb4283"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#VCSLabeling-AutomaticVCSlabeling">Automatic VCS labeling</a></li><li class="list__item"><a href="#VCSLabeling-ManualVCSlabeling">Manual VCS labeling</a></li><li class="list__item"><a href="#VCSLabeling-SubversionLabelingRules">Subversion Labeling Rules</a></li><li class="list__item"><a href="#VCSLabeling-LabelingRuleExamples">Labeling Rule Examples</a></li></ul></p><a name="AutomaticVCSlabeling"></a><a name="Automatic-VCS-labeling"></a><div class="chapter"><h2 id="VCSLabeling-AutomaticVCSlabeling">Automatic VCS labeling</h2><p id="798704ee">You can set TeamCity to label the sources of a build depending on the build status automatically. The process takes place in the background after the build finishes and does not affect the build status, which means that a labeling failure is not a standard <a href="subscribing-to-notifications.html#Which-Events-Will-Trigger-Notifications">notification event</a>. However, the users subscribed for <a href="subscribing-to-notifications.html#Which-Events-Will-Trigger-Notifications">notifications about failed builds</a> of the current build configuration will be notified about a labeling failure.</p><p id="9f04183a">Any errors encountered during labeling are reported on the <a href="working-with-build-results.html#Changes">Changes tab</a> of the build results page.</p><p id="97ffd1df">Labeling is configured for a build configuration/template.</p><p id="9ae3ead7">Automatic VCS labeling is configured on the <a href="adding-build-features.html">Build Features page</a> of the Build Configuration settings.</p><p id="159960d7">To configure automatic labeling, you need to specify the root to label and the labeling pattern. If you have <a href="working-with-feature-branches.html">branches configured</a> for your build configuration, you can label builds from <a href="branch-filter.html">branches you select</a>.</p><p id="f2ff5bed">You can override the labeling settings inherited from a template completely; you can also apply different labels to different VCS roots.</p><aside class="note " data-title="" rel="f2ff5bed" id="9c5eaa8d"><p id="50fcc10e">Labeling uses the credentials specified for the VCS root and the write access to the sources repository is required.</p></aside><p id="5860c5da">Note that if you change the VCS settings of a build configuration, they will be used for labeling only in the new builds.</p><p id="364d89d3">"Moving" labels (a label with the same name for different builds, for example, <code class="code">SNAPSHOT</code>) are currently supported only for CVS.</p><p id="970d8ad7">For an example of using the Teamcity VCS labeling feature to automate tag creation, refer to this <a href="http://laurentkempe.com/2010/06/03/Build-and-Deployment-automation-VCS-Root-and-Labeling-in-TeamCity/" data-external="true" target="_blank" rel="noopener noreferrer">external posting</a>.</p></div><a name="ManualVCSlabeling"></a><a name="Manual-VCS-labeling"></a><div class="chapter"><h2 id="VCSLabeling-ManualVCSlabeling">Manual VCS labeling</h2><p id="58b50227">To label the sources manually:</p><p id="b692bf90">Navigate to the <a href="working-with-build-results.html">build results</a> page, click <b id="2537d76f">Actions</b> and select <b id="ebef206a">Label this build sources</b> from the drop-down.</p><p id="2405126f">Manual labeling uses the VCS settings actual for the build.</p><p id="cf3e5025"><a name="SubversionLabelingRules"></a><a name="VCSLabeling-SubversionLabelingRules"></a></p></div><a name="SubversionLabelingRules"></a><a name="Subversion-Labeling-Rules"></a><div class="chapter"><h2 id="VCSLabeling-SubversionLabelingRules">Subversion Labeling Rules</h2><p id="b43d987c">To label Subversion VCS roots, additional configuration – <a href="subversion.html#Labeling-settings">labeling rules</a> defining the SVN repository structure – is required.</p><p id="522deb3d">Labeling rules are specified as newline-delimited rules in the following format:</p><div class="code-block" data-lang="none">TrunkOrBranchRepositoryPath =&gt; tagDirectoryRepositoryPath

</div><p id="b9ed6a67">The repository paths can be relative and absolute (starting from <code class="code">/</code>). Absolute paths are resolved from the SVN repository root (the topmost directory you have in your repository), relative paths are resolved from the TeamCity VCS root.</p><p id="e6c8df4d">When creating a label, the sources residing under <code class="code">TrunkOrBranchRepositoryPath</code> will be put into the <code class="code">tagDirectoryRepositoryPath/tagName</code> directory, where <code class="code">tagName</code> is the name of the label as defined by the labeling pattern of the build configuration.<br>If no sources match the <code class="code">TrunkOrBranchRepositoryPath</code>, no label will be created.<br>The <code class="code">tagDirectoryRepositoryPath</code> path must already exist in the repository.<br>If the <code class="code">tagDirectoryRepositoryPath</code> directory already contains a subdirectory with the current label name, the labeling process will fail, and the old tag directory won't be deleted or affected.</p><p id="74cb589c">For example, there is a VCS root with the URL <code class="code">svn://address/root/project</code> where <code class="code">svn://address/root</code> is the repository root, and the repository has the structure:</p><div class="code-block" data-lang="none">-project
--trunk
--branch1
--branch2
--tags

</div><p id="241aeb50">In this case the labeling rules should be:</p><div class="code-block" data-lang="none">/project/trunk=&gt;/project/tags
/project/branch1=&gt;/project/tags
/project/branch2=&gt;/project/tags

</div></div><a name="LabelingRuleExamples"></a><a name="Labeling-Rule-Examples"></a><div class="chapter"><h2 id="VCSLabeling-LabelingRuleExamples">Labeling Rule Examples</h2><p id="60d21226">You can use variables substitution in both labeling rules and labeling patterns. See a labeling rule example in a VCS root used in different configurations:</p><div class="code-block" data-lang="none">/projects/%projectName%/trunk =&gt; /projects/%projectName%/tags

</div><p id="a485ec36">This will require you to set the <code class="code">%projectName%</code> <a href="configuring-build-parameters.html">configuration parameter</a> in the build configuration settings.</p><p id="926b561a">By default, TeamCity will append the label name to the end of the specified target path. If you want to have a different directory structure and put the label in the middle of the target path, you can use the following syntax:</p><div class="code-block" data-lang="none">/project/trunk =&gt; /tagged_configurations/%%system.build.label%%/project
/modules/module1/trunk =&gt; /tagged_configurations/%%system.build.label%%/module1
/modules/module2/trunk =&gt; /tagged_configurations/%%system.build.label%%/module2

</div><p id="c44cb4fd">Thus, <code class="code">%%system.build.label%%</code> will be replaced with the tag name (note the double <code class="code">%%</code> sign at the beginning - it is important).</p><hr id="4ca99934"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>