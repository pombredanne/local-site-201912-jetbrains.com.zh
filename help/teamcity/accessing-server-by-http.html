<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>通过HTTP访问服务器-帮助|帮助团队城市</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Accessing Server by HTTP" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/extending-teamcity.md|Extending TeamCity/accessing-server-by-http.md|Accessing Server by HTTP" data-main-title="Accessing Server by HTTP" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/accessing-server-by-http.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="accessing-server-by-http.md" data-toc="Accessing Server by HTTP">通过HTTP访问服务器</h1><aside class="warning " rel="accessing-server-by-http.md" id="01213a31" data-title=""><p id="0fc01d59">使用TeamCity <a href="rest-api.html">REST API</a>从脚本访问服务器。本节已经<b id="be687e53">过时</b> ，保留下来是为了与先前的TeamCity版本<b id="62464cc1">向后兼容</b>以及某些特定功能。</p></aside><p id="bf77c8a5">以下示例假定您的服务器Web UI可通过<a href="http://teamcity.jetbrains.com:8111/" rel="noopener noreferrer" data-external="true" target="_blank">http://teamcity.jetbrains.com:8111/</a> URL访问。</p><p id="c61a463f">TeamCity服务器支持基本的HTTP身份验证，允许用户访问某些Web服务器页面并通过各种脚本执行操作。有关发出请求时如何提供基本HTTP凭据的信息，请参阅客户端工具/库的手册。</p><p id="4086d9e5">使用有效的TeamCity服务器用户名和密码来使用基本的HTTP身份验证。需要适当的用户权限才能执行操作。</p><aside class="tip sideblock" rel="4086d9e5" id="5e62d148" data-title=""><p id="d4e2d30c">您可能希望将服务器<a href="using-https-to-access-teamcity-server.html">配置</a>为使用HTTPS，因为在基本HTTP身份验证期间，用户名和密码以不安全的形式传递。</p></aside><p id="500f53b8">要在没有提供凭据的情况下强制使用基本的HTTP身份验证，而不是重定向到登录页面，请在通常的TeamCity URL中的路径前面加上“ <code class="code">/httpAuth</code> ”。例如：</p><div class="code-block" data-lang="bash">http://teamcity.jetbrains.com:8111/httpAuth/action.html?add2Queue=MyBuildConf</div><p id="245efdee">当<a href="patterns-for-accessing-build-artifacts.html#Obtaining-Artifacts-from-a-Build-Script">下载构建构件</a>并触发构建时，HTTP认证会很有用。</p><p id="911836cc">如果您启用了<i id="53e8becb">来宾</i>用户，它也可以用来执行操作。使用 ” <code class="code">/guestAuth</code>代表来宾用户执行操作的网址路径前的“”。例如：</p><div class="code-block" data-lang="bash">http://teamcity.jetbrains.com:8111/guestAuth/action.html?add2Queue=MyBuildConf</div><aside class="tip sideblock" rel="0b42de2e" id="07d0070b" data-title=""><p id="6ac40bd1">确保用于执行身份验证的用户（或<i id="89791cb2">来宾</i>用户）具有适当的角色来执行必要的操作。</p></aside><a name="TriggeringaBuildFromScript"></a><a name="Triggering-a-Build-From-Script"></a><h3 id="AccessingServerbyHTTP-TriggeringaBuildFromScript">从脚本触发构建</h3><aside class="warning " rel="AccessingServerbyHTTP-TriggeringaBuildFromScript" id="0040d0d3" data-title=""><p id="d1111e53">使用TeamCity <a href="rest-api.html#Triggering-a-Build">REST API</a>触发构建。以下部分已<b id="8657adf0">过时</b> ，保留下来只是出于兼容性目的。</p></aside><p id="c1b1166e">要触发构建，请发送<code class="code">HTTP POST</code>请求执行基本HTTP身份验证的URL：</p><div class="code-block" data-lang="bash">http：// <server address="">/httpAuth/action.html?add2Queue= <build id="" configuration="">

</build></server></div><p id="cf49d017">某些工具（例如<a href="http://www.gnu.org/software/wget/" rel="noopener noreferrer" data-external="true" target="_blank">Wget</a> ）为基本的HTTP身份验证支持以下语法：</p><div class="code-block" data-lang="bash">http：// <user name="">： <user password="">@ <server address="">/httpAuth/action.html?add2Queue= <build id="" configuration="">

</build></server></user></user></div><p id="3ba09f08">例：</p><div class="code-block" data-lang="bash">http：// testuser：testpassword@teamcity.jetbrains.com：8111 / httpAuth / action.html？add2Queue = MyBuildConf</div><p id="6357a93c">您可以通过其他代理触发特定代理的构建<code class="code">agentId</code>参数与座席的ID。你可以从代理的详细信息页面的URL代理ID： <b id="bb352060">代理| <agent name=""></agent></b> 。例如，如果其详细信息页面具有以下URL，则可以推断该代理的ID等于“ 2”：</p><div class="code-block" data-lang="bash">http://teamcity.jetbrains.com:8111/agentDetails.html?id=2</div><p id="679aaee3">要同时触发两个代理上的构建，请使用以下URL：</p><div class="code-block" data-lang="bash">http：// testuser：testpassword@teamcity.jetbrains.com：8111 / httpAuth / action.html？add2Queue = MyBuildConf＆agentId = 1＆agentId = 2</div><p id="a9fc8149">要在所有已启用且兼容的代理上触发构建，请使用<code class="code">allEnabledCompatible</code>作为代理商ID：</p><div class="code-block" data-lang="bash">http：// testuser：testpassword@teamcity.jetbrains.com：8111 / httpAuth / action.html？add2Queue = MyBuildConf＆agentId = allEnabled兼容</div><a name="TriggeringaCustomBuild"></a><a name="Triggering-a-Custom-Build"></a><h4 id="AccessingServerbyHTTP-TriggeringaCustomBuild">触发自定义构建</h4><p id="d627b0ed">TeamCity允许您使用自定义参数触发构建。您可以选择特定的构建代理来运行构建，定义其他属性和环境变量，并选择特定的源修订版（通过指定要包含在构建中的最后一个更改）来运行构建。这些自定义将仅影响单个触发的构建，而不会影响构建配置的其他构建。</p><p id="fb8c2f94">要触发包含特定更改的构建，请使用以下URL：</p><div class="code-block" data-lang="bash">http：// testuser：testpassword@teamcity.jetbrains.com：8111 / httpAuth / action.html？add2Queue = MyBuildConf＆modificationId = 11112</div><p id="e42c92db"><code class="code">modificationId</code> —可以从Web差异URL获得的修改/更改内部ID。</p><p id="6e6f324d">要使用自定义参数（系统属性和环境变量）触发构建，请使用：</p><div class="code-block" data-lang="bash">http：// testuser：testpassword@teamcity.jetbrains.com：8111 / httpAuth / action.html？add2Queue = MyBuildConf＆name = <full property="" name1="">＆value = <value1>＆name = <full property="" name2="">＆value = <value2>

</value2></full></value1></full></div><p id="bf3d296a">哪里<code class="code"><full property name></code>是具有system./env的完整属性名称。前缀或无前缀以定义配置参数。请注意，先前的TeamCity版本对此操作使用了不同的语法。不过，出于兼容性考虑，仍支持该语法。</p><p id="1bc60965">要将构建移动到队列的顶部，请在查询字符串中添加以下内容：<code class="code">&moveToTop=true</code></p><p id="c94dc4c0">要运行个人构建，请添加<code class="code">&personal=true</code>查询字符串。</p><p id="a729d98a">要在功能分支上运行构建，请执行以下操作：</p><div class="code-block" data-lang="bash">http：// testuser：testpassword@teamcity.jetbrains.com/httpAuth/action.html？add2Queue = bt10＆branchName = master</div><hr id="0c46bb62"></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>