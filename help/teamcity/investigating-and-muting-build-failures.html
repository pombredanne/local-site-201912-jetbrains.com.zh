<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>调查和消除构建失败-帮助|帮助团队城市</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Investigating and Muting Build Failures" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/user-s-guide.md|User's Guide/investigating-and-muting-build-failures.md|Investigating and Muting Build Failures" data-main-title="Investigating and Muting Build Failures" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/investigating-and-muting-build-failures.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="investigating-and-muting-build-failures.md" data-toc="Investigating and Muting Build Failures">调查和消除构建失败</h1><p id="5db9267f">当由于某些问题或测试失败而导致构建失败时，TeamCity允许您<i id="2fffb23e">将</i>构建失败<i id="2fffb23e">的调查分配</i>给某些用户或使<i id="9f597b84">该失败静音，</i>从而不会影响构建状态。</p><p id="909a1b49">您可以对整个失败的构建配置进行调查，或者调查/消除单个<a href="viewing-tests-and-configuration-problems.html">构建问题和失败的测试</a> 。对于构建问题和失败的测试， <b id="7c8c946b">调查/静音</b>功能完全相同。</p><p id="e010deba">在此页：</p><p id="b136ea86"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#InvestigatingandMutingBuildFailures-RequiredPermissions">所需权限</a></li><li class="list__item"><a href="#InvestigatingandMutingBuildFailures-AssigningInvestigationsofFailedBuildConfigurations">分配失败的构建配置调查</a></li><li class="list__item"><a href="#InvestigatingandMutingBuildFailures-AssigningInvestigationsofBuildProblemsandFailedTests">分配对构建问题和失败测试的调查</a></li><li class="list__item"><a href="#InvestigatingandMutingBuildFailures-MutingBuildProblems">消除构建问题</a></li><li class="list__item"><a href="#InvestigatingandMutingBuildFailures-MutingFailedTests">使测试失败</a></li><li class="list__item"><a href="#InvestigatingandMutingBuildFailures-MarkingProblemsasFixed">将问题标记为固定</a></li><li class="list__item"><a href="#InvestigatingandMutingBuildFailures-ViewingInvestigationsandMutes">查看调查和静音</a></li><li class="list__item"><a href="#InvestigatingandMutingBuildFailures-ViewingMyInvestigations">查看我的调查</a></li></ul><p></p><a name="RequiredPermissions"></a><a name="Required-Permissions"></a><div class="chapter"><h2 id="InvestigatingandMutingBuildFailures-RequiredPermissions">所需权限</h2><p id="09337c9d">为了能够管理和查看特定项目中的调查/变异，用户必须在此项目中授予以下权限：</p><ul class="list _ul"><li class="list__item" id="f58ee153"><p>“ <i id="dce2250d">静音/取消静音项目中的问题</i> ”以管理静音</p></li><li class="list__item" id="6327a8f9"><p>“ <i id="036e9720">分配/取消分配调查</i> ”以管理调查</p></li><li class="list__item" id="ecac9c13"><p>“ <i id="df7680ae">查看项目和所有父项目</i> ”以查看调查/ <i id="df7680ae">突变</i></p></li></ul><p id="c2f46a55">默认情况下，这些权限被授予项目管理员和系统管理员。</p></div><a name="AssigningInvestigationsofFailedBuildConfigurations"></a><a name="Assigning-Investigations-of-Failed-Build-Configurations"></a><div class="chapter"><h2 id="InvestigatingandMutingBuildFailures-AssigningInvestigationsofFailedBuildConfigurations">分配失败的构建配置调查</h2><p id="f95d5337">分配对失败的构建配置的调查：</p><ol class="list _decimal"><li class="list__item" id="fe37a058"><p>导航到的<b id="26a7a506">概述</b>选项<b id="13dae221"><a href="viewing-build-configuration-details.html">构建配置主页</a></b>页面（或的<b id="d47107c0">概述</b>选项<b id="505192d8"><a href="working-with-build-results.html">生成结果</a></b>页面），然后单击<b id="c593b261">分配调查</b> 。</p><figure><img alt="分配对失败构建的调查" title="分配对失败构建的调查" src="/help/img/teamcity/2019.1/assign-investigation-button.png" id="f41970e4" width="676" height="912"></figure><p></p></li><li class="list__item" id="4e849c88"><p>从“ <b id="68254f37">调查依据”</b>下拉菜单中选择一个TeamCity用户。</p><figure><img alt="分配了对失败构建的调查" title="分配了对失败构建的调查" src="/help/img/teamcity/2019.1/assign-investigation-failed-build.png" id="6fb64b61" width="575" height="825"></figure><p></p></li><li class="list__item" id="ebb749eb">选择要解决调查的条件：<ul class="list _ul"><li class="list__item" id="371ee782"><i id="d662dfda">构建配置成功时</i></li><li class="list__item" id="df85e1ef"><p>或者， <i id="33ab98c1">手动</i> ；如果“成功”构建状态不直接表明问题已解决，则建议使用此模式进行<a href="viewing-tests-and-configuration-problems.html#Flaky-Tests">不稳定的</a>构建配置。<br>分配了调查的用户以后可以在此窗口<a href="#Marking-Problems-as-Fixed">中将问题标记为已解决</a> 。</p></li></ul></li><li class="list__item" id="0352e963"><p>保存调查。</p></li></ol><p id="e7e911af">要为同一项目中的其他失败的构建配置分配类似的调查，请单击<b id="1a92b5f4">更多</b> ，然后在列表中选择配置。</p><p id="c29b3c16"></p><figure><img alt="在项目中分配更多调查" title="在项目中分配更多调查" src="/help/img/teamcity/2019.1/assign-more-investigations.gif" id="be190509" width="578" height="804"></figure><p></p></div><a name="AssigningInvestigationsofBuildProblemsandFailedTests"></a><a name="Assigning-Investigations-of-Build-Problems-and-Failed-Tests"></a><div class="chapter"><h2 id="InvestigatingandMutingBuildFailures-AssigningInvestigationsofBuildProblemsandFailedTests">分配对构建问题和失败测试的调查</h2><p id="032c58c5">分配对特定构建问题的调查：</p><ol class="list _decimal"><li class="list__item" id="5e85651a"><p id="ecbe8103">导航到<a href="working-with-build-results.html">Build Results</a>页面的<b id="af42fc15">Overview</b>选项卡（或<b id="751ea03c">Project Home</b>的<b id="e18606ff"><a href="viewing-tests-and-configuration-problems.html#Using-Current-Problems-Tab">Current Problems</a></b>选项卡），单击构建问题旁边的箭头，然后单击<b id="beb7936c">Investigate / Mute</b> 。</p><figure><img alt="调查/忽略构建问题" title="调查/忽略构建问题" src="/help/img/teamcity/2019.1/investigating-muting-build-problem.png" id="ba2c3748" width="1166" height="1343"></figure><p></p><p id="47a927a1">将打开“ <i id="8b142b23">调查/静音”</i>对话框。</p></li><li class="list__item" id="d922c833"><p id="de1fd291">从“ <b id="5c754ff1">调查依据”</b>下拉菜单中选择一个TeamCity用户。</p><figure><img alt="分配了对失败构建的调查" title="分配了对失败构建的调查" src="/help/img/teamcity/2019.1/assign-investigation-failed-build.png" id="00fd3411" width="575" height="825"></figure><p></p></li><li class="list__item" id="16d7d2fc"><p id="a42688cf">选择要解决调查的条件：</p><ul class="list _ul"><li class="list__item" id="aa69bd5c"><i id="ed0c8533">固定时自动</i></li><li class="list__item" id="b23a6e30"><p>或者， <i id="a39f30ad">手动</i></p></li></ul><p id="a1128a49">分配了调查的用户以后可以在此窗口<a href="#Marking-Problems-as-Fixed">中将问题标记为已解决</a> 。</p></li><li class="list__item" id="161d9d12"><p id="8b3e6b43">保存调查。</p></li></ol><p id="3318c245">您可以类似地在“ <b id="8fc786b0">构建结果”</b>的“ <b id="8d895a5b">概述”</b>或“ <b id="2df8557d"><a href="working-with-build-results.html#Tests">测试”</a></b>选项卡上分配对失败测试的调查。</p></div><a name="MutingBuildProblems"></a><a name="Muting-Build-Problems"></a><div class="chapter"><h2 id="InvestigatingandMutingBuildFailures-MutingBuildProblems">消除构建问题</h2><p id="ac5b657b">消除特定的构建问题：</p><ol class="list _decimal"><li class="list__item" id="a48a47ba"><p>导航到<a href="working-with-build-results.html">Build Results</a>页面的<b id="d44af1c3">Overview</b>选项卡（或<b id="a62bd5d1">Project Home</b>的<b id="49bab365"><a href="viewing-tests-and-configuration-problems.html#Using-Current-Problems-Tab">Current Problems</a></b>选项卡），单击构建问题旁边的箭头，然后单击<b id="bb90125a">Investigate / Mute</b> 。<br>将打开“ <i id="f8af40c1">调查/静音”</i>对话框。</p></li><li class="list__item" id="4d94136f">选择将问题静音的位置：<ul class="list _ul"><li class="list__item" id="41a73121"><p><i id="d3788cd3">项目范围的</i> ，这可以消除当前项目及其子项目中所有配置的问题。</p></li><li class="list__item" id="47b778f4"><p><i id="53363c3e">选定的构建配置</i> ，使您可以从同一项目中选择特定的构建配置。</p></li></ul></li><li class="list__item" id="6b5773a5">选择要取消静音的条件：<ul class="list _ul"><li class="list__item" id="9e103108"><i id="8c8b4a17">固定时自动</i></li><li class="list__item" id="b370464e"><i id="6671dec3">在特定日期</i></li><li class="list__item" id="40723e0a"><p>或者， <i id="ed941dfe">手动</i></p></li></ul></li><li class="list__item" id="c704cacf"><p>点击<b id="ae1adbb8">保存</b> 。</p></li></ol></div><a name="MutingFailedTests"></a><a name="Muting-Failed-Tests"></a><div class="chapter"><h2 id="InvestigatingandMutingBuildFailures-MutingFailedTests">使测试失败</h2><p id="e9f5f172">您可以在“ <b id="64dbe0e3">生成结果”</b>的“ <b id="36331fe3">概述”</b>或“ <b id="6e2299c7"><a href="working-with-build-results.html#Tests">测试”</a></b>选项卡上一次使一个失败的测试或多个测试<a href="#Muting-Build-Problems">静音</a> ，类似于消除<b id="64dbe0e3">生成</b> <a href="#Muting-Build-Problems">问题</a> 。</p><p id="d838e472"></p><figure><img alt="调查/忽略构建问题" title="调查/忽略构建问题" src="/help/img/teamcity/2019.1/investigate-mute.png" id="03c0f44f" width="583" height="982"></figure><p></p><p id="612f7cdd">静音只会影响在“ <i id="ec5d9e73">至少一个测试失败</i> ”的<a href="build-failure-conditions.html">构建失败条件下失败</a>而在其他条件下<i id="ec5d9e73">失败的</i> <a href="build-failure-conditions.html">构建</a> ：如果任何其他失败条件适用于您的构建（例如，非零退出代码），则该构建仍会即使失败的测试被静音，也会失败。</p><p id="8c4f324f">当某些测试由于已知原因而失败时，此功能很有用，但目前无法修复它们。例如，缺少负责任的开发人员，或者您正在等待系统管理员修复环境。如果测试故意失败，也可以使用该功能：例如，如果所需功能尚未就绪。<br>在所有这些情况下，您都可以忽略此类故障，并避免其他开发人员受到不必要的干扰。</p><p id="d74041b0">当测试被静音时，它<b id="46b35f6e">仍将</b>在以后的版本中<b id="46b35f6e">运行</b> ，但是它的失败不会影响版本状态。</p><p id="e344155f">当测试失败但被静音时，可能需要调整构建脚本以使构建成功。<i id="a99f6c23">如果</i>遇到的唯一错误是测试失败，请确保构建不会因其他构建失败条件而失败（例如， <i id="a99f6c23">“如果构建过程退出代码不为零</i> ，则<i id="a99f6c23">失败”</i> ）。有关更多详细信息，请参见相关问题<a href="http://youtrack.jetbrains.net/issue/TW-16784" rel="noopener noreferrer" data-external="true" target="_blank">TW-16784</a> 。</p></div><a name="MarkingProblemsasFixed"></a><a name="Marking-Problems-as-Fixed"></a><div class="chapter"><h2 id="InvestigatingandMutingBuildFailures-MarkingProblemsasFixed">将问题标记为固定</h2><p id="f3b325a9">被分配了调查的用户可以在与该问题相对应的任何<i id="4c4959c4">调查</i> UI对话框中将调查的问题标记为已修复。<br>问题将标有<img alt="checkmark.png" title="checkmark.png" src="/help/img/teamcity/2019.1/checkmark.png" id="f448d5fe" width="17" height="19" class="inline-icon-17">它出现在所有TeamCity页面上。这样可以在UI中识别潜在的已解决问题，但是如果问题在后续的构建运行中仍然存在，则可以继续进行调查。如果调查的作者打开了<a href="subscribing-to-notifications.html#investigation-is-updated">相应的通知</a> ，则会收到有关此修复的通知。<br>如果未重现问题并且此调查具有“ <i id="e69c783a">固定时自动</i> ”解决条件，则在将调查标记为已修复之后，TeamCity将在以下构建运行中删除调查。</p></div><a name="ViewingInvestigationsandMutes"></a><a name="Viewing-Investigations-and-Mutes"></a><div class="chapter"><h2 id="InvestigatingandMutingBuildFailures-ViewingInvestigationsandMutes">查看调查和静音</h2><p id="d84cafdc">您可以在<b id="5b35684e">项目主页</b>上找到每个项目的所有调查和静音：</p><ul class="list _ul"><li class="list__item" id="3d48d561"><p><b id="11ba05b7">调查</b>标签：查看项目中所有分配的调查</p></li><li class="list__item" id="a4f259a1"><p><b id="b71a0ad0">静音问题</b>选项卡：查看项目中的所有静音问题和测试</p></li></ul><p id="96dc78e0"></p><figure><img alt="调查和静音问题选项卡" title="调查和静音问题选项卡" src="/help/img/teamcity/2019.1/investigations-muted-tabs.png" id="ef61484c" width="1304" height="810"></figure><p></p><p id="08e33653">您可以在此处取消问题和测试的静音，并将调查重新分配给其他用户或<a href="#Marking-Problems-as-Fixed">将其标记为已修复</a> 。</p></div><a name="ViewingMyInvestigations"></a><a name="Viewing-My-Investigations"></a><div class="chapter"><h2 id="InvestigatingandMutingBuildFailures-ViewingMyInvestigations">查看我的调查</h2><p id="3f561195">如果您分配了一项或多项调查，则在TeamCity顶部面板上，您的姓名旁边会出现调查计数器：</p><p id="8834cc5b"></p><figure><img alt="新调查" title="新调查" src="/help/img/teamcity/2019.1/new_investigations.png" id="642cadff" width="200" height="70"></figure><p></p><p id="97c88b45">单击它可以打开“ <b id="633c66d3">我的调查”</b>页面，您可以在其中查看在不同项目中分配给您的所有调查。您可以在此页面上直接管理问题：将它们标记为已修复，重新分配，静音或放弃调查。</p><p id="1d026070">对于每个失败的测试，您可以立即看到：</p><ul class="list _ul"><li class="list__item" id="4d71eca2"><p>当前测试失败的所有构建配置</p></li><li class="list__item" id="14ce7554"><p>当前的堆栈跟踪以及有关测试当前失败的内部版本的信息</p></li><li class="list__item" id="afebe861"><p>有关测试的第一次失败的信息，以及堆栈跟踪和构建</p></li></ul><p id="07f85a89">如果在<a href="managing-your-user-account.html">配置文件设置中</a>启用了“ <i id="db7cd40a">突出显示我的更改和调查</i> ”选项，则分配给您的调查也会在Web UI中<i id="db7cd40a">突出显示</i> 。</p><hr id="eaee306d"><p id="d71043b0"><b id="f064f03d">也可以看看：</b></p><p id="afdc621c"><b id="1ae6d7a7">概念</b> ： <a href="build-configuration.html">构建配置状态</a> | <a href="#Muting-Failed-Tests">使测试失败静音</a><br><b id="906cc64f">用户指南</b> ： <a href="viewing-tests-and-configuration-problems.html">查看测试和配置问题</a></p><hr id="41b6b175"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>