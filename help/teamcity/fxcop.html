<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>FxCop - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="FxCop" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-build-steps.md|Configuring Build Steps/fxcop.md|FxCop" data-main-title="FxCop" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/fxcop.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="FxCop" id="fxcop.md">FxCop</h1><p id="69403ac0">The <a href="https://docs.microsoft.com/en-us/previous-versions/dotnet/netframework-3.0/bb429476(v=vs.80)" data-external="true" target="_blank" rel="noopener noreferrer">FxCop</a> <i id="4a062dc4">Build Runner</i> is intended for inspecting .NET assemblies and reporting possible design, localization, performance, and security improvements. If you want TeamCity to display FxCop reports, you can either configure the corresponding build runner, or import XML reports by means of service messages if you prefer to run the FxCop tool directly from the script.</p><aside class="note " data-title="" rel="69403ac0" id="17f84107"><p id="963e309f">The FxCop build runner requires FxCop installed on the build agent.</p></aside><p id="5c232891">On this page:</p><ul class="list _ul"><li class="list__item" id="fe3df982"><p>The description of the <a href="#FxCop-Build-Runner-Settings">FxCop build runner settings</a></p></li><li class="list__item" id="a28b6576"><p>Details on using <a href="#Using-Service-Messages">dedicated service messages</a></p></li></ul><p id="1d6dfd89">For the list of supported FxCop versions, see <a href="supported-platforms-and-environments.html#Supported-.NET-platform-build-runners">Supported Platforms and Environments</a>.</p><a name="FxCopBuildRunnerSettings"></a><a name="FxCop-Build-Runner-Settings"></a><div class="chapter"><h2 id="FxCop-FxCopBuildRunnerSettings">FxCop Build Runner Settings</h2><a name="FxCopInstallation"></a><a name="FxCop-Installation"></a><div class="chapter"><h3 id="FxCop-FxCopInstallation">FxCop Installation</h3><div class="table-wrapper"><table width="100%" id="37341078"><thead><tr id="ad92d0bc" class="ijRowHead"><th id="5124a40e"><p id="acec405f">Option</p></th><th id="bf9f46dc"><p id="948f8c05">Description</p></th></tr></thead><tbody><tr id="0e5ea926" class="ijRowOdd"><td id="8264b391"><p id="7c8d90e7">FxCop detection mode</p></td><td id="8aad7301"><p id="358580d7">When a build agent is started, it detects automatically whether FxCop is installed. If FxCop is detected, TeamCity defines the <code class="code">%system.FxCopRoot%</code> agent system property. You can also use a custom installation of FxCop or the use FxCop checked in your version control. Depending on the selection, the settings displayed below will vary.</p></td></tr><tr id="841da26e" class="ijRowEven"><td id="8a52359d"><p id="2cc4c3b0">Autodetect installation</p></td><td id="48cff965"><p id="b1300acc">Select to use the FxCop installation on an agent.</p></td></tr><tr id="691aea2b" class="ijRowOdd"><td id="caf5a6a3"><p id="1432f1f3">FxCop version</p></td><td id="ccc68021"><p id="63bd2bb3"><i id="db15e874">The option is available when  is selected.</i> Select one of the options from the dropdown. If you have several versions of FxCop installed on your build agents, it is recommended to select here a specific version of FxCop you want to use to run inspections in your build to avoid inconsistency. As a result, an agent requirement will be created. If you leave the default value of the field ('Any Detected'), TeamCity will use any available agent with FxCop installed. In this case the version of FxCop used in one build may not be the same as the one used in the previous build, thus the number of new problems found will be different from the actual state.</p></td></tr><tr id="9469fc04" class="ijRowEven"><td id="c0c5d74a"><p id="e7d9aff2">Specify installation root</p></td><td id="9bf7e0b4"><p id="750d62d5">Select to use a custom installation of FxCop (not the autodetected one), or if you do not have FxCop installed on the build agent (for example, you can place the FxCop tool in your source control, and check it out with the build sources).</p></td></tr><tr id="ef44d0b0" class="ijRowOdd"><td id="42243d27"><p id="bb27db26">Installation root</p></td><td id="38cfdf93"><p id="2c01113c"><i id="474fbc4b">The option is available when  is selected.</i> Enter the path to the FxCop installation root on the agent machine or the path to an FxCop executable relative to the <a href="build-checkout-directory.html">Build Checkout Directory</a>.</p><aside class="note " data-title="" rel="2c01113c" id="8f601883"><p id="b2df4f6b">If you want to have the <b id="4ee877c0">line numbers information</b> and <b id="33e540a5">Open in IDE</b> features, run an FxCop build on the same machine as your compilation build because FxCop requires the source code to be present to display links to it.</p></aside></td></tr></tbody></table></div></div><a name="Whattoinspect"></a><a name="What-to-inspect"></a><div class="chapter"><h3 id="FxCop-Whattoinspect">What to inspect</h3><div class="table-wrapper"><table width="100%" id="b94398af"><thead><tr id="06f180a5" class="ijRowHead"><th id="541c8a2c"><p id="b2093533">Option</p></th><th id="2d1c8798"><p id="86d8fc8f">Description</p></th></tr></thead><tbody><tr id="ae753e6e" class="ijRowOdd"><td id="19caeffd"><p id="a8debf06">Assemblies</p></td><td id="22b01a00"><p id="938895de">Enter the paths to the assemblies to be inspected (use ant-like wildcards to select files by a mask). FxCop will use default settings to inspect them. The paths should be relative to the <a href="build-checkout-directory.html">Build Checkout Directory</a> and separated by spaces. Enter exclude wildcards to refine the included assemblies list.</p><p id="0845d36a">Note that there is a limitation to the maximum number of assemblies that can be specified here due to <a href="https://support.microsoft.com/en-us/kb/830473" data-external="true" target="_blank" rel="noopener noreferrer">command-line string limitation</a>.</p></td></tr><tr id="c40fae7b" class="ijRowEven"><td id="741c699d"><p id="ff578d9d">FxCop project file</p></td><td id="aca3daf3"><p id="d95a87f9">Enter the path relative to the <a href="build-checkout-directory.html">Build Checkout Directory</a> to an FxCop project.</p></td></tr></tbody></table></div></div><a name="FxCopOptions"></a><a name="FxCop-Options"></a><div class="chapter"><h3 id="FxCop-FxCopOptions">FxCop Options</h3><div class="table-wrapper"><table width="100%" id="4b1effa7"><thead><tr id="5c590a3f" class="ijRowHead"><th id="6113a5c4"><p id="703cd3b0">Option</p></th><th id="4a0c9ea7"><p id="45dcf3d1">Description</p></th></tr></thead><tbody><tr id="512e5fd9" class="ijRowOdd"><td id="0dc9ed2b"><p id="0a6eb6cc">Search referenced assemblies in GAC</p></td><td id="57f9bc7a"><p id="23357229">Search the assemblies referenced by targets in Global Assembly Cache.</p></td></tr><tr id="6a58a0c9" class="ijRowEven"><td id="5fdff6b1"><p id="a1622fb4">Search referenced assemblies in directories</p></td><td id="9ce3dfd5"><p id="9d9e193a">Search the assemblies referenced by targets in the specified directories separated by spaces.</p></td></tr><tr id="12f4d49a" class="ijRowOdd"><td id="f7ef2883"><p id="c976f414">Ignore generated code</p></td><td id="6c843376"><p id="276e1dc3">A new option introduced in FxCop 1.36. Speeds up inspection.</p></td></tr><tr id="e3abfca1" class="ijRowEven"><td id="9eec5897"><p id="af8a7796">Report XSLT file</p></td><td id="9af457f2"><p id="bd319c34">The path to the XSLT transformation file relative to the <a href="build-checkout-directory.html">Build Checkout Directory</a> or absolute on the agent machine. You can use the path to the detected FxCop on the target machine (i.e. <code class="code">%system.FxCopRoot%/Xml/FxCopReport.xsl</code>). When the <b id="18869bf1">Report XSLT file</b> option is set, the build runner will apply an XSLT transform to FxCop XML output and display the resulting HTML in a new <b id="0e7acb2e">FxCop</b> tab on the build results page.</p></td></tr><tr id="c5f64d4d" class="ijRowOdd"><td id="d27b3a17"><p id="6969d871">Additional FxCopCmd options</p></td><td id="173c581d"><p id="2bd74eca">Additional options for calling FxCopCmd executable. All options entered in this field will be added to the beginning of the command line parameters.</p></td></tr></tbody></table></div></div><a name="Buildfailureconditions"></a><a name="Build-failure-conditions"></a><div class="chapter"><h3 id="FxCop-Buildfailureconditions">Build failure conditions</h3><p id="efed2966">Check the box to fail a build on the specified analysis errors. Click <a href="build-failure-conditions.html#Fail-build-on-metric-change">build failure condition</a> to define the number of the errors.</p></div></div><a name="UsingServiceMessages"></a><a name="Using-Service-Messages"></a><div class="chapter"><h2 id="FxCop-UsingServiceMessages">Using Service Messages</h2><p id="17fa20aa">If you prefer to call the FxCop tool directly from the script, not as a build runner, you can use the <code class="code">importData</code> <a href="build-script-interaction-with-teamcity.html#Service-Messages">service messages</a> to import an xml file generated by <a href="http://msdn.microsoft.com/en-us/library/bb429474(VS.80).aspx" data-external="true" target="_blank" rel="noopener noreferrer">the FxCopCmd tool</a> into TeamCity. In this case the FxCop tool results will appear in the <a href="working-with-build-results.html#Code-Inspection-Results">Code Inspection tab</a> of the build results page.</p><p id="2f4e1de6">The <a href="build-script-interaction-with-teamcity.html#Service-Messages">service message</a> format is described below:</p><div class="code-block" data-lang="bash">##teamcity[importData type='FxCop' path='&lt;path_to_the_xml_file&gt;']

</div><aside class="note " data-title="" rel="76dff2f2" id="c91b47e3"><p id="b7f510d0">The TeamCity agent will import the specified xml file in the background. Make sure that the xml file is not deleted right after the <code class="code">importData</code> message is sent.</p></aside><hr id="3b43e64f"><p id="26bdb50c"><b id="ea628d77">See also:</b></p><p id="f5a2173e"><b id="1a8d21d3">Concepts</b>: <a href="build-runner.html">Build Runner</a></p><hr id="abdac9de"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>