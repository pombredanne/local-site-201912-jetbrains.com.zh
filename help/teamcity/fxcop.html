<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>FxCop-帮助|团队城市</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="FxCop" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-build-steps.md|Configuring Build Steps/fxcop.md|FxCop" data-main-title="FxCop" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/fxcop.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="fxcop.md" data-toc="FxCop">FxCop</h1><p id="69403ac0"><a href="https://docs.microsoft.com/en-us/previous-versions/dotnet/netframework-3.0/bb429476(v=vs.80)" rel="noopener noreferrer" data-external="true" target="_blank">FxCop</a> <i id="4a062dc4">Build Runner</i>用于检查.NET程序集并报告可能的设计，本地化，性能和安全性改进。如果希望TeamCity显示FxCop报告，则可以配置相应的构建运行器，或者如果希望直接从脚本中运行FxCop工具，则可以通过服务消息导入XML报告。</p><aside class="note " rel="69403ac0" id="17f84107" data-title=""><p id="963e309f">FxCop构建运行器要求在构建代理上安装FxCop。</p></aside><p id="5c232891">在此页：</p><ul class="list _ul"><li class="list__item" id="fe3df982"><p><a href="#FxCop-Build-Runner-Settings">FxCop构建运行器设置</a>的描述</p></li><li class="list__item" id="a28b6576"><p>有关使用<a href="#Using-Service-Messages">专用服务消息的</a>详细<a href="#Using-Service-Messages">信息</a></p></li></ul><p id="1d6dfd89">有关受支持的FxCop版本的列表，请参阅<a href="supported-platforms-and-environments.html#Supported-.NET-platform-build-runners">受支持的平台和环境</a> 。</p><a name="FxCopBuildRunnerSettings"></a><a name="FxCop-Build-Runner-Settings"></a><div class="chapter"><h2 id="FxCop-FxCopBuildRunnerSettings">FxCop构建运行器设置</h2><a name="FxCopInstallation"></a><a name="FxCop-Installation"></a><div class="chapter"><h3 id="FxCop-FxCopInstallation">FxCop安装</h3><div class="table-wrapper"><table width="100%" id="37341078"><thead><tr id="ad92d0bc" class="ijRowHead"><th id="5124a40e"><p id="acec405f">选项</p></th><th id="bf9f46dc"><p id="948f8c05">描述</p></th></tr></thead><tbody><tr id="0e5ea926" class="ijRowOdd"><td id="8264b391"><p id="7c8d90e7">FxCop检测模式</p></td><td id="8aad7301"><p id="358580d7">启动构建代理后，它将自动检测是否安装了FxCop。如果检测到FxCop，TeamCity将定义<code class="code">%system.FxCopRoot%</code>代理系统属性。您还可以使用FxCop的自定义安装或使用版本控件中选中的FxCop。根据选择，下面显示的设置将有所不同。</p></td></tr><tr id="841da26e" class="ijRowEven"><td id="8a52359d"><p id="2cc4c3b0">自动检测安装</p></td><td id="48cff965"><p id="b1300acc">选择以在代理上使用FxCop安装。</p></td></tr><tr id="691aea2b" class="ijRowOdd"><td id="caf5a6a3"><p id="1432f1f3">FxCop版本</p></td><td id="ccc68021"><p id="63bd2bb3"><i id="db15e874">选择时该选项可用。</i> 从下拉菜单中选择一个选项。如果在构建代理上安装了多个版本的FxCop，建议在此处选择要用于在构建中运行检查的FxCop的特定版本，以避免不一致。结果，将创建一个代理需求。如果保留该字段的默认值（“检测到任何”），TeamCity将使用安装了FxCop的任何可用代理。在这种情况下，一个版本中使用的FxCop版本可能与先前版本中使用的版本不同，因此发现的新问题数量将与实际状态不同。</p></td></tr><tr id="9469fc04" class="ijRowEven"><td id="c0c5d74a"><p id="e7d9aff2">指定安装根目录</p></td><td id="9bf7e0b4"><p id="750d62d5">选择以使用FxCop的自定义安装（不是自动检测到的安装），或者如果您没有在构建代理程序上安装FxCop（例如，可以将FxCop工具放置在源代码管理中，并通过构建源将其检出）。</p></td></tr><tr id="ef44d0b0" class="ijRowOdd"><td id="42243d27"><p id="bb27db26">安装根目录</p></td><td id="38cfdf93"><p id="2c01113c"><i id="474fbc4b">选择时该选项可用。</i> 输入代理计算机上FxCop安装根目录的路径或相对于<a href="build-checkout-directory.html">Build Checkout目录</a>的FxCop可执行文件的路径。</p><aside class="note " rel="2c01113c" id="8f601883" data-title=""><p id="b2df4f6b">如果要获取<b id="4ee877c0">行号信息</b>和“ <b id="33e540a5">在IDE中打开”</b>功能，请在与编译版本相同的计算机上运行FxCop版本，因为FxCop需要提供源代码才能显示指向它的链接。</p></aside></td></tr></tbody></table></div></div><a name="Whattoinspect"></a><a name="What-to-inspect"></a><div class="chapter"><h3 id="FxCop-Whattoinspect">检查什么</h3><div class="table-wrapper"><table width="100%" id="b94398af"><thead><tr id="06f180a5" class="ijRowHead"><th id="541c8a2c"><p id="b2093533">选项</p></th><th id="2d1c8798"><p id="86d8fc8f">描述</p></th></tr></thead><tbody><tr id="ae753e6e" class="ijRowOdd"><td id="19caeffd"><p id="a8debf06">装配体</p></td><td id="22b01a00"><p id="938895de">输入要检查的程序集的路径（使用类似ant的通配符通过掩码选择文件）。FxCop将使用默认设置进行检查。路径应相对于<a href="build-checkout-directory.html">Build Checkout目录，</a>并用空格分隔。输入排除通配符以细化包含的程序集列表。</p><p id="0845d36a">请注意，由于<a href="https://support.microsoft.com/en-us/kb/830473" rel="noopener noreferrer" data-external="true" target="_blank">命令行字符串限制，</a>此处可以指定的最大程序集数量<a href="https://support.microsoft.com/en-us/kb/830473" rel="noopener noreferrer" data-external="true" target="_blank">受到限制</a> 。</p></td></tr><tr id="c40fae7b" class="ijRowEven"><td id="741c699d"><p id="ff578d9d">FxCop项目文件</p></td><td id="aca3daf3"><p id="d95a87f9">输入相对于FxCop项目的<a href="build-checkout-directory.html">Build Checkout目录</a>的路径。</p></td></tr></tbody></table></div></div><a name="FxCopOptions"></a><a name="FxCop-Options"></a><div class="chapter"><h3 id="FxCop-FxCopOptions">FxCop选项</h3><div class="table-wrapper"><table width="100%" id="4b1effa7"><thead><tr id="5c590a3f" class="ijRowHead"><th id="6113a5c4"><p id="703cd3b0">选项</p></th><th id="4a0c9ea7"><p id="45dcf3d1">描述</p></th></tr></thead><tbody><tr id="512e5fd9" class="ijRowOdd"><td id="0dc9ed2b"><p id="0a6eb6cc">在GAC中搜索引用的程序集</p></td><td id="57f9bc7a"><p id="23357229">在全局程序集缓存中搜索目标引用的程序集。</p></td></tr><tr id="6a58a0c9" class="ijRowEven"><td id="5fdff6b1"><p id="a1622fb4">在目录中搜索引用的程序集</p></td><td id="9ce3dfd5"><p id="9d9e193a">在由空格分隔的指定目录中搜索目标引用的程序集。</p></td></tr><tr id="12f4d49a" class="ijRowOdd"><td id="f7ef2883"><p id="c976f414">忽略生成的代码</p></td><td id="6c843376"><p id="276e1dc3">FxCop 1.36中引入了一个新选项。加快检查速度。</p></td></tr><tr id="e3abfca1" class="ijRowEven"><td id="9eec5897"><p id="af8a7796">报告XSLT文件</p></td><td id="9af457f2"><p id="bd319c34">相对于<a href="build-checkout-directory.html">Build Checkout目录</a>或代理计算机上的绝对<a href="build-checkout-directory.html">目录</a>的XSLT转换文件的路径。您可以使用目标计算机上检测到的FxCop的路径（即<code class="code">%system.FxCopRoot%/Xml/FxCopReport.xsl</code> ）。设置“ <b id="18869bf1">报告XSLT文件”</b>选项后，构建运行器将对FxCop XML输出应用XSLT转换，并在构建结果页面上的新<b id="0e7acb2e">FxCop</b>选项卡中显示结果HTML。</p></td></tr><tr id="c5f64d4d" class="ijRowOdd"><td id="d27b3a17"><p id="6969d871">其他FxCopCmd选项</p></td><td id="173c581d"><p id="2bd74eca">调用FxCopCmd可执行文件的其他选项。在此字段中输入的所有选项都将添加到命令行参数的开头。</p></td></tr></tbody></table></div></div><a name="Buildfailureconditions"></a><a name="Build-failure-conditions"></a><div class="chapter"><h3 id="FxCop-Buildfailureconditions">构建失败条件</h3><p id="efed2966">选中该框以使基于指定的分析错误的构建失败。单击<a href="build-failure-conditions.html#Fail-build-on-metric-change">构建失败条件</a>以定义错误的数量。</p></div></div><a name="UsingServiceMessages"></a><a name="Using-Service-Messages"></a><div class="chapter"><h2 id="FxCop-UsingServiceMessages">使用服务信息</h2><p id="17fa20aa">如果您希望直接从脚本而不是作为构建运行器来调用FxCop工具，则可以使用<code class="code">importData</code> <a href="build-script-interaction-with-teamcity.html#Service-Messages">服务消息，</a>以将<a href="http://msdn.microsoft.com/en-us/library/bb429474(VS.80).aspx" rel="noopener noreferrer" data-external="true" target="_blank">FxCopCmd工具</a>生成的xml文件导入TeamCity。在这种情况下，FxCop工具的结果将显示在构建结果页面的<a href="working-with-build-results.html#Code-Inspection-Results">“代码检查”选项卡</a>中。</p><p id="2f4e1de6"><a href="build-script-interaction-with-teamcity.html#Service-Messages">服务消息</a>格式如下：</p><div class="code-block" data-lang="bash">## teamcity [importData type ='FxCop'path =' <path_to_the_xml_file>']</path_to_the_xml_file></div><aside class="note " rel="76dff2f2" id="c91b47e3" data-title=""><p id="b7f510d0">TeamCity代理将在后台导入指定的xml文件。确保未在删除后立即删除xml文件。 <code class="code">importData</code>消息已发送。</p></aside><hr id="3b43e64f"><p id="26bdb50c"><b id="ea628d77">也可以看看：</b></p><p id="f5a2173e"><b id="1a8d21d3">概念</b> ： <a href="build-runner.html">Build Runner</a></p><hr id="abdac9de"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>