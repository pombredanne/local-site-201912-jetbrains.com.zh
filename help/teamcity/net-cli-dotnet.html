<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>.NET CLI（dotnet）-帮助|帮助团队城市</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="viewpage.actionpageId113084145" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-build-steps.md|Configuring Build Steps/net-cli-dotnet.md|.NET CLI (dotnet)" data-main-title=".NET CLI (dotnet)" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/net-cli-dotnet.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="net-cli-dotnet.md" data-toc="viewpage.actionpageId113084145">.NET CLI（dotnet）</h1><p id="175a279a">TeamCity带有.NET CLI工具链的内置支持，可提供.NET CLI（dotnet）构建步骤，构建代理程序上的CLI检测以及在存储库中自动发现构建步骤。</p><p id="d69b09ee">本页提供有关配置.NET CLI（dotnet）运行程序的详细信息。另请参阅相关<a href="https://blog.jetbrains.com/teamcity/2016/11/teamcity-dotnet-core/" rel="noopener noreferrer" data-external="true" target="_blank">博客文章</a> 。</p><p id="f8efac1f">在此页：</p><p id="772b8c41"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#.NETCLI(dotnet)-Requirements">要求</a></li><li class="list__item"><a href="#.NETCLI(dotnet)-BuildRunnerOptions">建立亚军选项</a></li><li class="list__item"><a href="#.NETCLI(dotnet)-DockerSettings">Docker设置</a></li><li class="list__item"><a href="#.NETCLI(dotnet)-CodeCoverage">代码覆盖率</a></li><li class="list__item"><a href="#.NETCLI(dotnet)-AuthenticationinprivateNuGetFeeds">私人NuGet Feed中的身份验证</a></li><li class="list__item"><a href="#.NETCLI(dotnet)-ParametersReportedbyAgent">代理报告的参数</a></li></ul><p></p><a name="Requirements"></a><a name="Requirements"></a><div class="chapter"><h2 id=".NETCLI(dotnet)-Requirements">要求</h2><p id="35a6cc48"><a href="https://dotnet.microsoft.com/download" rel="noopener noreferrer" data-external="true" target="_blank">.NET Core SDK</a>必须安装在构建代理计算机上。</p><p id="42e11cc6">TeamCity按照以下顺序搜索.NET可执行文件：</p><ol class="list _decimal"><li class="list__item" id="0a59a2bf"><p>在环境变量中定义的目录中<code class="code">DOTNET_HOME</code>对于TeamCity代理。例如， <code class="code">DOTNET_HOME=D:\SDK\dotnet\</code> 。</p></li><li class="list__item" id="6f9a40b1">在.NET可执行文件的默认目录中：<ul class="list _ul"><li class="list__item" id="8f360382"><p>视窗： <code class="code">C:\Program Files\dotnet</code>要么<code class="code">C:\Program Files (x86)\dotnet</code>或其他默认程序文件目录（取决于环境变量<code class="code">ProgramW6432</code> ）</p></li><li class="list__item" id="a3b8ffa7"><p>Unix：<code class="code">/usr/share/dotnet</code></p></li><li class="list__item" id="7042194c"><p>苹果电脑：<code class="code">/usr/local/share/dotnet</code></p></li></ul></li><li class="list__item" id="b1918753"><p>在指定的路径中<code class="code">PATH</code>环境变量。</p></li></ol><p id="3e16adaf">TeamCity将使用找到的第一个.NET版本。如果您安装了多个.NET版本，我们建议您在<code class="code">DOTNET_HOME</code>变量。</p></div><a name="BuildRunnerOptions"></a><a name="Build-Runner-Options"></a><div class="chapter"><h2 id=".NETCLI(dotnet)-BuildRunnerOptions">建立亚军选项</h2><div class="table-wrapper"><table width="100%" id="15f3322a"><thead><tr id="5e880bda" class="ijRowHead"><th id="4405e2ae"><p id="46124bec">选项</p></th><th id="c2ea6087"><p id="79fe631b">描述</p></th></tr></thead><tbody><tr id="3333fb8e" class="ijRowOdd"><td id="3c26a564"><p id="10985fbb">命令</p></td><td id="52c35f13"><p id="9e21dd9f">选择一个<code class="code">dotnet</code>下拉菜单中的命令。根据所选命令，以下某些选项会有所不同。当前支持的命令是：</p><ul class="list _ul"><li class="list__item" id="c9a3bb96"><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-build" rel="noopener noreferrer" data-external="true" target="_blank">建立</a></li><li class="list__item" id="44f87f5a"><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-clean" rel="noopener noreferrer" data-external="true" target="_blank">清洁</a></li><li class="list__item" id="b067e416"><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-pack" rel="noopener noreferrer" data-external="true" target="_blank">包</a></li><li class="list__item" id="9cdd77d7"><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-publish" rel="noopener noreferrer" data-external="true" target="_blank">发布</a></li><li class="list__item" id="4a6e356a"><p><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-restore" rel="noopener noreferrer" data-external="true" target="_blank">恢复</a><br>（需要.NET CLI 2.1.400+进行<a href="">私人供稿中的身份验证</a> ）</p></li><li class="list__item" id="7ec4278f"><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-run" rel="noopener noreferrer" data-external="true" target="_blank">跑</a></li><li class="list__item" id="630f87fc"><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-test" rel="noopener noreferrer" data-external="true" target="_blank">测试</a></li><li class="list__item" id="f5d8cd4c"><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-vstest" rel="noopener noreferrer" data-external="true" target="_blank">vstest</a></li><li class="list__item" id="6f2ece26"><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-msbuild" rel="noopener noreferrer" data-external="true" target="_blank">msbuild</a></li><li class="list__item" id="461f9442"><p><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-nuget-delete" rel="noopener noreferrer" data-external="true" target="_blank">nuget删除</a><br>（需要.NET CLI 2.1.500+进行<a href="#Authentication-in-private-NuGet-Feeds">私人供稿中的身份验证</a> ）</p></li><li class="list__item" id="e87ed01f"><p><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-nuget-push" rel="noopener noreferrer" data-external="true" target="_blank">努吉推</a><br>（需要.NET CLI 2.1.500+进行<a href="#Authentication-in-private-NuGet-Feeds">私人供稿中的身份验证</a> ）</p></li></ul></td></tr><tr id="a7478ff7" class="ijRowEven"><td id="1cf9a4cd"><p id="518230d2">专案</p></td><td id="a5d7c68e"><p id="77f02474">指定项目和解决方案的路径。支持通配符。支持参数引用。如果构建完成，则可以在此处使用文件/目录选择器。</p></td></tr><tr id="93e9889e" class="ijRowOdd"><td id="ecf49972"><p id="dd1cf4f1">工作目录</p></td><td id="da2aa463"><p id="47221547">可选，设置是否不同于检出目录。支持参数引用。如果构建完成，则可以在此处使用文件/目录选择器。</p></td></tr><tr id="869e553d" class="ijRowEven"><td id="8eb82693"><p id="61cc8cb8">构架</p></td><td id="bb9136a1"><p id="09867ea1">指定目标框架，例如netcoreapp或netstandard。支持参数引用。</p></td></tr><tr id="b11e6acc" class="ijRowOdd"><td id="7a320031"><p id="0cf12469">组态</p></td><td id="6103a28d"><p id="05e3e237">指定目标配置，例如Release或Debug。支持参数引用。</p></td></tr><tr id="90a41981" class="ijRowEven"><td id="3e179291"><p id="0edd6d68">运行</p></td><td id="a1a3559c"><p id="cdb3ae24">指定目标运行时。支持参数引用。</p></td></tr><tr id="1f2a9e02" class="ijRowOdd"><td id="96b44252"><p id="2bc6269a">输出目录</p></td><td id="a6069704"><p id="08091714">放置输出的目录。支持参数引用。如果构建完成，则可以在此处使用文件/目录选择器。</p></td></tr><tr id="9369f845" class="ijRowEven"><td id="c40f99a6"><p id="ee9aa2b3">版本后缀</p></td><td id="7610750c"><p id="18f4305c">定义的值<code class="code">$(VersionSuffix)</code>项目中的属性。支持参数引用。</p></td></tr><tr id="5652fb6d" class="ijRowOdd"><td id="ccc38b86"><p id="ad80e90d">命令行参数</p></td><td id="63e0dab2"><p id="58accd83">输入<a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-build?tabs=netcore2x" rel="noopener noreferrer" data-external="true" target="_blank">其他命令行参数</a> <code class="code">dotnet</code> 。</p></td></tr><tr id="ce4b3625" class="ijRowEven"><td id="8ac586ec"><p id="484b45d8">记录冗长</p></td><td id="71da2fb6"><p id="21cd983e">从<default>，最小，正常，详细或诊断中选择。</default></p></td></tr></tbody></table></div></div><a name="DockerSettings"></a><a name="Docker-Settings"></a><div class="chapter"><h2 id=".NETCLI(dotnet)-DockerSettings">Docker设置</h2><p id="9cd983b2"><b id="73df9895">从TeamCity 2018.1开始</b> ，.NET CLI构建步骤可以在<a href="docker-wrapper.html">指定的Docker容器中</a>运行。</p></div><a name="CodeCoverage"></a><a name="Code-Coverage"></a><div class="chapter"><h2 id=".NETCLI(dotnet)-CodeCoverage">代码覆盖率</h2><p id="96d6e0ed">支持<a href="jetbrains-dotcover.html">JetBrains dotCover</a>作为覆盖工具， <code class="code">msbuild</code> ， <code class="code">test</code>和<code class="code">vstest</code>命令。</p></div><a name="AuthenticationinprivateNuGetFeeds"></a><a name="Authentication-in-private-NuGet-Feeds"></a><div class="chapter"><h2 id=".NETCLI(dotnet)-AuthenticationinprivateNuGetFeeds">私人NuGet Feed中的身份验证</h2><p id="930e2515">TeamCity允许您使用私有的NuGet提要进行身份验证。在<a href="nuget.html#Authentication-in-private-NuGet-Feeds">NuGet中</a>阅读更多内容。</p></div><a name="ParametersReportedbyAgent"></a><a name="Parameters-Reported-by-Agent"></a><div class="chapter"><h2 id=".NETCLI(dotnet)-ParametersReportedbyAgent">代理报告的参数</h2><p id="ac5dcafe">启动时，构建代理报告以下参数：</p><div class="table-wrapper"><table width="100%" id="8ca673fd"><thead><tr id="0f5a3f5d" class="ijRowHead"><th id="bf8835a4"><p id="a8412f81">参数</p></th><th id="c2efae8b"><p id="1c58bed9">描述</p></th></tr></thead><tbody><tr id="3d242c36" class="ijRowOdd"><td id="da237b2e"><p id="800fe0d9"><code class="code">DotNetCLI</code></p></td><td id="1c2d2eba"><p id="7387eb9c">.NET CLI版本。</p></td></tr><tr id="355bd937" class="ijRowEven"><td id="5b09c198"><p id="7f33f24a"><code class="code">DotNetCLI_Path</code></p></td><td id="f452dddc"><p id="3197a27e">.NET CLI可执行文件的路径。</p></td></tr><tr id="9f3acb59" class="ijRowOdd"><td id="cf559789"><p id="2f018e3a"><code class="code">DotNetCoreSDKx.x_Path</code></p></td><td id="a461fc9c"><p id="c63d501e">.NET Core SDK版本。</p></td></tr></tbody></table></div><hr id="086db8cd"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>