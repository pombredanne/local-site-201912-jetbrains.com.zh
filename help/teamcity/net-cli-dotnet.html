<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>.NET CLI (dotnet) - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="viewpage.actionpageId113084145" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-build-steps.md|Configuring Build Steps/net-cli-dotnet.md|.NET CLI (dotnet)" data-main-title=".NET CLI (dotnet)" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/net-cli-dotnet.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="viewpage.actionpageId113084145" id="net-cli-dotnet.md">.NET CLI (dotnet)</h1><p id="175a279a">TeamCity comes with the built-in support of the .NET CLI toolchain providing .NET CLI (dotnet) build steps, CLI detection on the build agents, and autodiscovery of build steps in your repository.</p><p id="d69b09ee">This page provides details on configuring the .NET CLI (dotnet) runner. Also see the related <a href="https://blog.jetbrains.com/teamcity/2016/11/teamcity-dotnet-core/" data-external="true" target="_blank" rel="noopener noreferrer">blog post</a>.</p><p id="f8efac1f">On this page:</p><p id="772b8c41"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#.NETCLI(dotnet)-Requirements">Requirements</a></li><li class="list__item"><a href="#.NETCLI(dotnet)-BuildRunnerOptions">Build Runner Options</a></li><li class="list__item"><a href="#.NETCLI(dotnet)-DockerSettings">Docker Settings</a></li><li class="list__item"><a href="#.NETCLI(dotnet)-CodeCoverage">Code Coverage</a></li><li class="list__item"><a href="#.NETCLI(dotnet)-AuthenticationinprivateNuGetFeeds">Authentication in private NuGet Feeds</a></li><li class="list__item"><a href="#.NETCLI(dotnet)-ParametersReportedbyAgent">Parameters Reported by Agent</a></li></ul></p><a name="Requirements"></a><a name="Requirements"></a><div class="chapter"><h2 id=".NETCLI(dotnet)-Requirements">Requirements</h2><p id="35a6cc48"><a href="https://dotnet.microsoft.com/download" data-external="true" target="_blank" rel="noopener noreferrer">.NET Core SDK</a> must be installed on your build agent machines.</p><p id="42e11cc6">TeamCity searches for the .NET executable files in the following order:</p><ol class="list _decimal"><li class="list__item" id="0a59a2bf"><p>In the directory defined in the environment variable <code class="code">DOTNET_HOME</code> for a TeamCity agent. For example, <code class="code">DOTNET_HOME=D:\SDK\dotnet\</code>.</p></li><li class="list__item" id="6f9a40b1">In the default directory for the .NET executable file:<ul class="list _ul"><li class="list__item" id="8f360382"><p>Windows: <code class="code">C:\Program Files\dotnet</code> or <code class="code">C:\Program Files (x86)\dotnet</code>, or other default program files directory (depending on the environment variable <code class="code">ProgramW6432</code>)</p></li><li class="list__item" id="a3b8ffa7"><p>Unix: <code class="code">/usr/share/dotnet</code></p></li><li class="list__item" id="7042194c"><p>Mac: <code class="code">/usr/local/share/dotnet</code></p></li></ul></li><li class="list__item" id="b1918753"><p>In paths specified in the <code class="code">PATH</code> environment variable.</p></li></ol><p id="3e16adaf">TeamCity will use the first .NET version it finds. If you have several .NET versions installed, we recommend that you specify the most recent version in the <code class="code">DOTNET_HOME</code> variable.</p></div><a name="BuildRunnerOptions"></a><a name="Build-Runner-Options"></a><div class="chapter"><h2 id=".NETCLI(dotnet)-BuildRunnerOptions">Build Runner Options</h2><div class="table-wrapper"><table width="100%" id="15f3322a"><thead><tr id="5e880bda" class="ijRowHead"><th id="4405e2ae"><p id="46124bec">Option</p></th><th id="c2ea6087"><p id="79fe631b">Description</p></th></tr></thead><tbody><tr id="3333fb8e" class="ijRowOdd"><td id="3c26a564"><p id="10985fbb">Command</p></td><td id="52c35f13"><p id="9e21dd9f">Select a <code class="code">dotnet</code> command from the drop-down menu. Depending on the selected command, some of the options below will vary. The currently supported commands are:</p><ul class="list _ul"><li class="list__item" id="c9a3bb96"><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-build" data-external="true" target="_blank" rel="noopener noreferrer">build</a></li><li class="list__item" id="44f87f5a"><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-clean" data-external="true" target="_blank" rel="noopener noreferrer">clean</a></li><li class="list__item" id="b067e416"><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-pack" data-external="true" target="_blank" rel="noopener noreferrer">pack</a></li><li class="list__item" id="9cdd77d7"><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-publish" data-external="true" target="_blank" rel="noopener noreferrer">publish</a></li><li class="list__item" id="4a6e356a"><p><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-restore" data-external="true" target="_blank" rel="noopener noreferrer">restore</a><br>(requires .NET CLI 2.1.400+ for <a href="">authentication in private feeds</a>)</p></li><li class="list__item" id="7ec4278f"><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-run" data-external="true" target="_blank" rel="noopener noreferrer">run</a></li><li class="list__item" id="630f87fc"><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-test" data-external="true" target="_blank" rel="noopener noreferrer">test</a></li><li class="list__item" id="f5d8cd4c"><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-vstest" data-external="true" target="_blank" rel="noopener noreferrer">vstest</a></li><li class="list__item" id="6f2ece26"><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-msbuild" data-external="true" target="_blank" rel="noopener noreferrer">msbuild</a></li><li class="list__item" id="461f9442"><p><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-nuget-delete" data-external="true" target="_blank" rel="noopener noreferrer">nuget delete</a><br>(requires .NET CLI 2.1.500+ for <a href="#Authentication-in-private-NuGet-Feeds">authentication in private feeds</a>)</p></li><li class="list__item" id="e87ed01f"><p><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-nuget-push" data-external="true" target="_blank" rel="noopener noreferrer">nuget push</a><br>(requires .NET CLI 2.1.500+ for <a href="#Authentication-in-private-NuGet-Feeds">authentication in private feeds</a>)</p></li></ul></td></tr><tr id="a7478ff7" class="ijRowEven"><td id="1cf9a4cd"><p id="518230d2">Projects</p></td><td id="a5d7c68e"><p id="77f02474">Specify paths to projects and solutions. Wildcards are supported. Parameter references are supported. If you have a finished build, you can use the file/directory chooser here.</p></td></tr><tr id="93e9889e" class="ijRowOdd"><td id="ecf49972"><p id="dd1cf4f1">Working directory</p></td><td id="da2aa463"><p id="47221547">Optional, set if differs from the checkout directory. Parameter references are supported. If you have a finished build, you can use the file/directory chooser here.</p></td></tr><tr id="869e553d" class="ijRowEven"><td id="8eb82693"><p id="61cc8cb8">Framework</p></td><td id="bb9136a1"><p id="09867ea1">Specify the target framework, for example, netcoreapp or netstandard. Parameter references are supported.</p></td></tr><tr id="b11e6acc" class="ijRowOdd"><td id="7a320031"><p id="0cf12469">Configuration</p></td><td id="6103a28d"><p id="05e3e237">Specify the target configuration, for example, Release or Debug. Parameter references are supported.</p></td></tr><tr id="90a41981" class="ijRowEven"><td id="3e179291"><p id="0edd6d68">Runtime</p></td><td id="a1a3559c"><p id="cdb3ae24">Specify the target runtime. Parameter references are supported.</p></td></tr><tr id="1f2a9e02" class="ijRowOdd"><td id="96b44252"><p id="2bc6269a">Output directory</p></td><td id="a6069704"><p id="08091714">The directory where to place outputs. Parameter references are supported. If you have a finished build, you can use the file/directory selector here.</p></td></tr><tr id="9369f845" class="ijRowEven"><td id="c40f99a6"><p id="ee9aa2b3">Version suffix</p></td><td id="7610750c"><p id="18f4305c">Defines the value of the <code class="code">$(VersionSuffix)</code> property in the project. Parameter references are supported.</p></td></tr><tr id="5652fb6d" class="ijRowOdd"><td id="ccc38b86"><p id="ad80e90d">Command line parameters</p></td><td id="63e0dab2"><p id="58accd83">Enter <a href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-build?tabs=netcore2x" data-external="true" target="_blank" rel="noopener noreferrer">additional command line parameters</a> for <code class="code">dotnet</code>.</p></td></tr><tr id="ce4b3625" class="ijRowEven"><td id="8ac586ec"><p id="484b45d8">Logging verbosity</p></td><td id="71da2fb6"><p id="21cd983e">Select from the &lt;Default&gt;, Minimal, Normal, Detailed or Diagnostic.</p></td></tr></tbody></table></div></div><a name="DockerSettings"></a><a name="Docker-Settings"></a><div class="chapter"><h2 id=".NETCLI(dotnet)-DockerSettings">Docker Settings</h2><p id="9cd983b2"><b id="73df9895">Since TeamCity 2018.1</b>, the .NET CLI build step can be run in a <a href="docker-wrapper.html">specified Docker container</a>.</p></div><a name="CodeCoverage"></a><a name="Code-Coverage"></a><div class="chapter"><h2 id=".NETCLI(dotnet)-CodeCoverage">Code Coverage</h2><p id="96d6e0ed"><a href="jetbrains-dotcover.html">JetBrains dotCover</a> is supported as a coverage tool for the <code class="code">msbuild</code>, <code class="code">test</code>, and <code class="code">vstest</code> commands.</p></div><a name="AuthenticationinprivateNuGetFeeds"></a><a name="Authentication-in-private-NuGet-Feeds"></a><div class="chapter"><h2 id=".NETCLI(dotnet)-AuthenticationinprivateNuGetFeeds">Authentication in private NuGet Feeds</h2><p id="930e2515">TeamCity allows you to authenticate using private NuGet feeds. Read more in <a href="nuget.html#Authentication-in-private-NuGet-Feeds">NuGet</a>.</p></div><a name="ParametersReportedbyAgent"></a><a name="Parameters-Reported-by-Agent"></a><div class="chapter"><h2 id=".NETCLI(dotnet)-ParametersReportedbyAgent">Parameters Reported by Agent</h2><p id="ac5dcafe">When starting, the build agent reports the following parameters:</p><div class="table-wrapper"><table width="100%" id="8ca673fd"><thead><tr id="0f5a3f5d" class="ijRowHead"><th id="bf8835a4"><p id="a8412f81">Parameter</p></th><th id="c2efae8b"><p id="1c58bed9">Description</p></th></tr></thead><tbody><tr id="3d242c36" class="ijRowOdd"><td id="da237b2e"><p id="800fe0d9"><code class="code">DotNetCLI</code></p></td><td id="1c2d2eba"><p id="7387eb9c">The .NET CLI version.</p></td></tr><tr id="355bd937" class="ijRowEven"><td id="5b09c198"><p id="7f33f24a"><code class="code">DotNetCLI_Path</code></p></td><td id="f452dddc"><p id="3197a27e">The path to .NET CLI executable.</p></td></tr><tr id="9f3acb59" class="ijRowOdd"><td id="cf559789"><p id="2f018e3a"><code class="code">DotNetCoreSDKx.x_Path</code></p></td><td id="a461fc9c"><p id="c63d501e">The .NET Core SDK version.</p></td></tr></tbody></table></div><hr id="086db8cd"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>