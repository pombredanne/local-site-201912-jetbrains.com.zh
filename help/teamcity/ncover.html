<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>NCover-帮助|团队城市</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="NCover" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-unit-testing-and-code-coverage.md|Configuring Unit Testing and Code Coverage/configuring-.net-code-coverage.md|Configuring .NET Code Coverage/ncover.md|NCover" data-main-title="NCover" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/ncover.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="ncover.md" data-toc="NCover">NCover</h1><p id="9f8e2f0a">TeamCity支持通过NCover（1.x和3.x）对通过TeamCity NUnit测试运行程序运行的NUnit测试进行代码覆盖，可以通过以下方式之一进行配置：Web UI， <a href="teamcity-nunit-test-launcher.html">TeamCity NUnit测试启动器</a> ， <a href="nunit-for-msbuild.html">用于MSBuild的</a> <a href="nunit-for-msbuild.html">NUnit，</a> <a href="nunit-for-msbuild.html">用于NBuild的</a> <a href="nunit-for-msbuild.html">NUnit MSBuild</a> ， <a href="nunit-for-nant-build-runner.html">用于NAnt Build Runner的NUnit</a> 。</p><p id="a403a1a5">在此页：</p><p id="9cc468ab"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#NCover-ConfiguringNCover1.x">配置NCover 1.x</a></li><li class="list__item"><a href="#NCover-ConfiguringNCover3.x">配置NCover 3.x</a></li><li class="list__item"><a href="#NCover-ReportingNCoverResultsManually">手动报告NCover结果</a></li></ul><p></p><p id="857febec"><b id="1a90da34">重要笔记</b></p><ul class="list _ul"><li class="list__item" id="255e0ab0"><p id="744c9d52">要启动coverage，应在运行coverage版本的代理上安装NCover和NCoverExplorer。</p></li><li class="list__item" id="4e6b98db"><p id="5e71f893">您无需对构建脚本进行任何修改即可启用覆盖率。</p></li><li class="list__item" id="882d4368"><p id="80d833c7">您无需将任何NCover / NCoverExplorer参数明确传递给TeamCity NUnit测试运行程序。</p></li><li class="list__item" id="f1afa524"><p id="f584fdaa">NCover支持在x86平台下启动的.NET Framework 2.0和3.5（NCover 3.x也支持x64平台并与.NET Framework 4.0一起使用）。确保您为NCover和NUnit使用了相同的平台。</p></li></ul><a name="ConfiguringNCover1.x"></a><a name="Configuring-NCover-1.x"></a><div class="chapter"><h2 id="NCover-ConfiguringNCover1.x">配置NCover 1.x</h2><p id="145aa145">确保您的NUnit测试在x86下运行。</p><p id="2d2b2f62">要配置NCover 1.x：</p><ol class="list _decimal"><li class="list__item" id="0b4c3fef"><p>创建/编辑构建配置时，请转到“ <b id="8e51cafb">构建步骤”</b>页面。</p></li><li class="list__item" id="92463e68"><p>添加支持NCover的构建步骤之一（ <a href="net-process-runner.html">.NET Process Runner</a> ， <a href="msbuild.html">MSBuild</a> ， <a href="mspec.html">MSpec</a> ， <a href="nant.html">NAnt</a> ， <a href="nunit.html">NUnit</a> ），配置单元测试。</p></li><li class="list__item" id="b03ad44a"><p>在<b id="226f63a8">.NET Coverage工具中</b>选择<b id="02ca8713">NCover（1.x）</b> 。</p></li><li class="list__item" id="8c219a56"><p>设置NCover选项-请参阅以下可用选项的说明。</p></li></ol><div class="table-wrapper"><table width="100%" id="f3bdf1aa"><thead><tr id="f178711b" class="ijRowHead"><th id="9f83a3ef"><p id="3bcf5611">选项</p></th><th id="aac70284"><p id="b238e6b7">描述</p></th></tr></thead><tbody><tr id="5880ba36" class="ijRowOdd"><td id="1d8ff1e4"><p id="6e2f621d">NCover之路</p></td><td id="f2e21b44"><p id="a95f0b76">指定安装在构建代理上的NCover的路径，或使用<code class="code">%system.ncover.v1.path%</code>引用构建代理程序上自动检测到的NCover。</p></td></tr><tr id="b2011a8d" class="ijRowEven"><td id="7277910e"><p id="c0ae9fab">NCoverExplorer的路径</p></td><td id="301dc672"><p id="93443b56">在构建代理上指定NCoverExplorer的路径。</p></td></tr><tr id="05b38c0c" class="ijRowOdd"><td id="ed377379"><p id="4f77e4c9">其他NCover参数</p></td><td id="75fe222f"><p id="ec85d9d3">输入要传递给NCover的其他参数。</p><aside class="note " rel="ec85d9d3" id="5203dce8" data-title=""><ul class="list _ul"><li class="list__item" id="cf10e687"><p>不要输入可在Web UI中配置的参数。</p></li><li class="list__item" id="101adb05"><p>不要为生成的报告指定输出路径。它由TeamCity自动配置。</p></li></ul></aside></td></tr><tr id="5688f8de" class="ijRowEven"><td id="1f2eed79"><p id="9a12c604">装配体轮廓</p></td><td id="3aabb0c7"><p id="f12cc261">指定以换行符分隔的程序集名称（不包含路径和扩展名），或将该字段保留为空白以概要分析所有程序集。<br>相当于<code class="code">//a</code> NCover。控制台选项。</p></td></tr><tr id="5cf92985" class="ijRowOdd"><td id="d761b579"><p id="3841de42">排除属性</p></td><td id="f6ac5c0f"><p id="f3e7f05c">指定要从覆盖范围统计信息中排除的具有定义的.NET属性的类和方法。<br>相当于<code class="code">//ea</code> NCover。控制台选项</p></td></tr><tr id="a4fd9aae" class="ijRowEven"><td id="46ce0727"><p id="e6db40fd">报告类型</p></td><td id="74a052bc"><p id="60b94cbe">选择报告类型。有关详细信息，请参阅<a href="http://docs.ncover.com/ref/2-0/ncoverexplorer-console/coverage-reporting#report" rel="noopener noreferrer" data-external="true" target="_blank">NCoverExplorer文档</a> 。</p></td></tr><tr id="402741c3" class="ijRowOdd"><td id="454e67b1"><p id="ed5a6c20">排序</p></td><td id="74c35463"><p id="444de840">选择首选的排序选项。有关详细信息，请参阅<a href="http://docs.ncover.com/ref/2-0/ncoverexplorer-console/coverage-reporting#sort" rel="noopener noreferrer" data-external="true" target="_blank">NCoverExplorer文档</a> 。</p></td></tr><tr id="9c05177f" class="ijRowEven"><td id="432b80c3"><p id="09754dc7">其他NCoverExplorer参数</p></td><td id="3198597a"><p id="015c864a">指定要传递给NCoverExplorer的其他参数。不要在此处输入报告的输出路径，也不要指定用户界面中具有相应选项的参数。</p></td></tr></tbody></table></div></div><a name="ConfiguringNCover3.x"></a><a name="Configuring-NCover-3.x"></a><div class="chapter"><h2 id="NCover-ConfiguringNCover3.x">配置NCover 3.x</h2><p id="6e72433c">确保您使用的NCover和NUnit指定了相同的平台。</p><p id="90172705">要配置NCover 3.x：</p><ol class="list _decimal"><li class="list__item" id="c3fb76b7"><p>创建/编辑构建配置时，请转到“构建步骤”页面。</p></li><li class="list__item" id="481a9c74"><p>添加支持NCover的构建步骤之一（ <a href="net-process-runner.html">.NET Process Runner</a> ， <a href="msbuild.html">MSBuild</a> ， <a href="mspec.html">MSpec</a> ， <a href="nant.html">NAnt</a> ， <a href="nunit.html">NUnit</a> ），配置单元测试。</p></li><li class="list__item" id="bdb8f875"><p>在<b id="a0aabccd">.NET Coverage工具中</b>选择<b id="a038dc2e">NCover（3.x）</b> 。</p></li><li class="list__item" id="04f02245"><p>设置NCover选项-请参阅以下可用选项的说明。</p></li></ol><div class="table-wrapper"><table width="100%" id="69e25961"><thead><tr id="9e0a02e4" class="ijRowHead"><th id="766eead2"><p id="12e4a8eb">选项</p></th><th id="a8126294"><p id="bcb042fe">描述</p></th></tr></thead><tbody><tr id="10856584" class="ijRowOdd"><td id="36f3b7ae"><p id="8f6b2f19">NCover 3的路径</p></td><td id="b0f3f969"><p id="1d9bbe62">指定NCover的路径。或者，使用<code class="code">%system.ncover.v3.x86.path%</code>要么<code class="code">%system.ncover.v3.x64.path%</code>参考构建代理上自动检测到的NCover 3。</p></td></tr><tr id="972a0ec9" class="ijRowEven"><td id="ab3c515e"><p id="83a0c6a9">在下运行NCover</p></td><td id="1a4f7eaa"><p id="7e9317b3">选择首选平台以在-x86或x64下运行coverage。确保所选平台与用于NUnit测试的平台一致。</p></td></tr><tr id="8f381553" class="ijRowOdd"><td id="4ca2f42c"><p id="487a7254">NCover参数</p></td><td id="e0ca8fe0"><p id="7a1ca3f0">指定NCover参数，即程序集以分析和覆盖工具特定的参数。不要在此处输入可以在UI中指定的参数，也不要在此处输入生成的报告和NCover流程参数的输出路径。使用<code class="code">//ias.*</code>覆盖所有装配体。</p></td></tr><tr id="1cc042d2" class="ijRowEven"><td id="f058c363"><p id="19dc3a6b">NCover报告参数</p></td><td id="f359d2d8"><p id="1ec1de32">指定其他NCover报告参数，输出路径除外。使用<code class="code">or FullCoverageReport:Html:{teamcity.report.path}</code>得到报告。</p></td></tr></tbody></table></div></div><a name="ReportingNCoverResultsManually"></a><a name="Reporting-NCover-Results-Manually"></a><div class="chapter"><h2 id="NCover-ReportingNCoverResultsManually">手动报告NCover结果</h2><p id="ece637de">如果.NET代码覆盖范围是由构建脚本收集的，并且需要在TeamCity内部报告（例如<a href="rake.html">Rake</a> ，或者如果您通过除TeamCity NUnit Test Launcher以外的其他测试启动器运行测试），则可以通过一种方法使TeamCity了解覆盖率数据。在“ <a href="manually-configuring-reporting-coverage.html">手动配置报告范围”中</a>了解更多信息。</p><hr id="76f90185"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>