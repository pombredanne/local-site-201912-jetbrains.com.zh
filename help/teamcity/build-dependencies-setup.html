<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Build Dependencies Setup - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Build Dependencies Setup" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-dependencies.md|Configuring Dependencies/build-dependencies-setup.md|Build Dependencies Setup" data-main-title="Build Dependencies Setup" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/build-dependencies-setup.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Build Dependencies Setup" id="build-dependencies-setup.md">Build Dependencies Setup</h1><p id="523a6cbc">This page is intended to give you the general idea on how dependencies work in TeamCity based on an example. For the dependencies description, see <a href="dependent-build.html">Dependent Build</a>.</p><p id="d53f4ebc">On this page:</p><p id="e8996f34"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#BuildDependenciesSetup-Introduction">Introduction</a></li><li class="list__item"><a href="#BuildDependenciesSetup-Basics">Basics</a></li><li class="list__item"><a href="#BuildDependenciesSetup-ArtifactDependencies">Artifact Dependencies</a></li><li class="list__item"><a href="#BuildDependenciesSetup-SnapshotDependencies">Snapshot Dependencies</a><ul class="list _bullet"><li class="list__item"><a href="#BuildDependenciesSetup-WhentoCreateBuildChain">When to Create Build Chain</a></li><li class="list__item"><a href="#BuildDependenciesSetup-BuildChainsinTeamCityUI">Build Chains in TeamCity UI</a></li><li class="list__item"><a href="#BuildDependenciesSetup-HowSnapshotDependenciesWork">How Snapshot Dependencies Work</a></li><li class="list__item"><a href="#BuildDependenciesSetup-Example1">Example 1</a><ul class="list _bullet"><li class="list__item"><a href="#BuildDependenciesSetup-WhatHappensWhenBuildAisTriggered">What Happens When Build A is Triggered</a></li><li class="list__item"><a href="#BuildDependenciesSetup-WhatHappensWhenBuildBisTriggered">What Happens When Build B is Triggered</a></li></ul></li><li class="list__item"><a href="#BuildDependenciesSetup-Example2">Example 2</a></li><li class="list__item"><a href="#BuildDependenciesSetup-AdvancedSnapshotDependenciesSetup">Advanced Snapshot Dependencies Setup</a><ul class="list _bullet"><li class="list__item"><a href="#BuildDependenciesSetup-Reusingbuilds">Reusing builds</a></li><li class="list__item"><a href="#BuildDependenciesSetup-TurnedoffEnforcedRevisionsSynchronization">Turned off Enforced Revisions Synchronization</a></li><li class="list__item"><a href="#BuildDependenciesSetup-Runbuildonthesameagent">Run build on the same agent</a></li><li class="list__item"><a href="#BuildDependenciesSetup-Buildbehaviorifdependencyhasfailed">Build behavior if dependency has failed</a></li><li class="list__item"><a href="#BuildDependenciesSetup-Triggeronchangesinsnapshotdependencies">Trigger on changes in snapshot dependencies</a></li><li class="list__item"><a href="#BuildDependenciesSetup-Parametersindependentbuilds">Parameters in dependent builds</a></li></ul></li></ul></li><li class="list__item"><a href="#BuildDependenciesSetup-MiscellaneousNotesonUsingDependencies">Miscellaneous Notes on Using Dependencies</a></li></ul></p><a name="Introduction"></a><a name="Introduction"></a><div class="chapter"><h2 id="BuildDependenciesSetup-Introduction">Introduction</h2><p id="d9d6d2b2">In many cases it is convenient to use the output of one build in another, as well as to run a number of builds sequentially on the same sources. Consider a typical example: you have a cross-platform project that has to be tested under Windows and macOS before you get the production build. The best workflow for this simple case will be to:</p><ol class="list _decimal"><li class="list__item" id="71bb2457"><p>Compile your project.</p></li><li class="list__item" id="86033ddd"><p>Run tests under Windows and macOS simultaneously on the same sources</p></li><li class="list__item" id="e0e42714"><p>Build a release version on the same sources, of course, if tests have passed under both OSs.</p></li></ol><p id="aa845f7a">This can be easily achieved by configuring dependencies between your build configurations in TeamCity that would look like this:</p><p id="03baf771"><figure><img alt="compile test pack" title="compile test pack" src="/help/img/teamcity/2019.1/compile-test-pack.png" id="dd4a4504" width="350" height="161"></figure></p><p id="736f9c4b">Where <i id="4983cdde">compile</i>, <i id="44c3edc7">tests (win)</i>, <i id="b0d7e308">tests (mac)</i>, and <i id="b040a509">pack setup</i> are build configurations, and naturally the tests <b id="64a77399">depend on</b> the compilation, which means they should wait till the compilation is ready.</p></div><a name="Basics"></a><a name="Basics"></a><div class="chapter"><h2 id="BuildDependenciesSetup-Basics">Basics</h2><p id="a1c6cf9d">Generally known as the <i id="8e244ba9">build pipeline</i>, in TeamCity a similar concept is referred to as a <i id="557ad21d"><a href="build-chain.html">build chain</a></i>. Before getting into details on how this works in TeamCity, let's clarify the legend behind diagrams given here (including the one in the introduction):</p><div class="table-wrapper"><table width="100%" id="cc34ee1d"><thead><tr id="46229a47" class="ijRowHead"><th width="150px" id="254719af"></th><th id="285bd001"></th></tr></thead><tbody><tr id="5b13c82d" class="ijRowOdd"><td id="e8181797"><p id="2a24edd3"><img alt="buildConfiguration" title="buildConfiguration" src="/help/img/teamcity/2019.1/buildConfiguration.png" id="06862ee8" width="70" height="31" class="inline-icon-70"></p></td><td id="70400e6c"><p id="1fbe5144">A build configuration.</p></td></tr><tr id="e2521ca0" class="ijRowEven"><td id="96708e1d"><p id="8792ff46"><img alt="dependency.png" title="dependency.png" src="/help/img/teamcity/2019.1/dependency.png" id="539c91fa" width="201" height="31" class="inline-icon-201"></p></td><td id="a3faf5b8"><p id="e72a6018"><a href="#Snapshot-Dependencies">Snapshot dependency</a> between 2 build configurations. Note that the arrow shows the sequence of triggering build configurations, the <a href="build-chain.html">build chain</a> flow, meaning that B is executed before A. However, the dependencies are configured in the opposite direction (A snapshot-depends on B). The arrows are drawn this way because in the <a href="#Build-Chains-in-TeamCity-UI">TeamCity UI</a> you can find the visual representation of build chains which are always displayed according to the build chain flow.<br>Typically, when adding a snapshot dependency, you also add an artifact dependency with the "build from the same chain" option from the same configuration to transfer the previous build results and use them in the build as well.</p></td></tr><tr id="0e8085f7" class="ijRowOdd"><td id="598e220e"><p id="7dbdc0d3"><img alt="artifactDependency.png" title="artifactDependency.png" src="/help/img/teamcity/2019.1/artifactDependency.png" id="82d1f6dd" width="201" height="31" class="inline-icon-201"></p></td><td id="fa447480"><p id="9511f6a3"><a href="#Artifact-Dependencies">Artifact dependency</a>. The arrow shows the artifacts flow, the dependency is configured in the opposite direction.</p></td></tr></tbody></table></div><p id="ddc66fb1">As you noticed, there are 2 types of dependencies in TeamCity: <b id="97a62965">artifact</b> dependencies and <b id="60478a24">snapshot</b> dependencies. In two words, the first one allows using the output of one build in another, while the second one can trigger builds from several build configurations in a specific order, but on the same sources.<br>These two dependencies are often configured together because an artifact dependency doesn't affect the way builds are triggered, while a snapshot dependency itself doesn't reuse artifacts, and sometimes you may need only one of those.</p><p id="4e3ceaaf">Dependencies are configured on the dedicated page of a build configuration settings.</p><p id="7e425af7">Now, let's see what you can do with artifact and snapshot dependencies, and how exactly they work.</p></div><a name="ArtifactDependencies"></a><a name="Artifact-Dependencies"></a><div class="chapter"><h2 id="BuildDependenciesSetup-ArtifactDependencies">Artifact Dependencies</h2><p id="d254c686">An <i id="2c20d2dd">artifact dependency</i> allows reusing the output of one build (or a part of it) in another.</p><p id="c587bf27"><img alt="artifactDependency" title="artifactDependency" src="/help/img/teamcity/2019.1/artifactDependency.png" id="8a08ac05" width="150" height="31" class="inline-icon-150"></p><p id="87b10fa2">If build configuration <b id="c7fa58e8">A</b> has an artifact dependency on <b id="d589f2bf">B</b>, then the artifacts of <b id="cd56a473">B</b> are downloaded to a build agent before a build of <b id="4f659435">A</b> starts. Note that you can flexibly adjust <a href="artifact-dependencies.html">artifact rules</a> to configure which artifacts should be taken and where exactly they should be placed.</p><p id="0208c6f8">If for some reason you need to store artifact dependency information together with your codebase and not in TeamCity, you can configure <a href="artifact-dependencies.html#Configuring-Artifact-Dependencies-Using-Ant-Build-Script">Ivy Ant tasks</a> to get the artifacts in your build script.</p><p id="6fa17bc4">If both snapshot and artifact dependency are configured, and the '<i id="83e5f4a9">Build from the same chain</i>' option is selected in the artifact dependency settings, TeamCity ensures that artifacts are downloaded from the same-sources build.</p></div><a name="SnapshotDependencies"></a><a name="Snapshot-Dependencies"></a><div class="chapter"><h2 id="BuildDependenciesSetup-SnapshotDependencies">Snapshot Dependencies</h2><p id="073e5cf5">A <i id="146a5eb0">snapshot dependency</i> is a dependency between two build configurations that allows launching builds from both build configurations <b id="74fa05de">in a specific order</b> and ensure they use the <b id="b15f98bf">same sources snapshot</b> (sources revisions corresponding to the same moment).</p><p id="9749d6ff">When you have a number of builds interconnected by snapshot dependencies, they form a <b id="996abefe"><a href="build-chain.html">build chain</a></b>.</p><a name="WhentoCreateBuildChain"></a><a name="When-to-Create-Build-Chain"></a><div class="chapter"><h3 id="BuildDependenciesSetup-WhentoCreateBuildChain">When to Create Build Chain</h3><p id="4321461b">The most common use case for creating a <a href="build-chain.html">build chain</a> is running the same test suite of your project on different platforms. For example, you may need to have a release build and want to make sure the tests run correctly on different platforms and environments. For this purpose, you can instruct TeamCity to run an integration build first, and after that to run a release build, if the integration one was successful.</p><p id="2475e5ce">Another case is when your tests take too long to run, so you have to extract them into a separate build configuration, but you also need to make sure they use the same sources snapshot.</p></div><a name="BuildChainsinTeamCityUI"></a><a name="Build-Chains-in-TeamCity-UI"></a><div class="chapter"><h3 id="BuildDependenciesSetup-BuildChainsinTeamCityUI">Build Chains in TeamCity UI</h3><p id="2edffb07">Once you have snapshot dependencies defined and at least one <a href="build-chain.html">build chain</a> was triggered, the <b id="7a1e45d2">Build Chains</b> tab appears on the <b id="53a83b61">Project Home</b> page and on the <b id="b305e3e8">Home</b> pages of the related build configurations, providing a visual representation of all build chains and a way to re-run any chain step manually, using the same set of sources pulled originally. <figure><img alt="Build-Chains1.png" title="Build-Chains1.png" src="/help/img/teamcity/2019.1/Build-Chains1.png" id="0f93a033" width="1755" height="542"></figure> <a href="build-chain.html">Learn more</a></p></div><a name="HowSnapshotDependenciesWork"></a><a name="How-Snapshot-Dependencies-Work"></a><div class="chapter"><h3 id="BuildDependenciesSetup-HowSnapshotDependenciesWork">How Snapshot Dependencies Work</h3><p id="79b15fc6">To get an idea of how snapshot dependencies work, think of module dependencies, because these concepts are similar. However, let's start with the basics. Let's assume, we have a <a href="build-chain.html">build chain</a>:</p><p id="aa807c12"><img alt="a1 a2 an" title="a1 a2 an" src="/help/img/teamcity/2019.1/a1-a2-an.png" id="97540384" width="300" height="31" class="inline-icon-300"></p><ol class="list _decimal"><li class="list__item" id="1e16818e"><p>If a build of A1 is triggered, the whole build chain A1...AN is added to the <a href="build-queue.html">build queue</a>, but <b id="075dcf3c">not vice versa!</b> - if build AN is triggered, it doesn't affect anyhow the build chain, only AN is run.</p></li><li class="list__item" id="c5f85e3d"><p>Builds run <b id="4e89b014">sequentially starting from AN to A1</b>. Build A(k-1) won't start until build Ak finishes successfully.</p></li><li class="list__item" id="c50481d8"><p>All builds in the chain will use the same sources snapshot, i.e. with explicit specification of the sources revision, that is calculated at the moment when the build chain is added to the queue.</p></li></ol><p id="538ace8a">Now let's go into details and examples.</p></div><a name="Example1"></a><a name="Example-1"></a><div class="chapter"><h3 id="BuildDependenciesSetup-Example1">Example 1</h3><p id="0d7a0f73">Let's assume we have the following <a href="build-chain.html">build chain</a> with no extra options - plain snapshot dependencies.</p><p id="75ae9b6f"><img alt="ABC" title="ABC" src="/help/img/teamcity/2019.1/ABC.png" id="724f9a13" width="250" height="31" class="inline-icon-250"></p><a name="WhatHappensWhenBuildAisTriggered"></a><a name="What-Happens-When-Build-A-is-Triggered"></a><div class="chapter"><h4 id="BuildDependenciesSetup-WhatHappensWhenBuildAisTriggered">What Happens When Build A is Triggered</h4><ol class="list _decimal"><li class="list__item" id="81aea850"><p>TeamCity resolves the whole build chain and queues all builds - A, B and C. TeamCity knows that the builds are to run in a strict order, so it won't run build A until build B is successfully finished, and it won't run build B until build C is successfully finished.</p></li><li class="list__item" id="13b328a1"><p>When the builds are added to the queue, TeamCity starts checking for changes in the entire build chain and synchronizes them - all builds have to start with the same sources snapshot.<br>Note that if the build configurations connected with a snapshot dependency <a href="configuring-vcs-roots.html#VCS-Roots-in-TeamCity">share the same set of VCS roots</a>, all builds will run on the same sources. Otherwise, if the VCS roots are different, changes in the VCS will correspond to the same moment in time.</p></li><li class="list__item" id="6d622a43"><p>Once build C has finished, build B starts, and so on. If build C failed, TeamCity won't further execute builds from the chain by default, but this behavior is <a href="snapshot-dependencies.html#on-failed-dependency">configurable</a>.</p></li></ol></div><a name="WhatHappensWhenBuildBisTriggered"></a><a name="What-Happens-When-Build-B-is-Triggered"></a><div class="chapter"><h4 id="BuildDependenciesSetup-WhatHappensWhenBuildBisTriggered">What Happens When Build B is Triggered</h4><p id="20d3c9b8">The same process will take place for build chain B-&gt;C. Build A won't be affected and won't run.</p></div></div><a name="Example2"></a><a name="Example-2"></a><div class="chapter"><h3 id="BuildDependenciesSetup-Example2">Example 2</h3><p id="9d17b287"><figure><img alt="B1 B2 A" title="B1 B2 A" src="/help/img/teamcity/2019.1/B1-B2-A.png" id="5412313a" width="160" height="161"></figure></p><p id="d129eb90">When the final build A is triggered, TeamCity resolves the build chain and queues all builds - A, B1 and B2. Build A won't start until both B1 and B2 are ready.<br>In this case it doesn't matter which build - B1 or B2 - starts first. As in the first example, when all builds are added to the queue, TeamCity checks for changes in the entire build chain and synchronizes them.</p></div><a name="AdvancedSnapshotDependenciesSetup"></a><a name="Advanced-Snapshot-Dependencies-Setup"></a><div class="chapter"><h3 id="BuildDependenciesSetup-AdvancedSnapshotDependenciesSetup">Advanced Snapshot Dependencies Setup</h3><a name="Reusingbuilds"></a><a name="Reusing-builds"></a><div class="chapter"><h4 id="BuildDependenciesSetup-Reusingbuilds">Reusing builds</h4><p id="6138fc60">All builds belonging to the <a href="build-chain.html">build chain</a> are placed in the <a href="build-queue.html">queue</a>. But, instead of enforcing the run of all builds from a build chain, TeamCity can check whether there are already suitable builds, i.e. finished builds that used the required sources snapshot. The matching queued builds will not be run and will be <a href="build-queue.html#Build-Queue-Optimization-by-TeamCity">dropped from the queue</a>, and TeamCity will link the dependency to the "suitable" builds. To enable this, select '<i id="fc0beaa9">Do not run new build if there is a suitable one</i>' when configuring snapshot dependency options.</p><p id="50f7e897">Another option that allows you to control how builds are re-used is called "<i id="d24eab3f">Only use successful builds from suitable ones</i>" and it may help when there's a suitable build, but it isn't successful. Normally, when there's a failed build in a chain, TeamCity doesn't proceed with the rest of the chain. However, with this option enabled, TeamCity will run this failed build on these sources one more time. When is this helpful? For example, when the build failure was caused by a problem when connecting to a VCS.</p></div><a name="TurnedoffEnforcedRevisionsSynchronization"></a><a name="Turned-off-Enforced-Revisions-Synchronization"></a><div class="chapter"><h4 id="BuildDependenciesSetup-TurnedoffEnforcedRevisionsSynchronization">Turned off Enforced Revisions Synchronization</h4><p id="b3ca2039">If you disable the "<i id="05d2d480"><a href="snapshot-dependencies.html#enforce-rev-sync">Enforce revisions synchronization</a></i>" option when creating a snapshot dependency, TeamCity will be able to use different revisions for chain parts when a build is promoted from one part to another (read more in <a href="build-chain.html#Disabling-Revisions-Synchronization-Between-Chain-Parts">Build Chain</a>).</p><p id="34e67b06">Let's explore the example of a <a href="deployment-build-configuration.html">deployment chain</a>:</p><p id="12f405ba"><img alt="dis enf rev sync" title="dis enf rev sync" src="/help/img/teamcity/2019.1/dis-enf-rev-sync.png" id="795f74c5" width="350" height="31" class="inline-icon-350"></p><p id="9f252d7c">with the following build configurations:</p><ul class="list _ul"><li class="list__item" id="736aada5"><p>D: compilation</p></li><li class="list__item" id="34bb9f7e"><p>C: integration testing</p></li><li class="list__item" id="d5f08402"><p>B: system testing</p></li><li class="list__item" id="d078cdec"><p>A: deployment</p></li></ul><p id="a0425634">Here, the "<i id="b3e26e32">Enforce Revisions Synchronization</i>" option is disabled in a snapshot dependency of build B, while C and A have snapshot dependencies with this option enabled (default state). Based on these settings, TeamCity will synchronize revisions between D and C, as well as between B and A, but it will be able to use different revisions for chain parts D-C and B-A.</p><p id="3953abe4">In our example, D and C have revision 1, B has revision 2, and A has revision 3.</p><p id="9565795a">If you want to run an older compilation build D using the latest deployment configuration A while skipping integration testing C, you can promote build D directly to B. TeamCity will run D using revision 1; then it will synchronize B with the newer revision of A and run B and A using revision 3.</p><p id="0391e5d2">By enabling and disabling this option for dependencies of different build configurations in a chain, you can get more control over your setup and make it more flexible.</p><p id="b4390685">To prevent conflicts between revisions, avoid configuring chains where the dependent build (A) must synchronize revisions with its several direct dependency builds (B) and (C), and these builds have different states of the "<i id="7af887a6">Enforce Revisions Synchronization</i>" option in their snapshot dependencies on some other build (D).<br>Use the following valid chains instead:</p><p id="be2f83d7">1. Synchronization is enabled for the D-B-A build flow but disabled for D-C-A.</p><p id="24b54337"><figure><img alt="valid snap flow1" title="valid snap flow1" src="/help/img/teamcity/2019.1/valid-snap-flow1.png" id="c8a1503d" width="240" height="171"></figure></p><p id="eef7f58f">2. Synchronization is enabled for D-B and D-C but disabled for B-A and C-A.</p><p id="65f95a70"><figure><img alt="valid snap flow2" title="valid snap flow2" src="/help/img/teamcity/2019.1/valid-snap-flow2.png" id="d77ffd19" width="240" height="171"></figure></p></div><a name="Runbuildonthesameagent"></a><a name="Run-build-on-the-same-agent"></a><div class="chapter"><h4 id="BuildDependenciesSetup-Runbuildonthesameagent">Run build on the same agent</h4><p id="121d3472">This option was designed for the cases when a build from the build chain modifies system environment, and the next build relies on that system state and thus has to run on the same build agent.</p></div><a name="Buildbehaviorifdependencyhasfailed"></a><a name="Build-behavior-if-dependency-has-failed"></a><div class="chapter"><h4 id="BuildDependenciesSetup-Buildbehaviorifdependencyhasfailed">Build behavior if dependency has failed</h4><p id="70b25bc5">It is possible to <a href="snapshot-dependencies.html#on-failed-dependency">configure</a> the final build behavior if its dependency has failed.</p></div><a name="Triggeronchangesinsnapshotdependencies"></a><a name="Trigger-on-changes-in-snapshot-dependencies"></a><div class="chapter"><h4 id="BuildDependenciesSetup-Triggeronchangesinsnapshotdependencies">Trigger on changes in snapshot dependencies</h4><a name="trigger-on-ssdep-chngs"></a><p id="4e6ddda2">The VCS build trigger has another <a href="configuring-vcs-triggers.html#Trigger-a-build-on-changes-in-snapshot-dependencies">option</a> that alters triggering behavior for a build chain. With this options enabled, the whole build chain will be triggered even if changes are detected in dependencies, not in the final build.</p><p id="1010318c">Let's take a build chain from the example: <code class="code">pack setup</code> – depends on – <code class="code">tests</code> – depends on – <code class="code">compile</code>.</p><p id="7c0ad5b8"><figure><img alt="compile test pack" title="compile test pack" src="/help/img/teamcity/2019.1/compile-test-pack.png" id="6a5b4f15" width="300" height="161"></figure></p><p id="bae8df4f">With the VCS Trigger set up in the <code class="code">pack setup</code> configuration,  the whole build chain is usually triggered when TeamCity detects changes in <code class="code">pack setup</code>; changes in <code class="code">compile</code> will trigger <code class="code">compile</code> only and not the whole chain. If you want the whole chain to be triggered on a VCS change in <code class="code">compile</code>, add a VCS trigger with the "<i id="1cd61fcf">Trigger on changes in snapshot dependencies</i>" <a href="configuring-vcs-triggers.html#Trigger-a-build-on-changes-in-snapshot-dependencies">option</a> enabled to the final build configuration of the chain, <code class="code">pack setup</code>. This will not change the order in which builds are executed, but will only trigger the whole build chain, if there is a change in any of snapshot dependencies. In this setup, no VCS triggers are required for the <code class="code">compile</code> or <code class="code">tests</code> build configuration.</p><p id="b7c3d416"><a name="show-changes-from-dependencies"></a><a name="BuildDependenciesSetup-show-changes-from-dependencies"></a></p><p id="6fb64c46"><b id="e6356f35">Changes from Dependencies</b></p><p id="cc804b07">For a build configuration with snapshot dependencies, you can enable showing of changes from these dependencies transitively. The setting is called "<i id="39d7783d">Show changes from snapshot dependencies</i>" and is available in the advanced options of the "Version Control Settings" step of the build configuration administration pages.</p><p id="716593f5">Enabling this setting affects pending changes of a build configuration, builds changes in builds history, the change log and issue log. Changes from dependencies are marked with <img alt="deps_changes_marker.gif" title="deps_changes_marker.gif" src="/help/img/teamcity/2019.1/deps_changes_marker.gif" id="c5dc4bd2" width="16" height="16" class="inline-icon-16">. For example:</p><p id="08d54343"><figure><img alt="changes popup" title="changes popup" src="/help/img/teamcity/2019.1/changes_popup.png" id="e4b584d4" width="350" height="226"></figure></p><p id="a0ac7477">With this setting enabled, the <a href="configuring-schedule-triggers.html">Schedule Trigger</a> with a "Trigger build only if there are pending changes" option will consider changes from dependencies too.</p></div><a name="Parametersindependentbuilds"></a><a name="Parameters-in-dependent-builds"></a><div class="chapter"><h4 id="BuildDependenciesSetup-Parametersindependentbuilds">Parameters in dependent builds</h4><p id="2e8b7877">TeamCity provides the ability to use properties provided by the builds the current build depends on (via a snapshot or artifact dependency). When build A depends on build B, you can pass properties from build B to build A, i.e. properties can be passed only in the direction of the build chain flow and not vice versa.<br>For the details on how to use parameters of the previous build in chain, refer to the <a href="predefined-build-parameters.html#Dependencies-Properties">Dependencies Properties</a> section.</p></div></div></div><a name="MiscellaneousNotesonUsingDependencies"></a><a name="Miscellaneous-Notes-on-Using-Dependencies"></a><div class="chapter"><h2 id="BuildDependenciesSetup-MiscellaneousNotesonUsingDependencies">Miscellaneous Notes on Using Dependencies</h2><p id="ee0813a7"><b id="dec5e2c2">Build chain and clean-up</b></p><p id="6d8c4205">By default, TeamCity preserves builds that are a part of a chain from clean-up, but you can switch off the option. Refer to the <a href="clean-up.html">Clean-Up</a> description for more details.</p><p id="0c4dcfdb"><b id="1e052ae8">Artifact dependency and clean-up</b></p><p id="4f819e42">Artifacts may not be <a href="clean-up.html">cleaned</a> if they were downloaded by other builds and these builds are not yet cleaned up. For a build configuration with configured artifact dependencies, you can specify whether the artifacts downloaded by this configuration from other builds can be cleaned or not. This setting is available on the <a href="clean-up.html">cleanup policies</a> page.</p><hr id="e04b7f4a"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>