<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Patterns For Accessing Build Artifacts - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Patterns For Accessing Build Artifacts" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/patterns-for-accessing-build-artifacts.md|Patterns For Accessing Build Artifacts" data-main-title="Patterns For Accessing Build Artifacts" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/patterns-for-accessing-build-artifacts.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Patterns For Accessing Build Artifacts" id="patterns-for-accessing-build-artifacts.md">Patterns For Accessing Build Artifacts</h1><aside class="warning " data-title="" rel="patterns-for-accessing-build-artifacts.md" id="c6e5a4a3"><p id="8b435a59">It is recommended to use the TeamCity <a href="rest-api.html#Build-Artifacts">REST API</a> for accessing artifacts from scripts, as the REST API provides build selection facilities and allows listing artifacts.</p></aside><p id="3d25c2fd">This section is preserved for <b id="d70ec5ec">backward-compatibility</b> with the previous TeamCity versions and for some specific functionality.</p><p id="6b093044">Check the following information as well:</p><ul class="list _ul"><li class="list__item" id="aa6a93a2"><p>If you need to access the artifacts in your builds, consider using the TeamCity's built-in <a href="dependent-build.html#Artifact-Dependency">Artifact Dependency</a> feature.</p></li><li class="list__item" id="d1a2f49e"><p>You can also download artifacts from TeamCity using the <a href="artifact-dependencies.html#Configuring-Artifact-Dependencies-Using-Ant-Build-Script">Ivy</a> dependency manager.</p></li><li class="list__item" id="4eefb6b2"><p>For artifact downloads from outside TeamCity builds, consider using <a href="rest-api.html">REST API</a>.</p></li><li class="list__item" id="a3bffb16"><p>See also <a href="accessing-server-by-http.html">Accessing Server by HTTP</a> on basic rules covering HTTP access from scripts.</p></li></ul><p id="a4ea1d33"><b id="17f0bdb2">This page covers</b>:</p><p id="21e047b7"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#PatternsForAccessingBuildArtifacts-ObtainingArtifacts">Obtaining Artifacts</a></li><li class="list__item"><a href="#PatternsForAccessingBuildArtifacts-ObtainingArtifactsfromanArchive">Obtaining Artifacts from an Archive</a></li><li class="list__item"><a href="#PatternsForAccessingBuildArtifacts-ObtainingArtifactsfromaBuildScript">Obtaining Artifacts from a Build Script</a></li><li class="list__item"><a href="#PatternsForAccessingBuildArtifacts-LinkstotheArtifactsContainingtheTeamCityBuildNumber">Links to the Artifacts Containing the TeamCity Build Number</a></li></ul></p><a name="ObtainingArtifacts"></a><a name="Obtaining-Artifacts"></a><div class="chapter"><h2 id="PatternsForAccessingBuildArtifacts-ObtainingArtifacts">Obtaining Artifacts</h2><p id="e68bc680"><b id="a5986bea">To download artifacts of the latest builds (last finished, successful or pinned)</b>, use the following paths:</p><div class="code-block" data-lang="bash">/repository/download/BUILD_TYPE_EXT_ID/.lastFinished/ARTIFACT_PATH
/repository/download/BUILD_TYPE_EXT_ID/.lastSuccessful/ARTIFACT_PATH
/repository/download/BUILD_TYPE_EXT_ID/.lastPinned/ARTIFACT_PATH

</div><p id="3a2add58"><b id="01ebfa7a">To download artifacts by the <a href="working-with-build-results.html#Internal-Build-ID">build id</a></b>, use:</p><div class="code-block" data-lang="bash">/repository/download/BUILD_TYPE_EXT_ID/BUILD_ID:id/ARTIFACT_PATH

</div><p id="e8af068c"><b id="1d154728">To download artifacts by the build number</b>, use:</p><div class="code-block" data-lang="bash">
/repository/download/BUILD_TYPE_EXT_ID/BUILD_NUMBER/ARTIFACT_PATH

</div><p id="c04f9185"><b id="bbe1906a">To download artifacts from the latest build with a specific tag</b>, use:</p><div class="code-block" data-lang="bash">/repository/download/BUILD_TYPE_EXT_ID/BUILD_TAG.tcbuildtag/ARTIFACT_PATH

</div><p id="eb007944"><b id="3e051197">To download all artifacts in a .zip archive</b>, use:</p><div class="code-block" data-lang="bash">/repository/downloadAll/BUILD_TYPE_EXT_ID/BUILD_SPECIFICATION

</div><p id="2c6d6d53">where</p><ul class="list _ul"><li class="list__item" id="e5add36f"><p><b id="7edc4a0a">BUILD_TYPE_EXT_ID</b> is a <a href="configuring-general-settings.html">build configuration ID</a>.</p></li><li class="list__item" id="94717470"><p><b id="2b5648cb">BUILD_SPECIFICATION</b> can be <code class="code">.lastFinished</code>, <code class="code">.lastSuccessful</code> or <code class="code">.lastPinned</code>, specific <code class="code">buildNumber</code> or <a href="working-with-build-results.html#Internal-Build-ID">build id</a> in format <code class="code">BUILD_ID:id</code>.</p></li><li class="list__item" id="90c53867"><p><b id="7a6abacb">ARTIFACT_PATH</b> is a path to the artifact on the TeamCity server. This path can contain a <code class="code">{build.number}</code> pattern (<code class="code">%7Bbuild.number%7D</code>) which will be replaced by TeamCity with the build number of the build whose artifact is retrieved. By default, the archive with all artifacts does not include <a href="build-artifact.html#Hidden-Artifacts">hidden artifact</a>. To include them, add "<code class="code">?showAll=true</code>" at the end of the corresponding URL.To download artifact from the last finished, last successful, last pinned or tagged build in a specific branch, add the "<code class="code">?branch=&lt;branch_name&gt;</code>" parameter at the end of the corresponding URL.</p></li></ul></div><a name="ObtainingArtifactsfromanArchive"></a><a name="Obtaining-Artifacts-from-an-Archive"></a><div class="chapter"><h2 id="PatternsForAccessingBuildArtifacts-ObtainingArtifactsfromanArchive">Obtaining Artifacts from an Archive</h2><p id="e8c740ae">TeamCity allows obtaining a file from an archive from the build artifacts directory by means of the following URL patterns:</p><div class="code-block" data-lang="bash">/repository/download/BUILD_TYPE_EXT_ID/BUILD_SPECIFICATION/&lt;archive&gt;!/PATH_WITHIN_ARCHIVE

</div><ul class="list _ul"><li class="list__item" id="64a3fb24"><p><b id="ceb4d5eb">BUILD_TYPE_EXT_ID</b> is a <a href="configuring-general-settings.html">build configuration ID</a>.</p></li><li class="list__item" id="407a2c93"><p><b id="4002b0c8">BUILD_SPECIFICATION</b> can be <code class="code">.lastFinished</code>, <code class="code">.lastPinned</code>, <code class="code">.lastSuccessful</code>, specific <code class="code">buildNumber</code> or <a href="working-with-build-results.html#Internal-Build-ID">build id</a> in format <code class="code">BUILD_ID:id</code>.</p></li><li class="list__item" id="05929ae6"><p><b id="a7634222">PATH_WITHIN_ARCHIVE</b> is a path to a file within a zip/7-zip/jar/tar.gz archive on TeamCity server.Following archive types are supported (case-insensitive):</p></li><li class="list__item" id="14d16bc7"><p>.zip</p></li><li class="list__item" id="fee10388"><p>.7z</p></li><li class="list__item" id="9a7c157e"><p>.jar</p></li><li class="list__item" id="ca20c950"><p>.war</p></li><li class="list__item" id="78dbe1ee"><p>.ear</p></li><li class="list__item" id="5b9713c6"><p>.nupkg</p></li><li class="list__item" id="1e0e51ef"><p>.sit</p></li><li class="list__item" id="48fc906f"><p>.apk</p></li><li class="list__item" id="1ac56b67"><p>.tar.gz</p></li><li class="list__item" id="1533350b"><p>.tgz</p></li><li class="list__item" id="bbb78922"><p>.tar.gzip</p></li><li class="list__item" id="9f528740"><p>.tar</p></li></ul></div><a name="ObtainingArtifactsfromaBuildScript"></a><a name="Obtaining-Artifacts-from-a-Build-Script"></a><div class="chapter"><h2 id="PatternsForAccessingBuildArtifacts-ObtainingArtifactsfromaBuildScript">Obtaining Artifacts from a Build Script</h2><p id="48467af8">It is often required to download artifacts of some build configuration by tools like <b id="7edcdc76">wget</b> or another downloader which does not support HTML login page. TeamCity asks for authentication if you accessing artifacts repository.</p><p id="cf1cf411"><b id="09a1305b">To authenticate correctly using token-based auth from a build script</b>, you have to pass your personal <a href="managing-your-user-account.html#Managing-Access-Tokens">access token</a> in the HTTP header <code class="code">Authorization: Bearer &lt;token-value&gt;</code>.</p><p id="01a764ce"><b id="d0eb69fa">To authenticate correctly using basic auth from a build script</b>, you have to change URLs (add the <code class="code">/httpAuth/</code> prefix to the URL):</p><div class="code-block" data-lang="bash">/httpAuth/repository/download/BUILD_TYPE_EXT_ID/.lastFinished/ARTIFACT_PATH

</div><p id="3d048b5e">Basic authentication is required for accessing artifacts by this URLs with the <code class="code">/httpAuth/</code> prefix.</p><p id="20be13eb">You can use existing TeamCity username and password in basic authentication settings, but consider using <code class="code">teamcity.auth.userId</code>/<code class="code">teamcity.auth.password</code> system properties as credentials for the download artifacts request: this way TeamCity will have a way to record that one build used artifacts of another and will display that on build's Dependencies tab.</p><p id="d2f41d03"><b id="f69767cb">To enable downloading an artifact with guest user login</b>, you can use either of the following methods:</p><ul class="list _ul"><li class="list__item" id="31ae6976"><p id="90462fcd">Use old URLs without the <code class="code">/httpAuth/</code> prefix, but with added <code class="code">guest=1</code> parameter. For example:</p><div class="code-block" data-lang="bash">/repository/download/BUILD_TYPE_EXT_ID/.lastFinished/ARTIFACT_PATH?guest=1

</div></li><li class="list__item" id="c2623e6f"><p id="a25da6e7">Add the <code class="code">/guestAuth</code> prefix to the URLs, instead of using <code class="code">guest=1</code> parameter. For example:</p><div class="code-block" data-lang="bash">/guestAuth/repository/download/BUILD_TYPE_EXT_ID/.lastFinished/ARTIFACT_PATH

</div></li></ul><p id="5b77c08a">In this case you will not be asked for authentication. The list of the artifacts can be found in <code class="code">/repository/download/BUILD_TYPE_EXT_ID/.lastFinished/teamcity-ivy.xml</code>.</p></div><a name="LinkstotheArtifactsContainingtheTeamCityBuildNumber"></a><a name="Links-to-the-Artifacts-Containing-the-TeamCity-Build-Number"></a><div class="chapter"><h2 id="PatternsForAccessingBuildArtifacts-LinkstotheArtifactsContainingtheTeamCityBuildNumber">Links to the Artifacts Containing the TeamCity Build Number</h2><p id="c16835b3">You can use <code class="code">{build.number}</code> (%7Bbuild.number%7D in URL) as a shortcut to current build number in the artifact file name. For example:</p><div class="code-block" data-lang="bash">http://teamcity.yourdomain.com/repository/download/MyConfExtId/.lastFinished/TeamCity-%7Bbuild.number%7D.exe

</div><hr id="60fd4cb9"><p id="1fccaa2b"><b id="b819cf6c">See also:</b></p><p id="81b1d5e8"><b id="ad36e168">Concepts</b>: <a href="build-artifact.html">Build Artifact</a> | <a href="authentication-modules.html">Authentication Modules</a><br><b id="8d5e4513">Administrator's Guide</b>: <a href="configuring-dependencies.html">Retrieving artifacts in builds</a><br><b id="d3769bf6">Extending TeamCity</b>: <a href="accessing-server-by-http.html">Accessing Server by HTTP</a></p><hr id="bbff6458"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>