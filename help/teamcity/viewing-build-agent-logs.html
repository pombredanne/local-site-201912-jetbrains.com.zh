<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>查看生成代理日志-帮助|帮助团队城市</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Viewing Build Agent Logs" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/teamcity-configuration-and-maintenance.md|TeamCity Configuration and Maintenance/build-agents-configuration-and-maintenance.md|Build Agents Configuration and Maintenance/viewing-build-agent-logs.md|Viewing Build Agent Logs" data-main-title="Viewing Build Agent Logs" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/viewing-build-agent-logs.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="viewing-build-agent-logs.md" data-toc="Viewing Build Agent Logs">查看构建代理日志</h1><p id="97de23e2">在此页：</p><p id="3cd1b34b"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#ViewingBuildAgentLogs-LogFiles">日志文件</a></li><li class="list__item"><a href="#ViewingBuildAgentLogs-GenericDebugLogging">通用调试日志</a></li><li class="list__item"><a href="#ViewingBuildAgentLogs-VCSDebugLogging">VCS调试日志记录</a></li><li class="list__item"><a href="#ViewingBuildAgentLogs-SpecificDebugLogging">特定的调试日志</a></li><li class="list__item"><a href="#ViewingBuildAgentLogs-AdvancedLoggingConfiguration">高级日志记录配置</a></li></ul><p></p><p id="2dc9704e">为了分析特定于代理的案例，TeamCity代理进程将内部日志文件保存到<code class="code"><TeamCity agent home>/logs</code>代理计算机上的目录。</p><p id="2be62564">将代理连接到TeamCity服务器后，您可以在TeamCity Web UI的<b id="bf962ac6">代理的“代理日志”</b>选项卡上<b id="57c19c0a">浏览和下载</b>代理日志。</p><p id="49799c76">如果您需要自定义登录，请参见下文。</p><a name="LogFiles"></a><a name="Log-Files"></a><div class="chapter"><h2 id="ViewingBuildAgentLogs-LogFiles">日志文件</h2><p id="aae23641">TeamCity使用<a href="http://logging.apache.org/log4j" rel="noopener noreferrer" data-external="true" target="_blank">Log4j</a>进行事件内部记录。默认的构建代理Log4j配置文件是<code class="code"><agent home>/conf/teamcity-agent-log4j.xml</code> 。<br>请参阅文件中的注释以启用DEBUG模式：您将需要增加<code class="code"><param name="maxBackupIndex"..."</code>节点并插入<code class="code"><priority value="DEBUG"/></code>节点成<code class="code"><category></code>元素。将构建代理程序日志放入<code class="code"><agent home>/logs</code>目录。通常，您无需重新启动代理即可应用更新的日志记录配置。</p><div class="table-wrapper"><table width="100%" id="60b010a3"><thead><tr id="83f621c9" class="ijRowHead"><th id="f1110284"><p id="cba58490">文档名称</p></th><th id="dd38457c"><p id="aefbb23a">描述</p></th></tr></thead><tbody><tr id="d7582b9b" class="ijRowOdd"><td id="4e266e20"><p id="1e56c08c"><code class="code">teamcity-agent.log</code></p></td><td id="a53df965"><p id="a5e4c760">常规构建代理日志</p></td></tr><tr id="a392ddc8" class="ijRowEven"><td id="8b80f132"><p id="b95fa514"><code class="code">teamcity-build.log</code></p></td><td id="0a22a7aa"><p id="b0b424db"><code class="code">stdout</code>和<code class="code">stderr</code>代理运行的构建的输出</p></td></tr><tr id="d7b6e177" class="ijRowOdd"><td id="10e0b31a"><p id="56d017d2"><code class="code">teamcity-vcs.log</code></p></td><td id="900141cc"><p id="a121483f">与VCS相关的日志记录（对于“自动启动代理”结帐模式）</p></td></tr><tr id="5cf8ac7c" class="ijRowEven"><td id="b7d5b7cb"><p id="ac47776c"><code class="code">upgrade.log</code></p></td><td id="464301e3"><p id="dbcc6a42">构建代理升级的日志（由升级过程记录）</p></td></tr><tr id="aef558cb" class="ijRowOdd"><td id="2e26ed7d"><p id="7f00b08b"><code class="code">launcher.log</code></p></td><td id="9a8cf002"><p id="505b81d8">代理程序监视/启动过程的日志</p></td></tr><tr id="ae6c462f" class="ijRowEven"><td id="2ebb1024"><p id="e5913230"><code class="code">wrapper.log</code></p></td><td id="024b03cb"><p id="cb5635ae">（仅当代理作为Windows服务运行或由Java Service Wrapper运行时存在）进程构建代理启动过程的输出</p></td></tr></tbody></table></div></div><a name="GenericDebugLogging"></a><a name="Generic-Debug-Logging"></a><div class="chapter"><h2 id="ViewingBuildAgentLogs-GenericDebugLogging">通用调试日志</h2><p id="13406ff6">要启用代理上的常规调试日志记录，请更改<code class="code">jetbrains.buildServer</code>类别中的日志记录优先级<code class="code"><agent home>/conf/teamcity-agent-log4j.xml</code>文件：</p><div class="code-block" data-lang="markup"><category name="jetbrains.buildServer">
    <priority value="DEBUG"></priority>
    <appender-ref ref="ROLL"></appender-ref>
</category>

</div><p id="fed17e38">然后，看<code class="code">teamcity-agent.log*</code>文件。<br>要关闭调试模式，请在线<code class="code"><priority value="INFO"/></code> 。</p></div><a name="VCSDebugLogging"></a><a name="VCS-Debug-Logging"></a><div class="chapter"><h2 id="ViewingBuildAgentLogs-VCSDebugLogging">VCS调试日志记录</h2><p id="c8e81067">要在代理上启用详细的VCS登录，请在<code class="code"><agent home>/conf/teamcity-agent-log4j.xml</code>文件：</p><div class="code-block" data-lang="markup"><category name="jetbrains.buildServer.VCS">
    <priority value="DEBUG"></priority>
    <appender-ref ref="ROLL.VCS"></appender-ref>
</category>

</div><p id="b7685b64">然后，看<code class="code">teamcity-vcs.log*</code>文件。<br>要关闭调试模式，请在线<code class="code"><priority value="INFO"/></code> 。</p></div><a name="SpecificDebugLogging"></a><a name="Specific-Debug-Logging"></a><div class="chapter"><h2 id="ViewingBuildAgentLogs-SpecificDebugLogging">特定的调试日志</h2><p id="0a8d08a1">要获取从代理发送到服务器的数据转储，请通过取消注释下面的行来启用代理XML-RPC日志。 <code class="code"><agent home>/conf/teamcity-agent-log4j.xml</code>文件。</p><div class="code-block" data-lang="markup"><category name="jetbrains.buildServer.XMLRPC">
    <!--<priority value="DEBUG"/>-->
    <appender-ref ref="ROLL.XMLRPC"></appender-ref>
</category>

</div><p id="1ded6b90">然后，看<code class="code">teamcity-xmlrpc.log</code> 。<br>要关闭它，使线<code class="code"><priority value="INFO"/></code> 。</p></div><a name="AdvancedLoggingConfiguration"></a><a name="Advanced-Logging-Configuration"></a><div class="chapter"><h2 id="ViewingBuildAgentLogs-AdvancedLoggingConfiguration">高级日志记录配置</h2><p id="bd8fd2f5">您可以通过更改日志记录的值来配置日志的位置<code class="code">teamcity_logs</code>属性（通过传递给JVM <code class="code">-D</code>选项）。您也可以通过更改Log4j的值来更改Log4j配置文件的位置。 <code class="code">log4j.configuration</code>属性。有关如何传递选项的信息，请参见相应的文档<a href="configuring-build-agent-startup-properties.html">部分</a> 。</p><p id="628e354d">有关调整日志的其他选项，请参阅<a href="teamcity-server-logs.html#Changing-Logging-Configuration">TeamCity Server日志</a>页面。</p><hr id="ba64d61d"><p id="60302cf5"><b id="5a8d6df7">也可以看看：</b></p><p id="3d34196e"><b id="02f6457f">管理员指南</b> ： <a href="teamcity-server-logs.html">TeamCity服务器日志</a><br><b id="3c9b3851">故障排除</b> ： <a href="reporting-issues.html">报告问题</a></p><hr id="583500a5"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>