<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Jenkins迁移至TeamCity的迁移指南-帮助|帮助团队城市</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Jenkins to TeamCity Migration Guidelines" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/jenkins-to-teamcity-migration-guidelines.md|Jenkins to TeamCity Migration Guidelines" data-main-title="Jenkins to TeamCity Migration Guidelines" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/jenkins-to-teamcity-migration-guidelines.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="jenkins-to-teamcity-migration-guidelines.md" data-toc="Jenkins to TeamCity Migration Guidelines">Jenkins改用TeamCity迁移指南</h1><p id="a820e96b">在此页：</p><p id="42728f02"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#JenkinstoTeamCityMigrationGuidelines-Introduction">介绍</a></li><li class="list__item"><a href="#JenkinstoTeamCityMigrationGuidelines-Concepts">概念</a></li><li class="list__item"><a href="#JenkinstoTeamCityMigrationGuidelines-MigratingFreestyleproject">迁移Freestyle项目</a><ul class="list _bullet"><li class="list__item"><a href="#JenkinstoTeamCityMigrationGuidelines-ProjectandBuildConfiguration">项目和构建配置</a></li><li class="list__item"><a href="#JenkinstoTeamCityMigrationGuidelines-VCSRoots">VCS根</a></li><li class="list__item"><a href="#JenkinstoTeamCityMigrationGuidelines-BuildEnvironment">搭建环境</a></li><li class="list__item"><a href="#JenkinstoTeamCityMigrationGuidelines-Triggers">扳机</a></li><li class="list__item"><a href="#JenkinstoTeamCityMigrationGuidelines-Build">建立</a></li><li class="list__item"><a href="#JenkinstoTeamCityMigrationGuidelines-BuildingMavenproject">建筑Maven项目</a></li><li class="list__item"><a href="#JenkinstoTeamCityMigrationGuidelines-Post-buildActions">构建后动作</a></li><li class="list__item"><a href="#JenkinstoTeamCityMigrationGuidelines-Workingwithbranches">与分支机构合作</a></li><li class="list__item"><a href="#JenkinstoTeamCityMigrationGuidelines-Plugins">外挂程式</a></li><li class="list__item"><a href="#JenkinstoTeamCityMigrationGuidelines-Buildpipelines">建立管道</a></li><li class="list__item"><a href="#JenkinstoTeamCityMigrationGuidelines-Distributedbuilds">分布式构建</a></li></ul></li></ul><p></p><a name="Introduction"></a><a name="Introduction"></a><div class="chapter"><h2 id="JenkinstoTeamCityMigrationGuidelines-Introduction">介绍</h2><p id="294a0acf">本文档提供了从Jenkins迁移到TeamCity CI服务器时需要了解的基础知识。在管理CI和CD方面，TeamCity与Jenkins完全不同。如果您只是想入门，请尝试使用<a href="getting-started-with-teamcity.html">本指南</a> 。</p></div><a name="Concepts"></a><a name="Concepts"></a><div class="chapter"><h2 id="JenkinstoTeamCityMigrationGuidelines-Concepts">概念</h2><p id="9971a3f4">Jenkins和TeamCity主要具有相同的概念集，但是命名略有不同。下表提供了一些Jenkins概念到TeamCity对应对象的映射。</p><a name="jenkins-mapping-to-teamcity"></a><div class="table-wrapper"><table width="100%" id="4691d67c"><thead><tr id="cf400c80" class="ijRowHead"><th id="1c649c11"><p id="8ebccc82">詹金斯</p></th><th id="1f66be7b"><p id="113903a8">团队城市</p></th></tr></thead><tbody><tr id="2cc63cb3" class="ijRowOdd"><td id="9e011b23"><p id="30decc53">Jenkins主节点</p></td><td id="46c442ae"><p id="d7a3ee29">TeamCity服务器</p></td></tr><tr id="37b48759" class="ijRowEven"><td id="bfe9cf8b"><p id="8d9cd2ee">愚蠢的奴隶/永久代理</p></td><td id="15ede341"><p id="440ebd0e"><a href="agent-pools.html">代理池</a></p></td></tr><tr id="a7689a97" class="ijRowOdd"><td id="62f79acc"><p id="4bc8c208">执行者</p></td><td id="f40ae08e"><p id="0ab91078"><a href="build-agent.html">TeamCity代理商</a></p></td></tr><tr id="7d2f673a" class="ijRowEven"><td id="992d67de"><p id="4b3ac42f">查看或<a href="https://plugins.jenkins.io/cloudbees-folder" rel="noopener noreferrer" data-external="true" target="_blank">文件夹</a></p></td><td id="ee0f5bfa"><p id="f37543d2"><a href="project.html">项目</a></p></td></tr><tr id="ae5d2bad" class="ijRowOdd"><td id="8841fa78"><p id="3ece574e">工作/项目/项目</p></td><td id="5e77c6ec"><p id="cdfe2fd8"><a href="build-configuration.html">构建配置</a></p></td></tr><tr id="ee801e16" class="ijRowEven"><td id="08ce12d5"><p id="a8b73352">建立</p></td><td id="c18e8d98"><p id="93bd2342"><a href="configuring-build-steps.html">建立步骤</a></p></td></tr><tr id="3b2af0f3" class="ijRowOdd"><td id="d180d879"><p id="59f6b3bb">预先步骤</p></td><td id="ea3b6dfe"><p id="ac33beec"><a href="configuring-build-steps.html">构建步骤</a> （部分）</p></td></tr><tr id="619d6462" class="ijRowEven"><td id="4458cb90"><p id="31da1a5e">建设后行动</p></td><td id="80626fc4"><p id="5d6eb2cd"><a href="configuring-build-steps.html">构建步骤</a> （部分）</p></td></tr><tr id="3aeacde2" class="ijRowOdd"><td id="16785596"><p id="3dad6589">建立触发器</p></td><td id="62eca877"><p id="8904316c"><a href="configuring-build-triggers.html">建立触发器</a></p></td></tr><tr id="a02f3a66" class="ijRowEven"><td id="d63e28c1"><p id="2f9b8164">源代码管理管理（SCM）</p></td><td id="2a42bee9"><p id="625c03f2"><a href="vcs-root.html">版本控制系统（VCS）</a></p></td></tr><tr id="15f4e139" class="ijRowOdd"><td id="6c815fe7"><p id="5fda6d0c">工作空间</p></td><td id="6e51b220"><p id="89aeafe4"><a href="build-checkout-directory.html">建立结帐目录</a></p></td></tr><tr id="72cd1e51" class="ijRowEven"><td id="6472c632"><p id="8e188792">管道</p></td><td id="ab751392"><p id="f43648f6"><a href="build-chain.html">构建链</a> （通过快照依赖性）</p></td></tr><tr id="eacfe7e6" class="ijRowOdd"><td id="44d04bcb"><p id="2e6cf0fe">标签</p></td><td id="911611f8"><p id="1d54ce14"><a href="agent-requirements.html">代理商要求</a></p></td></tr></tbody></table></div></div><a name="MigratingFreestyleproject"></a><a name="Migrating-Freestyle-project"></a><div class="chapter"><h2 id="JenkinstoTeamCityMigrationGuidelines-MigratingFreestyleproject">迁移Freestyle项目</h2><p id="000f97bd">Freestyle项目是Jenkins中最常见的项目类型，因此我们描述Freestyle项目的TeamCity对应项目以指导迁移。</p><a name="ProjectandBuildConfiguration"></a><a name="Project-and-Build-Configuration"></a><div class="chapter"><h3 id="JenkinstoTeamCityMigrationGuidelines-ProjectandBuildConfiguration">项目和构建配置</h3><p id="9519679a">在Jenkins和TeamCity中配置构建作业的方式在概念上存在一些差异。</p><p id="0de82b1f"><a href="build-configuration.html">Build Configuration</a>是Jenkins Job / Item / Project的TeamCitys副本。但是，构建配置要求首先创建一个<a href="project.html">Project</a>实例。实际上，TeamCity中的Project概念是用户从Jenkins迁移时遇到的第一个大区别。项目包含构建配置所需的大部分设置。<a href="project.html">此处</a>列出<a href="project.html">了</a>分配给TeamCity中的项目的所有设置。</p></div><a name="VCSRoots"></a><a name="VCS-Roots"></a><div class="chapter"><h3 id="JenkinstoTeamCityMigrationGuidelines-VCSRoots">VCS根</h3><p id="9d839d6c">Jenkins构建作业的源代码管理（SCM）对应于TeamCity中“项目设置”中的<a href="vcs-root.html">VCS根目录</a> 。一个项目可以包含任意数量的VCS根目录。任何构建配置都可以使用项目的任意数量的VCS根目录。</p><p id="a7d49f9b">如果只需要一部分VCS根，则可以使用<a href="vcs-checkout-rules.html">VCS Checkout Rules</a> 。这允许将目录从配置的VCS根目录映射到Build Agent上<a href="https://confluence.jetbrains.com/display/TCD10/Build+Checkout+Directory" rel="noopener noreferrer" data-external="true" target="_blank">build checkout目录</a>中的子目录。</p></div><a name="BuildEnvironment"></a><a name="Build-Environment"></a><div class="chapter"><h3 id="JenkinstoTeamCityMigrationGuidelines-BuildEnvironment">搭建环境</h3><p id="2e38044c">Jenkins中Freestyle项目的“构建环境”部分为该项目指定了其他功能。在TeamCity中，可以根据目标在各个部分中配置相应的功能：常规项目设置，内部配置设置，VCS根目录设置等。</p><p id="f36dcb30">例子：</p><ul class="list _ul"><li class="list__item" id="42799b21"><p>要在生成之前清理工作区，请在生成配置的版本控制设置中启用<a href="configuring-vcs-settings.html#Checkout-Settings">清理</a>生成复选框。</p></li><li class="list__item" id="0345bddf"><p>要在进程卡住的<a href="build-failure-conditions.html">情况下</a>取消构建，请配置构建配置的<a href="build-failure-conditions.html">失败条件</a> 。此外，TeamCity还提供开箱即用的<a href="configuring-general-settings.html#Build-Options">挂起构建检测功能</a> 。</p></li><li class="list__item" id="096f9a89"><p>可以通过指定一个特殊的变量来访问环境变量<code class="code">%env.<environment variable name>%</code>模式（例如： <code class="code">%env.JAVA_HOME%</code> ）在各个地方进行配置。</p></li></ul></div><a name="Triggers"></a><a name="Triggers"></a><div class="chapter"><h3 id="JenkinstoTeamCityMigrationGuidelines-Triggers">扳机</h3><p id="2f8d2a70">Freestyle项目允许配置可选触发器以控制Jenkins何时开始构建。在大多数情况下，Jenkins项目的触发因素将是TeamCity的对应因素。</p><p id="cef7eb6b">有<a href="configuring-build-triggers.html">许多</a>用于在TeamCity中触发构建<a href="configuring-build-triggers.html">的选项</a> 。可以监视源代码控制存储库中的更改，监视外部资源甚至Maven依赖项。可以定期计划构建，此外， <a href="rest-api.html">REST API</a>可用于从外部触发构建。</p></div><a name="Build"></a><a name="Build"></a><div class="chapter"><h3 id="JenkinstoTeamCityMigrationGuidelines-Build">建立</h3><p id="5d7aabad">这是真正的工作发生的地方。这部分在詹金斯（Jenkins）和TeamCity中基本相同。TeamCity提供了大量开箱即用的<a href="build-runner.html">构建运行器</a> 。您可以<a href="configuring-build-steps.html">配置几个构建步骤</a>来运行给定构建配置所需的任务。</p></div><a name="BuildingMavenproject"></a><a name="Building-Maven-project"></a><div class="chapter"><h3 id="JenkinstoTeamCityMigrationGuidelines-BuildingMavenproject">建筑Maven项目</h3><p id="d846e135">Jenkins Maven项目在TeamCity中没有直接对应的项目。而是选择一个适当的构建步骤来执行工作。实际上， <a href="maven.html">TeamCity可自动执行</a> Maven项目的许多设置，并提供<a href="configuring-maven-triggers.html#Maven-Artifact-Dependency-Trigger">基于依赖项</a>的其他构建触发<a href="configuring-maven-triggers.html#Maven-Artifact-Dependency-Trigger">选项</a> 。</p></div><a name="Post-buildActions"></a><a name="Post-build-Actions"></a><div class="chapter"><h3 id="JenkinstoTeamCityMigrationGuidelines-Post-buildActions">构建后动作</h3><p id="eeefacd7">Freestyle项目的构建后操作可以映射到TeamCity中项目/构建配置的特定属性，也可以使用其他构建步骤来映射。您还可以通过将<a href="adding-build-features.html">构建功能</a>添加到TeamCity的“构建配置”中，找到与任务相关的解决方案。</p><p id="71ded78c">可以将单个构建步骤<a href="configuring-build-steps.html">配置为</a>根据同一构建配置的先前构建步骤的成功或失败<a href="configuring-build-steps.html">来执行</a> 。</p></div><a name="Workingwithbranches"></a><a name="Working-with-branches"></a><div class="chapter"><h3 id="JenkinstoTeamCityMigrationGuidelines-Workingwithbranches">与分支机构合作</h3><p id="70906b8c">TeamCity支持分布式版本控制系统（DVCS）中的<a href="working-with-feature-branches.html">功能分支</a> 。</p><p id="96428cf8">对功能分支的支持与各种TeamCity功能集成在一起。例如，每次TeamCity在构建配置的VCS根目录的特定分支中检测到更改时， <a href="branch-remote-run-trigger.html">分支远程运行触发器都会</a>自动启动新的个人构建。</p><p id="fac16a79">以下是与TeamCity中的功能分支相关的一些要点列表：</p><ul class="list _ul"><li class="list__item" id="df2d52d5"><p>可以在工件依赖项中指定构建分支名称</p></li><li class="list__item" id="783bd4aa"><p>VCS，计划和完成构建触发器支持分支过滤器设置</p></li><li class="list__item" id="ac7fbbcf"><p>VCS标签还支持分支过滤器</p></li><li class="list__item" id="6a882e60"><p>可以在分支规范中使用Mercurial书签，因此，如果您更喜欢使用书签而不是标准Mercurial分支，则可以将TeamCity功能分支与它们一起使用</p></li><li class="list__item" id="beb464cc"><p>Git标签可以在分支规范中使用。一些团队使用Git标签的方式与分支相同，即，一旦设置了新标签，就应在TeamCity中以标签名称指定的分支中开始构建。</p></li><li class="list__item" id="4232513b"><p><a href="automatic-merge.html">自动合并</a>功能，可在成功构建后将一个分支合并到另一个分支。该功能在“构建配置”设置中作为“ <a href="adding-build-features.html">构建功能”</a>选项提供。</p></li></ul></div><a name="Plugins"></a><a name="Plugins"></a><div class="chapter"><h3 id="JenkinstoTeamCityMigrationGuidelines-Plugins">外挂程式</h3><p id="d9d4cd8b">TeamCity默认具有许多内置功能，可以通过安装<a href="https://plugins.jetbrains.com/teamcity" rel="noopener noreferrer" data-external="true" target="_blank">其他插件</a>进一步扩展。</p></div><a name="Buildpipelines"></a><a name="Build-pipelines"></a><div class="chapter"><h3 id="JenkinstoTeamCityMigrationGuidelines-Buildpipelines">建立管道</h3><p id="dbcb18c2">TeamCity中的构建管道称为<a href="build-chain.html">构建链</a> 。它是通过<a href="snapshot-dependencies.html">快照依赖关系</a>连接的一组构建配置。《 <a href="https://blog.jetbrains.com/teamcity/2016/03/teamcity-take-on-build-pipelines/" rel="noopener noreferrer" data-external="true" target="_blank">TeamCity着手构建管道》一</a>文详细介绍了TeamCity如何处理构建链及其含义。</p></div><a name="Distributedbuilds"></a><a name="Distributed-builds"></a><div class="chapter"><h3 id="JenkinstoTeamCityMigrationGuidelines-Distributedbuilds">分布式构建</h3><p id="4b8643fc">在Jenkins中，要卸载主节点，需要配置一个永久代理来运行构建。</p><p id="1d7637c4">TeamCity服务器本身不会运行任何构建。相反，它总是将作业委派给<a href="build-agent.html">构建代理</a> ，这意味着TeamCity构建中的构建是按设计分配的。</p><p id="709f17d9">活动代理计数在TeamCity服务器UI的顶部可见：</p><p id="eecb8658"></p><figure><img alt="agentCount" title="agentCount" src="/help/img/teamcity/2019.1/agentCount.png" id="e11508c4" width="300px" height="112"></figure><p></p><p id="4cbec127">您可以将代理分成称为<a href="agent-pools.html">代理池的</a>单独组，并将其分配给特定项目。在构建配置设置中，可以指定构建所需的许多<a href="agent-requirements.html">代理要求</a> 。</p><hr id="2ffd4866"></div></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>