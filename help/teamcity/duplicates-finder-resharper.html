<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Duplicates Finder (ReSharper) - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="viewpage.actionpageId113084077" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-build-steps.md|Configuring Build Steps/duplicates-finder-resharper.md|Duplicates Finder (ReSharper)" data-main-title="Duplicates Finder (ReSharper)" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/duplicates-finder-resharper.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="viewpage.actionpageId113084077" id="duplicates-finder-resharper.md">Duplicates Finder (ReSharper)</h1><p id="629618aa">The <b id="4f140753">Duplicates finder (ReSharper)</b> build runner based on <a href="http://www.jetbrains.com/resharper/features/command-line.html" data-external="true" target="_blank" rel="noopener noreferrer">ReSharper Command Line Tools</a> is intended to catch similar code fragments and provide a report on  the discovered repetitive blocks of C# and Visual Basic .NET code in Visual Studio 2003, 2005, 2008, 2010, 2012, 2013, and 2015 solutions.</p><aside class="note " data-title="" rel="629618aa" id="370cc9d5"><p id="99603ef2">This runner requires .NET Framework 4.6.1 (or higher) to be installed on the agent where builds will run.</p></aside><p id="73f62912">On this page:</p><p id="1654cb05"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#DuplicatesFinder(ReSharper)-Sources">Sources</a></li><li class="list__item"><a href="#DuplicatesFinder(ReSharper)-JetBrainsReSharperCommandLineToolsSettings">JetBrains ReSharper Command Line Tools Settings</a></li><li class="list__item"><a href="#DuplicatesFinder(ReSharper)-DuplicateSearcherSettings">Duplicate Searcher Settings</a><ul class="list _bullet"><li class="list__item"><a href="#DuplicatesFinder(ReSharper)-BuildFailureConditions">Build Failure Conditions</a></li></ul></li></ul></p><a name="Sources"></a><a name="Sources"></a><div class="chapter"><h2 id="DuplicatesFinder(ReSharper)-Sources">Sources</h2><div class="table-wrapper"><table width="100%" id="55581c96"><thead><tr id="51882372" class="ijRowHead"><th id="227d1bd8"><p id="1367e09a">Option</p></th><th id="14f004e2"><p id="3947a343">Description</p></th></tr></thead><tbody><tr id="5494e64e" class="ijRowOdd"><td id="fa71e9ca"><p id="1f874646">Include</p></td><td id="5422eb1e"><p id="31f792bc">Use newline-delimited Ant-like wildcards relative to the checkout root to specify the files to be included into the duplicates search.<br>Visual Studio solution files are parsed and replaced by all source files from all projects within a solution.<br>Example: <code class="code">src\MySolution.sln</code></p></td></tr><tr id="f6fac60f" class="ijRowEven"><td id="dc34bc52"><p id="8bf18ff2">Exclude</p></td><td id="dde35a6d"><p id="e9d5220c">Enter newline-delimited Ant-like wildcards to exclude files from the duplicates search (for example, <code class="code">*/generated{*}{}.cs</code>). The entries should be relative to the checkout root.</p></td></tr></tbody></table></div></div><a name="JetBrainsReSharperCommandLineToolsSettings"></a><a name="JetBrains-ReSharper-Command-Line-Tools-Settings"></a><div class="chapter"><h2 id="DuplicatesFinder(ReSharper)-JetBrainsReSharperCommandLineToolsSettings">JetBrains ReSharper Command Line Tools Settings</h2><div class="table-wrapper"><table width="100%" id="0e36d2b2"><thead><tr id="c47f493d" class="ijRowHead"><th id="c6959183"><p id="92f7f3cf">Option</p></th><th id="48d34354"><p id="dbba1243">Description</p></th></tr></thead><tbody><tr id="9e0df512" class="ijRowOdd"><td id="b6212122"><p id="c303a614">R# CLT Home Directory</p></td><td id="d855b112"><p id="3ea4afbe">Select the ReSharper Command Line Tools version. You can check the installed JetBrains ReSharper Command Line Tools versions on the <b id="9d34ba06"><a href="installing-agent-tools.html">Administration | Tools</a></b> page. If you want to run ReSharper duplicates using a specific ReSharper version (for example, to ensure it matches the version you have installed in Visual Studio), you can use this page to install another version of the tools and can change the default version to be used.</p></td></tr></tbody></table></div></div><a name="DuplicateSearcherSettings"></a><a name="Duplicate-Searcher-Settings"></a><div class="chapter"><h2 id="DuplicatesFinder(ReSharper)-DuplicateSearcherSettings">Duplicate Searcher Settings</h2><div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="160600db"><thead><tr id="28727599" class="ijRowHead"><th id="aa73b834"><p id="f2e56b88">Option</p></th><th id="4d483ac8"><p id="74211a22">Description</p></th></tr></thead><tbody><tr id="3e0d3426" class="ijRowOdd"><td id="3ab5ae3d"><p id="d4b73e44">Code fragments comparison</p></td><td id="3b819ae4"><p id="600c4ed5">Use these options to define which elements of the source code should be discarded when searching for repetitive code fragments. Code fragments can be considered duplicated, if they are structurally similar, but contain different variables, fields, methods, types or literals. Refer to the samples below:</p></td></tr><tr id="21e56910" class="ijRowEven"><td id="a3887e3f"><p id="a7ffdf58">Discard namespaces</p></td><td id="91c25dee"><p id="a46e94ad">If this option is checked, similar contents with different <i id="f9897fc3">namespace specifications</i> will be recognized as duplicates.</p><div class="code-block" data-lang="bash">NLog.Logger.GetInstance().Log("abcd");
A.Log.Logger.GetInstance().Log("abcd");

</div></td></tr><tr id="6239ed02" class="ijRowOdd"><td id="e5105c29"><p id="1ce23017">Discard literals</p></td><td id="d4639a29"><p id="1f6c2945">If this option is checked, similar lines of code with different literals will be recognized as duplicates.</p><div class="code-block" data-lang="bash">myStatusBar.SetText("Not Logged In");
myStatusBar.SetText("Logging In...");

</div></td></tr><tr id="a4ff8e65" class="ijRowEven"><td id="39c7270a"><p id="b063ffb5">Discard local variables</p></td><td id="ac6c84d0"><p id="74422444">If this option is checked, similar code fragments with different local variable names will be recognized as duplicates.</p><div class="code-block" data-lang="bash">int a = 5; a += 6;
int b = 5; b += 6;

</div></td></tr><tr id="5060af66" class="ijRowOdd"><td id="fc70f980"><p id="a09414b8">Discard class fields name</p></td><td id="9f916483"><p id="fa192ff9">If this option is checked, the similar code fragments with different field names will be recognized as duplicates.</p><div class="code-block" data-lang="bash">Console.WriteLine(myFoo);
Console.WriteLine(myBar);
... where myFoo and myBar are declared in the containing class

</div></td></tr><tr id="bbcb2a66" class="ijRowEven"><td id="db2ab9da"><p id="2d228c7d">Discard types</p></td><td id="f218e9af"><p id="2abc7d78">If this option is checked, similar content with different type names will be recognized as duplicates. These include all possible type references (as shown below):</p><div class="code-block" data-lang="none">Logger.GetInstance("text");
OtherUtility.GetInstance("text");
... where Logger and OtherUtility are both type names (thus GetInstance is a static method in both classes)
 
Logger a = (Logger) GetObject("object");
OtherUtility a = (OtherUtility) GetObject("object");
 
public int SomeMethod(string param);
public void SomeMethod(object[] param);

</div></td></tr><tr id="e6a449ec" class="ijRowOdd"><td id="d0f45c94"><p id="aee6dd07">Ignore duplicates with complexity lower than</p></td><td id="2f5bb6e9"><p id="b1f9325c">Use this field to specify the lowest level of complexity of code blocks to be taken into consideration when detecting duplicates.</p></td></tr><tr id="04ef11aa" class="ijRowEven"><td id="bc4db1e6"><p id="827d6353">Skip files by opening comment</p></td><td id="3a007190"><p id="870ab3d9">Enter newline-delimited keywords to exclude files that contain the keyword in the file's opening comments from the duplicates search.</p></td></tr><tr id="cca1e9f6" class="ijRowOdd"><td id="32c2f57e"><p id="e090aa93">Skip regions by message substring</p></td><td id="d9a93d45"><p id="18795f04">Enter newline-delimited keywords that exclude regions that contain the keyword in the message substring from the duplicates search. Entering "generated code", for example, will skip regions containing "Windows Form Designer generated code".</p></td></tr><tr id="c7b69261" class="ijRowEven"><td id="74d1c555"><p id="3a30bd74">Enable debug output</p></td><td id="f31d087a"><p id="21ea41e0">Check this option to include debug messages in the build log and publish the file with additional logs (<code class="code">dotnet-tools-dupfinder.log</code>) as an artifact.</p></td></tr></tbody></table></div><a name="BuildFailureConditions"></a><a name="Build-Failure-Conditions"></a><div class="chapter"><h3 id="DuplicatesFinder(ReSharper)-BuildFailureConditions">Build Failure Conditions</h3><p id="0d354fa1">If a build has too many duplicates, you can configure it to fail by setting a <a href="build-failure-conditions.html">build failure condition</a>.</p><hr id="0327cb0c"></div></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>