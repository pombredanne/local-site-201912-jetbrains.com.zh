<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Gradle-帮助|团队城市</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Gradle" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-build-steps.md|Configuring Build Steps/gradle.md|Gradle" data-main-title="Gradle" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/gradle.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="gradle.md" data-toc="Gradle">摇篮</h1><p id="fd8c49a1">在此页：</p><p id="4f1fa159"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#Gradle-GradleParameters">摇篮参数</a><ul class="list _bullet"><li class="list__item"><a href="#Gradle-RunParameters">运行参数</a></li><li class="list__item"><a href="#Gradle-JavaParameters">Java参数</a></li><li class="list__item"><a href="#Gradle-Buildproperties">构建属性</a></li><li class="list__item"><a href="#Gradle-DockerSettings">Docker设置</a></li><li class="list__item"><a href="#Gradle-CodeCoverage">代码覆盖率</a></li></ul></li></ul><p></p><p id="08a776a0"><i id="b1fdf1ae">Gradle Build Runner</i>运行<a href="http://www.gradle.org" rel="noopener noreferrer" data-external="true" target="_blank">Gradle</a>项目。</p><aside class="note " rel="08a776a0" id="f3aee0ab" data-title=""><p id="5fd7f1c4">要使用Gradle运行构建，您需要在所有代理计算机上安装Gradle 0.9-rc-1或更高版本。或者，如果您使用<a href="https://docs.gradle.org/3.3/userguide/gradle_wrapper.html" rel="noopener noreferrer" data-external="true" target="_blank">Gradle包装器</a> ，则需要将正确配置的Gradle Wrapper脚本签入到版本控制中。</p></aside><a name="GradleParameters"></a><a name="Gradle-Parameters"></a><div class="chapter"><h2 id="Gradle-GradleParameters">摇篮参数</h2><div class="table-wrapper"><table width="100%" id="68c9b00a"><thead><tr id="866515f0" class="ijRowHead"><th id="a182b408"><p id="902c65b4">选项</p></th><th id="1718da50"><p id="7b881840">描述</p></th></tr></thead><tbody><tr id="4614883d" class="ijRowOdd"><td id="b89db3ce"><p id="772c90ec">Gradle任务</p></td><td id="750e0eaa"><p id="4448c97e">指定Gradle任务名称，以空格分隔。例如： <code class="code">:myproject:clean :myproject:build</code>要么<code class="code">clean build</code> 。如果将此字段留为空白，则使用“默认”任务。请注意，TeamCity当前支持使用Gradle构建Java项目。构建Groovy / Scala / etc。项目尚未经过测试。</p></td></tr><tr id="5bdb6405" class="ijRowEven"><td id="ae801130"><p id="b9dee551">增量建筑</p></td><td id="5711fec9"><p id="68cb74b8">TeamCity可以利用Gradle <code class="code">:buildDependents</code> <a href="http://www.gradle.org/docs/current/userguide/userguide_single.html#sec:multiproject_build_and_test" rel="noopener noreferrer" data-external="true" target="_blank">功能</a> 。如果启用了“ <b id="90f5185e">增量构建”</b>复选框，TeamCity将检测受构建更改影响的Gradle模块，并启动<code class="code">:buildDependents</code>仅命令他们。这将导致Gradle仅完全构建和测试受更改影响的模块。</p></td></tr><tr id="749ab3b2" class="ijRowOdd"><td id="97954189"><p id="25243a8b">摇篮回家路径</p></td><td id="641f3688"><p id="37e2cee7">在此处指定Gradle主目录的路径（ <code class="code">bin</code>目录）。如果未指定，TeamCity将使用代理商的Gradle <code class="code">GRADLE_HOME</code>环境变量。如果您没有在代理上安装Gradle，则可以改用Gradle包装器。</p></td></tr><tr id="c384bfb7" class="ijRowEven"><td id="d70a1e6b"><p id="ce8b1b88">其他Gradle命令行参数</p></td><td id="115da7b5"><p id="1bbe214c">（可选）指定要传递给Gradle的命令行参数的空格分隔列表。</p></td></tr><tr id="36ea8bef" class="ijRowOdd"><td id="eaf716ea"><p id="e0e2a6b3">摇篮包装</p></td><td id="1abc38b9"><p id="8669343f">如果选中此复选框，TeamCity将在checkout目录中查找Gradle Wrapper脚本，并使用在上面的字段中指定的Gradle任务和其他命令行参数启动相应的脚本。在这种情况下，将忽略在<b id="3e7fd911">Gradle主路径中</b>指定的<b id="3e7fd911">Gradle</b>和在代理程序上安装的<b id="3e7fd911">Gradle</b> 。</p></td></tr></tbody></table></div><p id="2646aaa5"><a name="LaunchingParameters"></a><a name="Gradle-LaunchingParameters"></a></p><a name="RunParameters"></a><a name="Run-Parameters"></a><div class="chapter"><h3 id="Gradle-RunParameters">运行参数</h3><div class="table-wrapper"><table width="100%" id="40a5995c"><thead><tr id="1a583110" class="ijRowHead"><th id="1d75f7cd"><p id="4a694760">选项</p></th><th id="bb98efa3"><p id="47e2b3c0">描述</p></th></tr></thead><tbody><tr id="8c00a8d3" class="ijRowOdd"><td id="329ef81d"><p id="c660d8dd">除错</p></td><td id="7e649208"><p id="91c02813">选中“ <b id="44420a1b">记录调试消息”</b>复选框等同于添加<code class="code">-d</code> Gradle命令行参数。</p></td></tr><tr id="45afe413" class="ijRowEven"><td id="8f001858"><p id="9dda4267">堆栈跟踪</p></td><td id="926cd425"><p id="3f6f9362">选中<b id="aa5febb0">打印堆栈跟踪</b>复选框等同于添加<code class="code">-s</code> Gradle命令行参数。</p></td></tr></tbody></table></div><a name="java-param"></a></div><a name="JavaParameters"></a><a name="Java-Parameters"></a><div class="chapter"><h3 id="Gradle-JavaParameters">Java参数</h3><div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="c601826a"><thead><tr id="cda1ae1e" class="ijRowHead"><th id="782260db"><p id="53804779">选项</p></th><th id="c8aac6ba"><p id="13f36a2b">描述</p></th></tr></thead><tbody><tr id="23381d6d" class="ijRowOdd"><td id="14731248"><p id="19662c5d">JDK</p></td><td id="0530e4fe"><p id="3fb62b91">选择一个JDK。 <a href="predefined-build-parameters.html#Defining-Java-related-Environment-Variables">本节</a>详细介绍了可用的选项。默认是<code class="code">JAVA_HOME</code>环境变量或代理程序自己的Java。</p></td></tr><tr id="10402162" class="ijRowEven"><td id="5539780a"><p id="c4606ae3">JDK主页路径</p></td><td id="169acd09"><p id="fe7bb656"><i id="371f7311" origin="teamcity-help"><custom>上面选择</custom>时，此选项可用<custom>。</custom></i> 使用此字段可以指定用于运行构建的自定义JDK的路径。如果该字段为空，则从<code class="code">JAVA_HOME</code>代理计算机上的环境变量，或来自<code class="code">env.JAVA_HOME</code>在<a href="build-agent-configuration.html">构建代理配置</a>文件中指定的属性（ <code class="code">buildAgent.properties</code> ）。如果未指定这些值，TeamCity将使用构建代理进程本身的Java主页。</p></td></tr><tr id="0412ff93" class="ijRowOdd"><td id="435720f8"><p id="4fb01e2e">JVM命令行参数</p></td><td id="3099cbb4"><p id="b85a970a">您可以指定此类JVM命令行参数，例如<i id="48a592d0" origin="teamcity-help">最大堆大小</i>或启用<i id="134a9220" origin="teamcity-help">远程调试的</i>参数。这些值由用于运行构建的JVM传递。<br>例：</p><div class="code-block" data-lang="bash">-Xmx512m -Xms256m</div></td></tr></tbody></table></div></div><a name="Buildproperties"></a><a name="Build-properties"></a><div class="chapter"><h3 id="Gradle-Buildproperties">构建属性</h3><p id="91dc3304">可以在Gradle构建脚本中以<a href="upgrade-notes.html#Gradle:-Breaking-change-compared-to-9.1.2">与</a> Gradle属性<a href="upgrade-notes.html#Gradle:-Breaking-change-compared-to-9.1.2">相同的方式</a>访问TeamCity系统参数。推荐的引用属性的方法如下：</p><div class="code-block" data-lang="bash">任务printProperty << {println“ $ {project.ext ['teamcity.build.id']}”}</div><p id="dac5a2a8">或如果系统属性的名称是合法的Groovy名称标识符（例如， <code class="code">system.myPropertyName = myPropertyValue</code> ）：</p><div class="code-block" data-lang="bash">任务printProperty << {println“ $ myPropertyName”}</div></div><a name="DockerSettings"></a><a name="Docker-Settings"></a><div class="chapter"><h3 id="Gradle-DockerSettings">Docker设置</h3><p id="f02a44aa">在本部分中，您可以指定一个Docker映像，该映像将<a href="docker-wrapper.html">用于运行构建步骤</a> 。</p><p id="9f4230e4"><a name="coverage"></a><a name="Gradle-coverage"></a></p></div><a name="CodeCoverage"></a><a name="Code-Coverage"></a><div class="chapter"><h3 id="Gradle-CodeCoverage">代码覆盖率</h3><p id="3e8fa4db">支持使用<a href="intellij-idea.html">IDEA代码覆盖引擎</a>和<a href="jacoco.html">JaCoCo进行</a> <a href="intellij-idea.html">代码覆盖</a> 。</p><hr id="d21937c1"><p id="9815aa4b"><b id="cdda2da5">也可以看看：</b></p><p id="9f2ed113"><b id="9e40dd1f">管理员指南</b> ： <a href="intellij-idea.html">IntelliJ IDEA代码覆盖率</a></p><hr id="365c2ff9"></div></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>