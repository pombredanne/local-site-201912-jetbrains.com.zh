<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>NuGet - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="NuGet" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/nuget.md|NuGet/using-teamcity-as-nuget-feed.md|Using TeamCity as NuGet Feed" data-main-title="NuGet" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/nuget.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="NuGet" id="nuget.md">NuGet</h1><p id="28f2c06a">On this page:</p><p id="d9104754"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#NuGet-IntegrationCapabilities">Integration Capabilities</a></li><li class="list__item"><a href="#NuGet-TypicalUsageScenarios">Typical Usage Scenarios</a></li><li class="list__item"><a href="#NuGet-InstallingNuGettoTeamCityagents">Installing NuGet to TeamCity agents</a></li><li class="list__item"><a href="#NuGet-NuGetPackagesCacheClean-uponAgents">NuGet Packages Cache Clean-up on Agents</a></li><li class="list__item"><a href="#NuGet-AuthenticationinprivateNuGetFeeds">Authentication in private NuGet Feeds</a></li><li class="list__item"><a href="#NuGet-ProxyConfiguration">Proxy Configuration</a></li></ul></p><a name="IntegrationCapabilities"></a><a name="Integration-Capabilities"></a><div class="chapter"><h2 id="NuGet-IntegrationCapabilities">Integration Capabilities</h2><p id="a21655ea">TeamCity integrates with <a href="https://github.com/nuget/home" data-external="true" target="_blank" rel="noopener noreferrer">NuGet</a> package manager and when <a href="#Installing-NuGet-to-TeamCity-agents">NuGet is installed</a> provides the following capabilities:</p><ul class="list _ul"><li class="list__item" id="84315410"><p><a href="using-teamcity-as-nuget-feed.html">Private NuGet feeds</a> based on the builds' published artifacts.</p></li><li class="list__item" id="09e88787">A set of NuGet runners to be used in builds on Windows OS, as well as on Linux and MacOS when <a href="http://www.mono-project.com/docs/getting-started/install/" data-external="true" target="_blank" rel="noopener noreferrer">Mono</a> is installed on the agent.<ul class="list _ul"><li class="list__item" id="4555e291"><p><a href="nuget-installer.html">NuGet Installer</a> build runner, which installs and updates NuGet packages.</p></li><li class="list__item" id="1ff7d414"><p><a href="nuget-pack.html">NuGet Pack</a> build runner, which builds NuGet packages.</p></li><li class="list__item" id="e3dd03d5"><p><a href="nuget-publish.html">NuGet Publish</a> build runner, which publishes packages to a feed of your choice.</p></li></ul></li><li class="list__item" id="8c47c32e"><p><a href="nuget-dependency-trigger.html">NuGet Dependency</a> Trigger, which allows triggering builds on NuGet feed updates.</p></li></ul><aside class="note " data-title="" rel="e6cfb4c6" id="17612647"><p id="6fd03f4c"><b id="be506d4a">Supported Operating Systems</b></p><p id="8db35075">NuGet build runners are supported on build agents running Windows OS by default. Linux and macOS are supported when <a href="http://www.mono-project.com/docs/getting-started/install/" data-external="true" target="_blank" rel="noopener noreferrer">Mono</a> is installed on the agent (only NuGet 3.3+ on Mono 4.4.2+ is supported).</p></aside><aside class="note " data-title="" rel="NuGet-IntegrationCapabilities" id="dd9dbc06"><ul class="list _ul"><li class="list__item" id="80bd281b">NuGet build runners require an appropriate version on .NET Framework installed on the agent machine depending on the NuGet.exe version:<ul class="list _ul"><li class="list__item" id="f492f9ba"><p>NuGet versions 2.8.6+ require .NET 4.5+</p></li><li class="list__item" id="a291f3ea"><p>NuGet versions &lt; 2.8.6 require .NET 4.0.</p></li></ul></li><li class="list__item" id="1e12de4e"><p>To use packages from an authenticated feed, see the <a href="nuget-feed-credentials.html">NuGet Feed Credentials</a> build feature.</p></li></ul></aside></div><a name="TypicalUsageScenarios"></a><a name="Typical-Usage-Scenarios"></a><div class="chapter"><h2 id="NuGet-TypicalUsageScenarios">Typical Usage Scenarios</h2><ul class="list _ul"><li class="list__item" id="313f0316"><p>To install packages from a public feed, add the <a href="nuget-installer.html">NuGet Installer</a> build step.</p></li><li class="list__item" id="38994779"><p>To create a package and publish it to a public feed, add the <a href="nuget-pack.html">NuGet Pack</a> and <a href="nuget-publish.html">NuGet Publish</a> build steps.</p></li><li class="list__item" id="9dfd615f"><p>To create a package and publish it to the internal TeamCity NuGet Server, enable TeamCity as a NuGet Server (see the <a href="using-teamcity-as-nuget-feed.html">dedicated page</a>), use the <a href="nuget-pack.html">NuGet Pack</a> build step and <a href="nuget-publish.html">NuGet Publish</a> build steps.</p></li><li class="list__item" id="8123d418"><p>To trigger a new build when a NuGet package is updated, use the <a href="nuget-dependency-trigger.html">NuGet Dependency Trigger</a>.</p></li></ul></div><a name="InstallingNuGettoTeamCityagents"></a><a name="Installing-NuGet-to-TeamCity-agents"></a><div class="chapter"><h2 id="NuGet-InstallingNuGettoTeamCityagents">Installing NuGet to TeamCity agents</h2><p id="032c2980">The NuGet trigger and the NuGet-related build runners require the NuGet command line binary configured on the server. They are automatically distributed to agents once configured. Several versions can be installed and a version of your choice can be set as the default one.</p><aside class="tip sideblock" data-title="" rel="032c2980" id="79076f9d"><p id="dc87132b">It is recommended to use release versions of NuGet.</p></aside><p id="6739f77a">To install <code class="code">NuGet.exe</code> on TeamCity:</p><ol class="list _decimal"><li class="list__item" id="7d76050f"><p>Go to the <b id="dab71d06">Administration | Tools</b> tab.</p></li><li class="list__item" id="d91ca270"><p>Click <b id="30d51e68">Install tool and select NuGet.exe</b>.</p></li><li class="list__item" id="42063e98">Select whether you want to download (default) NuGet from the public feed or upload your own NuGet package containing <code class="code">NuGet.exe</code>.<ul class="list _ul"><li class="list__item" id="8ba28c75"><p>If the <b id="0a04152f">Download</b> radio button is selected, specify the NuGet version to install on all build agents.</p></li><li class="list__item" id="e83a1f58"><p>If the <b id="a579a09d">Upload</b> radio button is selected, specify your own NuGet package.</p></li></ul></li><li class="list__item" id="c27ca3fb"><p>Specify whether this NuGet version will be default using the related checkbox.</p></li><li class="list__item" id="907f4f2a"><p>Click <b id="e04722a9">Add</b> to install the selected NuGet version.</p></li></ol><aside class="tip sideblock" data-title="" rel="b5f5b8b6" id="0718535c"><p id="8f6c0000">Installing NuGet on agents results in agents upgrade.</p></aside></div><a name="NuGetPackagesCacheClean-uponAgents"></a><a name="NuGet-Packages-Cache-Clean-up-on-Agents"></a><div class="chapter"><h2 id="NuGet-NuGetPackagesCacheClean-uponAgents">NuGet Packages Cache Clean-up on Agents</h2><p id="fe948bae">NuGet uses several local caches to avoid downloading packages that are already installed, and to provide offline support. If an agent is running out of the space, TeamCity will try to clean NuGet packages cache on the agent.</p><p id="f4d6d64c">The caches in the following directories will be cleaned:</p><ul class="list _ul"><li class="list__item" id="586ece47"><p><code class="code">%%NUGET_PACKAGES%% environment variable</code> (must be an absolute path)</p></li><li class="list__item" id="1887457f"><code class="code">%%LOCALAPPDATA%%NuGet\Cache</code></li><li class="list__item" id="cb7824fc"><code class="code">%%LOCALAPPDATA%%NuGet\v3-cache</code></li><li class="list__item" id="4045dde6"><code class="code">%%user.home%.nuget\packages</code></li></ul></div><a name="AuthenticationinprivateNuGetFeeds"></a><a name="Authentication-in-private-NuGet-Feeds"></a><div class="chapter"><h2 id="NuGet-AuthenticationinprivateNuGetFeeds">Authentication in private NuGet Feeds</h2><p id="53b9dcfc">You can use authentication in <a href="using-teamcity-as-nuget-feed.html">build-in NuGet feeds</a> or the feeds specified in the <a href="nuget-feed-credentials.html">NuGet feed credentials</a> build feature. The credentials provider will automatically authenticate requests to these feeds.</p><p id="cd833b04">API support:</p><ul class="list _ul"><li class="list__item" id="bca24d54"><b id="d2595672">NuGet Installer / NuGet Publish runners</b><ul class="list _ul"><li class="list__item" id="2b7726fd"><p><b id="1d408e83">v3</b>: supported <b id="4d4a6224">since TeamCity 2018.2</b>, requires NuGet 4.8+ (Windows), NuGet 4.9+ on Mono</p></li><li class="list__item" id="b70dde30"><p><b id="77f0206c">v1/v2</b>: NuGet 2.0+ is minimum requirement, NuGet 3.5+ is recommended</p></li></ul></li><li class="list__item" id="a33ca85d"><b id="ab1b1448">.NET CLI</b><ul class="list _ul"><li class="list__item" id="243ce8b1"><p><b id="bfe59218">v3</b>: requires .NET CLI 2.1.500</p></li><li class="list__item" id="cb2bd5cd"><p><b id="e42b3e8e">v1/v2</b>: not supported</p></li></ul></li></ul></div><a name="ProxyConfiguration"></a><a name="Proxy-Configuration"></a><div class="chapter"><h2 id="NuGet-ProxyConfiguration">Proxy Configuration</h2><p id="c43304b6">NuGet command line client supports proxy server configuration via the <code class="code">NuGet.config</code> file parameters or environment variables. See <a href="https://docs.microsoft.com/en-us/nuget/schema/nuget-config-file#config-section" data-external="true" target="_blank" rel="noopener noreferrer">NuGet documentation</a> for more details.</p><hr id="49585586"><p id="1ca7b113"><b id="90174233">See also:</b></p><p id="de649982"><b id="03ac8739">Administrator's Guide</b>: <a href="nuget-installer.html">NuGet Installer</a> | <a href="nuget-publish.html">NuGet Publish</a> | <a href="nuget-pack.html">NuGet Pack</a> | <a href="nuget-dependency-trigger.html">NuGet Dependency Trigger</a></p><hr id="62b06d81"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>