<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Configuring Build Parameters - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Configuring Build Parameters" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/managing-projects-and-build-configurations.md|Managing Projects and Build Configurations/creating-and-editing-build-configurations.md|Creating and Editing Build Configurations/configuring-build-parameters.md|Configuring Build Parameters/project-and-agent-level-build-parameters.md|Project and Agent Level Build Parameters/typed-parameters.md|Typed Parameters/predefined-build-parameters.md|Predefined Build Parameters" data-main-title="Configuring Build Parameters" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/configuring-build-parameters.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Configuring Build Parameters" id="configuring-build-parameters.md">Configuring Build Parameters</h1><p id="3ea933d6">On this page:</p><p id="b2d061eb"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#ConfiguringBuildParameters-TypesofBuildParameters">Types of Build Parameters</a></li><li class="list__item"><a href="#ConfiguringBuildParameters-Parameternamerestrictions">Parameter name restrictions</a></li><li class="list__item"><a href="#ConfiguringBuildParameters-DefiningBuildParametersinBuildConfiguration">Defining Build Parameters in Build Configuration</a></li><li class="list__item"><a href="#ConfiguringBuildParameters-UsingBuildParametersinBuildConfigurationSettings">Using Build Parameters in Build Configuration Settings</a></li><li class="list__item"><a href="#ConfiguringBuildParameters-UsingBuildParametersinVCSLabelingPatternandBuildNumber">Using Build Parameters in VCS Labeling Pattern and Build Number</a></li><li class="list__item"><a href="#ConfiguringBuildParameters-UsingBuildParametersintheBuildScripts">Using Build Parameters in the Build Scripts</a></li></ul></p><p id="10eea90f"><i id="97475124">Build Parameters</i> provide you with flexible means of sharing settings and a convenient way of passing settings into the build.</p><a name="TypesofBuildParameters"></a><a name="Types-of-Build-Parameters"></a><div class="chapter"><h2 id="ConfiguringBuildParameters-TypesofBuildParameters">Types of Build Parameters</h2><p id="1d3efc0f">Build parameters are name-value pairs, defined by a user or provided by TeamCity, which can be used in a build.</p><p id="f3244d40">There are three types of build parameters:</p><ul class="list _ul"><li class="list__item" id="61160b19"><p>Environment variables (defined using <code class="code">env.</code> prefix) are passed into the spawned build process as environment.</p></li><li class="list__item" id="9811d204"><p>System properties (defined using `system." prefix) are passed into the build scripts of the supported runners (for example, Ant, MSBuild) as build-tool specific variables.</p></li><li class="list__item" id="09b17452"><p>Configuration parameters (no prefix) are not passed into the build and are only meant to share settings within a build configuration. They are the primary means for customizing a build configuration which is based on a <a href="build-configuration-template.html">template</a> or uses a <a href="working-with-meta-runner.html">meta-runner</a>.</p></li></ul><p id="9629f442">There is a set of <a href="predefined-build-parameters.html">predefined parameters</a> provided by TeamCity and administrators can also add custom parameters.</p><p id="e422ea97">The parameters can be defined at different levels (in order of precedence):</p><ul class="list _ul"><li class="list__item" id="d6cc6210"><p>a specific build (via <a href="triggering-a-custom-build.html">Run Custom Build</a> dialog)</p></li><li class="list__item" id="1c09210a"><p>the <b id="41a9cccd">Parameters</b> page of <b id="fef923d7">Build Configuration Settings</b> or <a href="build-configuration-template.html">Build Configuration Template</a></p></li><li class="list__item" id="29447cdf"><p>the <b id="2f9a74f4">Parameters</b> page of <b id="46675860">Project Settings</b>; these affect all the build configurations and templates of the project and its subprojects</p></li><li class="list__item" id="76a20cf0"><p>an agent (the <code class="code">&lt;</code><a href="agent-home-directory.html"><code class="code">Agent home</code></a><code class="code">&gt;/conf/buildAgent.properties</code> file on the agent)</p></li></ul><p id="cd968753">Any textual setting can reference a parameter which makes the string in the format of <code class="code">%parameter.name%</code> be substituted with the actual value at the time of build. If there is a reference to a parameter which is not defined, it is considered an <a href="agent-requirements.html#Implicit-Requirements">implicit agent requirement</a> so the build will only run on the agents with the parameter defined.</p></div><a name="Parameternamerestrictions"></a><a name="Parameter-name-restrictions"></a><div class="chapter"><h2 id="ConfiguringBuildParameters-Parameternamerestrictions">Parameter name restrictions</h2><p id="a0ec827f"><b id="7ef51261">Since 2018.1</b>, the name of a configuration parameter should satisfy the following requirements:</p><ul class="list _ul"><li class="list__item" id="85cd7b5f"><p>it should only contain the following charactes: <code class="code">[a-zA-Z0-9._-*]</code></p></li><li class="list__item" id="d95cbf36"><p>it should start with an ASCII letter</p></li></ul><p id="aec66d05">TeamCity will show warning on edit parameters page if a parameter name does not satisfy these requirements.</p><p id="ee25c318">The references to parameters which names do not satisfy the above restrictions do not create an <a href="agent-requirements.html#Implicit-Requirements">implicit requirement</a>.</p></div><a name="DefiningBuildParametersinBuildConfiguration"></a><a name="Defining-Build-Parameters-in-Build-Configuration"></a><div class="chapter"><h2 id="ConfiguringBuildParameters-DefiningBuildParametersinBuildConfiguration">Defining Build Parameters in Build Configuration</h2><p id="57a54347">On the <b id="2e65c72a">Parameters</b> page of Build Configuration settings you can define the required system properties and environment variables to be passed to the build script and environment when a build is started. Note that you can redefine them when launching a <a href="triggering-a-custom-build.html">Custom Build</a>.</p><p id="1912c4aa">Build Parameters defined in a Build Configuration are used only within this configuration. For other ways, refer to <a href="project-and-agent-level-build-parameters.html">Project and Agent Level Build Parameters</a>.</p><p id="c4dd2c79">Any user-defined build parameter (system property or environment variable) can reference other parameters by using the following format:</p><div class="code-block" data-lang="bash">
%[env|system].property_name%
For example: system.tomcat.libs=%env.CATALINA_HOME%/lib/*.jar

</div></div><a name="UsingBuildParametersinBuildConfigurationSettings"></a><a name="Using-Build-Parameters-in-Build-Configuration-Settings"></a><div class="chapter"><h2 id="ConfiguringBuildParameters-UsingBuildParametersinBuildConfigurationSettings">Using Build Parameters in Build Configuration Settings</h2><p id="814fdff9">In most Build Configuration settings you can use a reference to a Build Parameter instead of using the actual value. Before starting a build, TeamCity resolves all references with the available parameters. If there are references that cannot be resolved, they are left as is and a warning will appear in the build log.</p><p id="098ce747">To make a reference to a build parameter, use its name enclosed in percentage signs: for example, <code class="code">%teamcity.build.number%</code>.</p><p id="520f97ba">Any text appearing between percentage signs is considered a reference to a property by TeamCity. If the property cannot be found in the build configuration, the reference becomes an <i id="1e9ca0ed">implicit agent requirement</i> and such build configuration can only be run on an agent with the property defined. The agent-defined value will be used in the build.</p><p id="4f75ca77">If you want to prevent TeamCity from treating the text in the percentage signs as reference to a property, use two percentage signs. Every occurrence of "<code class="code">%%</code>" in the values where property references are supported will be replaced to "<code class="code">%</code>" before passing the value to the build. For example, if you want to pass "<code class="code">%Y%m%d%H%M%S</code>" into the build, change it to "<code class="code">%%Y%%m%%d%%H%%M%%S</code>".</p><a name="WhereReferencesCanBeUsed"></a><a name="Where-References-Can-Be-Used"></a><h4 id="ConfiguringBuildParameters-WhereReferencesCanBeUsed">Where References Can Be Used</h4><div class="table-wrapper"><table width="100%" id="c633cdd7"><thead><tr id="fd0cf725" class="ijRowHead"><th id="c48658d6"><p id="4f77e17c">Group of settings</p></th><th id="cc77ba8b"><p id="b30d1e5e">References notes</p></th></tr></thead><tbody><tr id="59fdfbc8" class="ijRowOdd"><td id="0a6ff0a6"><p id="5b24d9b9">Build Runner settings, artifact specification</p></td><td id="22a69c78"><p id="d98764bb">any of the properties that are passed into the build</p></td></tr><tr id="e59747da" class="ijRowEven"><td id="2bedab4a"><p id="f483ad2f">User-defined properties and Environment variables</p></td><td id="c338bb5a"><p id="8e72538b">any of the properties that are passed into the build</p></td></tr><tr id="a9e08028" class="ijRowOdd"><td id="fd1011a0"><p id="52cca6f4">Build Number format</p></td><td id="40ecee89"><p id="acff76f0">only <a href="predefined-build-parameters.html">Predefined Server Build Properties</a></p></td></tr><tr id="ee207348" class="ijRowEven"><td id="8dd41b11"><p id="bc7cc01b">VCS root and checkout rules settings</p></td><td id="03e4fbc2"><p id="21a713a6">any of the properties that are passed into the build</p></td></tr><tr id="cf160d7d" class="ijRowOdd"><td id="05ad3c38"><p id="13d93368">VCS label pattern</p></td><td id="55f383ab"><p id="ab41c77c"><code class="code">system.build.number</code> and <a href="predefined-build-parameters.html">Server Build Predefined Properties</a></p></td></tr><tr id="a640f53e" class="ijRowEven"><td id="aab4876c"><p id="8380af2c">Artifact dependency settings</p></td><td id="834b1378"><p id="8375d6da">only <a href="predefined-build-parameters.html">Predefined Server Build Properties</a></p></td></tr></tbody></table></div><p id="a05904a8">If you reference a build parameter in a build configuration, and it is not defined there, it becomes an <a href="agent-requirements.html">agent requirement</a> for the configuration. The build configuration will be run only on agents that have this property defined.</p><p id="05e8843e">Password fields can also contain references to parameters, though in this case you cannot see the reference as it is masked as any password value.</p><p id="cda40651">For details on using and overriding parameters from dependencies, please refer to <a href="predefined-build-parameters.html#Dependencies-Properties">this section</a>.</p></div><a name="UsingBuildParametersinVCSLabelingPatternandBuildNumber"></a><a name="Using-Build-Parameters-in-VCS-Labeling-Pattern-and-Build-Number"></a><div class="chapter"><h2 id="ConfiguringBuildParameters-UsingBuildParametersinVCSLabelingPatternandBuildNumber">Using Build Parameters in VCS Labeling Pattern and Build Number</h2><p id="61921172">In Build number pattern and VCS labeling pattern, you can use the <code class="code">%[env|system].property_name%</code> syntax to reference the properties that are known on the server-side. These are <a href="predefined-build-parameters.html#Server-Build-Properties">server</a> and <a href="predefined-build-parameters.html#Configuration-Parameters">reference</a> predefined properties and properties defined in the settings of the build configuration on the <b id="c719d499">Parameters</b> page.<br>For example, VCS revision number: <code class="code">%build.vcs.number%</code>.</p></div><a name="UsingBuildParametersintheBuildScripts"></a><a name="Using-Build-Parameters-in-the-Build-Scripts"></a><div class="chapter"><h2 id="ConfiguringBuildParameters-UsingBuildParametersintheBuildScripts">Using Build Parameters in the Build Scripts</h2><p id="0e31ecbc">All build parameters starting with <code class="code">env.</code> prefix (environment variables) are passed into the build's process environment (omitting the prefix).</p><p id="ce44d0a6">All build parameters starting with <code class="code">system.</code> prefix (system properties) are passed to the supported <b id="9f608189">build script engines and can be referenced there by the property name</b>, without <code class="code">system.</code> prefix.<br>Note that this syntax will work <b id="878966e7">in the build script</b> (<b id="b76af1c6">not</b> in TeamCity settings):</p><ul class="list _ul"><li class="list__item" id="602cdf35"><p id="c1868512">For <a href="ant.html">Ant</a>, <a href="maven.html">Maven</a> and <a href="nant.html">NAnt</a>, use <code class="code">$(&lt;property name&gt;)</code></p></li><li class="list__item" id="4c2e3091"><p id="6fe4bd93">For <a href="msbuild.html">MSBuild</a> (Visual Studio 2005/2008 Project Files), use <code class="code">$(&lt;property name&gt;)</code>. Note that MSBuild does not support names with dots ("<code class="code">.</code>"), so you need to replace "<code class="code">.</code>" with "<code class="code">_</code>" when using the property inside a build script.</p></li><li class="list__item" id="ccbd5adc"><p id="6bd60d2d">For <a href="gradle.html">Gradle</a>: the TeamCity system properties can be accessed as Gradle properties (similar to the ones defined in the <code class="code">gradle.properties</code> file) and are to be referenced as follows:<br>a) name allowed as Groovy identifier (the property name does not contain dots):</p><div class="code-block" data-lang="bash">
   println "Custom user property value is $\{customUserProperty\}"

</div><p id="4fd09469">b) name not allowed as Groovy identifier (the property name contains dots: for example, <code class="code">build.vcs.number.1</code>): <code class="code">project.ext["build.vcs.number.1"]</code></p></li></ul><aside class="note " data-title="" rel="120bc23b" id="9da78502"><p id="760080db">Using <code class="code">teamcity["&lt;property name&gt;"]</code> is not recommended, although still supported.</p></aside><p id="420d8fca">When TeamCity starts a build process, the following precedence of the build parameters is used (those on top have higher priority):</p><ul class="list _ul"><li class="list__item" id="83a978fc"><p>parameters from the <a href="project-and-agent-level-build-parameters.html">Project and Agent Level Build Parameters</a> file.</p></li><li class="list__item" id="537f9067"><p><a href="predefined-build-parameters.html">predefined</a> parameters.</p></li><li class="list__item" id="83a0163d"><p>parameters defined in the Run Custom Build dialog.</p></li><li class="list__item" id="09c8f863"><p>parameters defined in the Build Configuration.</p></li><li class="list__item" id="e0f0ae9b"><p>parameters defined in the Project (the parameters defined for a project will be inherited by all its subprojects and build configurations. If required, you can redefine them in a build configuration).</p></li><li class="list__item" id="94525c53"><p>parameters defined in a template (if any).</p></li><li class="list__item" id="a882f227"><p>parameters defined in the agent's <code class="code">buildAgent.properties</code> file.</p></li><li class="list__item" id="b9852f4c"><p>environment variables of the Build Agent process itself.</p></li></ul><p id="0646fd72">The resultant set of parameters is also saved into a file which can be accessed by the build script. See <code class="code">teamcity.build.properties.file</code> system property or <code class="code">TEAMCITY_BUILD_PROPERTIES_FILE</code> environment variable description in <a href="predefined-build-parameters.html">Predefined Build Parameters</a> for details.</p><hr id="ead7a869"><p id="64cddfde"><b id="5533c010">See also:</b></p><p id="1091311f"><b id="7b3bc66b">Administrator's Guide</b>: <a href="project-and-agent-level-build-parameters.html">Project and Agent Level Build Parameters</a> | <a href="predefined-build-parameters.html">Predefined Build Parameters</a> | <a href="configuring-agent-requirements.html">Configuring Agent Requirements</a></p><hr id="5246b587"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>