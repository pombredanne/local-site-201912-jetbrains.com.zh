<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>Configuring Build Agent Startup Properties - Help | TeamCity</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v2/app.css"></head><body data-id="Configuring Build Agent Startup Properties" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/teamcity-configuration-and-maintenance.md|TeamCity Configuration and Maintenance/build-agents-configuration-and-maintenance.md|Build Agents Configuration and Maintenance/configuring-build-agent-startup-properties.md|Configuring Build Agent Startup Properties" data-main-title="Configuring Build Agent Startup Properties" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/configuring-build-agent-startup-properties.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search TeamCity Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Configuring Build Agent Startup Properties" id="configuring-build-agent-startup-properties.md">Configuring Build Agent Startup Properties</h1><p id="5072a8aa">In TeamCity a <a href="build-agent.html">build agent</a> contains two processes:</p><ul class="list _ul"><li class="list__item" id="2f429020"><p>Agent Launcher – a Java process that launches the agent process</p></li><li class="list__item" id="40804670"><p>Agent – the main process for a Build Agent; runs as a child process for the agent launcherWhether you run a build agent via the <code class="code">agent.bat|sh</code> script or as a Windows service, at first the agent launcher starts and then it starts the agent.</p></li></ul><aside class="note " data-title="" rel="6bae1c55" id="cb9e7353"><p id="67536a88">You do not need to specify any of the options unless you are advised to do by the TeamCity support team or you know what you are doing.</p></aside><p id="84b5960f">On this page:</p><p id="3092e96e"><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#ConfiguringBuildAgentStartupProperties-AgentProperties">Agent Properties</a><ul class="list _bullet"><li class="list__item"><a href="#ConfiguringBuildAgentStartupProperties-BuildAgentIsRunViaScript">Build Agent Is Run Via Script</a></li><li class="list__item"><a href="#ConfiguringBuildAgentStartupProperties-BuildAgentIsRunAsService">Build Agent Is Run As Service</a></li></ul></li><li class="list__item"><a href="#ConfiguringBuildAgentStartupProperties-AgentLauncherProperties">Agent Launcher Properties</a><ul class="list _bullet"><li class="list__item"><a href="#ConfiguringBuildAgentStartupProperties-BuildAgentIsRunViaScript2">Build Agent Is Run Via Script</a></li><li class="list__item"><a href="#ConfiguringBuildAgentStartupProperties-BuildAgentIsRunAsService2">Build Agent Is Run As Service</a></li></ul></li></ul></p><a name="AgentProperties"></a><a name="Agent-Properties"></a><div class="chapter"><h2 id="ConfiguringBuildAgentStartupProperties-AgentProperties">Agent Properties</h2><p id="63880240">For both processes above you can customize the final agent behavior by specifying system properties and variables for the agent to run with.</p><a name="BuildAgentIsRunViaScript"></a><a name="Build-Agent-Is-Run-Via-Script"></a><div class="chapter"><h3 id="ConfiguringBuildAgentStartupProperties-BuildAgentIsRunViaScript">Build Agent Is Run Via Script</h3><p id="24cbc082">Before you run the <code class="code">&lt;Agent Home&gt;\bin\agent.bat|sh</code> script, set the following environment variables:</p><ul class="list _ul"><li class="list__item" id="b56931a9"><p><code class="code">TEAMCITY_AGENT_MEM_OPTS</code> – set agent memory options (JVM options)</p></li><li class="list__item" id="edb1a7b8"><p><code class="code">TEAMCITY_AGENT_OPTS</code> – additional agent JVM options</p></li></ul></div><a name="BuildAgentIsRunAsService"></a><a name="Build-Agent-Is-Run-As-Service"></a><div class="chapter"><h3 id="ConfiguringBuildAgentStartupProperties-BuildAgentIsRunAsService">Build Agent Is Run As Service</h3><p id="09269eed">In the <code class="code">&lt;Agent Home&gt;\launcher\conf\wrapper.conf</code> file, add the following lines (one per option):</p><div class="code-block" data-lang="none">wrapper.app.parameter.&lt;N&gt;

</div><aside class="note " data-title="" rel="ab7ad5b3" id="553a061b"><p id="45b51877">You should add additional lines <i id="d45a9fb1">before</i> the following line in the <code class="code">wrapper.conf</code> file: <code class="code">wrapper.app.parameter.N=jetbrains.buildServer.agent.AgentMain</code>.</p><p id="268ee39c">Make sure to renumber all lines after the inserted ones.</p></aside></div></div><a name="AgentLauncherProperties"></a><a name="Agent-Launcher-Properties"></a><div class="chapter"><h2 id="ConfiguringBuildAgentStartupProperties-AgentLauncherProperties">Agent Launcher Properties</h2><p id="289201da">It's rare that you would ever need these. Most probably you would need affecting main agent process properties described above.</p><a name="BuildAgentIsRunViaScript"></a><a name="Build-Agent-Is-Run-Via-Script"></a><div class="chapter"><h3 id="ConfiguringBuildAgentStartupProperties-BuildAgentIsRunViaScript2">Build Agent Is Run Via Script</h3><p id="30bbbc98">Before you run the <code class="code">&lt;Agent Home&gt;\bin\agent.bat|sh</code> script, set the <code class="code">TEAMCITY_LAUNCHER_OPTS</code> environment variable.</p></div><a name="BuildAgentIsRunAsService"></a><a name="Build-Agent-Is-Run-As-Service"></a><div class="chapter"><h3 id="ConfiguringBuildAgentStartupProperties-BuildAgentIsRunAsService2">Build Agent Is Run As Service</h3><p id="933330b2">In the <code class="code">&lt;Agent Home&gt;\launcher\conf\wrapper.conf</code> file, add the following lines (one per option, the <code class="code">N</code> number should increase):</p><div class="code-block" data-lang="none">wrapper.java.additional.&lt;N&gt;

</div><aside class="note " data-title="" rel="c3b7f1cd" id="afb01e04"><p id="358b8670">Make sure to renumber all lines after the inserted ones.</p></aside><hr id="65383768"><p id="5c61f523"><b id="274a70e7">See also:</b></p><p id="3220f83f"><b id="7aa4ae58">Concepts</b>: <a href="agent-home-directory.html">Agent Home Directory</a><br><b id="96618571">Administrator's Guide</b>: <a href="configuring-teamcity-server-startup-properties.html">Configuring TeamCity Server Startup Properties</a></p><hr id="36fe2ff9"></div></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>