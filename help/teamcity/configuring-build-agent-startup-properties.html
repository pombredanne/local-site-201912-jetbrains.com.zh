<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v2/analytics.js"></script><title>配置Build Agent启动属性-帮助|帮助团队城市</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v2/app.css"></head><body  data-id="Configuring Build Agent Startup Properties" data-breadcrumbs="teamcity-documentation.md|TeamCity Documentation/administrator-s-guide.md|Administrator's Guide/teamcity-configuration-and-maintenance.md|TeamCity Configuration and Maintenance/build-agents-configuration-and-maintenance.md|Build Agents Configuration and Maintenance/configuring-build-agent-startup-properties.md|Configuring Build Agent Startup Properties" data-main-title="Configuring Build Agent Startup Properties" data-edit-url="https://github.com/JetBrains/teamcity-documentation/edit/2019.1/topics/configuring-build-agent-startup-properties.md"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索TeamCity帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>TeamCity 2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="configuring-build-agent-startup-properties.md" data-toc="Configuring Build Agent Startup Properties">配置构建代理启动属性</h1><p id="5072a8aa">在TeamCity中， <a href="build-agent.html">构建代理</a>包含两个过程：</p><ul class="list _ul"><li class="list__item" id="2f429020"><p>代理启动器–启动代理进程的Java进程</p></li><li class="list__item" id="40804670"><p>代理-构建代理的主要过程；作为代理启动器的子进程运行，是否通过<code class="code">agent.bat|sh</code>脚本或作为Windows服务，首先启动代理启动器，然后启动代理。</p></li></ul><aside class="note " rel="6bae1c55" id="cb9e7353" data-title=""><p id="67536a88">除非获得TeamCity支持团队的建议或您知道自己在做什么，否则无需指定任何选项。</p></aside><p id="84b5960f">在此页：</p><p id="3092e96e"></p><ul class="list" data-skip-index="skip"><li class="list__item"><a href="#ConfiguringBuildAgentStartupProperties-AgentProperties">代理属性</a><ul class="list _bullet"><li class="list__item"><a href="#ConfiguringBuildAgentStartupProperties-BuildAgentIsRunViaScript">Build Agent通过脚本运行</a></li><li class="list__item"><a href="#ConfiguringBuildAgentStartupProperties-BuildAgentIsRunAsService">Build Agent作为服务运行</a></li></ul></li><li class="list__item"><a href="#ConfiguringBuildAgentStartupProperties-AgentLauncherProperties">代理启动器属性</a><ul class="list _bullet"><li class="list__item"><a href="#ConfiguringBuildAgentStartupProperties-BuildAgentIsRunViaScript2">Build Agent通过脚本运行</a></li><li class="list__item"><a href="#ConfiguringBuildAgentStartupProperties-BuildAgentIsRunAsService2">Build Agent作为服务运行</a></li></ul></li></ul><p></p><a name="AgentProperties"></a><a name="Agent-Properties"></a><div class="chapter"><h2 id="ConfiguringBuildAgentStartupProperties-AgentProperties">代理属性</h2><p id="63880240">对于上述两个过程，您都可以通过指定系统属性和用于运行代理的变量来自定义最终的代理行为。</p><a name="BuildAgentIsRunViaScript"></a><a name="Build-Agent-Is-Run-Via-Script"></a><div class="chapter"><h3 id="ConfiguringBuildAgentStartupProperties-BuildAgentIsRunViaScript">Build Agent通过脚本运行</h3><p id="24cbc082">在运行之前<code class="code"><Agent Home>\bin\agent.bat|sh</code>脚本中，设置以下环境变量：</p><ul class="list _ul"><li class="list__item" id="b56931a9"><p><code class="code">TEAMCITY_AGENT_MEM_OPTS</code> –设置代理程序内存选项（JVM选项）</p></li><li class="list__item" id="edb1a7b8"><p><code class="code">TEAMCITY_AGENT_OPTS</code> –其他代理JVM选项</p></li></ul></div><a name="BuildAgentIsRunAsService"></a><a name="Build-Agent-Is-Run-As-Service"></a><div class="chapter"><h3 id="ConfiguringBuildAgentStartupProperties-BuildAgentIsRunAsService">Build Agent作为服务运行</h3><p id="09269eed">在里面<code class="code"><Agent Home>\launcher\conf\wrapper.conf</code>文件，添加以下行（每个选项一个）：</p><div class="code-block" data-lang="none">wrapper.app.parameter。<n>

</n></div><aside class="note " rel="ab7ad5b3" id="553a061b" data-title=""><p id="45b51877">你应该在以下行<i id="d45a9fb1">之前</i>添加额外的行<code class="code">wrapper.conf</code>文件： <code class="code">wrapper.app.parameter.N=jetbrains.buildServer.agent.AgentMain</code> 。</p><p id="268ee39c">确保在插入的行之后重新编号所有行。</p></aside></div></div><a name="AgentLauncherProperties"></a><a name="Agent-Launcher-Properties"></a><div class="chapter"><h2 id="ConfiguringBuildAgentStartupProperties-AgentLauncherProperties">代理启动器属性</h2><p id="289201da">您很少需要这些。您很可能需要影响上述的主要代理流程属性。</p><a name="BuildAgentIsRunViaScript"></a><a name="Build-Agent-Is-Run-Via-Script"></a><div class="chapter"><h3 id="ConfiguringBuildAgentStartupProperties-BuildAgentIsRunViaScript2">Build Agent通过脚本运行</h3><p id="30bbbc98">在运行之前<code class="code"><Agent Home>\bin\agent.bat|sh</code>脚本，设置<code class="code">TEAMCITY_LAUNCHER_OPTS</code>环境变量。</p></div><a name="BuildAgentIsRunAsService"></a><a name="Build-Agent-Is-Run-As-Service"></a><div class="chapter"><h3 id="ConfiguringBuildAgentStartupProperties-BuildAgentIsRunAsService2">Build Agent作为服务运行</h3><p id="933330b2">在里面<code class="code"><Agent Home>\launcher\conf\wrapper.conf</code>文件，添加以下几行（每个选项一个， <code class="code">N</code>数量应增加）：</p><div class="code-block" data-lang="none">wrapper.java.additional。<n>

</n></div><aside class="note " rel="c3b7f1cd" id="afb01e04" data-title=""><p id="358b8670">确保在插入的行之后重新编号所有行。</p></aside><hr id="65383768"><p id="5c61f523"><b id="274a70e7">也可以看看：</b></p><p id="3220f83f"><b id="7aa4ae58">概念</b> ： <a href="agent-home-directory.html">代理主目录</a><br><b id="96618571">管理员指南</b> ： <a href="configuring-teamcity-server-startup-properties.html">配置TeamCity服务器启动属性</a></p><hr id="36fe2ff9"></div></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v2/app.js"></script></body></html>