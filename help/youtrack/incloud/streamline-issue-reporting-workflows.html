<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>简化问题报告-帮助|帮助YouTrack InCloud</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="streamline-issue-reporting-workflows" data-breadcrumbs="Administration.xml|Administration/Workflow-Guide.xml|Workflows/Workflow-Use-Cases.xml|Use Cases for Workflows/streamline-issue-reporting-workflows.xml|Streamline Issue Reporting" data-main-title="Streamline Issue Reporting"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack InCloud帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack InCloud 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="streamline-issue-reporting-workflows.xml" data-toc="streamline-issue-reporting-workflows">简化问题报告</h1>    <p id="b1e87502">您可以设置基本的问题报告流程，而无需工作流程。这一切都始于项目中自定义字段的配置。对于大多数自定义字段，您可以选择该字段可以为空还是不能为空。</p>        <p id="5fc5a7dc">如果该字段不能为空，则必须在配置中分配一个默认值。该值自动分配给项目中报告的每个问题。此外，您不能清除该字段的值，只能将其替换为另一个值。</p>    <p id="971b5b0c">通过定义字段是否可以为空以及相应地设置默认值，可以有效地设置项目中新问题的起点。</p>    <p id="2c257b8a">尽管现场配置选项很有用，但它们有一些限制。空值和默认值无法解决许多用例：</p>    <ul class="list _ul"><li class="list__item" id="ce95e191"><p>您想要在<span class="control">截止日期</span>字段中输入值。存储简单值（例如字符串，整数，浮点数，日期或句点）的字段不能存储默认值。在新期刊中，这些字段始终为空。</p></li><li class="list__item" id="52444737"><p>您希望记者在不建议默认值的情况下在特定字段中设置值。例如，您想将每个任务分配给<span class="control">Subsystem</span> ，但是没有默认建议的逻辑值。</p></li><li class="list__item" id="ed2327a5"><p>您要动态设置默认值。例如，您始终希望<span class="control">截止日期</span>是从今天起两周。</p></li><li class="list__item" id="a7d8db60"><p>您想要为客户提供报告问题的模板。该模板包含用于自定义字段的预定义值和默认描述。</p></li><li class="list__item" id="97f934e1"><p>作为前一种情况的扩展，您想为客户提供同一项目中问题模板的集合。每个模板根据为自定义字段值选择的值（例如<span class="control">Type</span> ）而有所不同，或者可以使用菜单操作将其应用于草稿。</p></li></ul>        <p id="7f581e42">可以使用各种工作流程规则来实现对这些用例的支持，其中一些规则已作为YouTrack中的默认工作流程提供。</p>  <div class="chapter"><h2 id="make-field-mandatory" data-toc="streamline-issue-reporting-workflows#make-field-mandatory">强制执行字段</h2>    <p id="2e5ff25b">第一种情况是将简单字段强制为新问题。这种情况由<code class="code">issue.fields.required(field, message)</code>方法。此方法检查该字段是否为空。如果是这样，则会回滚当前更改，并向报告者显示一条消息。看看<code class="code">Require due dates for submitted issues</code> <a href="Workflow-Due-Date.html">截止日期</a>工作流程中的规则：</p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; var工作流程= require（'@ jetbrains / youtrack-scripting-api / workflow'）; Exports.rule =实体。Issue.onChange（{标题：workflow.i18n（'提交问题需要截止日期'），警卫：function（ctx）{return ctx.issue.becomesReported;}，操作：function（ctx）{ctx.issue.fields。必填（ctx。DueDate，working.i18n（'您必须设置截止日期！'））; }，要求：{DueDate：{类型：实体。Field.dateType，名称：“到期日”}}}）;</div>  <aside class="prompt" rel="27d3c0fa" id="acb38386" data-type="note" data-title="Workflow Localization">    <p id="aae9b59f">YouTrack中的默认工作流程使用<code class="code">workflow.i18n(...)</code>本地化工作流消息的方法。在编写自己的工作流程时，您始终会知道YouTrack安装的语言，因此无需使用此方法。</p>    <p id="621c78f2">如果要在默认工作流程中编辑消息，请删除此方法，并将其用法替换为简单的消息文本字符串。有关详细信息，请参阅<a href="Workflow-Localization.html">本地化工作流消息</a> 。</p>  </aside>    <p id="08813f3f">请注意此规则中的警卫。该警卫确保在报告者填写问题内容并尝试创建问题之后，只启动一次检查。</p>      <p id="4a098cac">如果要这样做，则不能为提交的问题删除此字段的值，请按以下方式更新防护：</p>    <div class="code-block" data-lang="javascript">后卫：function（ctx）{return ctx.issue.isReported; }，</div>    <p id="8b2c19a8">使用相同的规则可以解决使报告者在特定字段中设置值的用例。只需选择一个自定义字段即可为空，并在报告新问题时检查它是否为空。的<code class="code">issue.fields.required(field, message)</code>该方法对所有类型的自定义字段都相同。</p>  </div>  <div class="chapter"><h2 id="set-dynamic-defaults" data-toc="streamline-issue-reporting-workflows#set-dynamic-defaults">设置动态默认值</h2>    <p id="4b80d181">您可以使用工作流来自动计算字段的默认值。例如，以下规则将“到期日期”字段的值设置为距当前日期两周的日期：</p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; var WEEK_IN_MS = 7 * 24 * 60 * 60 * 1000; Exports.rule =实体。Issue.onChange（{title：'设置提交问题的截止日期'，guard：function（ctx）{return ctx.issue.becomesReported &&！ctx.issue.fields。截止日期; }，操作：function（ctx）{ctx.issue.fields。DueDate = Date.now（）+ 2 * WEEK_IN_MS; }，要求：{DueDate：{类型：实体。Field.dateType，名称：“到期日”}}}）；</div>  </div>  <div class="chapter"><h2 id="build-issue-templates" data-toc="streamline-issue-reporting-workflows#build-issue-templates">构建问题模板</h2>    <p id="0a6beacb">默认工作流程之一支持的另一种常见情况是，对新问题添加了默认描述。这是在我们的<a href="Workflow-Default-Description.html">默认描述</a>工作流程中如何实现的：</p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; var工作流程= require（'@ jetbrains / youtrack-scripting-api / workflow'）; Exports.rule =实体。Issue.onChange（{标题：workflow.i18n（'为外部用户插入默认描述模板'），警卫：function（ctx）{var issue = ctx.issue; return！issue.isReported &&！issue.becomesReported &&！问题。描述; }，操作：function（ctx）{ctx.issue.description = working.i18n（'哪些步骤将重现此问题？'）+“ \ n1。\ n2。\ n3。\ n \ n” +工作流程。i18n（“预期结果是什么？“）+” \ n \ n“ +工作流程。i18n（”会发生什么情况？“）+” \ n \ n“ +工作流.i18n（”请在下面提供其他信息。“）+” \ n“ +工作流.i18n（”如果可能，请附加屏幕截图“）+” \ n“;}，要求： {} }）;</div>    <p id="49597c06">此工作流程规则为每个新问题设置默认描述。记者在新问题中编辑任何值（例如，键入摘要或更改项目）后，就会立即触发此规则。由于技术限制，此规则在“ <span class="control">新问题”</span>页面打开时无法应用。</p>      <p id="6b74490e">您可以扩展此工作流程，以使报告者可以在不同模板之间进行选择，而无需手动填写大量数据。例如，您可以对功能请求和错误报告使用不同的模板：</p>    <ul class="list _ul"><li class="list__item" id="da2398d4"><p>对于错误报告，您需要描述中的重现步骤（STR）。</p></li><li class="list__item" id="a3ebdc27"><p>对于功能，您需要建议和动力（原因和原因）。您还希望将“ <span class="control">修订版本”</span>字段的值设置为<span class="control">Backlog</span> 。</p></li></ul>    <p id="67cfbf82">对于这种情况，最简单的方法包括两部分：</p>    <ul class="list _ul"><li class="list__item" id="d362aa71"><p>默认情况下，将“ <span class="control">类型”</span>字段为空。</p></li><li class="list__item" id="6289ee20"><p>当报告程序开始创建问题时，强制设置“ <span class="control">类型”</span>字段的值：</p><div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; Exports.rule =实体。Issue.onChange（{标题：“创建新问题时选择类型”，警卫：function（ctx）{var issue = ctx.issue; return！issue.isReported &&！issue.becomesReported &&！问题域。键入&&！issue.isChanged（'project'）; }，操作：function（ctx）{ctx.issue.fields.required（ctx。类型，“请在编辑前选择问题类型！'）; }，要求：{类型：{类型：实体。EnumField.fieldType}}}）;</div>      <p></p></li><li class="list__item" id="10726ce7"><p>添加一个规则，该规则根据“ <span class="control">类型”</span>字段中的选择来设置值：</p><div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; Exports.rule =实体。Issue.onChange（{标题：“根据类型设置问题模板”，警卫：function（ctx）{var issue = ctx.issue; return！issue.isReported &&！issue.becomesReported &&！issue.description && issue.fields.isChanged（ctx。类型）&&！issue.fields.oldValue（ctx。类型）; }，动作：function（ctx）{var issue = ctx.issue; var typeIs = function（value）{返回issue.fields。Type.name === value.name; };如果（typeIs（ctx。类型。Bug））{issue.description ='哪些步骤将重现问题？'+'\ n1。\ n2。\ n3。\ n \ n'+'预期结果是什么？\ n \ n'+'相反会发生什么？\ n'; } else if（typeIs（ctx。类型。功能））{issue.description ='应实施什么？\ n \ n'+'为什么需要此功能？\ n';问题域。FixVersions.add（ctx。FixVersions。积压）; }}，要求：{类型：{类型：实体。EnumField.fieldType，错误：{}，功能：{}}，修订版本：{类型：实体。ProjectVersion.fieldType，多：真，名称：“修复版本”，待办事项：{}}}}）；</div>      <p></p></li></ul>  </div>  <div class="chapter"><h2 id="add-templates-to-actions-menu" data-toc="streamline-issue-reporting-workflows#add-templates-to-actions-menu">将模板添加到“操作”菜单</h2>    <p id="8eeb23ce">支持该用例的另一种方法是以操作的形式提供模板列表。操作规则是工作流规则的一种特殊类型。每个操作规则都与命令和“ <span class="control">命令对话框”</span>下拉菜单中显示的操作列表中的一项相关联。当用户执行命令或单击相应项目时，将触发这些规则。有关详细信息，请参阅<a href="action-rules.html">操作规则</a> 。</p>    <p id="cfca6636">这是功能请求模板的示例操作规则：</p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; Exports.rule =实体。Issue.action（{title：'Feature template'，command：'feature-template'，guard：function（ctx）{var issue = ctx.issue; return！issue.isReported &&！issue.becomesReported &&！问题。描述; }，动作：function（ctx）{var issue = ctx.issue; issue.description ='应实施什么？\ n \ n'+'为什么需要此功能？\ n';问题域。类型= ctx。类型。特征;问题域。FixVersions.add（ctx。FixVersions。积压）; }，要求：{类型：{类型：实体。EnumField.fieldType，功能：{}}，修订版本：{类型：实体。ProjectVersion.fieldType，多：真，名称：“修复版本”，待办事项：{}}}}）；</div>    <p id="e8f99a73">要让记者选择模板，请先检查说明是否为空。如果是这样，建议他们从菜单中选择一个模板。</p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; var工作流程= require（'@ jetbrains / youtrack-scripting-api / workflow'）; Exports.rule =实体。Issue.onChange（{标题：“在创建新问题时选择模板”，警卫：function（ctx）{var issue = ctx.issue; return！issue.isReported &&！issue.becomesReported &&！问题。描述; }，操作：function（ctx）{working.check（false，'请在操作菜单中选择模板之一！'）; }，要求：{类型：{类型：实体。EnumField.fieldType}}}）;</div>    <p id="01869c80">对于简单情况，基于字段的方法更好。当您具有由字段值的组合定义的复杂模板时，请使用基于操作的方法。</p>  </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="prevent-unwanted-updates-workflows.html">防止不需要的更新</a> <a class="navigation-links__next" href="generate-issues-automatically-workflows.html">自动生成问题</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>