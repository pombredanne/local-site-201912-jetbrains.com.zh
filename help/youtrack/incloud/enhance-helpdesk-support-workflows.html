<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>增强服务台支持-帮助|帮助YouTrack InCloud</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="enhance-helpdesk-support-workflows" data-breadcrumbs="Administration.xml|Administration/Workflow-Guide.xml|Workflows/Workflow-Use-Cases.xml|Use Cases for Workflows/enhance-helpdesk-support-workflows.xml|Enhance Helpdesk Support" data-main-title="Enhance Helpdesk Support"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack InCloud帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack InCloud 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="enhance-helpdesk-support-workflows.xml" data-toc="enhance-helpdesk-support-workflows">增强服务台支持</h1>    <p id="0ca48995">YouTrack提供了三个主要功能，可让您将其用作服务台：</p>    <ul class="list _ul"><li class="list__item" id="daf189a1"><p><a href="Mailbox-Integration.html">邮箱集成</a> ，它定期从一个或多个电子邮件服务器中提取电子邮件，并对其进行处理以创建问题和评论。</p></li><li class="list__item" id="4a0cf186"><p>电子邮件通知，可让您将消息发送到任何电子邮件地址。</p></li><li class="list__item" id="6a5f7b2d"><p>当然，还有工作流，它可以帮助您将所有内容粘合在一起！</p></li></ul>  <p id="f5d169cc">YouTrack支持的基本流程如下：</p>  <ul class="list _ul"><li class="list__item" id="abb09561"><p>客户向您的支持收件箱发送电子邮件。这在YouTrack中创建了一个新问题。</p></li><li class="list__item" id="ffc45b3d"><p>支持工程师通过对问题添加评论来响应查询。这将生成电子邮件通知，该电子邮件通知将作为对原始电子邮件的回复发送回客户。</p></li><li class="list__item" id="c0b7cd7e"><p>该自定义回复电子邮件通知。响应由YouTrack处理，并作为注释添加到原始问题中。</p></li></ul>  <p id="8583547e">您可以在我们的<a href="Use-YouTrack-as-a-Help-Desk.html">帮助台教程中</a>找到此功能的详细说明。</p>  <div class="chapter"><h2 id="support-service-level-agreements" data-toc="enhance-helpdesk-support-workflows#support-service-level-agreements">支持服务级别协议</h2>    <p id="3eff06be">已建立的产品支持团队的重要组成部分是服务水平协议（SLA）。这有助于设定客户期望获得其请求和评论答案的期望。</p>    <p id="055ecfd3">考虑具有以下规则的SLA：</p>    <ul class="list _ul"><li class="list__item" id="437cfc49"><p>营业时间为欧洲中部时间10:00 – 18:00。</p></li><li class="list__item" id="00b8a97e"><p>客户可以在三个小时内收到对最初支持请求的答复。</p></li><li class="list__item" id="585c956c"><p>后续请求的响应时间为四个小时。</p></li></ul>    <p id="42549ee3">您可以通过工作流程在YouTrack中支持SLA。在YouTrack中，我们将自定义帮助台项目的设置，如下所示：</p>    <ul class="list _ul"><li class="list__item" id="0d9d5e83"><p id="3c32fceb">我们用于服务台的项目在“状态”字段中使用以下值：</p>      <div class="table-wrapper"><table width="100%" id="7831fe81"><thead><tr id="c546d95e" class="ijRowHead"><th id="e47ccbb9" width="20%"><p>值</p></th><th id="d92d219b"><p>描述</p></th></tr></thead><tbody><tr id="fd2f1d86" class="ijRowOdd"><td id="d84b5334"><p>新</p></td><td id="41141991"><p>默认值。创建后分配给票证。</p></td></tr><tr id="bab42224" class="ijRowEven"><td id="fbd8d698"><p>打开</p></td><td id="a17e6b3b"><p>分配给等待支持团队做出反应的故障单。</p></td></tr><tr id="c05ee6ad" class="ijRowOdd"><td id="bf5d05e7"><p>待定</p></td><td id="84ebda38"><p>分配给等待客户反应的票证。</p></td></tr><tr id="b92e68d6" class="ijRowEven"><td id="677aeea6"><p>等候接听</p></td><td id="93ee57bb"><p>用于需要开发人员输入的票证。</p></td></tr><tr id="74c21218" class="ijRowOdd"><td id="6956b634"><p>固定</p></td><td id="2a9aae64"><p>分配给已解决的故障单。</p></td></tr></tbody></table></div></li><li class="list__item" id="40999b84"><p>对于支持团队未回答的<span class="control">新</span>票证，在创建问题后三个工作小时内添加“ <span class="control">过期”</span>标签。</p></li><li class="list__item" id="8689cbf9"><p>对于<span class="control">公开</span>票，在添加了客户的最后评论之后四个工作小时内添加了<span class="control">过期</span>标记。</p></li><li class="list__item" id="89b1ca33"><p>为了对票证进行排序，应添加一个自定义字段： <span class="control">在之前答复</span> 。此字段将值存储为日期和时间。</p></li></ul>    <p id="3453364c">当我们设置这些字段并附加相应的工作流规则时，支持团队可以使用以下查询从按响应时间排序的队列中提取票证：</p>    <div class="code-block" data-lang="none"><code class="code-block__wrapper">State: Open, New sort by: {To reply before} asc</code></div>    <p id="a8b09f52">首先，我们需要一个定义工作时间的实用程序功能。这被保存为自定义脚本，名称为<code class="code">time-operations</code> 。</p>    <div class="code-block" data-lang="javascript">//在服务器时区中定义的工作日的开始时间。var START = 10; //在服务器时区中定义的工作日的结束时间。var FINISH = 18; //工作日的时长，以小时为单位。var BUSINESS_DAY_LENGTH =完成-开始； var HOUR_IN_MS = 60 * 60 * 1000; var DAY_IN_MS = 24 * HOUR_IN_MS; / * * @param {日期} [日期]要检查的日期是否在营业时间间隔内* @返回{boolean}`true`是日期在*个工作日的[START，FINISH）时间间隔内，否则为`false` * / var isWithinBusinessHours = function（date）{var date1 = new Date（date）; var dayOfWeek = date1.getDay（）;如果（dayOfWeek === 0 || dayOfWeek === 1）{返回false； } var hour = date1.getHours（）;返回（小时> = START &&小时<完成）； }; / * * @param {Number} [日期]从纪元开始的日期（以毫秒为单位）* @param {Number} [hours]要添加到该日期的小时数* @返回{Number}相对于营业时间的最终日期，如上定义* / var addBusinessHours = function（date，hours）{var result = date + hours * HOUR_IN_MS;如果（！isWithinBusinessHours（new Date（result）））{//现在是晚上，让我们跳过夜晚。结果+ =（24-BUSINESS_DAY_LENGTH）* HOUR_IN_MS; }如果（！isWithinBusinessHours（new Date（result）））{//现在是周末，我们也跳过它。结果+ = 2 * DAY_IN_MS;返回结果； }; exports.addBusinessHours = addBusinessHours;</div>    <p id="972a677d">现在，我们可以根据我们的SLA设置“在此<span class="control">之前答复”</span>字段的值。第一条规则是针对初始响应的：</p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; var timeOp = require（'./ time-operations'）; //回复新问题的营业时间。var NEW_ISSUE_SLA = 3; Exports.rule =实体。Issue.onChange（{title：'New Issue SLA'，guard：function（ctx）{return ctx.issue.becomesReported;}，action：function（ctx）{ctx.issue.fields。ToReply = timeOp.addBusinessHours（Date.now（），NEW_ISSUE_SLA）; }，要求：{ToReply：{类型：实体。Field.dateTimeType，名称：“要在此之前回复”}}}））；</div>    <p id="9c206396">第二条规则是跟进：</p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; var timeOp = require（'./ time-operations'）; //回复已回答问题的营业时间。var REPLIED_ISSUE_SLA = 4; Exports.rule =实体。Issue.onChange（{title：'Replied Issue SLA'，guard：function（ctx）{var comments = ctx.issue.comments; return comments.added.isNotEmpty（）&& comments.added.last（）。author.login = == ctx.helpdeskBot.login;}，操作：函数（ctx）{ctx.issue.fields。ToReply = timeOp.addBusinessHours（Date.now（），REPLIED_ISSUE_SLA）; }，要求：{ToReply：{类型：实体。Field.dateTimeType，名称：“要在此之前回复”}，//这是在邮件规则设置中设置为报告者的用户：helpdeskBot：{类型：实体。用户，登录：'helpdesk-bot'}}）;</div>    <p id="c360d245">违反SLA时，以下规则将<span class="control">过期</span>标记添加到票证：</p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; Exports.rule =实体。Issue.onSchedule（{title：'设置“过期”标签'，cron：'0 * * * *？'，搜索：“状态：打开，新建：{要在此之前答复}标签：-过期”，操作：function（ctx）{var toReply = ctx.issue.fields。回答;如果（toReply <Date.now（））{ctx.issue.addTag（ctx.overdue.name）; }}，要求：{ToReply：{类型：实体。Field.dateTimeType，名称：“要在此之前答复”}，逾期：{类型：实体。IssueTag}}}）;</div>    <p id="590fd88c">最后，我们在票证不再需要支持团队答复的情况下，从“在此<span class="control">之前答复”</span>字段中清除值，并删除“ <span class="control">过期”</span>标签：</p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; Exports.rule =实体。Issue.onChange（{title：'当发布不是“ New”或“ Open”时，清除“ Tofore before”字段并删除“ Overdue”标签”，注意：function（ctx）{var fs = ctx.issue.fields;返回fs.isChanged（ctx。状态）&& fs。状态&& fs。State.name！== ctx。州。新名称&& fs。State.name！== ctx。州。Open.name; }，动作：function（ctx）{var issue = ctx.issue;问题域。ToReply = null;如果（issue.hasTag（ctx.overdue.name））{issue.removeTag（ctx.overdue.name）; }}，要求：{州：{类型：实体。State.fieldType，打开：{}，新建：{}}，ToReply：{类型：实体。Field.dateTimeType，名称：“要在此之前答复”}，逾期：{类型：实体。IssueTag}}}）;</div>    <p id="ac1a40d3">您可以根据支持SLA的条款对这些规则应用其他逻辑，例如：</p>    <ul class="list _ul"><li class="list__item" id="55701f78"><p>您可以为每个故障单分配优先级，并根据优先级更改SLA响应时间。</p></li><li class="list__item" id="6f3ea153"><p>您可以设置状态机来限制“ <span class="control">状态”</span>字段的值之间的合法转换。</p></li><li class="list__item" id="c08813b9"><p>如果您有一支在不同时区和工作时间工作的国际团队，则可以调整<code class="code">time-operations</code>脚本，以将支持团队的每个成员都考虑在内。</p></li></ul>  </div>  <div class="chapter"><h2 id="assign-tickets-round-robin-rotations" data-toc="enhance-helpdesk-support-workflows#assign-tickets-round-robin-rotations">循环分配票证</h2>    <p id="69417586">另一种流行的服务台做法是根据循环机制分配新票证。这样可以平衡支持团队成员之间的工作量。这个想法很简单-每当出现新票证时，便将其分配给分配了最少<span class="control">新</span>票证和<span class="control">公开</span>票证的团队成员。</p>    <p id="13ae1f62">实现很简单。创建新票证后，工作流规则将检查每个支持工程师的工作量。票数最少的团队成员被选为受让人。</p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; var search = require（'@ jetbrains / youtrack-scripting-api / search'）; Exports.rule =实体。Issue.onChange（{标题：“通过Round Robin方案自动设置受理人”，防护：function（ctx）{var issue = ctx.issue；返回issue.becomesReported &&！问题域。受让人； }，操作：function（ctx）{var Assignees = ctx。受让人值; var number = {}; Assignees.forEach（function（assignee）{number [assignee.login] = 0;}）; var issue = search.search（ctx.issue.project，'#unresolved has：Assignee'）; issue.forEach（function（issue）{number [issue.fields。Assignee.login] + = 1; }）; var min =数字。MAX_VALUE; var user = null; Assignees.forEach（function（assignee）{if（numbers [assignee.login] <min）{min =数字[assignee.login]; user = Assignee;}））; ctx.issue.fields。受让人=用户； }，要求：{受让人：{类型：实体。User.fieldType}}}）;</div>    <p id="67498ebb">您不仅可以将这种方案用于服务台，还可以将其用于想要平衡工作量的任何过程。而且，平衡新任务的规则可能要复杂得多。例如，您可以为过期的票证分配更高的权重。</p>  </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="generate-time-reports-workflow.html">生成时间报告</a> <a class="navigation-links__next" href="send-internal-newsletters-workflow.html">发送内部新闻通讯</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>