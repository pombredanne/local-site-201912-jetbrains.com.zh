<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>从另一台YouTrack服务器导入问题-帮助|帮助YouTrack InCloud</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Import-from-Another-YouTrack-Server" data-breadcrumbs="Migrating-to-YouTrack.xml|Migrate to YouTrack/Import-from-Another-YouTrack-Server.xml|Import Issues from Another YouTrack Server" data-main-title="Import Issues from Another YouTrack Server"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack InCloud帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack InCloud 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Import-from-Another-YouTrack-Server.xml" data-toc="Import-from-Another-YouTrack-Server">从另一台YouTrack服务器导入问题</h1>    <p id="be5403a6">此页面提供有关使用<a href="https://github.com/JetBrains/youtrack-python-scripts" rel="noopener noreferrer" data-external="true" target="_blank">Python导入脚本</a>将问题从一台YouTrack服务器<a href="https://github.com/JetBrains/youtrack-python-scripts" rel="noopener noreferrer" data-external="true" target="_blank">导入</a>到另一台YouTrack服务器的说明。使用这些说明可以：</p>    <ul class="list _ul"><li class="list__item" id="7278c988"><p><a href="#import-all">从另一个YouTrack服务器中的项目导入所有问题</a> 。</p></li><li class="list__item" id="745dd854"><p><a href="#import-one">从另一台YouTrack服务器导入单个问题</a> 。</p></li></ul>                <p id="342b2391">在开始之前，请考虑您的选择。仅当您要<i id="c18b2837">迁移数量有限的项目或问题</i>时，才应遵循这些说明。如果要将所有问题从一个InCloud实例转移到另一个实例，请<a href="mailto:youtrack-incloud-support@jetbrains.com" data-external="true">提交支持请求</a> 。YouTrack InCloud支持团队可以将数据库从旧的InCloud实例迁移到新的域。</p>        <p id="6306bfa9">此过程需要执行以下步骤：</p>        <ol class="list _decimal"><li class="list__item" id="ee6fe611"><p><a href="#set-up-your-environment">设置您的本地环境</a> 。</p></li><li class="list__item" id="5e157324"><p>导入您的问题。您可以<a href="#import-all">从项目导入所有问题，</a>也可以<a href="#import-one">导入单个问题</a> 。</p></li></ol>    <div class="chapter"><h2 id="import-issues-permissions" data-toc="Import-from-Another-YouTrack-Server#import-issues-permissions">权限</h2>        <p id="8d1d4e70">您用于登录源YouTrack服务器的用户帐户需要具有读取问题及其所有属性（包括要导入的项目中的自定义字段）的权限。您用于登录目标YouTrack服务器的用户帐户需要具有创建和更新项目，创建用户，读取问题专用字段以及更新问题专用字段的权限。我们建议您对源服务器和目标服务器都使用具有<span class="control">系统管理员</span>角色的帐户。</p>    </div>    <div class="chapter"><h2 id="import-issue-details" data-toc="Import-from-Another-YouTrack-Server#import-issue-details">导入细节</h2>        <p id="54f34ec9">从其他YouTrack服务器导入问题时，请注意以下机制：</p>        <ul class="list _ul"><li class="list__item" id="59560b82">                <p id="c1e6430d">问题是根据每个项目导入的。源项目由其指定<code class="code">projectID</code> 。导入问题时，也将导入问题属性中引用的所有实体。这包括用户（来自<span class="control">Reporter</span>和<span class="control">Assignee之</span>类的问题字段）和自定义字段的值集。</p>                <aside class="prompt" rel="c1e6430d" id="b993af0a" data-type="warning" data-title="">                    <p id="fcab1df4">导入数据中对用户的引用将映射到YouTrack中的现有帐户。如果找不到匹配项，则会创建一个新的用户帐户。</p>                    <p id="a9a668b8">根据您的订阅计划，为导入的用户分配了许可证。对于超出您的每用户许可限制的用户，导入的用户被标记为禁止用户。</p>                    <p id="9e453c89">有关更多信息，请参见<a href="Ban-User-Accounts.html">禁止用户帐户</a> 。</p>                </aside>            </li><li class="list__item" id="ce4e1ec2"><p>导入用户时，将为用户帐户分配一个随机生成的密码。要使用源服务器上的凭据登录到目标YouTrack服务器，用户必须使用“ <span class="control">重置密码”</span>链接来创建新密码。</p></li><li class="list__item" id="57fa338e"><p>仅从源YouTrack服务器导入目标项目中使用的自定义字段。要确保从源服务器导入所有数据，请检查目标服务器中的项目，并验证它是否包含正确数量和类型的自定义字段。</p></li></ul>    </div>    <div class="chapter"><h2 id="set-up-your-environment" data-toc="Import-from-Another-YouTrack-Server#set-up-your-environment">设置环境</h2>        <p id="03635e68"><a href="https://github.com/JetBrains/youtrack-python-scripts" rel="noopener noreferrer" data-external="true" target="_blank">Python导入脚本</a>支持“导入到YouTrack”。这些脚本基于YouTrack REST API构建。实际上，您实际上不需要使用Python进行任何编程，但是您确实需要安装Python和包含导入脚本的软件包。</p>        <section class="procedure-steps"><h3 id="c09f84e5">设置环境：</h3><ol class="list _decimal"><li class="list__item" id="9ed73d70"><p id="0c9ffe7a">下载并安装<a href="https://www.python.org/downloads/release/python-2714/" rel="noopener noreferrer" data-external="true" target="_blank">Python</a> 。Python客户端库与Python 2.7+兼容。不支持Python 3版本。您可以选择自己喜欢的安装目录。</p>                <p id="1418be89">macOS，CentOS，Red Hat Enterprise Linux（RHEL）和Ubuntu的最新版本均随附Python 2.7。如果使用任何这些操作系统，请继续下一步。</p></li><li class="list__item" id="6c82abae">                <p id="d40d2183">安装包含导入脚本的软件包。打开操作系统支持的命令行界面，然后输入以下命令：</p><div class="code-block" data-lang="none"><code class="code-block__wrapper">pip install youtrack-scripts</code></div>                <p></p>                <ul class="list _ul"><li class="list__item" id="360a72bd"><p>导入脚本安装在您的本地环境中。</p></li><li class="list__item" id="dfe53660"><p>的<code class="code">youtrack</code>包含YouTrack REST API的Python客户端库的软件包会自动作为依赖项安装。</p></li></ul>                <p id="e4bce17e">如果您不想全局安装软件包，则只能使用以下命令为您的用户帐户安装软件包：</p><div class="code-block" data-lang="none"><code class="code-block__wrapper">pip install --user youtrack-scripts</code></div>                <p></p>            </li></ol></section>    </div>    <div class="chapter"><h2 id="import-all" data-toc="Import-from-Another-YouTrack-Server#import-all">导入项目中的所有问题</h2>        <p id="4a6eea83">Python脚本可让您一次从源项目中导入所有问题。目标项目是自动创建的。</p>        <p id="54e81b7c">如果您只想导入单个问题，请参阅“ <a href="#import-one">导入单个问题”</a> 。</p>        <section class="procedure-steps"><h3 id="import-procedure">导入项目中的所有问题：</h3><aside class="prompt" rel="import-procedure" id="21f366c6" data-type="tip" data-title="">                <p id="60c1aca5">此过程需要多个权限。使用被授予源服务器和目标服务器<span class="control">系统管理员</span>角色的帐户。</p>            </aside><ol class="list _decimal"><li class="list__item" id="db3debf1"><p>打开操作系统支持的命令行界面。</p></li><li class="list__item" id="beffe4e0"><p>如有必要，将当前目录更改为Python的安装目录。例如（Windows）：</p><div class="code-block" data-lang="none"><code class="code-block__wrapper">cd C:\Python27</code></div><p></p></li><li class="list__item" id="c2f19420">                <p id="dcf009d6">输入以下命令：</p>                    <div class="code-block" data-lang="none"><code class="code-block__wrapper">youtrack2youtrack [OPTIONS] AUTH_OPTIONS source_url target_url [projectId ...]</code></div>                <aside class="prompt" rel="1cc4cf82" id="5c52586a" data-type="note" data-title=""><p>最新版本的导入脚本支持使用永久令牌或密码在YouTrack服务中进行身份验证。我们强烈建议您使用永久令牌。另外，请注意，提供身份验证数据的语法已更改。现在，您必须提供它们作为命令选项。</p></aside>                    <p id="a617ee5c">将命令行参数替换为如下所述的值：</p>                <div class="table-wrapper"><table width="100%" id="8455ffe5"><thead><tr id="b1944b5a" class="ijRowHead"><th id="ab17b8be" width="20%"><p>参数</p></th><th id="070e53a2"><p>描述</p></th></tr></thead><tbody><tr id="0a33b02f" class="ijRowOdd"><td id="e245a458"><code class="code">source_url</code></td><td id="fa63bf4b"><p>要从中导入问题的源YouTrack服务器的URL。</p></td></tr><tr id="3dfa5fa4" class="ijRowEven"><td id="c29c2890"><code class="code">target_url</code></td><td id="6ec4c22b"><p>要导入问题的目标YouTrack服务器的URL。</p></td></tr><tr id="96aa9f46" class="ijRowOdd"><td id="af00b537"><code class="code">projectId</code></td><td id="c2da309a"><p>的<code class="code">projectID</code>项目导入到目标YouTrack服务器。</p></td></tr></tbody></table></div>                <p id="ed3fc727">该命令还支持以下选项：</p>                <div class="table-wrapper"><table width="100%" id="69b0b2e6"><thead><tr id="d20dd05d" class="ijRowHead"><th id="bbba8c50"><p>选项</p></th><th id="cc4be1ec"><p>描述</p></th></tr></thead><tbody><tr id="ce54ef02" class="ijRowOdd"><td id="21771134" colspan="2">                            <p id="0d92130a"><code class="code">AUTH_OPTIONS</code> -使用它们为源和目标YouTrack服务提供身份验证数据。</p>                        </td></tr><tr id="ad2f90ab" class="ijRowEven"><td id="775975e5"><code class="code">-t</code></td><td id="8c3477aa"><p>源YouTrack服务的授权令牌。</p></td></tr><tr id="72492252" class="ijRowOdd"><td id="c0c9b31a"><code class="code">-u</code></td><td id="dfe1beb3"><p>源YouTrack服务的用户登录名。</p></td></tr><tr id="79853e81" class="ijRowEven"><td id="ae0d5c59"><code class="code">-p</code></td><td id="cec2180d"><p>源YouTrack服务的用户密码。</p></td></tr><tr id="afd897a3" class="ijRowOdd"><td id="9e3a633d"><code class="code">-T</code></td><td id="50d1aefe"><p>目标YouTrack服务的授权令牌。</p></td></tr><tr id="b76b2863" class="ijRowEven"><td id="993be3fe"><code class="code">-U</code></td><td id="77f81de7"><p>目标YouTrack服务的用户登录名。</p></td></tr><tr id="15512a4d" class="ijRowOdd"><td id="fbe2c410"><code class="code">-P</code></td><td id="8e2cb022"><p>目标YouTrack服务的用户密码。</p></td></tr><tr id="aa3cb4cf" class="ijRowEven"><td id="17f7640f" colspan="2">                            <code class="code">OPTIONS</code>                        </td></tr><tr id="7097927b" class="ijRowOdd"><td id="66fc1dd1"><code class="code">-h</code></td><td id="4d41e234"><p>显示命令帮助并退出。</p></td></tr><tr id="c35b3dc8" class="ijRowEven"><td id="5f473b77"><code class="code">-a</code></td><td id="f5d7ecc7"><p>仅导入附件。</p></td></tr><tr id="795399fa" class="ijRowOdd"><td id="c82f62a1"><code class="code">-n</code></td><td id="ced73051"><p>创建新问题，而不是导入它们。</p></td></tr><tr id="dc853485" class="ijRowEven"><td id="56a6b305"><code class="code">-c</code></td><td id="5d816aec"><p>添加新评论以解决问题。</p></td></tr><tr id="0a9b9b03" class="ijRowOdd"><td id="62bafd53"><code class="code">-f</code></td><td id="2df49587"><p>同步自定义字段值。</p></td></tr><tr id="9e5ae425" class="ijRowEven"><td id="cbd6a584"><code class="code">-S</code></td><td id="076d1c9d"><p>同步问题标签。发行标签是代表登录用户创建的。</p></td></tr><tr id="a3521adc" class="ijRowOdd"><td id="10701ca4"><code class="code">-r</code></td><td id="612406e9"><p>用新的附件替换旧的附件（删除并重新导入）。</p></td></tr><tr id="f4fc80d4" class="ijRowEven"><td id="d52a35c9"><code class="code">-d</code></td><td id="193c3fc7"><p>禁用用户缓存。</p></td></tr><tr id="4faec32f" class="ijRowOdd"><td id="dd8f5cff"><code class="code">-w</code></td><td id="70afbd53"><p>隐性周期值（用作JT-19362的解决方法）。</p></td></tr><tr id="f27b4a6e" class="ijRowEven"><td id="649b827a"><code class="code">-s</code></td><td id="b6159053"><p>时间跟踪设置格式<code class="code">"days_in_a_week:hours_in_a_day"</code></p></td></tr></tbody></table></div>                <ul class="list _ul"><li class="list__item" id="237915f3"><p>该命令执行Python导入脚本。</p></li><li class="list__item" id="d227d617"><p>如果成功，则会在命令行界面中针对每个问题打印以下行：</p><div class="code-block" data-lang="bash">已<issue id="">成功导入</issue>问题[ <issue id="">]</issue></div>                    <p></p></li></ul>            </li><li class="list__item" id="d785a9fb">                <p id="8ce9a549">检查目标YouTrack服务器并验证问题是否已正确导入。如果您对结果不满意，并想重新导入数据：</p>                <ul class="list _ul"><li class="list__item" id="060ee268"><p>删除目标服务器中的项目。其所有问题也被删除。</p></li><li class="list__item" id="507d34ee"><p>再次运行导入脚本。</p></li></ul>            </li></ol></section>    </div>    <div class="chapter"><h2 id="import-one" data-toc="Import-from-Another-YouTrack-Server#import-one">导入单期</h2>        <p id="b801f215">在某些情况下，您可能希望一次导入一个问题。例如，当您要将问题从内部YouTrack实例迁移到公共跟踪器时。此过程中使用的Python脚本将一个问题从源项目导入到另一个YouTrack服务器中的现有项目。</p>         <p id="9e50ae42">请按照以下步骤将单个问题从一个YouTrack实例导入到另一个。</p>        <section class="procedure-steps"><h3 id="import-single-procedure">要将单个问题从一个YouTrack实例导入到另一个：</h3><aside class="prompt" rel="import-single-procedure" id="e5f99e6d" data-type="tip" data-title="">                <p id="e9d45e3f">此过程需要多个权限。使用被授予源服务器和目标服务器<span class="control">系统管理员</span>角色的帐户。</p>            </aside><ol class="list _decimal"><li class="list__item" id="4cf7d129"><p>打开操作系统支持的命令行界面。</p></li><li class="list__item" id="63d693f0"><p>如有必要，将当前目录更改为Python的安装目录。例如（Windows）：</p><div class="code-block" data-lang="bash">CD C：\ Python 27</div><p></p></li><li class="list__item" id="4e20c454">                <p id="47faf15a">输入以下命令：</p><div class="code-block" data-lang="bash">moveIssue src_url src_login src_password trg_url trg_login trg_password src_issueId trg_projectId</div>将命令行参数替换为如下所述的值：<p></p>                <div class="table-wrapper"><table width="100%" id="c868d33d"><thead><tr id="2a32d786" class="ijRowHead"><th id="82ce8b2b" width="20%"><p>参数</p></th><th id="10a3b4a7"><p>描述</p></th></tr></thead><tbody><tr id="0833017b" class="ijRowOdd"><td id="a53501be"><code class="code">src_url</code></td><td id="961ad3a7"><p>要从中导入问题的源YouTrack服务器的URL。</p></td></tr><tr id="0cff36f6" class="ijRowEven"><td id="29fa0ded"><code class="code">src_login</code></td><td id="c1143e2e"><p>您用来登录源YouTrack服务器的帐户的用户名。</p></td></tr><tr id="d86ed083" class="ijRowOdd"><td id="87eb3376"><code class="code">src_password</code></td><td id="8e59768b"><p>您用来登录源YouTrack服务器的帐户密码。</p></td></tr><tr id="9c09771d" class="ijRowEven"><td id="6ede0485"><code class="code">trg_url</code></td><td id="f577a5cd"><p>要导入问题的目标YouTrack服务器的URL。</p></td></tr><tr id="2ce878d3" class="ijRowOdd"><td id="e28ed39d"><code class="code">trg_login</code></td><td id="cbd2c215"><p>您用于登录目标YouTrack服务器的帐户的用户名。</p></td></tr><tr id="0ace0eb5" class="ijRowEven"><td id="58eeb11d"><code class="code">trg_password</code></td><td id="9b24bf1f"><p>您用来登录源YouTrack服务器的帐户密码。</p></td></tr><tr id="2bd1aa67" class="ijRowOdd"><td id="c2122914"><code class="code">src_issueId</code></td><td id="2e130434"><p>的<code class="code">issueID</code>要导入到目标YouTrack实例的问题。</p></td></tr><tr id="17e08a01" class="ijRowEven"><td id="9049e4c8"><code class="code">trg_projectId</code></td><td id="45c1bb24"><p>的<code class="code">projectID</code>要将源问题发布到的目标YouTrack实例中的项目。</p></td></tr></tbody></table></div>            </li><li class="list__item" id="58f645a9"><p>检查目标YouTrack服务器，并验证问题是否已正确导入。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="troubleshooting-csv-import" data-toc="Import-from-Another-YouTrack-Server#troubleshooting-csv-import">故障排除</h2>        <p id="a2be6e65">如果在运行导入脚本时遇到任何错误，请查看是否符合以下任何条件。</p>        <div class="table-wrapper"><table width="100%" id="5adf8220"><thead><tr id="2d9ab532" class="ijRowHead"><th id="e8b35ff5" width="10%"><p>条件</p></th><th id="b9980b24"><code class="code">Error for [/user/login]: 302: Moved Temporarily</code></th></tr></thead><tbody><tr id="a16c678f" class="ijRowOdd"><td id="8689cbfc"><p>原因</p></td><td id="38a2f73d"><p>您用于<code class="code">target_url</code>参数不正确。最常见的错误是为YouTrack实例输入基本网址，而无需<code class="code">/youtrack</code> URL的末尾。</p></td></tr><tr id="4a8add12" class="ijRowEven"><td id="f49bf26d"><p>解</p></td><td id="0c048232">                    <p id="fd014f87">更改值<code class="code">target_url</code>参数，然后再次运行导入脚本。使用显示为YouTrack服务的“ <span class="control">基本URL”</span>设置的值。</p>                    <ol class="list _decimal"><li class="list__item" id="53e80d06"><p>对于YouTrack Standalone，复制“ <span class="control">全局设置”</span>页面上“ <span class="control">基本URL”</span>设置中的值。</p></li><li class="list__item" id="75af27a6"><p>对于YouTrack InCloud，请复制“ <span class="control">域设置”</span>页面上“ <span class="control">基本URL”</span>设置中的值。</p></li></ol></td></tr></tbody></table></div>        <div class="table-wrapper"><table width="100%" id="0f294ef4"><thead><tr id="af86b977" class="ijRowHead"><th id="b081150f" width="10%"><p>条件</p></th><th id="b9c70b72"><code class="code">Error for [<resource>]: 403: Forbidden: You have no permissions for <resource></code></th></tr></thead><tbody><tr id="e7d61150" class="ijRowOdd"><td id="5ddaef83"><p>原因</p></td><td id="fc5befb9"><p>您用于运行导入脚本的用户帐户无权读取或更新目标资源。资源URL指示用户无法访问哪个实体。</p></td></tr><tr id="951d051d" class="ijRowEven"><td id="61e5c087"><p>解</p></td><td id="94d5e340"><p>使用具有足够权限来更新目标资源的用户帐户运行导入脚本。</p></td></tr></tbody></table></div>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Import-from-Trac.html">从Trac导入从</a> <a class="navigation-links__next" href="Migrate-from-Standalone-to-InCloud.html">独立迁移到InCloud</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>