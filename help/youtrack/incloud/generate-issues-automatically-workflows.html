<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>自动生成问题-帮助| YouTrack InCloud</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="generate-issues-automatically" data-breadcrumbs="Administration.xml|Administration/Workflow-Guide.xml|Workflows/Workflow-Use-Cases.xml|Use Cases for Workflows/generate-issues-automatically-workflows.xml|Generate Issues Automatically" data-main-title="Generate Issues Automatically"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack InCloud帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack InCloud 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="generate-issues-automatically-workflows.xml" data-toc="generate-issues-automatically">自动生成问题</h1>      <p id="abce751d">YouTrack提供了一些用于问题生成的基本选项。</p>  <ul class="list _ul"><li class="list__item" id="bbb7b4a2"><p>您可以<a href="Generate-Issue-Template-URL.html">生成问题模板URL</a> 。这在某种程度上加快了处理速度，但是您需要为不同的问题类型定义单独的URL，但这仍然是手动操作。</p></li><li class="list__item" id="fd3738aa"><p>您可以在问题工具栏中使用“ <a href="Clone-Issues.html">克隆问题”</a>操作。</p></li></ul>  <p id="868ac31b">如果需要定期创建一组标准问题，请考虑使用工作流自动生成这些问题。</p>  <div class="chapter"><h2 id="generate-subtasks-for-parent-when-reported" data-toc="generate-issues-automatically#generate-subtasks-for-parent-when-reported">报告父问题时生成子任务</h2>    <p id="b7718b2f">想象一下，您正在与一个开发团队合作，该团队定期发布软件产品的更新。除了实现新功能和修复错误外，每个版本还需要一组标准任务。例如：</p>    <ul class="list _ul"><li class="list__item" id="6daf7975"><p>分发产品的更新版本。</p></li><li class="list__item" id="630abacf"><p>更新文档。</p></li><li class="list__item" id="ae626646"><p>更新产品网站上<span class="control">的“新功能”</span>页面。</p></li><li class="list__item" id="086f6ca0"><p>准备并在公司博客上发布文章。</p></li><li class="list__item" id="1091bd95"><p>向客户发送新闻通讯。</p></li><li class="list__item" id="7bcbaf47"><p>向经销商发送新闻通讯。</p></li></ul>    <p id="038a7ee2">为了节省您和您的同事的大量时间，编写一个工作流程，该工作流程在每次创建“ <span class="control">发行”</span>问题时都会生成一个子任务列表。</p>     <p id="8a9a8310">您需要一些条件来将发行问题与产品的其他问题区分开。否则，您最终将为错误的问题生成子任务。您可以设置许多条件，例如使用单独的项目解决发行问题或添加特定标签。在此示例中，我们将“ <span class="control">发布”</span>添加到“ <span class="control">类型”</span>字段的值集中，并且仅在创建具有此类型的新问题时才生成子任务。工作流程规则如下所示：</p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; Exports.rule =实体。Issue.onChange（{title：'Release management'，guard：function（ctx）{var issue = ctx.issue; return issue.becomesReported && issue.fields。Type.name === ctx。类型。Release.name; }，动作：function（ctx）{var issue = ctx.issue; var createIssue =函数（名称，子系统）{var newIssue =新实体。Issue（ctx.currentUser，issue.project，名称+'代表'+ issue.summary）; newIssue.fields。子系统=子系统; newIssue.fields。类型= ctx。类型。任务; newIssue.links [''subtask of']。add（issue）; }; createIssue（'更新分发版'，ctx。子系统。分配）; createIssue（'更新文档'，ctx。子系统。文档）； createIssue（'更新“新功能”，ctx。子系统。网站）; createIssue（'博客文章'，ctx。子系统。博客）; createIssue（'客户通讯”，ctx。子系统。通讯）； createIssue（'分销商通讯'，ctx。子系统。通讯）； }，要求：{类型：{类型：实体。EnumField.fieldType，发行版：{}，任务：{}}，子系统：{类型：实体。OwnedField.fieldType，分布：{}，文档：{}，网站：{}，博客：{}，新闻通讯：{}}}}}）；</div>  </div>  <div class="chapter"><h2 id="generate-subtasks-for-parent-on-update" data-toc="generate-issues-automatically#generate-subtasks-for-parent-on-update">父问题更新时生成子任务</h2>    <p id="0ab4e558">从技术的角度来看，这种情况与前一种情况相似，但应用范围略有不同。</p>    <p id="255d6b98">让我们看一下一个运营团队的流程，该团队为公司员工组织会议和活动的商务旅行。直属经理在一个特殊项目中创建问题。该项目使用多值<span class="control">旅行者</span>字段来存储参与事件的员工的姓名。运营团队分别为每位员工准备旅行证件，因此他们希望每人发行一份。</p>     <p id="98890a6e">通过使用“ <span class="control">类型”</span>字段的值作为保护条件，可以像在上一个场景中一样支持这种情况。每当直属经理提交多个旅客的问题时，运营团队都会将类型设置为“ <span class="control">团体旅行”</span> 。这将触发一个工作流，该工作流为“ <span class="control">旅行者”</span>字段中的每个员工生成一个子任务，并将每个子任务的类型设置为“ <span class="control">个人旅行”</span> 。您可以通过对上一个示例进行较小的修改来支持此用例。</p>      <p id="909210d9">但是，有时员工会在创建“ <span class="control">团体旅行”</span>问题后决定要参加会议。对于这种情况，您需要一条额外的规则来为新旅行者动态创建子任务：</p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; Exports.rule =实体。Issue.onChange（{title：'为每个新旅客创建一个子任务'，警卫：function（ctx）{var fs = ctx.issue.fields;返回ctx.issue.isReported && fs。键入&& fs。Type.name === ctx。类型。GroupTrip.name && fs。Travellers.added.isNotEmpty（）; }，操作：function（ctx）{var issue = ctx.issue; var createIssue = function（traveler）{var newIssue =新实体。发行（ctx.currentUser，issue.project，traveler.fullName +'位于'+ issue.fields。目的地）; newIssue.fields。类型= ctx。类型。IndTrip； newIssue.links [''subtask of']。add（issue）; };问题域。Travellers.added.forEach（createIssue）; }，要求：{目的地：{类型：实体。Field.stringType}，类型：{类型：实体。EnumField.fieldType，GroupTrip：{名称：“团体旅行”}，IndTrip：{名称：“个人旅行”}}，旅行者：{类型：实体。User.fieldType，多：true}}}）;</div>  </div>  <div class="chapter"><h2 id="generate-issues-on-demand" data-toc="generate-issues-automatically#generate-issues-on-demand">按需生成问题</h2>    <p id="1d2c9c8f">在多种情况下，您都希望产生问题，但是不能将字段值的组合用作初始条件。在这里，初始条件在YouTrack用户的脑海中。</p>     <p id="7d5da1de">最明显的例子是“ <span class="control">克隆问题”</span>工作流。通过此工作流程，您可以在需要时复制现有请求。此工作流程使用操作规则。这种类型的规则由用户定义的命令触发，方法是从“ <span class="control">命令对话框”</span>菜单中选择此操作，或者在“ <span class="control">应用命令”</span>对话框中执行此命令。</p>      <p id="d77147dc">回到上一个示例，假设您要向员工提供一些赠予合作伙伴或在会议摊位派发的物品。在这种情况下，您可以编写一个动作规则，该规则为团体旅行生成一个子任务。工作流需要从父任务<span class="control">目标</span>字段中的值，并设置摘要子任务<span class="control">准备赃物的“目标”：</span></p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; Exports.rule =实体。Issue.action（{title：'Create a swag subtask'，command：'swag-subtask'，guard：function（ctx）{return ctx.issue.isReported;}，action：function（ctx）{var issue = ctx。问题； var newIssue =新实体。Issue（ctx.currentUser，issue.project，'为'+ issue.fields准备赃物。目的地）; newIssue.fields。类型= ctx。类型。赃物; newIssue.links [''subtask of']。add（issue）; }，要求：{目的地：{类型：实体。Field.stringType}，类型：{类型：实体。EnumField.fieldType，赃物：{}}}}）；</div>  </div>  <div class="chapter"><h2 id="generate-issues-on-schedule" data-toc="generate-issues-automatically#generate-issues-on-schedule">按计划生成问题</h2>    <p id="2763f884">到目前为止，我们已经向您展示了几种响应人类行为而产生问题的方法。但是，在许多情况下，您甚至不需要人工来完成艰苦的工作。</p>     <p id="2309c773">考虑对开发者倡导者团队的要求。该团队的众多职责之一是准备每月的内部新闻通讯。每个月的任务是相同的：相同的概念，相同的期限，相同的受让人。与其手动创建此问题，不如设置一个时间表以自动创建它：</p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; var MONTHS = [“ 1月”，“ 2月”，“ 3月”，“ 4月”，“ 5月”，“ 6月”，“ 7月”，“ 8月”，“ 9月”，“ 10月”，“ 11月”，“ 12月“]; var DAY_IN_MS = 24 * 60 * 60 * 1000; Exports.rule =实体。Issue.onSchedule（{title：'Internal newslet'，search：'＃DA-1'，//锚定问题；要求确保//根据调度cron严格执行此规则一次：'0 0 19 15 1/1？*'，//在每个月的15日19:00进行操作：function（ctx）{var date = new Date（Date.now（）+ 31 * DAY_IN_MS）; date.setDate（1）; var month = MONTHS [date.getMonth（）]; var year = date.getFullYear（）; var newIssue =新实体。发行（ctx.currentUser，ctx.issue.project，month +''+ year +'Internal Newslet'）; newIssue.fields。受让人= ctx.author; newIssue.fields。子系统= ctx。子系统。时事通讯newIssue.fields。DD = date.getTime（）; }，要求：{受让人：{类型：实体。User.fieldType}，子系统：{类型：实体。OwnedField.fieldType，通讯：{}}，DD：{类型：实体。Field.dateType，名称：“到期日期”}，作者：{类型：实体。用户，登录名：“ root”}，da：{类型：实体。问题，ID：'DA-1'}}））；</div>  </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="streamline-issue-reporting-workflows.html">简化问题</a> <a class="navigation-links__next" href="update-fields-on-issue-update.html">更新中的</a> <a class="navigation-links__prev" href="streamline-issue-reporting-workflows.html">问题报告</a> <a class="navigation-links__next" href="update-fields-on-issue-update.html">更新字段</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>