<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>On-schedule Rules - Help | YouTrack InCloud</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="on-schedule-rules" data-breadcrumbs="Administration.xml|Administration/Workflow-Guide.xml|Workflows/Workflow-Rules.xml|Workflow Rule Types/on-schedule-rules.xml|On-schedule Rules" data-main-title="On-schedule Rules"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search YouTrack InCloud Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack InCloud 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="on-schedule-rules" id="on-schedule-rules.xml">On-schedule Rules</h1>  <p id="87603d25">An <span class="control">on-schedule</span> rule defines a set of changes that are applied according to a set schedule.    For example, you can periodically check for issues with specific attribute values and notify a user or a group.    These rules replace the <span class="control">scheduled</span> rules that were used in older workflows.</p>  <p id="9d4dfbdd">On-schedule rules are executed by a special workflow user.    This is a system user account that is granted a full set of permissions.    The permissions for this account cannot be modified.    The workflow user account is not included in the license restrictions and is not displayed in the users list.</p>    <div class="chapter"><h2 id="sample-on-schedule-rule">Sample On-schedule Rule</h2>    <p id="682ce994">This rule executes every day at 10:00.      The rule checks for unresolved issues that are assigned and contain a value in the <span class="control">Due Date</span> field.      If the due date is in the past, a notification is sent to the assignee.</p>    <div class="code-block" data-lang="javascript">var entities = require('@jetbrains/youtrack-scripting-api/entities');

exports.rule = entities.Issue.onSchedule({
  title: 'Notify an Assignee when Due Date is expired',
  search: '#Unresolved has: Assignee has: {Due Date}',
  cron: '0 0 10 * * ?',
  muteUpdateNotifications: false,
  guard: function(ctx) {
    return ctx.issue.fields.DueDate &lt; Date.now();
  },
  action: function(ctx) {
    var issue = ctx.issue;
    issue.fields.Assignee.notify('[YouTrack] Overdue', 'Issue ' + issue.id + ' is overdue.');
  },

  requirements: {
    Assignee: {
      type: entities.User.fieldType
    },
    DueDate: {
      type: entities.Field.dateType,
      name: 'Due Date'
    }
  }
});</div>    <p id="ad8e5773">The components that define this on-schedule rule are as follows:</p>    <ul class="list _ul"><li class="list__item" id="d3bd6336"><p>Again, the script starts with a <code class="code">require</code> statement that references the entities module in the workflow API.        This means that everything that is contained in this module can be accessed in this script with the <code class="code">entities</code> variable.</p></li><li class="list__item" id="2560dffb"><p>For this rule, the <code class="code">exports.rule</code> property uses the <code class="code">Issue.onSchedule</code> method.        This exports the script that follows the declaration as an on-schedule rule.</p></li><li class="list__item" id="3c814617"><p id="d2b9d962">The body of the rule itself contains definitions for the following properties:</p>        <div class="table-wrapper"><table width="100%" id="0bb8c23a"><thead><tr id="b3b9b97c" class="ijRowHead"><th id="9333bfbc" width="20%"><p>Property</p></th><th id="235a344b"><p>Description</p></th></tr></thead><tbody><tr id="ddbb61ef" class="ijRowOdd"><td id="b5e256d3"><p>title</p></td><td id="05f1fe66"><p>An optional human-readable title. The title is only visible in the administrative interface.</p></td></tr><tr id="745a41f0" class="ijRowEven"><td id="86e1587c"><p>search</p></td><td id="cb0eca08"><p id="413a7832">A search query that determines which issues are processed by this rule.              It can be a string that uses the syntax for a standard YouTrack search query (see <a href="Search-and-Command-Attributes.html">Search Query Reference</a>) or a function that recalculates a search string every time the rule is triggered.</p>              <p id="a9906470">When you use a function, reference it by name. For example, <code class="code">search: getSearchExpression</code>.</p>                <p id="4ad10f15">We strongly recommend that you make the search expression as concrete as possible, instead of adding conditions inside the action.</p></td></tr><tr id="e07e7abe" class="ijRowOdd"><td id="619dbed8"><p>cron</p></td><td id="b565aa57"><p id="bc32fb7c">The schedule for applying the rule, specified as a <a href="http://www.quartz-scheduler.org/documentation/quartz-2.3.0/tutorials/crontrigger.html" data-external="true" target="_blank" rel="noopener noreferrer">Java cron expression</a>.</p>              <p id="3f2241ce">In this example, the expression triggers this rule every day at 10:00 in the time zone that is set for your YouTrack server.</p>                          </td></tr><tr id="b199aef6" class="ijRowEven"><td id="0901803b"><p>muteUpdateNotifications</p></td><td id="87f3ee35"><p id="140c0fea">A flag that determines whether update notifications are sent for changes that are applied by this rule.              If you want to apply updates without sending notifications, set to <code class="code">true</code>.</p>              <p id="09a6a7cf">When <code class="code">true</code> this property also suppresses notifications for cascading changes that are applied in the same transaction.              For example, when updates that are applied by the on-schedule rule trigger updates from one or more on-change rules, the entire set of changes is applied silently.</p>              <p id="b179a8e2">The value for this property does not affect notifications that are explicitly sent, as with the <span class="control">.notify</span> method that is used in this example.</p>              <p id="ca751a78">This property is not relevant to this example, as the rule does not apply any issue changes.                Even if it were set to <code class="code">true</code>, the email notification that is sent using the <code class="code">.notify</code> method is still delivered.</p></td></tr><tr id="6079c2f5" class="ijRowOdd"><td id="b1dff80c"><p>guard</p></td><td id="1f92b967"><p>A function that determines the conditions for executing the rule.              If the guard condition is not met, the action specified in the rule is not applied to an issue.</p></td></tr><tr id="1ae7ad2c" class="ijRowEven"><td id="0acdc5e6"><p>action</p></td><td id="2fb6b999"><p id="10e9deb8">The actions that should be applied to each issue that matches the search condition.              This action is triggered separately for each issue.              The action itself is performed by the workflow user account.</p>              <p id="dfaf2657">In this example, we use the <code class="code">Assignee.notify</code> method to warn the current assignee that the issue is overdue.</p></td></tr><tr id="6a992901" class="ijRowOdd"><td id="66c11e79"><p>requirements</p></td><td id="8e92de27"><p id="efa1b346">The list of entities that are required for the rule to execute without errors.              This property ensures that rules can be attached to projects safely.</p>              <p id="486f7b2c">In this example, the requirements ensure that both the <span class="control">Assignee</span> and <span class="control">Due Date</span> fields store the correct types and are available in the project to which the rule is attached.              If either field is absent, an error is shown in the <span class="control">Workflows</span> list.                The rule cannot be enabled until the required fields are attached.</p></td></tr></tbody></table></div></li></ul>  </div><div class="last-modified" data-skip-index="skip">Last modified: 29 November 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="on-change-rules.html">On-change Rules</a><a class="navigation-links__next" href="state-machine-per-issue-type.html">State-machine Rules</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>