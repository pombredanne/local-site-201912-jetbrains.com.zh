<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Attach Files to an Issue - Help | YouTrack InCloud</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="api-usecase-attach-files" data-breadcrumbs="Resources-for-Developers.xml|Resources for Developers/youtrack-rest-api-reference.xml|REST API/api-use-cases.xml|REST API Use Cases/api-usecase-attach-files.xml|Attach Files to an Issue" data-main-title="Attach Files to an Issue"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search YouTrack InCloud Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack InCloud 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="api-usecase-attach-files" id="api-usecase-attach-files.xml">Attach Files to an Issue</h1>    <h4 id="8d5d84c5">Use Case:</h4>    <p id="4951eae8">Use the REST API to attach several files to an issue.</p>    <a name="version-note"></a>        <aside data-type="note" class="prompt" data-title="" rel="api-usecase-attach-files.xml" id="c7ee58eb"><p>Please notice that this example is valid for YouTrack 2019.1 and later versions. In the previous versions, though            the principle is the same, query parameters and entity attributes may differ. Also, a number of features, like            addressing an entity by its name, were introduced in 2019.1 and are not supported in the previous versions.        </p></aside>        <div class="chapter"><h2 id="summary">Summary</h2>        <p id="4efccabb">To attach a file to an issue:</p>        <ol class="list _decimal"><li class="list__item" id="e60e9a9d"><p>Get a list of issues to get the entity ID of the target issue.</p></li><li class="list__item" id="63eece0c">                <p id="a5b479aa">Attach files to the issue by sending a POST request to the following endpoint:</p>                <div class="code-block" data-lang="none">/api/issues/{issueID}/attachments</div>            </li></ol>    </div>    <div class="chapter"><h2 id="step-by-step">Step-by-Step</h2>                <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="f428abef">                <p id="3ef9c5d6">Get the list of issues in a target project.</p>                <div class="code-block" data-lang="http">
                    curl -X GET 'https://example.myjetbrains.com/youtrack/api/issues?query=in:NP&amp;$top=3&amp;fields=id,idReadable,summary' \
                    -H 'Accept: application/json' \
                    -H 'Authorization: Bearer perm:cm9vdA==.MjZGZWI=.WB02vjX0cM2ltLTJXUE3VOWHpJYYNx' \
                    -H 'Content-Type: application/json'
                </div>                <p id="d0b069bb">The <code class="code">query</code> request parameter lets us filter the list of issues by a search query.                    In this sample, we use the query to get only the issues that belong to the target project (<code class="code">NP</code>).                </p>                <p id="f8a6f86e">For this particular example, to shorten the list of returned issues, we use <code class="code">$top=3</code>                    parameter to get only first three found issues.</p>                <p id="dc8df328">In the <code class="code">fields</code> request parameter, we instruct the server to return the following attributes for each                    issue found:                </p>                <ul class="list _ul"><li class="list__item" id="c58624b9"><p><code class="code">id</code> and <code class="code">idReadable</code> - both database entity ID and an ID of the issue in the project,                        respectively.                    </p></li><li class="list__item" id="df625b50"><p><code class="code">summary</code> - issue's summary may help to identify the target issue.</p></li></ul>                <p id="ca729560">In the response to this request, the server returns the following data:</p>                <div class="code-block" data-lang="json">
                    [
                      {
                        "summary": "Investigation task",
                        "idReadable": "NP-56",
                        "id": "99-356",
                        "$type": "Issue"
                      },
                      {
                        "summary": "Marketing activities",
                        "idReadable": "NP-39",
                        "id": "99-303",
                        "$type": "Issue"
                      },
                      {
                        "summary": "TODO for release",
                        "idReadable": "NP-77",
                        "id": "99-500",
                        "$type": "Issue"
                      }
                    ]
                </div>            </li><li class="list__item" id="f04a7454"><p>Locate the ID of the target issue. In this case, let's take the issue <code class="code">NP-77</code> with the database ID                <code class="code">99-500</code>.            </p></li><li class="list__item" id="2de31d6d">                <p id="4cc9065a">To attach files to an issue, we need to send a <code class="code">POST</code> request with the attachments to this endpoint: <code class="code">/api/issues/{issueID}/attachments</code>. For this use case, we use the following <code class="code">cURL</code> command:</p>                <div class="code-block" data-lang="http">
                    curl -v -i -F upload=@/Users/jetbrains/Downloads/youtrack.txt \
                    -F upload=@/Users/jetbrains/Downloads/youtrack_new.jpeg \
                    -H 'Accept: application/json' \
                    -H 'Authorization: Bearer perm:cm9vdA==.MjZGZWI=.WB02vjX0cM2ltLTJXUE3VOWHpJYYNx' \
                    -H 'Content-Type: multipart/form-data' \
                    -X POST 'https://example.myjetbrains.com/youtrack/api/issues/99-500/attachments?fields=id,name'
                </div>                                <p id="6db164dc">Here's the key parameters of the request that we used:</p>                <ul class="list _ul"><li class="list__item" id="4432d8f6">                        <p id="b97818aa">                            <code class="code">-F</code>                            option lets us upload the required files to the server.                        </p>                        <p id="835585df">                            <code class="code">-F upload=@/Users/jetbrains/Downloads/youtrack.txt</code>                            - the path to the file that should be attached to the target issue. You can attach several files in one request:                        </p>                        <div class="code-block" data-lang="http">
                            -F upload=@/Users/jetbrains/Downloads/youtrack.txt \
                            -F upload=@/Users/jetbrains/Downloads/youtrack_new.jpeg
                        </div>                        <p id="17f26064">The <code class="code">@</code> prefix indicates that the following content part is a file.                        </p>                    </li><li class="list__item" id="1e33335b"><p>                        <code class="code">Content-Type: multipart/form-data</code>: use this header to attach files.                    </p></li></ul>                <p id="8f34ad85">In the response, the server returns the <code class="code">name</code> and database entity ID of the attached files:</p>                <div class="code-block" data-lang="json">
                    [
                        {"name":"youtrack.txt","id":"134-31","$type":"IssueAttachment"}, 
                        {"name":"youtrack_new.jpeg","id":"134-32","$type":"IssueAttachment"}
                    ]
                </div>            </li></ol></section>        <p id="9afaa2cc">That’s it: we’ve attached all our files to the issue.</p>        <aside data-type="note" class="prompt" data-title="" rel="9afaa2cc" id="afdc6c17"><p>Please note that you cannot simultaneously create a new issue and add attachments to it. You can attach files            only to an already existing issue.        </p></aside>    </div><div class="last-modified" data-skip-index="skip">Last modified: 29 November 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="api-how-to-clear-custom-fields-values.html">Clear Values of Custom Fields</a><a class="navigation-links__next" href="Color-Indices.html">Color Indices List</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>