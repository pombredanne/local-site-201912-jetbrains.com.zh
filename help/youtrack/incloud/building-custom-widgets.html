<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');</script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>小部件开发指南-帮助| YouTrack InCloud</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="building-custom-widgets" data-breadcrumbs="Resources-for-Developers.xml|Resources for Developers/building-custom-widgets.xml|Widget Development Guide/custom-widget-tutorial.xml|Custom Widget Tutorial/test-custom-widgets.xml|Test a Custom Widget/custom-widgets-API-reference.xml|Custom Widgets API Reference/sample-custom-widgets.xml|Sample Custom Widgets" data-main-title="Widget Development Guide"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack InCloud帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack InCloud 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="building-custom-widgets.xml" data-toc="building-custom-widgets">小部件开发指南</h1>    <p id="5073eb9f">自定义窗口小部件是微型应用程序视图，您可以将其嵌入到YouTrack仪表板中。您可以构建一个小部件，使您可以查看和与属于软件生态系统的任何应用程序进行交互，包括对YouTrack数据和存储在内置Hub服务中的信息的自定义视图。</p>    <p id="7eb29f9f">此页面包括小部件包和清单文件的基本概述。有关自定义小部件的分步介绍，请阅读《 <a href="custom-widget-tutorial.html">自定义小部件教程》</a> 。</p>    <div class="chapter"><h2 id="yeoman-generator-custom-widget" data-toc="building-custom-widgets#yeoman-generator-custom-widget">快速开始</h2>        <p id="1a3ecf7d">构建自定义窗口小部件的最快方法是使用我们的Yeoman生成器。运行发电机时：</p>        <ul class="list _ul"><li class="list__item" id="1f426c96"><p>Yeoman建立了基本的项目结构并安装了所有必需的依赖项。</p></li><li class="list__item" id="36cc0079"><p>的<code class="code">index.html</code>小部件包所需的文件是在<code class="code">src</code>目录。</p></li><li class="list__item" id="702e9e21"><p>命令行中的提示可让您指定<code class="code">name</code> ， <code class="code">description</code>和<code class="code">author</code>中的属性<code class="code">manifest.json</code>文件。</p></li><li class="list__item" id="e540011b"><p>样本小部件的代码已保存到<code class="code">app</code>子目录。</p></li></ul>        <p id="11919af8">要使用生成器构建自定义窗口小部件，请<a href="https://github.com/JetBrains/ring-ui/blob/master/packages/generator/hub-widget" rel="noopener noreferrer" data-external="true" target="_blank">访问GitHub中的窗口小部件生成器，</a>并按照README文件中的说明进行操作。要开始使用，请使用以下命令：</p>        <div class="code-block" data-lang="none">npm install -g yo @ jetbrains / generator-ring-ui</div>        <p id="158d08d7">然后切换到窗口小部件的根目录（如有必要，请创建一个）并运行：</p>        <div class="code-block" data-lang="none">yo @ jetbrains / ring-ui：hub-widget</div>        <p id="3f779a24">生成器提示您输入窗口小部件名称（默认为当前目录的名称），窗口小部件描述和作者。Yeoman创建您的项目文件并为您安装所有依赖项。</p>        <p id="f1579d45">此时，您应该拥有开始使用所需的所有工具。在构建窗口小部件时，请使用此页面上的信息作为参考。</p>    </div>    <div class="chapter"><h2 id="widget-package" data-toc="building-custom-widgets#widget-package">小部件包</h2>        <p id="abee4035">小部件是使用HTML，CSS和JavaScript构建的。这些是在沙盒嵌入式框架（iFrame）中运行的静态Web应用程序。</p>        <ul class="list _ul"><li class="list__item" id="f989d05c"><p>该小部件必须具有名为<code class="code">index.html</code> 。</p></li><li class="list__item" id="e61b285d"><p>您的窗口小部件包可以包含相关的源文件。</p></li></ul>        <p id="20c36a61">您可以使用一些资源来构建窗口小部件。</p>        <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="5d488122"><thead><tr id="5ba76de8" class="ijRowHead"><th id="4141ce26" width="20%"><p>资源资源</p></th><th id="b909041a"><p>描述</p></th></tr></thead><tbody><tr id="068f770d" class="ijRowOdd"><td id="aa0938bc"><a href="https://unpkg.com/hub-dashboard-addons@0.0.8/dashboard.css" rel="noopener noreferrer" data-external="true" target="_blank">dashboard.css</a></td><td id="8081ba3c"><p>该.css文件包含用于YouTrack中的窗口小部件的默认文本样式和布局定义。您可以将其用作仪表板小部件的默认样式表，或修改这些样式以更改小部件布局。</p></td></tr><tr id="7356567f" class="ijRowEven"><td id="caca7133"><a href="https://unpkg.com/hub-dashboard-addons@latest" rel="noopener noreferrer" data-external="true" target="_blank">仪表板脚本</a> </td><td id="27b07cf2">该脚本包含通过消息与仪表板通信的代码。它创建一个<code class="code">Dashboard</code>全局范围内的对象，您可以在其中调用单个方法<code class="code">registerWidget</code> 。<p id="63034fa0">要使用此脚本，请选择以下实现之一：</p>                    <ul class="list _ul"><li class="list__item" id="94e98620"><p>在您的标题中添加对它的引用<code class="code">index.html</code>文件。将参考包装在<script> tag. For example:                            </p><div class="code-block" data-lang="markup"><script src="https://unpkg.com/hub-dashboard-addons@latest"></script></p></li></ul></td></tr></tbody></table></div>                        <p></p><li class="list__item" id="f27376cd"><p>使用npm软件包管理器将脚本与<code class="code">npm install hub-dashboard-addons</code>命令。然后，您可以根据需要在应用程序中添加对脚本的引用。</p></li>                <table><tbody><tr id="437bb6d7" class="ijRowOdd"><td id="0a453153"><a href="https://github.com/JetBrains/ring-ui" rel="noopener noreferrer" data-external="true" target="_blank">环形界面</a></td><td id="313e0a37"><p id="44d4ce38">JetBrains已发布了一个用于Web产品的Web组件的开源库。该库包含50多个React控件，范围从简单的链接和按钮到复杂的控件（如日期选择器和交互式分层数据列表）。该库在YouTrack，Hub，Upsource，TeamCity和其他产品中广泛使用。</p>                    <p id="55fd1ebb">有关组件和设置说明的完整列表，请<a href="https://jetbrains.github.io/ring-ui/master/index.html" rel="noopener noreferrer" data-external="true" target="_blank">在线</a>访问<a href="https://jetbrains.github.io/ring-ui/master/index.html" rel="noopener noreferrer" data-external="true" target="_blank">Ring UI库</a> 。</p></td></tr></tbody></table></div>        <p id="2b10a4a2">为小部件组装所有内容和源文件后，将清单添加到最顶层目录并创建一个ZIP存档。然后，您可以将ZIP存档导入到YouTrack中，并启用该小部件以在您的仪表板上使用。</p>    </article></div>    <div class="chapter"><h2 id="widget-manifest" data-toc="building-custom-widgets#widget-manifest">小部件清单</h2>        <p id="bd811ccc">每个小部件应包含一个<code class="code">manifest.json</code>文件。该文件定义您的自定义窗口小部件的属性。</p>        <p id="1ace07cf">为了让YouTrack读取并显示小部件清单中的属性：</p>        <ul class="list _ul"><li class="list__item" id="851c2170"><p>该文件必须命名<code class="code">manifest.json</code> 。</p></li><li class="list__item" id="0701cabb"><p>该文件必须存储在ZIP存档的最顶层目录中。</p></li></ul>        <p id="495e1395">小部件清单中定义了以下属性：</p>        <div class="table-wrapper"><table class=" wide" width="100%" id="ac55a12c"><thead><tr id="da749d0c" class="ijRowHead"><th id="115f5e5b" width="20%"><p>属性</p></th><th id="a1e8d039" width="10%"><p>类型</p></th><th id="aeaa3b5c"><p>描述</p></th><th id="0cf2b970" width="10%"><p>条件</p></th></tr></thead><tbody><tr id="f19f4cfd" class="ijRowOdd"><td id="824c4487"><p>键</p></td><td id="62cd9437"><p>串</p></td><td id="9b1c10d3"><p>用于在YouTrack中标识窗口小部件的内部ID。每个服务器的此ID必须唯一。</p></td><td id="e6687638"><p>需要</p></td></tr><tr id="0046bb31" class="ijRowEven"><td id="bc592f95"><p>版</p></td><td id="33ce071e"><p>串</p></td><td id="15e5e810"><p>窗口小部件应用程序的版本号。</p></td><td id="0f32bab4"><p>需要</p></td></tr><tr id="be42f2fe" class="ijRowOdd"><td id="904e7616"><p>名称</p></td><td id="7e8fcfc7"><p>串</p></td><td id="6e7078f1"><p>自定义窗口小部件的名称。这将在“ <span class="control">自定义小部件”</span>列表中标识小部件，并显示在“ <span class="control">添加小部件”</span>下拉菜单中。</p></td><td id="93effe36"><p>需要</p></td></tr><tr id="1d09a958" class="ijRowEven"><td id="be3f3f54"><p>描述</p></td><td id="ac9ab894"><p>串</p></td><td id="009e5e61"><p>在“ <span class="control">自定义小部件”</span>列表上显示的描述。</p></td><td id="55235c46"><p>需要</p></td></tr><tr id="67ca50c1" class="ijRowOdd"><td id="aa1e7dea"><p>作者</p></td><td id="f1b2cb49"><p>串</p></td><td id="9609b119"><p>创建窗口小部件的开发人员的名称和电子邮件地址。指定的格式与NPM软件包中使用的格式相同。有关更多信息，请参考<a href="https://docs.npmjs.com/files/package.json#people-fields-author-contributors" rel="noopener noreferrer" data-external="true" target="_blank">npm软件包说明</a> 。</p></td><td id="778ee540"><p>需要</p></td></tr><tr id="578c3284" class="ijRowEven"><td id="1ef3c392"><p>homeUrl</p></td><td id="7e99ca50"><p>网址</p></td><td id="57fbb946"><p>小部件主页或代码存储库的网址。显示在小部件列表的“ <span class="control">详细信息”</span>侧栏中。</p></td><td id="ffee9769"><p>可选的</p></td></tr><tr id="5efc1b6b" class="ijRowOdd"><td id="f29a4baa"><p>应用名称</p></td><td id="0a9506bc"><p>串</p></td><td id="91104bde"><p>窗口小部件旨在显示其内容的应用程序的名称。例如， <code class="code">YouTrack</code> 。</p></td><td id="28ab23fa"><p>可选的</p></td></tr><tr id="fc8f7f4e" class="ijRowEven"><td id="befeb6bf"><p>iconUrl</p></td><td id="26773cac"><p>网址</p></td><td id="b2479fd4"><p>用作小部件图标的图像的地址。该位置是相对于小部件根文件夹的，没有斜杠。如果为空，则在<code class="code">applicationName</code>显示在小部件标题中。</p></td><td id="d952aa23"><p>可选的</p></td></tr><tr id="8a35b31a" class="ijRowOdd"><td id="0a9ad035"><p>依存关系</p></td><td id="f8ca6883"><p>序列</p></td><td id="21b96a06"><p id="610db90c">小部件向其发送HTTP请求的服务列表。指定为键和值对的序列。为了使小部件按预期工作，必须将这些服务连接到YouTrack安装。有关更多信息，请参见<a href="#widget-dependencies">依赖关系</a> 。</p>                    <ul class="list _ul"><li class="list__item" id="c7d8d53c"><p>密钥必须等于注册服务的应用程序名称属性。如果密钥与YouTrack中的任何服务都不匹配，则忽略该属性。</p></li><li class="list__item" id="0fe6fad5"><p id="b8002753">这些值对应于指定服务支持的应用程序版本。该窗口小部件仅具有其版本与指定服务匹配的应用程序。</p>                            <p id="a135ef9a">版本号遵循语义版本规范（SemVer）推荐的格式。有关更多信息，请参考<a href="https://docs.npmjs.com/misc/semver" rel="noopener noreferrer" data-external="true" target="_blank">npm</a>的<a href="https://docs.npmjs.com/misc/semver" rel="noopener noreferrer" data-external="true" target="_blank">语义版本器</a> 。</p>                        </li></ul>                </td><td id="a50c1dfa"><p>可选的</p></td></tr><tr id="8338fffc" class="ijRowEven"><td id="48be6dda"><p>产品展示</p></td><td id="427d8cf8"><p>序列</p></td><td id="51ee89f8">可以安装小部件的产品和兼容版本的列表。指定为键和值对的序列，类似于依赖项列表。有关更多信息，请参见<a href="#widget-products">产品</a> 。<ul class="list _ul"><li class="list__item" id="cd20f7a3"><p>密钥必须等于注册服务的应用程序名称属性。如果密钥与任何已注册的服务都不匹配，则忽略该属性。</p></li><li class="list__item" id="cee0ef19"><p>这些值对应于小部件兼容的应用程序版本。版本与指定服务匹配的应用程序仅支持安装。</p></li></ul>                </td><td id="4b5e1d17"><p>需要</p></td></tr><tr id="0de9bc91" class="ijRowOdd"><td id="aa760bae"><p>视图</p></td><td id="a59b8578"><p>序列</p></td><td id="a815c9f1">视觉属性列表。支持以下属性：<div class="table-wrapper"><table class=" wide" width="100%" id="d0fd5700"><thead><tr id="d81c4d02" class="ijRowHead"><th id="cf6e96b1"><p>属性</p></th><th id="aad752e9"><p>类型</p></th><th id="0d44a233"><p>描述</p></th></tr></thead><tbody><tr id="678dc7bc" class="ijRowOdd"><td id="5bdc9ce9"><p>淡出</p></td><td id="679198fe"><p>布尔型</p></td><td id="54df6962"><p>确定滚动内容区域的视觉呈现。什么时候<code class="code">true</code> ，将阴影应用于小部件内滚动内容区域的顶部和底部。</p></td></tr><tr id="6052f68e" class="ijRowEven"><td id="42ca1a07"><p>defaultWidth</p></td><td id="99b1e166"><p>整数</p></td><td id="b818eadd"><p>设置用户将小部件添加到仪表板时的默认宽度。如果为空，则将值设置为<code class="code">2</code> 。</p></td></tr><tr id="790284e4" class="ijRowOdd"><td id="7ce69e24"><p>defaultHeight</p></td><td id="20125178"><p>整数</p></td><td id="d5d3c9e5"><p>设置用户将小部件添加到仪表板时的默认宽度。如果为空，则将值设置为<code class="code">2</code> 。</p></td></tr></tbody></table></div>可以为<code class="code">defaultWidth</code>和<code class="code">defaultHeight</code>属性与仪表板上网格的列和行相对应。“ <span class="control">仪表板”</span>页面的网格具有八列和无限数量的行。在窗口小部件清单中设置这些属性时，将确定最适合在窗口小部件中显示内容的宽度和高度。</td><td id="8e515c7a"><p>可选的</p></td></tr><tr id="7f88af5e" class="ijRowEven"><td id="a837a35e"><p>能力</p></td><td id="2c0afb77"><p>序列</p></td><td id="e34aceab">窗口小部件在Web浏览器中支持的功能列表。这些属性通知安装窗口小部件的用户操纵浏览器行为的功能。支持以下属性：<div class="table-wrapper"><table class=" wide" width="100%" id="42b6139c"><thead><tr id="14bb7c79" class="ijRowHead"><th id="5015b9ee"><p>属性</p></th><th id="5ac131cf"><p>类型</p></th><th id="e4f56761"><p>描述</p></th></tr></thead><tbody><tr id="f75e6a5e" class="ijRowOdd"><td id="f10cf905"><p>弹出窗口</p></td><td id="cc003c20"><p>布尔型</p></td><td id="db709e43"><p>什么时候<code class="code">true</code> ，该小部件能够显示警报并在新的浏览器标签或窗口中打开链接。当小部件使用<code class="code">target="_blank"</code>一个或多个链接的属性，使用<code class="code">window.open()</code>方法，或使用<code class="code">alert()</code>方法。</p></td></tr><tr id="4f729c38" class="ijRowEven"><td id="bac247a0"><p>顶部导航</p></td><td id="4320cf7a"><p>布尔型</p></td><td id="57405530"><p>什么时候<code class="code">true</code> ，该小部件能够在浏览器窗口中打开链接作为顶部文档，从而远离当前页面。当小部件使用<code class="code">target="_parent"</code>要么<code class="code">target="_top"</code>一个或多个链接的属性。</p></td></tr></tbody></table></div>                </td><td id="c9c3251e"><p>可选的</p></td></tr></tbody></table></div>        <p id="b9917d5a">以下示例显示了如何在JSON文件中定义每个属性。要构建自己的清单，请复制此示例，将其粘贴到编辑器中，然后用您自己的示例属性替换。</p>        <div class="code-block" data-lang="json">{“键”：“ some-widget”，“版本”：“ 1.0”，“名称”：“显示名称”，“描述”：“做某事的小部件”，“作者”：“ Dee Veloper <dee.veloper@gmail.com>”，“ homeUrl“：” https://github.com/huston007/some-widget“，” applicationName“：” YouTrack“，” iconUrl“：” static / icon.svg“，” dependencies“：{” YouTrack“：”> 2017.1“，” Hub“：”> 3.0“}，”产品“：{” Hub“：”> = 2018.1“，” Upsource“：”> = 2018.1“，” YouTrack“：”> = 2018.1“}，” view“：{” fadeOut“：true，” defaultWidth“：3，” defaultHeight“：2}，” capabilities“：{” popups“：true，” topNavigation“：true}}</dee.veloper@gmail.com></div>    </div>    <div class="chapter"><h2 id="widget-compatibility" data-toc="building-custom-widgets#widget-compatibility">小部件兼容性</h2>        <p id="ffd411ae">窗口小部件清单中有两个部分，用于定义窗口小部件是否与安装兼容以及与其连接的服务。使用此处提供的信息相应地设置清单中的值。</p>        <div class="chapter"><h3 id="widget-dependencies">依存关系</h3>            <p id="25500956">的<code class="code">dependencies</code>部分包含小部件向其发送HTTP请求的服务的列表。如果这些服务未连接到YouTrack安装，则该小部件没有任何要显示的数据。</p>            <p id="ddddae21">在某些情况下，您的HTTP请求要求所连接的服务使用特定的API版本。为了正常运行，您的窗口小部件需要指定支持该请求的最低版本号。</p>        </div>        <div class="chapter"><h3 id="widget-products">产品展示</h3>            <p id="25f4578e">的<code class="code">products</code>部分列出了可将其安装到其中的产品。在这里，版本控制取决于产品本身支持的仪表板API的版本。</p>            <p id="4c0cff18">新的次要Hub版本正式支持仪表板API扩展。新的次要版本的YouTrack和Upsource也包含这些更改。</p>            <p id="fe9e4070">例如，如果窗口小部件使用在Hub 2018.1发行后添加的方法，则可以在Hub版本2018.2及更高版本中安装该窗口小部件。参考资料中对YouTrack和Upsource的引用<code class="code">products</code>本节还应要求2081.2为安装的最低版本。</p>        </div>    </div>    <div class="chapter"><h2 id="widget-size-limitations" data-toc="building-custom-widgets#widget-size-limitations">大小限制</h2>        <p id="a7b3ea6e">为了保护您的安装免受恶意归档软件包的侵扰，集线器会阻止太大或包含太多文件的上载。这些限制适用于所有上载，包括从JetBrains插件存储库下载的自定义窗口小部件。每个小部件软件包都受以下限制：</p>        <ul class="list _ul"><li class="list__item" id="bd36b8af"><p>ZIP存档本身不能大于10 MB。</p></li><li class="list__item" id="0c68a88f"><p>存档中的单个未压缩文件不能大于30 MB。</p></li><li class="list__item" id="cef64955"><p>ZIP存档不能包含超过1000个文件。</p></li></ul>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Time-Tracking-REST-API.html">时间跟踪REST API</a> <a class="navigation-links__next" href="custom-widget-tutorial.html">自定义小部件教程</a></div><div id="disqus_thread" data-skip-index="skip"></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>