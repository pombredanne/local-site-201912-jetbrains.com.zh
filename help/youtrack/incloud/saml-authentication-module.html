<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>SAML 2.0 Auth Module - Help | YouTrack InCloud</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="saml-authentication-module" data-breadcrumbs="Administration.xml|Administration/Access-Management.xml|Access Management/Managing-Auth-Modules.xml|Auth Modules/saml-authentication-module.xml|SAML 2.0 Auth Module" data-main-title="SAML 2.0 Auth Module"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search YouTrack InCloud Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack InCloud 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="saml-authentication-module" id="saml-authentication-module.xml">SAML 2.0 Auth Module</h1>    <p id="cb3f9ef0">A SAML 2.0 authentication module lets you configure YouTrack as a SAML Service Provider (SAML SP).        SAML supports single sign-on (SSO) across multiple domains.    </p>    <p id="e8fa9cb1">When you enable an SAML 2.0 authentication module in YouTrack:</p>    <ul class="list _bullet"><li class="list__item" id="6f6e7ffa"><p>Your users log in to YouTrack with the credentials that are managed in a specified third-party identity provider (SAML IdP).</p></li><li class="list__item" id="04456cfd"><p>Your YouTrack users have fewer accounts and passwords to remember.</p></li><li class="list__item" id="d20824fd"><p>New users with accounts in the connected service can create their own accounts in YouTrack.</p></li></ul>    <p id="97acdcab">YouTrack can also be set up as a SAML IdP, however, the instructions for the identity provider setup are not        described here.        To learn how to use YouTrack as a SAML IdP, see <a href="SAML-2.0.html">SAML 2.0</a>.    </p>    <div class="chapter"><h2 id="idp-initiated-sso" data-toc="saml-authentication-module#idp-initiated-sso">IdP-initiated SSO</h2>        <p id="d5a6f0ab">The SAML 2.0 authentication module supports both service-provider (SP) and identity-provider (IdP) initiation for single-sign on (SSO).            The login request is based on how the user signs in to YouTrack.</p>        <ul class="list _ul"><li class="list__item" id="8add04f8"><p>If the user signs in through an external login portal or access management provider (for example, OneLogin), the request is initiated by the IdP.</p></li><li class="list__item" id="2b7b7b1c"><p>If the user signs in by clicking the button for the IdP in the YouTrack login page, the request is initiated by YouTrack as SP.</p></li></ul>        <p id="154cb6cc">To support this behavior, the <code class="code">RelayState</code> parameter for your SAML IdP must be empty.            If you set a value for this parameter in the configuration for your IdP, the redirection to Hub results in a <code class="code">Can't restore state</code> error.</p>    </div>    <div class="chapter"><h2 id="add-saml-auth-module-general" data-toc="saml-authentication-module#add-saml-auth-module-general">Add a New SAML2.0 Authentication Module</h2>        <section class="procedure-steps"><h3 id="add-procedure">To add a SAML2.0 Authentication module:</h3><aside data-type="tip" class="prompt" data-title="" rel="add-procedure" id="190d091a"><p>Requires permissions: Low-level Admin Write</p></aside><ol class="list _decimal"><li class="list__item" id="95325868"><p>In a service that you plan to use as a SAML identity provider for YouTrack InCloud, retrieve its parameters as the IdP.</p></li><li class="list__item" id="8c5850ec"><p>If the IdP service does not provide a fingerprint of their certificate, create it applying SHA256. For example, you can use <a href="https://www.samltool.com/fingerprint.php" data-external="true" target="_blank" rel="noopener noreferrer">SAML Tool</a></p></li><li class="list__item" id="81182b07"><p>In YouTrack InCloud, open the <span data-skip-index="skip" class="menupath">Administration &gt; Auth Modules</span> page.</p></li><li class="list__item" id="8036d587"><p>Click the <span class="control">New module</span> button, then select <span class="control">SAML 2.0</span> from the list.                <figure><a class="lightbox" href="/help/img/youtrack/2019.2/new-saml-2-0-auth-module.zoomed.png"><img alt="new SAML auth module" title="new SAML auth module" src="/help/img/youtrack/2019.2/new-saml-2-0-auth-module.png" id="5285f1e4" width="600" height="258"></a></figure>            </p></li><li class="list__item" id="dfa0a0b5"><p id="e6abd23c">In the dialog, specify the parameters for the IdP service, then click the <span class="control">Create</span> button.</p>                <ul class="list _ul"><li class="list__item" id="8de0df81"><p>The SAML 2.0 authentication modules is created and enabled.</p></li></ul>            </li><li class="list__item" id="2dcbace4"><p>Configure the auth module by providing the names of the SAML attributes for user accounts in the <span class="control">Attributes</span> section of the page.</p></li></ol></section>    </div>    <div class="chapter"><h2 id="sample-configurations" data-toc="saml-authentication-module#sample-configurations">Sample Configurations</h2>        <div class="chapter"><h3 id="sample-procedure-okta">Use Okta as SAML Identity Provider in YouTrack</h3>            <p id="c0974b18">Configuring Okta as a SAML IdP in YouTrack is an easy but not a straight forward process. The trick is that to create an Auth module in YouTrack, you need to provide a unique URL for the IdP. However, in Okta, the IdP URL is specific for an application, and is generated when you create the application for the SAML SP.            And to create an application for YouTrack as a SAML service provider in Okta, you need the unique URL that is generated in YouTrack only when you create the Auth module for Okta. This "URLs loop" results in the loop in the configuration procedure: You create an application in Okta with a fake URL for YouTrack to generate the IdP URL, then you create an auth module in YouTrack to generate the SP URL, and after that you can provide the actual SP URL from YouTrack in the Okta application.</p>            <section class="procedure-steps"><h3 id="4801ce45">To use Okta as IdP for YouTrack InCloud:</h3><ol class="list _decimal"><li class="list__item" id="59c4a009"><p>In Okta, create a new application for YouTrack InCloud service. Use any URLs for YouTrack InCloud as the SP. You need to correct it later. See the <a href="https://developer.okta.com/standards/SAML/setting_up_a_saml_application_in_okta" data-external="true" target="_blank" rel="noopener noreferrer">Okta documentation for setting up SAML application</a>.</p></li><li class="list__item" id="7832eed2"><p>When you created the application, click the <span class="control">View Setup Instructions</span> button to open a page with the parameters of your Okta IdP:                    <figure><a class="lightbox" href="/help/img/youtrack/2019.2/okta-idp-app-parameters.zoomed.png"><img alt="Parameters for Okta IdP" title="Parameters for Okta IdP" src="/help/img/youtrack/2019.2/okta-idp-app-parameters.png" id="deda2161" width="600" height="520"></a></figure>                </p></li><li class="list__item" id="d24033c4"><p>Download the certificate of your Okta IdP.</p></li><li class="list__item" id="fe04d50e"><p>Create a fingerprint for the Okta certificate applying SHA256. For example, you can use <a href="https://www.samltool.com/fingerprint.php" data-external="true" target="_blank" rel="noopener noreferrer">SAML Developer Tools</a>.</p></li><li class="list__item" id="bb82a580"><p>In YouTrack InCloud, open <span data-skip-index="skip" class="menupath">Auth Modules</span> page.</p></li><li class="list__item" id="f9f33260"><p id="1b9ccbcc">Click the <span class="control">New module</span> button, then select SAML&nbsp;2.0 in the drop-down list.</p>                    <ul class="list _ul"><li class="list__item" id="1396a45a"><p>A <span class="control">New Module</span> dialog is displayed in the right side-panel.</p></li></ul>                </li><li class="list__item" id="e478e28a"><p>In the displayed dialog, specify the parameters of your Okta IdP. Click <span class="control">Create</span>.                    <figure><a class="lightbox" href="/help/img/youtrack/2019.2/yt-okta-idp-create-new-auth-module.zoomed.png"><img alt="Yt okta idp create new auth module" title="Yt okta idp create new auth module" src="/help/img/youtrack/2019.2/yt-okta-idp-create-new-auth-module.png" id="51248bc9" width="600" height="257"></a></figure>                </p></li><li class="list__item" id="fe15df5b"><p>Configure the new module: Set up the SAML attributes.                    <figure><a class="lightbox" href="/help/img/youtrack/2019.2/okta-idp-configure-auth-module.zoomed.png"><img alt="Okta idp configure auth module" title="Okta idp configure auth module" src="/help/img/youtrack/2019.2/okta-idp-configure-auth-module.png" id="b3cfed56" width="600" height="365"></a></figure>                </p></li><li class="list__item" id="955cd1e9"><p>Switch back to Okta. In Okta, edit the YouTrack application: Provide URLs that are generated during the creation of the new auth module.</p></li><li class="list__item" id="57c53935"><p>Assign the YouTrack application to groups and users that should be able to log in to YouTrack with Okta credentials.</p></li></ol></section>            <p id="f8896d48">That's it. Now the users can log in to YouTrack and connected services with their Okta credentials.</p>        </div>        <div class="chapter"><h3 id="sample-procedure-youtrack-as-idp">Use YouTrack as SAML Identity Provider in YouTrack</h3>            <p id="dccce436">If you have two YouTrack services, you can use one of them as a SAML Identity Provider and another one — as the service provider.</p>            <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="7899ef28"><p>In the YouTrack InCloud that you use as SAML IdP, open <span data-skip-index="skip" class="menupath">admin menu &gt; SAML 2.0</span> page.                                        For details about YouTrack as a SAML 2.0 Identity Provide, see <a href="Parameters-of-YouTrack-as-SAML-2.0-Identity-Provider.html">Parameters of YouTrack as SAML 2.0 Identity Provider</a>.                </p></li><li class="list__item" id="4cb902e9"><p>In YouTrack that you use as SAML service provider, open <span class="control">Auth Modules</span> page.</p></li><li class="list__item" id="22fe41d2"><p id="85eba7e7">Click <span class="control">New module</span>, then, select <span class="control">SAML&nbsp;2.0...</span>.</p>                    <ul class="list _ul"><li class="list__item" id="5641a12d"><p>A <span class="control">New Module</span> dialog is displayed in the right side-panel.</p></li></ul>                </li><li class="list__item" id="757ba69b">                    <p id="8d14ea09">In the dialog, enter the parameters of the YouTrack service that you use as IdP, then click the <span class="control">Create</span> button.</p>                                        <ul class="list _ul"><li class="list__item" id="662de3a6"><p>The new module is created.                                                    </p></li><li class="list__item" id="62559873"><p>The settings page for the new SAML auth module opens.</p></li></ul>                </li><li class="list__item" id="44cddbb1"><p>Configure SAML attributes:                                    </p></li><li class="list__item" id="e5d6a498"><p>In the IdP, open <span data-skip-index="skip" class="menupath">Admin menu &gt; SAML 2.0 &gt; Registered services</span> tab. Register the YouTrack SAML service provider:                                    As SAML Attributes, provide the same values that you have set up in the <span class="control">Attributes</span> section of the auth module settings page.                    For more details, see <a href="Register-Service-Provider.html">Register a Service Provider</a>.                </p></li></ol></section>            <p id="849dc230">You are all set! Now your users can log into the YouTrack SP with the credentials from the YouTrack service that you use as SAML IdP.</p>        </div>    </div><div class="last-modified" data-skip-index="skip">Last modified: 29 November 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="paypal-auth-module.html">PayPal Auth Module</a><a class="navigation-links__next" href="Yahoo-Authentication-Module.html">Yahoo! Auth Module</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>