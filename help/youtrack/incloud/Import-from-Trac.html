<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>从Trac导入-帮助|帮助YouTrack InCloud</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Import-from-Trac" data-breadcrumbs="Migrating-to-YouTrack.xml|Migrate to YouTrack/Import-from-Trac.xml|Import from Trac" data-main-title="Import from Trac"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack InCloud帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack InCloud 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Import-from-Trac.xml" data-toc="Import-from-Trac">从Trac导入</h1>    <p id="b0decf1a">按照此页面上的说明，使用<a href="https://github.com/JetBrains/youtrack-python-scripts" rel="noopener noreferrer" data-external="true" target="_blank">Python导入脚本</a>从Trac导入票证。此过程需要执行以下步骤：</p>    <ol class="list _decimal"><li class="list__item" id="ba835fc0"><p><a href="#set-up-your-environment">设置您的本地环境</a> 。</p></li><li class="list__item" id="ef647f98"><p>（可选） <a href="#customize-mapping-file">自定义Trac数据库中的字段与YouTrack中的issue属性之间的映射</a> 。</p></li><li class="list__item" id="ebb4594c"><p><a href="#import-data">导入您的问题</a> 。</p></li></ol>    <p id="5fbe63c1">该脚本支持从Trac 1.2版和更高版本导入。如果使用的是较早版本，则应先升级Trac安装，然后再将问题从Trac导入到YouTrack。</p>    <div class="chapter"><h2 id="trac-issue-import-details" data-toc="Import-from-Trac#trac-issue-import-details">导入细节</h2>        <p id="86075093">如果Trac数据库包含对YouTrack中不存在的实体的引用，则会创建它们。您用于运行导入的用户帐户应具有创建项目，问题，用户，甚至更多的权限。我们建议您使用具有<span class="control">系统管理员</span>角色的帐户来执行导入脚本。</p>        <p id="7a181aad">新实体的创建如下：</p>        <div class="table-wrapper"><table width="100%" id="b7cee66c"><thead><tr id="ee889caa" class="ijRowHead"><th id="261c22ac" width="20%"><p>实体</p></th><th id="e2a83bf8"><p>描述</p></th></tr></thead><tbody><tr id="04426848" class="ijRowOdd"><td id="1308cd4c"><p>专案</p></td><td id="80432a5c"><p id="5e81f62c">Python脚本可让您一次从源项目中导入所有问题。如果该项目尚不存在，则创建一个新项目。</p>                    <ul class="list _ul"><li class="list__item" id="3b0e84a5"><p>根据Trac数据库中的值分配项目名称和ID。</p></li><li class="list__item" id="9f65cf02"><p>将执行导入脚本的用户设置为项目所有者。</p></li></ul></td></tr><tr id="54d3a251" class="ijRowEven"><td id="9d7f8022"><p>用户数</p></td><td id="81efa64a"><p id="523fcd4d">几个问题属性，例如<code class="code">reporterName</code>和<code class="code">Assignee</code>存储对用户帐户的引用。对于每个与YouTrack中现有用户的登录名或电子邮件都不匹配的帐户，将创建一个新的用户帐户。Trac中有两种类型的用户：</p>                    <ul class="list _ul"><li class="list__item" id="f204a5f3"><p>注册用户的登录名和密码。这些用户将使用其原始名称和电子邮件导入到YouTrack。</p></li><li class="list__item" id="6d901625"><p id="3ff28602">仅在创建或添加票证时指定名称和电子邮件地址或名称的未注册用户。仅在提供电子邮件地址时才导入这些用户。没有电子邮件地址的用户将作为<span class="control">来宾</span>导入。</p>                            <p id="b51c35e1">映射文件中有一个选项，可让您将所有未注册的用户作为<span class="control">来宾</span>导入，而不是在YouTrack中创建新帐户。</p></li></ul>                    <p id="ed443a9c">所有新用户帐户均分配有随机生成的密码。要登录YouTrack，导入的用户必须单击登录页面上的<span class="control">重置密码</span>链接并创建新密码。</p>                    <aside class="prompt" rel="ed443a9c" id="bf41f675" data-type="warning" data-title="">                        <p id="59bcac51">导入数据中对用户的引用将映射到YouTrack中的现有帐户。如果找不到匹配项，则会创建一个新的用户帐户。</p>                        <p id="11a9a978">根据您的订阅计划，为导入的用户分配了许可证。对于超出您的每用户许可限制的用户，导入的用户被标记为禁止用户。</p>                        <p id="6dc930ac">有关更多信息，请参见<a href="Ban-User-Accounts.html">禁止用户帐户</a> 。</p>                    </aside>                </td></tr><tr id="c688aa17" class="ijRowOdd"><td id="1c628cab"><p>自定义字段</p></td><td id="f2235eb7"><p id="fbda0250">如果导入数据包含YouTrack中不存在的字段，则将创建自定义字段并将其添加到目标项目中。</p>                    <ul class="list _ul"><li class="list__item" id="fef656ab"><p>字段名称和类型是根据<a href="#trac-ticket-fields-mapping">映射文件中</a>的定义设置的。</p></li><li class="list__item" id="00f0f8b3"><p>自定义字段的属性设置如下： <code class="code">autoAttached=true</code> ， <code class="code">isPrivate=false</code> ， <code class="code">defaultVisibility=false</code> 。</p></li></ul>                </td></tr><tr id="057c3192" class="ijRowEven"><td id="a121fdfb"><p>栏位值</p></td><td id="cb6e64a2"><p>如果源文件包含现有字段的新值，则将它们添加到当前值集中。</p></td></tr><tr id="5e691ab2" class="ijRowOdd"><td id="8b85eb10"><p>标签</p></td><td id="c0cb1f89"><p>Track中的关键字将作为标签导入。</p></td></tr><tr id="30760485" class="ijRowEven"><td id="c8fde905"><p>工作项目</p></td><td id="b996252d"><p>Trac提供了支持时间跟踪的插件。导入脚本会自动检测并从支持的插件中导入时间跟踪值。这些值将作为工作项添加到导入的问题中。</p></td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="set-up-your-environment" data-toc="Import-from-Trac#set-up-your-environment">设置环境</h2>        <p id="cd6933b4"><a href="https://github.com/JetBrains/youtrack-python-scripts" rel="noopener noreferrer" data-external="true" target="_blank">Python导入脚本</a>支持“导入到YouTrack”。这些脚本基于YouTrack REST API构建。实际上，您实际上不需要使用Python进行任何编程，但是您确实需要安装Python和包含导入脚本的软件包。</p>        <section class="procedure-steps"><h3 id="8ef8545c">设置环境：</h3><ol class="list _decimal"><li class="list__item" id="e2c2f47c"><p id="bc74ecbb">下载并安装<a href="https://www.python.org/downloads/release/python-2714/" rel="noopener noreferrer" data-external="true" target="_blank">Python</a> 。Python客户端库与Python 2.7+兼容。不支持Python 3版本。您可以选择自己喜欢的安装目录。</p>                <p id="77b30c7b">macOS，CentOS，Red Hat Enterprise Linux（RHEL）和Ubuntu的最新版本均随附Python 2.7。如果使用任何这些操作系统，请继续下一步。</p></li><li class="list__item" id="0467cc02"><p id="04eff247">安装包含导入脚本的软件包。打开操作系统支持的命令行界面，然后输入以下命令：</p>                <div class="code-block" data-lang="none"><code class="code-block__wrapper">pip install youtrack-scripts</code></div>                <ul class="list _ul"><li class="list__item" id="58df4f2b"><p>导入脚本安装在您的本地环境中。</p></li><li class="list__item" id="b4dc036c"><p>的<code class="code">youtrack</code>包含YouTrack REST API的Python客户端库的软件包会自动作为依赖项安装。</p></li></ul>                <p id="9f4c11b1">如果您不想全局安装软件包，则只能使用以下命令为您的用户帐户安装软件包：</p>                <div class="code-block" data-lang="none"><code class="code-block__wrapper">pip install --user youtrack-scripts</code></div>            </li></ol></section>    </div>    <div class="chapter"><h2 id="customize-mapping-file" data-toc="Import-from-Trac#customize-mapping-file">自定义映射定义</h2>        <p id="0c83f64d">下一步是将Trac数据库中的字段映射到YouTrack中的属性。</p>        <p id="5e92dbe3">仅在Trac中自定义问题属性时，才需要自定义映射文件。要使用默认的映射定义，请跳过此过程并<a href="#import-data">导入数据</a> 。</p>                <section class="procedure-steps"><h3 id="70c94992">要自定义映射定义：</h3><ol class="list _decimal"><li class="list__item" id="06470e96"><p>找到用于从Trac导入问题的默认映射文件，然后将其打开以进行编辑。该文件包含在包含导入脚本的安装包中。该文件位于<code class="code">youtrackutils/trackLib</code>子目录并另存为<code class="code">defaultTrac.py</code> 。</p></li><li class="list__item" id="aef04904"><p>更新映射，以确保要从Trac数据库导入的所有数据都映射到YouTrack中所需的值。如果文件包含一个或多个不想导入的字段，则可以从映射文件中删除引用。有关默认映射的说明，请参见<a href="#trac-import-mapping-notes">默认映射</a> 。</p></li><li class="list__item" id="c162327b"><p id="54de9ec1">设置用于管理用户导入的参数的值：</p>                <ul class="list _ul"><li class="list__item" id="0ee59912"><p><code class="code">default_email</code> —为没有电子邮件导入的用户分配默认电子邮件地址。</p></li><li class="list__item" id="6cd07795"><p><code class="code">accept_non_authorised_users</code> —如果<code class="code">True</code> ，未注册的用户将导入到YouTrack。如果<code class="code">False</code> ，未注册的用户将作为<span class="control">来宾</span>导入。</p></li></ul></li><li class="list__item" id="dfc8afe4"><p id="10a1105e">如果使用，请指定在Trac中启用的时间跟踪插件。映射文件中的默认参数设置为<code class="code">support_time_tracking = "auto"</code> ，它会自动从支持的插件中检测并导入时间跟踪值。您还可以指定从中导入数据的插件：</p>            <div class="table-wrapper"><table width="100%" id="502c2195"><thead><tr id="51e9328d" class="ijRowHead"><th id="ab994a97"><p>值</p></th><th id="74ca0e59"><p>描述</p></th></tr></thead><tbody><tr id="0abaddc7" class="ijRowOdd"><td id="b75e0381"><code class="code">trachours</code></td><td id="58a34e8a"><p>从<a href="https://trac-hacks.org/wiki/TracHoursPlugin" rel="noopener noreferrer" data-external="true" target="_blank">TracHoursPlugin</a>导入数据。</p></td></tr><tr id="f4920536" class="ijRowEven"><td id="f59692e5"><code class="code">timingandestimationplugin</code></td><td id="0da76549"><p>从<a href="https://trac-hacks.org/wiki/TimingAndEstimationPlugin" rel="noopener noreferrer" data-external="true" target="_blank">TimingAndEstimationPlugin</a>导入数据。</p></td></tr></tbody></table></div>            </li><li class="list__item" id="1c838255"><p>保存您的更改并关闭映射文件。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="import-data" data-toc="Import-from-Trac#import-data">汇入资料</h2>        <p id="dfe9217c">最后一步是运行从Trac导入数据的命令。</p>        <section class="procedure-steps"><h3 id="e68f27b4">导入数据：</h3><ol class="list _decimal"><li class="list__item" id="e3ed62b4"><p>打开操作系统支持的命令行界面。</p></li><li class="list__item" id="d21c32ad"><p>如有必要，将当前目录更改为Python的安装目录。例如（Windows）：</p><div class="code-block" data-lang="none"><code class="code-block__wrapper">cd C:\Python27</code></div><p></p></li><li class="list__item" id="ead99edb"><p id="fe8f1bfe">输入以下命令：</p>                <div class="code-block" data-lang="none"><code class="code-block__wrapper">trac2youtrack target_url target_login target_password project_ID project_name path_to_trac_environment</code></div>                <p id="d005de8c">将命令行参数替换为如下所述的值：</p>                <div class="table-wrapper"><table width="100%" id="ff57d8ea"><thead><tr id="5e33d535" class="ijRowHead"><th id="b1e7d18e" width="20%"><p>参数</p></th><th id="604c6401"><p>描述</p></th></tr></thead><tbody><tr id="75087070" class="ijRowOdd"><td id="102e1db5"><code class="code">target_url</code></td><td id="552438eb"><p>目标YouTrack服务器的基本URL。对于YouTrack InCloud实例，您的基本URL包括结尾<code class="code">/youtrack</code> 。例如： <code class="code">https://company.myjetbrains.com/youtrack</code> </p></td></tr><tr id="c8fce598" class="ijRowEven"><td id="5880a707"><code class="code">target_login</code></td><td id="904c9543"><p>YouTrack管理员帐户的登录名。</p></td></tr><tr id="ee20adf0" class="ijRowOdd"><td id="3d44ce6d"><code class="code">target_password</code></td><td id="6a9d1176"><p>YouTrack管理员帐户的密码。</p></td></tr><tr id="cc4c4295" class="ijRowEven"><td id="09089bca"><code class="code">project_ID</code></td><td id="0b9b4084"><p>YouTrack中目标项目的ID。</p></td></tr><tr id="242be01b" class="ijRowOdd"><td id="7cfdfc00"><code class="code">project_name</code></td><td id="a9b0c4a1"><p>YouTrack中目标项目的名称。</p></td></tr><tr id="82a1273f" class="ijRowEven"><td id="07da2975"><code class="code">path_to_trac_environment</code></td><td id="59b1f4d4"><p>Trac中源项目的路径。</p></td></tr></tbody></table></div>                <ul class="list _ul"><li class="list__item" id="e42ee50c"><p>该命令执行Python导入脚本。</p></li><li class="list__item" id="b5ee4bb4"><p>如果成功，则会在命令行界面中针对每个问题打印以下行：</p><div class="code-block" data-lang="none">已<issue id="">成功导入</issue>问题[ <issue id="">]</issue></div>                    <p></p></li></ul>            </li><li class="list__item" id="dc73f38a"><p id="51651791">检查您将问题导入到的项目，并验证数据是否正确显示。如果您对结果不满意，并想重新导入数据：</p>                <ul class="list _ul"><li class="list__item" id="9782a060"><p>删除导入期间创建的所有问题。如果将问题导入到新项目中，则只需删除该项目。</p></li><li class="list__item" id="a8cca37b"><p>编辑您的映射文件。</p></li><li class="list__item" id="fec875d9"><p>再次运行导入脚本。</p></li></ul></li></ol></section>    </div>    <div class="chapter"><h2 id="trac-import-mapping-notes" data-toc="Import-from-Trac#trac-import-mapping-notes">默认映射</h2>        <p id="16cbd1a3">Python客户端库包含用于将问题从Trac导入到YouTrack的默认映射文件。该文件另存为<code class="code">defaultTrac.py</code>在里面<code class="code">youtrackutils/tracLib</code>存储库的子文件夹。</p>        <div class="chapter"><h3 id="trac-type-mapping">机票类型</h3>            <p id="f5ce197b">Trac中的票证使用默认类型的<span class="control">缺陷</span> ， <span class="control">增强功能</span>和<span class="control">任务</span> 。默认映射文件包含一个<code class="code">types</code>将这些值映射到YouTrack中“ <span class="control">类型”</span>字段的相应值的字典。</p>            <div class="code-block" data-lang="none"><code class="code-block__wrapper">types = { "defect" : "Bug", "enhancement" : "Feature", "task" : "Task", }</code></div>            <p id="8c6bdd99">编辑映射文件的此部分时，请注意以下准则：</p>            <ul class="list _ul"><li class="list__item" id="3fb2e8e4"><p>映射的左侧引用了Trac中“ <span class="control">类型”</span>字段的值。如果您已向该字段添加了自定义值，则为字典中的每个值添加一个新定义。</p></li><li class="list__item" id="6a0b74b4"><p>映射的右侧引用了YouTrack中“ <span class="control">类型”</span>字段的相应值。如果为“ <span class="control">类型”</span>字段指定了尚不存在的值，则在导入期间会将其添加到该字段中。</p></li></ul>        </div>        <div class="chapter"><h3 id="trac-priority-mapping">票务优先</h3>            <p id="54321727">与“ <span class="control">类型”</span>字段的映射类似，此词典将Trac中“ <span class="control">优先级”</span>字段的值映射到YouTrack中具有相同名称的字段。请遵循与问题类型相同的准则来自定义映射文件的此部分。默认问题优先级的映射如下：</p>            <div class="code-block" data-lang="none"><code class="code-block__wrapper">priorities = { "trivial" : "Minor", #Minor "minor" : "Normal", #Normal "major" : "Major", #Major "critical" : "Critical", #Critical "blocker" : "Show-stopper" #Show-stopper }</code></div>        </div>        <div class="chapter"><h3 id="trac-resolution-status-mapping">票务解决方案和状态</h3>            <p id="2e94f4ed">Trac中“ <span class="control">分辨率”</span>和“ <span class="control">状态”</span>字段的值都映射到YouTrack中“ <span class="control">状态”</span>字段的值。这些值的默认映射如下：</p>            <div class="code-block" data-lang="none"><code class="code-block__wrapper">resolutions = { "duplicate" : "Duplicate", "fixed" : "Fixed", "wontfix" : "Won't fix", "worksforme" : "Can't Reproduce", "invalid" : "Can't Reproduce" # : "To be discussed } states = { "accepted" : "Submitted", "new" : "Open", "reopened" : "Reopened", "assigned" : "Submitted", "closed" : None }</code></div>        </div>        <div class="chapter"><h3 id="trac-ticket-fields-mapping">票务字段</h3>            <p id="754b9d9f">的<code class="code">field_names</code>字典将Trac中的字段名称映射到YouTrack中的自定义字段。您可以更新本节中的映射，以将数据导入到特定的自定义字段。默认映射文件仅包含与YouTrack中现有字段不匹配的字段的定义：</p>            <div class="code-block" data-lang="none">field_names = {“解决方案”：“状态”，“状态”：“状态”，“所有者”：“受让人”，“版本”：“修复版本”，“组件”：“子系统”，“ Test_five”：“ YT选择” }</div>            <p id="0d5b1bdf">编辑自定义字段映射时，请注意以下准则：</p>            <ul class="list _ul"><li class="list__item" id="722c4ceb"><p>映射的左侧引用“跟踪”中的字段名称。</p></li><li class="list__item" id="607994f0"><p>映射的右侧引用了YouTrack中自定义字段的名称。</p></li><li class="list__item" id="ecda4432"><p id="3e7c359f">如果您没有为Trac中的字段指定与YouTrack中的目标字段不匹配的映射，则会创建一个自定义字段，其名称与Trac中的名称相同。</p>            <p id="86c096a0">例如，旧版本的Trac包含一个<span class="control">Severity</span>字段。默认映射文件定义了字段类型，但没有将字段映射到YouTrack中的目标字段。该字段及其值将作为新的“ <span class="control">严重性”</span>字段导入。</p></li></ul>        </div>        <div class="chapter"><h3 id="trac-custom-field-types-mapping">自定义字段类型</h3>            <p id="cc857e00">的<code class="code">field_types</code>字典将Trac中的数据类型映射到YouTrack中的自定义字段类型。如果您已将字段添加到自定义字段的映射中，请在此字典中添加相应的条目，以定义如何将数据存储在YouTrack中。缺省映射文件包含以下字段类型的定义：</p>            <div class="code-block" data-lang="none">field_types = {“优先级”：“枚举[1]”，“类型”：“枚举[1]”，“状态”：“状态[1]”，“修复版本”：“版本[*]”，“受影响版本”：“版本[*]”，“受让人”：“ user [1]”，“严重性”：“枚举[1]”，“ YT选择”：“枚举[*]”，“子系统”：“所属字段” [1]“}</div>            <p id="b4cefe66">编辑字段类型映射时，请注意以下准则：</p>            <ul class="list _ul"><li class="list__item" id="a9e93819"><p>映射的左侧引用了YouTrack中自定义字段的名称。这些值必须与“ <code class="code">field_names</code>字典。</p></li><li class="list__item" id="947fb6d3"><p>映射的右侧引用了YouTrack中的字段类型。有关有效类型的列表，请参阅<a href="PUT-Prototype.html#new-custom-field-types">Administration REST API</a> 。</p></li><li class="list__item" id="88dcad12"><p>如果目标字段已经存在于YouTrack中，则无需在此处添加目标字段。</p></li><li class="list__item" id="1cb6737c"><p>您不能更改现有字段的数据类型。例如，如果现有的“ <span class="control">受理人”</span>字段存储单个值（ <code class="code">user[1]</code> ），您不能使用<code class="code">user[*]</code>在映射文件中，并导入多个受让人。您必须首先更新该属性在YouTrack用户界面<span class="control">受让人</span>字段，然后导入数据。</p></li></ul>        </div>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Import-from-Redmine.html">从Redmine</a> <a class="navigation-links__next" href="Import-from-Another-YouTrack-Server.html">导入从另一个YouTrack服务器导入问题</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>