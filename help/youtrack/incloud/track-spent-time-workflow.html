<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>跟踪花费的时间-帮助|帮助YouTrack InCloud</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="track-spent-time-workflow" data-breadcrumbs="Administration.xml|Administration/Workflow-Guide.xml|Workflows/Workflow-Use-Cases.xml|Use Cases for Workflows/track-spent-time-workflow.xml|Track Spent Time" data-main-title="Track Spent Time"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack InCloud帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack InCloud 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="track-spent-time-workflow.xml" data-toc="track-spent-time-workflow">追踪花费的时间</h1>  <p id="6a1bd752">时间跟踪是YouTrack中的一项标准功能。如果您想学习基础知识，请阅读《 <a href="Time-Management-Tutorial.html">时间跟踪教程》</a> 。这是一个简短的概述。</p>  <p id="8c1489d4">此功能使您可以量化投入到问题上的精力。这项工作记录在工作项中。每个工作项记录解决问题所花费的时间。可以为这些工作项分配不同的类别，例如开发，测试或要聚合和跟踪的任何其他类型的活动。</p>  <p id="c6670924">时间跟踪数据记录在自定义字段中：</p>  <div class="table-wrapper"><table width="100%" id="046c2e96"><thead><tr id="eabcc6b1" class="ijRowHead"><th id="3057e8cf" width="20%"><p>领域</p></th><th id="d34e5f01"><p>描述</p></th></tr></thead><tbody><tr id="6e28d328" class="ijRowOdd"><td id="498b5745"><p>花时间</p></td><td id="76468d90"><p>显示已添加到问题中的所有工作项中记录的总时间。</p></td></tr><tr id="5d9db312" class="ijRowEven"><td id="8ffca1bf"><p>估算值</p></td><td id="8a359e9f"><p>存储您认为完成任务所需的时间。</p></td></tr></tbody></table></div>  <p id="86d55b88">通过分析这些字段中的值之间的差异，您可以衡量团队的整体绩效。</p>  <p id="9c2dd6b8">当您只想按计费时间记录活动时，也可以使用时间跟踪而无需估算。</p>  <p id="fcc05f6f">默认情况下，这些字段将值存储为句点。期间自定义字段以易于理解的形式表示时间间隔，因此您可以记录估算值并查看以星期，天和小时为单位的花费时间。每周工作天数和每天工作小时数是在全局级别配置的。如果更改这些设置，则会相应地更新计算。有关更多信息，请参阅<a href="Time-Tracking.html">时间跟踪</a> 。</p>  <div class="chapter"><h2 id="default-workflows-that-track-time" data-toc="track-spent-time-workflow#default-workflows-that-track-time">跟踪时间的默认工作流程</h2>  <p id="11af747b">工作项通常用于开票，因此准确记录它们非常重要。但是，必须添加这些工作项的员工往往会忘记他们或试图欺骗系统。这两个问题都可以借助工作流进行调整。</p>  <p id="2e78e79a">YouTrack提供了默认工作流程，这些工作流程会在特定条件下自动将工作项添加到问题中。</p>  <div class="table-wrapper"><table width="100%" id="c75eb491"><thead><tr id="f0244e59" class="ijRowHead"><th id="69a01d4b" width="20%"><p>默认工作流程</p></th><th id="0e81dc6c"><p>描述</p></th></tr></thead><tbody><tr id="9cd0b530" class="ijRowOdd"><td id="42307180"><a href="Workflow-Work-Timer.html">进行中工作计时器</a></td><td id="95e77f1b"><p>该工作流程开始的时候，一个问题移动到进行<span class="control">中的</span>状态。当问题移到标记为“ <span class="control">已解决”</span>的状态时，计时器停止。这些状态更改之间经过的时间量被添加为工作项。</p></td></tr><tr id="de4a87f5" class="ijRowEven"><td id="bde0a04d"><a href="Workflow-Standalone-Work-Timer.html">秒表式工作计时器</a></td><td id="2d89d47c"><p>在此，计时器将根据名为<span class="control">Timer</span>的自定义字段中的值手动停止和启动。该字段存储两个值： <span class="control">Start</span>和<span class="control">Stop</span> 。每次将值更改为<span class="control">Stop时</span> ，代表当前用户将经过的时间记录在工作项中。将值切换回<span class="control">开始将</span>重置计时器。</p></td></tr><tr id="336f70fb" class="ijRowOdd"><td id="b1d6f131"><a href="Workflow-Pomodoro-Timer.html">番茄计时器</a></td><td id="0ca02ab3"><p>此工作流使用状态机来模仿<a href="https://francescocirillo.com/pages/pomodoro-technique" rel="noopener noreferrer" data-external="true" target="_blank">Pomodoro技术</a> 。它会在专用的<span class="control">Pomodoro状态</span>字段中更改值，以便您在每个25分钟的工作时间段内休息5分钟。各个工作项将自动添加到问题中。</p></td></tr></tbody></table></div>    <p id="c02429d7">这些工作流有助于解决忘记记录工作项的问题，但是它们并没有为尝试欺骗系统的用户提供任何解决方案。</p>  </div>  <div class="chapter"><h2 id="set-limits-time-tracking" data-toc="track-spent-time-workflow#set-limits-time-tracking">设置时间跟踪限制</h2>    <p id="60366036">让我们看一下使用规则来增强时间跟踪功能的一些策略，这些规则禁止违反标准操作程序的操作。</p>    <p id="0df03a55">您的业务实践可能有所不同，但是我们假设您的员工应在工作进行的同一天或至少在几天之内添加工作项。添加日期超过过去一周的工作项是违反规则的。</p>    <p id="d72fff8a">相应的规则编写如下：</p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; var工作流程= require（'@ jetbrains / youtrack-scripting-api / workflow'）; var WEEK_IN_MS = 7 * 24 * 60 * 60 * 1000; Exports.rule =实体。Issue.onChange（{title：'禁止添加具有过去日期的工作项'，警卫：function（ctx）{return ctx.issue.workItems.added.isNotEmpty（）;}，操作：function（ctx）{ctx。 issue.workItems.added.forEach（function（item）{var itemDate = new Date（item.date）.setUTCHours（0，0，0，0）; var今天= new Date（）。setUTCHours（0，0，0 ，0）; workflow.check（今天=>今天-WEEK_IN_MS，“不允许在过去一周以上的时间内添加工作！'）; }）; }， 要求： {} }）;</div>    <p id="b79cc0f5">启用此规则后，用户不能添加日期超过过去一周的工作项。如果您想更严格地限制时间，可以将日期限制为过去的一两天。只需设置常数的值即可。就我们而言<code class="code">WEEK_IN_MS</code> 。</p>    <p id="a0a1266a">由于无法准确预测要花费多少时间来处理该问题，因此也无法添加将来日期的工作项。</p>    <p id="b0747d7d">这是一条排除千里眼的规则：</p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; var工作流程= require（'@ jetbrains / youtrack-scripting-api / workflow'）; Exports.rule =实体。Issue.onChange（{title：'禁止添加将来带有日期的工作项'，警卫：function（ctx）{return ctx.issue.workItems.added.isNotEmpty（）;}，操作：function（ctx）{ctx。 issue.workItems.added.forEach（function（item）{var itemDate = new Date（item.date）.setUTCHours（0，0，0，0）; var今天= new Date（）。setUTCHours（0，0，0 ，0）; workflow.check（itemDate <=今天，“您无法添加尚未执行的工作！'）; }）; }， 要求： {} }）;</div>    <p id="37278f60">如果您严重担心员工的作弊意图，请不要忘记编辑工作项的功能！用户仍然可以通过创建具有今天日期的工作项并编辑该工作项以使用他们喜欢的任何日期来对系统进行游戏。</p>    <p id="6bc54e68">这是一组规则，这些规则应用了过去和将来用于添加工作项的相同限制，以阻止对违反相同策略的工作项进行编辑：</p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; var工作流程= require（'@ jetbrains / youtrack-scripting-api / workflow'）; var WEEK_IN_MS = 7 * 24 * 60 * 60 * 1000; Exports.rule =实体。Issue.onChange（{title：'禁止编辑具有过去日期的工作项'，guard：function（ctx）{return ctx.issue.editedWorkItems.isNotEmpty（）;}，操作：function（ctx）{ctx.issue。 editedWorkItems.forEach（function（item）{var itemDate = new Date（item.date）.setUTCHours（0，0，0，0）; var today = new Date（）。setUTCHours（0，0，0，0）; workflow.check（itemDate> =今天-WEEK_IN_MS，“不允许将工作项目编辑在一周之前！'）; }）; }， 要求： {} }）;</div>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; var工作流程= require（'@ jetbrains / youtrack-scripting-api / workflow'）; Exports.rule =实体。Issue.onChange（{title：'将来禁止编辑工作项'，guard：function（ctx）{return ctx.issue.editedWorkItems.isNotEmpty（）;}，操作：function（ctx）{ctx.issue.editedWorkItems.forEach （函数（item）{var itemDate = new Date（item.date）.setUTCHours（0，0，0，0）; var today = new Date（）。setUTCHours（0，0，0，0）;工作流。检查（今天，itemDate <=，“不允许编辑工作项以使用将来的日期！'）; }）; }， 要求： {} }）;</div>    <p id="ad82a775">我们的最后一条规则确保没有人可以煮书。将工作项添加到问题后，此规则将阻止任何人删除它：</p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; var工作流程= require（'@ jetbrains / youtrack-scripting-api / workflow'）; Exports.rule =实体。Issue.onChange（{标题：“禁止删除工作项”，警卫：function（ctx）{return ctx.issue.workItems.removed.isNotEmpty（）;}，操作：function（/ * ctx * /）{workflow.check （错误，“不允许删除工作项！'）; }， 要求： {} }）;</div>    <p id="9094dc3c">您可以将这些规则用作起点，并应用适合您的业务流程的约束。以下是一些替代实现：</p>    <ul class="list _ul"><li class="list__item" id="fd6f2d72"><p>您可以让用户删除上周添加的工作项，而仅禁止删除过去一周以上的工作项。</p></li><li class="list__item" id="ed350773"><p>您可以将范围限制为不早于工作周开始的日期，而不必限制添加和编辑日期超过过去一周的工作项。</p></li><li class="list__item" id="d3c138ff"><p>您可以修改限制，以使其不应用于项目所有者或团队负责人。</p></li></ul>  </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="propagate-values-between-issues-workflow.html">在问题之间传播值</a> <a class="navigation-links__next" href="generate-time-reports-workflow.html">生成时间报告</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>