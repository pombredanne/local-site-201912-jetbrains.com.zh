<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Building Integrations with Slack - Help | YouTrack InCloud</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Slack-Integration-HTML" data-breadcrumbs="Administration.xml|Administration/Workflow-Guide.xml|Workflows/Workflows-in-JavaScript.xml|JavaScript Workflow Reference/Slack-Integration-HTML.xml|Building Integrations with Slack" data-main-title="Building Integrations with Slack"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search YouTrack InCloud Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack InCloud 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Slack-Integration-HTML" id="Slack-Integration-HTML.xml">Building Integrations with Slack</h1>    <p id="37d67e0f">With the <a href="v1-http.html">http module</a> from the workflow API, you can use workflows to script push-style integrations with Slack.       This type of integration lets you post notifications to Slack for specific issue events.</p>    <aside data-type="note" class="prompt" data-title="YouTrack App for Slack" rel="37d67e0f" id="84283dcb">        <p id="d686f62c">JetBrains has its own app for YouTrack in the <a href="https://youtrackapptest.slack.com/apps/AEJG9S4LC-youtrack" data-external="true" target="_blank" rel="noopener noreferrer">Slack App Directory</a>.        This integration supports notifications, link previews, and issue drafts without any additional configuration.</p>        <p id="59d5ede0">Scripting your own integration with workflows lets you choose when and where you push notifications, but it doesn't support all of the features that are built into the YouTrack app.        To learn how to install and use the YouTrack app, see <a href="slack-app-integration.html">Slack Integration</a>.</p>        <p id="41a9b697">You're not limited to one type of Slack integration or the other.        You can install the YouTrack app for general use and still build custom integrations with workflows.</p>    </aside>    <p id="6cb20109">The workflow-based integration uses <span class="control">Incoming WebHooks</span> to enable an integration between Slack and YouTrack.        The YouTrack workflow sends a normal HTTP request with a JSON payload that contains the issue ID and summary.</p>    <p id="b560f282">This integration only lets you post notifications to Slack.        This type of integration does not let users update issues with commands by sending direct messages to a bot account.</p>    <p id="1a1cc804">To set up this integration with Slack, follow these steps:</p>    <ol class="list _decimal"><li class="list__item" id="ec908038"><a href="#add-custom-integration">Add a custom integration to Slack</a></li><li class="list__item" id="8a0dad82"><a href="#customize-workflow">Customize the Slack Notifications workflow</a> </li><li class="list__item" id="0caf3985"><a href="#enable-workflow">Enable the Slack Notifications workflow in YouTrack</a> </li></ol>    <p id="0ad73925">The basic setup described here lets you post notifications to a specific channel in Slack for issue events in a single YouTrack project.        For more complex integrations, see <a href="#multi-project">Multi-channel and Multi-project Configurations</a>.</p>    <div class="chapter"><h2 id="add-custom-integration" data-toc="Slack-Integration-HTML#add-custom-integration">Add a Custom Integration to Slack</h2>        <p id="23df56a8">This type of Slack integration is enabled on a per-project basis in YouTrack and enabled for a specific channel in Slack.</p>        <section class="procedure-steps"><h3 id="a00341ec">To add a custom integration:</h3><ol class="list _decimal"><li class="list__item" id="9cee331c"><p>In Slack, access the channel that you want to integrate with YouTrack.</p></li><li class="list__item" id="bd3bb679"><p id="8953bb0e">From the <span class="control">Channel Settings</span> menu, select <span class="control">Add an app</span>.</p>                <figure><a class="lightbox" href="/help/img/youtrack/2019.2/slackIntegrationAddApp.zoomed.png"><img alt="Slack integration add app" title="Slack integration add app" src="/help/img/youtrack/2019.2/slackIntegrationAddApp.png" id="aab4a561" width="600" height="369"></a></figure>            <ul class="list _ul"><li class="list__item" id="063dc2b1"><p>The <span class="control">App Directory</span> page opens in your web browser.</p></li></ul></li><li class="list__item" id="78b3b852"><p id="659ceceb">Click <span class="control">Build</span> in the page header.</p>            <figure><a class="lightbox" href="/help/img/youtrack/2019.2/slackIntegrationBuild.zoomed.png"><img alt="Slack integration build" title="Slack integration build" src="/help/img/youtrack/2019.2/slackIntegrationBuild.png" id="1ad170d6" width="600" height="127"></a></figure>                <ul class="list _ul"><li class="list__item" id="62fca9f7"><p>The <span class="control">Slack API</span> page opens.</p></li></ul>            </li><li class="list__item" id="37c13186"><p id="869e512d">Click the <span class="control">Start Building</span> button.</p>                <figure><a class="lightbox" href="/help/img/youtrack/2019.2/slack-integration-start-building.zoomed.png"><img alt="Slack integration start building" title="Slack integration start building" src="/help/img/youtrack/2019.2/slack-integration-start-building.png" id="8f1430ef" width="600" height="271"></a></figure>                <ul class="list _ul"><li class="list__item" id="e7a0c53b"><p>The <span class="control">Your Apps</span> page opens.</p></li></ul></li><li class="list__item" id="05a23df1"><p id="5fda6497">Click the <span class="control">Create an App</span> button.</p>                <figure><a class="lightbox" href="/help/img/youtrack/2019.2/slackIntegrationCustom.zoomed.png"><img alt="Slack integration custom" title="Slack integration custom" src="/help/img/youtrack/2019.2/slackIntegrationCustom.png" id="4096a7c1" width="600" height="243"></a></figure>            <ul class="list _ul"><li class="list__item" id="0e485505"><p>The <span class="control">Create a Slack App</span> dialog opens.                    <figure><a class="lightbox" href="/help/img/youtrack/2019.2/create-slack-app-dialog.zoomed.png"><img alt="Create slack app dialog" title="Create slack app dialog" src="/help/img/youtrack/2019.2/create-slack-app-dialog.png" id="c7e1f7e6" width="600" height="353"></a></figure>                </p></li></ul></li><li class="list__item" id="a5e5e674"><p id="d737bd91">Complete the fields in the form:</p>            <ul class="list _ul"><li class="list__item" id="9d4e874a"><p>In the <span class="control">App Name</span> field, assign a name to the integration.</p></li><li class="list__item" id="cde690e3"><p>From the <span class="control">Development Slack Workplace</span> drop-down list, select the channel that you want to integrate with YouTrack.</p></li></ul></li><li class="list__item" id="7221654e"><p id="d3c98954">Click the <span class="control">Create App</span> button.</p>            <ul class="list _ul"><li class="list__item" id="fa292477"><p>The new app opens to the <span class="control">Basic Information</span> page.                </p></li></ul></li><li class="list__item" id="34819c23"><p id="57d7379d">In the <span class="control">Add features and functionality</span> section of the page, click <span class="control">Incoming Webhooks</span>.</p>                <figure><a class="lightbox" href="/help/img/youtrack/2019.2/slack-integration-basic-info.zoomed.png"><img alt="Slack integration basic info" title="Slack integration basic info" src="/help/img/youtrack/2019.2/slack-integration-basic-info.png" id="2f2e2481" width="600" height="307"></a></figure>                <ul class="list _ul"><li class="list__item" id="f64395ff"><p>The <span class="control">Incoming Webhooks</span> page opens.</p></li></ul></li><li class="list__item" id="a97e808c"><p>Toggle the <span class="control">Activate Incoming Webhooks</span> option to <span class="control">On</span>.                <figure><a class="lightbox" href="/help/img/youtrack/2019.2/slackIntegrationIncomingWebhooks.zoomed.png"><img alt="Slack integration incoming webhooks" title="Slack integration incoming webhooks" src="/help/img/youtrack/2019.2/slackIntegrationIncomingWebhooks.png" id="1daf8c9b" width="600" height="223"></a></figure>            </p></li><li class="list__item" id="aca6038a"><p>Scroll to the bottom of the page and click the <span class="control">Add New Webhook to Workspace</span> button.            <figure><a class="lightbox" href="/help/img/youtrack/2019.2/add-new-webhook.zoomed.png"><img alt="Add new webhook" title="Add new webhook" src="/help/img/youtrack/2019.2/add-new-webhook.png" id="a70c0e93" width="600" height="230"></a></figure>            </p></li><li class="list__item" id="21f617d0"><p>From the <span class="control">Post to</span> drop-down list, select the channel that you want to integrate with YouTrack.            <figure><a class="lightbox" href="/help/img/youtrack/2019.2/slack-integration-post-to-channel.zoomed.png"><img alt="Slack integration post to channel" title="Slack integration post to channel" src="/help/img/youtrack/2019.2/slack-integration-post-to-channel.png" id="f44792f7" width="600" height="348"></a></figure>            </p></li><li class="list__item" id="963ac948"><p id="30392bbd">Click the <span class="control">Authorize</span> button.</p>                <ul class="list _ul"><li class="list__item" id="9cf12b73"><p>A WebHook URL is added to your workspace.</p></li></ul>            </li><li class="list__item" id="11571877"><p>Click the <span class="control">Copy</span> button to copy the Webhook URL to your clipboard.                <figure><a class="lightbox" href="/help/img/youtrack/2019.2/slackIntegrationWebhookURL.zoomed.png"><img alt="Slack integration webhook url" title="Slack integration webhook url" src="/help/img/youtrack/2019.2/slackIntegrationWebhookURL.png" id="b7ce0399" width="600" height="318"></a></figure>                In the following procedure, you add this URL to your workflow rules in YouTrack.</p></li><li class="list__item" id="49c809e7"><p>Optionally, customize the settings for your custom integration:</p></li><li class="list__item" id="61e3e3cd"><p>Click the <span class="control">Save Settings</span> button.</p></li></ol></section>        <p id="44ef5f4f">There are additional settings you can customize on the <span class="control">Basic Information</span> page for your app.        These settings affect the appearance of the account that posts notifications to your channel.</p>        <figure><a class="lightbox" href="/help/img/youtrack/2019.2/slackIntegrationSettings.zoomed.png"><img alt="Slack integration settings" title="Slack integration settings" src="/help/img/youtrack/2019.2/slackIntegrationSettings.png" id="e86b7476" width="600" height="211"></a></figure>        <p id="a4fdd643">The following settings are available in the <span class="control">Display Information</span> section of the page:</p>        <div class="table-wrapper"><table width="100%" id="d09abe94"><thead><tr id="a5f620d8" class="ijRowHead"><th id="50acefc0" width="20%"><p>Setting</p></th><th id="68d040cf"><p>Description</p></th></tr></thead><tbody><tr id="c61af9a7" class="ijRowOdd"><td id="43e279e2"><p>App name</p></td><td id="7ce95cea"><p>Lets you customize the name that is displayed for notifications that are posted by the integration.</p></td></tr><tr id="5cb04664" class="ijRowEven"><td id="487c7016"><p>Short description</p></td><td id="31cd6bdd"><p>Lets you explain why this account is posting notifications to the channel.</p></td></tr><tr id="e7998e7c" class="ijRowOdd"><td id="a502d20a"><p>App icon &amp; Preview</p></td><td id="c2db2daa"><p>Displays a custom image in notifications from this integration.</p></td></tr><tr id="a901991a" class="ijRowEven"><td id="b14fed88"><p>Background color</p></td><td id="04627328"><p>Customizes the background color.</p></td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="customize-workflow" data-toc="Slack-Integration-HTML#customize-workflow">Customize the Slack Notifications Workflow</h2>        <p id="41ac0bae">The next step is to edit the default <a href="slack-notifications-workflow.html">Slack Notifications</a> workflow so it sends notifications to your channel in Slack.</p>        <section class="procedure-steps"><h3 id="customize-procedure">To customize the Slack Notifications workflow:</h3><aside data-type="tip" class="prompt" data-title="" rel="customize-procedure" id="969fc251"><p>Requires permissions: Update Project</p></aside><ol class="list _decimal"><li class="list__item" id="2bfe68c4"><p>From the <span class="control">Core Features</span> section of the <span class="control">Administration</span> menu, select <span class="control">Workflows</span>.</p></li><li class="list__item" id="957b1786"><p id="d5639436">Locate the <span class="control">Slack Notifications</span> workflow that you want to modify and click its name in the list.</p>                <ul class="list _ul"><li class="list__item" id="95685310"><p>The workflow opens in the <span class="control">Workflows</span> page.</p></li></ul></li><li class="list__item" id="56da8da3"><p id="414373f4">Click the <span class="control">send-to-slack</span> link in the left menu.</p>            <ul class="list _ul"><li class="list__item" id="66123eea"><p>The <span class="control">send-to-slack</span> rule opens in the workflow editor.</p></li></ul></li><li class="list__item" id="a9e07154"><p>Locate the variable declaration for the <code class="code">SLACK_WEBHOOK_URL</code> and replace the value with the <span class="control">Webhook URL</span> that you copied from your custom integration in the previous procedure.</p></li><li class="list__item" id="6f72d797"><p id="6b8419b5">Click the <span class="control">Save</span> button in the workflow editor.</p>                <ul class="list _ul"><li class="list__item" id="4ee46e9d"><p>Your changes are applied to the script.</p></li></ul></li></ol></section>    </div>    <div class="chapter"><h2 id="enable-workflow" data-toc="Slack-Integration-HTML#enable-workflow">Enable the Slack Notifications Workflow in YouTrack</h2>        <p id="5d680000">The last step is to attach the <span class="control">Slack Notifications</span> workflow to your project in YouTrack.</p>        <section class="procedure-steps"><h3 id="enable-procedure">To enable the Slack Integration workflow:</h3><aside data-type="tip" class="prompt" data-title="" rel="enable-procedure" id="7ee15e91"><p>Requires permissions: Update Project</p></aside><ol class="list _decimal"><li class="list__item" id="8dff89cc"><p>Open the project that you want to integrate with Slack.</p></li><li class="list__item" id="3d4022a1"><p>Click the <span class="control">Edit project</span> link.</p></li><li class="list__item" id="a61d2eb9"><p>Select the <span class="control">Workflow</span> tab.</p></li><li class="list__item" id="048b7d3a"><p id="785c17aa">From the <span class="control">Attach workflows</span> drop-down list, select <span class="control">Slack Notifications</span>.</p>                <ul class="list _ul"><li class="list__item" id="be01ca81"><p>The Slack Integration workflow is attached to your project.</p></li></ul></li><li class="list__item" id="016bfe1b"><p id="e111fd28">If the <span class="control">requires setup</span> label is shown next to the workflow, click the <span class="control">Configure project</span> button in the sidebar to resolve any errors.</p>            <ul class="list _ul"><li class="list__item" id="94a63997"><p>The workflow is enabled and ready for use with your project.</p></li></ul>            </li></ol></section>        <p id="2d64f47f">When the setup is complete and the workflow is attached to your project, notification is sent to the channel when an issue is created, resolved, or reopened in the project.            If you want to include other events that are important to your team, you can easily customize this notification scheme.</p>        <figure><img alt="Slack integration new issue" title="Slack integration new issue" src="/help/img/youtrack/2019.2/slackIntegrationNewIssue.png" id="16c93ddd" width="824" height="92"></figure>        <p id="c9bdd339">In each notification, the YouTrack issue ID is set as a direct link to the issue in YouTrack.</p>    </div>    <div class="chapter"><h2 id="multi-project" data-toc="Slack-Integration-HTML#multi-project">Multi-channel and Multi-project Configurations</h2>        <p id="8f5ba64d">The basic setup lets you post updates from a single YouTrack project to a specific channel in Slack.            However, you can easily configure this setup for more complex integration scenarios.</p>        <div class="chapter"><h3 id="one-project-many-channels">One Project, Many Channels</h3>            <p id="24b0e5a7">The Slack Integration workflow is scripted to support an integration between one YouTrack project and one channel in Slack.                You can add custom integrations to different channels in Slack and add the Webhook URL for each channel to your workflow rule.</p>            <p id="bc5fa475">To customize the workflow rule to support this case, modify the block of code that establishes a connection and sends the notification.              Use the following sample as a guide:</p>          <div class="code-block" data-lang="javascript">var sendTo = function(hook) {
  var connection = new http.Connection(hook, null, 2000);
  var response = connection.postSync('', null, JSON.stringify(payload));
  if (!response.isSuccess) {
    console.warn('Failed to post notification to Slack. Details: ' + response.toString());
  }
}
sendTo('https://hooks.slack.com/services/T00000001/B000000001/XXXXXXXXXXXXXXXXXXXXXXXX');
sendTo('https://hooks.slack.com/services/T00000002/B000000002/XXXXXXXXXXXXXXXXXXXXXXXX');
sendTo('https://hooks.slack.com/services/T00000003/B000000003/XXXXXXXXXXXXXXXXXXXXXXXX');</div>        </div>        <div class="chapter"><h3 id="many-projects-one-channel">Many Projects, One Channel</h3>            <p id="33c9f96e">If you want to send notifications from multiple YouTrack projects to a single channel in Slack, the setup is relatively simple.</p>            <ol class="list _decimal"><li class="list__item" id="088c5d31"><p>Follow the steps described here to add the URL for your Slack channel to the workflow rules.</p></li><li class="list__item" id="9e292d7d"><p>Attach this workflow to all of the projects you want to report to Slack.</p></li></ol>        </div>        <div class="chapter"><h3 id="separate-projects-separate-channels">Separate Projects, Separate Channels</h3>            <p id="f6435467">In a slightly more complicated setup, you have multiple teams who discuss different projects in separate channels.                You want to direct notifications from specific projects to the channels where each team discusses their issues.</p>            <p id="a3300d63">The easiest way to handle this situation is to create separate workflows for each project and customize the rules accordingly.</p>            <section class="procedure-steps"><h3 id="a3540612">To support this use case:</h3><ol class="list _decimal"><li class="list__item" id="32bcbda6"><p>Create a new workflow in the workflow editor.                    Give the workflow a name that shows its relationship to the project where it will be applied.</p></li><li class="list__item" id="4042aa99"><p>Copy the rule from the Slack Notifications workflow and add them as an on-change rule to the new workflow.</p></li><li class="list__item" id="99c2c6a1"><p>Update the Webhook URL in the workflow rule to reference the Slack channel that you want to notify in this project.</p></li><li class="list__item" id="2d81cb8d"><p>Save your changes in the workflow editor.</p></li><li class="list__item" id="212718f1"><p>Repeat steps 1 through 4 for every channel that you want to notify in each project.</p></li><li class="list__item" id="9cd99ace"><p>Attach each workflow to the project for which it has been customized.</p></li></ol></section>            <p id="789ea0ee">An alternative approach is to add conditional statements to your workflow rules.                With conditional statements, you can identify the project that each issue belongs to and send notifications to dedicated channels in Slack.                You can then attach the same workflow to all of the projects that are referenced in the workflow and update the same set of workflow rules when you want to enable Slack integration in a new project.</p>            <p id="eaeab8fc">To support this use case, add a conditional statement that associates each project with a specific channel. Use the following sample as a guide:</p>            <div class="code-block" data-lang="javascript">var hooks = {
  ctx.Project1.key: 'https://hooks.slack.com/services/T00000001/B000000001/XXXXXXXXXXXXXXXXXXXXXXXX',
  ctx.Project2.key: 'https://hooks.slack.com/services/T00000002/B000000002/XXXXXXXXXXXXXXXXXXXXXXXX'
};
if (hooks[issue.project.key]) {
  var connection = new http.Connection(hooks[issue.project.key], null, 2000);
  var response = connection.postSync('', null, JSON.stringify(payload));
  if (!response.isSuccess) {
    console.warn('Failed to post notification to Slack. Details: ' + response.toString());
  }
} else {
  console.warn('Project ' + ctx.project.key + ' does not have an associated Slack hook!');
}</div>        </div>    </div><div class="last-modified" data-skip-index="skip">Last modified: 29 November 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="using-workflow-api.html">Using the Workflow API</a><a class="navigation-links__next" href="JS-Workflow-REST-API.html">Using REST API Methods in JavaScript Workflows</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>