<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>更改数据库位置-帮助|帮助YouTrack单机版</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Changing-Database-Location" data-breadcrumbs="Administration.xml|Administration/Server-Settings.xml|Server Settings/Database.xml|Database Backup/Changing-Database-Location.xml|Change Database Location" data-main-title="Change Database Location"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack独立帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Changing-Database-Location.xml" data-toc="Changing-Database-Location">变更资料库位置</h1>    <p id="ed6ccdea">YouTrack使用其自己的进程内数据库。默认情况下，数据文件保存到<code class="code"><youtrack_home>/data</code>目录。</p>    <aside class="prompt" rel="ed6ccdea" id="7226f094" data-type="note" data-title="">        <p id="f1ddfd94">此页面上的所有命令均适用于Linux和macOS。对于Windows安装，请更换<code class="code">.sh</code>与<code class="code">.bat</code>并使用反斜杠。</p>    </aside>    <p id="1a50ebed">YouTrack存储数据的默认目录包含以下子目录：</p>    <div class="table-wrapper"><table width="100%" id="061db36e"><thead><tr id="582425ae" class="ijRowHead"><th id="ca705037" width="20%"><p>名称</p></th><th id="fcec9463"><p>描述</p></th></tr></thead><tbody><tr id="89fa2c58" class="ijRowOdd"><td id="1657ce84"><code class="code">youtrack</code></td><td id="ab9101a6"><p>包含YouTrack数据库</p></td></tr><tr id="11078ab9" class="ijRowEven"><td id="4bd6d678"><code class="code">hub</code></td><td id="2c0ac875"><p>如果内置的集线器曾经用于YouTrack实例，则包含集线器服务的数据库</p></td></tr><tr id="9eb67cdb" class="ijRowOdd"><td id="355568b0"><code class="code">internal</code></td><td id="35921429"><p>可能包含其他内部产品数据</p></td></tr></tbody></table></div>    <p id="8da65ab8">将现有数据库复制到新位置时，请确保新位置使用此处显示的相同文件夹结构。</p>    <figure><img alt="YouTrack数据目录" title="YouTrack数据目录" src="/help/img/youtrack/2019.2/youtrackDataDirectory.png" id="02a32293" width="210" height="97"></figure>    <div class="chapter"><h2 id="Changing-Database-Location-via-Command-Line-for-JAR" data-toc="Changing-Database-Location#Changing-Database-Location-via-Command-Line-for-JAR">更改数据库位置以进行JAR分发</h2>        <p id="4cfa3089">如果将YouTrack作为独立的Java进程运行，则可以在命令行中指定数据库位置。</p>        <section class="procedure-steps"><h3 id="87f578dc">要更改数据库位置：</h3><ol class="list _decimal"><li class="list__item" id="3e409e5d"><p><a href="start-stop-jar.html#stop-jar">停止YouTrack服务器</a> 。</p></li><li class="list__item" id="d401b1c1"><p>将现有数据库移到新数据库目录。</p></li><li class="list__item" id="02edfa61"><p>运行以下命令<code class="code">configure</code>命令来设置新数据目录的位置：<br>                <code class="code">java -jar youtrack-<version>.jar --data-dir=<new YouTrack database directory></code>            </p></li><li class="list__item" id="7ba48877"><p>启动YouTrack服务器。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="Changing-Database-Location-for-MSI-and-ZIP" data-toc="Changing-Database-Location#Changing-Database-Location-for-MSI-and-ZIP">更改MSI和ZIP分发的数据库位置</h2>        <p id="b725e7b3">对于MSI和ZIP分发，您可以使用以下命令更改YouTrack数据库的默认位置： <code class="code">configure</code>命令行中的命令。要在MSI分发中执行这些命令，请以管理员身份打开“ <span class="control">命令提示符”</span>窗口。</p>        <aside class="prompt" rel="b725e7b3" id="22af9f69" data-type="note" data-title="">            <p id="f94eea57">如果您运行MSI分发，则服务用户（ <code class="code">./JetBrainsYouTrack</code> ）必须具有对新数据库位置的完全访问权限。</p>        </aside>        <section class="procedure-steps"><h3 id="e82f84dd">要更改数据库位置：</h3><ol class="list _decimal"><li class="list__item" id="11ad72fa"><p>停止YouTrack服务。有关具体说明，请参见<a href="Stop-and-Start-YouTrack.html">停止和启动YouTrack</a> 。</p></li><li class="list__item" id="952e9c10"><p>将现有数据库移到新数据库目录。</p></li><li class="list__item" id="6b08c519"><p>运行以下命令<code class="code">configure</code>命令来设置新数据目录的位置：<br>                <code class="code"><youtrack_home>/bin/youtrack.sh configure --data-dir=<new YouTrack database directory></code>            </p></li><li class="list__item" id="773b95bc"><p>启动YouTrack服务。有关具体说明，请参见<a href="Stop-and-Start-YouTrack.html">停止和启动YouTrack</a> 。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="change-database-location-docker" data-toc="Changing-Database-Location#change-database-location-docker">更改Docker安装的数据库位置</h2>        <p id="3b78041d">由于YouTrack服务在Docker容器中运行，因此您只能更改数据库在托管计算机上的位置。在这种情况下，您需要将数据库移动到新位置，然后将新路径指定为<code class="code">docker run</code>命令。</p>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="a6890dac"><p>备份数据库。以防万一。</p></li><li class="list__item" id="8da38a63"><p>停止YouTrack Docker容器。有关特定说明，请参阅<a href="start-stop-docker.html#stop-docker-container">Stop YouTrack docker container</a> 。</p></li><li class="list__item" id="f89a24c0"><p>为数据库创建一个新目录。</p></li><li class="list__item" id="741f729a"><p>移动当前数据库目录的内容（ <code class="code">data</code> ）到新目录。</p></li><li class="list__item" id="fdafa183"><p id="dd8de436">提供用户<code class="code">13001:13001</code>在容器内运行YouTrack服务，并具有对新数据库目录的访问权限。有关更多详细信息，请参见<a href="youtrack-docker-installation.html#create-and-configure-directories">创建和配置目录</a> 。</p>                <aside class="prompt" rel="dd8de436" id="e08cd863" data-type="note" data-title=""><p>如果您在macOS机器上运行Docker容器，请跳过此步骤。</p></aside>            </li><li class="list__item" id="b8f6e2d8"><p id="1e45f19f">使用包含主机计算机上数据库的新路径来运行Docker容器：</p>                <div class="code-block" data-lang="bash"><youtrack-server-instance><path data="" to="" new="" directory="">docker run -it</path></youtrack-server-instance> --name <youtrack-server-instance>\ -v <path data="" to="" new="" directory="">：/ opt / youtrack / data \ -v <path to="" conf="" directory="">：/ opt / youtrack / conf \ -v <path to="" logs="" directory="">：/ opt / youtrack / logs \ -v <path to="" backups="" directory="">：/ opt / youtrack / backups \ -p <port on="" host="">：8080 \ jetbrains / youtrack： <version>
    </version></port></path></path></path></path></youtrack-server-instance></div>                <ul class="list _ul"><li class="list__item" id="ef9d0afc"><p>YouTrack服务从容器内的数据目录开始（ <code class="code">/opt/youtrack/data</code> ）映射到主机上的新数据库位置。</p></li></ul>            </li></ol></section>        <p id="3db20ea0">使用相同的步骤来更改<code class="code">conf</code> ， <code class="code">logs</code> ， <code class="code">backups</code>和/或<code class="code">temp</code>目录。</p>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Back-Up-the-Database.html">备份数据库</a> <a class="navigation-links__next" href="Text-Index.html">文本索引</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>