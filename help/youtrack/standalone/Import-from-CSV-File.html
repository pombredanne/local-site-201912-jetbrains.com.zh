<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>从CSV文件导入-帮助|帮助YouTrack单机版</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Import-from-CSV-File" data-breadcrumbs="Migrating-to-YouTrack.xml|Migrate to YouTrack/Import-from-CSV-File.xml|Import from a CSV File" data-main-title="Import from a CSV File"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack独立帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Import-from-CSV-File.xml" data-toc="Import-from-CSV-File">从CSV文件导入</h1>    <p id="94117518">您可以从逗号分隔值（CSV）文件将问题导入YouTrack。通过此选项，您可以从任何问题跟踪器导入数据，这些跟踪器可以以CSV格式导出问题。使用此选项可以从Trello（业务类和企业版），Asana，GitHub，GitLab和许多其他产品中导入问题。</p>    <p id="3b9fbd3f">此过程需要执行以下步骤：</p>    <ol class="list _decimal"><li class="list__item" id="d6e7b5ef"><p><a href="#set-up-your-environment">设置您的本地环境</a> 。</p></li><li class="list__item" id="103d01ca"><p><a href="#prepare-import-files">准备导入文件</a> 。</p></li><li class="list__item" id="7a6711c6"><p><a href="#build-mapping-file">映射CSV文件中的字段以在YouTrack中发布属性</a> 。</p></li><li class="list__item" id="d9b92bff"><p><a href="#import-data">导入您的问题</a> 。</p></li></ol>    <div class="chapter"><h2 id="csv-issue-import-details" data-toc="Import-from-CSV-File#csv-issue-import-details">导入细节</h2>    <p id="b2b95ae1">如果导入文件包含对YouTrack中不存在的实体的引用，则会创建它们。您用于运行导入的用户帐户应具有创建项目，问题，用户，甚至更多的权限。我们建议您使用具有<span class="control">系统管理员</span>角色的帐户来执行导入脚本。</p>    <p id="a553c959">新实体的创建如下：</p>    <div class="table-wrapper"><table width="100%" id="8141e392"><thead><tr id="f41ecfa3" class="ijRowHead"><th id="4acc1645" width="20%"><p>实体</p></th><th id="1850af23"><p>描述</p></th></tr></thead><tbody><tr id="195c3d2f" class="ijRowOdd"><td id="abef8bee"><p>专案</p></td><td id="207856cd"><p id="a486ad7f">如果源文件中引用的项目尚不存在，则会创建一个新项目。</p>            <ul class="list _ul"><li class="list__item" id="1554ff5f"><p>根据CSV文件中的值分配项目名称和ID。</p></li><li class="list__item" id="0b447c3e"><p>将执行导入脚本的用户设置为项目所有者。</p></li></ul></td></tr><tr id="9d99d795" class="ijRowEven"><td id="f7f80e2a"><p>用户数</p></td><td id="099fc46b">                <p id="f7766f50">几个问题属性，例如<code class="code">reporterName</code>和<code class="code">Assignee</code>存储对用户帐户的引用。通过<span class="control">Login</span>对照现有的用户帐户检查源文件中的值。对于与现有用户的登录名不匹配的每个新值，将创建一个新的用户帐户。</p>            <ul class="list _ul"><li class="list__item" id="0e9e0c3c"><p>如果源文件包含单个值，则将该值设置为全名，登录名，并用作具有域的电子邮件地址的本地部分<code class="code">@fake.com</code> 。空格字符将替换为下划线。</p></li><li class="list__item" id="f5f10a74"><p>您可以通过将每个字段中的数据设置为以下格式来为新用户指定属性： <code class="code">login;fullName;email</code> 。在这种情况下，将保留全名中的空格字符。</p></li><li class="list__item" id="f6753c1e"><p>所有新用户帐户均分配有随机生成的密码。</p></li></ul>                <aside class="prompt" rel="f6e7eb2a" id="986893fb" data-type="warning" data-title="">                    <p id="29203fc4">导入文件中对用户的引用将映射到YouTrack中的现有帐户。如果找不到匹配项，则会创建一个新的用户帐户。</p>                    <p id="c52cbb81">根据您的订阅计划，为导入的用户分配了许可证。对于超出您的每用户许可限制的用户，导入的用户被标记为禁止用户。</p>                    <p id="8fd4e5b4">有关更多信息，请参见<a href="Ban-User-Accounts.html">禁止用户帐户</a> 。</p>                </aside>            </td></tr><tr id="59391344" class="ijRowOdd"><td id="6877e90a"><p>自定义字段</p></td><td id="96973054"><p id="5199fc29">如果源文件包含YouTrack中不存在的字段，并且问题已导入到空项目中，则将创建自定义字段并将其添加到目标项目中。</p>            <ul class="list _ul"><li class="list__item" id="830feb07"><p>字段名称和类型是根据映射文件中的定义设置的。</p></li><li class="list__item" id="bbe77d98"><p>自定义字段的属性设置如下： <code class="code">autoAttached=true</code> ， <code class="code">isPrivate=false</code> ， <code class="code">defaultVisibility=false</code> 。</p></li></ul>                <p id="8780d4fe">如果您导入到已经包含问题的项目中，那么将按照映射文件中的定义创建不存在的字段，但是这些字段不会添加到目标项目中，也不会导入它们的值。</p>            </td></tr><tr id="0616b5f4" class="ijRowEven"><td id="2942ec5d"><p>栏位值</p></td><td id="50c98f86"><p>如果源文件包含现有字段的新值，则将它们添加到当前值集中。</p></td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="set-up-your-environment" data-toc="Import-from-CSV-File#set-up-your-environment">设置环境</h2>        <p id="20146a66"><a href="https://github.com/JetBrains/youtrack-python-scripts" rel="noopener noreferrer" data-external="true" target="_blank">Python导入脚本</a>支持“导入到YouTrack”。这些脚本基于YouTrack REST API构建。实际上，您实际上不需要使用Python进行任何编程，但是您确实需要安装Python和包含导入脚本的软件包。</p>        <section class="procedure-steps"><h3 id="baf04aa1">设置环境：</h3><ol class="list _decimal"><li class="list__item" id="57730dea"><p id="1c19ebb3">下载并安装<a href="https://www.python.org/downloads/release/python-2714/" rel="noopener noreferrer" data-external="true" target="_blank">Python</a> 。导入脚本与Python 2.7+兼容。不支持Python 3版本。您可以选择自己喜欢的安装目录。</p>                <p id="60ba99ea">macOS，CentOS，Red Hat Enterprise Linux（RHEL）和Ubuntu的最新版本均随附Python 2.7。如果使用任何这些操作系统，请继续下一步。</p></li><li class="list__item" id="a1aaa5d2"><p>打开操作系统支持的命令行界面。</p></li><li class="list__item" id="7966b442">                <p id="3801c6e7">使用以下命令安装包含导入脚本的软件包：</p>            <div class="code-block" data-lang="none"><code class="code-block__wrapper">pip install youtrack-scripts</code></div>                <ul class="list _ul"><li class="list__item" id="cbaefe8d"><p>导入脚本安装在您的本地环境中。</p></li><li class="list__item" id="9f248f84"><p>的<code class="code">youtrack</code>包含YouTrack REST API的Python客户端库的软件包会自动作为依赖项安装。</p></li></ul>                <p id="a6cf5fc0">如果您不想全局安装软件包，则只能使用以下命令为您的用户帐户安装软件包：</p>                <div class="code-block" data-lang="none"><code class="code-block__wrapper">pip install --user youtrack-scripts</code></div>            </li></ol></section>    </div>    <div class="chapter"><h2 id="prepare-import-files" data-toc="Import-from-CSV-File#prepare-import-files">准备导入文件</h2>        <p id="020d906d">此过程中最重要的步骤之一就是确切了解要导入到YouTrack中的内容。您应该检查导入文件，并确认数据格式正确。以下示例显示了可以导入到YouTrack中的示例数据。</p>        <div class="code-block" data-lang="none">“问题ID”，“项目ID”，“项目”，“类型”，“优先级”，“状态”，“子系统”，“模块”，“报告者”，“受让人”，“审阅者”，“已创建”， “更新”，“摘要”，“描述”，“ CustomFieldString”，“ CustomFieldDate” SA-1，SA，SomeApp，任务，关键，进行中，UI，管理控制台，Marco Fu，John Higgins，Neil Robertson，2011- 03-01 16：55：00,2011-03-02 17:54:00，“问题1”，“问题1的说明”，“开始”，2011-03-02 18:00:00 SA-2， SA，SomeApp，Bug，Major，Open，Core，John Higgins，Marco Fu，Neil Robertson，2011-04-01 17：55：00,2011-04-02 18:54:00，“问题2”，”问题2的说明”，2011-04-02 19:00:00，“评论2.1”，“评论2.2” SA-3，SA，SomeApp，Bug，Normal，Fixed，Core，Main，Neil Robertson，Mark Allen ，Neil Robertson，2011-04-02 17：55：00,2011-04-03 18:54:00，“问题3”，“问题3的说明”，“ PX-1”，2011-04-03 19 ：00：00，“评论3.1”，“评论3.2” SA-4，SA，SomeApp，任务，普通，固定，UI，用户个人资料，尼尔·罗伯逊，马克·艾伦，马克·威廉姆斯，2011-04-02 13:55 ：00,2011-04-03 14:54:00，“问题4”，“问题4的说明”，“ PX-2”</div>        <p id="a1008d17">为确保导入成功，请按照下列步骤操作：</p>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="b0563420"><p>在电子表格编辑器中打开CSV文件。当数据以离散的列和行形式显示时，它更容易读取，并在必要时对其进行修改。</p></li><li class="list__item" id="dd322f2f"><p>检查文件中的第一行（记录）。该记录应为包含字段名称列表的标题。</p></li><li class="list__item" id="7ebde6ef"><p>检查标题中的必填字段。标头必须包含可映射到以下每个问题属性的字段： <code class="code">project_id</code> ， <code class="code">project_name</code> ， <code class="code">numberInProject</code> ， <code class="code">reporterName</code> ， <code class="code">created</code>和<code class="code">summary</code> 。如果这些列不存在，请将其添加到您的CSV文件中。</p></li><li class="list__item" id="7a48bea3">                <p id="3798fe84"><span class="emphasis">重要！</span> 检查映射到<code class="code">numberInProject</code> issue属性不包含字母数字前缀。如果是这样，请将前缀更改为仅字母，然后再将该项目导出到CSV文件一次。</p>                <p id="03163052">YouTrack假定映射到<code class="code">numberInProject</code>是一个整数。但是，有时，此导出的发行号也可以包含前缀-项目的简称或<code class="code">projectID</code> ， 等等。假设问题编号导出为<code class="code">{project_short_name}-{number_in_the_project}</code> （例如DX-12345）。在这种情况下，为了使导入正常进行， <code class="code">{project_short_name}</code>不得包含任何数字。换句话说，您必须检查<code class="code">numberInProject</code>看起来不像<code class="code">DX1-12345</code>要么<code class="code">D1X-12345</code> 。</p>            </li></ol></section>        <p id="c4890c24">您可能还会考虑将数据导入到现有项目中是否安全。如果您不确定CSV文件的内容，则可以更新<code class="code">Project ID</code>和<code class="code">Project</code>列将数据导入到一个新的空项目中。</p>        <div class="chapter"><h3 id="importing-issue-links">导入问题链接</h3>            <p id="95d83288">的<code class="code">csv2youtrack</code>导入脚本支持导入问题链接。要从CSV文件导入问题之间的链接，请遵循以下准则：</p>            <ul class="list _ul"><li class="list__item" id="df00a9da"><p>在您的CSV文件中添加一个名称为<code class="code">"Links"</code> 。</p></li><li class="list__item" id="1bbe00bc"><p>指定模式问题之间的链接<code class="code">LINK_TYPE_1,1,2;LINK_TYPE_2,TP-3,TP-4;....</code> 。为了<code class="code">LINK_TYPE</code> ，输入类型，如YouTrack的“管理”部分中“ <span class="control">问题链接类型”</span>页面上所示。例如， <code class="code">Relates</code>要么<code class="code">Subtask</code> 。</p></li><li class="list__item" id="f34c9a35"><p>该脚本仅导入使用现有链接类型的链接。使用未知类型的链接不会导入。</p></li><li class="list__item" id="6891b5f9"><p>对于要链接的问题，您可以使用项目中的问题编号或完整的问题ID。如果仅指定数字，则使用当前问题的项目ID来创建目标问题的问题ID。</p></li></ul>        </div>        <div class="chapter"><h3 id="importing-comments-and-attachments">导入评论</h3>        <p id="017bcf48">您还想验证源应用程序如何导出注释。许多应用程序将注释导出为标头中没有字段名称的字段。以下示例说明了这种格式：</p>        <div class="code-block" data-lang="none">“问题ID”，“项目ID”，“项目”“ 1”，“ SA”，“ SomeApp”，“此列的标题中没有字段名称，因此成为第一个注释”，“第二条评论”，“这成为第三条评论。”</div>        <p id="551a77eb">导入此格式的注释时不带任何相关属性。这些属性是在导入期间生成的。</p>        <ul class="list _ul"><li class="list__item" id="01478555"><p>代表<span class="control">来宾</span>用户帐户添加注释。</p></li><li class="list__item" id="3384fa17"><p>评论日期设置为当前日期和时间。</p></li></ul>        <p id="e819da45">客户端库允许您导入存储在单独的CSV文件中的注释。如果可以提取此数据并正确设置其格式，则可以导入带有属性的注释并发布附件。</p>        <p id="0d0277aa">要发表评论，CSV文件必须按指定顺序包含以下字段：</p>        <div class="code-block" data-lang="none">“ project_id”，“ numberInProject”，“作者”，“创建”，“文本”</div>            <p id="aef76d46">对于标题中的字段名称，您可以指定所需的任何值，但是注释文本的字段名称应为空。最重要的要求是您以指定的顺序显示这些字段。对于每个评论，项目ID和发行号必须与CSV文件中包含您的发行数据的记录相对应。</p>            <p id="80ceea22">使用以下示例作为指导。</p>            <div class="code-block" data-lang="none">“问题ID”，“项目ID”，“项目”“ SA”，“ 1”，“贾德；贾德·戴维森； jd@gmail.com”，“ 2011-03-01 17:55:00 MSK”，“此列的标题中没有字段名称，因此它成为第一个注释”，“ SA”，“ 1”，“ ronnie; Ronnie; ron@gmail.com”，“ 2011-03-01 17:56： 00 MSK”，“这成为第二条注释”，“ SA”，“ 1”，“ David”，“ 2011-03-01 17:57:00 MSK”，“这成为第三条注释”。</div>        </div>        <div class="chapter"><h3 id="importing-attachments">导入附件</h3>            <p id="b6a2d7ce">您还可以从单独的CSV文件导入问题附件。</p>        <p id="c0459631">对于附件，CSV文件使用以下格式：</p>        <div class="code-block" data-lang="none">“ project_id”，“ numberInProject”，“ authorLogin”，“创建”，“ pathToAttachment”</div>        <p id="3be78742">对于标题中的字段名称，可以指定所需的任何值，但附件文件路径的字段名称应为空。最重要的要求是您以指定的顺序显示这些字段。对于每个附件，项目ID和发行号必须与CSV文件中包含您的发行数据的记录相对应。</p>            <p id="8b743e37">使用以下示例作为指导。</p>            <div class="code-block" data-lang="none">“ SA”，1，“马可福”，“ 2015-10-20 21:00:00”，“ / home / user / tmp / comments.csv”“ SA”，1，“马可福”，“ 2015- 10-20 22:00:00“，” / home / user // tmp / attachments.csv“” SA“，5，”约翰·希金斯“，” 2015-10-20 21:00:00“，” / /user/pictures/bear.jpg“” SA“，5，” John Higgins“，” 2015-10-20 22:00:00“，” // home / user / pictures / flowers.jpg“</div>        </div>    </div>    <div class="chapter"><h2 id="build-mapping-file" data-toc="Import-from-CSV-File#build-mapping-file">建立您的映射文件</h2>        <p id="83a7b84f">下一步是映射源文件中的字段，以在YouTrack中发布属性。您可以使用<code class="code">csv2youtrack</code>脚本从源CSV文件生成示例映射。</p>        <section class="procedure-steps"><h3 id="e2cbf1da">生成映射文件：</h3><ol class="list _decimal"><li class="list__item" id="e0f7321c"><p>打开操作系统支持的命令行界面。</p></li><li class="list__item" id="1d32f8ad"><p>如有必要，将当前目录更改为Python的安装目录。例如（Windows）：</p><div class="code-block" data-lang="none"><code class="code-block__wrapper">cd C:\Python27</code></div><p></p></li><li class="list__item" id="0b9bdbb6"><p id="b2f4e6fc">输入以下命令：</p>            <div class="code-block" data-lang="none"><code class="code-block__wrapper">csv2youtrack -g -m mapping.json source.csv</code></div>                <ul class="list _ul"><li class="list__item" id="48f28e2b"><p>的<code class="code">-g</code>选项告诉脚本生成映射文件。</p></li><li class="list__item" id="430c34b0"><p>的<code class="code">-m</code>选项将覆盖映射文件的默认路径和文件名。如果不通过此选项，则在当前目录中生成该文件，并为该文件分配与CSV文件相同的名称，并带有<code class="code">.json</code>延期。如果要指定其他位置和/或文件名，请使用目标目录的完整路径和/或所需名称为参数指定一个值。</p></li><li class="list__item" id="7e81ad1f"><p>的<code class="code">source.csv</code>参数指定源CSV文件的位置。将该值替换为源CSV文件的完整路径和文件名。别忘了加入<code class="code">.csv</code>延期。</p></li><li class="list__item" id="713d3de5"><p>如果命令执行成功，则会在命令行界面中显示一条消息，其中包含生成的文件的位置。</p></li></ul>            </li><li class="list__item" id="b58e1b55"><p>打开生成的映射文件，然后将源文件中的字段映射到YouTrack中的相应问题属性。如果源文件包含一个或多个不想导入的字段，则可以从映射文件中删除引用。使用以下示例作为指导。</p></li></ol></section>                <p id="52fbf138">以下映射文件是从上一过程中显示的示例CSV文件生成的。为了提高可读性，我们将示例中映射的右侧对齐。您无需在映射文件中对齐列，可以将其保留为生成状态。</p>        <div class="code-block" data-lang="none"><code class="code-block__wrapper">{ "__help__": "For instructions, see: https://www.jetbrains.com/help/youtrack/standalone/Import-from-CSV-File.html#build-mapping-file", "csv_field_delimiter": ",", "csv_value_delimiter": ",", "date_format_string": "%Y-%m-%d %H:%M:%S", "field_names": { "!_mandatory_field__map_it_1" : "project_id", "!_mandatory_field__map_it_2" : "project_name", "!_mandatory_field__map_it_3" : "numberInProject", "!_mandatory_field__map_it_4" : "summary", "!_mandatory_field__map_it_5" : "created", "!_mandatory_field__map_it_6" : "reporterName", "!_yt_field_can_be_skipped_1" : "updated", "!_yt_field_can_be_skipped_2" : "updaterName", "!_yt_field_can_be_skipped_3" : "description", "!_yt_field_can_be_skipped_4" : "resolved", "!_yt_field_can_be_skipped_5" : "permittedGroup", "Assignee" : "map_me_to_yt_field", "Created" : "map_me_to_yt_field", "CustomFieldDate" : "map_me_to_yt_field", "CustomFieldString" : "map_me_to_yt_field", "Description" : "map_me_to_yt_field", "Issue ID" : "map_me_to_yt_field", "Module" : "map_me_to_yt_field", "Priority" : "map_me_to_yt_field", "Project" : "map_me_to_yt_field", "Project ID" : "map_me_to_yt_field", "Reporter" : "map_me_to_yt_field", "Reviewer" : "map_me_to_yt_field", "State" : "map_me_to_yt_field", "Subsystem" : "map_me_to_yt_field", "Summary" : "map_me_to_yt_field", "Type" : "map_me_to_yt_field", "Updated" : "map_me_to_yt_field" }, "field_types": { "define_types_here" : "1 - single value field, * - multi-value field", "yt_custom_field_1" : "enum[1]", "yt_custom_field_2" : "enum[*]" } }</code></div>        <p id="e1515441">您的工作是将CSV文件中的字段与YouTrack中的相应属性进行匹配。完成后，您应该最终得到要导入的源文件中所有字段的映射。如果您的源文件不包含可选字段的值，则可以删除这些映射。</p>        <section class="procedure-steps"><h3 id="53985070">要定制生成的映射文件：</h3><ol class="list _decimal"><li class="list__item" id="a5aed2f4"><p>为了<code class="code">csv_field_delimiter</code> ，请输入分隔CSV文件中字符的字符。如果CSV文件中的定界符与为此参数指定的字符不同，则导入将失败。</p></li><li class="list__item" id="4f5f5362"><p>为了<code class="code">csv_value_delimiter</code> ，请输入用于分隔CSV文件中字段的多个值的字符。</p></li><li class="list__item" id="8cecadc9"><p id="fa838f46">为了<code class="code">date_format_string</code> ，请指定CSV文件中用于日期字段的格式。此参数接受由<code class="code">strftime(format)</code> Python标准库中的方法。您可以在<a href="https://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior" rel="noopener noreferrer" data-external="true" target="_blank">Python文档中</a>找到指令的完整列表。</p>                <ul class="list _ul"><li class="list__item" id="c3df06f7"><p>在我们的示例映射文件中， <code class="code">%Y-%m-%d %H:%M:%S</code>模式以格式识别日期值<code class="code">2015-10-20 21:00:00</code> 。</p></li><li class="list__item" id="bb0d411d"><p>默认值使用模式<code class="code">%A, %B %d, %Y %I:%M:%S %p %z</code> ，以格式识别日期值<code class="code">Tuesday, October 20, 2015 09:00:00 PM +0300</code> 。</p></li></ul>                <p id="e3e5d195">只需查看CSV文件中使用的格式，然后将每个值替换为相应的指令即可。在显示在字段中的指令之间输入标点符号和空格。</p>            </li><li class="list__item" id="2a2eee98"><p id="a39f7e46">在里面<code class="code">field_names</code>文件部分，将字段从源文件映射到YouTrack中相应的问题属性。如果源文件包含您不想导入的字段，则可以从映射文件中删除引用。映射字段时，请注意以下准则：</p>                <ul class="list _ul"><li class="list__item" id="21d52a9b"><p>本部分中的第一组字段是YouTrack中的常见问题属性。</p></li><li class="list__item" id="59982f85"><p>第二组字段与CSV文件中的列相对应。这些字段按字母顺序排序。</p></li><li class="list__item" id="82c25f37"><p>映射文件必须包含以下所有问题属性的映射： <code class="code">project_id</code> ， <code class="code">project_name</code> ， <code class="code">numberInProject</code> ， <code class="code">summary</code> ， <code class="code">created</code>和<code class="code">reporterName</code> 。这些字段在此部分的顶部列出。如果映射中未包含这些字段中的任何一个，则导入将失败并显示错误。</p></li><li class="list__item" id="4a1b10dd"><p>映射的左侧引用了CSV文件中的字段名称。这些值必须完全按照标题中的说明指定。</p></li><li class="list__item" id="3ceeb019"><p>映射的右侧引用了YouTrack中的问题属性。基本属性使用在<a href="Import-Issues.html">Import REST API</a>中指定的属性名称。要映射到自定义字段，请使用自定义字段名称。</p></li><li class="list__item" id="cc20b56e"><p>如果源文件中的列名与YouTrack中目标自定义字段的默认名称匹配，则无需显式映射它们。这包括默认字段，例如<span class="control">Type</span> ， <span class="control">Priority</span>和<span class="control">State</span> 。但是，您应该验证源文件中存储的数据是否与目标字段的数据类型匹配。</p></li><li class="list__item" id="ce85d3f9"><p>源文件中的每个字段只能映射到单个目标字段。例如，您不能将问题摘要映射到问题摘要和描述。</p></li></ul>            </li><li class="list__item" id="ee389879"><p id="138c17bc">在里面<code class="code">field_types</code>在文件的“部分”中，指定导入期间创建的字段的数据类型。请考虑以下准则：</p>                <ul class="list _ul"><li class="list__item" id="c2002081"><p>映射的左侧引用了YouTrack中自定义字段的名称。这些值必须与“ <code class="code">field_names</code>字典。</p></li><li class="list__item" id="a12e8b05"><p>映射的右侧引用了YouTrack中的字段类型。有关有效类型的列表，请参阅<a href="PUT-Prototype.html#new-custom-field-types">Administration REST API</a> 。</p></li><li class="list__item" id="94f97039"><p>如果目标字段已经存在于YouTrack中，则无需在此处添加目标字段。</p></li><li class="list__item" id="888b1c03"><p>您不能更改现有字段的数据类型。例如，如果现有的“ <span class="control">受理人”</span>字段存储单个值（ <code class="code">user[1]</code> ），您不能使用<code class="code">user[*]</code>在映射文件中，并导入多个受让人。您必须首先更新该属性在YouTrack用户界面<span class="control">受让人</span>字段，然后导入数据。</p></li></ul>            </li><li class="list__item" id="e5985eae"><p>保存您的更改并关闭映射文件。</p></li></ol></section>        <p id="1a631ece">这是遵循此过程的示例映射文件的外观。同样，我们将映射的右侧对齐以提高样本的可读性。</p>        <div class="code-block" data-lang="none"><code class="code-block__wrapper">{ "__help__": "For instructions, see: https://www.jetbrains.com/help/youtrack/standalone/Import-from-CSV-File.html#build-mapping-file", "csv_field_delimiter": ",", "csv_value_delimiter": ",", "date_format_string": "%Y-%m-%d %H:%M:%S", "field_names": { "Project ID" : "project_id", "Project" : "project_name", "Issue ID" : "numberInProject", "Summary" : "summary", "Created" : "created", "Reporter" : "reporterName", "Updated" : "updated", "Description" : "description", "Assignee" : "Assignee", "CustomFieldDate" : "Planned Date", "CustomFieldString" : "Iteration", "Module" : "Module", "Reviewer" : "Reviewed by", "Subsystem" : "Subsystem", }, "field_types": { "Subsystem" : "ownedField[1]", "Module" : "enum[1]", "Assignee" : "user[1]", "Reviewed by" : "user[1]", "Planned Date" : "date", "Iteration" : "string" } }</code></div>        <p id="6d173189">从该示例中可以看到，我们可以跳过默认自定义字段（例如<span class="control">Type</span> ， <span class="control">Priority</span>和<span class="control">State）的</span>映射。源CSV文件中的列名称与YouTrack中相应字段的名称匹配。字段类型也已经定义。</p>        <p id="2babff65">我们包括其他默认自定义字段（如“ <span class="control">受让人”</span>和“ <span class="control">子系统”）的</span>映射，因此我们可以指定这些字段存储单个值。</p>            </div>    <div class="chapter"><h2 id="import-data" data-toc="Import-from-CSV-File#import-data">汇入资料</h2>        <p id="afd7581a">最后一步是运行从CSV文件导入数据的命令。</p>        <section class="procedure-steps"><h3 id="e41c573d">导入数据：</h3><ol class="list _decimal"><li class="list__item" id="5829a6c5"><p>打开操作系统支持的命令行界面。</p></li><li class="list__item" id="a02262ec"><p>如有必要，将当前目录更改为Python的安装目录。例如（Windows）：</p><div class="code-block" data-lang="none"><code class="code-block__wrapper">cd C:\Python27</code></div><p></p></li><li class="list__item" id="b4ef226c"><p id="e1f0a535">输入以下命令：</p>                <div class="code-block" data-lang="none"><code class="code-block__wrapper">csv2youtrack -m mapping.json -t token -u login -p password -c comments_file -a attachments_file source_file target_url</code></div>                <p id="925809f0">的<code class="code">source_file</code>和<code class="code">target_url</code>必须是脚本中指定的最后一个参数。将命令行参数替换为如下所述的值：</p>                <div class="table-wrapper"><table width="100%" id="b758e1d9"><thead><tr id="06de05f9" class="ijRowHead"><th id="efd8272c" width="20%"><p>参数</p></th><th id="a9b50721"><p>描述</p></th></tr></thead><tbody><tr id="d9d78785" class="ijRowOdd"><td id="ddeadda3"><code class="code">mapping.json</code></td><td id="55fd31ae"><p>需要。与<code class="code">-m</code>选项，以指定映射文件的完整路径和文件名。</p></td></tr><tr id="d9200a7c" class="ijRowEven"><td id="50ec5060"><code class="code">token</code></td><td id="3127323e"><p id="9ecaa5b5">当与<code class="code">-t</code>选项，一个永久令牌，用于在YouTrack中验证您的管理员帐户。这是首选的身份验证方法。如果您使用此选项，请跳过<code class="code">-u</code>和<code class="code">-p</code>选项。要了解如何生成永久令牌，请参阅<a href="Manage-Permanent-Token.html#obtain-permanent-token">创建永久令牌</a> 。</p>                            <p id="2074db73">或者，您可以使用<code class="code">-T</code>选项，并为包含永久令牌的文件指定完整路径和文件名。</p></td></tr><tr id="56300a0e" class="ijRowOdd"><td id="729792ac"><code class="code">login</code></td><td id="f65fd3bc"><p>当与<code class="code">-u</code>选项，YouTrack管理员帐户的登录名。您还必须为<code class="code">-p</code>选项。</p></td></tr><tr id="dce269f2" class="ijRowEven"><td id="2037b832"><code class="code">password</code></td><td id="d1c53441"><p>当与<code class="code">-p</code>选项，YouTrack管理员帐户的密码。</p></td></tr><tr id="e3658db1" class="ijRowOdd"><td id="8c610018"><code class="code">comments_file</code></td><td id="1b26246c"><p>可选的。与<code class="code">-c</code>选项，以指定包含问题注释的CSV文件的完整路径。</p></td></tr><tr id="715e9bf6" class="ijRowEven"><td id="c290eb82"><code class="code">attachments_file</code> </td><td id="f299d445"><p>可选的。与<code class="code">-a</code>选项，以指定包含附件引用的CSV文件的完整路径。</p></td></tr><tr id="6cbdd662" class="ijRowOdd"><td id="9bd245a2"><code class="code">source_file</code></td><td id="ad9c66d8"><p>源CSV文件的完整路径。包括文件名和扩展名。</p></td></tr><tr id="c351a1ef" class="ijRowEven"><td id="eeeab23a"><code class="code">target_url</code></td><td id="c7c89ddd"><p>目标YouTrack服务器的基本URL。对于YouTrack InCloud实例，您的基本URL包括结尾<code class="code">/youtrack</code> 。例如： <code class="code">https://company.myjetbrains.com/youtrack</code> </p></td></tr></tbody></table></div>                <ul class="list _ul"><li class="list__item" id="be28d4d9"><p>该命令执行Python导入脚本。</p></li><li class="list__item" id="23e1301b"><p>如果成功，则会在命令行界面中针对每个问题打印以下行：</p><div class="code-block" data-lang="bash">已<issue id="">成功导入</issue>问题[ <issue id="">]</issue></div>                    <p></p></li></ul>            </li><li class="list__item" id="25134d49">                <p id="49c18ea1">检查您将问题导入的一个或多个项目，并验证数据是否正确显示。如果您对结果不满意，并想重新导入数据：</p>                <ul class="list _ul"><li class="list__item" id="51b87001"><p>删除导入期间创建的所有问题。如果将问题导入到新项目中，则只需删除该项目。</p></li><li class="list__item" id="a6bdc01a"><p>编辑您的源文件和/或映射文件。</p></li><li class="list__item" id="de23dbcc"><p>再次运行导入脚本。</p></li></ul></li></ol></section>    </div>    <div class="chapter"><h2 id="troubleshooting-csv-import" data-toc="Import-from-CSV-File#troubleshooting-csv-import">故障排除</h2>        <p id="c542ad72">如果在运行导入脚本时遇到任何错误，请查看是否符合以下任何条件。</p>        <div class="table-wrapper"><table width="100%" id="8ce8b188"><thead><tr id="a70896f3" class="ijRowHead"><th id="f8861a6f" width="10%"><p>条件</p></th><th id="65be4dbb"><code class="code">Error for [/user/login]: 302: Moved Temporarily</code></th></tr></thead><tbody><tr id="5a717430" class="ijRowOdd"><td id="0dbbadaf"><p>原因</p></td><td id="12de6fcc"><p>您用于<code class="code">target_url</code>参数不正确。最常见的错误是为YouTrack实例输入基本网址，而无需<code class="code">/youtrack</code> URL的末尾。</p></td></tr><tr id="28f6f026" class="ijRowEven"><td id="98dcdbb2"><p>解</p></td><td id="ba08d263">                    <p id="04f987ce">更改值<code class="code">target_url</code>参数，然后再次运行导入脚本。使用显示为YouTrack服务的“ <span class="control">基本URL”</span>设置的值。</p>                    <ol class="list _decimal"><li class="list__item" id="ba35aade"><p>对于YouTrack Standalone，复制“ <span class="control">全局设置”</span>页面上“ <span class="control">基本URL”</span>设置中的值。</p></li><li class="list__item" id="72219149"><p>对于YouTrack InCloud，请复制“ <span class="control">域设置”</span>页面上“ <span class="control">基本URL”</span>设置中的值。</p></li></ol></td></tr></tbody></table></div>        <div class="table-wrapper"><table width="100%" id="f126707d"><thead><tr id="415310c1" class="ijRowHead"><th id="40a26257" width="10%"><p>条件</p></th><th id="35f46f65"><code class="code">Error for [<resource>]: 403: Forbidden: You have no permissions for <resource></code></th></tr></thead><tbody><tr id="34ac4eb0" class="ijRowOdd"><td id="86ade2aa"><p>原因</p></td><td id="e699b9bc"><p>您用于运行导入脚本的用户帐户无权读取或更新目标资源。资源URL指示用户无法访问哪个实体。</p></td></tr><tr id="3c8d8cec" class="ijRowEven"><td id="f2340ec1"><p>解</p></td><td id="6461baeb"><p>使用具有足够权限来更新目标资源的用户帐户运行导入脚本。</p></td></tr></tbody></table></div>                    </div>        <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__next" href="Import-from-Bugzilla.html">从Bugzilla</a> <a class="navigation-links__prev" href="Migrating-to-YouTrack.html">迁移到YouTrack</a> <a class="navigation-links__next" href="Import-from-Bugzilla.html">导入</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>