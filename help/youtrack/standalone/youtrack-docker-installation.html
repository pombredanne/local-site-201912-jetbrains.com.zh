<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Docker安装-帮助|帮助YouTrack单机版</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="youtrack-docker-installation" data-breadcrumbs="Installation-and-Upgrade.xml|Installation and Upgrade/youtrack-docker.xml|Docker Container/youtrack-docker-installation.xml|Docker Installation" data-main-title="Docker Installation"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack独立帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="youtrack-docker-installation.xml" data-toc="youtrack-docker-installation">Docker安装</h1>    <p id="1b85784d">要在Docker容器中运行YouTrack服务的新实例：</p>    <ol class="list _decimal"><li class="list__item" id="99c3835f">            <a href="#pull-image">拉你跟踪图像</a>        </li><li class="list__item" id="19ac7470">            <a href="#create-and-configure-directories">创建和配置目录</a>        </li><li class="list__item" id="d5f64a13">            <a href="#run-youtrack-service">运行YouTrack Docker容器</a>        </li><li class="list__item" id="b134b74c">            <a href="#configure-new-instance">配置YouTrack</a>        </li></ol>    <div class="chapter"><h2 id="pull-image" data-toc="youtrack-docker-installation#pull-image">拉你跟踪图像</h2>        <p id="cf4605f7">从<a href="https://hub.docker.com/r/jetbrains/youtrack/" rel="noopener noreferrer" data-external="true" target="_blank">Docker YouTrack存储库</a>中获取最新的YouTrack版本的图像：</p>        <div class="code-block" data-lang="bash">docker pull jetbrains / youtrack： <version>
    </version></div>        <p id="3a7738d3"><code class="code"><version></code>是YouTrack构建的完整版本号。<a href="https://hub.docker.com/r/jetbrains/youtrack/tags/" rel="noopener noreferrer" data-external="true" target="_blank">请参阅可用版本的完整列表。</a></p>    </div>    <div class="chapter"><h2 id="create-and-configure-directories" data-toc="youtrack-docker-installation#create-and-configure-directories">创建和配置目录</h2>        <aside class="prompt" rel="create-and-configure-directories" id="d4c4dd48" data-type="note" data-title="">            <p id="df67e066">您可以跳过此步骤，而对于演示或测试运行，可以跳过下一步中显示的卷映射命令，但是不建议在生产实例中这样做。如果没有映射，则所有YouTrack数据将被路由到匿名容器卷，并且在移除容器时可能会意外丢失。此外，所有数据都将由Docker引擎存储在带有神秘名称的子文件夹中，从而几乎不可能定位和访问以进行将来的备份或升级。</p>        </aside>        <p id="e4d13d86">YouTrack图像容器是一个<i id="e2b1ae3f">有状态的容器</i> 。因此，在运行它之前，您应该<i id="d63263d1">在主机上</i>创建特定目录以存储YouTrack数据库，配置文件，日志，备份，并将它们作为卷传递给YouTrack容器。否则，删除容器时，您可能会丢失YouTrack数据。</p>        <p id="3ca29ea0">这些目录是：</p>        <ul class="list _bullet"><li class="list__item" id="a7016e37"><p><code class="code">data</code> — YouTrack存储数据库的目录。对于新安装，此目录必须为空。</p></li><li class="list__item" id="75c11354"><p><code class="code">conf</code> — YouTrack用来存储包含环境设置，JVM选项，YouTrack集成设置等的配置文件的目录。</p></li><li class="list__item" id="01b7641c"><p><code class="code">logs</code> — YouTrack存储其日志文件的目录。</p></li><li class="list__item" id="f964dad6"><p><code class="code">backups</code> — YouTrack存储备份的目录。有关备份的更多详细信息，请参见<a href="Back-Up-the-Database.html">备份数据库</a> 。</p></li></ul>        <h4 id="d2f62850">Linux主机上特定于YouTrack的目录：</h4>        <p id="ed51b8b8">这些目录必须可用于在容器内运行YouTrack服务的用户帐户。如果您的主机在* nix操作系统下运行，则YouTrack使用非root帐户` <code class="code">13001:13001</code> `（分别是group：id）。</p>        <p id="c6f6e34a">例如，您可以执行以下命令来创建YouTrack目录并应用所需的访问权限：</p>        <div class="code-block" data-lang="bash">mkdir -p -m 750 <path data="" to="" directory=""><path to="" logs="" directory=""><path to="" conf="" directory=""><path to="" backups="" directory="">chown -R 13001：13001 <path data="" to="" directory=""><path to="" logs="" directory=""><path to="" conf="" directory=""><path to="" backups="" directory="">
    </path></path></path></path></path></path></path></path></div>        <p id="2fbc585a">创建和配置特定于YouTrack的目录后，您可以将它们与docker容器内的目录之间的映射定义为<code class="code">docker run</code>命令。</p>        <h4 id="412ddd29">另一台OS主机上特定于YouTrack的目录：</h4>        <p id="648d7769">这些目录必须可用于在容器内运行YouTrack服务的用户帐户。</p>        <p id="a722173a">例如，您可以在运行Docker容器的同一用户帐户下运行以下命令：</p>        <aside class="prompt" rel="a722173a" id="cd11dd48" data-type="note" data-title="macOS Users"><p id="86f5cd67">在macOS上，不执行<code class="code">chown</code>命令提供对目录的访问。</p></aside>        <div class="code-block" data-lang="bash">mkdir -p -m 750 <path data="" to="" directory=""><path to="" logs="" directory=""><path to="" conf="" directory=""><path to="" backups="" directory="">
    </path></path></path></path></div>        <p id="4ccf15ba">创建和配置特定于YouTrack的目录后，您可以将它们与docker容器内的目录之间的映射定义为<code class="code">docker run</code>命令。</p>    </div>    <div class="chapter"><h2 id="run-youtrack-service" data-toc="youtrack-docker-installation#run-youtrack-service">运行YouTrack Docker容器</h2>        <p id="2f14bc51">使用以下命令来运行带有YouTrack服务的容器，并映射YouTrack数据量和端口：</p>        <div class="code-block" data-lang="bash"><youtrack-server-instance><path data="" to="" directory="">docker run -it</path></youtrack-server-instance> --name <youtrack-server-instance>\ -v <path data="" to="" directory="">：/ opt / youtrack / data \ -v <path to="" conf="" directory="">：/ opt / youtrack / conf \ -v <path to="" logs="" directory="">：/ opt / youtrack / logs \ -v <path to="" backups="" directory="">：/ opt / youtrack / backups \ -p <port on="" host="">：8080 \ jetbrains / youtrack： <version>
    </version></port></path></path></path></path></youtrack-server-instance></div>        <p id="ee40e0e5">哪里：</p>        <ul class="list _bullet"><li class="list__item" id="3d87e0a0"><p>                <code class="code">-it</code> —将YouTrack容器的输入和输出（包括启动日志）附加到终端窗口的标志。请注意，当终端连接到容器输出时，按Ctrl + C会导致容器关闭。使用`Ctrl + PQ`可以将终端从容器输出中分离出来。有关更多详细信息，请参阅<a href="https://docs.docker.com/engine/reference/commandline/attach/#extended-description" rel="noopener noreferrer" data-external="true" target="_blank">官方docker文档</a> 。</p></li><li class="list__item" id="244fc526"><p>                <code class="code">--name youtrack-server-instance</code> —容器的任意名称。</p></li><li class="list__item" id="4e53c974"><p>                <code class="code">-v <path to NNN directory>:/opt/youtrack/NNN</code> —将主机上特定于YouTrack的“ NNN”目录绑定到各自<code class="code">/opt/youtrack/NNN</code>容器内的目录。</p></li><li class="list__item" id="4a664146"><p>                <code class="code">-p <port on host>:8080</code> —定义端口映射的参数。指示主机监听端口<code class="code"><port on host></code>并将所有流量传播到docker容器内的端口8080。</p></li></ul>        <p id="10dc9b70">YouTrack服务启动于<code class="code">{0.0.0.0:8080}</code>在Docker容器中，并连接端口<code class="code">8080</code>映射到<code class="code"><port on host></code>您指定的。这样，可以从具有网络访问权限的任何计算机上访问该服务。 <code class="code"><port on host></code>您的主机。例如，如果主机的FQDN为<code class="code">host.mydomain.com</code>和<code class="code"><port on host></code>是7777，则该服务将在<code class="code">http://host.mydomain.com:7777</code> 。</p>    </div>    <div class="chapter"><h2 id="configure-new-instance" data-toc="youtrack-docker-installation#configure-new-instance">配置YouTrack</h2>        <p id="cb0177f8">首次运行时，YouTrack服务从上述地址处的基于Web的配置向导启动。打开浏览器，输入地址，然后按照配置向导中的步骤完成设置。</p>        <p id="f86c46d1">配置并运行YouTrack服务后，以系统管理员身份登录。然后，打开<span class="menupath" data-skip-index="skip">管理菜单>全局设置</span>页面，然后设置您的时区。对于空的新安装，默认情况下，时区设置为UTC。</p>        <div class="chapter"><h3 id="configure-container-command-line">从命令行配置YouTrack服务</h3>            <aside class="prompt" rel="configure-container-command-line" id="d918c7e9" data-type="warning" data-title=""><p id="e9210736">您只能使用<code class="code">configure</code>当YouTrack服务停止时输入命令！</p></aside>            <p id="d8d971e1">为了实现自动安装，您可以<b id="80ed9bd3">跳过向导</b> 。但是，在这种情况下，YouTrack服务从<i id="62d3f159">默认参数</i>开始。因此，您需要显式设置<i id="0dbb2522">基本URL</i> ，即最终用户可以使用YouTrack服务的URL。</p>            <aside class="prompt" rel="d8d971e1" id="26766558" data-type="note" data-title="">                <p id="ce1bea7d">如果您在<span class="emphasis">安装</span>过程中跳过基于Web的向导，请使用默认管理员凭据登录到YouTrack： <code class="code">admin/admin</code> 。</p>            </aside>            <p id="a83aa2ef">要跳过配置向导，请运行<code class="code">configure</code>运行YouTrack <b id="c06b7a5c">之前的</b>命令：</p>            <div class="code-block" data-lang="bash">docker运行--rm -it -v <path to="" conf="" directory="">：/ opt / youtrack / conf \ -v <path to="" logs="" directory="">：/ opt / youtrack / logs \ jetbrains / youtrack： <version>\ configure \ -J-Ddisable.configuration.wizard.on.clean.install = true \ --base-url = http：//youtrack.mydomain.com：XXXX</version></path></path></div>            <p id="d4aff859">如果您需要<b id="e08175e9">更改</b>正在运行的YouTrack实例<b id="e08175e9">的基本URL</b> ，我们<i id="ef85e73c">建议</i>您使用YouTrack UI的<span class="menupath" data-skip-index="skip">“管理”菜单>“全局设置”</span>页面进行操作。在这种情况下，您无需停止服务。但是，您也可以使用<code class="code">configure</code>用命令<code class="code">--base-url</code>论点。</p>            <section class="procedure-steps"><h3 id="16d30b1a">要更改YouTrack服务的基本URL，请执行以下操作：</h3><ol class="list _decimal"><li class="list__item" id="92f6c54f">                    <p id="cc1b4457">停止追踪： <code class="code">docker exec <containerId> stop</code>                    </p>                </li><li class="list__item" id="53e1fcfa">                    <p id="5b61f8c2">运行以下命令：</p>                    <div class="code-block" data-lang="bash">docker运行--rm -it -v <path to="" conf="" directory="">：/ opt / youtrack / conf \ -v <path to="" logs="" directory="">：/ opt / youtrack / logs \ jetbrains / youtrack： <version>\ configure --base-url = https：// <youtrack service="" baseurl="">：XXXX</youtrack></version></path></path></div>                </li><li class="list__item" id="62a9218f">                    <p id="213c783f">启动YouTrack： <code class="code">docker start <containerId></code>                    </p>                </li></ol></section>            <p id="3a76ada4">要查看所有停止的容器，请运行<code class="code">docker ps -a</code></p>        </div>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="youtrack-docker.html">使用Docker容器</a> <a class="navigation-links__next" href="upgrade-with-docker-image.html">升级Docker容器</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>