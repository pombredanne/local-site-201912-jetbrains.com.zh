<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>变更规则-帮助| YouTrack单机版</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="on-change-rules" data-breadcrumbs="Administration.xml|Administration/Workflow-Guide.xml|Workflows/Workflow-Rules.xml|Workflow Rule Types/on-change-rules.xml|On-change Rules" data-main-title="On-change Rules"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack独立帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="on-change-rules.xml" data-toc="on-change-rules">变更规则</h1>  <p id="04bee0bd"><span class="control">变更</span>规则定义将变更应用于问题时执行的操作。这些规则替代了旧工作流程中使用的<span class="control">无状态</span>规则。</p>  <div class="chapter"><h2 id="sample-on-change-rule">样本变化规则</h2>    <p id="d4bdd894">将更改应用于问题时，此规则执行以下操作：</p>    <ul class="list _bullet"><li class="list__item" id="d02e06b8"><p>YouTrack检查“ <span class="control">子系统”</span>字段中值的更改。</p></li><li class="list__item" id="e35efdf5"><p>如果<span class="control">子系统中</span>的值更改，则问题将自动分配给子系统的所有者。</p></li></ul>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; Exports.rule =实体。issue.onChange（{ctx.issue.fields。受让人&& ctx.issue.fields。子系统}，动作：function（ctx）{var issue = ctx.issue;如果（（issue.isReported &&（issue.fields.isChanged（ctx。子系统）|| issue.isChanged（'project'））））|| issue.becomesReported）{issue.fields。受让人= issue.fields。Subsystem.owner; }}，要求：{子系统：{类型：实体。OwnedField.fieldType}，受让人：{类型：实体。User.fieldType}}}）;</div>    <p id="176a5d61">定义此更改规则的组件如下：</p>    <ul class="list _ul"><li class="list__item" id="b9ca42af"><p>所有脚本均以以下列表开头<code class="code">require</code>陈述。在此规则中，我们声明一个局部变量<code class="code">entities</code>并在工作流程API中引用实体模块。这意味着可以使用以下命令在此脚本中访问此模块中包含的所有内容。 <code class="code">entities</code>变量。</p></li><li class="list__item" id="51307578"><p>每个脚本将一个规则导出到<code class="code">exports.rule</code>属性。该规则用<code class="code">Issue.onChange</code>方法，该方法将声明后的脚本作为变更规则导出。</p></li><li class="list__item" id="527c8715"><p id="90b3555e">规则主体本身包含三个属性，如下所示：</p>        <div class="table-wrapper"><table width="100%" id="203ca439"><thead><tr id="0da1337c" class="ijRowHead"><th id="e65f0e76" width="20%"><p>属性</p></th><th id="2fdfb166"><p>描述</p></th></tr></thead><tbody><tr id="cd5ff43f" class="ijRowOdd"><td id="4303672a"><p>标题</p></td><td id="d25c8ce9"><p>可选的人类可读标题。标题仅在管理界面中可见。</p></td></tr><tr id="ab9ab564" class="ijRowEven"><td id="0bbda004"><p>守护</p></td><td id="c533af30"><p>确定执行规则的条件的功能。如果不满足保护条件，则规则中指定的操作不适用于问题。</p></td></tr><tr id="4232b615" class="ijRowOdd"><td id="f659e577"><p>行动</p></td><td id="a666cc8b"><p id="c4f01f1b">应该应用于每个问题的操作。该动作被声明为接受上下文作为参数的函数。</p>              <p id="b3c038d7">在此示例中，我们检查“ <span class="control">子系统”</span>字段是否设置为具有非空所有者的非空值。如果是这样，该规则将设置“ <span class="control">受理人”</span>字段的值。</p></td></tr><tr id="6d396852" class="ijRowEven"><td id="c71bac93"><p>运行</p></td><td id="e3afcabd"><p id="0ffb29bd">确定哪些发行事件触发更改规则。如果未指定，则会在问题更新时触发规则。此属性使用以下参数扩展：</p>              <ul class="list _ul"><li class="list__item" id="ccbcfa69"><p><code class="code">change</code> - 什么时候<code class="code">true</code> ，则规则会在问题更改时触发。</p></li><li class="list__item" id="bb1a6d27"><p><code class="code">removal</code> - 什么时候<code class="code">true</code> ，删除问题后将触发规则。</p></li></ul>              <p id="7b674626">由于此示例中的规则是在应用更新时触发的，因此我们无需为此属性指定值。</p>            </td></tr><tr id="5aebb1de" class="ijRowOdd"><td id="f687e5f7"><p>要求</p></td><td id="d4c6cd1d"><p id="ed5d3bce">规则无误执行所需的实体列表。此属性确保可以将规则安全地附加到项目。</p>              <p id="e1ae3dc0">在此示例中，要求确保“ <span class="control">子系统”</span>和“ <span class="control">受让人”</span>字段都存储正确的类型，并且在规则附加到的项目中可用。如果缺少任何一个字段，则在“ <span class="control">工作流”</span>列表中显示错误。在附加必填字段之前，无法启用该规则。</p></td></tr></tbody></table></div></li></ul>  </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Workflow-Rules.html">工作流程规则类型</a> <a class="navigation-links__next" href="on-schedule-rules.html">按计划规则</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>