<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Track Spent Time - Help | YouTrack Standalone</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="track-spent-time-workflow" data-breadcrumbs="Administration.xml|Administration/Workflow-Guide.xml|Workflows/Workflow-Use-Cases.xml|Use Cases for Workflows/track-spent-time-workflow.xml|Track Spent Time" data-main-title="Track Spent Time"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search YouTrack Standalone Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="track-spent-time-workflow" id="track-spent-time-workflow.xml">Track Spent Time</h1>  <p id="8116fc77">Time Tracking is a standard feature in YouTrack. If you want to learn the fundamentals, read the <a href="Time-Management-Tutorial.html">Time Tracking Tutorial</a>. Here’s a brief overview.</p>  <p id="ac44c743">This feature lets you quantify the effort that is invested into an issue.    This effort is recorded in work items.    Each work item logs the amount of time spent working on an issue.    These work items can be assigned different categories, like development, testing, or any other type of activity that you want to aggregate and track.</p>  <p id="e0de513a">Time tracking data is recorded in custom fields:</p>  <div class="table-wrapper"><table width="100%" id="fd2509cd"><thead><tr id="7c9c9f4b" class="ijRowHead"><th id="6ed2290c" width="20%"><p>Field</p></th><th id="0b7e65fd"><p>Description</p></th></tr></thead><tbody><tr id="c1cbc963" class="ijRowOdd"><td id="afb93812"><p>Spent time</p></td><td id="315989b0"><p>Displays the total amount of time that is recorded in all of the work items that have been added to the issue.</p></td></tr><tr id="d1098643" class="ijRowEven"><td id="360b12d1"><p>Estimation</p></td><td id="563e9311"><p>Stores the amount of time that you think would be required to complete the task.</p></td></tr></tbody></table></div>  <p id="94468a27">By analyzing the difference between the values in these fields, you can measure the overall performance of your team.</p>  <p id="c805d57b">Time tracking can also be used without estimations when you just want to record your activity in billable hours.</p>  <p id="7549acbf">By default, these fields store values as a period.    Period custom fields represent intervals of time in a human-readable form, so you record the estimation and view spent time in a number of weeks, days, and hours.    The number of working days per week and working hours per day are configured at the global level.    If you change these settings, the calculations are updated accordingly.    For more information, see <a href="Time-Tracking.html">Time Tracking</a>.</p>  <div class="chapter"><h2 id="default-workflows-that-track-time" data-toc="track-spent-time-workflow#default-workflows-that-track-time">Default Workflows that Track Time</h2>  <p id="dc8e74b9">Work items are often used for billing, so it’s important that they are recorded accurately.    However, employees who are obliged to add these work items tend to either forget about them or try to cheat the system.    Both of these problems can be regulated with the help of workflows.</p>  <p id="bf09a9f4">YouTrack supplies default workflows that add work items to issues automatically under specific conditions.</p>  <div class="table-wrapper"><table width="100%" id="749948c0"><thead><tr id="855e5385" class="ijRowHead"><th id="d1033db0" width="20%"><p>Default Workflow</p></th><th id="55c8d1fe"><p>Description</p></th></tr></thead><tbody><tr id="79e8e6e5" class="ijRowOdd"><td id="7dedd8c6"><a href="Workflow-Work-Timer.html">In Progress Work Timer</a></td><td id="a341aeb6"><p>This workflow starts a time when an issue moves to the <span class="control">In Progress</span> state.        When the issue moves to a state that is marked as <span class="control">Resolved</span>, the timer stops.        The amount of elapsed time between these state changes is added as a work item.      </p></td></tr><tr id="59e76931" class="ijRowEven"><td id="ef1ba498"><a href="Workflow-Standalone-Work-Timer.html">Stopwatch-style Work Timer</a></td><td id="66f7d32c"><p>Here, the timer is stopped and started manually based on the value in a custom field named <span class="control">Timer</span>.        This field stores two values: <span class="control">Start</span> and <span class="control">Stop</span>.        Each time the value changes to <span class="control">Stop</span>, the elapsed time is recorded in a work item on behalf of the current user.        Switching the value back to <span class="control">Start</span> resets the timer.      </p></td></tr><tr id="70677cb3" class="ijRowOdd"><td id="1af77ccb"><a href="Workflow-Pomodoro-Timer.html">Pomodoro Timer</a></td><td id="68ab3a66"><p>This workflow uses a state machine to imitate the <a href="https://francescocirillo.com/pages/pomodoro-technique" data-external="true" target="_blank" rel="noopener noreferrer">Pomodoro technique</a>.        It changes the value in a dedicated <span class="control">Pomodoro state</span> field so that you follow each 25-minute period of work with a 5-minute period of rest.        The respective work items are added to the issue automatically.      </p></td></tr></tbody></table></div>    <p id="2f44e7e3">These workflows help solve the problem of forgetting to record work items, but they don’t offer any solutions for users who try to cheat the system.</p>  </div>  <div class="chapter"><h2 id="set-limits-time-tracking" data-toc="track-spent-time-workflow#set-limits-time-tracking">Set Limits for Time Tracking</h2>    <p id="2eaa6ede">Let’s take a look at a few tactics for enhancing the time tracking feature with rules that prohibit actions that violate your standard operating procedures.</p>    <p id="e172e62b">Your business practice may differ, but let’s assume that your employees are expected to add the work items the same day the work is performed or at least within a few days.      Adding work items with dates more than one week in the past is against the rules.</p>    <p id="217f7a97">The corresponding rule is written as follows:</p>    <div class="code-block" data-lang="javascript">var entities = require('@jetbrains/youtrack-scripting-api/entities');
var workflow = require('@jetbrains/youtrack-scripting-api/workflow');

var WEEK_IN_MS = 7 * 24 * 60 * 60 * 1000;

exports.rule = entities.Issue.onChange({
  title: 'Prohibit adding work items with dates in the past',
  guard: function(ctx) {
    return ctx.issue.workItems.added.isNotEmpty();
  },
  action: function(ctx) {
    ctx.issue.workItems.added.forEach(function(item) {
      var itemDate = new Date(item.date).setUTCHours(0, 0, 0, 0);
      var today = new Date().setUTCHours(0, 0, 0, 0);
      workflow.check(itemDate &gt;= today - WEEK_IN_MS,
        'Adding work more than one week in the past is not allowed!');
    });
  },
  requirements: {}
});</div>    <p id="4bcf018f">When this rule is enabled, users cannot add work items with dates more than one week in the past.      If you want to make the restriction more stringent, you can limit the date to one or two days in the past.      It’s just a matter of setting the value for the constant. In our case, <code class="code">WEEK_IN_MS</code>.</p>    <p id="c709e75d">Adding work items for dates in the future is also frowned upon, as it is impossible to accurately predict how much time will be spent working on the issue.</p>    <p id="f5b0e8ba">Here’s a rule that clocks out the clairvoyants:</p>    <div class="code-block" data-lang="javascript">var entities = require('@jetbrains/youtrack-scripting-api/entities');
var workflow = require('@jetbrains/youtrack-scripting-api/workflow');

exports.rule = entities.Issue.onChange({
  title: 'Prohibit adding work items with dates in the future',
  guard: function(ctx) {
    return ctx.issue.workItems.added.isNotEmpty();
  },
  action: function(ctx) {
    ctx.issue.workItems.added.forEach(function(item) {
      var itemDate = new Date(item.date).setUTCHours(0, 0, 0, 0);
      var today = new Date().setUTCHours(0, 0, 0, 0);
      workflow.check(itemDate &lt;= today,
        'You can’t add work that hasn’t been performed yet!');
    });
  },
  requirements: {}
});</div>    <p id="1fb515b0">If you have serious concerns about your employees’ intent to cheat, don’t forget about the ability to edit work items!      Users can still game the system by creating a work item with today’s date and editing the work item to use any date they like.</p>    <p id="a064edb3">Here’s a set of rules that apply the same restrictions used for adding work items in the past and future to block edits to work items that would violate the same policy:</p>    <div class="code-block" data-lang="javascript">var entities = require('@jetbrains/youtrack-scripting-api/entities');
var workflow = require('@jetbrains/youtrack-scripting-api/workflow');

var WEEK_IN_MS = 7 * 24 * 60 * 60 * 1000;

exports.rule = entities.Issue.onChange({
  title: 'Prohibit editing work items with dates in the past',
  guard: function(ctx) {
    return ctx.issue.editedWorkItems.isNotEmpty();
  },
  action: function(ctx) {
    ctx.issue.editedWorkItems.forEach(function(item) {
      var itemDate = new Date(item.date).setUTCHours(0, 0, 0, 0);
      var today = new Date().setUTCHours(0, 0, 0, 0);
      workflow.check(itemDate &gt;= today - WEEK_IN_MS,
        'Editing work items to be earlier than a week ago is not allowed!');
    });
  },
  requirements: {}
});</div>    <div class="code-block" data-lang="javascript">var entities = require('@jetbrains/youtrack-scripting-api/entities');
var workflow = require('@jetbrains/youtrack-scripting-api/workflow');

exports.rule = entities.Issue.onChange({
  title: 'Prohibit editing work items in future',
  guard: function(ctx) {
    return ctx.issue.editedWorkItems.isNotEmpty();
  },
  action: function(ctx) {
    ctx.issue.editedWorkItems.forEach(function(item) {
      var itemDate = new Date(item.date).setUTCHours(0, 0, 0, 0);
      var today = new Date().setUTCHours(0, 0, 0, 0);
      workflow.check(itemDate &lt;= today,
        'Editing work items to use a date in the future is not allowed!');
    });
  },
  requirements: {}
});</div>    <p id="7c7e6228">Our last rule makes sure that nobody can cook the books. Once a work item has been added to an issue, this rule prevents anyone from removing it:</p>    <div class="code-block" data-lang="javascript">var entities = require('@jetbrains/youtrack-scripting-api/entities');
var workflow = require('@jetbrains/youtrack-scripting-api/workflow');

exports.rule = entities.Issue.onChange({
  title: 'Prohibit deleting work items',
  guard: function(ctx) {
    return ctx.issue.workItems.removed.isNotEmpty();
  },
  action: function(/* ctx */) {
    workflow.check(false, 'Work items are not allowed to be removed!');
  },
  requirements: {}
});</div>    <p id="10f579ba">You can use these rules as a starting point and apply constraints that suit your business process. Here are a few alternative implementations:</p>    <ul class="list _ul"><li class="list__item" id="573e7fee"><p>You can let users remove work items that were added in the last week and only prohibit removing work items that with dates that are over one week in the past.</p></li><li class="list__item" id="a94ef03f"><p>Instead of restricting adding and editing work items with dates more than a week in the past, you can limit the range to dates no earlier than the start of the work week.</p></li><li class="list__item" id="8883f4aa"><p>You can modify the restrictions so that they are not applied to the project owner or team lead.</p></li></ul>  </div><div class="last-modified" data-skip-index="skip">Last modified: 29 November 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="propagate-values-between-issues-workflow.html">Propagate Values Between Issues</a><a class="navigation-links__next" href="generate-time-reports-workflow.html">Generate Time Reports</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>