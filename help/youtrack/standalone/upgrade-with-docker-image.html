<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>使用Docker容器升级-帮助|帮助YouTrack单机版</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="upgrade-with-docker-image" data-breadcrumbs="Installation-and-Upgrade.xml|Installation and Upgrade/youtrack-docker.xml|Docker Container/upgrade-with-docker-image.xml|Upgrade with Docker Container" data-main-title="Upgrade with Docker Container"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack独立帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="upgrade-with-docker-image.xml" data-toc="upgrade-with-docker-image">使用Docker容器升级</h1>        <p id="ae6070d1">本页介绍使用YouTrack泊坞柜映像升级现有YouTrack服务的各种方案。</p>    <a name="upgrade-prerequisites"></a>        <div class="chapter"><h2 id="prerequisites" data-toc="upgrade-with-docker-image#prerequisites">先决条件</h2>        <p id="7be7b09c">升级之前，请执行以下先决任务：</p>        <ul class="list _ul"><li class="list__item" id="8628ec89"><p><a href="Back-Up-the-Database.html">创建当前数据库的备份</a> 。YouTrack Standalone不提供向前数据库兼容性。在升级过程中，数据库将迁移为与最新版本兼容的格式。这意味着您无法还原到以前的版本，而无法继续使用升级期间处理的数据库。</p></li><li class="list__item" id="0ad448ef"><p>将当前数据库的备份复制到安全位置，以防万一升级遇到问题并需要回滚到以前的版本。</p></li><li class="list__item" id="dfecc9db"><p>验证您的YouTrack许可证是否支持升级。要查看许可证限制，请单击<span class="control">“</span> <span class="control">管理”</span>菜单中的“ <span class="control">全局设置”</span>链接。如果您的免费更新期已过，则需要<a href="https://www.jetbrains.com/youtrack/buy/#stand-alone" rel="noopener noreferrer" data-external="true" target="_blank">延长订阅时间</a> 。</p></li><li class="list__item" id="6d3eb206"><p>注意<a href="#upgrade-matrix">建议的升级路径</a> 。安装的当前版本显示在应用程序中任何页面的底部。</p></li></ul>        <h4 id="upgrade-matrix">推荐升级路径</h4>        <div class="table-wrapper"><table width="100%" id="6e2debf9"><thead><tr id="39fd0d48" class="ijRowHead"><th id="9a6a29d2"><p>现有版本</p></th><th id="0696a82a"><p>升级到版本</p></th></tr></thead><tbody><tr id="7c67f854" class="ijRowOdd"><td id="462ff8f8"><p>6.5或更早</p></td><td id="3dc7278a"><p>YouTrack 7.0</p></td></tr><tr id="f948a07d" class="ijRowEven"><td id="b3e1e508"><p>7.0</p></td><td id="e556a05c"><p>2017.1</p></td></tr><tr id="fd84b503" class="ijRowOdd"><td id="a4e338be"><p>2017.x</p></td><td id="009f6610"><p>2018.x</p></td></tr><tr id="e756d1dc" class="ijRowEven"><td id="a65b0bc6"><p>2018.x</p></td><td id="aec42d63"><p>2019.x</p></td></tr></tbody></table></div>        </div>            <div class="chapter"><h2 id="upgrading-docker-image" data-toc="upgrade-with-docker-image#upgrading-docker-image">升级Docker映像</h2>            <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="ff85b5ef"><p>在现有的YouTrack安装正在运行时， <a href="Back-Up-the-Database.html">创建</a> YouTrack数据库<a href="Back-Up-the-Database.html">的备份</a> 。</p></li><li class="list__item" id="951a9467"><p id="3b1cf96f"><a href="start-stop-docker.html#stop-docker-container">停止运行的YouTrack docker容器</a> ：</p>                    <div class="code-block" data-lang="bash">docker exec <container_id>停止</container_id></div>                    <aside class="prompt" rel="058009f3" id="26f5e31e" data-type="tip" data-title="">                        <p id="c5452ee6">要获取<container_id>，请使用以下命令：</container_id></p><div class="code-block" data-lang="bash">泊坞窗ps -a</div><p></p>                    </aside>                </li><li class="list__item" id="2128a3bd"><p id="46dc4d64">删除旧版本的容器。</p>                    <div class="code-block" data-lang="bash">码头工人<container_id>
    </container_id></div>                    <p id="a5aecd3c">否则，当您运行新版本的容器时，由于容器名称冲突，该命令将失败。</p>                </li><li class="list__item" id="a310f188"><p id="d0b9eb88">从<a href="https://hub.docker.com/r/jetbrains/youtrack/" rel="noopener noreferrer" data-external="true" target="_blank">Docker YouTrack存储库</a>中获取最新的YouTrack版本的图像：</p>                    <div class="code-block" data-lang="bash">docker pull jetbrains / youtrack： <version>
    </version></div>                    <p id="f5d0b831">哪里<code class="code"><version></code>是YouTrack构建的完整版本号。<a href="https://hub.docker.com/r/jetbrains/youtrack/tags/" rel="noopener noreferrer" data-external="true" target="_blank">请参阅可用版本的完整列表。</a></p>                </li><li class="list__item" id="3d64756f"><p id="5bfe9eb5">执行以下命令以运行从存储库中拉出的具有新版YouTrack的容器。该命令的所有其他属性（卷和端口映射）必须与用于运行早期版本的YouTrack图像的属性相同：</p>                    <div class="code-block" data-lang="bash"><arbitrary-youtrack-container-name><path data="" to="" directory="">docker run -it</path></arbitrary-youtrack-container-name> --name <arbitrary-youtrack-container-name>\ -v <path data="" to="" directory="">：/ opt / youtrack / data \ -v <path to="" conf="" directory="">：/ opt / youtrack / conf \ -v <path to="" logs="" directory="">：/ opt / youtrack / logs \ -v <path to="" backups="" directory="">：/ opt / youtrack / backups \ -p <port on="" host="">：8080 \ jetbrains / youtrack： <new version="">
    </new></port></path></path></path></path></arbitrary-youtrack-container-name></div>                    <ul class="list _ul"><li class="list__item" id="67cd9732"><p>在控制台输出中，提供了基于Web的配置向导的URL。</p></li></ul>                </li><li class="list__item" id="ce7a0edc"><p>在浏览器中，通过URL打开基于Web的配置向导。</p></li><li class="list__item" id="ea137ba2"><p>查看升级设置。单击<span class="control">下一步</span> 。</p></li><li class="list__item" id="75d7a113">                    <p id="9ee53987">查看您的许可证。如果需要，您也可以在此页面上更新许可证。</p>                </li><li class="list__item" id="a0917c45"><p id="60d03d1b">完成后，点击<span class="control">升级</span> 。</p>                    <ul class="list _ul"><li class="list__item" id="1c2740cc"><p id="7c0db437">YouTrack Standalone启动其组件。</p>                            <p id="95d12887">设置完成之前，请勿在浏览器中关闭页面。当YouTrack Standalone服务器准备就绪时，您将被重定向到登录页面。</p>                        </li></ul>                </li><li class="list__item" id="34b23af3"><p id="c4f94fbe">输入YouTrack Standalone管理员帐户的凭据，然后单击“ <span class="control">登录”</span>按钮。</p>                    <ul class="list _ul"><li class="list__item" id="6bff6e48"><p>YouTrack打开到“ <span class="control">仪表板”</span>页面。</p></li></ul>                    <p id="d2cc7b35">您的YouTrack Standalone安装已升级并可以使用。</p>                </li></ol></section>        </div>        <div class="chapter"><h2 id="youtrack-zip-msi-to-docker" data-toc="upgrade-with-docker-image#youtrack-zip-msi-to-docker">使用Docker映像升级另一个安装</h2>            <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="789fffd4"><p>在现有的YouTrack安装正在运行时， <a href="Back-Up-the-Database.html">创建</a> YouTrack数据库<a href="Back-Up-the-Database.html">的备份</a> 。</p></li><li class="list__item" id="47d0d9b9"><p><a href="Stop-and-Start-YouTrack.html">停止现有的YouTrack服务</a> 。</p></li><li class="list__item" id="b06880b7"><p id="8d75453a">从<a href="https://hub.docker.com/r/jetbrains/youtrack/" rel="noopener noreferrer" data-external="true" target="_blank">Docker YouTrack存储库</a>中获取最新的YouTrack版本的图像：</p>                    <div class="code-block" data-lang="bash">docker pull jetbrains / youtrack： <version>
    </version></div>                    <p id="60a2dee6"><version>YouTrack版本的完整版本号在哪里<version>。<a href="https://hub.docker.com/r/jetbrains/youtrack/tags/" rel="noopener noreferrer" data-external="true" target="_blank">请参阅可用版本的完整列表。</a></version></version></p>                </li><li class="list__item" id="8d59c077"><a href="youtrack-docker-installation.html#create-and-configure-directories">在主机上创建和配置特定于YouTrack的目录。</a></li><li class="list__item" id="5e5bee98"><p>将YouTrack数据库的备份文件复制到<code class="code">backups</code>您在上一步中创建的目录。</p></li><li class="list__item" id="8c3f9df7">                    <a href="start-stop-docker.html#youtrack-docker-start">使用YouTrack服务器运行该容器，并映射YouTrack数据量和端口。</a>                    <ul class="list _ul"><li class="list__item" id="7d2394cb"><p>YouTrack服务从基于Web的配置向导开始。命令输出中显示可访问向导的URL。</p></li></ul>                </li><li class="list__item" id="9e355209"><p>在浏览器中，打开URL以访问向导。</p></li><li class="list__item" id="cea86d1d"><p>在<span class="control">配置向导中</span> ，单击“ <span class="control">升级”</span> 。</p><figure><a class="lightbox" href="/help/img/youtrack/2019.2/upgrade-config-wizard-start.zoomed.png"><img alt="配置向导启动" title="配置向导启动" src="/help/img/youtrack/2019.2/upgrade-config-wizard-start.png" id="1c8e19f4" width="600" height="247"></a></figure>                <p></p></li><li class="list__item" id="7addaa29"><p>在“ <span class="control">选择升级源”</span>页面上，单击“ <span class="control">选择”</span>按钮，然后选择备份文件作为升级源。</p><figure><a class="lightbox" href="/help/img/youtrack/2019.2/docker-upgrade-source.zoomed.png"><img alt="选择升级来源" title="选择升级来源" src="/help/img/youtrack/2019.2/docker-upgrade-source.png" id="1d0ba6fe" width="600" height="355"></a></figure>单击<span class="control">下一步</span> 。<p></p></li><li class="list__item" id="b067e107"><p>在“ <span class="control">确认设置”</span>页面上，确认系统设置和系统目录的位置。</p><figure><a class="lightbox" href="/help/img/youtrack/2019.2/docker-upgrade-http-confirm.zoomed.png"><img alt="Docker升级确认设置" title="Docker升级确认设置" src="/help/img/youtrack/2019.2/docker-upgrade-http-confirm.png" id="546b0c4e" width="600" height="499"></a></figure>                <p></p></li><li class="list__item" id="ed0dd531">                    <p id="d0b29ce5">查看您的许可证。如果需要，您也可以在此页面上更新许可证。</p>                </li><li class="list__item" id="387d3d79"><p id="3834d4cf">完成后，点击<span class="control">升级</span> 。</p>                    <ul class="list _ul"><li class="list__item" id="c59fc736"><p id="be3882a3">YouTrack Standalone启动其组件。</p>                            <p id="23f42b13">设置完成之前，请勿在浏览器中关闭页面。当YouTrack Standalone服务器准备就绪时，您将被重定向到登录页面。</p>                        </li></ul>                </li><li class="list__item" id="85396ec4"><p id="8d3175d7">输入YouTrack Standalone管理员帐户的凭据，然后单击“ <span class="control">登录”</span>按钮。</p>                    <ul class="list _ul"><li class="list__item" id="61017fe1"><p>YouTrack打开到“ <span class="control">仪表板”</span>页面。</p></li></ul>                    <p id="02bd4928">您的YouTrack Standalone安装已升级并可以使用。</p>                </li></ol></section>        </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="youtrack-docker-installation.html">Docker安装</a> <a class="navigation-links__next" href="start-stop-docker.html">运行和停止Docker容器</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>