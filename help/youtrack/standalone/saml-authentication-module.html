<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>SAML 2.0身份验证模块-帮助|帮助YouTrack单机版</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="saml-authentication-module" data-breadcrumbs="Administration.xml|Administration/Access-Management.xml|Access Management/Managing-Auth-Modules.xml|Auth Modules/saml-authentication-module.xml|SAML 2.0 Auth Module" data-main-title="SAML 2.0 Auth Module"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack独立帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="saml-authentication-module.xml" data-toc="saml-authentication-module">SAML 2.0身份验证模块</h1>    <p id="e66ccc48">通过SAML 2.0身份验证模块，您可以将YouTrack配置为SAML服务提供商（SAML SP）。SAML支持跨多个域的单点登录（SSO）。</p>    <p id="1dbdd4b8">当您在YouTrack中启用SAML 2.0身份验证模块时：</p>    <ul class="list _bullet"><li class="list__item" id="4216624c"><p>您的用户使用在指定的第三方身份提供商（SAML IdP）中管理的凭据登录到YouTrack。</p></li><li class="list__item" id="83c79514"><p>您的YouTrack用户需要记住的帐户和密码更少。</p></li><li class="list__item" id="145fc0b5"><p>在已连接服务中拥有帐户的新用户可以在YouTrack中创建自己的帐户。</p></li></ul>    <p id="d0c6b654">您也可以将YouTrack设置为SAML IdP，但是此处不介绍身份提供者设置的说明。要了解如何将YouTrack用作SAML IdP，请参阅<a href="SAML-2.0.html">SAML 2.0</a> 。</p>    <div class="chapter"><h2 id="idp-initiated-sso" data-toc="saml-authentication-module#idp-initiated-sso">IdP发起的SSO</h2>        <p id="4d6ec5ee">SAML 2.0身份验证模块支持单点登录（SSO）的服务提供商（SP）和身份提供商（IdP）启动。登录请求基于用户如何登录YouTrack。</p>        <ul class="list _ul"><li class="list__item" id="89023c1e"><p>如果用户通过外部登录门户或访问管理提供者（例如OneLogin）登录，则请求由IdP发起。</p></li><li class="list__item" id="dcc2a497"><p>如果用户通过单击YouTrack登录页面中的IdP按钮登录，则该请求将由YouTrack作为SP发起。</p></li></ul>        <p id="338a5fef">为了支持这种行为， <code class="code">RelayState</code> SAML IdP的参数必须为空。如果您在IdP的配置中为此参数设置了一个值，则重定向到集线器会导致<code class="code">Can't restore state</code>错误。</p>    </div>    <div class="chapter"><h2 id="add-saml-auth-module-general" data-toc="saml-authentication-module#add-saml-auth-module-general">添加新的SAML2.0身份验证模块</h2>        <section class="procedure-steps"><h3 id="add-procedure">要添加SAML2.0身份验证模块：</h3><aside class="prompt" rel="add-procedure" id="8254c343" data-type="tip" data-title=""><p>需要权限：低级管理员写</p></aside><ol class="list _decimal"><li class="list__item" id="59b29be3"><p>在您计划用作YouTrack Standalone的SAML身份提供程序的服务中，检索其参数作为IdP。</p></li><li class="list__item" id="a04a5cf5"><p>如果IdP服务未提供其证书的指纹，请使用SHA256创建它。例如，您可以使用<a href="https://www.samltool.com/fingerprint.php" rel="noopener noreferrer" data-external="true" target="_blank">SAML工具</a></p></li><li class="list__item" id="f876956e"><p>在YouTrack Standalone中，打开<span class="menupath" data-skip-index="skip">管理></span>身份<span class="menupath" data-skip-index="skip">验证模块</span>页面。</p></li><li class="list__item" id="eb059270"><p>单击“ <span class="control">新建模块”</span>按钮，然后从列表中选择<span class="control">SAML 2.0</span> 。</p><figure><a class="lightbox" href="/help/img/youtrack/2019.2/new-saml-2-0-auth-module.zoomed.png"><img alt="新的SAML身份验证模块" title="新的SAML身份验证模块" src="/help/img/youtrack/2019.2/new-saml-2-0-auth-module.png" id="bff93625" width="600" height="258"></a></figure>            <p></p></li><li class="list__item" id="d73dafa7"><p id="20d13857">在对话框中，指定IdP服务的参数，然后单击“ <span class="control">创建”</span>按钮。</p>                <ul class="list _ul"><li class="list__item" id="a0fc16be"><p>SAML 2.0身份验证模块已创建并启用。</p></li></ul>            </li><li class="list__item" id="1e16f770"><p>通过在页面的“ <span class="control">属性”</span>部分中为用户帐户提供SAML属性的名称来配置auth模块。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="sample-configurations" data-toc="saml-authentication-module#sample-configurations">样本配置</h2>        <div class="chapter"><h3 id="sample-procedure-okta">将Okta用作YouTrack中的SAML身份提供程序</h3>            <p id="5eef1540">在YouTrack中将Okta配置为SAML IdP是一个简单但不直接的过程。诀窍是要在YouTrack中创建Auth模块，您需要为IdP提供唯一的URL。但是，在Okta中，IdP URL是特定于应用程序的，并在为SAML SP创建应用程序时生成。并且要在Okta中创建一个作为SAML服务提供者的YouTrack应用程序，您需要仅在为Okta创建Auth模块时在YouTrack中生成的唯一URL。此“ URL循环”导致配置过程中的循环：您在Okta中创建一个具有伪URL的应用程序，供YouTrack生成IdP URL，然后在YouTrack中创建一个auth模块以生成SP URL，然后，可以从Okta应用程序中的YouTrack提供实际的SP URL。</p>            <section class="procedure-steps"><h3 id="8a9c26c3">要将Okta用作YouTrack Standalone的IDP，请执行以下操作：</h3><ol class="list _decimal"><li class="list__item" id="0215d184"><p>在Okta中，为YouTrack Standalone服务创建一个新的应用程序。将任何URL用于YouTrack Standalone作为SP。您需要稍后进行更正。请参阅<a href="https://developer.okta.com/standards/SAML/setting_up_a_saml_application_in_okta" rel="noopener noreferrer" data-external="true" target="_blank">Okta文档以设置SAML应用程序</a> 。</p></li><li class="list__item" id="c985d6fd"><p>创建应用程序时，单击“ <span class="control">查看设置说明”</span>按钮以打开包含Okta IdP参数的页面：</p><figure><a class="lightbox" href="/help/img/youtrack/2019.2/okta-idp-app-parameters.zoomed.png"><img alt="Okta IdP的参数" title="Okta IdP的参数" src="/help/img/youtrack/2019.2/okta-idp-app-parameters.png" id="b4493d94" width="600" height="520"></a></figure>                <p></p></li><li class="list__item" id="8c41ab9c"><p>下载您的Okta IdP证书。</p></li><li class="list__item" id="be5d1f26"><p>为使用SHA256的Okta证书创建指纹。例如，您可以使用<a href="https://www.samltool.com/fingerprint.php" rel="noopener noreferrer" data-external="true" target="_blank">SAML开发人员工具</a> 。</p></li><li class="list__item" id="90366b1a"><p>在YouTrack Standalone中，打开“身份<span class="menupath" data-skip-index="skip">验证模块”</span>页面。</p></li><li class="list__item" id="aece04b4"><p id="87a0cbec">单击“ <span class="control">新建模块”</span>按钮，然后在下拉列表中选择SAML 2.0。</p>                    <ul class="list _ul"><li class="list__item" id="451d59c9"><p>右侧面板中将显示“ <span class="control">新建模块”</span>对话框。</p></li></ul>                </li><li class="list__item" id="6356c883"><p>在显示的对话框中，指定Okta IdP的参数。点击<span class="control">创建</span> 。</p><figure><a class="lightbox" href="/help/img/youtrack/2019.2/yt-okta-idp-create-new-auth-module.zoomed.png"><img alt="Yt Okta IDP创建新的身份验证模块" title="Yt Okta IDP创建新的身份验证模块" src="/help/img/youtrack/2019.2/yt-okta-idp-create-new-auth-module.png" id="01e90439" width="600" height="257"></a></figure>                <p></p></li><li class="list__item" id="07cb70d3"><p>配置新模块：设置SAML属性。</p><figure><a class="lightbox" href="/help/img/youtrack/2019.2/okta-idp-configure-auth-module.zoomed.png"><img alt="Okta IDP配置身份验证模块" title="Okta IDP配置身份验证模块" src="/help/img/youtrack/2019.2/okta-idp-configure-auth-module.png" id="97d1513e" width="600" height="365"></a></figure>                <p></p></li><li class="list__item" id="6f646c63"><p>切换回Okta。在Okta中，编辑YouTrack应用程序：提供在创建新的auth模块期间生成的URL。</p></li><li class="list__item" id="ee0a8f0b"><p>将YouTrack应用程序分配给应该能够使用Okta凭据登录到YouTrack的组和用户。</p></li></ol></section>            <p id="c65632b4">而已。现在，用户可以使用其Okta凭据登录到YouTrack并连接服务。</p>        </div>        <div class="chapter"><h3 id="sample-procedure-youtrack-as-idp">在YouTrack中将YouTrack用作SAML身份提供程序</h3>            <p id="04a65999">如果您有两个YouTrack服务，则可以将其中一个用作SAML身份提供程序，将另一个用作服务提供程序。</p>            <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="c7e3ca2e"><p>在用作SAML IdP的YouTrack Standalone中，打开<span class="menupath" data-skip-index="skip">管理菜单> SAML 2.0</span>页面。有关将YouTrack作为SAML 2.0身份提供者的详细信息，请参阅<a href="Parameters-of-YouTrack-as-SAML-2.0-Identity-Provider.html">YouTrack作为SAML 2.0身份提供者的参数</a> 。</p></li><li class="list__item" id="b2a346a3"><p>在用作SAML服务提供者的YouTrack中，打开“身份<span class="control">验证模块”</span>页面。</p></li><li class="list__item" id="bd66b740"><p id="c82e24aa">单击“ <span class="control">新建模块”</span> ，然后选择“ <span class="control">SAML 2.0 ...”</span> 。</p>                    <ul class="list _ul"><li class="list__item" id="0647564c"><p>右侧面板中将显示“ <span class="control">新建模块”</span>对话框。</p></li></ul>                </li><li class="list__item" id="cd093ba9">                    <p id="569cec5f">在对话框中，输入用作IdP的YouTrack服务的参数，然后单击“ <span class="control">创建”</span>按钮。</p>                                        <ul class="list _ul"><li class="list__item" id="69a99449"><p>新模块已创建。</p></li><li class="list__item" id="4112dbfb"><p>新的SAML身份验证模块的设置页面打开。</p></li></ul>                </li><li class="list__item" id="96f8b702"><p>配置SAML属性：</p></li><li class="list__item" id="8b887e70"><p>在IdP中，打开“ <span class="menupath" data-skip-index="skip">管理”菜单>“ SAML 2.0”>“注册的服务”</span>标签。注册YouTrack SAML服务提供者：作为SAML属性，提供与在auth模块设置页面的“ <span class="control">属性”</span>部分中设置的相同的值。有关更多详细信息，请参见<a href="Register-Service-Provider.html">注册服务提供商</a> 。</p></li></ol></section>            <p id="b0a0d5c2">你们都准备好了！现在，您的用户可以使用用作SAML IdP的YouTrack服务中的凭据登录到YouTrack SP。</p>        </div>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="paypal-auth-module.html">贝宝认证模块</a> <a class="navigation-links__next" href="Yahoo-Authentication-Module.html">Yahoo!验证模块</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>