<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta charset="UTF-8"><meta name="robots" content="noindex"><title>Due Date - Help | YouTrack Standalone</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="Workflow-Due-Date"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search YouTrack Standalone Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2018.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="false"><h1 data-toc="Workflow-Due-Date" id="Workflow-Due-Date.xml">Due Date</h1>  <p id="0b1fd806">This workflow helps you set deadlines for resolving issues.</p>  <div class="table-wrapper"><table class="left_header                 " width="100%" id="ad9ec18c"><tbody><tr id="ccd9a5e3" class="ijRowOdd"><th id="7782f229"><p>Name</p></th><td id="1c54da0d"><p>@jetbrains/youtrack-workflow-due-date</p></td></tr><tr id="f47fe0e8" class="ijRowEven"><th id="f8e97b70"><p>Auto-attached</p></th><td id="b81d2c63"><p>no</p></td></tr><tr id="08451095" class="ijRowOdd"><th id="ee4fb9e7"><p>Modules</p></th><td id="0021ff7a"><p>        <a href="#due-date-required">Require due dates for submitted issues</a>        (on-change rule)        <br>        <a href="#notify-assignee">Notify assignee about overdue issues</a>        (on-schedule rule)      </p></td></tr></tbody></table></div>  <div class="chapter"><h2 id="Use-Case">Use Case</h2>    <p id="0db83925">This workflow requires that every reporter sets a due date for resolving an issue and notifies the assignee when      an issue is overdue.    </p>    <p id="329fe6bf">To use this workflow, you should either add a <span class="control">Due Date</span> field to your project or      create another date-type field and modify the reference to the <span class="control">Due Date</span> field in the default      workflow.    </p>    <p id="833f5f41">This workflow was originally taken from a submitted request (<a href="https://youtrack.jetbrains.com/issue/JT-5998" data-external="true" target="_blank" rel="noopener noreferrer"><span>JT-5998</span></a>).    </p>    <p id="c2fbe316">The user who submitted this issue wanted to make a field required for all new issues so that it could be used as      the basis for a report.    </p>  </div>  <div class="chapter"><h2 id="6dcbabb6">Rules</h2>    <a name="Don't_Allow_Submitting_Issues_without_'Due_Date'_Field_Set"></a>    <p id="cadf81b7">The first module contains a rule that prevents the creation of an issue unless the due date is set. If the <span class="control">Due Date</span> field      is empty, a warning is displayed.    </p>    <p id="e4a4b8d9">You can easily modify this rule to require values for one or more custom fields in your project.      However, for the rule to work properly, the required fields should have the <span class="control">Can be empty setting</span> enabled.      For more information, see <a href="Attaching-Custom-Fields-to-Projects.html"><span>Manage Fields in Projects</span></a>.</p>    <div class="chapter"><h3 id="due-date-required">Require due dates for submitted issues</h3>      <p id="0e0569ab">First, the rule verifies that the issue has not been reported. This means the warning is displayed when the        user is still creating the issue or working with an issue draft.        If true, it checks for a value in the <span class="control">Due Date</span> field with the <code class="code" data-lang="xml">required</code> method.      </p>      <ul class="list _ul"><li class="list__item" id="edf48061"><p>If the <span class="control">Due Date</span> field is empty, a warning is displayed. The required field is          highlighted. The user cannot create the issue.        </p></li><li class="list__item" id="cd4cbf07"><p>If the <span class="control">Due Date</span> is set, the user can create the issue.        </p></li></ul>      <div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="kd">var</span> <span class="nx">entities</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@jetbrains/youtrack-scripting-api/entities&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">workflow</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@jetbrains/youtrack-scripting-api/workflow&#39;</span><span class="p">);</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">rule</span> <span class="o">=</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">Issue</span><span class="p">.</span><span class="nx">onChange</span><span class="p">({</span>
  <span class="nx">title</span><span class="o">:</span> <span class="nx">workflow</span><span class="p">.</span><span class="nx">i18n</span><span class="p">(</span><span class="s1">&#39;Require due dates for submitted issues&#39;</span><span class="p">),</span>
  <span class="nx">guard</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">issue</span><span class="p">.</span><span class="nx">becomesReported</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">action</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">issue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">required</span><span class="p">(</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">DueDate</span><span class="p">,</span> <span class="nx">workflow</span><span class="p">.</span><span class="nx">i18n</span><span class="p">(</span><span class="s1">&#39;You must set the Due date!&#39;</span><span class="p">));</span>
  <span class="p">},</span>
  <span class="nx">requirements</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">DueDate</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">Field</span><span class="p">.</span><span class="nx">dateType</span><span class="p">,</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Due Date&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span></code></div>    </div>    <div class="chapter"><h3 id="notify-assignee">Notify assignee about overdue issues</h3>      <a name="Notify_Assignee_About_Outdated_Issues"></a>      <p id="096b0825">The second module contains a rule that checks the value in the <span class="control">Due Date</span> field at 10:00. If the issue is overdue and        unassigned, notification is sent to the Project Lead.        If the issue is assigned, notification is sent to the assignee.      </p>      <div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="kd">var</span> <span class="nx">entities</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@jetbrains/youtrack-scripting-api/entities&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">workflow</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@jetbrains/youtrack-scripting-api/workflow&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">dateTime</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@jetbrains/youtrack-scripting-api/date-time&#39;</span><span class="p">);</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">rule</span> <span class="o">=</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">Issue</span><span class="p">.</span><span class="nx">onSchedule</span><span class="p">({</span>
  <span class="nx">title</span><span class="o">:</span> <span class="nx">workflow</span><span class="p">.</span><span class="nx">i18n</span><span class="p">(</span><span class="s1">&#39;Notify assignee about overdue issues&#39;</span><span class="p">),</span>
  <span class="nx">search</span><span class="o">:</span> <span class="s1">&#39;#Unresolved has: {Due Date}&#39;</span><span class="p">,</span>
  <span class="nx">cron</span><span class="o">:</span> <span class="s1">&#39;0 0 10 * * ?&#39;</span><span class="p">,</span>
  <span class="nx">guard</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">issue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">DueDate</span> <span class="o">&lt;</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
  <span class="p">},</span>
  <span class="nx">action</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">issue</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">issue</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">userToNotify</span> <span class="o">=</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">Assignee</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">userToNotify</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">userToNotify</span> <span class="o">=</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">project</span><span class="p">.</span><span class="nx">leader</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">formattedDate</span> <span class="o">=</span> <span class="nx">dateTime</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">issue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">DueDate</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">notificationText</span> <span class="o">=</span> <span class="nx">workflow</span><span class="p">.</span><span class="nx">i18n</span><span class="p">(</span><span class="s1">&#39;Issue became overdue on &lt;i&gt;{0}&lt;/i&gt;:&#39;</span><span class="p">,</span> <span class="nx">formattedDate</span><span class="p">)</span> <span class="o">+</span>
      <span class="s1">&#39; &lt;a href=&quot;&#39;</span> <span class="o">+</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">url</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">summary</span> <span class="o">+</span> <span class="s1">&#39;&lt;/a&gt;&lt;p style=&quot;color: gray;font-size: 12px;margin-top: 1em;border-top: 1px solid #D4D5D6&quot;&gt;&#39;</span> <span class="o">+</span>
      <span class="nx">workflow</span><span class="p">.</span><span class="nx">i18n</span><span class="p">(</span><span class="s1">&#39;Sincerely yours, YouTrack&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&lt;/p&gt;&#39;</span><span class="p">;</span>
    <span class="nx">userToNotify</span><span class="p">.</span><span class="nx">notify</span><span class="p">(</span><span class="nx">workflow</span><span class="p">.</span><span class="nx">i18n</span><span class="p">(</span><span class="s1">&#39;[YouTrack, Issue is overdue]&#39;</span><span class="p">),</span> <span class="nx">notificationText</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">requirements</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">DueDate</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">Field</span><span class="p">.</span><span class="nx">dateType</span><span class="p">,</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Due Date&quot;</span>
    <span class="p">},</span>
    <span class="nx">Assignee</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">fieldType</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span></code></div>    </div>  </div><div class="last-modified" data-skip-index="skip">Last modified: 7 March 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Workflow-Dependencies.html">Dependencies</a><a class="navigation-links__next" href="Workflow-Duplicates.html">Duplicates</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>