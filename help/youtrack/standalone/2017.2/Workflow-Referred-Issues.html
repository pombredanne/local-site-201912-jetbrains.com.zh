<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/analytics.js"></script><meta charset="UTF-8"><meta name="robots" content="noindex"><title>Referred Issues - Help | YouTrack Standalone</title><link rel="stylesheet" href="/help/app/app.css"></head><body data-id="Workflow-Referred-Issues"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search YouTrack Standalone Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2017.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="default" selected>Default (Windows/Linux)</option><option data-group="secondary" value="mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="mac_os_x">OS X</option><option data-group="secondary" value="eclipse_mac_os_x">OS X Eclipse</option><option data-group="secondary" value="intellij_idea_classic_os_x">IntelliJ IDEA Classic (OS X)</option><option data-group="secondary" value="xcode">Xcode</option><option data-group="secondary" value="visual_studio">Visual Studio</option><option data-group="secondary" value="resharper">ReSharper</option><option data-group="secondary" value="resharper_osx">ReSharper OSX</option><option data-group="secondary" value="emacs">Emacs</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="false"><h1 data-toc="Workflow-Referred-Issues" id="Workflow-Referred-Issues.xml">Referred Issues</h1>    <p id="21fb1c8f">This workflow automatically adds a <span class="control">refers to</span> link when another issue is mentioned by its Id in a comment or description.</p>    <div class="table-wrapper"><table class="left_header                 " width="100%" id="b8d6036b"><tbody><tr id="bd83dd92" class="ijRowOdd"><th id="23797c09"><p>File Name</p></th><td id="3a500e5c"><p>jetbrains-youtrack-referredIssues</p></td></tr><tr id="df4986ad" class="ijRowEven"><th id="3003be0f"><p>Auto-attached</p></th><td id="20d785d3"><p>no</p></td></tr><tr id="3196eeac" class="ijRowOdd"><th id="e1560833"><p>Rules</p></th><td id="1a1eb22b"><p><a href="#Add_Refers_To_Link">Add 'refers to' link if issue ids mentioned in comment/description</a> (stateless)</p></td></tr></tbody></table></div>    <div class="chapter"><h2 id="e67eff42">Use Case</h2>        <p id="8c97d867">This workflow helps you automate the creation of links between related issues.</p>        <p id="d3ea8ad7">This workflow references an issue link type with the name <span class="control">refers to</span>.            This is a custom issue link type that is not available in YouTrack by default.            To use this workflow, you need to add this issue link type to your system.            When you create this issue link type, enter the following values:</p>        <div class="table-wrapper"><table class="                 " width="100%" id="c2d0e229"><thead><tr id="b1700a87" class="ijRowHead"><th id="051b6791" width="15%"><p>Field</p></th><th id="4a4fb91e"><p>Description</p></th></tr></thead><tbody><tr id="2eed84d7" class="ijRowOdd"><td id="7404c54b"><p>Name</p></td><td id="dc2b2432"><p>Reference (or any other name, this does not affect the workflow)</p></td></tr><tr id="5ebd9e7e" class="ijRowEven"><td id="6116aef6"><p>Outward Name</p></td><td id="7e4d53e5"><p>refers to</p></td></tr><tr id="a3ad2490" class="ijRowOdd"><td id="b57f2397"><p>Link Direction</p></td><td id="6a0709e5"><p>Undirected</p></td></tr></tbody></table></div>        <p id="d8575050">For general instructions, see <a href="Link-Types.html#Creating_Link_Type">Create an Issue Link Type</a>.</p>    </div>    <div class="chapter"><h2 id="445b0fad">Workflow Rules</h2>        <p id="c124369a">This rule checks the description and comment for an issue for references to other issues.            When one or more references are found, the issues are added as <span class="control">refers to</span> links.</p>        <div class="chapter"><h3 id="Add_Refers_To_Link">Add 'refers to' link if issue ids mentioned in comment/description</h3>        <div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="nx">rule</span> <span class="nx">Add</span> <span class="s1">&#39;refers to&#39;</span> <span class="nx">link</span> <span class="k">if</span> <span class="nx">issue</span> <span class="nx">ids</span> <span class="nx">mentioned</span> <span class="k">in</span> <span class="nx">comment</span><span class="o">/</span><span class="nx">description</span>

<span class="nx">when</span> <span class="nx">comments</span><span class="p">.</span><span class="nx">added</span><span class="p">.</span><span class="nx">isNotEmpty</span> <span class="o">||</span> <span class="nx">description</span><span class="p">.</span><span class="nx">changed</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">issueID</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">startID</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">referringIssue</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">messageText</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">issueNumber</span><span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">curNumber</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">cursor</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">separators</span> <span class="o">=</span> <span class="s2">&quot; ,;.:\&quot;()?!&lt;&gt;#+|/[]\t\n\r&quot;</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">symbol</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">description</span><span class="p">.</span><span class="nx">changed</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">text</span> <span class="o">=</span> <span class="nx">description</span><span class="p">.</span><span class="nx">lowerCase</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">comments</span><span class="p">.</span><span class="nx">added</span><span class="p">.</span><span class="nx">isNotEmpty</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">text</span> <span class="o">=</span> <span class="nx">comments</span><span class="p">.</span><span class="nx">added</span><span class="p">.</span><span class="nx">first</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">lowerCase</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">while</span> <span class="p">(</span><span class="nx">startID</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">startID</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">project</span><span class="p">.</span><span class="nx">shortName</span><span class="p">.</span><span class="nx">lowerCase</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="nx">startID</span><span class="p">,</span> <span class="nx">opts</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">startID</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">startID</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">separators</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">startID</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">startID</span><span class="p">),</span> <span class="nx">opts</span><span class="p">)){</span>
            <span class="nx">text</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">startID</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
            <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">issueNumber</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">startID</span> <span class="o">+</span> <span class="nx">project</span><span class="p">.</span><span class="nx">shortName</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">cursor</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">symbol</span> <span class="o">=</span> <span class="nx">issueNumber</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">cursor</span><span class="p">,</span> <span class="nx">cursor</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">separators</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">symbol</span><span class="p">,</span> <span class="nx">opts</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">curNumber</span> <span class="o">=</span> <span class="nx">curNumber</span> <span class="o">+</span> <span class="nx">symbol</span><span class="p">;</span>
            <span class="nx">cursor</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">issueID</span> <span class="o">=</span> <span class="nx">project</span><span class="p">.</span><span class="nx">shortName</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="nx">curNumber</span><span class="p">;</span>
        <span class="nx">text</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">startID</span> <span class="o">+</span> <span class="nx">issueID</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">curNumber</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="nx">numeric</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">referringIssue</span> <span class="o">=</span> <span class="nx">loggedInUser</span><span class="p">.</span><span class="nx">getIssues</span><span class="p">(</span><span class="nx">project</span><span class="p">,</span> <span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="nx">issueID</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">referringIssue</span><span class="p">.</span><span class="nx">isNotEmpty</span> <span class="o">&amp;&amp;</span> <span class="nx">referringIssue</span><span class="p">.</span><span class="nx">first</span> <span class="o">==</span> <span class="nx">referringIssue</span><span class="p">.</span><span class="nx">last</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">refers</span> <span class="nx">to</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">referringIssue</span><span class="p">.</span><span class="nx">first</span><span class="p">);</span>

               <span class="k">if</span> <span class="p">(</span><span class="nx">messageText</span><span class="p">.</span><span class="nx">isNotEmpty</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">messageText</span> <span class="o">=</span> <span class="nx">messageText</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nx">messageText</span> <span class="o">=</span> <span class="nx">messageText</span> <span class="o">+</span> <span class="nx">referringIssue</span><span class="p">.</span><span class="nx">first</span><span class="p">.</span><span class="nx">getId</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">messageText</span><span class="p">.</span><span class="nx">isNotEmpty</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">message</span><span class="p">(</span><span class="nx">l10n</span> <span class="p">(</span> <span class="nx">Automatically</span> <span class="nx">added</span> <span class="s1">&#39;refers to&#39;</span> <span class="p">{</span><span class="nx">messageText</span><span class="p">}</span> <span class="nx">links</span><span class="p">.</span> <span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span></code></div>    </div></div><div class="last-modified" data-skip-index="skip">Last modified: 7 March 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Workflow-Pomodoro-Timer.html">Pomodoro Timer</a><a class="navigation-links__next" href="Workflow-Replace-Links.html">Replace Links</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/app.js"></script></body></html>