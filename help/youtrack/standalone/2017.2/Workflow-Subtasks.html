<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/analytics.js"></script><meta charset="UTF-8"><meta name="robots" content="noindex"><title>Subtasks - Help | YouTrack Standalone</title><link rel="stylesheet" href="/help/app/app.css"></head><body data-id="Workflow-Subtasks"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search YouTrack Standalone Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2017.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="default" selected>Default (Windows/Linux)</option><option data-group="secondary" value="mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="mac_os_x">OS X</option><option data-group="secondary" value="eclipse_mac_os_x">OS X Eclipse</option><option data-group="secondary" value="intellij_idea_classic_os_x">IntelliJ IDEA Classic (OS X)</option><option data-group="secondary" value="xcode">Xcode</option><option data-group="secondary" value="visual_studio">Visual Studio</option><option data-group="secondary" value="resharper">ReSharper</option><option data-group="secondary" value="resharper_osx">ReSharper OSX</option><option data-group="secondary" value="emacs">Emacs</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="false"><h1 data-toc="Workflow-Subtasks" id="Workflow-Subtasks.xml">Subtasks</h1>    <p id="caf9db7b">This workflow automatically sets the state of a parent task when the state changes in issues that are linked as subtasks.</p>    <div class="table-wrapper"><table class="left_header                 " width="100%" id="710198a3"><tbody><tr id="750608fd" class="ijRowOdd"><th id="336b5453"><p>File Name</p></th><td id="3aa4752f"><p>jetbrains-youtrack-subtasks</p></td></tr><tr id="40b77415" class="ijRowEven"><th id="3eeb52c4"><p>Auto-attached</p></th><td id="9e92c475"><p>yes</p></td></tr><tr id="28c498e4" class="ijRowOdd"><th id="958150fe"><p>Rules</p></th><td id="cc641e93"><p><a href="#Open_Parent">Open parent task on any subtask open</a> (stateless)<br>            <a href="#Fix_Parent">Fix parent task when all subtasks are resolved</a> (stateless)</p></td></tr></tbody></table></div>    <div class="chapter"><h2 id="be34a43e">Use Case</h2>        <p id="4c57da8b">You want to automatically update the state of a parent task when changes are applied to subtasks.</p>        <ul class="list _ul"><li class="list__item" id="c75a0ae6"><p>When any subtask is set to an unresolved state, the state of the parent task changes to <span class="control">Open</span>.</p></li><li class="list__item" id="451f04d6"><p>When all subtasks are set to a resolved state, the state of the parent task changes to <span class="control">Fixed</span>.</p></li></ul>    </div>    <div class="chapter"><h2 id="0b7ea04e">Rules</h2>        <p id="964f6682">This workflow includes two rules.</p>        <div class="chapter"><h3 id="Open_Parent">Open parent task on any subtask open</h3>        <p id="50133e41">When the state of an issue is set to an unresolved state, this rule checks whether the issue is linked as a subtask of a parent task.            If the parent task belongs to an active project and has a resolved state, the state of the parent task is changed to <span class="control">Open</span>.</p>        <div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="nx">rule</span> <span class="nx">Open</span> <span class="nx">parent</span> <span class="nx">task</span> <span class="nx">on</span> <span class="nx">any</span> <span class="nx">subtask</span> <span class="nx">open</span>

<span class="nx">when</span> <span class="nx">State</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">State</span><span class="p">.</span><span class="nx">isResolved</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">State</span><span class="p">.</span><span class="nx">oldValue</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">State</span><span class="p">.</span><span class="nx">oldValue</span><span class="p">.</span><span class="nx">isResolved</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">subtask</span> <span class="nx">of</span><span class="p">.</span><span class="nx">isNotEmpty</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">subtask</span> <span class="nx">of</span><span class="p">.</span><span class="nx">first</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">parent</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="nx">parent</span><span class="p">.</span><span class="nx">project</span><span class="p">.</span><span class="nx">isArchived</span><span class="p">())</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">isResolved</span><span class="p">())</span> <span class="p">{</span>
        <span class="nx">parent</span><span class="p">.</span><span class="nx">State</span> <span class="o">=</span> <span class="p">{</span><span class="nx">Open</span><span class="p">};</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">parent</span><span class="p">.</span><span class="nx">Type</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">message</span><span class="p">(</span><span class="nx">l10n</span> <span class="p">(</span> <span class="nx">Automatically</span> <span class="nx">reopen</span> <span class="p">{</span><span class="nx">parent</span><span class="p">.</span><span class="nx">Type</span><span class="p">}</span> <span class="p">{</span><span class="nx">parent</span><span class="p">.</span><span class="nx">getId</span><span class="p">()}</span> <span class="p">));</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">message</span><span class="p">(</span><span class="nx">l10n</span> <span class="p">(</span> <span class="nx">Automatically</span> <span class="nx">reopen</span> <span class="p">{</span><span class="nx">parent</span><span class="p">.</span><span class="nx">getId</span><span class="p">()}</span> <span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></div>    </div>   <div class="chapter"><h3 id="Fix_Parent">Fix parent task when all subtasks are resolved</h3>       <p id="91f9536d">When the state of an issue is set to a resolved state, this rule checks whether the issue is linked as a subtask of a parent task.       If the parent task is unresolved, the rule checks the current state for all other issues that are linked to the parent task as subtasks.       If all other subtasks are resolved, the state of the parent task is set to <span class="control">Fixed</span>.</p>       <p id="12a98e43">The rule then checks the parent task to see if it is linked as a subtask to a parent task and performs the same operation.</p>       <div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="nx">rule</span> <span class="nx">Fix</span> <span class="nx">parent</span> <span class="nx">task</span> <span class="nx">when</span> <span class="nx">all</span> <span class="nx">subtasks</span> <span class="nx">are</span> <span class="nx">resolved</span>

<span class="nx">when</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">isReported</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">becomesResolved</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">subtask</span> <span class="nx">of</span><span class="p">.</span><span class="nx">isNotEmpty</span> <span class="p">{</span>
   <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">subtask</span> <span class="nx">of</span><span class="p">.</span><span class="nx">first</span><span class="p">;</span>
   <span class="k">while</span> <span class="p">(</span><span class="nx">parent</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">parent</span><span class="p">.</span><span class="nx">isResolved</span><span class="p">())</span> <span class="p">{</span>
       <span class="kd">var</span> <span class="nx">allSubtasksResolved</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
       <span class="k">for</span> <span class="nx">each</span> <span class="nx">subtask</span> <span class="k">in</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">parent</span> <span class="k">for</span> <span class="p">{</span>
           <span class="c1">//We can&#39;t use subtask.isResolved() here, as this method relies on issue.resolved</span>
           <span class="c1">//property, which is updated after workflow rules are executed.</span>
           <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">subtask</span><span class="p">.</span><span class="nx">State</span><span class="p">.</span><span class="nx">isResolved</span><span class="p">)</span> <span class="p">{</span>
               <span class="nx">allSubtasksResolved</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
               <span class="k">break</span><span class="p">;</span>
           <span class="p">}</span>
       <span class="p">}</span>
       <span class="k">if</span> <span class="p">(</span><span class="nx">allSubtasksResolved</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">parent</span><span class="p">.</span><span class="nx">State</span> <span class="o">=</span> <span class="p">{</span><span class="nx">Fixed</span><span class="p">};</span>
           <span class="nx">message</span><span class="p">(</span><span class="nx">l10n</span> <span class="p">(</span> <span class="nx">Automatically</span> <span class="nx">set</span> <span class="p">{</span><span class="nx">parent</span><span class="p">.</span><span class="nx">getId</span><span class="p">()}</span> <span class="nx">as</span> <span class="nx">Fixed</span> <span class="p">));</span>
       <span class="p">}</span>
       <span class="c1">//NPE-safe operation: if we can, we take the next ancestor and try to close it too</span>
       <span class="nx">parent</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">subtask</span> <span class="nx">of</span><span class="p">.</span><span class="nx">first</span><span class="p">;</span>
   <span class="p">}</span>
<span class="p">}</span></code></div>   </div>    </div><div class="last-modified" data-skip-index="skip">Last modified: 7 March 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Workflow-Subtask-Inherit-Subsystem.html">Subtask Inherit Subsystem</a><a class="navigation-links__next" href="Workflow-Task-Assignee.html">Task Assignee</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/app.js"></script></body></html>