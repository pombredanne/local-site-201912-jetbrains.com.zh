<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta charset="UTF-8"><meta name="robots" content="noindex"><title>TeamCity Integration - Help | YouTrack Standalone</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="Integration-with-TeamCity"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search YouTrack Standalone Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2018.3 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="false"><h1 data-toc="Integration-with-TeamCity" id="Integration-with-TeamCity.xml">TeamCity Integration</h1>        <p id="d545234f">Follow the instructions on this page to establish a connection between a YouTrack project and a build configuration in TeamCity.            The integration between YouTrack and TeamCity enables useful features in both applications:</p>        <ul class="list _bullet"><li class="list__item" id="0166d93c"><p>Pull build numbers from connected projects and automatically update the values in custom fields that store build numbers for resolved issues.              Build numbers in YouTrack are appended with an icon that provides direct access to the build in TeamCity.                <figure><a class="lightbox" href="/help/img/youtrack/2018.3/set-fixed-in-build-teamcity.zoomed.png"><img alt="fixed in TeamCity build" title="fixed in TeamCity build" src="/help/img/youtrack/2018.3/set-fixed-in-build-teamcity.png" id="184c7016" width="600" height="288"></a></figure></p></li><li class="list__item" id="09607daf"><p>Add direct links to change details in VCS commits.</p></li><li class="list__item" id="df742bf6"><p>Apply commands to issues in commit messages when TeamCity assembles a build that contains the commit.</p></li></ul>    <aside class="note " data-title="Compatibility" rel="45766bb9" id="3f1dc028"><br><br>        <p id="f65fcf45">You can integrate YouTrack with TeamCity 8.0 and later.</p></aside>    <p id="37430d1f">To learn more about how to set up and use a TeamCity integration in YouTrack, watch this demo:</p>    <div class="video-player"><object width="640" height="360" type="application/x-shockwave-flash" data="//www.youtube.com/v/lErzv8QO7V8?color2=FBE9EC&amp;rel=0&amp;hd=1&amp;autoplay=0&amp;version=3&amp;modestbranding=1&amp;fs=1"><param name="movie" value="//www.youtube.com/v/lErzv8QO7V8?color2=FBE9EC&amp;rel=0&amp;hd=1&amp;autoplay=1&amp;version=3&amp;modestbranding=1&amp;fs=1"><param name="allowFullScreen" value="true"><param name="allowscriptaccess" value="always"></object></div>    <div class="chapter"><h2 id="prerequisites-teamcity-integration" data-toc="Integration-with-TeamCity#prerequisites-teamcity-integration">Prerequisites</h2>        <p id="27ce5074">Before you start, verify the following requirements:</p>        <ul class="list _ul"><li class="list__item" id="8f6bf275"><p>You have an active TeamCity installation that runs version 8.0 or later.</p></li><li class="list__item" id="6a9cb99f">Your user account in TeamCity is assigned the permissions that are required for this integration.                You need permission to <span class="control">View project and all parent projects</span> and <span class="control">Modify user profile and roles</span>.                Access to these permissions is based on the authorization mode that is used by your TeamCity server.                <div class="table-wrapper"><table class="                 " width="100%" id="12a672e5"><thead><tr id="266e185d" class="ijRowHead"><th id="1c4b246d" width="20%"><p>Authorization Mode</p></th><th id="d4fb5869"><p>Access Requirements</p></th></tr></thead><tbody><tr id="de1bfcc6" class="ijRowOdd"><td id="d2ac7a83"><p>Simple</p></td><td id="675985a1"><p>The default <span class="control">Administrator</span> role has both of the permissions that are required for the integration.</p></td></tr><tr id="5edc9691" class="ijRowEven"><td id="e589ad0a"><p>Per-project</p></td><td id="55326c28"><p>The default <span class="control">Project viewer</span> role has permission to <span class="control">View project and all parent projects</span>.                            The default <span class="control">Project developer</span> and <span class="control">Project administrator</span> roles include permissions for the <span class="control">Project viewer</span> by default.                        The permission to <span class="control">Modify user profile and roles</span> is not included and must be added to the role that is assigned to your account.                            Roles can be assigned to your account directly or at the group level.</p></td></tr></tbody></table></div>                <p id="063b3127">For more information about roles and permissions, refer to the <a href="https://confluence.jetbrains.com/display/TCD10/Role+and+Permission" data-external="true" target="_blank" rel="noopener noreferrer"><span>TeamCity documentation</span></a>.</p></li><li class="list__item" id="315cf228">The YouTrack projects that you want to integrate with TeamCity use a custom field that stores a value as a build type.            You can use the default custom field <span class="control">Fixed in build</span> or any other custom field that stores a build type.            <p id="347f84df">If you don't want to add build numbers to issues, you can enable the integration without mapping build numbers to a custom field in YouTrack.            In this case, your developers can still mention issues and apply commands in VCS commit messages.</p></li><li class="list__item" id="37feab9a"><p>If you want to add build numbers to issues that are mentioned in commits and build comments, you have enabled the <span class="control">Issue Tracker Integration</span> feature in TeamCity and configured it to convert strings into links to issues in YouTrack.            For more information, refer to the <a href="https://confluence.jetbrains.com/display/TCD10/Integrating+TeamCity+with+Issue+Tracker" data-external="true" target="_blank" rel="noopener noreferrer"><span>Team City documentation</span></a>.</p></li></ul>    </div>    <div class="chapter"><h2 id="configure-connection" data-toc="Integration-with-TeamCity#configure-connection">Connect to a TeamCity Server</h2>        <p id="9b579f94">To enable the integration, you need to connect to one or more TeamCity servers.        This operation can also be performed by a project administrator on a per-project basis.        For more information, see <a href="Configure-TeamCity-Integration.html"><span>Integrate with TeamCity</span></a>.</p>    <p id="71098e31">As an administrator, you can enable the TeamCity integration for any project in YouTrack.</p>        <aside class="tip sideblock" data-title="Permissions" rel="connect-procedure" id="272335e5"><br><br>            <p id="89508795"><img alt="Icon globe" title="Icon globe" src="/help/img/youtrack/2018.3/iconGlobe.png" id="bed2ff80" width="14" height="15" class="inline-icon-14"> Low-level Admin Read</p>            <p id="9c34a9dc"><img alt="Icon globe" title="Icon globe" src="/help/img/youtrack/2018.3/iconGlobe.png" id="2a07b817" width="14" height="15" class="inline-icon-14"> Low-level Admin Write</p>            <p id="6005631b">TeamCity Permissions:</p>            <ul class="list _ul"><li class="list__item" id="cec34840"><p>View project and all parent projects</p></li><li class="list__item" id="4ab8d5d4"><p>Modify user profile and roles</p></li></ul></aside>        <section class="procedure-steps"><h2 id="connect-procedure">To connect to a TeamCity server:</h2><ol class="list _decimal"><li class="list__item" id="fcc61a66"><p>In the <span class="control">Integrations</span> section of the <span class="control">Administration</span> menu, select <span class="control">Build Server Integration</span>.</p></li><li class="list__item" id="fe732c35">On the <span class="control">Build Server Integration Settings</span> page, click the <span class="control">Add New Build Server</span> link.            <ul class="list _ul"><li class="list__item" id="3385b51b"><p>The <span class="control">Add Build Server</span> dialog opens in the sidebar.                    <figure><a class="lightbox" href="/help/img/youtrack/2018.3/add-teamcity-server.zoomed.png"><img alt="add TeamCity server" title="add TeamCity server" src="/help/img/youtrack/2018.3/add-teamcity-server.png" id="9c942382" width="600" height="312"></a></figure></p></li></ul></li><li class="list__item" id="0b1d82c9">Enter values for the following settings:                <div class="table-wrapper"><table class="                 " width="100%" id="c6c8667e"><thead><tr id="e66c0204" class="ijRowHead"><th id="7a55a466" width="20%"><p>Setting</p></th><th id="cac97678"><p>Description</p></th></tr></thead><tbody><tr id="5032554d" class="ijRowOdd"><td id="1b125c69"><p>URL</p></td><td id="c835ee0c"><p>Enter the URL of the TeamCity server.</p></td></tr><tr id="56ef38a2" class="ijRowEven"><td id="d24eba10"><p>Type</p></td><td id="a822a007"><p>Select <span class="control">TeamCity</span>.</p></td></tr><tr id="00e58413" class="ijRowOdd"><td id="80d6c11f"><p>Login</p></td><td id="f928af6b"><p>Enter the username of the TeamCity user account.</p></td></tr><tr id="2b3c2ff4" class="ijRowEven"><td id="5e9ad7d6"><p>Password</p></td><td id="cbeb2a56"><p>Enter the password for the TeamCity user account.</p></td></tr></tbody></table></div>                </li><li class="list__item" id="25158d73">Expand the <span class="control">Advanced settings</span> section and configure the following optional settings:                <div class="table-wrapper"><table class="                 " width="100%" id="bbd46941"><thead><tr id="4e58ab6c" class="ijRowHead"><th id="2b386116" width="20%"><p>Setting</p></th><th id="99880f00"><p>Description</p></th></tr></thead><tbody><tr id="74b718f6" class="ijRowOdd"><td id="2a195f8d"><p>Select SSL key</p></td><td id="e2bafb6d"><p>If the TeamCity server uses a secure connection and you have uploaded an SSL client key to authenticate your YouTrack service,                            select the client key from the drop-down list.                            For more information, see <a href="SSL-Key-Stores.html"><span>SSL Keystores</span></a>.</p></td></tr><tr id="cd3d52fa" class="ijRowEven"><td id="26ad38f8"><p>Socket timeout</p></td><td id="c73eace3"><p>Set the maximum amount of time to wait for a response from the TeamCity server before disconnecting the socket.                            The default is 30 seconds.</p></td></tr><tr id="df7ade65" class="ijRowOdd"><td id="fc11db20"><p>Read timeout</p></td><td id="aca8c4fa"><p>Set the maximum amount of time to wait for complete data transfer from the TeamCity server before closing the connection.                            The default is 30 seconds.</p></td></tr></tbody></table></div>            </li><li class="list__item" id="ce3a4a6d">Click the <span class="control">Test connection</span> button.                <ul class="list _ul"><li class="list__item" id="72f66c00"><p>YouTrack verifies the connection to the TeamCity server.</p></li></ul></li><li class="list__item" id="b2c5426b">Click the <span class="control">Add server</span> button.            <ul class="list _ul"><li class="list__item" id="b1c141e8"><p>The TeamCity server connection settings are saved.</p></li></ul></li></ol></section>        <p id="0d598681">Repeat these steps to add connections to additional TeamCity servers.</p>    </div>    <div class="chapter"><h2 id="define-mapping" data-toc="Integration-with-TeamCity#define-mapping">Define the Mapping Between Projects</h2>        <a name="Mapping_Projects"></a>        <p id="3bbc7a05">When you connect to a TeamCity server, you must create a mapping between a YouTrack project and a TeamCity build configuration.        As an administrator, you can either map the projects yourself, or let the project administrators map their own projects and build configurations.        For detailed instructions that are appropriate for project administrators, see <a href="Configure-TeamCity-Integration.html"><span>Integrate with TeamCity</span></a>.</p>        <p id="df64da1c">The first group of settings connect YouTrack to a build configuration for a project on a TeamCity server.        Additional options for the default and feature branches let you define which issues are assigned build numbers for each branch.        You can also specify the commands to apply to all of the issues that are processed by YouTrack.</p>        <aside class="tip sideblock" data-title="Permissions" rel="mapping-procedure" id="271ea8e7"><br><br>            <p id="646a4f06">— Read Project Basic</p>            <p id="3bf9f536">— Update Project</p>        </aside>        <section class="procedure-steps"><h2 id="mapping-procedure">To define a mapping between YouTrack and TeamCity:</h2><ol class="list _decimal"><li class="list__item" id="9264d328"><p>Select a TeamCity server in the list of build server integrations.</p></li><li class="list__item" id="ad5974a1">Click the <span class="control">Add New Mapping</span> button.            <ul class="list _ul"><li class="list__item" id="1e12f030"><p>The <span class="control">Create Mapping</span> dialog opens in the sidebar.                    <figure><a class="lightbox" href="/help/img/youtrack/2018.3/teamcity-create-mapping.zoomed.png"><img alt="TeamCity mapping options" title="TeamCity mapping options" src="/help/img/youtrack/2018.3/teamcity-create-mapping.png" id="29a0925d" width="600" height="367"></a></figure></p></li></ul></li><li class="list__item" id="24254b7e">Enter values for the following settings:                <div class="table-wrapper"><table class="                 " width="100%" id="da940bb2"><thead><tr id="25c6ae3c" class="ijRowHead"><th id="25e526dc" width="20%"><p>Setting</p></th><th id="023795f2"><p>Description</p></th></tr></thead><tbody><tr id="a94e5766" class="ijRowOdd"><td id="8b512a88"><p>YouTrack Project</p></td><td id="4f9edc8e"><p>Select the YouTrack project that you want to map to a project in TeamCity.</p></td></tr><tr id="4035c965" class="ijRowEven"><td id="e3605871"><p>TeamCity Server</p></td><td id="bd134049"><p>Select the TeamCity server that contains the project that you want to map to.                            If you are only connected to one TeamCity server, it is set by default.</p></td></tr><tr id="793524ae" class="ijRowOdd"><td id="ccb601c7"><p>TeamCity Project</p></td><td id="ca2fa6aa"><p>Select the name of the project in TeamCity.</p></td></tr><tr id="2184438f" class="ijRowEven"><td id="28727cd9"><p>TeamCity Build</p></td><td id="5bf99086"><p>Select a build configuration from the selected TeamCity project.</p></td></tr><tr id="87fa355b" class="ijRowOdd"><td id="a1895afb"><p>Process changes</p></td><td id="50994b7a">Choose how YouTrack handles VCS changes in builds that are processed by TeamCity.                        The following options are available:                        <ul class="list _ul"><li class="list__item" id="0efcb1dd"><p><span class="control">Do not attach</span> — VCS changes that include references to YouTrack issue IDs are not added to the activity stream in the referenced issue.                          Use this option when you only want the integration to add build numbers to custom fields.</p></li><li class="list__item" id="924f1376"><p><span class="control">Attach</span> — VCS changes that include references to YouTrack issue IDs are added to the activity stream in the referenced issue.                          The entry in the activity stream contains a link to the build that contains the change.                            The commit message is not parsed for YouTrack commands.</p></li><li class="list__item" id="d6618453"><p><span class="control">Attach and apply commands</span> — VCS changes that include references to YouTrack issue IDs are added to the activity stream in the referenced issue.                            The entry in the activity stream contains a link to the build that contains the change.                            The commit message is also parsed for YouTrack commands.</p></li></ul></td></tr><tr id="e7b62111" class="ijRowEven"><td id="97feaf56"><p>Visible to</p></td><td id="8bc70127"><p>To restrict the visibility of comments and updates that are shown as <span class="control">VCS changes</span> in the activity stream, select one or more groups from the list.                            Otherwise, this activity type is visible to any user who has permission to read issues in the project.</p></td></tr><tr id="70007101" class="ijRowOdd"><td id="4f98e776"><p>Parse commits for issue comments</p></td><td id="0b1021e3"><p>To detect and generate issue comments from commit messages, enable this option.                        Otherwise, the entire commit message is displayed with the VCS change in the issue activity stream.<br><br>                        To learn more about how YouTrack processes commit messages, see <a href="Apply-Commands-in-VCS-Commits.html"><span>Apply Commands in VCS Commits</span></a>.</p></td></tr></tbody></table></div>            </li><li class="list__item" id="91c89866"><p>Click to expand the <span class="control">Actions for Default Branch</span> settings.                These settings determine which actions are applied to builds in the default branch.            <figure><a class="lightbox" href="/help/img/youtrack/2018.3/actions-for-default-branch-teamcity.zoomed.png"><img alt="actions for default branch" title="actions for default branch" src="/help/img/youtrack/2018.3/actions-for-default-branch-teamcity.png" id="e9906157" width="600" height="347"></a></figure>            If you don't want to add build numbers to issues, continue from step 7.</p></li><li class="list__item" id="da68ce2e">Configure the following options:            <div class="table-wrapper"><table class="                  _layout-fixed" width="100%" id="323587cf"><thead><tr id="6a789cc3" class="ijRowHead"><th id="dde4cf73" width="20%"><p>Option</p></th><th id="1fdb6be0"><p>Description</p></th></tr></thead><tbody><tr id="5e76bbab" class="ijRowOdd"><td id="beea068b"><p>Failed builds</p></td><td id="2a762ce5"><p>Enable to add build numbers to issues for all builds, including failed builds.                    When disabled, only successful builds are added to issues in YouTrack.</p></td></tr><tr id="248fe456" class="ijRowEven"><td id="e4b4fefa"><p>Add each build</p></td><td id="00579d0f"><p>Determines which build numbers are added to the set of values for the custom field that is stored in the <span class="control">Build field</span> setting.                        Enable to add builds to the set of values in the build field even when there aren't any YouTrack issues that were processed in the build.                        The builds that are considered for this option are affected by the <span class="control">Failed builds</span> setting.</p></td></tr><tr id="c4f7e6ff" class="ijRowOdd"><td id="e71b15a5"><p>Related issues</p></td><td id="2b490ade">Enable to add build numbers to issues that are mentioned in commits and build comments.                    When disabled, YouTrack ignores mentioned issues.                    Use this option together with the <span class="control">Query</span> setting to determine which issues are assigned build numbers.                      <p id="83d12551">To use this option, you must also enable the <span class="control">Issue Tracker Integration</span> feature in TeamCity and configure it to convert strings into links to issues in YouTrack.                        For more information, refer to the <a href="https://confluence.jetbrains.com/display/TCD10/Integrating+TeamCity+with+Issue+Tracker" data-external="true" target="_blank" rel="noopener noreferrer"><span>Team City documentation</span></a>.</p></td></tr><tr id="29742be5" class="ijRowEven"><td id="13e2c7ee"><p>Issues matching query</p></td><td id="3e9d1778"><p>Enter a search query to add build numbers to issues that match a specific filter criteria.                    The standard search query is <code class="code" data-lang="Java">State: Fixed State: Verified resolved date: ${build.time}..${prev.build.time}</code>.                    This query ensures that only issues that are resolved since the last successful build and the current build are considered.                    Use this setting together with the <span class="control">Related issues</span> option to determine which issues are assigned build numbers.</p></td></tr><tr id="110f9441" class="ijRowOdd"><td id="606d8565"><p>Build field</p></td><td id="c670cab8"><p>Choose the custom field in your project that stores build numbers from TeamCity.                    The selection is restricted to custom fields that store a <code class="code" data-lang="Java">build</code> type.</p></td></tr><tr id="a988ba07" class="ijRowEven"><td id="bdada505"><p>Apply command</p></td><td id="6dcd095e"><p>Enter a command that is applied to all issues that are assigned build numbers in YouTrack.                        Use the <code class="code" data-lang="Java">${build}</code> variable to reference the build number in TeamCity. For example:                        <code class="code" data-lang="Java">Subsystem Testing Test in build ${build}</code>                        With this command, all issues that are processed by YouTrack are assigned to the <span class="control">Testing</span> subsystem                        and the <span class="control">Test in build</span> field is set to the build number.</p></td></tr></tbody></table></div></li><li class="list__item" id="94ad8726"><p>Expand and set the options for the <span class="control">Actions for Feature Branches</span> settings.            These settings determine which actions are applied to builds in one or more feature branches.            Each setting provides the same functionality as described for the default branch, above.</p></li><li class="list__item" id="825bda73">Click the <span class="control">Create Mapping</span> button.            <ul class="list _ul"><li class="list__item" id="cd6835bd"><p>The YouTrack project is mapped to the selected project in TeamCity.</p></li><li class="list__item" id="0320318f"><p>The TeamCity integration is enabled and available for use in the selected YouTrack project.</p></li></ul></li></ol></section>    </div>    <div class="chapter"><h2 id="placeholders-teamcity-attributes" data-toc="Integration-with-TeamCity#placeholders-teamcity-attributes">Placeholders</h2>        <p id="9c6aec58">You can use placeholders in the <span class="control">Query</span> and <span class="control">Command</span> settings.            These placeholders reference attributes that are stored for builds in TeamCity.            The placeholder is replaced with the corresponding value in the connected version control system when the builds are processed by YouTrack.            The following placeholders are available:</p>        <div class="table-wrapper"><table class="                 " width="100%" id="b3850e91"><thead><tr id="a05fc64f" class="ijRowHead"><th id="9f72544e" width="20%"><p>Placeholder</p></th><th id="e743ed25"><p>Description</p></th></tr></thead><tbody><tr id="4e361dc3" class="ijRowOdd"><td id="b6afb807"><p>${build.time}</p></td><td id="f883a8c5"><p>The date and time of the build that is processed by YouTrack.</p></td></tr><tr id="11e2081a" class="ijRowEven"><td id="d1a8b92f"><p>${prev.build.time}</p></td><td id="41ceeb97"><p>The date and time of the build prior to the build that is processed by YouTrack.</p></td></tr><tr id="700e547e" class="ijRowOdd"><td id="94dbf199"><p>${build}</p></td><td id="2928efe0"><p>The number of the build that is processed by YouTrack.</p></td></tr><tr id="10e0a98c" class="ijRowEven"><td id="a1b1644b"><p>${revision}</p></td><td id="88c56d4a"><p>The revision number that is assigned to a VCS commit.</p></td></tr></tbody></table></div>    </div>    <div class="last-modified" data-skip-index="skip">Last modified: 7 March 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="jenkins-integration.html">Jenkins Integration</a><a class="navigation-links__next" href="Integration-with-Upsource.html">Upsource Integration</a></div><section class="seealso" data-skip-index="skip"><div class="seealso__header"><h2>See Also</h2></div><div class="seealso__content"><div class="seealso__col" data-skip-index="skip"><h3>How-Tos:</h3><ul class="list"><li class="list__item"><a href="VCS-Changes.html"><span>View and Edit VCS Changes</span></a></li><li class="list__item"><a href="Map-Issues-to-VCS-Change-Commit.html"><span>Link Issues in VCS Commits</span></a></li><li class="list__item"><a href="Apply-Commands-in-VCS-Commits.html"><span>Apply Commands in VCS Commits</span></a></li><li class="list__item"><a href="Add-a-Comment.html#add-comment-vcs-commits"><span>Generate Comments from VCS Commits</span></a></li></ul></div><div class="seealso__col" data-skip-index="skip"><h3>Project Administration:</h3><ul class="list"><li class="list__item"><a href="Configure-TeamCity-Integration.html"><span>Integrate with TeamCity</span></a></li></ul></div></div></section></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>