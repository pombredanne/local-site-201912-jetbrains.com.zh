<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta charset="UTF-8"><meta name="robots" content="noindex"><title>Generate Issues Automatically - Help | YouTrack Standalone</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="generate-issues-automatically"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search YouTrack Standalone Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2018.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="false"><h1 data-toc="generate-issues-automatically" id="generate-issues-automatically-workflows.xml">Generate Issues Automatically</h1>      <p id="efee709d">YouTrack provides a few basic options for issue generation.</p>  <ul class="list _ul"><li class="list__item" id="9aa404cc"><p>You can <a href="Generate-Issue-Template-URL.html">generate an issue template URL</a>.      This speeds up the process somewhat, but you need to define separate URLs for different issue types and it’s still a manual operation.</p></li><li class="list__item" id="dde9e222"><p>You can use the <a href="Clone-Issues.html">Clone Issue</a> action in the issue toolbar.</p></li></ul>  <p id="47dff99f">If you need to create a standard set of issues on a regular basis, consider using workflows to generate these issues automatically.</p>  <div class="chapter"><h2 id="generate-subtasks-for-parent-when-reported" data-toc="generate-issues-automatically#generate-subtasks-for-parent-when-reported">Generate Subtasks When a Parent Issue is Reported</h2>    <p id="63fcd660">Imagine that you’re working with a development team that releases updates to a software product on a regular basis.      Apart from implementing new features and fixing bugs, each release requires a standard set of tasks. For example:</p>    <ul class="list _ul"><li class="list__item" id="764f0a0e"><p>Distribute an updated version of the product.</p></li><li class="list__item" id="6a909e3e"><p>Update the documentation.</p></li><li class="list__item" id="a47c3427"><p>Update the <span class="control">What's new</span> page on the product website.</p></li><li class="list__item" id="8586d81f"><p>Prepare and publish an article on the company blog.</p></li><li class="list__item" id="8c5f3de1"><p>Send a newsletter to customers.</p></li><li class="list__item" id="38bd664a"><p>Send a newsletter to resellers.</p></li></ul>    <p id="18fc7fcb">To save you and your colleagues a lot of time, write a workflow that generates a list of subtasks every time a <span class="control">Release</span> issue is created.</p>     <p id="73487660">You need some criteria to distinguish release issues from other issues for your product.       Otherwise, you end up generating subtasks for the wrong issues.       There are a number of conditions you can set up, like using a separate project for release issues or adding a specific tag.       In this example, we add <span class="control">Release</span> to the set of values for the <span class="control">Type</span> field and generate subtasks only when a new issue with this type is created.       The workflow rule looks like this:</p>    <div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="kd">var</span> <span class="nx">entities</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@jetbrains/youtrack-scripting-api/entities&#39;</span><span class="p">);</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">rule</span> <span class="o">=</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">Issue</span><span class="p">.</span><span class="nx">onChange</span><span class="p">({</span>
  <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Release management&#39;</span><span class="p">,</span>
  <span class="nx">guard</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">issue</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">issue</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">becomesReported</span> <span class="o">&amp;&amp;</span>
      <span class="nx">issue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">Type</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">Type</span><span class="p">.</span><span class="nx">Release</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">action</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">issue</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">issue</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">createIssue</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">subsystem</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">newIssue</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">Issue</span><span class="p">(</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">currentUser</span><span class="p">,</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">project</span><span class="p">,</span>
        <span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39; for &#39;</span> <span class="o">+</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">summary</span><span class="p">);</span>
      <span class="nx">newIssue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">Subsystem</span> <span class="o">=</span> <span class="nx">subsystem</span><span class="p">;</span>
      <span class="nx">newIssue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">Type</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">Type</span><span class="p">.</span><span class="nx">Task</span><span class="p">;</span>
      <span class="nx">newIssue</span><span class="p">.</span><span class="nx">links</span><span class="p">[</span><span class="s1">&#39;subtask of&#39;</span><span class="p">].</span><span class="nx">add</span><span class="p">(</span><span class="nx">issue</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="nx">createIssue</span><span class="p">(</span><span class="s1">&#39;Update distribution&#39;</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">Subsystem</span><span class="p">.</span><span class="nx">Distribution</span><span class="p">);</span>
    <span class="nx">createIssue</span><span class="p">(</span><span class="s1">&#39;Update documentation&#39;</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">Subsystem</span><span class="p">.</span><span class="nx">Documentation</span><span class="p">);</span>
    <span class="nx">createIssue</span><span class="p">(</span><span class="s1">&#39;Update &quot;What\&#39;s new&quot;&#39;</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">Subsystem</span><span class="p">.</span><span class="nx">Website</span><span class="p">);</span>
    <span class="nx">createIssue</span><span class="p">(</span><span class="s1">&#39;Blog post&#39;</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">Subsystem</span><span class="p">.</span><span class="nx">Blog</span><span class="p">);</span>
    <span class="nx">createIssue</span><span class="p">(</span><span class="s1">&#39;Newsletter for customers&#39;</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">Subsystem</span><span class="p">.</span><span class="nx">Newsletters</span><span class="p">);</span>
    <span class="nx">createIssue</span><span class="p">(</span><span class="s1">&#39;Newsletter for resellers&#39;</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">Subsystem</span><span class="p">.</span><span class="nx">Newsletters</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">requirements</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">Type</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">EnumField</span><span class="p">.</span><span class="nx">fieldType</span><span class="p">,</span>
      <span class="nx">Release</span><span class="o">:</span> <span class="p">{},</span>
      <span class="nx">Task</span><span class="o">:</span> <span class="p">{}</span>
    <span class="p">},</span>
    <span class="nx">Subsystem</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">OwnedField</span><span class="p">.</span><span class="nx">fieldType</span><span class="p">,</span>
      <span class="nx">Distribution</span><span class="o">:</span> <span class="p">{},</span>
      <span class="nx">Documentation</span><span class="o">:</span> <span class="p">{},</span>
      <span class="nx">Website</span><span class="o">:</span> <span class="p">{},</span>
      <span class="nx">Blog</span><span class="o">:</span> <span class="p">{},</span>
      <span class="nx">Newsletters</span><span class="o">:</span> <span class="p">{}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span></code></div>  </div>  <div class="chapter"><h2 id="generate-subtasks-for-parent-on-update" data-toc="generate-issues-automatically#generate-subtasks-for-parent-on-update">Generate Subtasks When a Parent Issue is Updated</h2>    <p id="09cfc0d6">This case is similar to the previous one from a technical point of view but has a slightly different application.</p>    <p id="2b55c7a0">Let’s look at the process for an operational team that organizes business trips to conferences and events for company employees.      Line managers create issues in a special project.      The project uses a multi-value <span class="control">Travelers</span> field to store the names of the employees who participate in the event.      The operational team prepares travel documents for each employee separately, so they want to have one issue per person.</p>     <p id="de50d1dc">You can support this case just as we did in the previous scenario by using the value for the <span class="control">Type</span> field as the guard condition.       Whenever a line manager submits an issue with multiple travelers, the operational team sets the type to <span class="control">Group Trip</span>.       This triggers a workflow that generates a subtask for each employee in the <span class="control">Travelers</span> field and sets the type for each subtask to <span class="control">Individual Trip</span>.       You can support this use case by making minor modifications to the previous example.</p>      <p id="d0571e7b">However, sometimes employees decide that they want to go to the conference after the <span class="control">Group Trip</span> issue is created.    For this case, you need an additional rule that creates a subtask for new travelers on the fly:</p>    <div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="kd">var</span> <span class="nx">entities</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@jetbrains/youtrack-scripting-api/entities&#39;</span><span class="p">);</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">rule</span> <span class="o">=</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">Issue</span><span class="p">.</span><span class="nx">onChange</span><span class="p">({</span>
  <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Create a subtask for each new traveler&#39;</span><span class="p">,</span>
  <span class="nx">guard</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">issue</span><span class="p">.</span><span class="nx">fields</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">issue</span><span class="p">.</span><span class="nx">isReported</span> <span class="o">&amp;&amp;</span>
      <span class="nx">fs</span><span class="p">.</span><span class="nx">Type</span> <span class="o">&amp;&amp;</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">Type</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">Type</span><span class="p">.</span><span class="nx">GroupTrip</span><span class="p">.</span><span class="nx">name</span> <span class="o">&amp;&amp;</span>
      <span class="nx">fs</span><span class="p">.</span><span class="nx">Travelers</span><span class="p">.</span><span class="nx">added</span><span class="p">.</span><span class="nx">isNotEmpty</span><span class="p">();</span>
  <span class="p">},</span>
  <span class="nx">action</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">issue</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">issue</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">createIssue</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">traveler</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">newIssue</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">Issue</span><span class="p">(</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">currentUser</span><span class="p">,</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">project</span><span class="p">,</span>
        <span class="nx">traveler</span><span class="p">.</span><span class="nx">fullName</span> <span class="o">+</span> <span class="s1">&#39; at &#39;</span> <span class="o">+</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">Destination</span><span class="p">);</span>
      <span class="nx">newIssue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">Type</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">Type</span><span class="p">.</span><span class="nx">IndTrip</span><span class="p">;</span>
      <span class="nx">newIssue</span><span class="p">.</span><span class="nx">links</span><span class="p">[</span><span class="s1">&#39;subtask of&#39;</span><span class="p">].</span><span class="nx">add</span><span class="p">(</span><span class="nx">issue</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="nx">issue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">Travelers</span><span class="p">.</span><span class="nx">added</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">createIssue</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">requirements</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">Destination</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">Field</span><span class="p">.</span><span class="nx">stringType</span>
    <span class="p">},</span>
    <span class="nx">Type</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">EnumField</span><span class="p">.</span><span class="nx">fieldType</span><span class="p">,</span>
      <span class="nx">GroupTrip</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Group Trip&#39;</span>
      <span class="p">},</span>
      <span class="nx">IndTrip</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Individual Trip&#39;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">Travelers</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">fieldType</span><span class="p">,</span>
      <span class="nx">multi</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span></code></div>  </div>  <div class="chapter"><h2 id="generate-issues-on-demand" data-toc="generate-issues-automatically#generate-issues-on-demand">Generate Issues on Demand</h2>    <p id="31349f8c">There are several situations where you want to generate issues, but you can’t use a combination of field values as the initial condition.      Here, the initial condition is inside the mind of the YouTrack user.</p>     <p id="cece06f2">The most obvious example is the <span class="control">Clone Issue</span> workflow.       This workflow lets you make a copy of an existing request whenever you need it.       This workflow uses an action rule.       This type of rule is triggered by a user-defined command, either by selecting this action from the <span class="control">Command Dialog</span> menu or by executing this command in the <span class="control">Apply Command</span> dialog.</p>      <p id="4e5451ec">Going back to the previous example, let’s say that you want to provide employees with some swag to give to partners or hand out at the conference booth.        In this case, you can write an action rule that generates a subtask for the group trip.        The workflow takes the value from the <span class="control">Destination</span> field in the parent task and sets the summary for the subtask to <span class="control">Prepare swag for "Destination"</span>:</p>    <div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="kd">var</span> <span class="nx">entities</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@jetbrains/youtrack-scripting-api/entities&#39;</span><span class="p">);</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">rule</span> <span class="o">=</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">Issue</span><span class="p">.</span><span class="nx">action</span><span class="p">({</span>
  <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Create a swag subtask&#39;</span><span class="p">,</span>
  <span class="nx">command</span><span class="o">:</span> <span class="s1">&#39;swag-subtask&#39;</span><span class="p">,</span>
  <span class="nx">guard</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">issue</span><span class="p">.</span><span class="nx">isReported</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">action</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">issue</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">issue</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">newIssue</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">Issue</span><span class="p">(</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">currentUser</span><span class="p">,</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">project</span><span class="p">,</span>
      <span class="s1">&#39;Prepare swag for &#39;</span> <span class="o">+</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">Destination</span><span class="p">);</span>
    <span class="nx">newIssue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">Type</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">Type</span><span class="p">.</span><span class="nx">Swag</span><span class="p">;</span>
    <span class="nx">newIssue</span><span class="p">.</span><span class="nx">links</span><span class="p">[</span><span class="s1">&#39;subtask of&#39;</span><span class="p">].</span><span class="nx">add</span><span class="p">(</span><span class="nx">issue</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">requirements</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">Destination</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">Field</span><span class="p">.</span><span class="nx">stringType</span>
    <span class="p">},</span>
    <span class="nx">Type</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">EnumField</span><span class="p">.</span><span class="nx">fieldType</span><span class="p">,</span>
      <span class="nx">Swag</span><span class="o">:</span> <span class="p">{}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span></code></div>  </div>  <div class="chapter"><h2 id="generate-issues-on-schedule" data-toc="generate-issues-automatically#generate-issues-on-schedule">Generate Issues on a Schedule</h2>    <p id="3509de08">So far we’ve shown you several ways to generate issues in response to human actions.      However, there are many situations where you don’t even need a human to do the grunt work.</p>     <p id="aa607189">Consider the requirements for a team of developer advocates.       One of the numerous responsibilities of this team is to prepare a monthly internal newsletter.       The task is the same every month: same concept, same deadline, same assignee.       Instead of creating this issue manually, set up a schedule to create it automatically:</p>    <div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="kd">var</span> <span class="nx">entities</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@jetbrains/youtrack-scripting-api/entities&#39;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">MONTHS</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s2">&quot;January&quot;</span><span class="p">,</span> <span class="s2">&quot;February&quot;</span><span class="p">,</span> <span class="s2">&quot;March&quot;</span><span class="p">,</span> <span class="s2">&quot;April&quot;</span><span class="p">,</span>
  <span class="s2">&quot;May&quot;</span><span class="p">,</span> <span class="s2">&quot;June&quot;</span><span class="p">,</span> <span class="s2">&quot;July&quot;</span><span class="p">,</span> <span class="s2">&quot;August&quot;</span><span class="p">,</span>
  <span class="s2">&quot;September&quot;</span><span class="p">,</span> <span class="s2">&quot;October&quot;</span><span class="p">,</span> <span class="s2">&quot;November&quot;</span><span class="p">,</span> <span class="s2">&quot;December&quot;</span>
<span class="p">];</span>

<span class="kd">var</span> <span class="nx">DAY_IN_MS</span> <span class="o">=</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">;</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">rule</span> <span class="o">=</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">Issue</span><span class="p">.</span><span class="nx">onSchedule</span><span class="p">({</span>
  <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Internal newsletter&#39;</span><span class="p">,</span>
  <span class="nx">search</span><span class="o">:</span> <span class="s1">&#39;#DA-1&#39;</span><span class="p">,</span> <span class="c1">// anchor issue; it is required to ensure that</span>
  <span class="c1">// this rule is executed exactly once according to schedule</span>
  <span class="nx">cron</span><span class="o">:</span> <span class="s1">&#39;0 0 19 15 1/1 ? *&#39;</span><span class="p">,</span> <span class="c1">// on the 15th day of every month at 19:00</span>
  <span class="nx">action</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">+</span> <span class="mi">31</span> <span class="o">*</span> <span class="nx">DAY_IN_MS</span><span class="p">);</span>
    <span class="nx">date</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">month</span> <span class="o">=</span> <span class="nx">MONTHS</span><span class="p">[</span><span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()];</span>
    <span class="kd">var</span> <span class="nx">year</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">newIssue</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">Issue</span><span class="p">(</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">currentUser</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">issue</span><span class="p">.</span><span class="nx">project</span><span class="p">,</span>
      <span class="nx">month</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">year</span> <span class="o">+</span> <span class="s1">&#39; Internal Newsletter&#39;</span><span class="p">);</span>
    <span class="nx">newIssue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">Assignee</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">author</span><span class="p">;</span>
    <span class="nx">newIssue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">Subsystem</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">Subsystem</span><span class="p">.</span><span class="nx">Newsletters</span><span class="p">;</span>
    <span class="nx">newIssue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">DD</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">();</span>
  <span class="p">},</span>
  <span class="nx">requirements</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">Assignee</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">fieldType</span>
    <span class="p">},</span>
    <span class="nx">Subsystem</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">OwnedField</span><span class="p">.</span><span class="nx">fieldType</span><span class="p">,</span>
      <span class="nx">Newsletters</span><span class="o">:</span> <span class="p">{}</span>
    <span class="p">},</span>
    <span class="nx">DD</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">Field</span><span class="p">.</span><span class="nx">dateType</span><span class="p">,</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Due Date&#39;</span>
    <span class="p">},</span>
    <span class="nx">author</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">User</span><span class="p">,</span>
      <span class="nx">login</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span>
    <span class="p">},</span>
    <span class="nx">da</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">Issue</span><span class="p">,</span>
      <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;DA-1&#39;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span></code></div>  </div><div class="last-modified" data-skip-index="skip">Last modified: 7 March 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="streamline-issue-reporting-workflows.html">Streamline Issue Reporting</a><a class="navigation-links__next" href="update-fields-on-issue-update.html">Update Fields on Issue Update</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>