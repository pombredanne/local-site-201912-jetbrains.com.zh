<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>邮箱集成-帮助| YouTrack单机版</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Mailbox-Integration" data-breadcrumbs="Administration.xml|Administration/Integrations.xml|Integrations/Mailbox-Integration.xml|Mailbox Integration/Use-YouTrack-as-a-Help-Desk.xml|Use YouTrack as a Help Desk/Track-Email-Feedback-with-YouTrack.xml|Track Email Feedback" data-main-title="Mailbox Integration"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack独立帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Mailbox-Integration.xml" data-toc="Mailbox-Integration">邮箱整合</h1>    <a name="Mailbox_Integration"></a>    <p id="aab40861"><span class="control">邮箱集成</span>将传入的电子邮件转换为YouTrack中的问题和评论。</p>    <div class="chapter"><h2 id="message-processing" data-toc="Mailbox-Integration#message-processing">讯息处理</h2>        <p id="eccd380e">此集成从连接的邮件服务器中提取电子邮件。每条消息均由YouTrack解析和分析。邮件是根据为项目定义的邮箱规则处理的。</p>        <div class="chapter"><h3 id="mailbox-integration-new-issues">新刊</h3>            <p id="892d566d">如果YouTrack找不到任何将传入消息与现有问题相关联的值，则会创建一个新问题。YouTrack使用电子邮件中的以下信息来创建新的问题：</p>            <ul class="list _ul"><li class="list__item" id="783c3476"><p>邮件主题已复制到问题摘要。</p></li><li class="list__item" id="1b2c1281"><p>邮件正文已复制到问题说明。</p></li><li class="list__item" id="dead8168"><p>处理电子邮件的邮箱规则确定哪个用户设置为报告者。记者可以是消息作者，也可以是默认用户。</p></li></ul>            <p id="bfaefe75">像任何手动创建的问题一样，YouTrack在选定项目中为该问题分配ID。</p>        </div>        <div class="chapter"><h3 id="mailbox-integration-comments">评论</h3>            <a name="threading"></a>            <p id="2b173522">当YouTrack检测到传入消息与现有问题有关时，消息正文将作为注释添加到问题中。在以下情况下，YouTrack会将传入消息与现有问题进行匹配：</p>            <ul class="list _bullet"><li class="list__item" id="9fa3d64d"><p id="a08733c2">的值<code class="code">message-id</code> / <code class="code">in-reply-to</code>邮件标题中的属性与先前处理的电子邮件匹配。这是解析MIME编码的消息的标准方法。当收件人答复在项目中创建或更新问题时发送的通知时，YouTrack使用这些值来注释。</p>                    <p id="815608e6">如果将问题移到另一个项目，则对相关消息的答复将作为所连接项目中的新问题而不是原始问题中的注释进行处理。</p></li><li class="list__item" id="958ae584"><p>邮件主题包含同一项目中问题的ID。</p></li></ul>        </div>        <div class="chapter"><h3 id="mailbox-integration-related-issues">相关问题</h3>            <p id="d125f53e">如果传入消息的主题与现有问题的摘要匹配，但是该消息不包含将其与现有问题相关联的任何值，则会创建一个新的问题。YouTrack按以下方式处理这些消息：</p>            <ul class="list _ul"><li class="list__item" id="926938db"><p>添加到转发的邮件和答复（FW：，RE ：）的前缀将被忽略。</p></li><li class="list__item" id="c3a755fa"><p>如果启用了邮箱规则中的选项，则也将忽略方括号中设置的文本。</p></li><li class="list__item" id="70c54e25"><p>YouTrack创建一个问题，并将消息主题（减去忽略的文本字符串）设置为问题摘要。</p></li><li class="list__item" id="fe0e5474"><p>YouTrack使用具有最低ID号的相同摘要来查找问题，并向其添加<span class="control">相关</span>链接。</p></li></ul>        </div>    </div>    <div class="chapter"><h2 id="enable-mailbox-integration" data-toc="Mailbox-Integration#enable-mailbox-integration">设定</h2>        <p id="13e0e114">要将传入的电子邮件作为YouTrack中的问题进行处理，必须首先启用并配置邮箱集成。</p>        <p id="a52108ec">此过程需要执行以下步骤：</p>        <ol class="list _decimal"><li class="list__item" id="d891bdb0"><p><a href="#configure-project">配置要用于管理由集成创建的问题的项目</a> 。</p></li><li class="list__item" id="5c2e8925"><p><a href="#fetch-email">设置获取电子邮件的时间表</a> 。</p></li><li class="list__item" id="b98494e5"><a href="#import-trusted-certificates-mail-server">将邮件服务器的受信任证书导入到YouTrack中。</a> </li><li class="list__item" id="3f98502a"><p><a href="#connect-to-mail-server">连接到邮件服务器</a> 。</p></li><li class="list__item" id="6aa0b1d8"><p><a href="#define-rules">定义应用于传入电子邮件的规则</a> 。</p></li></ol>        <div class="chapter"><h3 id="configure-project">配置项目</h3>            <p id="7d51d4a6">在开始之前，请创建一个项目或配置现有项目以管理由邮箱集成创建的问题。在此设置的稍后部分，您将创建一个引用该项目的邮箱规则。</p>            <p id="aa7315c6">若要配置与邮箱集成一起使用的项目，请将<span class="control">发件人地址</span>设置为要用于发送电子邮件的电子邮件地址。此设置将覆盖用于常规通知的全局“ <span class="control">发件人”地址</span> 。在项目中设置此值可让您使用专用的电子邮件地址管理传入和传出消息。</p>            <p id="13e3db10">您还可以选择为项目中的通知设置<span class="control">回复地址</span> 。例如，当您用于发送电子邮件通知的地址无法收到回复时，请使用此设置。</p>            <section class="procedure-steps"><h3 id="email-procedure">设置现有项目的电子邮件地址：</h3><aside class="prompt" rel="email-procedure" id="8254d125" data-type="tip" data-title=""><p>需要权限：更新项目</p></aside><ol class="list _decimal"><li class="list__item" id="642f9756"><p>单击标题中的“ <span class="control">项目”</span>链接。</p></li><li class="list__item" id="48a288fd"><p>从列表中选择项目。</p></li><li class="list__item" id="a277b09a"><p id="5b9bbdc7">单击<span class="control">编辑项目</span>链接。</p>                <ul class="list _ul"><li class="list__item" id="96bc7df5"><p>将打开“ <span class="control">编辑项目”</span>页面。</p></li></ul></li><li class="list__item" id="db093bba"><p>在“ <span class="control">发件人地址”</span>输入字段中，输入要用于发送电子邮件的电子邮件地址。</p></li><li class="list__item" id="8f091364"><p>（可选）在“ <span class="control">回复地址”</span>字段中输入要接收回复的电子邮件地址。</p></li></ol></section>        </div>        <div class="chapter"><h3 id="fetch-email">设置提取电子邮件的时间表</h3>            <p id="07c2d863">YouTrack根据计划从指定的邮件服务器获取电子邮件。默认间隔为每小时。您可以将计划更改为预定义的时间间隔，也可以使用cron表达式指定自定义时间间隔。计划<i id="b3fbf040">不是</i>为多个邮件服务器独立设置的。相同的时间表将应用于与YouTrack服务器集成的所有邮件服务器。</p>            <section class="procedure-steps"><h3 id="fetch-procedure">要指定获取电子邮件的间隔：</h3><aside class="prompt" rel="fetch-procedure" id="b1be20fc" data-type="tip" data-title=""><p>需要权限：低级管理员写</p></aside><ol class="list _decimal"><li class="list__item" id="2bc81bdf"><p>在“ <span class="control">管理”</span>菜单的“ <span class="control">集成”</span>部分中，选择“ <span class="control">邮箱集成”</span> 。</p></li><li class="list__item" id="f36234b1"><p id="23863a60">从“ <span class="control">获取间隔”</span>下拉菜单中，选择一个预先配置的时间间隔。要指定另一个时间间隔，请选择<span class="control">自定义，</span>然后输入cron表达式。例如，要每天每隔45分钟提取一次新数据，请使用以下表达式：</p><div class="code-block" data-lang="shell">0 0/45 * * *？</div><p></p>                    <p id="3e89497f">有关cron表达式格式的详细信息，请参阅<a href="http://www.quartz-scheduler.org/documentation/quartz-2.3.0/tutorials/crontrigger.html" rel="noopener noreferrer" data-external="true" target="_blank">cron触发器教程</a> 。</p></li></ol></section>        </div>        <div class="chapter"><h3 id="import-trusted-certificates-mail-server">从邮件服务器导入受信任的证书</h3>            <aside class="prompt" rel="import-trusted-certificates-mail-server" id="8e936c2a" data-type="note" data-title="">                <p id="2fbf73c0">使用不安全协议（例如IMAP和POP3）的邮件服务器可能具有启用<a href="https://en.wikipedia.org/wiki/Opportunistic_TLS" rel="noopener noreferrer" data-external="true" target="_blank">机会性TLS</a>的扩展。为了安全起见，只要有可用，YouTrack就会通过STARTTLS连接到邮件服务器。</p></aside>            <p id="233ee116">您的邮件服务器可能要求您通过SSL建立安全连接。在将托管服务器添加到YouTrack之前，您可能需要导入其SSL证书。</p>            <ul class="list _ul"><li class="list__item" id="07e2b663"><p>如果您的邮件服务器具有由知名证书颁发机构（CA）签名的有效证书，则公用密钥和证书已经存储在Web浏览器中。您应该能够连接到邮件服务器而无需导入其SSL证书。</p></li><li class="list__item" id="78c3e7e0"><p>如果邮件服务器的证书是自签名的，则需要导入证书和公共密钥以建立安全连接。</p></li></ul>            <section class="procedure-steps"><h3 id="secure-procedure">要在YouTrack和邮件服务器之间启用安全连接，请执行以下操作：</h3><aside class="prompt" rel="secure-procedure" id="5708f187" data-type="tip" data-title=""><p>需要权限：低级管理员写</p></aside><ol class="list _decimal"><li class="list__item" id="5952e2ce"><p>将您的邮件服务器的证书和公共密钥导出为DER编码文件。这些文件使用.der，.cer和.crt扩展名。</p></li><li class="list__item" id="38e0cf2e"><p>在<span class="control">“</span> <span class="control">管理”</span>菜单的“ <span class="control">服务器设置”</span>区域中，选择“ <span class="control">SSL证书”</span></p></li><li class="list__item" id="f1ff2bf3"><p>单击<span class="control">导入可信证书</span>按钮。</p></li><li class="list__item" id="1b000216"><p>在“ <span class="control">导入可信证书”</span>对话框中，输入<span class="control">证书</span>的名称。</p></li><li class="list__item" id="6669c6b6"><p id="b1cb4399">单击<span class="control">选择文件</span>按钮，然后从本地目录中选择证书文件。</p>                    <figure><a class="lightbox" href="/help/img/youtrack/2019.2/import-trusted-certificate.zoomed.png"><img alt="导入可信证书对话框" title="导入可信证书对话框" src="/help/img/youtrack/2019.2/import-trusted-certificate.png" id="13dca300" width="600" height="254"></a></figure>                </li><li class="list__item" id="93d107b6"><p id="923861ea">单击<span class="control">导入</span>按钮。</p>                    <ul class="list _ul"><li class="list__item" id="346fcda7"><p>您的邮件服务器的证书已添加到YouTrack。</p></li></ul></li></ol></section>        </div>        <div class="chapter"><h3 id="connect-to-mail-server">连接到邮件服务器</h3>            <p id="fb872294">要启用集成，您需要连接到一个或多个邮件服务器。</p>            <ul class="list _ul"><li class="list__item" id="66aa6d95"><p>对于使用POP / POPS或IMAP / IMAPS的邮件服务器，请<a href="#connect-to-mail-server-procedure">遵循以下说明</a> 。</p></li><li class="list__item" id="f53251f4"><p>对于Microsoft Exchange和Office 365邮箱，需要其他设置。阅读下面的说明，并将您的邮件服务配置为与此集成兼容。</p></li><li class="list__item" id="60b2c7c4"><p>对于Gmail，用于连接到邮件服务器的帐户有特殊要求。有关详细信息，请参阅<a href="#smtp-settings-gmail-server">“连接到Gmail的特殊要求”</a> 。</p></li></ul>            <div class="chapter"><h4 id="microsoft-exchange">与Microsoft Exchange和Office 365邮箱的连接</h4>            <p id="83d86b9e">邮箱集成仅支持POP / POPS和IMAP / IMAPS。不支持Microsoft Exchange的默认协议MAPI。如果要连接到Microsoft Exchange Server，则有两个选择：</p>            <ul class="list _ul"><li class="list__item" id="43164906"><p id="8de7b0c7">在Exchange Server上启用并配置POP或IMAP，然后配置经过身份验证的SMTP设置。启用这些邮件连接器后，您可以按照以下说明进行操作并建立连接。</p>                    <p id="16f3d306">请注意有关<span class="control">Microsoft Exchange</span>邮箱的特殊说明。</p></li><li class="list__item" id="572a0331"><p id="6a238a70">通过中间网关服务器建立连接。这使您可以在禁用POP / IMAP和SMTP的情况下连接到Exchange Server。例如，DavMail交换网关将专有的Exchange格式转换为YouTrack可以理解的电子邮件协议。有关设置说明，请参阅<a href="http://davmail.sourceforge.net/serversetup.html" rel="noopener noreferrer" data-external="true" target="_blank">DavMail Gateway文档</a> 。</p>                    <p id="c74515bc">使用此设置，请按照以下说明建立与网关服务器的连接。</p></li></ul>                <p id="d1b8e5d1">对于Microsoft Exchange和Office 365，邮箱集成支持与共享邮箱的连接。您可以使用作为共享邮箱成员的任何用户的登录名和密码进行身份验证。</p>        </div>            <div class="chapter"><h4 id="smtp-settings-gmail-server">连接到Gmail的特殊要求</h4>                <p id="8e8ba556">Google帐户的设置限制了对使用安全性较低的登录技术的第三方应用程序的访问权限。根据其定义，这适用于使用用户名和密码进行身份验证的连接，这些连接容易被劫持。</p>                <p id="98ee9c55">设置要求基于管理安全性较低的应用程序的当前设置。这些要求适用于您用来向Gmail服务器进行身份验证的Google帐户。</p>                <p id="1e56eec4">如果您要连接自己管理的Google帐户，则可以使用以下选项：</p>                <ul class="list _ul"><li class="list__item" id="8d4bfa25"><p id="74f8f1d5">在您的Google帐户中生成一个应用专用密码（应用密码），并将其用于身份验证。离开启用对您的谷歌不够安全的应用访问帐户<span class="control">关闭</span>的选项。</p>                        <p id="180a09ed">应用密码只能用于启用了两步验证的帐户。</p></li><li class="list__item" id="df8b9f3e"><p>为您的Google帐户启用“ <span class="control">不太安全的应用访问权限”</span> ，并使用您的用户名和密码进行连接（不建议使用）。</p></li></ul>                <p id="3b91ade6">如果您使用由您的组织管理的Google帐户作为G Suite的一部分，请验证您的域当前启用了以下哪些设置。</p>                <div class="table-wrapper"><table width="100%" id="d72e3748"><thead><tr id="c7f78678" class="ijRowHead"><th id="740a5744"><p>设置</p></th><th id="7cf7aa49"><p>要求</p></th></tr></thead><tbody><tr id="c093892e" class="ijRowOdd"><td id="07794379"><p>禁止所有用户访问安全性较低的应用</p></td><td id="b9d6cb5f"><p id="382efa97">您存储在邮箱集成设置中的Google帐户必须启用两步验证。要使用此帐户连接到Gmail服务器，请在您的Google帐户中生成一个应用程序专用密码。</p>                            <ul class="list _ul"><li class="list__item" id="6068a4b3"><p>对于<span class="control">登录</span>名，输入您的Google帐户的用户名。</p></li><li class="list__item" id="638fc2ff"><p>对于<span class="control">密码</span> ，输入您在Google中生成的应用专用密码。</p></li></ul>                        </td></tr><tr id="08fd9775" class="ijRowEven"><td id="ad62f527"><p>允许用户管理对不太安全的应用程序的访问</p></td><td id="1b0f61e5"><p id="016337cb">您也许可以使用您的Google用户名和密码连接到Gmail服务器。此设置仅在以下情况下可用：</p>                            <ul class="list _ul"><li class="list__item" id="ebf1f47f"><p>您已启用该选项，以允许访问用于连接到Gmail服务的Google帐户中安全性较低的应用程序。</p></li><li class="list__item" id="26ed2a1c"><p>您尚未为此Google帐户启用两步验证。</p></li></ul>                            <p id="579cf6f6">如果您为此Google帐户启用了两步验证，则需要生成并使用应用程序专用密码。配置邮箱集成设置，就像禁用对安全性较低的应用程序的访问一样。</p></td></tr></tbody></table></div>            </div>            <section class="procedure-steps"><h3 id="connect-to-mail-server-procedure">要连接到邮件服务器：</h3><aside class="prompt" rel="connect-to-mail-server-procedure" id="d6bc750c" data-type="tip" data-title=""><p>需要权限：低级管理员写</p></aside><ol class="list _decimal"><li class="list__item" id="718d86cd"><p id="2c2e0142">在“ <span class="control">邮箱集成设置”</span>页上，单击“ <span class="control">添加新邮件服务器”</span>链接。</p>                    <ul class="list _ul"><li class="list__item" id="42ad1f7d"><p><span class="control">邮箱</span>对话框在侧栏中打开。</p><figure><a class="lightbox" href="/help/img/youtrack/2019.2/connect-to-mail-server.zoomed.png"><img alt="连接到邮件服务器" title="连接到邮件服务器" src="/help/img/youtrack/2019.2/connect-to-mail-server.png" id="bbc441fd" width="600" height="369"></a></figure>                        <p></p></li></ul>                </li><li class="list__item" id="5e7582d9"><p id="fa0022f1">输入以下设置的值：</p>                    <div class="table-wrapper"><table width="100%" id="073ee297"><thead><tr id="f0305226" class="ijRowHead"><th id="479a0372" width="20%"><p>设置</p></th><th id="8dd696f5"><p>描述</p></th></tr></thead><tbody><tr id="bfd0e265" class="ijRowOdd"><td id="1c5c80f4"><p>协议</p></td><td id="99039267"><p id="eacc760f">选择邮件服务器使用的协议。邮箱集成支持POP / POPS和IMAP / IMAPS协议。</p>                                <aside class="prompt" rel="eacc760f" id="ba6d933b" data-type="note" data-title="">                                    <p id="0232b7f3">要连接到Microsoft Exchange或Microsoft Office 356邮箱，您必须首先配置您的邮件服务描述为支持POP / POPS或IMAP / IMAPS <a href="#microsoft-exchange">这里</a> 。</p>                                    <p id="4bcca76c">为确保正确识别协议，请启用<span class="control">MS Exchange兼容模式</span>复选框。</p>                                </aside>                              </td></tr><tr id="8ba70a71" class="ijRowEven"><td id="8ad7a638"><p>主办</p></td><td id="7f3fe945"><p>输入邮件服务器的URL。例如， <code class="code">mail.jetbrains.com</code> 。</p></td></tr><tr id="1e0c4807" class="ijRowOdd"><td id="41f7de5f"><p>港口</p></td><td id="4cedd1a5"><p>输入邮件服务器侦听的端口。选择邮件服务器协议时，将自动设置默认端口。</p></td></tr><tr id="7bd3c6e9" class="ijRowEven"><td id="ade56c0d"><p>登录</p></td><td id="dff1e955"><p id="aae1df57">输入授权访问邮件服务器的帐户的用户名。</p>                                <aside class="prompt" rel="aae1df57" id="f7afecde" data-type="note" data-title="">                                    <p id="66784743">对于Microsoft Exchange和Office 365，邮箱集成支持与共享邮箱的连接。输入作为共享邮箱成员的任何用户的登录名。使用语法<code class="code">email address/shared mailbox name</code> 。</p>                                    <p id="0e2fa4ee">为确保授权请求得到正确处理，请启用“ <span class="control">协议”</span>设置下的<span class="control">“</span> <span class="control">MS Exchange兼容模式”</span>复选框。</p>                                </aside>                                <aside class="prompt" rel="dff1e955" id="cda48228" data-type="note" data-title="">                                    <p id="b76be647">如果您要连接到Gmail，则可能需要遵守其他安全要求。有关详细信息，请参阅<a href="#smtp-settings-gmail-server">“连接到Gmail的特殊要求”</a> 。</p>                                </aside>                            </td></tr><tr id="15fd0e02" class="ijRowOdd"><td id="b30534c4"><p>密码</p></td><td id="6fe01b5e"><p>输入登录用户帐户的密码。</p></td></tr></tbody></table></div>                </li><li class="list__item" id="8f9c7657"><p id="9b73b162">展开“ <span class="control">高级设置”</span>部分，并配置以下可选设置：</p>                    <div class="table-wrapper"><table width="100%" id="4c91e186"><thead><tr id="0ffcba56" class="ijRowHead"><th id="5a514bdd" width="20%"><p>设置</p></th><th id="7f277dcf"><p>描述</p></th></tr></thead><tbody><tr id="7694029f" class="ijRowOdd"><td id="49eaee20"><p>SSL密钥</p></td><td id="db0c76dd"><p>如果您的邮箱支持安全连接，请从下拉列表中选择一个SSL密钥。必须将SSL密钥导入YouTrack。有关说明，请参阅<a href="SSL-Key-Stores.html">SSL密钥</a> 。</p></td></tr><tr id="61b19f5b" class="ijRowEven"><td id="18981f5c"><p>连接超时</p></td><td id="6dac0de3"><p>设置在关闭连接之前等待从邮件服务器完成数据传输的最长时间。默认值设置为60秒。</p></td></tr><tr id="fa773fb5" class="ijRowOdd"><td id="41ba252b"><p>套接字超时</p></td><td id="8a6832a9"><p>设置在断开套接字连接之前等待邮件服务器响应的最长时间。默认值设置为60秒。</p></td></tr></tbody></table></div>                </li><li class="list__item" id="08c86233"><p>单击<span class="control">测试连接</span>按钮以验证配置。如果无法建立连接，请更正设置并再次测试连接。</p></li><li class="list__item" id="60d611e4"><p id="cb255d27">单击<span class="control">保存</span>按钮。</p>                    <ul class="list _ul"><li class="list__item" id="7523a4ba"><p>邮箱集成设置已保存。</p></li></ul></li></ol></section>            <p id="8cf0cd9b">重复这些步骤以将连接添加到其他邮件服务器。</p>        </div>        <div class="chapter"><h3 id="define-rules">定义邮箱规则</h3>            <p id="a46e83a8">现在，您已将YouTrack连接到邮件服务器，然后配置处理传入电子邮件的规则。</p>            <p id="bbce60c2">邮箱规则按顺序处理。</p>            <ul class="list _ul"><li class="list__item" id="1d7912f9"><p>如果消息与第一个规则中定义的过滤器匹配，则会根据该规则中定义的指令对其进行处理。该消息不会被任何后续规则视为要处理。</p></li><li class="list__item" id="bd204a0f"><p>如果该消息与第一个规则中定义的过滤器不匹配，则会根据第二个规则的条件对其进行评估，依此类推。</p></li><li class="list__item" id="271d2db2"><p>当消息与任何过滤器都不匹配时，将创建一个内部记录来注册该消息已被接收。没有采取进一步的行动。如果在邮箱规则中启用了相应的选项，则仍认为该邮件已被处理，并已从邮件服务器中删除。</p></li></ul>            <p id="58d867f3">您可以创建多个以不同方式处理邮件的邮箱规则。例如，您创建了一个规则，该规则在邮件正文中扫描诸如“过期”和“紧急”之类的单词，并自动设置问题的优先级。然后，您可以创建其他规则来处理不包含这些单词的消息。</p>            <section class="procedure-steps"><h3 id="define-rule-procedure">定义邮箱规则：</h3><aside class="prompt" rel="define-rule-procedure" id="b3ae46fc" data-type="tip" data-title=""><p>需要权限：低级管理员写</p></aside><ol class="list _decimal"><li class="list__item" id="3b6932f2"><p id="ae07b95f">在“ <span class="control">邮箱集成设置”</span>页面上，单击“ <span class="control">添加邮箱规则”</span>按钮。</p>                    <ul class="list _ul"><li class="list__item" id="e4bc41ce"><p>侧边栏中将打开“ <span class="control">规则”</span>对话框。</p><figure><a class="lightbox" href="/help/img/youtrack/2019.2/new-mailbox-rule.zoomed.png"><img alt="新邮箱规则" title="新邮箱规则" src="/help/img/youtrack/2019.2/new-mailbox-rule.png" id="53b8ec5d" width="600" height="295"></a></figure>                        <p></p></li></ul>                </li><li class="list__item" id="369e9fca"><p id="3cd59a85">输入以下设置的值：</p>                    <div class="table-wrapper"><table width="100%" id="d7669c0e"><thead><tr id="f766fb38" class="ijRowHead"><th id="b3cf6fe4" width="20%"><p>设置</p></th><th id="b7ff5768"><p>描述</p></th></tr></thead><tbody><tr id="51368fb8" class="ijRowOdd"><td id="c70463ed"><p>邮箱</p></td><td id="a70d2806"><p>选择YouTrack从中获取电子邮件的邮箱。</p></td></tr><tr id="34c18d10" class="ijRowEven"><td id="0ac148cd"><p>项目</p></td><td id="4b166af2"><p>选择分配给从传入电子邮件创建的问题的YouTrack项目。</p></td></tr><tr id="080a7fac" class="ijRowOdd"><td id="57873d23"><p>维护者</p></td><td id="0a2113f0"><p>选择负责集成的用户的用户名。当命令失败或无法解决问题报告程序时，维护人员会收到通知。默认情况下，创建规则的用户被设置为维护者。</p></td></tr></tbody></table></div>                </li><li class="list__item" id="836ccd71"><a name="Filter"></a><p id="34386bb7">单击以展开<span class="control">过滤器</span>设置。</p>                    <p id="9557306b">这些设置确定应从邮件服务器中提取哪些电子邮件。这些设置是可选的。如果要处理YouTrack中的所有传入电子邮件，请继续下一步。</p>                    <figure><a class="lightbox" href="/help/img/youtrack/2019.2/new-mailbox-rule-filter.zoomed.png"><img alt="邮箱规则过滤器选项" title="邮箱规则过滤器选项" src="/help/img/youtrack/2019.2/new-mailbox-rule-filter.png" id="339feaf1" width="600" height="344"></a></figure>                    <p id="0629f8a1">输入在新规则的此部分中显示的设置的值：</p>                    <div class="table-wrapper"><table width="100%" id="79e53ab0"><thead><tr id="52850477" class="ijRowHead"><th id="536e078f" width="40%"><p>设置</p></th><th id="a82162c7"><p>描述</p></th></tr></thead><tbody><tr id="bed4d306" class="ijRowOdd"><td id="f2090733"><p>夹</p></td><td id="98760baf"><p>选择一个文件夹以仅提取传递到该文件夹的电子邮件。如果未选择文件夹，则集成将从服务器中获取所有已被永久删除的电子邮件之外的所有电子邮件。这包括已发送，垃圾邮件和回收站文件夹中的邮件。因此，强烈建议您选择一个文件夹，例如“ <span class="control">收件箱”</span> 。</p></td></tr><tr id="1e03d82b" class="ijRowEven"><td id="5b466d62"><p>“收件人”或“抄送”地址</p></td><td id="3b89be6a"><p id="06027744">输入电子邮件地址，仅提取发送到该地址的电子邮件。使用时，YouTrack仅将此邮箱规则应用于直接发送到指定收件人或作为抄送（CC）发送的邮件。</p>                                <p id="62be5226">如果您在此处设置一个值，请使用与设置为此邮箱规则的<span class="control">项目</span>的项目中的“ <span class="control">发件人”地址</span>相同的电子邮件地址。否则，对邮箱集成发送的邮件的答复不会作为注释添加到问题中。</p>                                <p id="a3c02c29">要处理指定文件夹中的所有电子邮件，请将此字段保留为空。</p></td></tr><tr id="58d264f2" class="ijRowOdd"><td id="9bd641b3"><p>不要丢弃方括号中的内容</p></td><td id="22950175"><p>启用以将在方括号中设置的文本包括在YouTrack处理的问题和评论中。</p></td></tr><tr id="3a87964e" class="ijRowEven"><td id="4390c038"><p>忽略自动回复</p></td><td id="984b4c5b"><p>启用以忽略作为自动回复从YouTrack服务器发送的邮件发送的电子邮件。此设置可防止您在收到自动外出答复时向问题添加评论。</p></td></tr><tr id="2dea2626" class="ijRowOdd"><td id="4e3b1489"><p>按模式过滤消息</p></td><td id="c288fc25"><p id="375471ad">输入要在邮件主题或文本中搜索的模式。您可以将模式写为<a href="http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html" rel="noopener noreferrer" data-external="true" target="_blank">正则表达式</a> 。如果在邮件主题或文本中检测到该模式，则将忽略电子邮件。</p>                                <p id="b80bb47c">在输入字段的不同行上输入多个模式。</p></td></tr></tbody></table></div>                </li><li class="list__item" id="37c10aeb"><p id="893ebfce">单击以展开“ <span class="control">记者”</span>设置。这些设置定义将哪个用户设置为从传入电子邮件中处理的每个问题的报告者。</p>                    <figure><a class="lightbox" href="/help/img/youtrack/2019.2/new-mailbox-rule-reporter.zoomed.png"><img alt="邮箱规则报告者选项" title="邮箱规则报告者选项" src="/help/img/youtrack/2019.2/new-mailbox-rule-reporter.png" id="163e5d1e" width="600" height="369"></a></figure>                    <p id="2ac37acd">选择以下选项之一：</p>                    <div class="table-wrapper"><table width="100%" id="16e3eb8f"><thead><tr id="c92dc064" class="ijRowHead"><th id="6e6bae57" width="40%"><p>选项</p></th><th id="0b6251a6"><p>描述</p></th></tr></thead><tbody><tr id="8d7aa1ed" class="ijRowOdd"><td id="38b6b839"><p>将电子邮件发件人设置为记者。如果在YouTrack中找不到此类用户，请为发件人创建新帐户</p></td><td id="49f57173"><p id="96a8b169">YouTrack尝试查找一个电子邮件地址与电子邮件作者匹配的用户帐户。如果找不到现有帐户，则会创建一个新的用户帐户。创建问题时，将在通知消息中将访问YouTrack的凭据发送给作者。</p>                                <aside class="prompt" rel="96a8b169" id="89ca81b2" data-type="warning" data-title="">                                    <p id="df9ae609">根据您的订阅计划为新用户分配了许可证。如果您已达到每个用户的许可证限制，则会将用户标记为已禁止。</p>                                    <p id="62285a7e">有关更多信息，请参见<a href="Ban-User-Accounts.html">禁止用户帐户</a> 。</p>                                </aside>                            </td></tr><tr id="b89b2bfa" class="ijRowEven"><td id="b09542f4"><p>将电子邮件发件人设置为记者。如果在YouTrack中找不到此类用户，请将默认用户设置为报告者</p></td><td id="3f438161"><p>YouTrack尝试查找一个电子邮件地址与电子邮件作者匹配的用户帐户。如果找不到现有帐户，则将默认用户帐户设置为报告者。从<span class="control">默认用户</span>下拉列表中选择一个现有的用户帐户。</p></td></tr><tr id="7d2e0ede" class="ijRowOdd"><td id="4e82c0fc"><p>始终将预定义用户设置为报告者</p></td><td id="01f5ec6b"><p>启用后，YouTrack会自动将指定用户设置为从传入电子邮件中创建的所有问题的报告者。</p></td></tr></tbody></table></div>                </li><li class="list__item" id="9ffd8a4e"><p id="ba89eee1">单击以展开<span class="control">后处理</span>设置。这些设置定义了YouTrack处理来自传入电子邮件的问题和评论的方式。这些设置是可选的。如果您不想自动更新YouTrack处理的问题，请继续下一步。</p>                    <figure><a class="lightbox" href="/help/img/youtrack/2019.2/new-mailbox-rule-postprocessing.zoomed.png"><img alt="邮箱规则后处理选项" title="邮箱规则后处理选项" src="/help/img/youtrack/2019.2/new-mailbox-rule-postprocessing.png" id="53dbaf45" width="600" height="297"></a></figure>                    <p id="e5683984">输入在新规则的此部分中显示的设置的值：</p>                    <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="6790c48b"><thead><tr id="6417e846" class="ijRowHead"><th id="58d309e1" width="40%"><p>设置</p></th><th id="2af6aa6d"><p>描述</p></th></tr></thead><tbody><tr id="4e4f6b77" class="ijRowOdd"><td id="8d21f411"><p>将命令应用于新问题</p></td><td id="8e848f5e"><p id="168978d7">输入命令以自动应用于从传入电子邮件中创建的所有问题。您可以插入占位符，以引用存储在电子邮件中的值。例如：</p>                                <div class="code-block" data-lang="none">为[用户] fromMail $ {from}</div>                                <p id="b3df62a3">此命令将以下更改应用于通过传入电子邮件创建的任何问题</p>                                <ul class="list _ul"><li class="list__item" id="541ae869"><p>该问题已分配给指定的用户。</p></li><li class="list__item" id="231af462"><p>自定义字段<span class="control">fromMail的</span>值设置为消息作者的电子邮件地址。</p></li></ul>                                <p id="7f037bb6">有关详细信息，请参见<a href="#placeholders">占位符</a> 。</p></td></tr><tr id="ec761bc0" class="ijRowEven"><td id="0969c2df"><p>在新评论上应用命令</p></td><td id="c1f83b8b"><p>输入命令，以便在收到的电子邮件中将注释添加到问题时自动应用。您也可以在这些命令中使用占位符。有关详细信息，请参见<a href="#placeholders">占位符</a> 。</p></td></tr><tr id="8d99356a" class="ijRowOdd"><td id="1b47eae9"><p>将收件人添加为观察者</p></td><td id="7778b41d"><p>启用可添加电子邮件地址包含在其中的用户<code class="code">To:</code>和<code class="code">CC:</code>电子邮件的“字段”，以监视从传入电子邮件中创建的问题。</p></td></tr><tr id="140e833f" class="ijRowEven"><td id="d6402205"><p>删除邮箱中提取的邮件</p></td><td id="307995d4"><p>在YouTrack中创建相应的问题后，启用此选项可从邮件服务器删除所有邮件。</p></td></tr><tr id="e98bbbfa" class="ijRowOdd"><td id="63448a98"><p>原始时间戳记（仅适用于IMAP）</p></td><td id="dd41b289"><p>启用可将问题的创建日期或注释设置为原始电子邮件的时间戳。否则，创建日期将设置为YouTrack处理电子邮件的日期和时间。</p></td></tr><tr id="f26e6fce" class="ijRowEven"><td id="d7b3a3e0"><p>如果可以的话，建议使用纯文本作为问题描述</p></td><td id="e4596918"><p id="bb45642f">启用以在收到的邮件包含电子邮件的纯文本版本时将邮件的纯文本版本用于问题描述。如果没有纯文本版本，则包装来自消息的HTML版本的内容<code class="code">{html}</code>标记，以YouTrack Wiki语法格式化，并用于问题描述。</p></td></tr></tbody></table></div>                </li><li class="list__item" id="fdad1041"><p id="612f206c">单击<span class="control">保存</span>按钮。</p>                    <ul class="list _ul"><li class="list__item" id="6f6591d5"><p>邮箱规则的设置已保存。</p></li></ul></li></ol></section>        </div>    </div>    <div class="chapter"><h2 id="placeholders" data-toc="Mailbox-Integration#placeholders">占位符</h2>        <p id="a95d0179">您可以在邮箱规则的“ <span class="control">后处理”</span>设置中使用占位符。这些占位符引用原始电子邮件中的属性。由YouTrack处理时，占位符将替换为消息中的相应值。可以使用以下占位符：</p>        <div class="table-wrapper"><table width="100%" id="adad196a"><thead><tr id="911fff00" class="ijRowHead"><th id="5c5e8dd6" width="20%"><p>占位符</p></th><th id="9329f5b0"><p>描述</p></th></tr></thead><tbody><tr id="735926a7" class="ijRowOdd"><td id="8bf5ac94"><p>$ {from}</p></td><td id="445b103e"><p>消息作者的电子邮件地址。</p></td></tr><tr id="91d1b0dd" class="ijRowEven"><td id="1d874a85"><p>$ {回复}</p></td><td id="b61c7497"><p>存储在<code class="code">Reply-To:</code>电子邮件标题的字段。这是自动插入到<code class="code">To:</code>收件人回复电子邮件时的字段。</p></td></tr><tr id="77ae3cad" class="ijRowOdd"><td id="06b253c6"><p>$ {to}</p></td><td id="828aa488"><p>在“收件人”中输入的所有邮件收件人的电子邮件地址<code class="code">To:</code>电子邮件的字段。</p></td></tr><tr id="b495fd61" class="ijRowEven"><td id="64f538fd"><p>$ {cc}</p></td><td id="7d1f1277"><p>在“收件人”中输入的所有邮件收件人的电子邮件地址<code class="code">CC:</code>电子邮件的字段。</p></td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="troubleshooting" data-toc="Mailbox-Integration#troubleshooting">故障排除</h2>        <p id="129bdf59">如果您在设置邮箱集成时遇到问题，请查看以下条件是否适用。</p>        <div class="table-wrapper"><table width="100%" id="89830fe1"><thead><tr id="bc811569" class="ijRowHead"><th id="d7e2ac9b" width="10%"><p>条件</p></th><th id="d8046041"><p>您无法建立与邮件服务器的连接。</p></th></tr></thead><tbody><tr id="f277865b" class="ijRowOdd"><td id="38d25b48"><p>原因</p></td><td id="e03e67e0"><p>外部服务不可用。</p></td></tr><tr id="39360dab" class="ijRowEven"><td id="379536ca"><p>解</p></td><td id="4aaaeebd"><p>验证您的邮件服务器正在运行。</p></td></tr><tr id="cc0019cc" class="ijRowOdd"><td id="4624d31f"><p>原因</p></td><td id="3d1735e5"><p>连接被防火墙阻止。</p></td></tr><tr id="94e20f2a" class="ijRowEven"><td id="974fd18f"><p>解</p></td><td id="f8b8d0d5"><p>打开防火墙中由YouTrack和邮件服务器使用的端口。</p></td></tr><tr id="0ec3ee0b" class="ijRowOdd"><td id="2af3258f"><p>原因</p></td><td id="1cffd1c4"><p id="56118e7a">代理服务器阻止了与外部服务的连接。</p>                    <p id="2c230c27">您正在尝试通过错误的端口进行连接。</p></td></tr><tr id="610441c2" class="ijRowEven"><td id="fb5fe6d6"><p>解</p></td><td id="9b09c956"><p>设置服务器的系统属性，以使YouTrack通过代理服务器连接到其他服务。有关说明，请参阅<a href="Proxy-Configuration.html">代理配置</a> 。</p></td></tr><tr id="53ec31bd" class="ijRowOdd"><td id="2714d866"><p>原因</p></td><td id="204e8b5f"><p>邮件服务器需要安全连接。</p></td></tr><tr id="bd1ab997" class="ijRowEven"><td id="3cf6cd19"><p>解</p></td><td id="902fe81a"><p>将您的邮件服务器的证书导入到YouTrack中。有关说明，请参阅<a href="SSL-Certificates.html">SSL证书</a> 。</p></td></tr><tr id="02336486" class="ijRowOdd"><td id="e0a95f3d"><p>原因</p></td><td id="4e42a413"><p>您用于邮件服务器的SSL证书已过期。</p></td></tr><tr id="aa32290c" class="ijRowEven"><td id="45e1e957"><p>解</p></td><td id="c542f967"><p>续订并将更新的证书导入到YouTrack中。有关说明，请参阅<a href="SSL-Certificates.html">SSL证书</a> 。</p></td></tr><tr id="9ed820f6" class="ijRowOdd"><td id="4d8a617c"><p>原因</p></td><td id="840b6508"><p>您正在尝试连接到Exchange邮箱，并且邮件服务器或YouTrack中存在配置问题。</p></td></tr><tr id="c1efe5e1" class="ijRowEven"><td id="6b4d11d7"><p>解</p></td><td id="64c318af"><p id="fc730cdc">检查以下安装要求：</p>                <ul class="list _ul"><li class="list__item" id="98b95910"><p>请确保您的Exchange邮箱配置描述为使用POP / POPS或IMAP / IMAPS和验证通过SMTP <a href="#microsoft-exchange">这里</a> 。</p></li><li class="list__item" id="721417f2"><p>验证邮箱集成中的“协议<span class="control">”</span>设置与为您的Exchange邮箱启用的协议匹配。</p></li><li class="list__item" id="d7458f1d"><p>启用<span class="control">MS Exchange兼容模式</span>复选框。</p></li></ul>                    <p id="eeffb01d">如果仍然无法建立连接，请<a href="https://youtrack-support.jetbrains.com/hc/en-us" rel="noopener noreferrer" data-external="true" target="_blank">提交支持请求</a> 。</p></td></tr></tbody></table></div>        <div class="table-wrapper"><table width="100%" id="ccb32f81"><thead><tr id="03695a3a" class="ijRowHead"><th id="ba2c1dfa" width="10%"><p>条件</p></th><th id="a9e73fac"><p>您无法通过不安全的协议建立与邮件服务器的连接。YouTrack返回错误<code class="code">bad_request</code> 。</p></th></tr></thead><tbody><tr id="c3c9e83d" class="ijRowOdd"><td id="04836165"><p>原因</p></td><td id="677db1c7"><p>您的IMAP或POP3服务器使用了启用STARTTLS的扩展。 YouTrack需要与邮件服务器的安全连接。</p></td></tr><tr id="244ce909" class="ijRowEven"><td id="fddf9055"><p>解</p></td><td id="6f45df82"><p>将邮件服务器的SSL证书导入到YouTrack中。有关说明，请参阅<a href="SSL-Certificates.html">SSL证书</a> 。如果YouTrack和邮件服务器都在专用计算机网络上运行，则可以为邮件服务器生成并导入自签名SSL证书。</p></td></tr></tbody></table></div>        <div class="table-wrapper"><table width="100%" id="6be900dd"><thead><tr id="26ffa4e8" class="ijRowHead"><th id="8ee35b88" width="10%"><p>条件</p></th><th id="5de5f935"><p>传入的电子邮件不会在YouTrack中转换为问题。</p></th></tr></thead><tbody><tr id="2dbd2471" class="ijRowOdd"><td id="3b0c4617"><p>原因</p></td><td id="e318cce7"><p>设置为从传入电子邮件中处理的问题的报告者的用户无权在项目中创建问题。</p></td></tr><tr id="bd335b48" class="ijRowEven"><td id="14a8eb8c"><p>解</p></td><td id="c1902334"><p id="588d318f">检查<span class="control">Reporter</span>设置中的邮箱规则。</p>                    <ul class="list _ul"><li class="list__item" id="84a11064"><p>如果将电子邮件发件人设置为记者，请为与邮箱连接的项目的“ <span class="control">所有用户”</span>或“ <span class="control">注册用户”</span>组授予“ <span class="control">记者”</span>角色。</p></li><li class="list__item" id="852b32ba"><p>如果将默认或预定义用户设置为记者，请在与邮箱连接的项目中向该用户授予“ <span class="control">记者”</span>角色。</p></li></ul>              </td></tr></tbody></table></div>        <div class="table-wrapper"><table width="100%" id="0b09ec59"><thead><tr id="f239abdf" class="ijRowHead"><th id="286cf7a3" width="10%"><p>条件</p></th><th id="ad67ec84"><p>传入的电子邮件将转换为YouTrack中的问题。传入回复不会添加为注释。</p></th></tr></thead><tbody><tr id="1981dd15" class="ijRowOdd"><td id="95b19376"><p>原因</p></td><td id="a74a80ea"><p>项目设置中的“ <span class="control">发件人”地址</span>使用的电子邮件地址未被邮箱规则处理或未设置。从发送到邮件服务器的邮件中创建了新的问题，但是对传入邮件的答复是从另一个地址发送的。对这些消息的答复不会发送到为邮箱集成配置的邮件服务器。</p></td></tr><tr id="2f61d572" class="ijRowEven"><td id="0d0260cf"><p>解</p></td><td id="84c13b59"><p id="b444edad">将您的邮箱规则设置中选择的项目的“ <span class="control">发件人”地址</span>设置为邮箱集成处理的地址。</p>                <p id="c3ab134f">检查您的邮箱规则的“ <span class="control">过滤器”</span>设置。如果您设置<span class="control">“收件人”地址</span> ，请使用与设置为该邮箱规则的<span class="control">项目</span>的项目中的“ <span class="control">发件人”地址</span>相同的电子邮件地址。</p></td></tr></tbody></table></div>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="importing-from-jira.html">从Jira导入</a> <a class="navigation-links__next" href="Use-YouTrack-as-a-Help-Desk.html">将YouTrack用作服务台</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>