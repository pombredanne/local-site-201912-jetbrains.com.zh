<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Mailbox Integration - Help | YouTrack Standalone</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Mailbox-Integration" data-breadcrumbs="Administration.xml|Administration/Integrations.xml|Integrations/Mailbox-Integration.xml|Mailbox Integration/Use-YouTrack-as-a-Help-Desk.xml|Use YouTrack as a Help Desk/Track-Email-Feedback-with-YouTrack.xml|Track Email Feedback" data-main-title="Mailbox Integration"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search YouTrack Standalone Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Mailbox-Integration" id="Mailbox-Integration.xml">Mailbox Integration</h1>    <a name="Mailbox_Integration"></a>    <p id="aab40861">The <span class="control">Mailbox Integration</span> transforms incoming email messages into issues and comments in YouTrack.</p>    <div class="chapter"><h2 id="message-processing" data-toc="Mailbox-Integration#message-processing">Message Processing</h2>        <p id="eccd380e">This integration pulls email messages from a connected mail server. Each message is parsed and analyzed by YouTrack.            The messages are processed according to the mailbox rules that are defined for the project.</p>        <div class="chapter"><h3 id="mailbox-integration-new-issues">New Issues</h3>            <p id="892d566d">If YouTrack cannot find any values that associate an incoming message with an existing issue, a new issue is created.                YouTrack uses the following information from an email message to create a new issue:</p>            <ul class="list _ul"><li class="list__item" id="783c3476"><p>The message subject is copied to the issue summary.</p></li><li class="list__item" id="1b2c1281"><p>The message body is copied to the issue description.</p></li><li class="list__item" id="dead8168"><p>The mailbox rule that processes the email message determines which user is set as the reporter.                    The reporter can either be the message author or a default user.</p></li></ul>            <p id="bfaefe75">Like any issue that is created manually, YouTrack assigns the issue an ID in the selected project.</p>        </div>        <div class="chapter"><h3 id="mailbox-integration-comments">Comments</h3>            <a name="threading"></a>            <p id="2b173522">When YouTrack detects that an incoming message is related to an existing issue, the body of the message is added to the issue as a comment.                YouTrack matches an incoming message to an existing issue under the following conditions:</p>            <ul class="list _bullet"><li class="list__item" id="9fa3d64d"><p id="a08733c2">The values for the <code class="code">message-id</code>/<code class="code">in-reply-to</code> properties in the message header match a previously processed email message.                    This is a standard method of parsing MIME-encoded messages.                    YouTrack uses these values to thread comments when a recipient replies to notifications that are sent when an issue is created or updated in the project.</p>                    <p id="815608e6">If you move an issue to another project, the reply to a related message is processed as a new issue in the connected project, not as a comment in the original issue.</p></li><li class="list__item" id="958ae584"><p>The message subject contains the ID of an issue in the same project.</p></li></ul>        </div>        <div class="chapter"><h3 id="mailbox-integration-related-issues">Related Issues</h3>            <p id="d125f53e">In situations where the subject of an incoming message matches the summary of an existing issue, but the message does not contain any of the values that associate it with an existing issue a new issue is created.                YouTrack processes these messages as follows:</p>            <ul class="list _ul"><li class="list__item" id="926938db"><p>The prefixes that are added to forwarded messages and replies (FW:, RE:) are ignored.</p></li><li class="list__item" id="c3a755fa"><p>If the option in the mailbox rule is enabled, text that is set in square brackets is also ignored.</p></li><li class="list__item" id="70c54e25"><p>YouTrack creates an issue and sets the message subject (minus the text strings that are ignored) as the issue summary.</p></li><li class="list__item" id="fe0e5474"><p>YouTrack finds the issue with the same summary that has the lowest ID number and adds a <span class="control">relates to</span> link to it.</p></li></ul>        </div>    </div>    <div class="chapter"><h2 id="enable-mailbox-integration" data-toc="Mailbox-Integration#enable-mailbox-integration">Setup</h2>        <p id="13e0e114">To process incoming email messages as issues in YouTrack, you must first enable and configure the Mailbox integration.</p>        <p id="a52108ec">This procedure requires the following steps:</p>        <ol class="list _decimal"><li class="list__item" id="d891bdb0"><p><a href="#configure-project">Configure the project that you want to use to manage issues that are created by the integration</a>.</p></li><li class="list__item" id="5c2e8925"><p><a href="#fetch-email">Set the schedule for fetching email messages</a>.</p></li><li class="list__item" id="b98494e5"><a href="#import-trusted-certificates-mail-server">Import the trusted certificates for your mail server into YouTrack.</a> </li><li class="list__item" id="3f98502a"><p><a href="#connect-to-mail-server">Connect to a mail server</a>.</p></li><li class="list__item" id="6aa0b1d8"><p><a href="#define-rules">Define the rules that are applied to incoming email messages</a>.</p></li></ol>        <div class="chapter"><h3 id="configure-project">Configure Your Project</h3>            <p id="7d51d4a6">Before you start, create a project or configure an existing project to manage issues that are created by the mailbox integration.            Later in this setup, you create a mailbox rule that references the project.</p>            <p id="aa7315c6">To configure a project for use with the mailbox integration, set the <span class="control">From address</span> to the email address that you want to use to send emails.            This setting overrides the global <span class="control">From address</span> that is used for generic notifications.            Setting this value in your project lets you manage incoming and outgoing messages with a dedicated email address.</p>            <p id="13e3db10">You also have the option to set the <span class="control">Reply-to address</span> for notifications in your project.                Use this setting when, for example, the address that you use to send email notifications cannot receive replies.</p>            <section class="procedure-steps"><h3 id="email-procedure">To set the email addresses for an existing project:</h3><aside data-type="tip" class="prompt" data-title="" rel="email-procedure" id="8254d125"><p>Requires permissions: Update Project</p></aside><ol class="list _decimal"><li class="list__item" id="642f9756"><p>Click the <span class="control">Projects</span> link in the header.</p></li><li class="list__item" id="48a288fd"><p>Select the project from the list.</p></li><li class="list__item" id="a277b09a"><p id="5b9bbdc7">Click the <span class="control">Edit project</span> link.</p>                <ul class="list _ul"><li class="list__item" id="96bc7df5"><p>The <span class="control">Edit Project</span> page opens.</p></li></ul></li><li class="list__item" id="db093bba"><p>In the <span class="control">From address</span> input field, enter the email address that you want to use to send emails.</p></li><li class="list__item" id="8f091364"><p>Optionally, enter the email address that you want to receive replies in the <span class="control">Reply-to address</span> field.</p></li></ol></section>        </div>        <div class="chapter"><h3 id="fetch-email">Set the Schedule for Fetching Email Messages</h3>            <p id="07c2d863">YouTrack fetches email messages from the specified mail servers according to a schedule. The default interval is every hour.                You can change the schedule to a predefined interval or specify a custom interval with a cron expression.                The schedule is <i id="b3fbf040">not</i> set independently for multiple mail servers.                The same schedule is applied to all mail servers that are integrated with the YouTrack server.</p>            <section class="procedure-steps"><h3 id="fetch-procedure">To specify an interval for fetching email messages:</h3><aside data-type="tip" class="prompt" data-title="" rel="fetch-procedure" id="b1be20fc"><p>Requires permissions: Low-level Admin Write</p></aside><ol class="list _decimal"><li class="list__item" id="2bc81bdf"><p>In the <span class="control">Integrations</span> section of the <span class="control">Administration</span> menu, select <span class="control">Mailbox Integration</span>.</p></li><li class="list__item" id="f36234b1"><p id="23863a60">From the <span class="control">Fetching interval</span> drop-down menu, select a pre-configured time interval.                    To specify another time interval, select <span class="control">Custom</span> and enter a cron expression.                    For example, to pull fresh data every 45 minutes, every day, use the following expression: <div class="code-block" data-lang="shell">0 0/45 * * * ?</div></p>                    <p id="3e89497f">For details about cron expressions format, please refer to the <a href="http://www.quartz-scheduler.org/documentation/quartz-2.3.0/tutorials/crontrigger.html" data-external="true" target="_blank" rel="noopener noreferrer">cron trigger tutorial</a>.</p></li></ol></section>        </div>        <div class="chapter"><h3 id="import-trusted-certificates-mail-server">Import Trusted Certificates from Your Mail Server</h3>            <aside data-type="note" class="prompt" data-title="" rel="import-trusted-certificates-mail-server" id="8e936c2a">                <p id="2fbf73c0">Mail servers that use unsecured protocols like IMAP and POP3 may have an extension that enables <a href="https://en.wikipedia.org/wiki/Opportunistic_TLS" data-external="true" target="_blank" rel="noopener noreferrer">opportunistic TLS</a>.                    For security, YouTrack connects to a mail server over STARTTLS whenever it is available.</p></aside>            <p id="233ee116">Your mail server may require that you establish a secure connection over SSL.                Before you can add your hosted server to YouTrack, you may need to import its SSL certificate.</p>            <ul class="list _ul"><li class="list__item" id="07e2b663"><p>If your mail server has a valid certificate that is signed by a well-known certificate authority (CA), the public key and certificate are already stored in the web browser.                    You should be able to connect to your mail server without importing its SSL certificate.</p></li><li class="list__item" id="78c3e7e0"><p>If the certificate for your mail server is self-signed, you need to import the certificate and public key to establish a secure connection.</p></li></ul>            <section class="procedure-steps"><h3 id="secure-procedure">To enable a secure connection between YouTrack and your mail server:</h3><aside data-type="tip" class="prompt" data-title="" rel="secure-procedure" id="5708f187"><p>Requires permissions: Low-level Admin Write</p></aside><ol class="list _decimal"><li class="list__item" id="5952e2ce"><p>Export the certificate and public key for your mail server as a DER-encoded file.                    These files use the .der, .cer, and .crt extensions.</p></li><li class="list__item" id="38e0cf2e"><p>In the <span class="control">Server Settings</span> area of the <span class="control">Administration</span> menu, select <span class="control">SSL Certificates</span></p></li><li class="list__item" id="f1ff2bf3"><p>Click the <span class="control">Import trusted certificate</span> button.</p></li><li class="list__item" id="1b000216"><p>In the <span class="control">Import Trusted Certificate</span> dialog, enter a name for the certificate.</p></li><li class="list__item" id="6669c6b6"><p id="b1cb4399">Click the <span class="control">Choose file</span> button and select the certificate file from your local directory.</p>                    <figure><a class="lightbox" href="/help/img/youtrack/2019.2/import-trusted-certificate.zoomed.png"><img alt="Import trusted certificate dialog" title="Import trusted certificate dialog" src="/help/img/youtrack/2019.2/import-trusted-certificate.png" id="13dca300" width="600" height="254"></a></figure>                </li><li class="list__item" id="93d107b6"><p id="923861ea">Click the <span class="control">Import</span> button.</p>                    <ul class="list _ul"><li class="list__item" id="346fcda7"><p>The certificate for your mail server is added to YouTrack.</p></li></ul></li></ol></section>        </div>        <div class="chapter"><h3 id="connect-to-mail-server">Connect to a Mail Server</h3>            <p id="fb872294">To enable the integration, you need to connect to one or more mail servers.</p>            <ul class="list _ul"><li class="list__item" id="66aa6d95"><p>For mail servers that use POP/POPS or IMAP/IMAPS, <a href="#connect-to-mail-server-procedure">follow these instructions</a>.</p></li><li class="list__item" id="f53251f4"><p>For Microsoft Exchange and Office 365 mailboxes, additional setup is required.                Read the instructions that follow and configure your mail service to be compatible with this integration.</p></li><li class="list__item" id="60b2c7c4"><p>For Gmail, there are special requirements for the account that you use to connect to the mail server.                    For details, see <a href="#smtp-settings-gmail-server">Special Requirements for Connecting to Gmail</a>.</p></li></ul>            <div class="chapter"><h4 id="microsoft-exchange">Connections to Microsoft Exchange and Office 365 Mailboxes</h4>            <p id="83d86b9e">The mailbox integration only supports POP/POPS and IMAP/IMAPS.                The default protocol for Microsoft Exchange, MAPI, is not supported.                If you want to connect to a Microsoft Exchange Server, you have two options:</p>            <ul class="list _ul"><li class="list__item" id="43164906"><p id="8de7b0c7">Enable and configure either POP or IMAP on the Exchange Server, then configure the authenticated SMTP settings.                    With these mail connectors enabled, you can follow the instructions below and establish a connection.</p>                    <p id="16f3d306">Pay attention to the special instructions for <span class="control">Microsoft Exchange</span> mailboxes.</p></li><li class="list__item" id="572a0331"><p id="6a238a70">Establish a connection through an intermediate gateway server.                    This lets you connect to the Exchange Server with POP/IMAP and SMTP disabled.                    The DavMail exchange gateway, for example, converts proprietary Exchange formats into email protocols that YouTrack understands.                    For setup instructions, refer to the <a href="http://davmail.sourceforge.net/serversetup.html" data-external="true" target="_blank" rel="noopener noreferrer">DavMail Gateway documentation</a>.</p>                    <p id="c74515bc">With this setup, follow the instructions below to establish a connection to the gateway server.</p></li></ul>                <p id="d1b8e5d1">For Microsoft Exchange and Office 365, the mailbox integration supports connections to shared mailboxes.                You can use the login and password of any user who is a member of the shared mailbox to authenticate.</p>        </div>            <div class="chapter"><h4 id="smtp-settings-gmail-server">Special Requirements for Connecting to Gmail</h4>                <p id="8e8ba556">Google accounts have settings that restrict access to third-party applications that use less secure sign-in technology.                    By their definition, this applies to connections that authenticate with a username and password, which are vulnerable to hijacking.</p>                <p id="98ee9c55">The setup requirements are based on the current setting for managing less secure apps.                    The requirements apply to the Google account that you use to authenticate with the Gmail server.</p>                <p id="1e56eec4">If you're connecting with a Google account that you manage yourself, the following options are available:</p>                <ul class="list _ul"><li class="list__item" id="8d4bfa25"><p id="74f8f1d5">Generate an application-specific password (App Password) in your Google account and use it for authentication.                        Leave the option to enable access for less secure apps in your Google account <span class="control">Off</span>.</p>                        <p id="180a09ed">App Passwords can only be used with accounts that have 2-Step Verification turned on.</p></li><li class="list__item" id="df8b9f3e"><p>Enable <span class="control">Less secure app access</span> for your Google account and connect using your username and password (not recommended).</p></li></ul>                <p id="3b91ade6">If you use a Google account that is managed by your organization as part of G Suite, verify which of the following settings is currently enabled for your domain.</p>                <div class="table-wrapper"><table width="100%" id="d72e3748"><thead><tr id="c7f78678" class="ijRowHead"><th id="740a5744"><p>Setting</p></th><th id="7cf7aa49"><p>Requirements</p></th></tr></thead><tbody><tr id="c093892e" class="ijRowOdd"><td id="07794379"><p>Disable access to less secure apps for all users</p></td><td id="b9d6cb5f"><p id="382efa97">The Google account that you store in the mailbox integration settings must have 2-Step Verification enabled.                            To connect to the Gmail server with this account, generate an application-specific password in your Google account.</p>                            <ul class="list _ul"><li class="list__item" id="6068a4b3"><p>For the <span class="control">Login</span>, enter the username for your Google account.</p></li><li class="list__item" id="638fc2ff"><p>For the <span class="control">Password</span>, enter an application-specific password that you generated in Google.</p></li></ul>                        </td></tr><tr id="08fd9775" class="ijRowEven"><td id="ad62f527"><p>Allow users to manage their access to less secure apps</p></td><td id="1b0f61e5"><p id="016337cb">You may be able to connect to the Gmail server with your Google username and password.                            This setup is only available when:</p>                            <ul class="list _ul"><li class="list__item" id="ebf1f47f"><p>You have enabled the option to allow access to less secure apps in the Google account that you use to connect to the Gmail service.</p></li><li class="list__item" id="26ed2a1c"><p>You have not enabled 2-Step Verification for this Google account.</p></li></ul>                            <p id="579cf6f6">If you have enabled 2-Step Verification for this Google account, you need to generate and use an application-specific password.                                Configure the mailbox integration settings as if access to less secure apps were disabled.</p></td></tr></tbody></table></div>            </div>            <section class="procedure-steps"><h3 id="connect-to-mail-server-procedure">To connect to a mail server:</h3><aside data-type="tip" class="prompt" data-title="" rel="connect-to-mail-server-procedure" id="d6bc750c"><p>Requires permissions: Low-level Admin Write</p></aside><ol class="list _decimal"><li class="list__item" id="718d86cd"><p id="2c2e0142">On the <span class="control">Mailbox Integration Settings</span> page, click the <span class="control">Add New Mail Server</span> link.</p>                    <ul class="list _ul"><li class="list__item" id="42ad1f7d"><p>The <span class="control">Mailbox</span> dialog opens in the sidebar.                            <figure><a class="lightbox" href="/help/img/youtrack/2019.2/connect-to-mail-server.zoomed.png"><img alt="connect to a mail server" title="connect to a mail server" src="/help/img/youtrack/2019.2/connect-to-mail-server.png" id="bbc441fd" width="600" height="369"></a></figure>                        </p></li></ul>                </li><li class="list__item" id="5e7582d9"><p id="fa0022f1">Enter values for the following settings:</p>                    <div class="table-wrapper"><table width="100%" id="073ee297"><thead><tr id="f0305226" class="ijRowHead"><th id="479a0372" width="20%"><p>Setting</p></th><th id="8dd696f5"><p>Description</p></th></tr></thead><tbody><tr id="bfd0e265" class="ijRowOdd"><td id="1c5c80f4"><p>Protocol</p></td><td id="99039267"><p id="eacc760f">Select the protocol that is used by the mail server.                                The mailbox integration supports the POP/POPS and IMAP/IMAPS protocols.</p>                                <aside data-type="note" class="prompt" data-title="" rel="eacc760f" id="ba6d933b">                                    <p id="0232b7f3">To connect to a Microsoft Exchange or Microsoft Office 356 mailbox, you must first configure your mail service to support either POP/POPS or IMAP/IMAPS as described <a href="#microsoft-exchange">here</a>.</p>                                    <p id="4bcca76c">To ensure that the protocol is recognized correctly, enable the <span class="control">MS Exchange compatibility mode</span> checkbox.</p>                                </aside>                              </td></tr><tr id="8ba70a71" class="ijRowEven"><td id="8ad7a638"><p>Host</p></td><td id="7f3fe945"><p>Enter the URL of the mail server. For example, <code class="code">mail.jetbrains.com</code>.</p></td></tr><tr id="1e0c4807" class="ijRowOdd"><td id="41f7de5f"><p>Port</p></td><td id="4cedd1a5"><p>Enter the port that the mail server listens to.                                The default port is set automatically when you select the mail server protocol.</p></td></tr><tr id="7bd3c6e9" class="ijRowEven"><td id="ade56c0d"><p>Login</p></td><td id="dff1e955"><p id="aae1df57">Enter the username of the account that authorizes access to the mail server.</p>                                <aside data-type="note" class="prompt" data-title="" rel="aae1df57" id="f7afecde">                                    <p id="66784743">For Microsoft Exchange and Office 365, the mailbox integration supports connections to shared mailboxes.                                        Enter the login for any user who is a member of the shared mailbox.                                        Use the syntax <code class="code">email address/shared mailbox name</code>.</p>                                    <p id="0e2fa4ee">To ensure that the authorization request handled correctly, enable the <span class="control">MS Exchange compatibility mode</span> checkbox below the <span class="control">Protocol</span> setting.</p>                                </aside>                                <aside data-type="note" class="prompt" data-title="" rel="dff1e955" id="cda48228">                                    <p id="b76be647">If you're connecting to Gmail, additional security requirements may apply.                                        For details, see <a href="#smtp-settings-gmail-server">Special Requirements for Connecting to Gmail</a>.</p>                                </aside>                            </td></tr><tr id="15fd0e02" class="ijRowOdd"><td id="b30534c4"><p>Password</p></td><td id="6fe01b5e"><p>Enter the password of the login user account.</p></td></tr></tbody></table></div>                </li><li class="list__item" id="8f9c7657"><p id="9b73b162">Expand the <span class="control">Advanced settings</span> section and configure the following optional settings:</p>                    <div class="table-wrapper"><table width="100%" id="4c91e186"><thead><tr id="0ffcba56" class="ijRowHead"><th id="5a514bdd" width="20%"><p>Setting</p></th><th id="7f277dcf"><p>Description</p></th></tr></thead><tbody><tr id="7694029f" class="ijRowOdd"><td id="49eaee20"><p>SSL Key</p></td><td id="db0c76dd"><p>If your mailbox supports a secure connection, select an SSL Key from the drop-down list.                                The SSL Key must be imported into YouTrack.                                For instructions, see <a href="SSL-Key-Stores.html">SSL Keys</a>.</p></td></tr><tr id="61b19f5b" class="ijRowEven"><td id="18981f5c"><p>Connection Timeout</p></td><td id="6dac0de3"><p>Set the maximum amount of time to wait for complete data transfer from the mail server before closing the connection.                                The default value is set to 60 seconds.</p></td></tr><tr id="fa773fb5" class="ijRowOdd"><td id="41ba252b"><p>Socket Timeout</p></td><td id="8a6832a9"><p>Set the maximum amount of time to wait for a response from the mail server before disconnecting the socket.                                The default value is set to 60 seconds.</p></td></tr></tbody></table></div>                </li><li class="list__item" id="08c86233"><p>Click the <span class="control">Test Connection</span> button to verify the configuration.                    If the connection cannot be established, correct your settings and test the connection again.</p></li><li class="list__item" id="60d611e4"><p id="cb255d27">Click the <span class="control">Save</span> button.</p>                    <ul class="list _ul"><li class="list__item" id="7523a4ba"><p>The mailbox integration settings are saved.</p></li></ul></li></ol></section>            <p id="8cf0cd9b">Repeat these steps to add connections to additional mail servers.</p>        </div>        <div class="chapter"><h3 id="define-rules">Define Mailbox Rules</h3>            <p id="a46e83a8">Now that you have connected YouTrack to a mail server, configure the rules for processing incoming email messages.</p>            <p id="bbce60c2">Mailbox rules are processed sequentially.</p>            <ul class="list _ul"><li class="list__item" id="1d7912f9"><p>If a message matches the filter that is defined in the first rule, it is processed according to the instructions that are defined in this rule.                    The message is not considered for processing by any subsequent rules.</p></li><li class="list__item" id="bd204a0f"><p>If the message does not match the filter that is defined in the first rule, it is evaluated against the criteria for the second rule, and so on.</p></li><li class="list__item" id="271d2db2"><p>When a message does not match any filters, an internal record is created to register that the message was received. No further action is taken.                The message is still considered to have been processed and is deleted from the mail server if the corresponding option is enabled in the mailbox rule.</p></li></ul>            <p id="58d867f3">You can create multiple mailbox rules that process messages in different ways.                For example, you create a rule that scans the message body for words like "overdue" and "urgent" and automatically set the priority of the issue.                You can then create additional rules to process the messages that don't contain these words.</p>            <section class="procedure-steps"><h3 id="define-rule-procedure">To define a mailbox rule:</h3><aside data-type="tip" class="prompt" data-title="" rel="define-rule-procedure" id="b3ae46fc"><p>Requires permissions: Low-level Admin Write</p></aside><ol class="list _decimal"><li class="list__item" id="3b6932f2"><p id="ae07b95f">On the <span class="control">Mailbox Integration Settings</span> page, click the <span class="control">Add Mailbox Rule</span> button.</p>                    <ul class="list _ul"><li class="list__item" id="e4bc41ce"><p>The <span class="control">Rule</span> dialog opens in the sidebar.                            <figure><a class="lightbox" href="/help/img/youtrack/2019.2/new-mailbox-rule.zoomed.png"><img alt="new mailbox rule" title="new mailbox rule" src="/help/img/youtrack/2019.2/new-mailbox-rule.png" id="53b8ec5d" width="600" height="295"></a></figure>                        </p></li></ul>                </li><li class="list__item" id="369e9fca"><p id="3cd59a85">Enter values for the following settings:</p>                    <div class="table-wrapper"><table width="100%" id="d7669c0e"><thead><tr id="f766fb38" class="ijRowHead"><th id="b3cf6fe4" width="20%"><p>Setting</p></th><th id="b7ff5768"><p>Description</p></th></tr></thead><tbody><tr id="51368fb8" class="ijRowOdd"><td id="c70463ed"><p>Mailbox</p></td><td id="a70d2806"><p>Select the mailbox from which YouTrack fetches email messages.</p></td></tr><tr id="34c18d10" class="ijRowEven"><td id="0ac148cd"><p>Project</p></td><td id="4b166af2"><p>Select which YouTrack project is assigned to issues that are created from incoming email messages.</p></td></tr><tr id="080a7fac" class="ijRowOdd"><td id="57873d23"><p>Maintainer</p></td><td id="0a2113f0"><p>Select the username of the user who is responsible for the integration.                                The maintainer receives notifications when a command is unsuccessful or the issue reporter cannot be resolved.                                By default, the user who creates the rule is set as the maintainer.</p></td></tr></tbody></table></div>                </li><li class="list__item" id="836ccd71"><a name="Filter"></a><p id="34386bb7">Click to expand the <span class="control">Filter</span> settings.</p>                    <p id="9557306b">These settings determine which emails should be fetched from the mail server.                        These settings are optional. If you want to process all incoming emails in YouTrack, continue with the next step.</p>                    <figure><a class="lightbox" href="/help/img/youtrack/2019.2/new-mailbox-rule-filter.zoomed.png"><img alt="mailbox rule filter options" title="mailbox rule filter options" src="/help/img/youtrack/2019.2/new-mailbox-rule-filter.png" id="339feaf1" width="600" height="344"></a></figure>                    <p id="0629f8a1">Enter values for the settings that are displayed in this section of the new rule:</p>                    <div class="table-wrapper"><table width="100%" id="79e53ab0"><thead><tr id="52850477" class="ijRowHead"><th id="536e078f" width="40%"><p>Setting</p></th><th id="a82162c7"><p>Description</p></th></tr></thead><tbody><tr id="bed4d306" class="ijRowOdd"><td id="f2090733"><p>Folder</p></td><td id="98760baf"><p>Select a folder to fetch only email messages that are delivered to this folder.                                If you don't select a folder, the integration fetches all email messages from the server except messages that have been permanently deleted.                                This includes messages in the sent, spam, and trash folders.                                For this reason, we strongly recommend that you select a folder, for example, the <span class="control">Inbox</span>.</p></td></tr><tr id="1e03d82b" class="ijRowEven"><td id="5b466d62"><p>'To' or 'CC' address</p></td><td id="3b89be6a"><p id="06027744">Enter an email address to fetch only email messages that are sent to this address.                            When used, YouTrack only applies this mailbox rule to messages that are sent directly to the specified recipient or sent as a carbon copy (CC).</p>                                <p id="62be5226">If you set a value here, use the same email address as the <span class="control">From address</span> in the project that is set as the <span class="control">Project</span> for this mailbox rule.                                    Otherwise, replies to messages that are sent by the mailbox integration are not added to issues as comments.</p>                                <p id="a3c02c29">To process all email messages in the specified folder, leave this field empty.</p></td></tr><tr id="58d264f2" class="ijRowOdd"><td id="9bd641b3"><p>Do not discard the contents of square brackets</p></td><td id="22950175"><p>Enable to include text that is set in square brackets in the issues and comments that are processed by YouTrack.</p></td></tr><tr id="3a87964e" class="ijRowEven"><td id="4390c038"><p>Ignore auto replies</p></td><td id="984b4c5b"><p>Enable to ignore email messages that are sent as automatic replies to messages that are sent from the YouTrack server.                                This setting prevents you from adding comments to issues when you receive automated out-of-office replies.</p></td></tr><tr id="2dea2626" class="ijRowOdd"><td id="4e3b1489"><p>Filter messages by patterns</p></td><td id="c288fc25"><p id="375471ad">Enter a pattern to search for in the message subject or text.                                You can write the patterns as <a href="http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html" data-external="true" target="_blank" rel="noopener noreferrer">regular expressions</a>.                                If the pattern is detected in the message subject or text, the email message is ignored.</p>                                <p id="b80bb47c">Enter multiple patterns on separate lines in the input field.</p></td></tr></tbody></table></div>                </li><li class="list__item" id="37c10aeb"><p id="893ebfce">Click to expand the <span class="control">Reporter</span> settings.                    These settings define which user is set as the reporter for each issue that is processed from an incoming email message.</p>                    <figure><a class="lightbox" href="/help/img/youtrack/2019.2/new-mailbox-rule-reporter.zoomed.png"><img alt="mailbox rule reporter options" title="mailbox rule reporter options" src="/help/img/youtrack/2019.2/new-mailbox-rule-reporter.png" id="163e5d1e" width="600" height="369"></a></figure>                    <p id="2ac37acd">Select one of the following options:</p>                    <div class="table-wrapper"><table width="100%" id="16e3eb8f"><thead><tr id="c92dc064" class="ijRowHead"><th id="6e6bae57" width="40%"><p>Option</p></th><th id="0b6251a6"><p>Description</p></th></tr></thead><tbody><tr id="8d7aa1ed" class="ijRowOdd"><td id="38b6b839"><p>Set email sender as reporter. If no such user found in YouTrack, create new account for sender</p></td><td id="49f57173"><p id="96a8b169">YouTrack tries to find a user account with an email address that matches the author of the email message.                                If an existing account is not found, a new user account is created.                                Credentials for accessing YouTrack are sent to the author in the notification message that is sent when the issue is created.</p>                                <aside data-type="warning" class="prompt" data-title="" rel="96a8b169" id="89ca81b2">                                    <p id="df9ae609">New users are allocated a license according to your subscription plan.                                        If you have reached your per-user license limit, the users are flagged as banned.</p>                                    <p id="62285a7e">For more information, see <a href="Ban-User-Accounts.html">Ban User Accounts</a>.</p>                                </aside>                            </td></tr><tr id="b89b2bfa" class="ijRowEven"><td id="b09542f4"><p>Set email sender as reporter. If no such user found in YouTrack, set default user as reporter</p></td><td id="3f438161"><p>YouTrack tries to find a user account with an email address that matches the author of the email message.                                If an existing account is not found, a default user account is set as the reporter.                                Select an existing user account from the <span class="control">Default user</span> drop-down list.</p></td></tr><tr id="7d2e0ede" class="ijRowOdd"><td id="4e82c0fc"><p>Always set predefined user as reporter</p></td><td id="01f5ec6b"><p>When enabled, YouTrack automatically sets the specified user as the reporter for all issues that are created from incoming email messages.</p></td></tr></tbody></table></div>                </li><li class="list__item" id="9ffd8a4e"><p id="ba89eee1">Click to expand the <span class="control">Postprocessing</span> settings.                    These settings define how YouTrack handles issues and comments that are created from incoming email messages.                    These settings are optional. If you don't want to automatically update issues that are processed by YouTrack, continue with the next step.</p>                    <figure><a class="lightbox" href="/help/img/youtrack/2019.2/new-mailbox-rule-postprocessing.zoomed.png"><img alt="mailbox rule postprocessing options" title="mailbox rule postprocessing options" src="/help/img/youtrack/2019.2/new-mailbox-rule-postprocessing.png" id="53dbaf45" width="600" height="297"></a></figure>                    <p id="e5683984">Enter values for the settings that are displayed in this section of the new rule:</p>                    <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="6790c48b"><thead><tr id="6417e846" class="ijRowHead"><th id="58d309e1" width="40%"><p>Setting</p></th><th id="2af6aa6d"><p>Description</p></th></tr></thead><tbody><tr id="4e4f6b77" class="ijRowOdd"><td id="8d21f411"><p>Apply command to new issues</p></td><td id="8e848f5e"><p id="168978d7">Enter a command to apply automatically to all issues that are created from incoming email messages.                                You can insert placeholders that reference values that are stored in the email message. For example:</p>                                <div class="code-block" data-lang="none">for [user] fromMail ${from}</div>                                <p id="b3df62a3">This command applies the following changes to any issue that is created from an incoming email message</p>                                <ul class="list _ul"><li class="list__item" id="541ae869"><p>The issue is assigned to the specified user.</p></li><li class="list__item" id="231af462"><p>The value for the custom field <span class="control">fromMail</span> is set to the email address of the message author.</p></li></ul>                                <p id="7f037bb6">For details, see <a href="#placeholders">Placeholders</a>.</p></td></tr><tr id="ec761bc0" class="ijRowEven"><td id="0969c2df"><p>Apply command on new comment</p></td><td id="c1f83b8b"><p>Enter a command to apply automatically when a comment is added to an issue from an incoming email message.                                You can also use placeholders in these commands. For details, see <a href="#placeholders">Placeholders</a>.</p></td></tr><tr id="8d99356a" class="ijRowOdd"><td id="1b47eae9"><p>Add recipients as watchers</p></td><td id="7778b41d"><p>Enable to add users whose email addresses are included in the <code class="code">To:</code> and <code class="code">CC:</code> fields of the email message as watchers for the issues that are created from the incoming email message.</p></td></tr><tr id="140e833f" class="ijRowEven"><td id="d6402205"><p>Delete fetched messages from mailbox</p></td><td id="307995d4"><p>Enable to delete all messages from the mail server after the corresponding issues have been created in YouTrack.</p></td></tr><tr id="e98bbbfa" class="ijRowOdd"><td id="63448a98"><p>Original timestamps (IMAP only)</p></td><td id="dd41b289"><p>Enable to set the creation date of the issue or comment to the timestamp of the original email message.                                Otherwise, the creation date is set to the date and time when the email message was processed by YouTrack.</p></td></tr><tr id="f26e6fce" class="ijRowEven"><td id="d7b3a3e0"><p>Prefer plain text for issue description when available</p></td><td id="e4596918"><p id="bb45642f">Enable to use the plain-text version of the message for the issue description whenever the incoming message contains a plain-text version of the email.                                If a plain text version is not available, the content from the HTML version of the message is wrapped <code class="code">{html}</code> tags, formatted in YouTrack Wiki syntax, and used for the issue description instead.</p></td></tr></tbody></table></div>                </li><li class="list__item" id="fdad1041"><p id="612f206c">Click the <span class="control">Save</span> button.</p>                    <ul class="list _ul"><li class="list__item" id="6f6591d5"><p>The settings for the mailbox rule are saved.</p></li></ul></li></ol></section>        </div>    </div>    <div class="chapter"><h2 id="placeholders" data-toc="Mailbox-Integration#placeholders">Placeholders</h2>        <p id="a95d0179">You can use placeholders in the <span class="control">Postprocessing</span> settings of a mailbox rule.            These placeholders reference attributes in the original email message.            The placeholder is replaced with the corresponding value in the message when it is processed by YouTrack.            The following placeholders are available:</p>        <div class="table-wrapper"><table width="100%" id="adad196a"><thead><tr id="911fff00" class="ijRowHead"><th id="5c5e8dd6" width="20%"><p>Placeholder</p></th><th id="9329f5b0"><p>Description</p></th></tr></thead><tbody><tr id="735926a7" class="ijRowOdd"><td id="8bf5ac94"><p>${from}</p></td><td id="445b103e"><p>The email address of the message author.</p></td></tr><tr id="91d1b0dd" class="ijRowEven"><td id="1d874a85"><p>${reply-to}</p></td><td id="b61c7497"><p>The value that is stored in the <code class="code">Reply-To:</code> field of the email message header.                    This is the email address that is automatically inserted into the <code class="code">To:</code> field when a recipient replies to an email message.</p></td></tr><tr id="77ae3cad" class="ijRowOdd"><td id="06b253c6"><p>${to}</p></td><td id="828aa488"><p>The email addresses of all message recipients that are entered in the <code class="code">To:</code> field of the email message.</p></td></tr><tr id="b495fd61" class="ijRowEven"><td id="64f538fd"><p>${cc}</p></td><td id="7d1f1277"><p>The email addresses of all message recipients that are entered in the <code class="code">CC:</code> field of the email message.</p></td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="troubleshooting" data-toc="Mailbox-Integration#troubleshooting">Troubleshooting</h2>        <p id="129bdf59">If you experience problems setting up the mailbox integration, see if any of the following conditions apply.</p>        <div class="table-wrapper"><table width="100%" id="89830fe1"><thead><tr id="bc811569" class="ijRowHead"><th id="d7e2ac9b" width="10%"><p>Condition</p></th><th id="d8046041"><p>You are unable to establish a connection to the mail server.</p></th></tr></thead><tbody><tr id="f277865b" class="ijRowOdd"><td id="38d25b48"><p>Cause</p></td><td id="e03e67e0"><p>The external service is unavailable.</p></td></tr><tr id="39360dab" class="ijRowEven"><td id="379536ca"><p>Solution</p></td><td id="4aaaeebd"><p>Verify that your mail server is running.</p></td></tr><tr id="cc0019cc" class="ijRowOdd"><td id="4624d31f"><p>Cause</p></td><td id="3d1735e5"><p>The connection is blocked by a firewall.</p></td></tr><tr id="94e20f2a" class="ijRowEven"><td id="974fd18f"><p>Solution</p></td><td id="f8b8d0d5"><p>Open the ports in the firewall that are used by YouTrack and the mail server.</p></td></tr><tr id="0ec3ee0b" class="ijRowOdd"><td id="2af3258f"><p>Cause</p></td><td id="1cffd1c4"><p id="56118e7a">The connection to the external service is blocked by the proxy server.</p>                    <p id="2c230c27">You are trying to connect over the wrong port.</p></td></tr><tr id="610441c2" class="ijRowEven"><td id="fb5fe6d6"><p>Solution</p></td><td id="9b09c956"><p>Set the system properties for your server that let YouTrack connect to other services through the proxy server.                    For instructions, see <a href="Proxy-Configuration.html">Proxy Configuration</a>.</p></td></tr><tr id="53ec31bd" class="ijRowOdd"><td id="2714d866"><p>Cause</p></td><td id="204e8b5f"><p>The mail server requires a secure connection.</p></td></tr><tr id="bd1ab997" class="ijRowEven"><td id="3cf6cd19"><p>Solution</p></td><td id="902fe81a"><p>Import the certificate for your mail server into YouTrack.                    For instructions, see <a href="SSL-Certificates.html">SSL Certificates</a>.</p></td></tr><tr id="02336486" class="ijRowOdd"><td id="e0a95f3d"><p>Cause</p></td><td id="4e42a413"><p>Your SSL certificate for the mail server has expired.</p></td></tr><tr id="aa32290c" class="ijRowEven"><td id="45e1e957"><p>Solution</p></td><td id="c542f967"><p>Renew and import the updated certificate into YouTrack.                    For instructions, see <a href="SSL-Certificates.html">SSL Certificates</a>.</p></td></tr><tr id="9ed820f6" class="ijRowOdd"><td id="4d8a617c"><p>Cause</p></td><td id="840b6508"><p>You are trying to connect to an Exchange mailbox and there are configuration problems in either the mail server or YouTrack.</p></td></tr><tr id="c1efe5e1" class="ijRowEven"><td id="6b4d11d7"><p>Solution</p></td><td id="64c318af"><p id="fc730cdc">Check the following setup requirements:</p>                <ul class="list _ul"><li class="list__item" id="98b95910"><p>Make sure your Exchange mailbox is configured to use either POP/POPS or IMAP/IMAPS and authenticate over SMTP as described <a href="#microsoft-exchange">here</a>.</p></li><li class="list__item" id="721417f2"><p>Verify that the <span class="control">Protocol</span> setting in the mailbox integration matches the protocol that is enabled for your Exchange mailbox.</p></li><li class="list__item" id="d7458f1d"><p>Enable the <span class="control">MS Exchange compatibility mode</span> checkbox.</p></li></ul>                    <p id="eeffb01d">If you are still unable to establish a connection, <a href="https://youtrack-support.jetbrains.com/hc/en-us" data-external="true" target="_blank" rel="noopener noreferrer">submit a support request</a>.</p></td></tr></tbody></table></div>        <div class="table-wrapper"><table width="100%" id="ccb32f81"><thead><tr id="03695a3a" class="ijRowHead"><th id="ba2c1dfa" width="10%"><p>Condition</p></th><th id="a9e73fac"><p>You are unable to establish a connection to your mail server over an unsecured protocol. YouTrack returns the error <code class="code">bad_request</code>.</p></th></tr></thead><tbody><tr id="c3c9e83d" class="ijRowOdd"><td id="04836165"><p>Cause</p></td><td id="677db1c7"><p>Your IMAP or POP3 server uses an extension that enables STARTTLS. YouTrack requires a secure connection to your mail server.</p></td></tr><tr id="244ce909" class="ijRowEven"><td id="fddf9055"><p>Solution</p></td><td id="6f45df82"><p>Import the SSL certificate for your mail server into YouTrack. For instructions, see <a href="SSL-Certificates.html">SSL Certificates</a>.                    If both YouTrack and your mail server run on a private computer network, you can generate and import a self-signed SSL certificate for your mail server.</p></td></tr></tbody></table></div>        <div class="table-wrapper"><table width="100%" id="6be900dd"><thead><tr id="26ffa4e8" class="ijRowHead"><th id="8ee35b88" width="10%"><p>Condition</p></th><th id="5de5f935"><p>Incoming email messages are not converted into issues in YouTrack.</p></th></tr></thead><tbody><tr id="2dbd2471" class="ijRowOdd"><td id="3b0c4617"><p>Cause</p></td><td id="e318cce7"><p>The user that is set as the reporter for issues that are processed from incoming email messages does not have permission to create issues in the project.</p></td></tr><tr id="bd335b48" class="ijRowEven"><td id="14a8eb8c"><p>Solution</p></td><td id="c1902334"><p id="588d318f">Check the <span class="control">Reporter</span> settings for your mailbox rules.</p>                    <ul class="list _ul"><li class="list__item" id="84a11064"><p>If you set the email sender as reporter, grant a <span class="control">Reporter</span> role to either the <span class="control">All Users</span> or the <span class="control">Registered Users</span> groups for the project that is connected to the mailbox.</p></li><li class="list__item" id="852b32ba"><p>If you set a default or predefined user as reporter, grant this user a <span class="control">Reporter</span> role in the project that is connected to the mailbox.</p></li></ul>              </td></tr></tbody></table></div>        <div class="table-wrapper"><table width="100%" id="0b09ec59"><thead><tr id="f239abdf" class="ijRowHead"><th id="286cf7a3" width="10%"><p>Condition</p></th><th id="ad67ec84"><p>Incoming email messages are converted into issues in YouTrack.                Incoming replies are not added as comments.</p></th></tr></thead><tbody><tr id="1981dd15" class="ijRowOdd"><td id="95b19376"><p>Cause</p></td><td id="a74a80ea"><p>The <span class="control">From address</span> in the project settings uses an email address that is not processed by the mailbox rule or is not set.                New issues are created from messages that are sent to the mail server, but replies to incoming messages are sent from another address.                Replies to these messages are not sent to the mail server that is configured for the mailbox integration.</p></td></tr><tr id="2f61d572" class="ijRowEven"><td id="0d0260cf"><p>Solution</p></td><td id="84c13b59"><p id="b444edad">Set the <span class="control">From address</span> for the projects that are selected in your mailbox rule settings to an address that is processed by the mailbox integration.</p>                <p id="c3ab134f">Check the <span class="control">Filter</span> settings for your mailbox rule. If you set the <span class="control">'To' address</span>,                    use the same email address as the <span class="control">From address</span> in the project that is set as the <span class="control">Project</span> for this mailbox rule.</p></td></tr></tbody></table></div>    </div><div class="last-modified" data-skip-index="skip">Last modified: 29 November 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="importing-from-jira.html">Import from Jira</a><a class="navigation-links__next" href="Use-YouTrack-as-a-Help-Desk.html">Use YouTrack as a Help Desk</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>