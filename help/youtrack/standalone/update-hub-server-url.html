<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>更新集线器服务器的URL-帮助|帮助YouTrack单机版</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="update-hub-server-url" data-breadcrumbs="Installation-and-Upgrade.xml|Installation and Upgrade/working-with-external-hub.xml|Working with External Hub/update-hub-server-url.xml|Update the URL for your Hub Server" data-main-title="Update the URL for your Hub Server"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack独立帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="update-hub-server-url.xml" data-toc="update-hub-server-url">更新您的Hub服务器的URL</h1><p id="4bda3c25">要连接到外部集线器服务，YouTrack需要知道在哪里寻找它。外部集线器服务的位置存储在YouTrack的配置文件中。为防止意外编辑，此设置不会在管理UI中公开。要更新此URL，可以使用集线器迁移服务，也可以更新存储在YouTrack服务器上的属性文件中的值。</p>    <p id="dd97ddae">在某些情况下，您需要在YouTrack中更新外部集线器服务器的URL。</p>    <ul class="list _ul"><li class="list__item" id="ad83a89d"><p>外部集线器安装已重新配置，其基本URL已更改。</p></li><li class="list__item" id="622a7153"><p>外部集线器安装已损坏，并使用其他基本URL恢复到另一个位置。</p></li><li class="list__item" id="395c7ce7"><p>Hub的新副本已安装在其他位置，并且您希望YouTrack连接到新的安装。新安装的基本URL与旧安装的基本URL不同。</p></li></ul>    <p id="de478ddb">您可以使用两种方法在YouTrack中更新中心网址。</p>    <ul class="list _ul"><li class="list__item" id="9ab64293"><p>如果YouTrack正在运行，则应<a href="#use-hub-migration-service">使用集线器迁移服务</a> 。</p></li><li class="list__item" id="072f9995"><p>如果YouTrack已停止运行且无法启动，则必须<a href="#update-url-manually">手动更新中心URL</a> 。</p></li></ul>    <div class="chapter"><h2 id="register-youtrack-in-new-hub">在新集线器安装中将YouTrack注册为服务</h2>    <p id="2a04b4bf">如果要切换到新安装，则必须已在此Hub安装中将YouTrack注册为服务。否则，YouTrack将不会启动。在以下情况下满足此条件：</p>    <ul class="list _ul"><li class="list__item" id="5bbc003a"><p>已从属于YouTrack先前使用的集线器安装的备份文件还原了新集线器安装的数据库。</p></li><li class="list__item" id="74867e7e"><p>通过将以前的集线器安装迁移到新安装中来创建新的集线器安装。</p></li><li class="list__item" id="215048e1"><p>已将YouTrack服务手动添加到注册表中以进行新的集线器安装。</p></li></ul>                <p id="fcacad39">在尝试在YouTrack中更新集线器服务器的URL之前，请验证YouTrack是否已在新的集线器安装中正确注册。有关更多信息，请参阅<a href="/help/hub/Managing-Services.html" rel="noopener noreferrer" data-external="true" target="_blank">Hub文档</a> 。</p>    </div>    <div class="chapter"><h2 id="use-hub-migration-service">使用集线器迁移服务更新集线器URL</h2>        <p id="c7b03af1">如果您的YouTrack服务正在运行，则可以使用YouTrack内置的集线器迁移服务来更新此属性。仅当从上一个URL仍可使用集线器服务时，此方法才可用。</p>        <p id="4fc3ddc6">此方法是可取的，因为它可以验证外部集线器服务是否可从新URL获得并验证YouTrack服务已在集线器中注册。</p>        <p id="c2d298a5">如果用于确保与集线器服务器的连接安全的证书是自签名的，或者不是由已知的证书颁发机构颁发的，则该证书将自动导入到YouTrack的内部信任存储中。</p>        <aside class="prompt" rel="c2d298a5" id="4af3c851" data-type="warning" data-title="Two-factor authentication">        <p id="738de445">集线器迁移服务使用应用程序令牌进行身份验证。该服务不支持两因素身份验证。</p>        <p id="a76ca46b">如果您需要使用迁移服务来更新中心URL，请为用于登录到迁移服务的帐户禁用2FA。更新完成后，您可以为您的帐户重新启用2FA。</p></aside>    <section class="procedure-steps"><h3 id="93f1da2d">要在迁移服务中更新中心URL，请执行以下操作：</h3><ol class="list _decimal"><li class="list__item" id="e1ecb6bb"><p id="c7f600f1">在Web浏览器的地址栏中输入迁移服务的URL。该URL是YouTrack安装的基本URL，并附加了<code class="code">/bundle/admin</code> 。</p>            <ul class="list _ul"><li class="list__item" id="3d7127d0"><p>将打开集线器迁移服务的登录页面。</p></li></ul>        </li><li class="list__item" id="102c7d9a"><p id="14693fad">登录到迁移服务。</p>                    <p id="f516f7ad">要登录迁移服务，您需要证明自己是系统管理员，并且有权访问安装了应用程序的服务器的文件系统。为了确认您的访问权限，迁移服务会请求位于应用程序服务器上的令牌。</p>                    <ul class="list _alpha-lower"><li class="list__item" id="3ca5f426"><p>点击<span class="control">显示令牌位置</span>链接。</p></li><li class="list__item" id="b6c47583"><p>打开<code class="code">awcToken.properties</code>服务器上存储的文件。</p></li><li class="list__item" id="dbdd37e8"><p>将文件中的<span class="control">令牌</span>粘贴到“ <span class="control">令牌”</span>字段中。</p></li><li class="list__item" id="3c08601c"><p>单击<span class="control">登录</span>按钮。</p></li></ul>        </li><li class="list__item" id="51cf3b71"><p>输入外部集线器服务器的新基本URL。</p></li><li class="list__item" id="ff863f84"><p>单击<span class="control">验证URL</span>按钮。</p></li><li class="list__item" id="62fc2eb9"><p id="a007a4b2">单击“ <span class="control">接受”</span>按钮以确认请求访问外部集线器服务。</p></li><li class="list__item" id="dda8d283"><p id="6263b07f">查看并解决冲突（如果找到任何冲突）并确认迁移。</p>            <ul class="list _ul"><li class="list__item" id="a4331997"><p>YouTrack服务已更新为使用新URL连接到集线器服务。</p></li></ul>        </li></ol></section>    </div>    <div class="chapter"><h2 id="update-url-manually">手动更新中心URL</h2>        <p id="560b4042">如果由于无法再连接到集线器服务而关闭了YouTrack，则可以手动更新集线器URL。通过向YouTrack服务器应用命令来执行此操作。对于MSI安装，您必须以管理员身份运行此命令。</p>        <p id="a0d804f3">如果用于确保与集线器服务器的连接安全的证书是自签名的，或者不是由已知的证书颁发机构颁发的，则还需要将证书导入到内部密钥库中，以用于YouTrack。有关详细说明，请参阅<a href="update-hub-server-certificate.html">更新中心服务器的证书</a> 。</p>        <aside class="prompt" rel="a0d804f3" id="2287752d" data-type="note" data-title="">            <p id="a229fa5e">此处显示的命令是针对Linux和macOS编写的。对于Windows操作系统，请更换<code class="code">.sh</code>与<code class="code">.bat</code>并使用反斜杠。</p>        </aside>        <section class="procedure-steps"><h3 id="3d1c0ff1">要手动更新中心URL：</h3><ol class="list _decimal"><li class="list__item" id="c7f13fd5"><p id="6be2d011">使用以下方法之一来更新<code class="code">bundle.properties</code>文件：</p>            <ul class="list _ul"><li class="list__item" id="04c2eecb"><p id="ad013591">在YouTrack服务器上打开命令行界面，然后输入以下命令：</p>                <div class="code-block" data-lang="none"><code class="code-block__wrapper"><youtrack_home>/bin/youtrack.sh configure --hub-url=<url-with-/hub-at-the-end></code></div></li><li class="list__item" id="005b3ee5"><p id="0d2f64e5">打开<code class="code"><youtrack_app_data>/conf/internal/bundle.properties</code>文件并手动更改以下属性的值：</p>                        <div class="code-block" data-lang="none"><code class="code-block__wrapper">hub-url=<url-with-/hub-at-the-end></code></div></li></ul>        </li><li class="list__item" id="8ead85fe"><p>对于<code class="code"><url-with-/hub-at-the-end></code> ，为新的Hub安装程序指定基本URL并附加<code class="code">/hub</code> 。</p></li><li class="list__item" id="cf761f73"><p id="17188ce4"><a href="Stop-and-Start-YouTrack.html">启动YouTrack</a> 。</p>                <ul class="list _ul"><li class="list__item" id="5191cccb"><p>YouTrack使用新的URL连接到集线器服务。</p></li></ul></li></ol></section>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Migrate-YouTrack-Data-to-External-Hub.html">将YouTrack数据迁移到外部集线器</a> <a class="navigation-links__next" href="update-hub-server-certificate.html">更新集线器服务器的证书</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>