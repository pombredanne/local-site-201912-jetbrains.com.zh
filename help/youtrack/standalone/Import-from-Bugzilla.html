<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>从Bugzilla导入-帮助|帮助YouTrack单机版</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Import-from-Bugzilla" data-breadcrumbs="Migrating-to-YouTrack.xml|Migrate to YouTrack/Import-from-Bugzilla.xml|Import from Bugzilla" data-main-title="Import from Bugzilla"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack独立帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Import-from-Bugzilla.xml" data-toc="Import-from-Bugzilla">从Bugzilla导入</h1>    <p id="5152a02d">按照此页面上的说明，使用<a href="https://github.com/JetBrains/youtrack-python-scripts" rel="noopener noreferrer" data-external="true" target="_blank">Python导入脚本</a>从<a href="https://www.bugzilla.org//" rel="noopener noreferrer" data-external="true" target="_blank">Bugzilla</a>导入错误报告。此过程需要执行以下步骤：</p>    <ol class="list _decimal"><li class="list__item" id="4dd222c4"><p><a href="#set-up-your-environment">设置您的本地环境</a> 。</p></li><li class="list__item" id="1e221c30"><p>（可选） <a href="#customize-mapping-file">自定义Bugzilla数据库中的字段与YouTrack中的issue属性之间的映射</a> 。</p></li><li class="list__item" id="0e34ff32"><p><a href="#import-data">导入您的问题</a> 。</p></li></ol>    <div class="chapter"><h2 id="bugzilla-issue-import-details" data-toc="Import-from-Bugzilla#bugzilla-issue-import-details">导入细节</h2>    <p id="6ab21b7f">如果Bugzilla数据库包含对YouTrack中不存在的实体的引用，则会创建它们。您用于运行导入的用户帐户应具有创建项目，问题，用户，甚至更多的权限。我们建议您使用具有<span class="control">系统管理员</span>角色的帐户来执行导入脚本。</p>    <p id="46e172c6">新实体的创建如下：</p>    <div class="table-wrapper"><table width="100%" id="bf5a7aad"><thead><tr id="197dd1a1" class="ijRowHead"><th id="68c88359" width="20%"><p>实体</p></th><th id="ab9ce192"><p>描述</p></th></tr></thead><tbody><tr id="43dbb225" class="ijRowOdd"><td id="cc11ab1b"><p>专案</p></td><td id="a2217484"><p id="df3cfc58">如果导入源中引用的项目尚不存在，则会创建一个新项目。</p>                <ul class="list _ul"><li class="list__item" id="09c734b2"><p>根据Bugzilla数据库中的值分配项目名称和ID。</p></li><li class="list__item" id="9b1acd47"><p>将执行导入脚本的用户设置为项目所有者。</p></li></ul></td></tr><tr id="fb3044c4" class="ijRowEven"><td id="d468bce3"><p>用户数</p></td><td id="c4311e0b"><p id="eab50658">几个问题属性，例如<code class="code">reporterName</code>和<code class="code">Assignee</code>存储对用户帐户的引用。通过<span class="control">电子邮件</span>对照现有用户帐户检查导入中的值。对于与现有用户的电子邮件不匹配的每个新值，将创建一个新的用户帐户。</p>                <ul class="list _ul"><li class="list__item" id="9c676dc1"><p>电子邮件地址也用作导入的用户帐户的登录名。</p></li><li class="list__item" id="a8d49fe8"><p>所有新用户帐户均分配有随机生成的密码。要登录YouTrack，导入的用户必须单击登录页面上的<span class="control">重置密码</span>链接并创建新密码。</p></li></ul>                <aside class="prompt" rel="a6c4a0f9" id="ba0fe919" data-type="warning" data-title="">                    <p id="7baf2a54">导入数据中对用户的引用将映射到YouTrack中的现有帐户。如果找不到匹配项，则会创建一个新的用户帐户。</p>                    <p id="eba23c1c">根据您的订阅计划，为导入的用户分配了许可证。对于超出您的每用户许可限制的用户，导入的用户被标记为禁止用户。</p>                    <p id="6d94a959">有关更多信息，请参见<a href="Ban-User-Accounts.html">禁止用户帐户</a> 。</p>                </aside>            </td></tr><tr id="5ecb9cef" class="ijRowOdd"><td id="d596d767"><p>自定义字段</p></td><td id="6867a1ce"><p id="bbeeb062">如果导入数据包含YouTrack中不存在的字段，则将创建自定义字段并将其添加到目标项目中。</p>                <ul class="list _ul"><li class="list__item" id="8f25a103"><p>字段名称和类型是根据映射文件中的定义设置的。</p></li><li class="list__item" id="dcbbc3d4"><p>自定义字段的属性设置如下： <code class="code">autoAttached=true</code> ， <code class="code">isPrivate=false</code> ， <code class="code">defaultVisibility=false</code> 。</p></li></ul>            </td></tr><tr id="f966fb43" class="ijRowEven"><td id="f21ab134"><p>栏位值</p></td><td id="3b6aac13"><p>如果源文件包含现有字段的新值，则将它们添加到当前值集中。</p></td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="set-up-your-environment" data-toc="Import-from-Bugzilla#set-up-your-environment">设置环境</h2>        <p id="00c9ea4b"><a href="https://github.com/JetBrains/youtrack-python-scripts" rel="noopener noreferrer" data-external="true" target="_blank">Python导入脚本</a>支持“导入到YouTrack”。这些脚本基于YouTrack REST API构建。实际上，您实际上不需要使用Python进行任何编程，但是您确实需要安装Python和包含导入脚本的软件包。</p>        <section class="procedure-steps"><h3 id="a32bdd5b">设置环境：</h3><ol class="list _decimal"><li class="list__item" id="4e0e3371"><p id="9b5de9c3">下载并安装<a href="https://www.python.org/downloads/release/python-2714/" rel="noopener noreferrer" data-external="true" target="_blank">Python</a> 。导入脚本与Python 2.7+兼容。不支持Python 3版本。您可以选择自己喜欢的安装目录。</p>                <p id="3d34d4ca">macOS，CentOS，Red Hat Enterprise Linux（RHEL）和Ubuntu的最新版本均随附Python 2.7。如果使用任何这些操作系统，请继续下一步。</p></li><li class="list__item" id="61e330c6"><p>为MySQL数据库安装Python库。例如， <a href="http://mysql-python.sourceforge.net/MySQLdb.html" rel="noopener noreferrer" data-external="true" target="_blank">MySQLdb</a> 。</p></li><li class="list__item" id="607cbf5f"><p id="87b1c542">安装包含导入脚本的软件包。打开操作系统支持的命令行界面，然后输入以下命令：</p>                <div class="code-block" data-lang="none"><code class="code-block__wrapper">pip install youtrack-scripts</code></div>                <ul class="list _ul"><li class="list__item" id="3e9309e2"><p>导入脚本安装在您的本地环境中。</p></li><li class="list__item" id="3181427a"><p>的<code class="code">youtrack</code>包含YouTrack REST API的Python客户端库的软件包会自动作为依赖项安装。</p></li></ul>                <p id="76f9a23f">如果您不想全局安装软件包，则只能使用以下命令为您的用户帐户安装软件包：</p>                <div class="code-block" data-lang="none"><code class="code-block__wrapper">pip install --user youtrack-scripts</code></div>            </li></ol></section>    </div>    <div class="chapter"><h2 id="customize-mapping-file" data-toc="Import-from-Bugzilla#customize-mapping-file">自定义映射定义</h2>        <p id="47007e4a">下一步是映射Bugzilla数据库中的字段，以在YouTrack中发布属性。您可以使用<code class="code">bugzilla2youtrack</code>脚本以生成示例映射文件。</p>        <p id="f93a548c">仅当您在Bugzilla中自定义了问题属性时，才需要自定义映射文件。要使用默认的映射定义，请跳过此过程并<a href="#import-data">导入数据</a> 。</p>        <section class="procedure-steps"><h3 id="22e0b2df">生成映射文件：</h3><ol class="list _decimal"><li class="list__item" id="2b24a2bc"><p>打开操作系统支持的命令行界面。</p></li><li class="list__item" id="6d95b3d4"><p>如有必要，将当前目录更改为Python的安装目录。例如（Windows）：</p><div class="code-block" data-lang="none"><code class="code-block__wrapper">cd C:\Python27</code></div><p></p></li><li class="list__item" id="d29cbbfd"><p id="575635f6">输入以下命令：</p>                <div class="code-block" data-lang="none"><code class="code-block__wrapper">bugzilla2youtrack -g -m mapping.json</code></div>                <ul class="list _ul"><li class="list__item" id="86fe6c1c"><p>的<code class="code">-g</code>选项告诉脚本生成映射文件。</p></li><li class="list__item" id="544f888a"><p>的<code class="code">-m</code>选项将覆盖映射文件的默认路径和文件名。如果不通过此选项，则文件将在当前目录中生成为<code class="code">mapping.json</code> 。如果要指定其他位置和/或文件名，请使用目标目录的完整路径和/或所需名称为参数指定一个值。</p></li><li class="list__item" id="a63889df"><p>如果命令执行成功，则会在命令行界面中显示一条消息，其中包含生成的文件的位置。</p></li></ul>            </li></ol></section>        <section class="procedure-steps"><h3 id="b0a3e8c5">要自定义映射定义：</h3><ol class="list _decimal"><li class="list__item" id="cf5eed13"><p>打开生成的映射文件。</p></li><li class="list__item" id="69c561b0"><p>更新映射，以确保要从Bugzilla数据库导入的所有数据都映射到YouTrack中所需的值。如果文件包含一个或多个不想导入的字段，则可以从映射文件中删除引用。有关默认映射的说明，请参见<a href="#bugzilla-import-mapping-notes">默认映射</a> 。</p></li><li class="list__item" id="c6dca7bf"><p>检查是否为<code class="code">bz_db_charset</code>参数与Bugzilla数据库的字符编码匹配。Bugzilla 2.22和更高版本使用UTF-8字符编码。</p></li><li class="list__item" id="6204a475"><p>保存您的更改并关闭映射文件。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="import-data" data-toc="Import-from-Bugzilla#import-data">汇入资料</h2>        <p id="c99c0c05">最后一步是运行从Bugzilla导入数据的命令。</p>        <section class="procedure-steps"><h3 id="ac7c1c16">导入数据：</h3><ol class="list _decimal"><li class="list__item" id="093b1596"><p>打开操作系统支持的命令行界面。</p></li><li class="list__item" id="dd238d0a"><p>如有必要，将当前目录更改为Python的安装目录。例如（Windows）：</p><div class="code-block" data-lang="none"><code class="code-block__wrapper">cd C:\Python27</code></div><p></p></li><li class="list__item" id="fc7c4eb9"><p id="4534f879">输入以下命令：</p>                <div class="code-block" data-lang="none"><code class="code-block__wrapper">bugzilla2youtrack -m mapping.json -t token -u login -p password target_url bz_db bz_host bz_port bz_login bz_pass [bz_product]</code></div>                <p id="4bd5cf7a">将命令行参数替换为如下所述的值：</p>                <div class="table-wrapper"><table width="100%" id="efd42032"><thead><tr id="31aaa8ac" class="ijRowHead"><th id="a852cdcf" width="20%"><p>参数</p></th><th id="96f4b5dc"><p>描述</p></th></tr></thead><tbody><tr id="50999769" class="ijRowOdd"><td id="c29c44c6"><code class="code">mapping.json</code></td><td id="21c3a60e"><p>与<code class="code">-m</code>选项，以指定自定义映射文件的完整路径和文件名。如果不通过此选项，则使用默认的映射文件。</p></td></tr><tr id="15a939a6" class="ijRowEven"><td id="c5cc9a1a"><code class="code">token</code></td><td id="0a3429ef"><p id="d35e583e">当与<code class="code">-t</code>选项，一个永久令牌，用于在YouTrack中验证您的管理员帐户。这是首选的身份验证方法。如果您使用此选项，请跳过<code class="code">-u</code>和<code class="code">-p</code>选项。要了解如何生成永久令牌，请参阅<a href="Manage-Permanent-Token.html#obtain-permanent-token">创建永久令牌</a> 。</p>                            <p id="82dc6d64">或者，您可以使用<code class="code">-T</code>选项，并为包含永久令牌的文件指定完整路径和文件名。</p></td></tr><tr id="c6e4f36e" class="ijRowOdd"><td id="d5afa6d1"><code class="code">login</code></td><td id="f6e86e2e"><p>当与<code class="code">-u</code>选项，YouTrack管理员帐户的登录名。您还必须为<code class="code">-p</code>选项。</p></td></tr><tr id="5c559d4f" class="ijRowEven"><td id="6163f47a"><code class="code">password</code></td><td id="9697c646"><p>当与<code class="code">-p</code>选项，YouTrack管理员帐户的密码。</p></td></tr><tr id="ed5ec04f" class="ijRowOdd"><td id="0a28156d"><code class="code">target_url</code></td><td id="d01b9336"><p>目标YouTrack服务器的基本URL。对于YouTrack InCloud实例，您的基本URL包括结尾<code class="code">/youtrack</code> 。例如： <code class="code">https://company.myjetbrains.com/youtrack</code> </p></td></tr><tr id="45160cc7" class="ijRowEven"><td id="2133f0b0">                            <code class="code">bz_db</code>                        </td><td id="a03bcbf9"><p>要从Bugzilla导入的源数据库的名称。默认数据库名称是<code class="code">bugs</code> 。</p></td></tr><tr id="88cbdb8b" class="ijRowOdd"><td id="bf0a64e3">                            <code class="code">bz_host</code>                        </td><td id="b17d3a2f"><p>Bugzilla源数据库的URL。</p></td></tr><tr id="af44d97c" class="ijRowEven"><td id="605d882d">                            <code class="code">bz_port</code>                        </td><td id="c549a8e2"><p>用于访问Bugzilla源数据库的端口。如果未特别配置，则默认端口号是3306。</p></td></tr><tr id="f64b5c75" class="ijRowOdd"><td id="f67475e1">                            <code class="code">bz_login</code>                        </td><td id="981d87e0"><p>登录Bugzilla源数据库的用户名。</p></td></tr><tr id="6d2794cf" class="ijRowEven"><td id="4e92bdde">                            <code class="code">bz_pass</code>                        </td><td id="79e83036"><p>用于登录Bugzilla源数据库的帐户密码。</p></td></tr><tr id="f3fa5163" class="ijRowOdd"><td id="bb8b0c8c">                            <code class="code">bz_product</code>                        </td><td id="509579ba"><p id="4beea7d9">从Bugzilla导入的源产品的可选名称。要导入多个产品，请用逗号分隔产品名称。</p>                            <aside class="prompt" rel="4beea7d9" id="edd56897" data-type="note" data-title=""><p id="6c2a8426">如果为空，则导入数据库中的所有产品。</p></aside>                        </td></tr></tbody></table></div>                <ul class="list _ul"><li class="list__item" id="0d676ba0"><p>该命令执行Python导入脚本。</p></li><li class="list__item" id="88cad90e"><p>如果成功，则会在命令行界面中针对每个问题打印以下行：</p><div class="code-block" data-lang="bash">已<issue id="">成功导入</issue>问题[ <issue id="">]</issue></div>                    <p></p></li></ul>            </li><li class="list__item" id="95e9d1e6"><p id="114c3ec7">检查您将问题导入的一个或多个项目，并验证数据是否正确显示。如果您对结果不满意，并想重新导入数据：</p>                <ul class="list _ul"><li class="list__item" id="4a148c66"><p>删除导入期间创建的所有问题。如果将问题导入到新项目中，则只需删除该项目。</p></li><li class="list__item" id="e334b147"><p>编辑您的映射文件。</p></li><li class="list__item" id="7d5024e5"><p>再次运行导入脚本。</p></li></ul></li></ol></section>    </div>    <div class="chapter"><h2 id="bugzilla-import-mapping-notes" data-toc="Import-from-Bugzilla#bugzilla-import-mapping-notes">默认映射</h2>        <p id="6db91b62">该存储库包含一个默认映射文件，用于将Bug从Bugzilla导入到YouTrack。该文件另存为<code class="code">defaultBzMapping.py</code>在里面<code class="code">youtrackutils/bugzilla</code>子文件夹。</p>        <p id="1db5f64e">导入脚本引用默认映射文件。如果您创建自定义映射文件，请使用<code class="code">-m</code>导入脚本中的选项，然后如上<a href="#import-data">一节</a>所述指定文件的完整路径和文件名。</p>        <div class="chapter"><h3 id="status-resolution-mapping">状态和解决方案</h3>            <p id="23e60d4b">Bugzilla中Bug <span class="control">状态的</span>值映射到YouTrack中<span class="control">State</span>字段的值。Bugzilla中的“ <span class="control">分辨率”</span>已映射到“ <span class="control">状态”</span>字段的值，这些值已标记为“ <span class="control">已解决”</span>属性。</p>              <p id="f30d9502">这些映射在<code class="code">state_map</code>文件部分。在这里，我们对齐了映射的右侧，以提高示例的可读性。</p>            <ul class="list _ul"><li class="list__item" id="f2a887ee"><p>映射的左侧对应于Bugzilla中“ <span class="control">状态”</span>和“ <span class="control">解决方案”</span>值的名称。</p></li><li class="list__item" id="74fe5d02"><p>映射的右侧显示了YouTrack中“ <span class="control">状态”</span>字段的目标值。</p></li></ul>            <div class="code-block" data-lang="none"><code class="code-block__wrapper">state_map = { "UNCONFIRMED" : "Open", "CONFIRMED" : "Submitted", "NEW" : "Submitted", "ASSIGNED" : "Submitted", "REOPENED" : "Reopened", "FIXED" : "Fixed", "INVALID" : "Won't fix", "WONTFIX" : "Won't fix", "MOVED" : "Won't fix", "LATER" : "Won't fix", "IN_PROGRESS" : "In Progress", "DUPLICATE" : "Duplicate", "VERIFIED" : "Verified", "RESOLVED" : {"FIXED": "Fixed", "*": "Won\'t fix", "DUPLICATE": "Duplicate"} }</code></div>    </div>    <div class="chapter"><h3 id="bugzilla-import-field-mapping">自定义字段类型</h3>        <p id="d7a377ef">Bugzilla中字段类型的定义映射到YouTrack中的特定字段类型。这些映射在<code class="code">cf_types</code>文件部分。</p>        <ul class="list _ul"><li class="list__item" id="f5a0fbca"><p>映射的左侧对应于Bugzilla中字段类型的数值。</p></li><li class="list__item" id="d860c685"><p>映射的右侧显示了YouTrack中的目标字段类型。</p></li><li class="list__item" id="8cc75ad2"><p>遵循的值<code class="code">#</code>符号表示Bugzilla数据库中的字段类型ID。</p></li></ul>        <div class="code-block" data-lang="none"><code class="code-block__wrapper">cf_types = { "1": "string", # FIELD_TYPE_FREETEXT "2": "enum[1]", # FIELD_TYPE_SINGLE_SELECT "3": "enum[*]", # FIELD_TYPE_MULTY_SELECT "4": "string", # FIELD_TYPE_TEXTAREA "5": "date", # FIELD_TYPE_DATETIME "7": "string" # FIELD_TYPE_BUG_URLS }</code></div>        <p id="34a38964">的<code class="code">FIELD_TYPE_BUGID</code> Bugzilla中的（数字ID为“ 6”）字段类型被导入到YouTrack的问题链接中。如果您希望使用其他映射，请在映射文件中手动定义它。</p>    </div>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Import-from-CSV-File.html">从CSV文件</a> <a class="navigation-links__next" href="Import-from-FogBugz.html">导入从FogBugz导入</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>