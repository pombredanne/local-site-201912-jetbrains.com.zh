<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>使用外部代码编辑器-帮助|帮助YouTrack单机版</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="js-workflow-external-editor" data-breadcrumbs="Administration.xml|Administration/Workflow-Guide.xml|Workflows/js-workflow-external-editor.xml|Using an External Code Editor" data-main-title="Using an External Code Editor"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack独立帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="js-workflow-external-editor.xml" data-toc="js-workflow-external-editor">使用外部代码编辑器</h1>    <p id="5478385e">您可以使用基于Web的工作流编辑器进行快速编辑或编写简单规则。但是，如果您习惯于在功能齐全的开发环境中工作，则实际上可以在任何支持JavaScript的IDE中编写工作流程。</p>    <p id="a29bf1d2">为了让您在最舒适的地方工作，我们汇总并发布了两个软件包到<a href="https://www.npmjs.com/" rel="noopener noreferrer" data-external="true" target="_blank">npm注册表服务</a> ，您可以将其安装在开发环境中。此功能并非特定于任何单个平台。您应该能够配置任何支持JavaScript的环境来编写和管理YouTrack的工作流脚本。</p>    <aside class="prompt" rel="a29bf1d2" id="eab0bf75" data-type="note" data-title=""><p id="230acc50"><b id="46249692">npm</b>是<b id="396991b4">npm，Inc.</b>的商标<b id="396991b4">。</b></p></aside>    <div class="chapter"><h2 id="youtrack-scripting-api" data-toc="js-workflow-external-editor#youtrack-scripting-api">工作流程API包</h2>        <p id="5d527f0e"><a href="https://www.npmjs.com/package/@jetbrains/youtrack-scripting-api" rel="noopener noreferrer" data-external="true" target="_blank">youtrack-scripting-api</a>程序包包含完整的YouTrack工作流程API。当您将此程序包插入代码编辑器时，您的代码完成工具会为API中可用的所有实体建议有效的函数，方法和属性。</p>    </div>    <div class="chapter"><h2 id="youtrack-scripting" data-toc="js-workflow-external-editor#youtrack-scripting">工作流程脚本包</h2>        <p id="7c45cf88"><a href="https://www.npmjs.com/package/@jetbrains/youtrack-scripting" rel="noopener noreferrer" data-external="true" target="_blank">youtrack-scripting</a>程序包包含实用程序，这些实用程序可帮助您在外部代码编辑器中工作时管理YouTrack工作流。这样，您就可以在首选的开发环境中使用JavaScript编写和更新YouTrack的工作流程。</p>        <p id="2db652f7">该软件包包括脚本，可让您将本地更改与YouTrack安装同步。可以使用以下命令：</p>        <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="edeb19d9"><thead><tr id="dedbbfd3" class="ijRowHead"><th id="df2c4074"><p>命令</p></th><th id="1a1cae18"><p>描述</p></th></tr></thead><tbody><tr id="26fded80" class="ijRowOdd"><td id="cb488193"><p>清单</p></td><td id="8e5ce1e8"><p id="b389e15b">此命令列出了YouTrack安装中可用的所有工作流程。要使用此命令，请指定以下参数：</p>                    <ul class="list _ul"><li class="list__item" id="76725542"><p id="f26be617"><code class="code">host</code> —您的YouTrack基本URL。</p>                            <p id="f547e02b">对于YouTrack InCloud实例，您的基本URL包括结尾<code class="code">/youtrack</code> 。例如：<code class="code">https://company.myjetbrains.com/youtrack</code></p></li><li class="list__item" id="528cf5cb"><p id="06088f7c"><code class="code">token</code> —授予访问YouTrack服务的永久令牌。</p>                            <p id="6387e313">您可以在集线器帐户的“ <span class="control">身份验证”</span>选项卡上生成自己的永久令牌以通过YouTrack进行<span class="control">身份验证</span> 。有关更多信息，请参阅<a href="Manage-Permanent-Token.html">管理永久令牌</a> 。</p>                                <p id="8965d290">此命令使用以下语法：</p>                            <div class="code-block" data-lang="bash">youtrack-工作流程列表--host --token</div> </li></ul></td></tr><tr id="3a458a3f" class="ijRowEven"><td id="8bca145d"><p>下载</p></td><td id="8eadf005"><p>此命令从YouTrack安装中下载引用的工作流程。<br>如果未使用output参数指定目录， <workflowname>则会在当前工作目录中创建一个具有名称的<workflowname>目录。工作流文件被提取到新目录中。否则，工作流程将下载到输出参数中指定的目录中。<br>                    <br>此命令使用以下语法：</workflowname></workflowname></p><div class="code-block" data-lang="bash">youtrack-workflow下载<workflowname>--host --token [-输出]</workflowname></div><p></p></td></tr><tr id="2eebad44" class="ijRowOdd"><td id="7fed7e7e"><p>上载</p></td><td id="2960b5bd"><p>此命令将工作流程从指定目录上载到YouTrack安装。首先，脚本检查参考目录中是否存在<code class="code">package.json</code>包含工作流名称的文件。如果文件不存在或未指定工作流程名称，则将目录名称用作上载的工作流程名称。<br>                    <br>此命令使用以下语法：</p><div class="code-block" data-lang="bash">youtrack-工作流程上传<dir>--host --token</dir></div><p></p></td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="basic-scripting-package-installation" data-toc="js-workflow-external-editor#basic-scripting-package-installation">套件安装</h2>        <p id="4ececccc">要在IDE中使用这些软件包，您需要安装并运行<a href="https://nodejs.org/en/" rel="noopener noreferrer" data-external="true" target="_blank">Node.js。</a>这还将安装npm程序包管理器，使您可以在项目中使用脚本程序包。</p>        <aside class="prompt" rel="4ececccc" id="53a797b2" data-type="note" data-title=""><p id="794d6114"><b id="247abc98">Node.js</b>是<b id="42f6ae67">Joyent，Inc.</b>的商标<b id="42f6ae67">，</b>并经其许可使用。Joyent不认可或不隶属于我们。</p></aside>        <p id="0537c893">接下来，在您的开发环境中安装工作流程包。最简单的入门方法是使用以下命令在全局范围内安装软件包：</p>        <div class="code-block" data-lang="bash">npm install -g @ jetbrains / youtrack-scripting-api npm install -g @ jetbrains / youtrack-scripting</div>        <p id="6ff90883">如果您希望将软件包安装为开发环境中的依赖项，请输入：</p>        <div class="code-block" data-lang="bash">npm install --save-dev @ jetbrains / youtrack-scripting-api npm install --save-dev @ jetbrains / youtrack-scripting</div>        <p id="74f965cc">只要您的安装不使用您自己的证书颁发机构（CA）颁发的证书或自签名证书，您就可以使用个人永久令牌建立连接。您可以在集线器帐户的“身份验证”选项卡上生成自己的永久令牌。有关说明，请参阅<a href="Manage-Permanent-Token.html#obtain-permanent-token">创建永久令牌</a> 。</p>        <p id="2abf91d2">如果使用的证书不是由已知CA颁发的，则需要在Node.js环境中使用特定的变量来启用IDE和YouTrack安装之间的连接。有关说明，请参阅<a href="#special-instructions-ssl-certificates">SSL证书特别说明</a> 。</p>        <p id="bf69f803">如果您只有几个自定义工作流程并且不需要非常频繁地更新它们，则可以使用基本脚本包。对于常规更新，需要在每个请求中指定主机和令牌有点麻烦。请按照下一节中的说明简化此过程，并流畅地使用这些命令。</p>    </div>    <div class="chapter"><h2 id="custom-commands-scripting-package" data-toc="js-workflow-external-editor#custom-commands-scripting-package">使用自定义命令</h2>        <p id="bfcae9a7">您可以通过编写自己的脚本来简化所支持的命令。该脚本提取用于建立与YouTrack安装的连接的变量，并将其存储在本地配置中。</p>            <p id="2687ba66">您要在本地提取和存储的第一个参数是用于身份验证的永久令牌。为了确保此令牌的安全，您要将其存储在个人配置文件中。</p>            <section class="procedure-steps"><h3 id="3887eb58">要将永久令牌添加到每个用户的配置文件中：</h3><ol class="list _decimal"><li class="list__item" id="18af27d5"><p>如上所述产生永久的标记<a href="Manage-Permanent-Token.html#obtain-permanent-token">在这里</a> 。生成令牌时，请将<span class="control">YouTrack</span>服务添加到“ <span class="control">范围”</span>输入字段。</p></li><li class="list__item" id="abc71ec2"><p>将令牌复制到剪贴板。</p></li><li class="list__item" id="e623dbac"><p>切换到IDE中的命令行界面，并使用以下命令将令牌添加到每个用户的配置文件中：</p><div class="code-block" data-lang="none">npm配置设置token_prod<token></token></div>用<token>剪贴板中的永久令牌替换<token>。<p></p></token></token></li><li class="list__item" id="a0f3aa0d"><p>使用以下命令验证令牌已添加到您的配置中：</p><div class="code-block" data-lang="none">npm配置列表--json</div>                <p></p></li></ol></section>           <p id="589c9e48">接下来，将您引用的YouTrack安装地址保存为主机参数。您也可以将该参数保存在每个用户的配置文件中。</p>        <section class="procedure-steps"><h3 id="eb7d1b78">要将主机变量存储在每个用户的配置文件中：</h3><ol class="list _decimal"><li class="list__item" id="b612ebc9"><p>在CLI中输入以下命令：</p><div class="code-block" data-lang="none">npm配置设置host_prod<address></address></div>更换<address>与您的YouTrack安装的基本URL。对于InCloud实例，请确保包含尾随<code class="code">/youtrack</code> 。<p></p></address></li><li class="list__item" id="6c42b590"><p>使用以下命令验证令牌已添加到您的配置中：</p><div class="code-block" data-lang="none">npm配置列表--json</div>            <p></p></li></ol></section>        <p id="1f7fa97f">环境变量的引用因操作系统而异。为了确保您的脚本在任何环境中均可工作，您可以安装一个软件包，该软件包可让您跨平台设置和使用环境变量。</p>        <p id="9a57532e">这样的软件包之一就是<a href="https://www.npmjs.com/package/cross-env" rel="noopener noreferrer" data-external="true" target="_blank">cross-env</a> 。它会在运行时自动将每个变量转换为对操作系统使用正确的语法。</p>        <p id="273343ad">要在您的devDependencies中安装此软件包，请输入以下命令：</p>            <div class="code-block" data-lang="none">npm install --save-dev跨环境</div>            <p id="2bf490af">现在，您可以像在POSIX系统上运行一样设置所有变量。</p>            <p id="c7097b74">最后一步是编写引用这些参数的脚本。最快的方法是创建一个<code class="code">package.json</code>文件，然后将脚本添加到脚本字段。</p>            <section class="procedure-steps"><h3 id="543f567b">要创建文件并生成脚本：</h3><ol class="list _decimal"><li class="list__item" id="4eeb4e2c"><p>在您的CLI中，输入命令<code class="code">npm init</code> 。这将启动一个实用程序，可帮助您构建JSON文件。</p></li><li class="list__item" id="fc4734b6"><p>对于文件中的每个字段，请指定一个新值或接受建议的默认值。为所有字段指定值后，将在CLI中显示JSON。</p></li><li class="list__item" id="bdff16f9"><p id="cecf74cd">通过接受提示确认文件的创建<code class="code">Is this ok? (yes)</code> 。</p>                <ul class="list _ul"><li class="list__item" id="da47a62a"><p>的<code class="code">package.json</code>文件添加到当前项目。</p></li></ul></li><li class="list__item" id="887ab9f2"><p id="0dc61e49">打开<code class="code">package.json</code>文件并编辑脚本字段。您也可以从文件中删除不相关的字段。使用以下示例作为指导。</p>                <div class="code-block" data-lang="json">{“名称”：“ myyoutrackworkflows”，“版本”：“ 1.0.0”，“描述”：“我的YouTrack安装的自定义工作流程”，“脚本”：{“列表产品”：“跨环境youtrack-workflow list --host = $ npm_config_host_prod --token = $ npm_config_token_prod“，” download-prod“：”跨环境youtrack-工作流下载--host = $ npm_config_host_prod --token = $ npm_config_token_prod“，” upload-prod“：”跨环境youtrack-workflow上传--host = $ npm_config_host_prod --token = $ npm_config_token_prod“}，” author“：” Me“，” devDependencies“：{” @ jetbrains / youtrack-scripting“：” 0.0。XX”，“ @ jetbrains / youtrack-scripting-api”：“ 20XX.X.XXXXX”，“ cross-env”：“ ^ 5.1.1”}}</div>                <p id="f2b9797c">设置值<code class="code">@jetbrains/youtrack-scripting</code>和<code class="code">@jetbrains/youtrack-scripting-api</code>参数以匹配当前版本<code class="code">youtrack-scripting</code>和<code class="code">youtrack-scripting-api</code>包。</p>                </li></ol></section>        <p id="077c7b1c">此时，您可以运行Windows 2000支持的所有命令。 <code class="code">youtrack-scripting</code>软件包，而不必为主机和令牌指定变量。使用以下命令运行脚本：</p>        <ul class="list _ul"><li class="list__item" id="9ebc71c3"><code class="code">npm run list-prod</code></li><li class="list__item" id="04fa8da7"><code class="code">npm run download-prod -- <workflow name></code></li><li class="list__item" id="4c51f018"><code class="code">npm run upload-prod -- <workflow name></code></li></ul>            <p id="2ebbf83f">基本过程如下：</p>        <ol class="list _decimal"><li class="list__item" id="90ac3815"><p>使用<code class="code">download</code>命令将工作流程从安装复制到开发环境。</p></li><li class="list__item" id="508cc1c5"><p>进行更改。</p></li><li class="list__item" id="a0405ca5"><p>使用<code class="code">upload</code>命令以更新YouTrack中的工作流程。</p></li></ol>        <p id="369cb822">请记住，您仍在将更新直接推送到生产环境。对于许多开发人员而言，这就像在玩火。如果您想以更可控的方式工作，请按照下一节中的说明进行操作，以确保安全。</p>    </div>    <div class="chapter"><h2 id="connect-test-environment" data-toc="js-workflow-external-editor#connect-test-environment">连接到测试环境</h2>        <p id="996c2967">使用外部编辑器编写工作流程的主要优点之一是，您可以连接到多个YouTrack安装。与任何代码开发项目一样，您应该首先在沙盒环境中上传并测试所做的更改。仅在确定它可以按预期运行时，才应在生产中部署代码。</p>        <p id="b77ee982">我们建议您创建自己的沙箱环境。我们的免费计划是测试工作流程的绝佳解决方案。</p>        <ul class="list _ul"><li class="list__item" id="2b0fd3f2"><p>如果您的生产环境是YouTrack Standalone安装，则可以下载并安装本地副本并使用免费计划。您可以将本地安装更新为与生产环境相同的版本，以确保工作流按预期运行。</p></li><li class="list__item" id="31b4e4d3"><p>如果您使用YouTrack InCloud，则可以注册使用免费计划的单独实例。我们的托管服务器会自动升级到最新版本的YouTrack。</p></li></ul>        <p id="35c7b21c">在测试环境中设置帐户后，可以将安装中的变量添加到配置文件中并更新脚本。</p>            <section class="procedure-steps"><h3 id="1aa9013e">调整脚本以连接到测试环境：</h3><ol class="list _decimal"><li class="list__item" id="21348587"><p>使用以下命令将测试环境中的永久令牌存储在配置文件中：</p><div class="code-block" data-lang="none">npm配置设置token_test</div><p></p></li><li class="list__item" id="61d3b179"><p>使用以下命令存储测试环境的主机名：</p><div class="code-block" data-lang="none">npm配置设置host_test</div><p></p></li><li class="list__item" id="03568abd"><p>更新你的<code class="code">package.json</code>文件以包含脚本，这些脚本使您可以在测试环境中管理工作流程。使用以下示例作为指导。</p><div class="code-block" data-lang="json">{“名称”：“ myyoutrackworkflows”，“版本”：“ 1.0.0”，“描述”：“我的YouTrack安装的自定义工作流程”，“脚本”：{“列表产品”：“跨环境youtrack-workflow list --host = $ npm_config_host_prod --token = $ npm_config_token_prod“，” download-prod“：”跨环境youtrack-工作流下载--host = $ npm_config_host_prod --token = $ npm_config_token_prod“，” upload-prod“：”跨环境youtrack-工作流程上传--host = $ npm_config_host_prod --token = $ npm_config_token_prod“，”列表测试“：”跨环境youtrack-工作流程列表--host = $ npm_config_host_test --token = $ npm_config_token_test“，” download-test”：“ cross-env youtrack-workflow下载--host = $ npm_config_host_test --token = $ npm_config_token_test”，“ upload-test”：“ cross-env youtrack-workflow upload --host = $ npm_config_host_test --token = $ npm_config_token_test“}，” author“：” Me“，” devDependencies“：{” @ jetbrains / youtrack-scripting“：” 0.0。XX”，“ @ jetbrains / youtrack-scripting-api”：“ 20XX.X.XXXXX”，“ cross-env”：“ ^ 5.1.1”}}</div> <p></p></li></ol></section>        <p id="89d1e93b">现在，您可以玩火而不会被烧死！您的典型过程如下所示：</p>        <ol class="list _decimal"><li class="list__item" id="9ce523c2"><p>使用以下命令从生产环境下载工作流程：</p><div class="code-block" data-lang="none">npm运行下载产品-<workflow name=""></workflow></div><p></p></li><li class="list__item" id="4fd704ce"><p>在您的IDE中更新工作流程。</p></li><li class="list__item" id="8a2cf7b8"><p>使用以下命令将修改后的工作流程上传到您的测试环境：</p><div class="code-block" data-lang="none">npm运行上传测试-<workflow name=""></workflow></div><p></p></li><li class="list__item" id="a3469e2d"><p>在YouTrack沙箱环境中测试工作流程。</p></li><li class="list__item" id="e63361cd"><p>重复步骤2到4，直到您的工作流表现正常。</p></li><li class="list__item" id="59a0ce40"><p>使用以下命令将工作流的最终版本上传到生产环境：</p><div class="code-block" data-lang="none">npm运行upload-prod-<workflow name=""></workflow></div><p></p></li></ol>        <p id="3819d756">如果您是唯一负责定制YouTrack安装的人员，则可以在此处停止。通过此设置，您可以在自己喜欢的开发环境中专门工作时安全地更新工作流程。</p>        <p id="d77fcac8">如果组织中还有其他开发人员为自己的项目编写脚本，那么您可能希望使每个人都一起工作。按照下一节中的说明进行操作，并与您的团队共享此设置。</p>    </div>    <div class="chapter"><h2 id="working-as-team-workflows" data-toc="js-workflow-external-editor#working-as-team-workflows">团队合作</h2>        <p id="32c55d69">本节中安装最大的优点之一就是支持协作。通过一些修改，您可以构建一个平台，其他开发人员可以使用该平台来管理YouTrack安装中的工作流。由于此设置不是特定于任何单个环境的，因此这些开发人员可以与在任何操作系统中支持JavaScript的任何IDE一起使用。</p>        <p id="e6c08d31">您可以做的第一件事就是修改您的<code class="code">package.json</code>文件。每个使用此设置的开发人员都需要生成并存储自己的个人令牌，但是用于主机的变量对于每个人都是相同的。</p>        <p id="70d8d07e">要简化其他用户的设置，您可以将这些变量拉入<code class="code">package.json</code>文件并更新脚本中的引用。使用以下示例作为指导。</p>        <div class="code-block" data-lang="json">{“名称”：“ ouryoutrackworkflows”，“版本”：“ 1.0.0”，“描述”：“用于我们的YouTrack安装的自定义工作流”，“ config”：{“ host_prod”：“ https://youtrack.company。 com“，” host_test“：” https://workflow.myjetbrains.com/youtrack“}，”脚本“：{” list-prod“：”跨环境youtrack-workflow列表--host = $ npm_package_config_host_prod --token = $ npm_config_token_prod“，” download-prod“：”跨环境youtrack-工作流下载--host = $ npm_package_config_host_prod --token = $ npm_config_token_prod“，” upload-prod“：”跨环境youtrack-工作流上传--host = $ npm_package_config_host_prod --token = $ npm_config_token_prod“，”列表测试“：”跨环境youtrack-工作流列表--host = $ npm_package_config_host_test --token = $ npm_config_token_test“，”下载测试“：”跨环境youtrack -workflow下载--host = $ npm_package_config_host_test --token = $ npm_config_token_test“，”上载测试“：”跨环境youtrack-workflow上载--host = $ npm_package_config_host_test --token = $ npm_config_token_test“}，”作者“： “我”，“ devDep endencies”：{“ @ jetbrains / youtrack-scripting”：“ 0.0。XX”，“ @ jetbrains / youtrack-scripting-api”：“ 20XX.X.XXXXX”，“ cross-env”：“ ^ 5.1.1”}}</div>        <p id="5ff7e93b">请注意，如何引用<code class="code">host</code>存储在<code class="code">config</code>领域。脚本已更新，可以从<code class="code">package.json</code>与文件<code class="code">$npm_package_config</code>而不只是<code class="code">$npm_config</code> 。</p>        <p id="affb1132">最后一步是将您的项目上载到资源库。当您将项目上载到资源库时，其他用户可以按照以下步骤并开始编码：</p>        <ul class="list _ul"><li class="list__item" id="1992a67a"><p>连接到资源库并下载项目的本地副本。确保包括<code class="code">package.json</code>在您的项目文件中。</p></li><li class="list__item" id="f033bb77"><p>为每个脚本支持的YouTrack安装生成个人永久令牌，并将它们另存为变量在其个人配置文件中。</p></li></ul>        <p id="a21b3a98">现在，每个开发人员都应该能够执行以下操作：</p>        <ul class="list _ul"><li class="list__item" id="4aa765ad"><p>从资源库下载项目文件。</p></li><li class="list__item" id="96d5c4de"><p>在其本地环境中更新工作流程脚本。</p></li><li class="list__item" id="2dcfea67"><p>在沙盒中上载并测试其更新，直到它们的行为符合预期。</p></li><li class="list__item" id="06a6100e"><p>将修改后的脚本上传到生产环境。</p></li><li class="list__item" id="436c17d7"><p>将其更改推回存储库，以更新修订后的脚本的版本。</p></li></ul>        <p id="f2b005ef">有关真实示例，请查看我们的<a href="https://github.com/JetBrains/youtrack-workflows" rel="noopener noreferrer" data-external="true" target="_blank">YouTrack自定义工作流存储库</a> 。在这里，我们上载了支持一系列用例的工作流，这些用例未被YouTrack中的默认工作流覆盖。欢迎每个人从存储库下载脚本并进行调整以适合特定的业务案例。如果您有想要与社区共享的脚本，请提交请求请求！</p>    </div>    <div class="chapter"><h2 id="special-instructions-ssl-certificates" data-toc="js-workflow-external-editor#special-instructions-ssl-certificates">SSL证书特别说明</h2>        <p id="f4ef580c">如果您的YouTrack域使用由已知证书颁发机构颁发的SSL证书，则可以仅使用您的个人永久令牌来建立连接。您的证书已经包含在Node.js内置的CA证书存储中。对于由无法自动识别或自签名的CA颁发的证书，您需要修改Node.js中的环境变量以识别或忽略您的证书。</p>        <div class="chapter"><h3 id="private-certificate-authorities">私人证书颁发机构</h3>            <p id="c155b300">如果您的证书是由无法自动识别的CA颁发的，则需要将您的证书添加到Node.js可以识别的证书列表中。</p>            <p id="92790766">要添加证书，请使用环境变量<code class="code">NODE_EXTRA_CA_CERTS=file</code>在您的脚本中。Node.js版本v7.3.0（或LTS版本6.10.0和4.8.0）和更高版本支持此变量。</p>            <section class="procedure-steps"><h3 id="4706c12a">要使用私人证书：</h3><ol class="list _decimal"><li class="list__item" id="bc6a0776"><p>在网络浏览器中打开您的YouTrack安装。</p></li><li class="list__item" id="25f280b4"><p>使用您的浏览器工具导出证书。具体说明因浏览器而异。</p></li><li class="list__item" id="80e9b716"><p>将证书文件存储在可从开发环境访问的目录中。</p></li><li class="list__item" id="e80b458b"><p>将引用设置为私有配置中的目录。例如：</p><div class="code-block" data-lang="none">npm配置设置cert_prod<path></path></div>替换<path>为证书文件的完整路径。<p></p></path></li><li class="list__item" id="a54ee285"><p>修改您的脚本以引用额外的CA证书。使用以下示例作为指导。</p><div class="code-block" data-lang="json">{“名称”：“ ouryoutrackworkflows”，“版本”：“ 1.0.0”，“描述”：“用于我们的YouTrack安装的自定义工作流”，“ config”：{“ host_prod”：“ https://youtrack.company。 com“，}，” scripts“：{” list-prod“：”跨环境NODE_EXTRA_CA_CERTS = \“ $ npm_config_cert_prod \” youtrack-工作流程列表--host = $ npm_package_config_host_prod --token = $ npm_config_token_prod“，”下载产品“：”跨环境NODE_EXTRA_CA_CERTS = \“ $ npm_config_cert_prod \” youtrack-workflow下载--host = $ npm_package_config_host_prod --token = $ npm_config_token_prod“，”上载产品“：”跨环境NODE_EXTRA_pro_d“ \ n” youtrack-workflow upload --host = $ npm_package_config_host_prod --token = $ npm_config_token_prod“，}，” author“：” Me“，” devDependencies“：{” @ jetbrains / youtrack-scripting“：” 0.0。XX”，“ @ jetbrains / youtrack-scripting-api”：“ 20XX.X.XXXXX”，“ cross-env”：“ ^ 5.1.1”}}</div> <p></p></li></ol></section>        </div>        <div class="chapter"><h3 id="self-signed-certificates">自签名证书</h3>            <p id="44446a8d">如果您在封闭环境中工作并使用自签名证书，则可以使用环境变量禁用通过TLS的安全连接<code class="code">NODE_TLS_REJECT_UNAUTHORIZED=0</code> 。</p>             <p id="2385c550">以下示例显示了如何在禁用TLS连接的情况下连接到本地计算机。</p>            <div class="code-block" data-lang="json">{“名称”：“ ouryoutrackworkflows”，“版本”：“ 1.0.0”，“描述”：“我们的YouTrack安装的自定义工作流程”，“ config”：{“ host_local”：“ http：// localhost：8081 / “，}，”脚本“：{” list-local“：”跨环境NODE_TLS_REJECT_UNAUTHORIZED = 0 youtrack-workflow list --host = $ npm_package_config_host_prod --token = $ npm_config_token_prod“，”本地下载“：”跨环境NODE_TLS_REJECT_UNAUTHORIZED = 0 youtrack-workflow下载--host = $ npm_package_config_host_prod --token = $ npm_config_token_prod“，” upload-local“：”跨环境NODE_TLS_REJECT_UNAUTHORIZED = 0 youtrack-workflow上载--host = $ nto_pro_d “，}，” author“：” Me“，” devDependencies“：{” @ jetbrains / youtrack-scripting“：” 0.0。XX”，“ @ jetbrains / youtrack-scripting-api”：“ 20XX.X.XXXXX”，“ cross-env”：“ ^ 5.1.1”}}</div>            <p id="97b0a5aa">即使这种变通办法通常是在开发环境中完成的，但它也不安全。如果您不知道潜在的陷阱，请避免这种做法。切勿使用此变量连接到生产环境。</p>        </div>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Web-based-Workflow-Editor.html">基于Web的工作流编辑器</a> <a class="navigation-links__next" href="Create-Workflow.html">创建工作流</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>