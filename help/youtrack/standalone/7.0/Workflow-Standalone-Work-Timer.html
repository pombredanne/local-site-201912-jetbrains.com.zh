<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><title>YouTrack Standalone 7.0 Help :: Standalone Work Timer</title><link rel="stylesheet" href="/help/app/app.css"></head><body data-id="Workflow-Standalone-Work-Timer"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><div class="wrapper"><section class="panel _nav"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search YouTrack Standalone Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header"><div class="container"><h3>YouTrack Standalone 7.0 Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="default" selected>Default (Windows/Linux)</option><option data-group="secondary" value="mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="mac_os_x">OS X</option><option data-group="secondary" value="eclipse_mac_os_x">OS X Eclipse</option><option data-group="secondary" value="intellij_idea_classic_os_x">IntelliJ IDEA Classic (OS X)</option><option data-group="secondary" value="xcode">Xcode</option><option data-group="secondary" value="visual_studio">Visual Studio</option><option data-group="secondary" value="resharper">ReSharper</option><option data-group="secondary" value="resharper_osx">ReSharper OSX</option><option data-group="secondary" value="emacs">Emacs</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="false"><div class="navigation-links _top"><a class="navigation-links__prev" href="Workflow-Assignee-Visibility-Group.html">Assignee Visibility Group</a><a class="navigation-links__next" href="Workflow-Subsystem-Assignee.html">Subsystem Assignee</a></div><h1>Standalone Work Timer</h1><a name="d220892e3"></a><p>This workflow enables a timer that tracks the amount of time spent working on an issue.</p><table class="left_header" width="100%" id="d220892e6"><tbody><tr id="d220892e8" class="ijRowOdd"><a name="d220892e8"></a><th><a name="d220892e10"></a>File Name</th><td><a name="d220892e13"></a>jetbrains-youtrack-standaloneWorkTimer</td></tr><tr id="d220892e17" class="ijRowEven"><a name="d220892e17"></a><th><a name="d220892e19"></a>Auto-attached</th><td><a name="d220892e22"></a>no</td></tr><tr id="d220892e26" class="ijRowOdd"><a name="d220892e26"></a><th><a name="d220892e28"></a>Rules</th><td><a name="d220892e31"></a><a href="#Start">Start timer: switch to 'Start'</a> (stateless)<br>
                <a href="#Stop">Stop timer: switch to 'Stop'</a> (stateless)</td></tr></tbody></table><a name="d220892e41"></a><p><a name="d220892e42"></a><b id="d220892e42">To enable this workflow:</b></p><a name="d220892e45"></a><a name="dynaProc0"></a><section class="procedure-steps"><ol class=".list _decimal"><li class="list__item">Enable and configure time tracking for your project.</li><li class="list__item">Add an enumerated field with the name <a name="d220892e52"></a><span class="control">Timer</span> to your project.
        Add the values <a name="d220892e55"></a><span class="control">Start</span> and <a name="d220892e58"></a><span class="control">Stop</span> to the field.</li><li class="list__item">Add a date-type field with the name <a name="d220892e64"></a><span class="control">Timer time</span> to your project.</li><li class="list__item">Attach the <a name="d220892e70"></a><span class="control">Work Timer</span> workflow to your project.</li></ol></section><a name="d220892e75"></a><h2>Use Case</h2>
        <a name="d220892e77"></a><p>This workflow enables a timer that you can use to track the amount of time you spend working on an issue.
            When you stop the timer, the elapsed time is automatically added to the issue as a work item.</p>
    <a name="d220892e82"></a><h2>Rules</h2>
        <a name="d220892e84"></a><p>This workflow includes two rules.</p>
<a name="Start"></a><h3>Start timer: switch to 'Start'</h3>
        <a name="d220892e89"></a><p>The first rule starts the timer.</p>

        <a name="d220892e92"></a><div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="nx">rule</span> <span class="nx">Start</span> <span class="nx">timer</span><span class="o">:</span> <span class="k">switch</span> <span class="nx">to</span> <span class="s1">&#39;Start&#39;</span>
<span class="nx">when</span> <span class="nx">Timer</span><span class="p">.</span><span class="nx">becomes</span><span class="p">({</span><span class="nx">Start</span><span class="p">})</span> <span class="p">{</span>
    <span class="nx">Timer</span> <span class="nx">time</span> <span class="o">=</span> <span class="nx">now</span><span class="p">;</span>
    <span class="nx">message</span><span class="p">(</span><span class="nx">l10n</span> <span class="p">(</span> <span class="nx">The</span> <span class="nx">timer</span> <span class="nx">is</span> <span class="nx">started</span><span class="p">.</span> <span class="p">));</span>
<span class="p">}</span></code></div>
        <a name="d220892e95"></a><p>The second rule stops the timer. The elapsed time is added to the issue as a work item.</p>
         
    <a name="Stop"></a><h3>Stop timer: switch to 'Stop'</h3>
        <a name="d220892e101"></a><div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="nx">rule</span> <span class="nx">Stop</span> <span class="nx">timer</span><span class="o">:</span> <span class="k">switch</span> <span class="nx">to</span> <span class="s1">&#39;Stop&#39;</span>

<span class="nx">when</span> <span class="nx">Timer</span><span class="p">.</span><span class="nx">becomes</span><span class="p">({</span><span class="nx">Stop</span><span class="p">})</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">Timer</span><span class="p">.</span><span class="nx">oldValue</span> <span class="o">==</span> <span class="p">{</span><span class="nx">Start</span><span class="p">})</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">duration</span> <span class="o">=</span> <span class="nx">now</span> <span class="o">-</span> <span class="nx">Timer</span> <span class="nx">time</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">seconds</span> <span class="o">=</span> <span class="p">(</span><span class="nx">duration</span><span class="p">.</span><span class="nx">millis</span> <span class="o">-</span> <span class="nx">duration</span><span class="p">.</span><span class="nx">millis</span> <span class="o">%</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">minutes</span> <span class="o">=</span> <span class="p">(</span><span class="nx">seconds</span> <span class="o">-</span> <span class="nx">seconds</span> <span class="o">%</span> <span class="mi">60</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">hours</span> <span class="o">=</span> <span class="p">(</span><span class="nx">minutes</span> <span class="o">-</span> <span class="nx">minutes</span> <span class="o">%</span> <span class="mi">60</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">days</span> <span class="o">=</span> <span class="p">(</span><span class="nx">hours</span> <span class="o">-</span> <span class="nx">hours</span> <span class="o">%</span> <span class="mi">24</span><span class="p">)</span> <span class="o">/</span> <span class="mi">24</span><span class="p">;</span>

        <span class="nx">minutes</span> <span class="o">=</span> <span class="nx">minutes</span> <span class="o">%</span> <span class="mi">60</span><span class="p">;</span>
        <span class="nx">hours</span> <span class="o">=</span> <span class="nx">hours</span> <span class="o">%</span> <span class="mi">24</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">days</span> <span class="o">!=</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">message</span><span class="p">(</span><span class="nx">l10n</span> <span class="p">(</span> <span class="nx">Work</span> <span class="nx">time</span><span class="o">:</span> <span class="p">{</span><span class="nx">days</span><span class="p">}</span> <span class="nx">day</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span><span class="nx">hours</span><span class="p">}</span> <span class="nx">hour</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span><span class="nx">minutes</span><span class="p">}</span> <span class="nx">minute</span><span class="p">(</span><span class="nx">s</span><span class="p">).</span> <span class="p">));</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">hours</span><span class="o">!=</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">message</span><span class="p">(</span><span class="nx">l10n</span> <span class="p">(</span> <span class="nx">Work</span> <span class="nx">time</span><span class="o">:</span> <span class="p">{</span><span class="nx">hours</span><span class="p">}</span> <span class="nx">hour</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span><span class="nx">minutes</span><span class="p">}</span> <span class="nx">minute</span><span class="p">(</span><span class="nx">s</span><span class="p">).</span> <span class="p">));</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">message</span><span class="p">(</span><span class="nx">l10n</span> <span class="p">(</span> <span class="nx">Work</span> <span class="nx">time</span><span class="o">:</span> <span class="p">{</span><span class="nx">minutes</span><span class="p">}</span> <span class="nx">minute</span><span class="p">(</span><span class="nx">s</span><span class="p">).</span> <span class="p">));</span>
        <span class="p">}</span>
        <span class="nx">issue</span><span class="p">.</span><span class="nx">applyCommand</span><span class="p">(</span><span class="nx">l10n</span> <span class="p">(</span> <span class="nx">add</span> <span class="nx">work</span> <span class="nx">Today</span> <span class="p">{</span><span class="nx">days</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">}</span> <span class="nx">d</span> <span class="p">{</span><span class="nx">hours</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">}</span> <span class="nx">h</span> <span class="p">{</span><span class="nx">minutes</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">}</span> <span class="nx">m</span> <span class="p">)</span>
            <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">l10n</span> <span class="p">(</span> <span class="nx">The</span> <span class="nx">work</span> <span class="nx">item</span> <span class="nx">automatically</span> <span class="nx">added</span> <span class="nx">by</span> <span class="nx">the</span> <span class="nx">timer</span><span class="p">.</span> <span class="p">));</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">message</span><span class="p">(</span><span class="nx">l10n</span> <span class="p">(</span> <span class="nx">Looks</span> <span class="nx">like</span> <span class="nx">the</span> <span class="nx">timer</span> <span class="nx">hasn</span><span class="err">&#39;</span><span class="nx">t</span> <span class="nx">been</span> <span class="nx">started</span><span class="p">.</span> <span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span></code></div>
     
<div class="last-modified">Last modified: 2 February 2017 </div></article><div id="disqus_thread"></div></div></section></main></div><script></script><script src="/help/app/app.js"></script></body></html>