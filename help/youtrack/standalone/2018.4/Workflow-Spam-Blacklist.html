<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta name="robots" content="noindex"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta charset="UTF-8"><title>Profanity Blacklist - Help | YouTrack Standalone</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="Workflow-Spam-Blacklist"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search YouTrack Standalone Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2018.4 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="false"><h1 data-toc="Workflow-Spam-Blacklist" id="Workflow-Spam-Blacklist.xml">Profanity Blacklist</h1>  <p id="967c5d32">This workflow blocks the submission of a description or comment if it contains a word from the blacklist.</p>  <div class="table-wrapper"><table class="left_header                 " width="100%" id="4884cd17"><tbody><tr id="e515a76b" class="ijRowOdd"><th id="e10cbcc3" width="20%"><p>Name</p></th><td id="af76ddd9"><p>@jetbrains/youtrack-workflow-profanity-blacklist</p></td></tr><tr id="a72f6a7e" class="ijRowEven"><th id="52150255"><p>Previous Title</p></th><td id="138e9b1f"><p>Spam Blacklist</p></td></tr><tr id="0689c423" class="ijRowOdd"><th id="ba8a294e"><p>Auto-attached</p></th><td id="d0c82de4"><p>no</p></td></tr><tr id="9bc9afdd" class="ijRowEven"><th id="e86d3737"><p>Modules</p></th><td id="6bc9041e"><p>        <a href="#stop-word">Block descriptions and comments that contain stop words</a>        (on-change rule)<br>        <a href="#profanity-common">profanity-common.js</a> (custom script)      </p></td></tr></tbody></table></div>  <div class="chapter"><h2 id="d57a5585">Use Case</h2>    <p id="4f295905">This workflow prevents users from submitting issues or comments that contain offensive language.      You can edit the rule to add words to or remove words from the blacklist.    </p>  </div>  <div class="chapter"><h2 id="4e74525e">Modules</h2>    <p id="72a8f147">This workflow contains two modules. The first is an on-change rule that checks the description and comment to see if it contains any word on the blacklist.    The second module is a custom script.</p>    <div class="chapter"><h3 id="stop-word">Block descriptions and comments that contain stop words</h3>      <p id="af7642c2">When an issue is reported or updated, this rule checks the description and comment to see if it contains any word        on the blacklist.        If true, a warning is displayed. The user is informed that the description or comment contains one or more words        from the blacklist.      </p>      <div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="kd">var</span> <span class="nx">entities</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@jetbrains/youtrack-scripting-api/entities&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">workflow</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@jetbrains/youtrack-scripting-api/workflow&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">profanity</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./profanity-common&#39;</span><span class="p">);</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">rule</span> <span class="o">=</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">Issue</span><span class="p">.</span><span class="nx">onChange</span><span class="p">({</span>
  <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Block descriptions and comments that contain stop words&#39;</span><span class="p">,</span>
  <span class="nx">action</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">issue</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">issue</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">texts</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">texts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">issue</span><span class="p">.</span><span class="nx">getAdded</span><span class="p">(</span><span class="s1">&#39;comments&#39;</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">comment</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">add</span><span class="p">(</span><span class="nx">comment</span><span class="p">.</span><span class="nx">text</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="kd">var</span> <span class="nx">becomesReported</span> <span class="o">=</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">becomesReported</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">becomesReported</span> <span class="o">||</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">isChanged</span><span class="p">(</span><span class="s1">&#39;summary&#39;</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">add</span><span class="p">(</span><span class="nx">issue</span><span class="p">.</span><span class="nx">summary</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">becomesReported</span> <span class="o">||</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">isChanged</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">add</span><span class="p">(</span><span class="nx">issue</span><span class="p">.</span><span class="nx">description</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">texts</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">text</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>

      <span class="nx">profanity</span><span class="p">.</span><span class="nx">words</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">badWord</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">badWord</span><span class="p">);</span>

        <span class="k">while</span> <span class="p">(</span><span class="nx">index</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">sepBefore</span> <span class="o">=</span> <span class="nx">index</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">profanity</span><span class="p">.</span><span class="nx">separators</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">index</span><span class="p">))</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
          <span class="kd">var</span> <span class="nx">endIndex</span> <span class="o">=</span> <span class="nx">index</span> <span class="o">+</span> <span class="nx">badWord</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
          <span class="kd">var</span> <span class="nx">sepAfter</span> <span class="o">=</span> <span class="nx">endIndex</span> <span class="o">===</span> <span class="nx">text</span><span class="p">.</span><span class="nx">length</span> <span class="o">||</span> <span class="nx">profanity</span><span class="p">.</span><span class="nx">separators</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">endIndex</span><span class="p">,</span> <span class="nx">endIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

          <span class="nx">workflow</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">sepBefore</span> <span class="o">&amp;&amp;</span> <span class="nx">sepAfter</span><span class="p">),</span> <span class="nx">workflow</span><span class="p">.</span><span class="nx">i18n</span><span class="p">(</span><span class="s1">&#39;Prohibited to put the word {0}&#39;</span><span class="p">,</span> <span class="nx">badWord</span><span class="p">));</span>

          <span class="nx">index</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">badWord</span><span class="p">,</span> <span class="nx">endIndex</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span></code></div>    </div>    <div class="chapter"><h3 id="profanity-common">profanity-common.js</h3>      <p id="7d54f7b8">This custom script contains all of the words in the stop list.      This script is referenced in the on-change rule in the <code class="code" data-lang="Java">var profanity = require('./profanity-common');</code> declaration.</p>      <p id="d7a01c62">If you find any profane words that are reported in your issues or any other words that you want to block, you can update the list of words in this module without modifying the workflow rule.</p>      <div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="kd">var</span> <span class="nx">workflow</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@jetbrains/youtrack-scripting-api/workflow&#39;</span><span class="p">);</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">words</span> <span class="o">=</span> <span class="nx">workflow</span><span class="p">.</span><span class="nx">i18n</span><span class="p">(</span>
  <span class="s1">&#39;&lt;a comma-separated list of stop words&gt;&#39;</span>
<span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">word</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">word</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">separators</span> <span class="o">=</span> <span class="s1">&#39;~`!@#$%^&amp;*()-_+=[]{}:;\&#39;\&quot;\\|,&lt;.&gt;/? \n\r\t&#39;</span><span class="p">;</span></code></div>    </div>  </div><div class="last-modified" data-skip-index="skip">Last modified: 8 March 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Workflow-Pomodoro-Timer.html">Pomodoro Timer</a><a class="navigation-links__next" href="Workflow-Referred-Issues.html">Referred Issues</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>