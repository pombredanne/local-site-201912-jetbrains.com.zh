<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta name="robots" content="noindex"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta charset="UTF-8"><title>Integrate with TeamCity - Help | YouTrack Standalone</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="Configure-TeamCity-Integration"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search YouTrack Standalone Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2018.4 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="false"><h1 data-toc="Configure-TeamCity-Integration" id="Configure-TeamCity-Integration.xml">Integrate with TeamCity</h1>    <p id="674fa385">Follow the instructions on this page to integrate your YouTrack project with a build configuration in TeamCity.        The integration between YouTrack and TeamCity enables the following features in your project:</p>    <ul class="list _bullet"><li class="list__item" id="6a96fe7a"><p>Pull build numbers from connected projects and automatically update the values in custom fields that store build numbers for resolved issues.            Build numbers in YouTrack are appended with an icon that provides direct access to the build in TeamCity.            <figure><a class="lightbox" href="/help/img/youtrack/2018.4/set-fixed-in-build-teamcity.zoomed.png"><img alt="fixed in TeamCity build" title="fixed in TeamCity build" src="/help/img/youtrack/2018.4/set-fixed-in-build-teamcity.png" id="4babf1ab" width="600" height="288"></a></figure></p></li><li class="list__item" id="358122a8"><p>Add direct links to change details in VCS commits.</p></li><li class="list__item" id="223b79e5"><p>Apply commands to issues in commit messages when TeamCity assembles a build that contains the commit.</p></li></ul>    <div class="chapter"><h2 id="teamcity-integration-project-prerequisites" data-toc="Configure-TeamCity-Integration#teamcity-integration-project-prerequisites">Prerequisites</h2>        <p id="ede8da78">Before you start, verify the following requirements:</p>        <ul class="list _ul"><li class="list__item" id="b403d03e"><p>You have a user account in TeamCity that is assigned the Project Administrator role in the projects that you want to integrate with YouTrack.                If your TeamCity server uses simple authorization mode, Administrator permissions are required.</p></li><li class="list__item" id="ae67b3ee">                <p id="68ff94c7">The YouTrack project that you want to integrate with TeamCity uses a custom field that stores a value as a build type.                    You can use the default custom field <span class="control">Fixed in build</span> or any other custom field that stores a build type.</p>                <p id="8acd320b">If you don't want to add build numbers to issues, you can enable the integration without mapping build numbers to a custom field in YouTrack.                In this case, your developers can still mention issues and apply commands in VCS commit messages.</p>            </li></ul>    </div>    <div class="chapter"><h2 id="configure-connection" data-toc="Configure-TeamCity-Integration#configure-connection">Connect to a TeamCity Server</h2>        <p id="d737a4d4">To enable the integration in your project, YouTrack needs a connection to at least one TeamCity server.        If you have sufficient permissions in TeamCity, you can establish the connection yourself.</p>        <p id="661c8970">To connect to a TeamCity server, you need permission to <span class="control">View project and all parent projects</span> and <span class="control">Modify user profile and roles</span>.            Access to these permissions is based on the authorization mode that is used by your TeamCity server.</p>            <div class="table-wrapper"><table class="                 " width="100%" id="962bc957"><thead><tr id="e1a22a59" class="ijRowHead"><th id="cbc8bdef" width="20%"><p>Authorization Mode</p></th><th id="4c7e1f63"><p>Access Requirements</p></th></tr></thead><tbody><tr id="76afdc35" class="ijRowOdd"><td id="b3299019"><p>Simple</p></td><td id="80628bf5"><p>The default <span class="control">Administrator</span> role has both of the permissions that are required for the integration.</p></td></tr><tr id="0be018be" class="ijRowEven"><td id="3a34a3e5"><p>Per-project</p></td><td id="5f661fcf"><p>The default <span class="control">Project viewer</span> role has permission to <span class="control">View project and all parent projects</span>.                        The default <span class="control">Project developer</span> and <span class="control">Project administrator</span> roles include permissions for the <span class="control">Project viewer</span> by default.                        The permission to <span class="control">Modify user profile and roles</span> is not included and must be added to the role that is assigned to your account.                        Roles can be assigned to your account directly or at the group level.</p></td></tr></tbody></table></div>            <p id="9f11de94">For more information about roles and permissions, refer to the <a href="https://confluence.jetbrains.com/display/TCD18/Role+and+Permission" data-external="true" target="_blank" rel="noopener noreferrer"><span>TeamCity documentation</span></a>.</p>        <p id="238b7b18">If you don't have these permissions in TeamCity, a YouTrack administrator can configure the connection.            For details, see <a href="Integration-with-TeamCity.html"><span>TeamCity Integration</span></a>.</p>        <p id="dba65b90">If YouTrack is already integrated with the TeamCity server that processes builds that contain references to your project, skip this step and <a href="#define-mapping">define the mapping for your project</a>. </p>        <aside class="tip sideblock" data-title="Permissions" rel="connect-teamcity-project-procedure" id="cda852ed"><br><br>            <p id="2af2e1bd">— Read Project Basic</p>            <p id="ba38429a">— Update Project</p>            <p id="490e3542">TeamCity Permissions:</p>            <ul class="list _ul"><li class="list__item" id="8866c16c"><p>View project and all parent projects</p></li><li class="list__item" id="8b430a25"><p>Modify user profile and roles</p></li></ul>        </aside>        <section class="procedure-steps"><h2 id="connect-teamcity-project-procedure">To connect to a TeamCity server:</h2><ol class="list _decimal"><li class="list__item" id="e7a5046f"><p>Click the <span class="control">Projects</span> link in the header to open the <span class="control">Projects</span> list.</p></li><li class="list__item" id="f041b59a"><p>From the <span class="control">Administration</span> menu for your project, select <span class="control">Build Server Integration</span>.                <figure><a class="lightbox" href="/help/img/youtrack/2018.4/project-administration-build-server-integration.zoomed.png"><img alt="project administration build server integration" title="project administration build server integration" src="/help/img/youtrack/2018.4/project-administration-build-server-integration.png" id="931117bf" width="600" height="211"></a></figure>            </p></li><li class="list__item" id="b325f30b"><p id="1941d8d2">From the <span class="control">Add New Mapping</span> menu, select <span class="control">Add build server</span>.</p>                <figure><a class="lightbox" href="/help/img/youtrack/2018.4/project-add-build-server.zoomed.png"><img alt="add build server in project" title="add build server in project" src="/help/img/youtrack/2018.4/project-add-build-server.png" id="859e9b97" width="600" height="168"></a></figure>                <ul class="list _ul"><li class="list__item" id="a41d2b61"><p>The <span class="control">Add Build Server</span> dialog opens in the sidebar.</p></li></ul>                <figure><a class="lightbox" href="/help/img/youtrack/2018.4/add-teamcity-server-in-project.zoomed.png"><img alt="add TeamCity server" title="add TeamCity server" src="/help/img/youtrack/2018.4/add-teamcity-server-in-project.png" id="d5fdf1a9" width="600" height="289"></a></figure>        </li><li class="list__item" id="796ce55a"><p id="019f1d45">Enter values for the following settings:</p>                <div class="table-wrapper"><table class="                 " width="100%" id="423641c4"><thead><tr id="a566c555" class="ijRowHead"><th id="1498de66" width="20%"><p>Setting</p></th><th id="b035133c"><p>Description</p></th></tr></thead><tbody><tr id="4946215d" class="ijRowOdd"><td id="28a2aa29"><p>URL</p></td><td id="b25791c5"><p>Enter the URL of the TeamCity server.</p></td></tr><tr id="fea6044e" class="ijRowEven"><td id="d03c2b91"><p>Type</p></td><td id="7f781b08"><p>Select <span class="control">TeamCity</span>.</p></td></tr><tr id="c39234c4" class="ijRowOdd"><td id="6643eb70"><p>Login</p></td><td id="cdc0029d"><p>Enter the username of the TeamCity user account.</p></td></tr><tr id="d7e62a30" class="ijRowEven"><td id="a5b5a14e"><p>Password</p></td><td id="2dc145c0"><p>Enter the password for the TeamCity user account.</p></td></tr></tbody></table></div>            </li><li class="list__item" id="46f3f09c"><p id="1576e40e">Expand the <span class="control">Advanced settings</span> section and configure the following optional settings:</p>                <div class="table-wrapper"><table class="                 " width="100%" id="7ffb4eea"><thead><tr id="1e7e20a6" class="ijRowHead"><th id="6d8e9094" width="20%"><p>Setting</p></th><th id="71c9ed46"><p>Description</p></th></tr></thead><tbody><tr id="fd7c7189" class="ijRowOdd"><td id="d0855f58"><p>SSL key</p></td><td id="4d89df62"><p>If the TeamCity server uses a secure connection and you have uploaded an SSL client key to authenticate your YouTrack service,                            select the client key from the drop-down list.                            For more information, see <a href="SSL-Key-Stores.html"><span>SSL Keys</span></a>.</p></td></tr><tr id="2c344a66" class="ijRowEven"><td id="c88c7ff4"><p>Socket timeout</p></td><td id="8199f81c"><p>Set the maximum amount of time to wait for a response from the TeamCity server before disconnecting the socket.                            The default is 30 seconds.</p></td></tr><tr id="c71ff67a" class="ijRowOdd"><td id="166f7908"><p>Read timeout</p></td><td id="e62b5a5e"><p>Set the maximum amount of time to wait for complete data transfer from the TeamCity server before closing the connection.                            The default is 30 seconds.</p></td></tr></tbody></table></div>            </li><li class="list__item" id="965af3a6"><p id="9d932a41">Click the <span class="control">Test connection</span> button.</p>                <ul class="list _ul"><li class="list__item" id="b7cd4d04"><p>YouTrack verifies the connection to the TeamCity server.</p></li></ul></li><li class="list__item" id="ce9f0b57"><p id="d6410c7d">Click the <span class="control">Add server</span> button.</p>                <ul class="list _ul"><li class="list__item" id="8dc2844e"><p>The TeamCity server connection settings are saved.</p></li></ul></li></ol></section>        <p id="5ff3a91c">Repeat these steps to add connections to additional TeamCity servers.</p>    </div>    <div class="chapter"><h2 id="define-mapping" data-toc="Configure-TeamCity-Integration#define-mapping">Define the Mapping Between Projects</h2>        <a name="Mapping_Projects"></a>        <p id="5bac79f3">To enable the TeamCity integration in your project, you map your YouTrack project to a build configuration in TeamCity.</p>        <p id="afe4ab97">The first group of settings connect YouTrack to a build configuration for a project on a TeamCity server.            Additional options for the default and feature branches let you define which issues are assigned build numbers for each branch.            You can also specify the commands to apply to all of the issues that are processed by YouTrack.</p>        <aside class="tip sideblock" data-title="Permissions" rel="map-teamcity-project-procedure" id="4761ee67"><br><br>            <p id="af3d9801">— Read Project Basic</p>            <p id="84cef12c">— Update Project</p>        </aside>        <section class="procedure-steps"><h2 id="map-teamcity-project-procedure">To define a mapping between YouTrack and TeamCity:</h2><ol class="list _decimal"><li class="list__item" id="3db4373b"><p>On the <span class="control">Build Server Integration</span> tab of the <span class="control">Edit Project</span> page, select a Jenkins server in the list of build server integrations.</p></li><li class="list__item" id="c096d239"><p id="d347000e">Click the <span class="control">Create New Mapping</span> button.</p>                <ul class="list _ul"><li class="list__item" id="415b93d8"><p>The <span class="control">Create Mapping</span> dialog opens in the sidebar.                        <figure><a class="lightbox" href="/help/img/youtrack/2018.4/new-teamcity-mapping.zoomed.png"><img alt="new TeamCity mapping" title="new TeamCity mapping" src="/help/img/youtrack/2018.4/new-teamcity-mapping.png" id="7017c2ad" width="600" height="302"></a></figure></p></li></ul>            </li><li class="list__item" id="9630f653">                <p id="0d68591b">Enter values for the following settings:</p>                <div class="table-wrapper"><table class="                 " width="100%" id="771ff957"><thead><tr id="b7d7e88b" class="ijRowHead"><th id="b2c1078b" width="20%"><p>Setting</p></th><th id="4ad3fae4"><p>Description</p></th></tr></thead><tbody><tr id="6be38d0d" class="ijRowOdd"><td id="dfd01555"><p>TeamCity Server</p></td><td id="06f1e14a"><p>Select the TeamCity server that contains the project that you want to map to.                            If you are only connected to one TeamCity server, it is set by default.</p></td></tr><tr id="d43ffba1" class="ijRowEven"><td id="e2124fed"><p>TeamCity Project</p></td><td id="ac3cf5b8"><p>Select the name of the project in TeamCity.</p></td></tr><tr id="615065ea" class="ijRowOdd"><td id="379b12de"><p>TeamCity Build</p></td><td id="bc788289"><p>Select a build configuration from the selected TeamCity project.</p></td></tr><tr id="cd2de1a0" class="ijRowEven"><td id="d6b0da85"><p>Process changes</p></td><td id="7d7a1441"><p id="cb116ec8">Choose how YouTrack handles VCS changes in builds that are processed by TeamCity.                            The following options are available:</p>                            <ul class="list _ul"><li class="list__item" id="177d2531"><p><span class="control">Do not attach</span> — VCS changes that include references to YouTrack issue IDs are not added to the activity stream in the referenced issue.                                    Use this option when you only want the integration to add build numbers to custom fields.</p></li><li class="list__item" id="c0942be7"><p><span class="control">Attach</span> — VCS changes that include references to YouTrack issue IDs are added to the activity stream in the referenced issue.                                    The entry in the activity stream contains a link to the build that contains the change.                                    The commit message is not parsed for YouTrack commands.</p></li><li class="list__item" id="185e94ca"><p><span class="control">Attach and apply commands</span> — VCS changes that include references to YouTrack issue IDs are added to the activity stream in the referenced issue.                                    The entry in the activity stream contains a link to the build that contains the change.                                    The commit message is also parsed for YouTrack commands.</p></li></ul></td></tr><tr id="09bd7cf0" class="ijRowOdd"><td id="77e5663a"><p>Visible to</p></td><td id="0de7ed92"><p>To restrict the visibility of comments and updates that are shown as <span class="control">VCS changes</span> in the activity stream, select one or more groups from the list.                            Otherwise, this activity type is visible to any user who has permission to read issues in the project.</p></td></tr><tr id="0153a8fb" class="ijRowEven"><td id="8c0ad9c7"><p>Parse commits for issue comments</p></td><td id="c3d1a8c7"><p>To detect and generate issue comments from commit messages, enable this option.                            Otherwise, the entire commit message is displayed with the VCS change in the issue activity stream.<br><br>                            To learn more about how YouTrack processes commit messages, see <a href="Apply-Commands-in-VCS-Commits.html"><span>Apply Commands in VCS Commits</span></a>.</p></td></tr></tbody></table></div>            </li><li class="list__item" id="9114cd10"><p>Click to expand the <span class="control">Actions for Default Branch</span> settings.                These settings determine which actions are applied to builds in the default branch.                <figure><a class="lightbox" href="/help/img/youtrack/2018.4/actions-for-default-branch-teamcity-project.zoomed.png"><img alt="actions for default branch" title="actions for default branch" src="/help/img/youtrack/2018.4/actions-for-default-branch-teamcity-project.png" id="2362a64d" width="600" height="312"></a></figure>                If you don't want to add build numbers to issues, continue from step 8.</p></li><li class="list__item" id="4c82df4f"><p id="c6f6313a">Configure the following options:</p>                <div class="table-wrapper"><table class="                  _layout-fixed" width="100%" id="fb64fc96"><thead><tr id="f5f9cec0" class="ijRowHead"><th id="c910ac0d" width="20%"><p>Option</p></th><th id="ec0918ca"><p>Description</p></th></tr></thead><tbody><tr id="b2b39f8d" class="ijRowOdd"><td id="56da6c86"><p>Consider failed builds</p></td><td id="2d685515"><p>Enable to add build numbers to issues for all builds, including failed builds.                            When disabled, only successful builds are added to issues in YouTrack.</p></td></tr><tr id="1bc7a4a5" class="ijRowEven"><td id="6eddb227"><p>Process issues mentioned in commits and build comments</p></td><td id="574c4641"><p>Enable to add build numbers to issues that are mentioned in commits and build comments.                            When disabled, YouTrack ignores mentioned issues.                            Use this setting together with the <span class="control">Query</span> setting to determine which issues are assigned build numbers.</p></td></tr><tr id="50590730" class="ijRowOdd"><td id="032b083e"><p>Query</p></td><td id="796803f4"><p>Enter a search query to add build numbers to issues that match a specific filter criteria.                            The standard search query is <code class="code" data-lang="Java">State: Fixed State: Verified resolved date: ${build.time}..${prev.build.time}</code>.                            This query ensures that only issues that are resolved since the last successful build and the current build are considered.                            Use this setting together with the <span class="control">Process issues mentioned in commits and build comments</span> option to determine which issues are assigned build numbers.</p></td></tr><tr id="3cb27723" class="ijRowEven"><td id="4db6f1be"><p>Command</p></td><td id="77f2066b"><p>Enter a command that is applied to all issues that are assigned build numbers in YouTrack.                            Use the <code class="code" data-lang="Java">${build</code>} variable to reference the build number in TeamCity. For example:                            <code class="code" data-lang="Java">Subsystem Testing Test in build ${build}</code>                            With this command, all issues that are processed by YouTrack are assigned to the <span class="control">Testing</span> subsystem                            and the <span class="control">Test in build</span> field is set to the build number.</p></td></tr><tr id="1f201790" class="ijRowOdd"><td id="2593c2da"><p>Build Field</p></td><td id="31f61ca9"><p>Select the custom field that stores the build number from TeamCity.</p></td></tr><tr id="4c899b45" class="ijRowEven"><td id="a0726eed"><p>Add builds to the set of values</p></td><td id="ba7c89f7"><p>Enable to automatically add build numbers to the set of values for the selected custom field.                            The builds that are considered for this option are affected by the <span class="control">Consider failed builds</span> setting.</p></td></tr></tbody></table></div></li><li class="list__item" id="e0b57ac2"><p>Expand and set the options for the <span class="control">Actions for Feature Branches</span> settings.                These settings determine which actions are applied to builds in one or more feature branches.                Each setting provides the same functionality as described for the default branch, above.</p></li><li class="list__item" id="996c6507"><p id="6b052ecd">Click the <span class="control">Create mapping</span> button.</p>                <ul class="list _ul"><li class="list__item" id="e4234090"><p>The YouTrack project is mapped to the selected project in TeamCity.</p></li><li class="list__item" id="58a376d0"><p>The TeamCity integration is enabled and available for use in your YouTrack project.</p></li></ul></li></ol></section>    </div>    <div class="chapter"><h2 id="teamcity-integration-project-placeholders" data-toc="Configure-TeamCity-Integration#teamcity-integration-project-placeholders">Placeholders</h2>        <p id="5b772dd1">You can use placeholders in the <span class="control">Query</span> and <span class="control">Command</span> settings.            These placeholders reference attributes that are stored for builds in TeamCity.            The placeholder is replaced with the corresponding value in the connected version control system when the builds are processed by YouTrack.            The following placeholders are available:</p>        <div class="table-wrapper"><table class="                 " width="100%" id="45e0fa8f"><thead><tr id="3cb27a2d" class="ijRowHead"><th id="99ca31e9" width="20%"><p>Placeholder</p></th><th id="de34c5d5"><p>Description</p></th></tr></thead><tbody><tr id="c2a966c4" class="ijRowOdd"><td id="44388ed8"><p>${build.time}</p></td><td id="7fb8f510"><p>The date and time of the build that is processed by YouTrack.</p></td></tr><tr id="aff20763" class="ijRowEven"><td id="d69f4de9"><p>${prev.build.time}</p></td><td id="569a847d"><p>The date and time of the build prior to the build that is processed by YouTrack.</p></td></tr><tr id="e8497344" class="ijRowOdd"><td id="711d2004"><p>${build}</p></td><td id="813bc460"><p>The number of the build that is processed by YouTrack.</p></td></tr><tr id="cd640248" class="ijRowEven"><td id="37673dbf"><p>${revision}</p></td><td id="cded3f5b"><p>The revision number that is assigned to a VCS commit.</p></td></tr></tbody></table></div>    </div>    <div class="last-modified" data-skip-index="skip">Last modified: 8 March 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="map-project-to-jenkins.html">Integrate with Jenkins</a><a class="navigation-links__next" href="Enable-and-Configure-Time-Tracking.html">Enable Time Tracking</a></div><section class="seealso" data-skip-index="skip"><div class="seealso__header"><h2>See Also</h2></div><div class="seealso__content"><div class="seealso__col" data-skip-index="skip"><h3>User Guide:</h3><ul class="list"><li class="list__item"><a href="VCS-Changes.html"><span>View and Edit VCS Changes</span></a></li><li class="list__item"><a href="Map-Issues-to-VCS-Change-Commit.html"><span>Link Issues in VCS Commits</span></a></li><li class="list__item"><a href="Apply-Commands-in-VCS-Commits.html"><span>Apply Commands in VCS Commits</span></a></li><li class="list__item"><a href="Add-a-Comment.html#add-comment-vcs-commits"><span>Generate Comments from VCS Commits</span></a></li></ul></div></div></section></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>