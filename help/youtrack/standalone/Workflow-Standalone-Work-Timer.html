<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>秒表式工作计时器-帮助| YouTrack单机版</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Workflow-Standalone-Work-Timer" data-breadcrumbs="Administration.xml|Administration/Workflow-Guide.xml|Workflows/Default-Workflows.xml|Default Workflows/Workflow-Standalone-Work-Timer.xml|Stopwatch-style Work Timer" data-main-title="Stopwatch-style Work Timer"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack独立帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Workflow-Standalone-Work-Timer.xml" data-toc="Workflow-Standalone-Work-Timer">秒表式工作计时器</h1>  <p id="63a26e99">此工作流程使计时器能够跟踪解决问题所花费的时间。行为类似于“进行中的<a href="Workflow-Work-Timer.html">工作计时器”</a> 。该工作流不是使用<span class="control">State</span>的值来启动和停止计时器，而是使用独立的<span class="control">Timer</span>字段的值。</p>  <p id="436582ef">当您想跟踪花费在解决问题上的时间而不影响“ <span class="control">状态”</span>字段的值时，请使用此工作流程。</p>  <div class="table-wrapper"><table class="left_header" width="100%" id="c54b35cc"><tbody><tr id="7ee45a2a" class="ijRowOdd"><th id="f5575994" width="20%"><p>名称</p></th><td id="b9367fc6"><p>@ jetbrains / youtrack-workflow-standalone-work-timer</p></td></tr><tr id="1cc37b5b" class="ijRowEven"><th id="4e5e3cd1"><p>上一个标题</p></th><td id="6832493d"><p>独立工作计时器</p></td></tr><tr id="2fc4f849" class="ijRowOdd"><th id="8ac7af65"><p>自动连接</p></th><td id="ba6809b7"><p>没有</p></td></tr><tr id="572dab2f" class="ijRowEven"><th id="eb7f17e8"><p>模组</p></th><td id="2d5754fc"><p>        <a href="#start-timer">当“计时器”的值变为“开始”</a> （变更规则） <a href="#start-timer">时，启动计时器</a><br>        <a href="#stop-timer">当“计时器”的值变为“停止”时</a> （ <a href="#stop-timer">停止</a>规则）， <a href="#stop-timer">停止计时器</a></p></td></tr></tbody></table></div>  <section class="procedure-steps"><h3 id="df5b0639">启用此工作流程Ç</h3><ol class="list _decimal"><li class="list__item" id="e104f5af"><p>为项目启用和配置时间跟踪。有关说明，请参阅<a href="Enable-and-Configure-Time-Tracking.html">启用时间跟踪</a> 。</p></li><li class="list__item" id="9c98b324">添加一个字段来存储<code class="code">enum</code>以名称<span class="control">Timer</span>键入您的项目。<ul class="list _ul"><li class="list__item" id="c4aa5ea0"><p>配置该字段以存储单个值。</p></li><li class="list__item" id="852eb934"><p>配置该字段以允许为空值。</p></li><li class="list__item" id="0b82b8ff"><p>将值“ <span class="control">开始”</span>和“ <span class="control">停止”</span>添加到该字段。</p></li></ul>    </li><li class="list__item" id="3e94841f"><p>添加一个存储<code class="code">date and time</code>以名称<span class="control">Timer time</span>键入您的项目。</p></li><li class="list__item" id="45aaf926"><p>将<span class="control">秒表样式的工作计时器</span>工作流附加到您的项目。</p></li></ol></section>  <div class="chapter"><h2 id="d5cfec20">用例</h2>    <p id="1cfd22b0">此工作流程启用了一个计时器，您可以使用该计时器来跟踪解决问题所花费的时间。当您停止计时器时，经过的时间将作为工作项自动添加到问题中。</p>    <ol class="list _decimal"><li class="list__item" id="43a5fa18">当您开始处理问题时，请将“ <span class="control">计时器”</span>字段的值设置为“ <span class="control">开始”</span> 。<ul class="list _ul"><li class="list__item" id="718380d1"><p>工作流显示以下消息： <span class="control">计时器已启动。</span></p></li><li class="list__item" id="9498e07a"><p><span class="control">计时器时间</span>字段的值设置为当前日期和时间。</p></li></ul></li><li class="list__item" id="3b8d77cf"><p>继续处理其他任何问题。尽量避免分心-时钟在滴答滴答！</p></li><li class="list__item" id="454fb2ae">完成工作后，将<span class="control">Timer</span>字段的值更改为<span class="control">Stop</span> 。<ul class="list _ul"><li class="list__item" id="736a0530"><p>工作流显示以下消息：已<span class="control">添加工作时间。</span></p></li><li class="list__item" id="4c070d9f"><p>工作项目已添加到问题中。</p></li></ul></li></ol>    <p id="ebd24932">每个工作项都分配有以下值：</p>    <ul class="list _ul"><li class="list__item" id="d84942b2"><p>当前用户被设置为工作作者。</p></li><li class="list__item" id="7cc08bc0"><p>工作日期设置为当前日期， <code class="code">Date.now()</code>方法。</p></li><li class="list__item" id="ef393ed4"><p>注释设置为： <span class="control">计时器自动添加的工作项。</span></p></li><li class="list__item" id="17b3b709"><p>根据“ <span class="control">计时器时间”</span>字段的值与当前日期和时间之间的差来计算花费的时间。</p></li></ul>    <p id="3badc8a5">工作流未将工作类型分配给工作项目。如果要以编程方式添加特定的工作类型，则可以修改更改规则以停止计时器并生成工作项。例如， <a href="#stop-timer">当“计时器”的值变为“停止”</a>规则<a href="#stop-timer">时</a> ，请参阅建议的<a href="#stop-timer">停止计时器</a>自定义设置。</p>  </div>  <div class="chapter"><h2 id="17608e89">模组</h2>    <p id="3edb88c3">该工作流程包括两个模块。</p>    <div class="chapter"><h3 id="start-timer">当“计时器”的值变为“启动”时启动计时器</h3>      <p id="1f33d502">第一个模块包含一个启动计时器的变更规则。</p>      <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; var工作流程= require（'@ jetbrains / youtrack-scripting-api / workflow'）; Exports.rule =实体。Issue.onChange（{title：workflow.i18n（'当“ Timer”的值变为“ Start”时启动计时器”），警卫：function（ctx）{return ctx.issue.fields.becomes（ctx。计时器，ctx。计时器开始）; }，操作：function（ctx）{ctx.issue.fields。TimerTime = Date.now（）; workflow.message（workflow.i18n（'计时器已启动。'））; }，要求：{计时器：{类型：实体。EnumField.fieldType，开始：{}}，TimerTime：{类型：实体。Field.dateType，名称：“计时器时间”}}}）;</div>      <p id="fbf6196d">第二个模块包含一个停止计时器的变化规则。经过的时间作为工作项添加到问题中。</p>    </div>    <div class="chapter"><h3 id="stop-timer">当“计时器”的值变为“停止”时停止计时器</h3>      <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; var工作流程= require（'@ jetbrains / youtrack-scripting-api / workflow'）; Exports.rule =实体。Issue.onChange（{标题：workflow.i18n（'当“ Timer”的值变为“ Stop”时停止计时器”），后卫：function（ctx）{返回ctx.issue.fields.becomes（ctx。计时器，ctx。计时器停止）&& ctx.issue.fields。TimerTime; }，动作：function（ctx）{var issue = ctx.issue;如果（issue.fields.oldValue（ctx。计时器）。名称=== ctx。计时器Start.name）{var newWorkItem = {说明：workflow.i18n（'计时器自动添加的工作项。'），日期：Date.now（），作者：ctx.currentUser，持续时间：issue.project.intervalToWorkingMinutes（issue.fields。TimerTime，Date.now（））}; issue.addWorkItem（newWorkItem）; workflow.message（workflow.i18n（'增加工作时间'））; } else {工作流程.message（workflow.i18n（'看来计时器尚未启动。'））; }}，要求：{计时器：{类型：实体。EnumField.fieldType，停止：{}，开始：{}}，计时器时间：{类型：实体。Field.dateType，名称：“计时器时间”}}}）;</div>      <p id="79e8603c">默认工作流程未为工作类型设置值。如果要为此工作流生成的工作项设置默认工作类型，则可以自定义此规则。</p>      <p id="f3bdd5a0">以下代码显示了用于设置<code class="code">action</code>属性。在这里<code class="code">workItemType</code>变量在名称为<span class="control">Development</span>的当前项目中查找工作项类型，并将其添加到工作项中。</p>      <div class="code-block" data-lang="javascript">行动：function（ctx）{var issue = ctx.issue;如果（issue.fields.oldValue（ctx。计时器）。名称=== ctx。计时器Start.name）{var workItemType =实体。WorkItemType.findByProject（ctx.issue.project）.find（function（workType）{return workType.name ==='Development';}）; var newWorkItem = {说明：workflow.i18n（'计时器自动添加的工作项。'），日期：Date.now（），作者：ctx.currentUser，类型：workItemType，持续时间：issue.project.intervalToWorkingMinutes（issue.fields。TimerTime，Date.now（））}; issue.addWorkItem（newWorkItem）; workflow.message（workflow.i18n（'增加工作时间'））; } else {工作流程.message（workflow.i18n（'看来计时器尚未启动。'））; }，</div>    </div>  </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="slack-notifications-workflow.html">松弛通知</a> <a class="navigation-links__next" href="Workflow-Subsystem-Assignee.html">子系统受让人</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>