<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>为集合增加价值-帮助|帮助YouTrack单机版</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="api-usecase-add-value-to-bundle" data-breadcrumbs="Resources-for-Developers.xml|Resources for Developers/youtrack-rest-api-reference.xml|REST API/api-use-cases.xml|REST API Use Cases/api-usecase-add-value-to-bundle.xml|Add Value to a Set" data-main-title="Add Value to a Set"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack独立帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="api-usecase-add-value-to-bundle.xml" data-toc="api-usecase-add-value-to-bundle">为集合增值</h1>    <h4 id="48eb0ccd">用例：</h4>    <p id="7f3dcdbb">使用REST API将新值添加到特定项目中自定义字段的一组值中。在REST API中，表示自定义字段的一组值的实体称为捆绑。</p>    <a name="version-note"></a>        <aside class="prompt" rel="api-usecase-add-value-to-bundle.xml" id="8266bf2c" data-type="note" data-title=""><p>请注意，此示例对YouTrack 2019.1和更高版本有效。在以前的版本中，尽管原理相同，但是查询参数和实体属性可能不同。此外，2019.1中引入了许多功能，例如按名称命名实体，但以前的版本中不支持。</p></aside>        <div class="chapter"><h2 id="summary">摘要</h2>        <p id="50c400b2">在将新值添加到包中之前，需要收集以下数据：</p>        <ul class="list _bullet"><li class="list__item" id="a62e7306"><p>项目的实体ID。</p></li><li class="list__item" id="d5f14872"><p>项目中目标自定义字段的实体ID。</p></li></ul>        <p id="b7faa24c">当您拥有所有必需的实体ID时，可以通过向此端点发送POST请求来向捆绑包添加新值：</p>        <div class="code-block" data-lang="none">/ api / admin / projects / {project_id} / customFields / {field_id} / bundle / values</div>    </div>    <div class="chapter"><h2 id="step-by-step">一步步</h2>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="6508503f">                <p id="8b999b59">获取您的YouTrack <a href="resource-api-admin-projects.html#get_all-Project-method">中所有项目</a>的<a href="resource-api-admin-projects.html#get_all-Project-method">列表</a> 。</p>                <div class="code-block" data-lang="http">curl -X GET'https://example.myjetbrains.com/youtrack/api/admin/projects?fields=id,name,shortName'\ -H'接受：application / json'\ -H'授权：无证烫发： cm9vdA ==。MjZGZWI =。WB02vjX0cM2ltLTJXUE3VOWHpJYYNx'\ -H'内容类型：application / json'</div>                <p id="d563f33d">在里面<code class="code">fields</code>请求参数，您指示服务器返回<code class="code">ID</code> ， <code class="code">name</code>和<code class="code">shortName</code>找到的每个项目的属性。</p>                <p id="49cc1e37">在对此请求的响应中，服务器返回以下数据：</p>                <div class="code-block" data-lang="json">[{“ shortName”：“ NP”，“ name”：“ New Project”，“ id”：“ 81-1”，“ $ type”：“ Project”}，{“ shortName”：“ T”，“ name “：”任务“，” id“：” 81-22“，” $ type“：”项目“}，{” shortName“：” TP“，” name“：”测试项目“，” id“：” 81 -0“，” $ type“：”项目“}]</div>                <p id="fdec48a8">您还可以通过以下方式过滤项目列表<code class="code">shortName</code>或一个<code class="code">name</code>所需项目。</p>                <p id="29efed05">这是一个项目的过滤条件请求示例<code class="code">name</code> ：</p>                <div class="code-block" data-lang="http">curl -X GET'https://example.myjetbrains.com/youtrack/api/admin/projects?fields=id,name,shortName&query=Test+Project'\ -H'接受：application / json'\ -H'授权：不干胶烫发：cm9vdA ==。MjZGZWI =。WB02vjX0cM2ltLTJXUE3VOWHpJYYNx'\ -H'内容类型：application / json'</div>                <p id="a86d0476">这是一个项目的过滤条件请求示例<code class="code">shortName</code> ：</p>                <div class="code-block" data-lang="http">curl -X GET'https://example.myjetbrains.com/youtrack/api/admin/projects?fields=id,name,shortName&query=tp'\ -H'接受：application / json'\ -H'授权：承载烫发：cm9vdA ==。MjZGZWI =。WB02vjX0cM2ltLTJXUE3VOWHpJYYNx'\ -H'内容类型：application / json'</div>                <p id="7cf22d04">对于带有查询参数的样本请求，响应主体仅包含匹配项目的数据：</p>                <div class="code-block" data-lang="json">[{“ shortName”：“ TP”，“ name”：“ Test Project”，“ id”：“ 81-0”，“ $ type”：“ Project”}]</div>            </li><li class="list__item" id="3aeaadb3">                <p id="ad09e44d">在您收到的响应中找到目标项目的ID。本示例使用项目<code class="code">Test Project</code>与实体ID <code class="code">81-0</code> 。</p>            </li><li class="list__item" id="ac5c6118">                <p id="59593405">使用检索到的项目ID获取附加到目标项目<a href="resource-api-admin-projects-projectID-customFields.html#get_all-ProjectCustomField-method">的所有自定义字段</a>的<a href="resource-api-admin-projects-projectID-customFields.html#get_all-ProjectCustomField-method">列表</a> 。</p>                <div class="code-block" data-lang="http">curl -X GET'https://example.myjetbrains.com/youtrack/api/admin/projects/81-0/customFields?fields=id,field(name）'\ -H'接受：application / json'\- H'授权：不固定烫发：cm9vdA ==。MjZGZWI =。WB02vjX0cM2ltLTJXUE3VOWHpJYYNx'\ -H'内容类型：application / json'</div>                <p id="2e7619a4">在里面<code class="code">fields</code>请求参数，您指示服务器返回<code class="code">ID</code>和<code class="code">name</code>每个自定义字段的属性。</p>                <p id="876d2ffd">在对此请求的响应中，服务器返回以下数据：</p>                <div class="code-block" data-lang="json">[{“ field”：{“ name”：“ Subsystem”，“ $ type”：“ CustomField”}，“ id”：“ 82-0”，“ $ type”：“ OwnedProjectCustomField”}，{“ field”： {“ name”：“ Type”，“ $ type”：“ CustomField”}，“ id”：“ 82-2”，“ $ type”：“ EnumProjectCustomField”}，{“ field”：{“ name”：“状态”，“ $ type”：“ CustomField”}，“ id”：“ 82-3”，“ $ type”：“ StateProjectCustomField”}，{“字段”：{“名称”：“修复版本”，“ $ type“：” CustomField“}，” id“：” 82-4“，” $ type“：” VersionProjectCustomField“}]</div>            </li><li class="list__item" id="0ae2c959"><p>找到<code class="code">ID</code>目标自定义字段。本示例使用字段<code class="code">Fix versions</code>与实体ID <code class="code">82-4</code> 。</p></li><li class="list__item" id="1439345b">                <p id="20e33484">要形成最终POST请求的URL，您需要检查目标字段类型的属性。您可以在响应中找到字段类型，以及之前获得的所有项目自定义字段的列表。</p>                <p id="4ef908ff">在这种情况下， <code class="code">Fix versions</code>是<a href="api-entity-VersionProjectCustomField.html">VersionProjectCustomField</a>类型的。由于您要更新字段包，因此需要<code class="code">bundle</code>属性。</p>            </li><li class="list__item" id="fd55af8d">                <p id="cb4e5ea4">捆绑软件作为实体具有其自己的属性，您可以根据捆绑软件类型进行检查。</p>                <p id="4070df84">在这种情况下， <code class="code">VersionProjectCustomField</code>是<a href="api-entity-VersionBundle.html">VersionBundle</a> 。由于您要更新其值的集合，因此需要<code class="code">values</code>属性。</p>            </li><li class="list__item" id="bc235af8">                <p id="2d0d8fb4">形成完整的请求URL：</p>                <div class="code-block" data-lang="none">/ api / admin / projects / 81-0 / customFields / 82-4 / bundle / values？字段= ID，名称</div>                <p id="fecd9074">在里面<code class="code">fields</code>请求参数，您指示服务器返回<code class="code">ID</code>和<code class="code">name</code>您所增加的价值。</p>            </li><li class="list__item" id="7b0cd366">                <p id="1ef7e219">要形成POST请求的正文，您需要检查要添加的元素的属性。在这种情况下， <code class="code">VersionBundle</code>包含一组<code class="code">VersionBundleElements</code>作为值，因此您需要再添加一个<code class="code">VersionBundleElement</code>到阵列。您需要设置的唯一属性是新值的名称：</p>                <div class="code-block" data-lang="json">{“ name”：“ V.2.0”，“ $ type”：“ VersionBundleElement”}</div>                <p id="d7eb8f36">请注意，您必须包括<code class="code">$type</code>每个请求中的参数。有关更多信息<code class="code">$type</code>在POST请求中，查看<a href="api-concept-custom-fields.html#type-issue-custom-fields">文档</a> 。</p>            </li><li class="list__item" id="36e0669f">                <p id="0fc286ed">使用POST请求将新值添加到目标自定义字段的捆绑包中：</p>                <div class="code-block" data-lang="http">curl -X POST'https://example.myjetbrains.com/youtrack/api/admin/projects/81-0/customFields/82-4/bundle/values?fields=id,name'\ -H'接受：应用程序/ json'\ -H'授权：持证人烫发：cm9vdA ==。MjZGZWI =。WB02vjX0cM2ltLTJXUE3VOWHpJYYNx'\ -H'内容类型：application / json'\ -d'{“名称”：“ V.2.0”，“ $ type”：“ VersionBundleElement”}'</div>                <p id="b02d92d4">如果请求成功，您将收到以下响应：</p>                <div class="code-block" data-lang="json">{“ name”：“ V.2.0”，“ id”：“ 103-433”，“ $ type”：“ VersionBundleElement”}</div>                <p id="dbe40b93">它包含<code class="code">ID</code> ， <code class="code">name</code>和<code class="code">type</code>附加值。</p>            </li></ol></section>        <p id="bc01a257">结果，您已将新元素添加到<code class="code">Fix versions</code>中的字段<code class="code">Test Project</code>项目。</p>        <p id="17653d54">按照类似的步骤，您还可以将新值添加到其他字段类型的值集： <a href="api-entity-BuildBundle.html">BuildBundle</a> ， <a href="api-entity-EnumBundle.html">EnumBundle</a> ， <a href="api-entity-OwnedBundle.html">OwnedBundle</a> ， <a href="api-entity-StateBundle.html">StateBundle</a> 。</p>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="api-howto-get-value-for-specific-cf.html">获取问题自定义字段</a> <a class="navigation-links__next" href="api-how-to-update-custom-fields-values.html">更新的</a> <a class="navigation-links__prev" href="api-howto-get-value-for-specific-cf.html">值</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>