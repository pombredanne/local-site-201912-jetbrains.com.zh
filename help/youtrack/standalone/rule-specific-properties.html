<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>特定于规则的属性-帮助| YouTrack单机版</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="rule-specific-properties" data-breadcrumbs="Administration.xml|Administration/Workflow-Guide.xml|Workflows/Workflows-in-JavaScript.xml|JavaScript Workflow Reference/rule-specific-properties.xml|Rule-specific Properties" data-main-title="Rule-specific Properties"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack独立帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="rule-specific-properties.xml" data-toc="rule-specific-properties">特定规则的属性</h1>    <p id="0beef4d7">所有设置值的脚本<code class="code">exports.rule</code>属性被解释为工作流程规则。每种类型的规则都支持一组特定的属性，这些属性定义了规则的执行方式。</p>    <p id="cafc6602">每个模块只能为<code class="code">exports.rule</code>属性。当脚本为此属性包含多个定义时，将导出脚本中的最后一个定义。例如，如果脚本设置了<code class="code">exports.rule</code>财产<code class="code">entities.Issue.onChange</code> （有关更改规则的声明），然后将此属性设置为<code class="code">entities.Issue.action</code> ，该脚本将被解释为操作规则。为更改规则设置的所有属性都将被忽略。</p>    <p id="9edd5a63">此页面按类型列出了每个工作流程规则的所有属性。有关向您展示如何在实际规则中使用这些属性的示例，请参见<a href="Workflow-Rules.html">工作流规则类型</a> 。</p>    <div class="chapter"><h2 id="on-change-rule-properties" data-toc="rule-specific-properties#on-change-rule-properties">变更规则属性</h2>        <p id="93f1c1e6">的<code class="code">Issue.onChange</code>方法导出一个被解释为变化规则的对象。变更规则支持以下属性：</p>        <div class="table-wrapper"><table width="100%" id="9c59b7d8"><thead><tr id="ec1ab702" class="ijRowHead"><th id="8e569ab2" width="20%"><p>属性</p></th><th id="bed82024"><p>描述</p></th></tr></thead><tbody><tr id="d8ed3e88" class="ijRowOdd"><td id="db50f970"><p>标题</p></td><td id="c737f0f0"><p>可选的人类可读标题。标题仅在管理界面中可见。</p></td></tr><tr id="2ac65dbd" class="ijRowEven"><td id="cf12741c"><p>守护</p></td><td id="e5a6ab53"><p>确定执行规则的条件的功能。如果不满足保护条件，则规则中指定的操作不适用于问题。</p></td></tr><tr id="e07177e6" class="ijRowOdd"><td id="4099c05c"><p>行动</p></td><td id="1bf77e45"><p>应该应用于每个问题的操作。该动作被声明为接受上下文作为参数的函数。</p></td></tr><tr id="934a529f" class="ijRowEven"><td id="c1d848eb"><p>运行</p></td><td id="dcbe94d1"><p>确定哪些发行事件触发更改规则。如果未指定，则会在问题更新时触发规则。</p></td></tr><tr id="1f365433" class="ijRowOdd"><td id="82eb61ed"><p>要求</p></td><td id="7d11eacf"><p>规则无误执行所需的实体列表。此属性确保可以将规则安全地附加到项目。</p></td></tr></tbody></table></div>        <p id="a2f1dc85">的<code class="code">runOn</code>属性支持以下扩展属性：</p>        <div class="table-wrapper"><table width="100%" id="8f4d04cb"><thead><tr id="23da091f" class="ijRowHead"><th id="e13feb76" width="20%"><p>属性</p></th><th id="46a7008d"><p>描述</p></th></tr></thead><tbody><tr id="25247883" class="ijRowOdd"><td id="ebfae392"><p>更改</p></td><td id="83d8a82e"><p>的扩展<code class="code">runOn</code>确定是否对问题更改应用更改的属性。什么时候<code class="code">true</code> ，则规则会在问题更改时触发。</p></td></tr><tr id="17774871" class="ijRowEven"><td id="a5f64cf4"><p>清除</p></td><td id="18b4eb36"><p>的扩展<code class="code">runOn</code>该属性确定在逻辑上删除问题时是否应用更改。什么时候<code class="code">true</code> ，则在逻辑上删除问题后触发规则。</p></td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="on-schedule-rule-properties" data-toc="rule-specific-properties#on-schedule-rule-properties">附表规则属性</h2>        <p id="e00a70db">的<code class="code">Issue.onSchedule</code>方法导出被解释为按计划规则的对象。预定规则支持以下属性：</p>        <div class="table-wrapper"><table width="100%" id="45613cc9"><thead><tr id="c780a066" class="ijRowHead"><th id="bbb88271" width="20%"><p>属性</p></th><th id="ef763779"><p>描述</p></th></tr></thead><tbody><tr id="9a3f37d9" class="ijRowOdd"><td id="1e19cea1"><p>标题</p></td><td id="fed5661e"><p>可选的人类可读标题。标题仅在管理界面中可见。</p></td></tr><tr id="02986892" class="ijRowEven"><td id="20cda624"><p>搜索</p></td><td id="fb5456a0"><p>确定该规则要处理哪些问题的搜索查询。它可以是使用标准YouTrack搜索查询语法的字符串（请参阅<a href="Search-and-Command-Attributes.html">Search Query Reference</a> ），也可以是在每次触发规则时重新计算搜索字符串的函数。使用函数时，请按名称引用。例如， <code class="code">search: getSearchExpression</code> 。强烈建议您使搜索表达式尽可能具体，而不要在操作内添加条件。</p></td></tr><tr id="af51e797" class="ijRowOdd"><td id="5a929d28"><p>克朗</p></td><td id="f0e04280"><p>应用规则的时间表，以<a href="http://www.quartz-scheduler.org/documentation/quartz-2.3.0/tutorials/crontrigger.html" rel="noopener noreferrer" data-external="true" target="_blank">Java cron表达式</a>指定。</p></td></tr><tr id="64bc3151" class="ijRowEven"><td id="d61628d1"><p>守护</p></td><td id="7bddf0f1"><p>确定执行规则的条件的功能。如果不满足保护条件，则规则中指定的操作不适用于问题。</p></td></tr><tr id="9a05fa53" class="ijRowOdd"><td id="2a9869a8"><p>MutantUpdateNotifications</p></td><td id="a4bdcfcd"><p id="9fe8be7e">一个标志，用于确定是否针对此规则应用的更改发送更新通知。如果要应用更新而不发送通知，请设置为<code class="code">true</code> 。</p>                    <p id="2589377c">什么时候<code class="code">true</code>此属性还禁止在同一事务中应用级联更改的通知。例如，当按计划规则应用的更新触发来自一个或多个按变更规则的更新时，整个更改集将以静默方式应用。</p>                    <p id="0a81a437">此属性的值不影响使用<span class="control">.notify</span>方法显式发送的通知。</p></td></tr><tr id="f44a7e2d" class="ijRowEven"><td id="92637e83"><p>行动</p></td><td id="0efdacb4"><p>应应用于与搜索条件匹配的每个问题的操作。针对每个问题分别触发此操作。操作本身由工作流用户帐户执行。</p></td></tr><tr id="0d2b16dc" class="ijRowOdd"><td id="640620e9"><p>要求</p></td><td id="e82ea8f7"><p>规则无误执行所需的实体列表。此属性确保可以将规则安全地附加到项目。</p></td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="action-rule-properties" data-toc="rule-specific-properties#action-rule-properties">动作规则属性</h2>        <p id="200a56ce">的<code class="code">Issue.action</code>方法导出一个被解释为操作规则的对象。操作规则支持以下属性：</p>        <div class="table-wrapper"><table width="100%" id="171fbb6b"><thead><tr id="a23fe042" class="ijRowHead"><th id="206f7d46" width="20%"><p>属性</p></th><th id="f644f385"><p>描述</p></th></tr></thead><tbody><tr id="3395bdac" class="ijRowOdd"><td id="a21717e8"><p>标题</p></td><td id="fd43716e"><p>易于阅读的标题。标题用作“ <span class="control">应用命令”</span>对话框中命令的标签，以及问题工具栏上“ <span class="control">命令对话框”</span>列表中的项目。如果未设置此属性，则命令不会添加到菜单中。</p></td></tr><tr id="612fb1ec" class="ijRowEven"><td id="418ba34a"><p>命令</p></td><td id="f104a929"><p>用于自定义命令的文本。当此命令应用于一个或多个问题时，将执行此规则中定义的操作。命令是在服务器范围内定义的，这意味着即使将这些规则附加到不同的项目，也不能使用同一命令使用两个操作规则。</p></td></tr><tr id="99553d0d" class="ijRowOdd"><td id="218ea1ee"><p>守护</p></td><td id="52d4b7b3"><p id="8410923e">确定何时启用操作规则的条件。</p>                    <p id="3cb5a6e4">如果不满足保护条件，则定制命令无法应用于问题。不建议在“ <span class="control">应用命令”</span>对话框中使用该<span class="control">命令，</span>并且该<span class="control">命令</span>的标题在问题工具栏中不可见。</p></td></tr><tr id="6d508916" class="ijRowEven"><td id="6c4bcb33"><p>行动</p></td><td id="cd6bc046"><p>应用该命令时应应用于选择的每个问题的更改。针对每个问题分别执行此操作。代表应用命令的用户进行更改。</p></td></tr><tr id="47b3b5b3" class="ijRowOdd"><td id="e3fa73be"><p>要求</p></td><td id="61a391bf"><p>规则无误执行所需的实体列表。此属性确保可以将规则安全地附加到项目。</p></td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="state-machine-rules" data-toc="rule-specific-properties#state-machine-rules">状态机规则属性</h2>        <p id="68af2460">的<code class="code">Issue.stateMachine</code>方法导出解释为状态机规则的对象。状态机规则支持以下基本属性：</p>        <div class="table-wrapper"><table width="100%" id="37c55fcc"><thead><tr id="e4df3e7b" class="ijRowHead"><th id="bb60c112" width="20%"><p>属性</p></th><th id="ac8349d7"><p>描述</p></th></tr></thead><tbody><tr id="26b06673" class="ijRowOdd"><td id="5059d9ec"><p>标题</p></td><td id="0fc77fa6"><p>可选的人类可读标题。</p></td></tr><tr id="e7dbfe80" class="ijRowEven"><td id="fb02214d"><p>fieldName</p></td><td id="9e24dd76"><p id="31bfdf37">由状态机管理的自定义字段的名称。</p>                <p id="6fab68bc">每个问题类型的状态机规则模板使用别名<code class="code">stateFieldName</code>对于此属性。</p></td></tr><tr id="329e24dd" class="ijRowOdd"><td id="3dd627b3"><p>stateFieldName</p></td><td id="f06e33f0"><p>的别名<code class="code">fieldName</code> 。</p></td></tr><tr id="bb8c65ec" class="ijRowEven"><td id="8c8d856d"><p>typeFieldName</p></td><td id="df296153"><p>此可选属性标识枚举的自定义字段，该字段指示每种问题类型将哪种状态机应用于托管字段。此属性仅用于为每种问题类型编写状态机脚本。对于基本的状态机规则，请跳过此属性。</p></td></tr><tr id="e1d7b405" class="ijRowOdd"><td id="bf44b6ad"><p>状态</p></td><td id="b44d0e3e"><p id="85662c2c">字段值和它们之间的转换的定义的列表。包含空格和特殊字符的值设置在单引号中。</p>                <p id="8a66411b">在每个问题类型的状态机规则模板中，此属性被替换为别名<code class="code">defaultMachine</code> 。对于每种问题类型的状态机，此属性定义在未定义用于限制哪个状态机应用于托管字段的字段的值的替代状态机时适用的过渡。</p></td></tr><tr id="96e7576f" class="ijRowEven"><td id="bc0b9f38"><p>defaultMachine</p></td><td id="f997bb32"><p>的别名<code class="code">states</code> 。</p></td></tr><tr id="7853226e" class="ijRowOdd"><td id="29637c1f"><p>AlternativeMachines</p></td><td id="badc616f"><p>对于每种问题类型的状态机，此属性定义字段值的集合，并为字段中的每个指定值定义它们之间的过渡，以定义哪个状态机应用于托管字段。</p></td></tr><tr id="241d719e" class="ijRowEven"><td id="d62c5303"><p>要求</p></td><td id="a1a819d4"><p id="ae5b24d8">规则无误执行所需的实体列表。此属性确保可以将规则安全地附加到项目。</p>                    <p id="39d0c3c1">对于状态机规则，无需将状态机管理的字段添加到需求中。该字段及其值源自<code class="code">states</code>属性。</p></td></tr></tbody></table></div><p id="a2f3bfe4">在中定义的每个值<code class="code">states</code>属性包含其他一组属性的定义。</p>        <p id="6bac190b">在每个问题类型的状态机中，这些属性是为<code class="code">defaultMachine</code> ，这是<code class="code">states</code>属性，以及为该列表列出的每个值<code class="code">alternativeMachines</code>属性。</p>        <div class="table-wrapper"><table width="100%" id="e7cac927"><thead><tr id="8ab5e66f" class="ijRowHead"><th id="4a04687e" width="20%"><p>属性</p></th><th id="29d469e3"><p>描述</p></th></tr></thead><tbody><tr id="2649fd9b" class="ijRowOdd"><td id="452bb489"><p>初始</p></td><td id="45ce67dd"><p>一个布尔属性，用于确定在创建问题时设置列表中的哪个值。恰好一个值必须将此属性设置为<code class="code">true</code> 。对于其他未设置为初始值的值，此属性是可选的，可以省略。</p></td></tr><tr id="ddf55c31" class="ijRowEven"><td id="0e69a99a"><p>onEnter</p></td><td id="0e15d86e"><p>当将相应的值分配给问题时调用的可选函数声明。这些功能的行为类似于其他类型规则中的动作。</p></td></tr><tr id="043f6137" class="ijRowOdd"><td id="7636383a"><p>退出</p></td><td id="1d9e5e2d"><p>当字段值从当前值更改为另一个值时调用的可选函数声明。这些功能的行为类似于其他类型规则中的动作。</p></td></tr><tr id="40a86e7e" class="ijRowEven"><td id="5a5b7b85"><p>过渡</p></td><td id="732c02eb"><p id="2c0454be">可以为列表中的每个值设置的可能目标值的列表。</p>                    <p id="5d3d56f1">对于状态机规则，您无需列出需求中由状态机管理的字段所使用的值。该字段及其值源自<code class="code">states</code>属性。</p></td></tr></tbody></table></div><p id="8d7b6c6d">在中定义的每个值<code class="code">transitions</code>属性包含一个<code class="code">name</code>属性。该名称用于在命令中设置此值，并且还显示在自定义字段的值列表中。每个过渡名称都包含以下附加属性的定义：</p>        <div class="table-wrapper"><table width="100%" id="a9d82625"><thead><tr id="344cc898" class="ijRowHead"><th id="d7e10acb" width="20%"><p>属性</p></th><th id="19a765d8"><p>描述</p></th></tr></thead><tbody><tr id="561fe662" class="ijRowOdd"><td id="1b7aa651"><p>targetState</p></td><td id="22ec5948"><p>在命令中指定命令时设置的值的实际名称<code class="code">name</code>属性被应用。</p></td></tr><tr id="069ec076" class="ijRowEven"><td id="faaf8325"><p>后</p></td><td id="457e2363"><p>可选属性，用于设置执行操作的间隔。该动作本身在<code class="code">action</code>属性。</p></td></tr><tr id="10799ba6" class="ijRowOdd"><td id="24681e9f"><p>行动</p></td><td id="32d87a86"><p>行为类似于其他类型规则中的操作的任何过渡的可选属性。</p></td></tr><tr id="1d8850bf" class="ijRowEven"><td id="87974184"><p>守护</p></td><td id="a9d104b3"><p>确定何时允许过渡的可选条件。如果不满足保护条件，则定制字段的值无法更改为此过渡定义的值。</p></td></tr></tbody></table></div>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Workflows-in-JavaScript.html">JavaScript工作流程参考</a> <a class="navigation-links__next" href="context.html">上下文</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>