<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta charset="UTF-8"><meta name="robots" content="noindex"><title>Using an External Code Editor - Help | YouTrack Standalone</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="js-workflow-external-editor"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search YouTrack Standalone Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2017.4 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="false"><h1 data-toc="js-workflow-external-editor" id="js-workflow-external-editor.xml">Using an External Code Editor</h1>    <p id="9962df9f">You can use the web-based workflow editor to make a quick edit or write a simple rule.        But if you’re used to working in a full-featured development environment, you can actually write your workflows in any IDE that supports JavaScript.</p>    <p id="a7672c45">To let you work where you're most comfortable, we've put together and published two packages to the <a href="https://www.npmjs.com/" data-external="true" target="_blank" rel="noopener noreferrer"><span>npm registry service</span></a> that you can install in your development environment.        This functionality is not specific to any single platform. You should be able to configure any environment that supports JavaScript to write and manage workflow scripts for YouTrack.</p>    <aside class="note " data-title="" rel="a7672c45" id="747bd5a9"><p id="4ea21a05"><b id="62f6a242">npm</b> is a trademark of <b id="dc881281">npm, Inc.</b></p></aside>    <div class="chapter"><h2 id="youtrack-scripting-api" data-toc="js-workflow-external-editor#youtrack-scripting-api">Workflow API Package</h2>        <p id="9f918f6d">The <a href="https://www.npmjs.com/package/@jetbrains/youtrack-scripting-api" data-external="true" target="_blank" rel="noopener noreferrer"><span>youtrack-scripting-api</span></a> package contains the complete YouTrack workflow API.            When you plug this package into your code editor, your code-completion tools suggest valid functions, methods, and properties for all of the entities that are available in the API.</p>    </div>    <div class="chapter"><h2 id="youtrack-scripting" data-toc="js-workflow-external-editor#youtrack-scripting">Workflow Scripting Package</h2>        <p id="4dc80751">The <a href="https://www.npmjs.com/package/@jetbrains/youtrack-scripting" data-external="true" target="_blank" rel="noopener noreferrer"><span>youtrack-scripting</span></a> package contains utilities that help you manage YouTrack workflows when you work in an external code editor.            This lets you write and update workflows for YouTrack in JavaScript in your preferred development environment.</p>        <p id="4f9986b1">The package includes scripts that let you synchronize local changes with your YouTrack installation. The following commands are available:</p>        <div class="table-wrapper"><table class="                 " width="100%" id="10690bfc"><thead><tr id="6fccfde4" class="ijRowHead"><th id="d61d76bb"><p>Command</p></th><th id="41b60c17"><p>Description</p></th></tr></thead><tbody><tr id="c4571c7c" class="ijRowOdd"><td id="dbcd1aa4"><p>list</p></td><td id="e7113924">This command lists all of the workflows that are available in your YouTrack installation. To use this command, specify the following parameters:                    <ul class="list _ul"><li class="list__item" id="8f11b34c"><p><code class="code" data-lang="Java">host</code> — The domain name of your YouTrack installation.</p></li><li class="list__item" id="955e08e0"><p><code class="code" data-lang="Java">token</code> — A permanent token that grants access to the YouTrack service.                            You can generate your own permanent tokens to authenticate with YouTrack on the <span class="control">Authentication</span> tab of your Hub profile.                            For more information, see <a href="Manage-Permanent-Token.html"><span>Manage Permanent Tokens</span></a>.<br>                            This command uses the following syntax:                            <div class="code-block" data-lang="Shell"><code class="code-block__wrapper">youtrack-workflow list --host --token</code></div> </p></li></ul></td></tr><tr id="6c8b67b7" class="ijRowEven"><td id="946462c5"><p>download</p></td><td id="a4d4fcdf"><p>This command downloads the referenced workflow from your YouTrack installation.<br>                    If you don't specify a directory with the output parameter, a directory with the name &lt;workflowName&gt; is created in the current working directory.                    The workflow files are extracted into the new directory. Otherwise, the workflow is downloaded into the directory that is specified in the output parameter.<br>                    <br>                    This command uses the following syntax:                    <div class="code-block" data-lang="Shell"><code class="code-block__wrapper">youtrack-workflow download &lt;workflowName&gt; --host --token <span class="o">[</span>--output<span class="o">]</span></code></div></p></td></tr><tr id="cc5969aa" class="ijRowOdd"><td id="75d4d5ac"><p>upload</p></td><td id="3ad6cffe"><p>This command uploads the workflow from the specified directory to your YouTrack installation.                    First, the script checks the reference directory for a <code class="code" data-lang="Java">package.json</code> file that contains the name of the workflow.                    If the file is not present or does not specify the workflow name, the name of the directory is used as the name of the uploaded workflow.<br>                    <br>                    This command uses the following syntax:                    <div class="code-block" data-lang="Shell"><code class="code-block__wrapper">youtrack-workflow upload &lt;dir&gt; --host --token</code></div></p></td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="basic-scripting-package-installation" data-toc="js-workflow-external-editor#basic-scripting-package-installation">Package Installation</h2>        <p id="c91b0ca9">To work with these packages in your IDE, you need to install and run <a href="https://nodejs.org/en/" data-external="true" target="_blank" rel="noopener noreferrer"><span>Node.js</span></a>.            This also installs the npm package manager that lets you work with the scripting package in your projects.</p>        <aside class="note " data-title="" rel="c91b0ca9" id="17f0566c"><p id="d2343911"><b id="c290a636">Node.js</b> is a trademark of <b id="b1d98cdb">Joyent, Inc.</b> and is used with its permission.            We are not endorsed by or affiliated with Joyent.</p></aside>        <p id="351b2c51">Next, install the workflow packages in your development environment.             The easiest way to get started is to install the package globally with the following commands:</p>        <div class="code-block" data-lang="Shell"><code class="code-block__wrapper">npm install -g @jetbrains/youtrack-scripting-api
npm install -g @jetbrains/youtrack-scripting</code></div>        <p id="052d35ee">If you prefer to install packages as dependencies in your development environment, enter:</p>        <div class="code-block" data-lang="Shell"><code class="code-block__wrapper">npm install --save-dev @jetbrains/youtrack-scripting-api
npm install --save-dev @jetbrains/youtrack-scripting</code></div>        <p id="440872d8">As long as your installation doesn't use a certificate that is issued by your own certificate authority (CA) or is self-signed, you can establish a connection using a personal permanent token.            You can generate your own permanent tokens on the Authentication tab of your Hub profile.            For instructions, see <a href="Manage-Permanent-Token.html#obtain-permanent-token"><span>Obtain a new permanent token</span></a>.</p>        <p id="2a9cbd79">If you are using a certificate that is not issued by a known CA, you need to use specific variables in your Node.js environment to enable a connection between your IDE and the YouTrack installation.            For instructions, see <a href="#special-instructions-ssl-certificates">Special Instructions for SSL Certificates</a>.</p>        <p id="ab69bbe9">If you have just a few custom workflows and don’t need to update them very frequently, you might get by with the basic scripting package.            For regular updates, the need to specify a host and token with each request is a bit unwieldy.            Follow the instructions in the next section to simplify this process and use these commands with fluidity.</p>    </div>    <div class="chapter"><h2 id="custom-commands-scripting-package" data-toc="js-workflow-external-editor#custom-commands-scripting-package">Working with Custom Commands</h2>        <p id="6e4bf61b">You can streamline the commands that are supported by writing your own script.            This script extracts the variables that you use to establish a connection to your YouTrack installation and stores them in your local configuration.</p>            <p id="625f18f4">The first parameter that you want to extract and store locally is the permanent token that you use for authentication.                To keep this token safe, you want to store it in your personal configuration file.</p>            <section class="procedure-steps"><h2 id="a7953798">To add your permanent token to your per-user config file:</h2><ol class="list _decimal"><li class="list__item" id="e44ac1e8"><p>Generate a permanent token as described <a href="Manage-Permanent-Token.html#obtain-permanent-token">here</a>.                    When you generate the token, add the <span class="control">YouTrack</span> service to the <span class="control">Scope</span> input field.</p></li><li class="list__item" id="0527b8e8"><p>Copy the token to your clipboard.</p></li><li class="list__item" id="22f84ed1"><p>Switch to the command-line interface in your IDE and add the token to your per-user config file with the following command:                <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="n">npm</span> <span class="n">config</span> <span class="n">set</span> <span class="n">token_prod</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span></code></div>                    Replace &lt;token&gt; with the permanent token from your clipboard.</p></li><li class="list__item" id="aa71a4df"><p>Verify that the token has been added to your configuration with this command:                    <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="n">npm</span> <span class="n">config</span> <span class="n">list</span> <span class="o">--</span><span class="n">json</span></code></div>                </p></li></ol></section>           <p id="dcf76aac">Next, save the address of your YouTrack installation that you reference as the host parameter.               You can save this parameter in your per-user config file as well.</p>        <section class="procedure-steps"><h2 id="9495c881">To store the host variable in your per-user config file:</h2><ol class="list _decimal"><li class="list__item" id="ef9e0654"><p>Enter the following command in your CLI:                <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="n">npm</span> <span class="n">config</span> <span class="n">set</span> <span class="n">host_prod</span> <span class="o">&lt;</span><span class="n">address</span><span class="o">&gt;</span></code></div>                Replace &lt;address&gt; with the base URL of your YouTrack installation. For an InCloud instance, be sure to include the trailing <code class="code" data-lang="Java">/youtrack</code>.            </p></li><li class="list__item" id="be239793"><p>Verify that the token has been added to your configuration with this command:                <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="n">npm</span> <span class="n">config</span> <span class="n">list</span> <span class="o">--</span><span class="n">json</span></code></div>            </p></li></ol></section>        <p id="be1ee327">References for environment variables vary by operating system.            To ensure that your scripts work in any environment, you can install a package that lets you set and use environment variables across platforms.</p>        <p id="b7137dbf">One such package is <a href="https://www.npmjs.com/package/cross-env" data-external="true" target="_blank" rel="noopener noreferrer"><span>cross-env</span></a>.            It automatically converts each variable to use the correct syntax for your operating system at runtime.</p>        <p id="8e521aca">To install this package in your devDependencies, enter the following command:</p>            <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="n">npm</span> <span class="n">install</span> <span class="o">--</span><span class="n">save</span><span class="o">-</span><span class="n">dev</span> <span class="n">cross</span><span class="o">-</span><span class="n">env</span></code></div>            <p id="4c44d257">Now you can set all of your variables as if you were running on a POSIX system.</p>            <p id="48e01abf">The last step is to write a script that references these parameters.                The quickest way is to create a <code class="code" data-lang="Java">package.json</code> file and add your scripts to the scripts field.</p>            <section class="procedure-steps"><h2 id="b09003ba">To create the file and build your script:</h2><ol class="list _decimal"><li class="list__item" id="6e4602eb"><p>In your CLI, enter the command <code class="code" data-lang="Java">npm init</code>.                    This starts a utility that helps you build the JSON file.</p></li><li class="list__item" id="bc649ded"><p>For each field in the file, specify a new value or accept the suggested default.                    Once you have specified values for all of the fields, the JSON is displayed in the CLI.</p></li><li class="list__item" id="6cb8b14f">Confirm the creation of the file by accepting the prompt <code class="code" data-lang="Java">Is this ok? (yes)</code>.                <ul class="list _ul"><li class="list__item" id="432ace5c"><p>The <code class="code" data-lang="Java">package.json</code> file is added to the current project.</p></li></ul></li><li class="list__item" id="8c464bf9"><p>Open the <code class="code" data-lang="Java">package.json</code> file and edit the scripts field.                    You can also remove irrelevant fields from the file.                    Use the following example as a guide.                <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="o">{</span>
    <span class="s">&quot;name&quot;</span><span class="o">:</span> <span class="s">&quot;myyoutrackworkflows&quot;</span><span class="o">,</span>
    <span class="s">&quot;version&quot;</span><span class="o">:</span> <span class="s">&quot;1.0.0&quot;</span><span class="o">,</span>
    <span class="s">&quot;description&quot;</span><span class="o">:</span> <span class="s">&quot;Custom workflows for my YouTrack installation&quot;</span><span class="o">,</span>
    <span class="s">&quot;scripts&quot;</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">&quot;list-prod&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env youtrack-workflow list --host=$npm_config_host_prod --token=$npm_config_token_prod&quot;</span><span class="o">,</span>
        <span class="s">&quot;download-prod&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env youtrack-workflow download --host=$npm_config_host_prod --token=$npm_config_token_prod&quot;</span><span class="o">,</span>
        <span class="s">&quot;upload-prod&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env youtrack-workflow upload --host=$npm_config_host_prod --token=$npm_config_token_prod&quot;</span>
    <span class="o">},</span>
    <span class="s">&quot;author&quot;</span><span class="o">:</span> <span class="s">&quot;Me&quot;</span><span class="o">,</span>
    <span class="s">&quot;devDependencies&quot;</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">&quot;@jetbrains/youtrack-scripting&quot;</span><span class="o">:</span> <span class="s">&quot;0.0.20&quot;</span><span class="o">,</span>
        <span class="s">&quot;@jetbrains/youtrack-scripting-api&quot;</span><span class="o">:</span> <span class="s">&quot;2017.4.37672&quot;</span>
        <span class="s">&quot;cross-env&quot;</span><span class="o">:</span> <span class="s">&quot;^5.1.1&quot;</span>
    <span class="o">}</span>
<span class="o">}</span></code></div></p></li></ol></section>        <p id="8a673075">At this point, you can run all of the commands that are supported by the <code class="code" data-lang="Java">youtrack-scripting</code> package without having to specify the variables for your host and token.            Use the following commands to run your scripts:</p>        <ul class="list _ul"><li class="list__item" id="954025c9"><code class="code" data-lang="Java">npm run list-prod</code></li><li class="list__item" id="096fcc7c"><code class="code" data-lang="Java">npm run download-prod -- &lt;workflow name&gt;</code></li><li class="list__item" id="c693cdce"><code class="code" data-lang="Java">npm run upload-prod -- &lt;workflow name&gt;</code></li></ul>            <p id="4a4a98c0">The basic process is as follows:</p>        <ol class="list _decimal"><li class="list__item" id="48cd7462"><p>Use the <code class="code" data-lang="Java">download</code> command to copy workflows from your installation to your development environment.</p></li><li class="list__item" id="9533f92e"><p>Make your changes.</p></li><li class="list__item" id="56e6c482"><p>Use the <code class="code" data-lang="Java">upload</code> command to update the workflow in YouTrack.</p></li></ol>        <p id="df7b3074">Keep in mind that you’re still pushing updates straight to your production environment.            For many developers, it’s like playing with fire.            If you’d like to work in a more controlled manner, follow the instructions in the next section to play it safe.</p>    </div>    <div class="chapter"><h2 id="connect-test-environment" data-toc="js-workflow-external-editor#connect-test-environment">Connecting to a Test Environment</h2>        <p id="df81f7b0">One of the major advantages of using an external editor to write workflows is that you can connect to multiple YouTrack installations.            As with any code development project, you should first upload and test your changes in a sandbox environment.            Only when you’re sure it’s working as intended should you deploy the code in production.</p>            <p id="e79b786c">We recommend that you use one of the following options to test your workflows.</p>        <div class="table-wrapper"><table class="                 " width="100%" id="fb5847bb"><thead><tr id="238d6eec" class="ijRowHead"><th id="5f269a8f"><p>Option</p></th><th id="165947dc"><p>Description</p></th></tr></thead><tbody><tr id="e82600fd" class="ijRowOdd"><td id="89d12b71"><p>Create your own environment</p></td><td id="412c0874">Our free 10-user plan is a great solution for testing workflows.                    <ul class="list _ul"><li class="list__item" id="10e1b83f"><p>If your production environment is a YouTrack Standalone installation, you can download and install a local copy and use the free plan.                            You can update your local installation to the same version as your production environment to ensure your workflows behave as expected.</p></li><li class="list__item" id="a51e3706"><p>If you use YouTrack InCloud, you can sign up for a test instance and switch to the free 10-user plan at any time.                            Our hosted servers are upgraded to the latest version of YouTrack automatically.</p></li></ul>                    Because of license restrictions for the free plan, you can’t test workflows that set or change the visibility for issues and comments.</td></tr><tr id="1f30b32e" class="ijRowEven"><td id="4a70ca83"><p>Use the InCloud test instance</p></td><td id="6831c049"><p>We have set up a <a href="http://workflows.myjetbrains.com/youtrack/" data-external="true" target="_blank" rel="noopener noreferrer"><span>YouTrack InCloud test instance</span></a> for testing workflows.                    Anyone can register to access this instance and use it as a sandbox.                    When you register, you are given the <span class="control">Global Project Admin</span> role and can test custom workflows in any project.<br><br>                    This instance is not subject to any license restrictions and can be used to test workflows that manage issue and comment visibility.</p></td></tr></tbody></table></div>        <p id="ddc40794">Once you have set up an account in a test environment, you can add the variables from this installation to your configuration file and update your script.</p>            <section class="procedure-steps"><h2 id="20b310ee">To adapt your script to connect to a test environment:</h2><ol class="list _decimal"><li class="list__item" id="9d9f6c81"><p>Store the permanent token from your test environment in your configuration file with the following command:                    <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="n">npm</span> <span class="n">config</span> <span class="n">set</span> <span class="n">token_test</span></code></div></p></li><li class="list__item" id="54f2daad"><p>Store the hostname for your test environment with the following command:                    <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="n">npm</span> <span class="n">config</span> <span class="n">set</span> <span class="n">host_test</span></code></div></p></li><li class="list__item" id="65a35cbb"><p>Update your <code class="code" data-lang="Java">package.json</code> file to include scripts that let you manage workflows in your test environment.                    Use the following example as a guide.                <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="o">{</span>
    <span class="s">&quot;name&quot;</span><span class="o">:</span> <span class="s">&quot;myyoutrackworkflows&quot;</span><span class="o">,</span>
    <span class="s">&quot;version&quot;</span><span class="o">:</span> <span class="s">&quot;1.0.0&quot;</span><span class="o">,</span>
    <span class="s">&quot;description&quot;</span><span class="o">:</span> <span class="s">&quot;Custom workflows for my YouTrack installation&quot;</span><span class="o">,</span>
    <span class="s">&quot;scripts&quot;</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">&quot;list-prod&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env youtrack-workflow list --host=$npm_config_host_prod --token=$npm_config_token_prod&quot;</span><span class="o">,</span>
        <span class="s">&quot;download-prod&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env youtrack-workflow download --host=$npm_config_host_prod --token=$npm_config_token_prod&quot;</span><span class="o">,</span>
        <span class="s">&quot;upload-prod&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env youtrack-workflow upload --host=$npm_config_host_prod --token=$npm_config_token_prod&quot;</span><span class="o">,</span>

        <span class="s">&quot;list-test&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env youtrack-workflow list --host=$npm_config_host_test --token=$npm_config_token_test&quot;</span><span class="o">,</span>
        <span class="s">&quot;download-test&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env youtrack-workflow download --host=$npm_config_host_test --token=$npm_config_token_test&quot;</span><span class="o">,</span>
        <span class="s">&quot;upload-test&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env youtrack-workflow upload --host=$npm_config_host_test --token=$npm_config_token_test&quot;</span>
    <span class="o">},</span>
    <span class="s">&quot;author&quot;</span><span class="o">:</span> <span class="s">&quot;Me&quot;</span><span class="o">,</span>
    <span class="s">&quot;devDependencies&quot;</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">&quot;@jetbrains/youtrack-scripting&quot;</span><span class="o">:</span> <span class="s">&quot;0.0.20&quot;</span><span class="o">,</span>
        <span class="s">&quot;@jetbrains/youtrack-scripting-api&quot;</span><span class="o">:</span> <span class="s">&quot;2017.4.37672&quot;</span>
        <span class="s">&quot;cross-env&quot;</span><span class="o">:</span> <span class="s">&quot;^5.1.1&quot;</span>
    <span class="o">}</span>
<span class="o">}</span></code></div> </p></li></ol></section>        <p id="60994157">Now you can play with fire and not get burned! Your typical process would look something like this:</p>        <ol class="list _decimal"><li class="list__item" id="0798306b"><p>Download a workflow from your production environment with the command: <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="n">npm</span> <span class="n">run</span> <span class="n">download</span><span class="o">-</span><span class="n">prod</span> <span class="o">--</span> <span class="o">&lt;</span><span class="n">workflow</span> <span class="n">name</span><span class="o">&gt;</span></code></div></p></li><li class="list__item" id="f7bcdc9d"><p>Update the workflow in your IDE.</p></li><li class="list__item" id="1950b7c4"><p>Upload the modified workflow to your test environment with the command: <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="n">npm</span> <span class="n">run</span> <span class="n">upload</span><span class="o">-</span><span class="n">test</span> <span class="o">--</span> <span class="o">&lt;</span><span class="n">workflow</span> <span class="n">name</span><span class="o">&gt;</span></code></div></p></li><li class="list__item" id="2d01e5b0"><p>Test the workflow in your YouTrack sandbox environment.</p></li><li class="list__item" id="5cda46c7"><p>Repeat steps 2 through 4 until your workflow behaves as expected.</p></li><li class="list__item" id="54be9c7b"><p> Upload the final version of your workflow to your production environment with the command: <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="n">npm</span> <span class="n">run</span> <span class="n">upload</span><span class="o">-</span><span class="n">prod</span> <span class="o">--</span> <span class="o">&lt;</span><span class="n">workflow</span> <span class="n">name</span><span class="o">&gt;</span></code></div></p></li></ol>        <p id="29c929db">If you are the only person who is responsible for the customization of your YouTrack installation, you might stop here.            With this setup, you can safely update your workflows while working exclusively in your favorite development environment.</p>        <p id="1246de4b">If there are other developers in your organization who write scripts for their own projects, you might want to get everyone to work together.            Follow the instructions in the next section and share this setup with your team.</p>    </div>    <div class="chapter"><h2 id="working-as-team-workflows" data-toc="js-workflow-external-editor#working-as-team-workflows">Working as a Team</h2>        <p id="37339dfb">One of the biggest advantages of the setup in this section is that supports collaboration.            With a few modifications, you can build a platform that other developers can use to manage workflows in your YouTrack installation.            As this setup is not specific to any single environment, these developers can be working with any IDE that supports JavaScript in any operating system.</p>        <p id="34e7b783">The first thing you can do is modify your <code class="code" data-lang="Java">package.json</code> file.            Each of the developers who work with this setup will need to generate and store their own personal tokens, but the variables that are used for the host are the same for everybody.</p>        <p id="f22582ce">To streamline the setup for other users, you can pull these variables into the <code class="code" data-lang="Java">package.json</code> file and update the references in your scripts. Use the following example as a guide.</p>        <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="o">{</span>
    <span class="s">&quot;name&quot;</span><span class="o">:</span> <span class="s">&quot;ouryoutrackworkflows&quot;</span><span class="o">,</span>
    <span class="s">&quot;version&quot;</span><span class="o">:</span> <span class="s">&quot;1.0.0&quot;</span><span class="o">,</span>
    <span class="s">&quot;description&quot;</span><span class="o">:</span> <span class="s">&quot;Custom workflows for our YouTrack installation&quot;</span><span class="o">,</span>
    <span class="s">&quot;config&quot;</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">&quot;host_prod&quot;</span><span class="o">:</span> <span class="s">&quot;https://youtrack.company.com&quot;</span><span class="o">,</span>
        <span class="s">&quot;host_test&quot;</span><span class="o">:</span> <span class="s">&quot;https://workflow.myjetbrains.com/youtrack&quot;</span>
    <span class="o">},</span>
    <span class="s">&quot;scripts&quot;</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">&quot;list-prod&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env youtrack-workflow list --host=$npm_package_config_host_prod --token=$npm_config_token_prod&quot;</span><span class="o">,</span>
        <span class="s">&quot;download-prod&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env youtrack-workflow download --host=$npm_package_config_host_prod --token=$npm_config_token_prod&quot;</span><span class="o">,</span>
        <span class="s">&quot;upload-prod&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env youtrack-workflow upload --host=$npm_package_config_host_prod --token=$npm_config_token_prod&quot;</span><span class="o">,</span>

    <span class="s">&quot;list-test&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env youtrack-workflow list --host=$npm_package_config_host_test --token=$npm_config_token_test&quot;</span><span class="o">,</span>
    <span class="s">&quot;download-test&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env youtrack-workflow download --host=$npm_package_config_host_test --token=$npm_config_token_test&quot;</span><span class="o">,</span>
    <span class="s">&quot;upload-test&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env youtrack-workflow upload --host=$npm_package_config_host_test --token=$npm_config_token_test&quot;</span>
    <span class="o">},</span>
    <span class="s">&quot;author&quot;</span><span class="o">:</span> <span class="s">&quot;Me&quot;</span><span class="o">,</span>
    <span class="s">&quot;devDependencies&quot;</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">&quot;@jetbrains/youtrack-scripting&quot;</span><span class="o">:</span> <span class="s">&quot;0.0.20&quot;</span><span class="o">,</span>
        <span class="s">&quot;@jetbrains/youtrack-scripting-api&quot;</span><span class="o">:</span> <span class="s">&quot;2017.4.37672&quot;</span>
        <span class="s">&quot;cross-env&quot;</span><span class="o">:</span> <span class="s">&quot;^5.1.1&quot;</span>
    <span class="o">}</span>
<span class="o">}</span></code></div>        <p id="b868c5ce">Notice how the references to the <code class="code" data-lang="Java">host</code> are stored in the <code class="code" data-lang="Java">config</code> field.            The script is updated to read these variables from the <code class="code" data-lang="Java">package.json</code> file with <code class="code" data-lang="Java">$npm_package_config</code> instead of just <code class="code" data-lang="Java">$npm_config</code>.</p>        <p id="577f155d">The last step is to upload your project to a repository.            When you upload your project to a repository, other users can follow these steps and start coding:</p>        <ul class="list _ul"><li class="list__item" id="8c0f8bb7"><p>Connect to the repository and download a local copy of the project. Be sure to include the <code class="code" data-lang="Java">package.json</code> in your project files.</p></li><li class="list__item" id="105199f0"><p>Generate personal permanent tokens for the YouTrack installations that are supported in each script and save them as variables in their personal configuration file.</p></li></ul>        <p id="4d8249ac">Now each developer should be able to perform the following actions:</p>        <ul class="list _ul"><li class="list__item" id="7ab98c45"><p>Download project files from the repository.</p></li><li class="list__item" id="740bcc85"><p>Update workflow scripts in their local environment.</p></li><li class="list__item" id="846cc1b2"><p>Upload and test their updates in the sandbox until they behave as expected.</p></li><li class="list__item" id="4e8654e7"><p>Upload the revised scripts to the production environment.</p></li><li class="list__item" id="11ceae0f"><p>Push their changes back to the repository, updating the version of the revised script.</p></li></ul>        <p id="7c607f75">For a real-life example, check out our <a href="https://github.com/JetBrains/youtrack-workflows" data-external="true" target="_blank" rel="noopener noreferrer"><span>YouTrack Custom Workflow Repository</span></a>.            Here, we upload workflows that support a range of use cases that are not covered by the default workflows in YouTrack.            Everyone is welcome to download scripts from the repository and adapt them to suit specific business cases.            If you have a script that you’d like to share with the community, submit a pull request!</p>    </div>    <div class="chapter"><h2 id="special-instructions-ssl-certificates" data-toc="js-workflow-external-editor#special-instructions-ssl-certificates">Special Instructions for SSL Certificates</h2>        <p id="5cbf650f">If your YouTrack domain uses an SSL certificate that is issued by a known certificate authority, you can establish a connection using just your personal permanent token.            Your certificate is already included in CA certificate store that is built into Node.js.            For certificates that are issued by a CA that is not recognized automatically or is self-signed, you need to modify the environment variables in Node.js to recognize or ignore your certificate.</p>        <div class="chapter"><h3 id="private-certificate-authorities">Private Certificate Authorities</h3>            <p id="b7c40daf">If your certificate is issued by a CA that is not recognized automatically, you need to add your certificate to the list of certificates that are recognized by Node.js.</p>            <p id="b74633fe">To add your certificate, use the environmental variable <code class="code" data-lang="Java">NODE_EXTRA_CA_CERTS=file</code> in your scripts.            This variable is supported in Node.js versions v7.3.0 (or LTS versions 6.10.0 and 4.8.0) and later.</p>            <section class="procedure-steps"><h2 id="993ead69">To work with a private certificate:</h2><ol class="list _decimal"><li class="list__item" id="8c4df99f"><p>Open your YouTrack installation in a web browser.</p></li><li class="list__item" id="9c03d8a2"><p>User your browser tools to export the certificate. Specific instructions vary for different browsers.</p></li><li class="list__item" id="02a8a337"><p>Store the certificate file in a directory that is accessible from your development environment.</p></li><li class="list__item" id="0d333849"><p>Set the reference to the directory in your private configuration. For example:                    <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="n">npm</span> <span class="n">config</span> <span class="n">set</span> <span class="n">cert_prod</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">&gt;</span></code></div>                    Replace &lt;path&gt; with the full path to the certificate file.</p></li><li class="list__item" id="2709af8c"><p>Modify your scripts to reference the extra CA certificate. Use the following example as a guide.                <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="o">{</span>
    <span class="s">&quot;name&quot;</span><span class="o">:</span> <span class="s">&quot;ouryoutrackworkflows&quot;</span><span class="o">,</span>
    <span class="s">&quot;version&quot;</span><span class="o">:</span> <span class="s">&quot;1.0.0&quot;</span><span class="o">,</span>
    <span class="s">&quot;description&quot;</span><span class="o">:</span> <span class="s">&quot;Custom workflows for our YouTrack installation&quot;</span><span class="o">,</span>
    <span class="s">&quot;config&quot;</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">&quot;host_prod&quot;</span><span class="o">:</span> <span class="s">&quot;https://youtrack.company.com&quot;</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="s">&quot;scripts&quot;</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">&quot;list-prod&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env NODE_EXTRA_CA_CERTS=\&quot;$npm_config_cert_prod\&quot; youtrack-workflow list --host=$npm_package_config_host_prod --token=$npm_config_token_prod&quot;</span><span class="o">,</span>
        <span class="s">&quot;download-prod&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env NODE_EXTRA_CA_CERTS=\&quot;$npm_config_cert_prod\&quot; youtrack-workflow download --host=$npm_package_config_host_prod --token=$npm_config_token_prod&quot;</span><span class="o">,</span>
        <span class="s">&quot;upload-prod&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env NODE_EXTRA_CA_CERTS=\&quot;$npm_config_cert_prod\&quot; youtrack-workflow upload --host=$npm_package_config_host_prod --token=$npm_config_token_prod&quot;</span><span class="o">,</span>

    <span class="o">},</span>
    <span class="s">&quot;author&quot;</span><span class="o">:</span> <span class="s">&quot;Me&quot;</span><span class="o">,</span>
    <span class="s">&quot;devDependencies&quot;</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">&quot;@jetbrains/youtrack-scripting&quot;</span><span class="o">:</span> <span class="s">&quot;0.0.20&quot;</span><span class="o">,</span>
        <span class="s">&quot;@jetbrains/youtrack-scripting-api&quot;</span><span class="o">:</span> <span class="s">&quot;2017.4.37672&quot;</span>
        <span class="s">&quot;cross-env&quot;</span><span class="o">:</span> <span class="s">&quot;^5.1.1&quot;</span>
    <span class="o">}</span>
<span class="o">}</span></code></div> </p></li></ol></section>        </div>        <div class="chapter"><h3 id="self-signed-certificates">Self-signed Certificates</h3>            <p id="39c1b542">If you work in a closed environment and use a self-signed certificate, you can disable the secure connection over TLS with the environmental variable <code class="code" data-lang="Java">NODE_TLS_REJECT_UNAUTHORIZED=0</code>.</p>             <p id="480309d4">The following example shows you how to connect to a local machine with the TLS connection disabled.</p>            <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="o">{</span>
    <span class="s">&quot;name&quot;</span><span class="o">:</span> <span class="s">&quot;ouryoutrackworkflows&quot;</span><span class="o">,</span>
    <span class="s">&quot;version&quot;</span><span class="o">:</span> <span class="s">&quot;1.0.0&quot;</span><span class="o">,</span>
    <span class="s">&quot;description&quot;</span><span class="o">:</span> <span class="s">&quot;Custom workflows for our YouTrack installation&quot;</span><span class="o">,</span>
    <span class="s">&quot;config&quot;</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">&quot;host_local&quot;</span><span class="o">:</span> <span class="s">&quot;http://localhost:8081/&quot;</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="s">&quot;scripts&quot;</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">&quot;list-local&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env NODE_TLS_REJECT_UNAUTHORIZED=0 youtrack-workflow list --host=$npm_package_config_host_prod --token=$npm_config_token_prod&quot;</span><span class="o">,</span>
        <span class="s">&quot;download-local&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env NODE_TLS_REJECT_UNAUTHORIZED=0 youtrack-workflow download --host=$npm_package_config_host_prod --token=$npm_config_token_prod&quot;</span><span class="o">,</span>
        <span class="s">&quot;upload-local&quot;</span><span class="o">:</span> <span class="s">&quot;cross-env NODE_TLS_REJECT_UNAUTHORIZED=0 youtrack-workflow upload --host=$npm_package_config_host_prod --token=$npm_config_token_prod&quot;</span><span class="o">,</span>

    <span class="o">},</span>
    <span class="s">&quot;author&quot;</span><span class="o">:</span> <span class="s">&quot;Me&quot;</span><span class="o">,</span>
    <span class="s">&quot;devDependencies&quot;</span><span class="o">:</span> <span class="o">{</span>
        <span class="s">&quot;@jetbrains/youtrack-scripting&quot;</span><span class="o">:</span> <span class="s">&quot;0.0.20&quot;</span><span class="o">,</span>
        <span class="s">&quot;@jetbrains/youtrack-scripting-api&quot;</span><span class="o">:</span> <span class="s">&quot;2017.4.37672&quot;</span>
        <span class="s">&quot;cross-env&quot;</span><span class="o">:</span> <span class="s">&quot;^5.1.1&quot;</span>
    <span class="o">}</span>
<span class="o">}</span></code></div>            <p id="b4c36271">Even though this type of workaround is often done in a development environment, it is not secure.                If you are not aware of the potential pitfalls, avoid this practice.                Never use this variable to connect to your production environment.</p>        </div>    </div><div class="last-modified" data-skip-index="skip">Last modified: 7 March 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Web-based-Workflow-Editor.html">Web-based Workflow Editor</a><a class="navigation-links__next" href="Create-Workflow.html">Create a Workflow</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>