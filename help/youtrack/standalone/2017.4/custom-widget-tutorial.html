<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta charset="UTF-8"><meta name="robots" content="noindex"><title>Custom Widget Tutorial - Help | YouTrack Standalone</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="custom-widget-tutorial"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search YouTrack Standalone Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2017.4 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="false"><h1 data-toc="custom-widget-tutorial" id="custom-widget-tutorial.xml">Custom Widget Tutorial</h1>        <p id="f78d188f">This page shows how to build a custom widget. We decided to cover a very simple case: A sample widget that displays profile information of a predefined GitHub user.            This widget does not perform any complex operation, like authentication and authorization in a third-party service, nor does it have complex style elements. Still, we hope that it will give you the taste of how the idea of custom widgets works.</p>        <p id="30f7a3c7">The outline of the developing a custom widget contains the following steps:</p>        <ul class="list _ul"><li class="list__item" id="6e082cd0"><p>Describe the widget with the manifest.json</p></li><li class="list__item" id="695f0ede"><p>Create an entry point for your widget: index.html file</p></li><li class="list__item" id="c02ecaae"><p>Create the script: index.js</p></li><li class="list__item" id="d78f6240"><p>Test the widget</p></li><li class="list__item" id="4fdd3a8b"><p>Upload the widget to your dashboard.</p></li></ul>        <div class="chapter"><h2 id="create-widget-manifest" data-toc="custom-widget-tutorial#create-widget-manifest">Create the Widget Manifest</h2>            <aside class="tip sideblock" data-title="Read more..." rel="create-widget-manifest" id="c9395f53"><p id="be9abb24">&nbsp;</p>                <p id="a3aff815"><a href="building-custom-widgets.html#widget-manifest">...about widget manifest</a></p>            </aside>            <p id="1b7f76c7">As the first step, we create the <code class="code" data-lang="Java">manifest.json</code> file.                This file defines the attributes for the custom widget.</p>            <p id="c9021c98">For YouTrack Standalone to read and display the attributes in the widget manifest:</p>            <ul class="list _ul"><li class="list__item" id="ecd3933a"><p>The file must be named <code class="code" data-lang="Java">manifest.json</code>.</p></li><li class="list__item" id="4f5c736f"><p>The file must be stored in the top-most level of the ZIP archive.</p></li></ul>            <p id="75dafdcc">Here is the manifest file for our sample widget:</p>            <div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="p">{</span>
<span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;github-user-widget&quot;</span><span class="p">,</span>
<span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;0.0.1&quot;</span><span class="p">,</span>
<span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;GitHub User Information&quot;</span><span class="p">,</span>
<span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;Widget shows information about GitHub user.&quot;</span><span class="p">,</span>
<span class="s2">&quot;author&quot;</span><span class="o">:</span> <span class="s2">&quot;anonymous&quot;</span>
<span class="p">}</span></code></div>        </div>        <div class="chapter"><h2 id="create-index.html-file" data-toc="custom-widget-tutorial#create-index.html-file">Create an index.html File</h2>            <p id="69eab718">Second step is to create an entry point for your widget: <code class="code" data-lang="Java">index.html</code> file. This is a standard HTML5 file that includes the <code class="code" data-lang="Java">hub-dashboard-addons</code> library that allows communicating with the dashboard.                It also contains CSS styles to display the data retrieved from the GitHub profile. The <code class="code" data-lang="Java">body</code> element includes the widget script itself (<code class="code" data-lang="Java">index.js</code>).</p>            <div class="code-block" data-lang="HTML"><code class="code-block__wrapper"><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- Default styles of dashboard widgets --&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">href=</span><span class="s">&quot;https://unpkg.com/hub-dashboard-addons@latest/dashboard.css&quot;</span><span class="nt">&gt;</span>

        <span class="c">&lt;!-- Include dashboard connector from CDN --&gt;</span>
        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;https://unpkg.com/hub-dashboard-addons@latest&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>

        <span class="nt">&lt;style&gt;</span>
            <span class="nc">.user-avatar</span> <span class="p">{</span>
                <span class="k">width</span><span class="o">:</span> <span class="m">64px</span><span class="p">;</span>
                <span class="k">height</span><span class="o">:</span> <span class="m">64px</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="nt">&lt;/style&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;user-details&quot;</span><span class="nt">&gt;</span>Loading...<span class="nt">&lt;/div&gt;</span>

        <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;index.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></div>        </div>        <div class="chapter"><h2 id="create-the-script" data-toc="custom-widget-tutorial#create-the-script">Create the Script</h2>            <p id="e50bfa73">The third step is to create the script itself. In our case, the script retrieves and displays the user profile of a specified GitHub user.</p>            <div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="cm">/* Declare a constant that contains a login of the target github user */</span>

<span class="kr">const</span> <span class="nx">USER_NAME</span> <span class="o">=</span> <span class="s1">&#39;jetbrains&#39;</span><span class="p">;</span>

<span class="cm">/* The following renderUserDetails(user) function creates and inserts the user profile data into the DOM */</span>

<span class="kd">function</span> <span class="nx">renderUserDetails</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">container</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;user-details&#39;</span><span class="p">);</span>

    <span class="nx">container</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="err">`</span>
    <span class="o">&lt;</span><span class="nx">img</span> <span class="nx">src</span><span class="o">=</span><span class="nx">$</span><span class="p">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">avatar_url</span><span class="p">}</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&quot;user-avatar&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">h4</span><span class="o">&gt;</span><span class="nx">$</span><span class="p">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span> <span class="nx">aka</span> <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;${user.html_url}&quot;</span><span class="o">&gt;</span><span class="nx">$</span><span class="p">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">login</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/a&gt;&lt;/h4&gt;</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Followers</span><span class="o">:</span> <span class="nx">$</span><span class="p">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">followers</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Repos</span><span class="o">:</span> <span class="nx">$</span><span class="p">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">public_repos</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
    <span class="err">`</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* The following function actually retrieves the data from GitHub using the GitHub API.</span>
<span class="cm">    It uses the Fetch API (https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) */</span>

<span class="kd">function</span> <span class="nx">loadAndRenderUser</span><span class="p">(</span><span class="nx">userLogin</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">fetch</span><span class="p">(</span><span class="err">`</span><span class="nx">https</span><span class="o">:</span><span class="c1">//api.github.com/users/${userLogin}`)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">ok</span> <span class="o">?</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">()</span> <span class="o">:</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">user</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">renderUserDetails</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">user</span><span class="p">;</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
<span class="p">}</span>

<span class="cm">/* The last step is to register the widget in the dashboard and initiate loading the user data.</span>
<span class="cm">    Also, this block defines displayed widget title and adds the refresh button.</span>
<span class="cm">    When you click the refresh button, the script will reload and re-render the user profile data.</span>
<span class="cm">    We use Dashboard API to implement this functionality. */</span>

<span class="c1">// Register widget:</span>
<span class="nx">Dashboard</span><span class="p">.</span><span class="nx">registerWidget</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">dashboardAPI</span><span class="p">,</span> <span class="nx">registerWidgetAPI</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Load GitHub profile data</span>
    <span class="nx">loadAndRenderUser</span><span class="p">(</span><span class="nx">USER_NAME</span><span class="p">)</span>
    <span class="c1">// Set the widget title</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">user</span> <span class="o">=&gt;</span> <span class="nx">dashboardAPI</span><span class="p">.</span><span class="nx">setTitle</span><span class="p">(</span><span class="err">`</span><span class="nx">GitHub</span> <span class="nx">User</span> <span class="nx">$</span><span class="p">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">login</span><span class="p">}</span><span class="err">`</span><span class="p">));</span>

    <span class="c1">// Add the refresh button.</span>
    <span class="nx">registerWidgetAPI</span><span class="p">({</span>
        <span class="nx">onRefresh</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">loadAndRenderUser</span><span class="p">(</span><span class="nx">USER_NAME</span><span class="p">)</span>
    <span class="p">});</span>
<span class="p">});</span></code></div>        </div>        <div class="chapter"><h2 id="test-the-widget" data-toc="custom-widget-tutorial#test-the-widget">Test the Widget</h2>            <aside class="tip sideblock" data-title="Read more..." rel="test-the-widget" id="30d99907">                <br><br>                <p id="de305b39"><a href="test-custom-widgets.html">...about testing widgets</a></p>            </aside>            <p id="e5aab28b">To test the widget, we need to load it in the <span class="control">Widgets Playground</span>. First, we run a static server on the local directory with the custom widget files. In our case,                we use <a href="https://www.npmjs.com/package/http-server" data-external="true" target="_blank" rel="noopener noreferrer"><span>npm http-server</span></a> that requires Node.js. To simplify the matters even more, we use a YouTrack Standalone service that is available over HTTP.                If you have YouTrack Standalone running over HTTPS, then you need to host your widget over HTTPS as well. In this case, you can use a service like <code class="code" data-lang="Java">https://ngrok.com</code>.                For more information, see <a href="test-custom-widgets.html#testing-widgets-over-HTTPS"><span>Testing Widgets over a Secure Connection</span></a>.            </p>                                <section class="procedure-steps"><h2 id="74a14123">To serve the widget over HTTP:</h2><ol class="list _decimal"><li class="list__item" id="b318915b"><p>Install the HTTP server:                    <div class="code-block" data-lang="Shell"><code class="code-block__wrapper">npm i http-server -g</code></div>                </p></li><li class="list__item" id="3cf91886"><p>                    From the custom widget directory, run the HTTP server with the following command:                    <div class="code-block" data-lang="Shell"><code class="code-block__wrapper">http-server . --cors -c-1 -p 9033</code></div>                    The HTTP server starts and serves the content on the current directory. In the response, you see the IP addresses (both internal and external)                    at which the HTTP server is accessible. For example:                    <figure><a class="lightbox" href="/help/img/youtrack/2017.4/http-server-started.zoomed.png"><img alt="http-server starts" title="http-server starts" src="/help/img/youtrack/2017.4/http-server-started.png" id="50cbd94c" width="600" height="130"></a></figure>                </p></li></ol></section>            <p id="27c53030">We run the YouTrack service locally, so we can load the widget into the widgets playground from the <code class="code" data-lang="Java">http://localhost:9033/</code> address.</p>                            <section class="procedure-steps"><h2 id="58aa43b9">To load your widget in the widgets playground:</h2><ol class="list _decimal"><li class="list__item" id="afb1cf6d">Open the <span class="control">Widgets Playground</span> page in YouTrack.                    <ul class="list _ul"><li class="list__item" id="4cbad93e"><p>In the <span class="control">Server Settings</span> section of the <span class="control">Administration</span> menu, select <span class="control">Custom Widgets</span>.</p></li><li class="list__item" id="5d447905"><p>Click the <span class="control">Widgets playground</span> link in the header.</p></li></ul></li><li class="list__item" id="1f283a41"><p>Enter the web address for your custom widget in the input field. In our case, <code class="code" data-lang="Java">http://localhost:9033/</code></p></li><li class="list__item" id="07e5e6d2">Click the <span class="control">Load widget</span> button.                    <ul class="list _ul"><li class="list__item" id="82e319e2"><p>The widget is loaded and displayed in the widgets playground.                            <figure><a class="lightbox" href="/help/img/youtrack/2017.4/custom-widget-howto-playground.zoomed.png"><img alt="custom widget howto playground" title="custom widget howto playground" src="/help/img/youtrack/2017.4/custom-widget-howto-playground.png" id="7f8e5f7d" width="300" height="185"></a></figure>                                                    </p></li></ul>                </li></ol></section>            <p id="0aaebce4">If you modify the code and upload these changes to your web server, use the <span class="control">Reload widget</span>                button to refresh the widget content and test the updates.</p>        </div>        <div class="chapter"><h2 id="upload-the-widget" data-toc="custom-widget-tutorial#upload-the-widget">Upload the Widget</h2>            <p id="2d6ac373">Now that we successfully tested the widget in the playground, we can upload it to the production environment.</p>            <p id="5e47aff2">First, we create a zip archive with the widget files. You can use any archive application to your liking. Just remember that <code class="code" data-lang="Java">manifest.json</code> and <code class="code" data-lang="Java">index.html</code> files must be located on the top-most level of the zip file.</p>            <p id="95e2ed51">For example, we used command line prompt in Mac OS X to create the archive. Our sample widget contains only three files and all of them are located in the same directory without any subdirectories. Thus the command to create the archive is very simple (run in the custom widget directory):</p>            <div class="code-block" data-lang="Shell"><code class="code-block__wrapper">zip custom-widget.zip *</code></div>            <p id="3251e93f">We created the <code class="code" data-lang="Java">custom-widget.zip</code> file. Now we just need to upload it to the production environment:</p>            <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="36d5ba29"><p>In your production YouTrack Standalone, open the <span class="control">Custom Widgets</span> page.</p></li><li class="list__item" id="9bd2b873">Click the <span class="control">New widget...</span> button.                    <ul class="list _ul"><li class="list__item" id="3ea67aec"><p>The <span class="control">New widget</span> dialog is open in the side bar.</p></li></ul>                </li><li class="list__item" id="0f87eea2"><p>Select the zip file to upload. The information from the <code class="code" data-lang="Java">manifest.json</code> should be displayed.                    <figure><a class="lightbox" href="/help/img/youtrack/2017.4/new-widget-dialog-with-info.zoomed.png"><img alt="new widget dialog with info" title="new widget dialog with info" src="/help/img/youtrack/2017.4/new-widget-dialog-with-info.png" id="f14bf373" width="300" height="200"></a></figure>                </p></li><li class="list__item" id="af4f9d53">Click <span class="control">Upload widget</span> button.                    <ul class="list _ul"><li class="list__item" id="553f5589"><p>The widget is uploaded to the server and displayed in the list of available custom widgets.                            <figure><a class="lightbox" href="/help/img/youtrack/2017.4/custom-widget-uploaded-to-production.zoomed.png"><img alt="custom widget uploaded to production" title="custom widget uploaded to production" src="/help/img/youtrack/2017.4/custom-widget-uploaded-to-production.png" id="57ad69e7" width="600" height="120"></a></figure>                            It also appears in the <span class="control">Add widget...</span> drop-down menu on the Dashboard:                            <figure><a class="lightbox" href="/help/img/youtrack/2017.4/dashboard-custom-widget-menu.zoomed.png"><img alt="dashboard custom widget menu" title="dashboard custom widget menu" src="/help/img/youtrack/2017.4/dashboard-custom-widget-menu.png" id="d55afba0" width="300" height="260"></a></figure>                        </p></li></ul>                </li></ol></section>            <p id="662fb1b5">This it! Now the new custom widget is available to the users of the Dashboard in YouTrack Standalone.</p>        </div><div class="last-modified" data-skip-index="skip">Last modified: 7 March 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="custom-widgets-API-reference.html">Custom Widgets API Reference</a><a class="navigation-links__next" href="Activity-Stream.html">Activity Stream</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>