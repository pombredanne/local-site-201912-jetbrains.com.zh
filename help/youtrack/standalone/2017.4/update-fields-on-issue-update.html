<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta charset="UTF-8"><meta name="robots" content="noindex"><title>Update Fields on Issue Update - Help | YouTrack Standalone</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="update-fields-on-issue-update"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search YouTrack Standalone Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2017.4 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="false"><h1 data-toc="update-fields-on-issue-update" id="update-fields-on-issue-update.xml">Update Fields on Issue Update</h1>  <p id="13ea77ed">One of the most useful applications for workflows is to automate issue updates.    The purpose of this automation is to make YouTrack do the dirty work for you.  The workflows for the use cases on this page show you how you can update issues based on changes that are applied to the issue itself.</p>  <div class="chapter"><h2 id="apply-changes-in-response-to-manual-updates" data-toc="update-fields-on-issue-update#apply-changes-in-response-to-manual-updates">Apply Changes in Response to Manual Updates</h2>    <p id="42787ebb">You may have never realized that part of the functionality that you use on a daily basis in YouTrack is implemented with workflows.      One such workflow is <a href="Workflow-Subsystem-Assignee.html"><span>Subsystem Assignee</span></a>, which is attached automatically to new projects.</p>    <p id="3e543a35">This workflow contains one rule – <code class="code" data-lang="Java">Set subsystem owner as assignee for unassigned issues</code> – which does exactly what the title says.      The concept is relatively straightforward.      Many organizational processes imply that each subsystem in your product has a responsible person or "owner".      This person is the default <span class="control">Assignee</span> for each new issue that is assigned to this <span class="control">Subsystem</span>.      When you designate an owner for each of your subsystems, every new issue is assigned accordingly.      Here's the corresponding workflow rule:</p>    <div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="kd">var</span> <span class="nx">entities</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@jetbrains/youtrack-scripting-api/entities&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">workflow</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@jetbrains/youtrack-scripting-api/workflow&#39;</span><span class="p">);</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">rule</span> <span class="o">=</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">Issue</span><span class="p">.</span><span class="nx">onChange</span><span class="p">({</span>
  <span class="nx">title</span><span class="o">:</span> <span class="nx">workflow</span><span class="p">.</span><span class="nx">i18n</span><span class="p">(</span><span class="s1">&#39;Set subsystem owner as assignee for unassigned issues&#39;</span><span class="p">),</span>
  <span class="nx">guard</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">!</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">issue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">Assignee</span> <span class="o">&amp;&amp;</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">issue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">Subsystem</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">action</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">issue</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">issue</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">((</span><span class="nx">issue</span><span class="p">.</span><span class="nx">isReported</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">issue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">isChanged</span><span class="p">(</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">Subsystem</span><span class="p">)</span> <span class="o">||</span>
          <span class="nx">issue</span><span class="p">.</span><span class="nx">isChanged</span><span class="p">(</span><span class="s1">&#39;project&#39;</span><span class="p">)))</span> <span class="o">||</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">becomesReported</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">issue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">Assignee</span> <span class="o">=</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">fields</span><span class="p">.</span><span class="nx">Subsystem</span><span class="p">.</span><span class="nx">owner</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">requirements</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">Assignee</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">fieldType</span>
    <span class="p">},</span>
    <span class="nx">Subsystem</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">OwnedField</span><span class="p">.</span><span class="nx">fieldType</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span></code></div>    <aside class="tip sideblock" data-title="Workflow Localization" rel="8c381f18" id="91ca4efc"><br><br>      <p id="e5597426">Default workflows in YouTrack use the <code class="code" data-lang="Java">workflow.i18n(...)</code> method to localize workflow messages.        When you write your own workflows, you always know the language of your YouTrack installation, so you don’t need to use this method.</p>      <p id="9cc96253">If you want to edit the messages in default workflows, remove this method and replace its usage with a plain string of message text.        For details, see <a href="Workflow-Localization.html"><span>Localization</span></a>.</p>    </aside>    <p id="97d0b7d2">This type of update is useful in a wide range of cases. Here are just a few examples:</p>    <ul class="list _ul"><li class="list__item" id="cf105453"><p>Set the current user as <span class="control">Assignee</span> when the issue state changes from <span class="control">Open</span> to <span class="control">In Progress</span>.</p></li><li class="list__item" id="a6ee25a7"><p>Change the issue <span class="control">State</span> from <span class="control">Wait for reply</span> to <span class="control">Open</span> when a new comment is added.</p></li><li class="list__item" id="005d48e1"><p>Mark an issue as <span class="control">Fixed</span> when the <span class="control">Fix versions</span> are set.</p></li><li class="list__item" id="8684a92c"><p>Clear the <span class="control">Fix versions</span> field when the issue state changes to <span class="control">Duplicate</span> or <span class="control">Incomplete</span>.</p></li></ul>  </div>  <div class="chapter"><h2 id="apply-changes-on-schedule" data-toc="update-fields-on-issue-update#apply-changes-on-schedule">Apply Changes on a Set Schedule</h2>    <p id="10defc3c">Let’s say that you want to improve your productivity and support the Pomodoro technique in your project.      There are plenty of ways to do it: set up a physical timer, use a mobile app, enable a browser extension... or you can simply enable the <a href="Workflow-Pomodoro-Timer.html"><span>Pomodoro Timer</span></a> workflow, which is distributed with YouTrack.</p><aside class="tip sideblock" data-title="The Pomodoro Technique" rel="10defc3c" id="29b89fda">  <p id="ab6a6791">To learn more about the Pomodoro technique, refer to the <a href="http://www.pomodorotechnique.com/" data-external="true" target="_blank" rel="noopener noreferrer"><span>Cirillo Company's</span></a> website.</p></aside>     <p id="da3c6bd6">This workflow is supported by a set of additional custom fields, including <span class="control">Pomodoro state</span> and <span class="control">Pomodoro countdown</span>.       As soon as the <span class="control">Pomodoro state</span> changes to <span class="control">Timer's running</span>, the <span class="control">Pomodoro countdown</span> is set to 25.       A scheduled rule immediately starts decreasing the value in the countdown field by 1 every minute:</p>    <div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="kd">var</span> <span class="nx">entities</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@jetbrains/youtrack-scripting-api/entities&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">workflow</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@jetbrains/youtrack-scripting-api/workflow&#39;</span><span class="p">);</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">rule</span> <span class="o">=</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">Issue</span><span class="p">.</span><span class="nx">onSchedule</span><span class="p">({</span>
  <span class="nx">title</span><span class="o">:</span> <span class="nx">workflow</span><span class="p">.</span><span class="nx">i18n</span><span class="p">(</span><span class="s1">&#39;Enable Pomodoro countdown&#39;</span><span class="p">),</span>
  <span class="nx">search</span><span class="o">:</span> <span class="s1">&#39;has: {Pomodoro countdown} AND Pomodoro countdown: -0 AND (Pomodoro state: {Timer’s running} OR Pomodoro state: {On a break})&#39;</span><span class="p">,</span>
  <span class="nx">cron</span><span class="o">:</span> <span class="s1">&#39;0 * * * * ?&#39;</span><span class="p">,</span>
  <span class="nx">action</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">issueFields</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">issue</span><span class="p">.</span><span class="nx">fields</span><span class="p">;</span>
    <span class="nx">issueFields</span><span class="p">[</span><span class="s1">&#39;Pomodoro countdown&#39;</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">requirements</span><span class="o">:</span> <span class="p">{</span>
    <span class="s1">&#39;PomodoroCountdown&#39;</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Pomodoro countdown&#39;</span><span class="p">,</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">Field</span><span class="p">.</span><span class="nx">integerType</span>
    <span class="p">},</span>
    <span class="s1">&#39;PomodoroState&#39;</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Pomodoro state&#39;</span><span class="p">,</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">entities</span><span class="p">.</span><span class="nx">EnumField</span><span class="p">.</span><span class="nx">fieldType</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span></code></div>    <p id="fa0b157c">Another example that illustrates this type of automatic update is described in the <a href="Workflow-Tutorial.html"><span>Workflow Tutorial</span></a>.</p>  </div><div class="last-modified" data-skip-index="skip">Last modified: 7 March 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="generate-issues-automatically-workflows.html">Generate Issues Automatically</a><a class="navigation-links__next" href="propagate-values-between-issues-workflow.html">Propagate Values Between Issues</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>