<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta charset="UTF-8"><meta name="robots" content="noindex"><title>Reverse Proxy Configuration - Help | YouTrack Standalone</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="Reverse-Proxy-Configuration"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search YouTrack Standalone Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2017.4 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="false"><h1 data-toc="Reverse-Proxy-Configuration" id="Reverse-Proxy-Configuration.xml">Reverse Proxy Configuration</h1>    <p id="e6a9a024">You can set up YouTrack to work behind a reverse proxy server.</p>    <p id="aa1fcc7f">The process that you use to enable this setup consists of the following steps:</p>    <ol class="list _decimal"><li class="list__item" id="beeb08f1"><a href="#Change_Base_URL">Configure YouTrack to point to the base URL of the proxy server.</a></li><li class="list__item" id="29bd7a14"><p><a href="#Configure_Headers">Configure the headers of your proxy server</a>.            This page includes guidelines for <a href="#Apache_Config">Apache</a>, <a href="#IIS_Config">IIS</a>, and <a href="#Nginx_Config">NGINX</a> servers and the <a href="#POUND">Pound</a> reverse proxy.</p></li></ol>    <div class="chapter"><h2 id="Change_Base_URL" data-toc="Reverse-Proxy-Configuration#Change_Base_URL">Change the Base URL of your YouTrack Server</h2>        <p id="77af519f">You can use the following procedure to change the base URL for both ZIP and MSI distributions.            To execute these commands in an MSI distribution, open the <span class="control">Command Prompt</span> window as an administrator.            Always execute the <code class="code" data-lang="Java">configure</code> command on behalf of the OS user that runs the YouTrack service.            This command creates configuration files and folders. The YouTrack service user should have sufficient permissions to access these files and folders.</p>        <section class="procedure-steps"><h2 id="b482d88d">To change the base URL for a ZIP or MSI distribution:</h2><ol class="list _decimal"><li class="list__item" id="41d9dcf2"><p>Stop the YouTrack service. For specific instructions, see <a href="Stop-and-Start-YouTrack.html"><span>Stop and Start YouTrack</span></a>.</p></li><li class="list__item" id="87f833c7">In a command-line interface, change the directory to <code class="code" data-lang="Java">&lt;youtrack_home&gt;/bin/</code>.                <ul class="list _ul"><li class="list__item" id="4f8d6798"><p>For a ZIP installation, the <code class="code" data-lang="Java">&lt;youtrack_home&gt;</code> directory is the location where the ZIP distribution was unpacked during installation.</p></li><li class="list__item" id="a8c2900f"><p>For an MSI installation, the <code class="code" data-lang="Java">&lt;youtrack_home&gt;</code> directory is <code class="code" data-lang="Java">%programdata%\JetBrains\YouTrack</code>.</p></li></ul>            </li><li class="list__item" id="415fb398">Enter the following command:<br>                <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="n">youtrack</span><span class="o">.</span><span class="na">sh</span> <span class="n">configure</span> <span class="o">--</span><span class="n">listen</span><span class="o">-</span><span class="n">port</span> <span class="mi">1111</span> <span class="o">--</span><span class="n">base</span><span class="o">-</span><span class="n">url</span> <span class="n">http</span><span class="o">:</span><span class="c1">//youtrack.mydomain.com:2222</span></code></div>                <ul class="list _bullet"><li class="list__item" id="7cd9ddc3"><p><code class="code" data-lang="Console">1111</code> is the port number that your YouTrack server listens to.</p></li><li class="list__item" id="77fcbf4a"><p><code class="code" data-lang="Console">http://youtrack.mydomain.com</code> is the address of your proxy server.                        For an SSL-terminating proxy, use <code class="code" data-lang="Java">https://</code>.</p></li><li class="list__item" id="f07e35f5"><p><code class="code" data-lang="Console">2222</code> is the port number your proxy server listens to.</p></li></ul>            </li><li class="list__item" id="9e3c82c9"><p>Configure the headers in your proxy server.                Follow the guidelines that are appropriate for your <a href="#Apache_Config">Apache</a>, <a href="#IIS_Config">IIS</a>, <a href="#Nginx_Config">NGINX</a> server, or <a href="#POUND">Pound</a> reverse proxy.</p></li><li class="list__item" id="5fced838"><p>Start the YouTrack service. For specific instructions, see <a href="Stop-and-Start-YouTrack.html"><span>Stop and Start YouTrack</span></a>.</p></li></ol></section>        <section class="procedure-steps"><h2 id="4b4ed880">To change the base URL for a JAR distribution:</h2><ol class="list _decimal"><li class="list__item" id="f9c04431"><p>Stop the YouTrack service.</p></li><li class="list__item" id="2da5d8fb">Modify the command that you use to launch the service to reference the new base URL:                <div class="code-block" data-lang="Console"><code class="code-block__wrapper">java -Xmx1g -XX:MaxMetaspaceSize<span class="o">=</span>256m -Djetbrains.youtrack.baseUrl<span class="o">=</span>http://youtrack.mydomain.com:2222 -jar youtrack-xx.jar 1111</code></div>                <ul class="list _bullet"><li class="list__item" id="ad3b694f"><p><code class="code" data-lang="Console">1111</code> is the port number that your YouTrack server listens to.</p></li><li class="list__item" id="d866196d"><p><code class="code" data-lang="Console">http://youtrack.mydomain.com</code> is the address of your proxy server.                        For an SSL-terminating proxy, use <code class="code" data-lang="Java">https://</code>.</p></li><li class="list__item" id="2b1b57e9"><p><code class="code" data-lang="Console">2222</code> is the port number your proxy server listens to.</p></li></ul>            </li><li class="list__item" id="ad4ed160"><p>Configure the headers in your proxy server.                Follow the guidelines that are appropriate for your <a href="#Apache_Config">Apache</a>, <a href="#IIS_Config">IIS</a>, <a href="#Nginx_Config">NGINX</a> server, or <a href="#POUND">Pound</a> reverse proxy.</p></li><li class="list__item" id="242ec76c"><p>Start the YouTrack service.</p></li></ol></section>    </div>    <div class="chapter"><h2 id="Configure_Headers" data-toc="Reverse-Proxy-Configuration#Configure_Headers">Configure Proxy Server Headers</h2>        <p id="31675908">To configure the headers in your proxy server, follow the guidelines that are specific to your server.            Configuration guidelines for Apache HTTP Server, IIS, NGINX, and Pound are provided below.</p>        <div class="chapter"><h3 id="Apache_Config">Apache HTTP Server Configuration</h3>            <p id="3c47bacc">To use an Apache HTTP Server as a reverse proxy, you need to run an <code class="code" data-lang="Java">a2enmod</code> script and add directives to a <code class="code" data-lang="Java">.conf</code> file on your server.</p>            <section class="procedure-steps"><h2 id="dc1d1f95">To set up an Apache HTTP Server as a reverse proxy:</h2><ol class="list _decimal"><li class="list__item" id="31f368a2"><p>Use the following <code class="code" data-lang="Java">a2enmod</code> script to enable <code class="code" data-lang="Java">proxy_http</code>,                    <code class="code" data-lang="Java">rewrite modules</code> (and optionally <code class="code" data-lang="Java">headers</code>                    if you want to use SSL):                    <div class="code-block" data-lang="Shell"><code class="code-block__wrapper"><span class="nv">$ </span>a2enmod headers
<span class="nv">$ </span>a2enmod rewrite
<span class="nv">$ </span>a2enmod proxy_http</code></div></p></li><li class="list__item" id="2ae2c3ca">Add the following directives to the <code class="code" data-lang="Java">VirtualHost</code> section of a relevant <code class="code" data-lang="Java">.conf</code> file:                    <div class="code-block" data-lang="Shell"><code class="code-block__wrapper">RewriteEngine on
AllowEncodedSlashes on

ProxyRequests off

ProxyPass / http://127.0.0.1:1111/
ProxyPassReverse / http://127.0.0.1:1111/</code></div>                    <p id="14a2982d">Replace <code class="code" data-lang="Java">1111</code> with the actual port number that your YouTrack server listens to.</p></li><li class="list__item" id="b577ce11"><p>To use SSL, add the following directives to the <code class="code" data-lang="Java">VirtualHost</code> section:                    <div class="code-block" data-lang="Shell"><code class="code-block__wrapper">RequestHeader <span class="nb">set </span>X-Forwarded-Proto <span class="s2">&quot;https&quot;</span></code></div></p></li></ol></section>            <p id="43094849">For more information, refer to&nbsp;the <a href="http://httpd.apache.org/docs/2.2/mod/mod_proxy.html" data-external="true" target="_blank" rel="noopener noreferrer"><span>Apache mod_proxy configuration reference</span></a>.</p>        </div>        <div class="chapter"><h3 id="IIS_Config">IIS Server Configuration</h3>            <p id="d364333b">To use an IIS server as a reverse proxy, you need to use the Application Request Routing (ARR) extension.</p>            <section class="procedure-steps"><h2 id="2bcfb4d8">To set up an IIS server as a reverse proxy:</h2><ol class="list _decimal"><li class="list__item" id="61bda5db"><p>Download and install the Application Request Routing (ARR) extension from the                    <a href="https://www.iis.net/downloads/microsoft/application-request-routing" data-external="true" target="_blank" rel="noopener noreferrer"><span>Microsoft website</span></a>.</p></li><li class="list__item" id="67e10c5e"><p>In <span class="control">IIS Manager</span>, connect to the IIS server - in this case, <code class="code" data-lang="Java">localhost</code>.</p></li><li class="list__item" id="4323d3d9"><p>Highlight the server in the <b id="94fc3be8">Connections</b> pane.</p></li><li class="list__item" id="2acbb593"><p>Double-click <span class="control">URL Rewrite</span>.</p></li><li class="list__item" id="d4833a07"><p>Click <span class="control">View server variables</span> in the right pane.</p></li><li class="list__item" id="4ffd781f"><p>Add the following server variables to the list:                    <div class="code-block" data-lang="Shell"><code class="code-block__wrapper">HTTP_X_FORWARDED_HOST
HTTP_X_FORWARDED_SCHEME
HTTP_X_FORWARDED_PROTO</code></div>                </p></li><li class="list__item" id="29ddabc3">Set the response buffer threshold.                For single web servers:                <ul class="list _ul"><li class="list__item" id="ef3f27b7"><p>Select the server in the <span class="control">Connections</span> pane.</p></li><li class="list__item" id="236d4cb5"><p>Double-click <span class="control">Application Request Routing Cache</span>.</p></li><li class="list__item" id="934ff4dd"><p>Click <span class="control">Server Proxy Settings</span> under the <span class="control">Proxy</span> heading in the <span class="control">Actions</span> pane.</p></li><li class="list__item" id="6b87df9e"><p>Select the <span class="control">Enable proxy</span> checkbox, set the <span class="control">Response buffer threshold</span> to <code class="code" data-lang="Java">0</code>, then click <span class="control">Apply</span>. Leave the default values in place.</p></li></ul>                <p id="29bff187">For server farms:</p>                  <ul class="list _ul"><li class="list__item" id="d578352f"><p>Select the YouTrack server farm in the <span class="control">Connections</span> pane.</p></li><li class="list__item" id="25a79329"><p>Double-click the <span class="control">Proxy</span> icon.</p></li><li class="list__item" id="e05e3a11"><p>In the <span class="control">Buffer Setting</span> section of the form, set the <span class="control">Response buffer threshold</span> to <code class="code" data-lang="Java">0</code>, then click <span class="control">Apply</span>.</p></li></ul>                </li><li class="list__item" id="82349dde"><p>Deselect the <span class="control">Reverse rewrite host in response headers</span> checkbox and click <span class="control">Apply</span>.</p></li><li class="list__item" id="7a2d5d03"><p>In the <span class="control">Connections</span> pane, under <span class="control">Sites</span>, select <span class="control">Default Web Site</span>.</p></li><li class="list__item" id="7bc8f5a1"><p>Double-click the <span class="control">URL Rewrite</span> feature, then click <span class="control">Add Rule(s)</span> in the <span class="control">Actions</span> pane.</p></li><li class="list__item" id="85f69fa2"><p>Add a reverse proxy rule with the server name: <code class="code" data-lang="Java">localhost:1111</code> (replace with the                    real location and port of your YouTrack service).                </p></li><li class="list__item" id="556fa5b5">Open the rule, check the rewrite URL, and add the following server variables:                    <ul class="list _bullet"><li class="list__item" id="0d57b898"><p>Set the <code class="code" data-lang="Java">HTTP_X_FORWARDED_HOST</code> variable to <code class="code" data-lang="Java">{HTTP_HOST}</code>.</p></li><li class="list__item" id="e23c49e7"><p>Set the <code class="code" data-lang="Java">HTTP_X_FORWARDED_SCHEME</code> variable to <code class="code" data-lang="Java">https</code>                            (if the IIS site is configured to use HTTPS, otherwise set the variable to <code class="code" data-lang="Java">http</code>).</p></li><li class="list__item" id="0ee70182"><p>Set the <code class="code" data-lang="Java">HTTP_X_FORWARDED_PROTO</code> to <code class="code" data-lang="Java">https</code>                            (if the IIS site is configured to use HTTPS, otherwise set the variable to <code class="code" data-lang="Java">http</code>).</p></li></ul>                </li><li class="list__item" id="bfb70902">Make sure that anonymous authentication is enabled:                <ul class="list _ul"><li class="list__item" id="0db05f54"><p>In the <span class="control">Sites</span> section of the <span class="control">Connections</span> pane, select <span class="control">Default Web Site</span>.</p></li><li class="list__item" id="ea675cdc"><p>Double-click <span class="control">Authentication</span>, select <span class="control">Anonymous</span>, then click <span class="control">Enable</span> in the right pane.</p></li></ul></li><li class="list__item" id="c3166818"><p>Make sure that <span class="control">Dynamic Content Compression</span> is disabled.                  The location of this setting varies by operating system.</p></li><li class="list__item" id="a2223eb2"><p>In the <span class="control">Connections</span> pane, under <span class="control">Sites</span>, select <span class="control">Default Web Site</span>.</p></li><li class="list__item" id="15d296ac"><p>Double-click the <span class="control">Request Filtering</span> feature, then click <span class="control">Edit Feature Settings</span> in the <span class="control">Actions</span> pane.</p></li><li class="list__item" id="b6ce5998">Increase the values for the following parameters:                <div class="table-wrapper"><table class="                 " width="100%" id="e737d9b1"><thead><tr id="be54db57" class="ijRowHead"><th id="30c82ee6" width="20%"><p>Parameter</p></th><th id="2ed44f6f"><p>Value</p></th></tr></thead><tbody><tr id="17d634bd" class="ijRowOdd"><td id="a9fe18f8"><p>Maximum URL length</p></td><td id="be098ec9"><p>6144</p></td></tr><tr id="e6570274" class="ijRowEven"><td id="467e1310"><p>Maximum query string</p></td><td id="da8e2fbc"><p>4096</p></td></tr></tbody></table></div></li><li class="list__item" id="d5101234">(Optional) To access YouTrack over HTTPS, add a new SSL binding to the <span class="control">Default Web Site</span>.                    <ul class="list _ul"><li class="list__item" id="1c57484b"><p>The address that the SSL binding listens to (Host URL) should match the YouTrack base URL.</p></li><li class="list__item" id="8aa0301a"><p>The certificate that you choose should correspond to the server DNS address.</p></li></ul></li></ol></section>        </div>        <div class="chapter"><h3 id="Nginx_Config">NGINX Server Configuration</h3>            <p id="2e9e44ac">Use the following guidelines to configure an NGINX server as a reverse proxy.                The NGINX documentation provides a description of the <a href="http://nginx.org/en/docs/http/server_names.html" data-external="true" target="_blank" rel="noopener noreferrer"><span>server_name</span></a>,                <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_set_header" data-external="true" target="_blank" rel="noopener noreferrer"><span>proxy_set_header</span></a>, and                <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_pass" data-external="true" target="_blank" rel="noopener noreferrer"><span>proxy_pass</span></a> variables.</p>            <p id="a9980a10">The following example shows you how to configure NGINX headers without SSL:</p>            <div class="code-block" data-lang="Shell"><code class="code-block__wrapper">server <span class="o">{</span> 
    listen 2222<span class="p">;</span>
    server_name localhost<span class="p">;</span> 
 
    location / <span class="o">{</span> 
        proxy_set_header X-Forwarded-Host <span class="nv">$http_host</span><span class="p">;</span> 
        proxy_set_header X-Forwarded-For <span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span> 
        proxy_set_header X-Forwarded-Proto <span class="nv">$scheme</span><span class="p">;</span> 

        client_max_body_size 10m<span class="p">;</span>

        proxy_http_version 1.1<span class="p">;</span>  
        proxy_pass http://youtrackmachine.domain.local:1111<span class="p">;</span> 
    <span class="o">}</span>
    location /api/eventSourceBus <span class="o">{</span>
        proxy_cache off<span class="p">;</span>
        proxy_buffering off<span class="p">;</span>
        proxy_read_timeout 86400s<span class="p">;</span>
        proxy_send_timeout 86400s<span class="p">;</span>
        proxy_set_header Connection <span class="s1">&#39;&#39;</span><span class="p">;</span>
        chunked_transfer_encoding off<span class="p">;</span>

        proxy_set_header X-Forwarded-Host <span class="nv">$http_host</span><span class="p">;</span> 
        proxy_set_header X-Forwarded-For <span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span> 
        proxy_set_header X-Forwarded-Proto <span class="nv">$scheme</span><span class="p">;</span> 
        proxy_http_version 1.1<span class="p">;</span>  
        proxy_pass http://youtrackmachine.domain.local:1111<span class="p">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></div>            <p id="7701b8a2">Set the following variables to match your YouTrack configuration:</p>            <ul class="list _bullet"><li class="list__item" id="055062b4"><p><code class="code" data-lang="Shell">listen 2222</code> is the port number that you specified in the <code class="code" data-lang="Console">--base-url</code> parameter.</p></li><li class="list__item" id="b5c4020d"><p>                    <code class="code" data-lang="Console">proxy_pass http://youtrackmachine.domain.local:1111</code>                    is the path to your YouTrack server with the port that you specified with the <code class="code" data-lang="Console">-–listen-port</code> command.</p></li></ul>            <p id="0c1e8dd5">The <code class="code" data-lang="Java">client_max_body_size</code> directive defines the maximum amount of data that NGINX accepts in an HTTP request.            If you don't specify a value, the default set by NGINX is 1 megabyte.            We recommend that you increase the maximum to 10 megabytes to correspond to the default value in YouTrack.</p>            <p id="5fd6b048">The second <code class="code" data-lang="Java">location</code> block disables buffering for connections from the agile board to support live updates.            If you customize any of the common connection settings in the first <code class="code" data-lang="Java">location</code> block, you should set the same custom parameters for the <code class="code" data-lang="Java">/api/eventSourceBus</code> location.            You can also put all of your common settings in a separate file and reference the file with an <code class="code" data-lang="Java">include</code> directive.            For more information, read the <a href="http://nginx.org/en/docs/ngx_core_module.html#include" data-external="true" target="_blank" rel="noopener noreferrer"><span>NGINX documentation.</span></a> </p>            <p id="eee3a5b9">The following example shows you how to configure NGINX headers with SSL:</p>            <a name="Sample_Nginx_headers_configuration_(SSL)"></a>            <div class="code-block" data-lang="Shell"><code class="code-block__wrapper">server <span class="o">{</span> 
    listen <span class="m">443</span> ssl<span class="p">;</span> 

    ssl_certificate &lt;path_to_certificate&gt; 
    ssl_certificate_key &lt;path_to_key&gt; 
     
    server_name localhost<span class="p">;</span> 
     
    location / <span class="o">{</span> 
        proxy_set_header X-Forwarded-Host <span class="nv">$http_host</span><span class="p">;</span>
        proxy_set_header X-Forwarded-For <span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span> 
        proxy_set_header X-Forwarded-Proto <span class="nv">$scheme</span><span class="p">;</span> 

        client_max_body_size 10m<span class="p">;</span>

        proxy_http_version 1.1<span class="p">;</span> 
        proxy_pass http://youtrackmachine.domain.local:1111<span class="p">;</span> 
    <span class="o">}</span>
    location /api/eventSourceBus <span class="o">{</span>
        proxy_cache off<span class="p">;</span>
        proxy_buffering off<span class="p">;</span>
        proxy_read_timeout 86400s<span class="p">;</span>
        proxy_send_timeout 86400s<span class="p">;</span>
        proxy_set_header Connection <span class="s1">&#39;&#39;</span><span class="p">;</span>
        chunked_transfer_encoding off<span class="p">;</span>

        proxy_set_header X-Forwarded-Host <span class="nv">$http_host</span><span class="p">;</span> 
        proxy_set_header X-Forwarded-For <span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span> 
        proxy_set_header X-Forwarded-Proto <span class="nv">$scheme</span><span class="p">;</span> 
        proxy_http_version 1.1<span class="p">;</span>  
        proxy_pass http://youtrackmachine.domain.local:1111<span class="p">;</span>
    <span class="o">}</span>
<span class="o">}</span></code></div>            <p id="daa24899">Again, customize common connection settings in both <code class="code" data-lang="Java">location</code> blocks, or store common settings in a separate file and reference the file with an <code class="code" data-lang="Java">include</code> directive.                For more information, read the <a href="http://nginx.org/en/docs/ngx_core_module.html#include" data-external="true" target="_blank" rel="noopener noreferrer"><span>NGINX documentation.</span></a> </p>            <a name="Converting_Java_key_store_to_format_required_by_Nginx"></a>                <p id="cff039a7">If you use a Java KeyStore, you need to convert it to the PKCS12 format to use a NGINX server as an SSL-terminating proxy.                The following procedure shows you how to convert the keystore using <span class="control">keytool</span> and <span class="control">openssl</span>.</p>                <section class="procedure-steps"><h2 id="fa77b11c">To convert a Java KeyStore to PKCS12 format:</h2><ol class="list _decimal"><li class="list__item" id="2e327c3c">Use <span class="control">keytool</span> to convert your current <code class="code" data-lang="Java">.jks</code> file to the PKCS12 key store format <code class="code" data-lang="Java">.p12</code>:                        <div class="code-block" data-lang="Console"><code class="code-block__wrapper">keytool -importkeystore -srckeystore oldkeystore.jks -destkeystore newkeystore.p12 -deststoretype PKCS12
Enter destination keystore password: <span class="o">[</span>enter private key password from oldkeystore.jks, it will be password <span class="k">for</span> newkeystore.p12<span class="o">]</span>
Re-enter new password: <span class="o">[</span>same as above<span class="o">]</span>
Enter <span class="nb">source </span>keystore password: <span class="o">[</span>enter password <span class="k">for</span> oldkeystore.jks<span class="o">]</span>
...
Enter key password <span class="k">for</span> &lt;key <span class="nb">alias </span>name&gt; <span class="o">[</span>enter private key password from oldkeystore.jks<span class="o">]</span>
...</code></div>                        <p id="3bc86679">You will be required to enter a "destination keystore password". If your                            <code class="code" data-lang="Java">.jks</code> keystore contains a private key with a password, then the                            "destination keystore password" should equal the password of the private key.                        </p>                    </li><li class="list__item" id="0bba93d8"><p>List the contents of the new key store file:                        <div class="code-block" data-lang="Shell"><code class="code-block__wrapper">keytool -deststoretype PKCS12 -keystore newkeystore.p12 -list
Enter keystore password: <span class="o">[</span>enter password <span class="k">for</span> newkeystore.p12 provided on step 1<span class="o">]</span>
...</code></div>                    </p></li><li class="list__item" id="7eccdeae"><p>Extract the .pem file (certificate) from the <code class="code" data-lang="Java">.p12</code> key store:                        <div class="code-block" data-lang="Shell"><code class="code-block__wrapper">openssl pkcs12 -nokeys -in newkeystore.p12 -out certfile.pem
Enter Import Password: <span class="o">[</span>enter password <span class="k">for</span> newkeystore.p12 provided on step 1<span class="o">]</span>
...</code></div>                    </p></li><li class="list__item" id="b9fcc410"><p>Extract the unencrypted key file from the <code class="code" data-lang="Java">.p12</code> key store:                        <div class="code-block" data-lang="Shell"><code class="code-block__wrapper">openssl pkcs12 -nocerts -nodes -in newkeystore.p12 -out keyfile.key
Enter Import Password: <span class="o">[</span>enter password <span class="k">for</span> newkeystore.p12 provided on step 1<span class="o">]</span>
...</code></div>                    </p></li></ol></section>        </div>        <div class="chapter"><h3 id="POUND">Pound Reverse Proxy Configuration</h3>            <p id="f3aad020">The following example shows you how to configure a Pound reverse proxy with SSL.                This configuration is set in the <code class="code" data-lang="Java">/etc/pound/pound.cfg</code> file.</p>            <div class="code-block" data-lang="Shell"><code class="code-block__wrapper"><span class="c">## global options:</span>
User            <span class="s2">&quot;www-data&quot;</span>
Group           <span class="s2">&quot;www-data&quot;</span>
<span class="c">## Logging: (goes to syslog by default)</span>
LogLevel        1
<span class="c">## check backend every X secs:</span>
Alive           30
<span class="c"># poundctl control socket</span>
Control <span class="s2">&quot;/var/run/pound/poundctl.socket&quot;</span>
<span class="c">## forward all requests from HTTPS 0.0.0.0:8443 to HTTP youtrackmachine.domain.local:8080:</span>
ListenHTTPS
Address 0.0.0.0
Port    8443
Cert    <span class="s2">&quot;/home/user/cert.pem&quot;</span>
AddHeader <span class="s2">&quot;X-Forwarded-Proto: https&quot;</span>
<span class="c">## allow PUT and DELETE</span>
xHTTP           1
Service
BackEnd
Address youtrackmachine.domain.local
Port    8080
End
End
End</code></div>        </div>        </div>        <div class="chapter"><h2 id="CORS" data-toc="Reverse-Proxy-Configuration#CORS">CORS Support</h2>            <p id="4fb1cc74">If you use an external Hub service, YouTrack may require CORS support to make calls to Hub.                The aforementioned configurations work fine and don't require any further tuning.                Additional custom proxy rules, however, may interfere with CORS, making login to YouTrack impossible.</p>            <p id="78b2f8a0">Consider the following guidelines when using an external Hub service behind the reverse proxy:</p>            <ol class="list _decimal"><li class="list__item" id="9ca3f2cb">Proxy rules should not block CORS-related HTTP headers:                    <ul class="list _ul"><li class="list__item" id="2b23c679"><p>Access-Control-Request-Method</p></li><li class="list__item" id="99a79598"><p>Access-Control-Request-Headers</p></li><li class="list__item" id="104732ec"><p>Access-Control-Allow-Origin</p></li><li class="list__item" id="73fb2dfb"><p>Access-Control-Allow-Credentials</p></li><li class="list__item" id="4b7fde45"><p>Access-Control-Expose-Headers</p></li><li class="list__item" id="bff61b1b"><p>Access-Control-Max-Age</p></li><li class="list__item" id="284fa547"><p>Access-Control-Allow-Methods</p></li><li class="list__item" id="110073d6"><p>Access-Control-Allow-Headers</p></li></ul>                </li><li class="list__item" id="c8d72b26"><p>The proxy server should allow HTTP OPTIONS requests.</p></li><li class="list__item" id="6522e48a"><p>HTTP OPTIONS requests should not be a subject of proxy-enforced authentication, if any.                    For example, you may want to set up certificate-based authentication to comply with enterprise security policy.                    In this case, an authentication check should be skipped if incoming request is an OPTIONS type.                    OPTIONS requests cannot return any customer-related data by themselves, so it's safe to let them in.                </p></li></ol>        </div>    <div class="chapter"><h2 id="troubleshooting" data-toc="Reverse-Proxy-Configuration#troubleshooting">Troubleshooting</h2>        <p id="1de503dc">If users report problems working with YouTrack behind a reverse proxy server, check the following errors.</p>      <div class="table-wrapper"><table class="                  _layout-fixed" width="100%" id="4720a635"><thead><tr id="b4b4fb25" class="ijRowHead"><th id="7c3dd54f" width="10%"><p>Condition</p></th><th id="12206464"><p>YouTrack displays the error message: "The live update connection is taking longer than expected."</p></th></tr></thead><tbody><tr id="51d3728d" class="ijRowOdd"><td id="0238f42a"><p>Cause</p></td><td id="e525fd75"><p>Your reverse proxy server is buffering connections that support live updates.</p></td></tr><tr id="c9268aee" class="ijRowEven"><td id="7dd41466"><p>Solution</p></td><td id="590913b5">Verify the current settings for your reverse proxy server and confirm that your connections are not subject to buffering.            <ul class="list _bullet"><li class="list__item" id="b8d5074d"><p>For Apache installations, check the <code class="code" data-lang="Java">ProxyIOBufferSize</code> directive.</p></li><li class="list__item" id="28a43d3a">For IIS,                <ul class="list _ul"><li class="list__item" id="ecbad80f"><p>Check that the <code class="code" data-lang="Java">Response buffer threshold</code> is set to <code class="code" data-lang="Java">0</code>.</p></li><li class="list__item" id="2a764bd3"><p>Check that the values for the <code class="code" data-lang="Java">Maximum URL length</code> and <code class="code" data-lang="Java">Maximum query string</code> parameters in the <span class="control">Request Filtering</span> feature are configured as described in this setup guide.</p></li><li class="list__item" id="dda48344"><p>Make sure that <span class="control">Dynamic Content Compression</span> is disabled.</p></li></ul></li><li class="list__item" id="fb90ffc1"><p>For NGINX, verify that the <code class="code" data-lang="Java">/api/eventSourceBus</code> location is configured as described in this setup guide.</p></li></ul>          </td></tr></tbody></table></div>      <div class="table-wrapper"><table class="                 " width="100%" id="6680b478"><thead><tr id="8e164c2e" class="ijRowHead"><th id="524bf8c1" width="10%"><p>Condition</p></th><th id="99950bdf"><p>Your reverse proxy is configured as described in this guide or you are not using a reverse proxy.            You continue to see the error message: "The live update connection is taking longer than expected."</p></th></tr></thead><tbody><tr id="9e943478" class="ijRowOdd"><td id="d5ff2ac7"><p>Cause</p></td><td id="86a409d9"><p>You are using anti-virus or endpoint security software that blocks server-sent events.</p></td></tr><tr id="33db4f02" class="ijRowEven"><td id="bb7f6c4f"><p>Solution</p></td><td id="e1c7dffc"><p>Disable your software settings to allow automatic updates from the server.</p></td></tr></tbody></table></div>        <div class="table-wrapper"><table class="                  _layout-fixed" width="100%" id="5e2716d2"><thead><tr id="c01c255a" class="ijRowHead"><th id="12788859" width="10%"><p>Condition</p></th><th id="fdcb1f66"><p>Error 413 Request Entity Too Large.</p></th></tr></thead><tbody><tr id="165f0bc2" class="ijRowOdd"><td id="460f668d"><p>Cause</p></td><td id="1a4b3b58"><p>A user attempts to upload an attachment that exceeds the maximum body size accepted by the reverse proxy server.</p></td></tr><tr id="257776d7" class="ijRowEven"><td id="43a15008"><p>Solution</p></td><td id="12c542c6">Verify the current settings for your reverse proxy server and increase the maximum allowed size, if required.                    The recommended value for this setting is 10 megabytes.                    <ul class="list _bullet"><li class="list__item" id="8c66d2d4"><p>For Apache installations, check the <code class="code" data-lang="Java">LimitRequestBody</code> directive.</p></li><li class="list__item" id="e1db8b6d"><p>For IIS, check the <code class="code" data-lang="Java">uploadreadaheadsize</code> config setting.</p></li><li class="list__item" id="90b165aa"><p>For NGINX, check the <code class="code" data-lang="Java">client_max_body_size</code> directive.</p></li></ul></td></tr></tbody></table></div>      <div class="table-wrapper"><table class="                  _layout-fixed" width="100%" id="51b294d8"><thead><tr id="848a5d99" class="ijRowHead"><th id="efdbab4b" width="10%"><p>Condition</p></th><th id="0d77785b"><p>Users are periodically logged out of YouTrack.</p></th></tr></thead><tbody><tr id="2d015fbf" class="ijRowOdd"><td id="b54c49ae"><p>Cause</p></td><td id="2820d482"><p>The built-in Hub service uses a hidden inline frame to refresh authentication tokens.            If you have set the value for the <code class="code" data-lang="Java">X-Frame-Options</code> header to <code class="code" data-lang="Java">DENY</code> for your reverse proxy server, users are logged out when their tokens expire.</p></td></tr><tr id="d6789c8d" class="ijRowEven"><td id="a37709b1"><p>Solution</p></td><td id="f361b3de"><p>All responses that contain static content from the Hub service set the value for the <code class="code" data-lang="Java">X-Frame-Options</code> header to <code class="code" data-lang="Java">SAMEORIGIN</code>.            To preserve this value, configure your reverse proxy server to use the <code class="code" data-lang="Java">X-Frame-Options: SAMEORIGIN</code> directive for all static content from your YouTrack installation.            If your YouTrack installation is connected to an external Hub service, set this directive for static content from Hub.            For more information, see <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options" data-external="true" target="_blank" rel="noopener noreferrer"><span>X-Frame-Options</span></a>.</p></td></tr></tbody></table></div>    </div><div class="last-modified" data-skip-index="skip">Last modified: 7 March 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Proxy-Configuration.html">Proxy Configuration</a><a class="navigation-links__next" href="Configure-JVM-Options.html">Configure JVM Options</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>