<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta charset="UTF-8"><meta name="robots" content="noindex"><title>Integrate with TeamCity - Help | YouTrack Standalone</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="Configure-TeamCity-Integration"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search YouTrack Standalone Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2017.4 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="false"><h1 data-toc="Configure-TeamCity-Integration" id="Configure-TeamCity-Integration.xml">Integrate with TeamCity</h1>    <p id="89e61628">If you are working on a software development project and are using TeamCity, there are some useful integration features that can reduce the amount of duplicated effort that is performed by your team.        The integration between YouTrack with TeamCity enables useful features in both applications:</p>    <ul class="list _bullet"><li class="list__item" id="6768d917">YouTrack pulls build numbers from connected projects.            Issues that were resolved after the last known successful build are automatically assigned the build number of the next successful build.            This value is added to a custom field that stores the build number for each resolved issue.            <p id="e2b4e436">You can specify whether issues that are mentioned in commmit messages and build comments are assigned build numbers and use a search query to assign build numbers to issues that match specific criteria.</p></li><li class="list__item" id="a7970101"><p>Your developers reference an issue ID in the comments when they commit updates to the code repository.            The TeamCity integration adds a direct link to the YouTrack issue in the change details.            <br>The comment is automatically added to the list of changes on the <span class="control">VCS Changes</span> tab in the YouTrack full page view.            Each VCS change includes a direct link to the change details in TeamCity.</p></li><li class="list__item" id="8d8040ae"><p>Your developers can enter commands in the comments for their commits in TeamCity.            When TeamCity assembles a build that contains the commit message, the command is applied all of the issues that are referenced in the command.            You can use this feature to update the status or add comments to one or more issues without even opening YouTrack.</p></li></ul>    <div class="chapter"><h2 id="teamcity-integration-project-prerequisites" data-toc="Configure-TeamCity-Integration#teamcity-integration-project-prerequisites">Prerequisites</h2>        <p id="52785a18">Before you start, verify the following requirements:</p>        <ul class="list _ul"><li class="list__item" id="6e5d22e1"><p>Your YouTrack administrator has enabled the TeamCity integration for your YouTrack server and has configured the connection to a TeamCity server.</p></li><li class="list__item" id="060cfbc5"><p>You have a user account in TeamCity that is assigned the Project Administrator role in the projects that you want to integrate with YouTrack.                If your TeamCity server uses simple authorization mode, Administrator permissions are required.</p></li><li class="list__item" id="fed3acfa">The YouTrack project that you want to integrate with TeamCity uses a custom field that stores a value as a build type.                You can use the default custom field <span class="control">Fixed in build</span> or any other custom field that stores a build type.            <p id="c72b1317">If you don't want to add build numbers to issues, you can enable the integration without mapping build numbers to a custom field in YouTrack.                In this case, your developers can still mention issues and apply commands in VCS commit messages.</p></li></ul>    </div>    <div class="chapter"><h2 id="define-mapping" data-toc="Configure-TeamCity-Integration#define-mapping">Define the Mapping Between Projects</h2>        <a name="Mapping_Projects"></a>        <p id="c7627b10">To enable the TeamCity integration in your project, you map your YouTrack project to a build configuration in TeamCity.</p>        <p id="69816751">The first group of settings connect YouTrack to a build configuration for a project on a TeamCity server.            Additional options for the default and feature branches let you define which issues are assigned build numbers for each branch.            You can also specify the commands to apply to all of the issues that are processed by YouTrack.</p>        <section class="procedure-steps"><h2 id="2c399487">To define a mapping between YouTrack and TeamCity:</h2><aside class="note " data-title="Permissions" rel="2c399487" id="d2049447"><br><br>                <p id="acab3569">Per-project:</p>                <ul class="list _ul"><li class="list__item" id="44232dca"><span class="control">Read Project</span></li><li class="list__item" id="ac9449fe"><span class="control">Update Project</span></li></ul>            </aside><ol class="list _decimal"><li class="list__item" id="89984976"><p>Click the <span class="control">Projects</span> link in the header and select your project.</p></li><li class="list__item" id="b1f71c2e"><p>Click the <span class="control">Edit project</span> link.</p></li><li class="list__item" id="13a35f1f"><p>Select the <span class="control">TeamCity Integration</span> tab.</p></li><li class="list__item" id="33815f0f">Click the <span class="control">Create New Mapping</span> button.                <ul class="list _ul"><li class="list__item" id="c0a74a96"><p>The <span class="control">Create Mapping</span> dialog opens in the sidebar.                        <figure><a class="lightbox" href="/help/img/youtrack/2017.4/tciMappingDialogProject_thumbnail.zoomed.png"><img alt="tciMappingDialogProject thumbnail" title="tciMappingDialogProject thumbnail" src="/help/img/youtrack/2017.4/tciMappingDialogProject_thumbnail.png" id="cd19d67b" width="600" height="307"></a></figure></p></li></ul></li><li class="list__item" id="44e6c197">Enter values for the following settings:                <div class="table-wrapper"><table class="                 " width="100%" id="9f762efc"><thead><tr id="0c4a2bee" class="ijRowHead"><th id="a2d9ed26" width="15%"><p>Setting</p></th><th id="597fadf1"><p>Description</p></th></tr></thead><tbody><tr id="630d13ec" class="ijRowOdd"><td id="fb0420ca"><p>TeamCity Server</p></td><td id="7d2cf115"><p>Select the TeamCity server that contains the project that you want to map to.                            If you are only connected to one TeamCity server, it is set by default.</p></td></tr><tr id="55a87de2" class="ijRowEven"><td id="baae3a4a"><p>TeamCity Project</p></td><td id="679a5752"><p>Select the name of the project in TeamCity.</p></td></tr><tr id="0379c320" class="ijRowOdd"><td id="ed0c40a8"><p>TeamCity Build</p></td><td id="804954dc"><p>Select a build configuration from the selected TeamCity project.</p></td></tr></tbody></table></div>            </li><li class="list__item" id="5bc35c24"><p>Click to expand the <span class="control">Actions for Default Branch</span> settings.                These settings determine which actions are applied to builds in the default branch.                If you don't want to add build numbers to issues, continue from step 9.</p></li><li class="list__item" id="4cd490e5">Configure the following options:                <div class="table-wrapper"><table class="                 " width="100%" id="26a62323"><thead><tr id="afc38386" class="ijRowHead"><th id="ad13e8a4"><p>Option</p></th><th id="e62083ce"><p>Description</p></th></tr></thead><tbody><tr id="4b72590a" class="ijRowOdd"><td id="e5a4c2eb"><p>Consider failed builds</p></td><td id="bed7aab5"><p>Enable to add build numbers to issues for all builds, including failed builds.                            When disabled, only successful builds are added to issues in YouTrack.</p></td></tr><tr id="770002fc" class="ijRowEven"><td id="e093d0ab"><p>Process issues mentioned in commits and build comments</p></td><td id="15dba8a3"><p>Enable to add build numbers to issues that are mentioned in commits and build comments.                            When disabled, YouTrack ignores mentioned issues.                            Use this setting together with the <span class="control">Query</span> setting to determine which issues are assigned build numbers.</p></td></tr><tr id="d5f53c38" class="ijRowOdd"><td id="5d287ad7"><p>Query</p></td><td id="399d42c1"><p>Enter a search query to add build numbers to issues that match a specific filter criteria.                            The standard search query is <code class="code" data-lang="Java">State: Fixed State: Verified resolved date: ${build.time}..${prev.build.time}</code>.                            This query ensures that only issues that are resolved since the last successful build and the current build are considered.                            Use this setting together with the <span class="control">Process issues mentioned in commits and build comments</span> option to determine which issues are assigned build numbers.</p></td></tr><tr id="4fdcaf8d" class="ijRowEven"><td id="b52ca652"><p>Command</p></td><td id="2da5caa0"><p>Enter a command that is applied to all issues that are assigned build numbers in YouTrack.                            Use the <code class="code" data-lang="Java">${build</code>} variable to reference the build number in TeamCity. For example:                            <code class="code" data-lang="Java">Subsystem Testing Test in build ${build}</code>                            With this command, all issues that are processed by YouTrack are assigned to the <span class="control">Testing</span> subsystem                            and the <span class="control">Test in build</span> field is set to the build number.</p></td></tr><tr id="e447784b" class="ijRowOdd"><td id="c136c1e8"><p>Build Field</p></td><td id="0f31fefa"><p>Select the custom field that stores the build number from TeamCity.</p></td></tr><tr id="ef559b61" class="ijRowEven"><td id="c4810bd7"><p>Add builds to the set of values</p></td><td id="7ab4af86"><p>Enable to automatically add build numbers to the set of values for the selected custom field.                            The builds that are considered for this option are affected by the <span class="control">Consider failed builds</span> setting.</p></td></tr></tbody></table></div></li><li class="list__item" id="05834747"><p>Expand and set the options for the <span class="control">Actions for Feature Branches</span> settings.                These settings determine which actions are applied to builds in one or more feature branches.                Each setting provides the same functionality as described for the default branch, above.</p></li><li class="list__item" id="8f71da7b"><p>If you want to restrict the visibility of comments and updates on the <span class="control">VCS Changes</span> tab, select one or more groups from the <span class="control">Visible to</span> drop-down list.                Otherwise, the list of changes that are displayed on this tab is visible to any user who has permission to read issues in the project.</p></li><li class="list__item" id="61dd499d">Click the <span class="control">Create mapping</span> button.                <ul class="list _ul"><li class="list__item" id="b5258a14"><p>The YouTrack project is mapped to the selected project in TeamCity.</p></li><li class="list__item" id="afb0d7ee"><p>The TeamCity integration is enabled and available for use in your YouTrack project.</p></li></ul></li></ol></section>    </div>    <div class="chapter"><h2 id="teamcity-integration-project-placeholders" data-toc="Configure-TeamCity-Integration#teamcity-integration-project-placeholders">Placeholders</h2>        <p id="75cd6aeb">You can use placeholders in the <span class="control">Query</span> and <span class="control">Command</span> settings.            These placeholders reference attributes that are stored for builds in TeamCity.            The placeholder is replaced with the corresponding value in the connected version control system when the builds are processed by YouTrack.            The following placeholders are available:</p>        <div class="table-wrapper"><table class="                 " width="100%" id="ef6c4648"><thead><tr id="a0f8caea" class="ijRowHead"><th id="5202ac36" width="15%"><p>Placeholder</p></th><th id="1210f1bc"><p>Description</p></th></tr></thead><tbody><tr id="e049481d" class="ijRowOdd"><td id="328f64a5"><p>${build.time}</p></td><td id="b5b3c078"><p>The date and time of the build that is processed by YouTrack.</p></td></tr><tr id="9c2eecc9" class="ijRowEven"><td id="147a8fe0"><p>${prev.build.time}</p></td><td id="a49ada12"><p>The date and time of the build prior to the build that is processed by YouTrack.</p></td></tr><tr id="180975cb" class="ijRowOdd"><td id="438bd3d5"><p>${build}</p></td><td id="c3dca616"><p>The number of the build that is processed by YouTrack.</p></td></tr><tr id="f9ffa20c" class="ijRowEven"><td id="84ed7422"><p>${revision}</p></td><td id="2ad1bad3"><p>The revision number that is assigned to a VCS commit.</p></td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="teamcity-integration-project-controls" data-toc="Configure-TeamCity-Integration#teamcity-integration-project-controls">Controls</h2>        <p id="7f858db4">When the integration is enabled in your project, the following controls are available on the <span class="control">TeamCity Integration</span> tab:</p>        <div class="table-wrapper"><table class="                 " width="100%" id="48af96fc"><thead><tr id="03027023" class="ijRowHead"><th id="0068540c" width="15%"><p>Control</p></th><th id="9ba4472e"><p>Description</p></th></tr></thead><tbody><tr id="31a694a6" class="ijRowOdd"><td id="fce80403"><p>Create new mapping</p></td><td id="9646506a"><p>Opens the <span class="control">Create New Mapping</span> dialog in the sidebar.                    Use these settings to map your YouTrack project to a different build configuration in TeamCity.</p></td></tr><tr id="74abb633" class="ijRowEven"><td id="39c9c146"><p>Run</p></td><td id="91a9d5f1"><p>Pulls fresh data from the TeamCity server.                    Links to TeamCity builds are added to issues in YouTrack that are mentioned in build comments and commit messages.                    Commands in VCS commit messages are applied to the corresponding issues.                    Build numbers are added to issues according to the options that are defined in the mapping.                    The last processed build is updated in the corresponding column on the integration settings page.</p></td></tr><tr id="03479572" class="ijRowOdd"><td id="c8ca9eba"><p>Edit</p></td><td id="73433618"><p>Opens the settings dialog for the selected TeamCity server or mapping in the sidebar. </p></td></tr><tr id="488ab882" class="ijRowEven"><td id="1fe41b12"><p>Remove</p></td><td id="32c561a5"><p>Deletes the selected TeamCity server or mapping from YouTrack. </p></td></tr><tr id="7e198ca7" class="ijRowOdd"><td id="65d4cf19"><p>Reset</p></td><td id="0ecaa353"><p>Removes the IDs of the last recorded change and processed build from the selected project mapping.                    The next time the integration is scheduled to update, YouTrack pulls the entire change and build history from TeamCity.                    Changes and builds that already exist in YouTrack are not affected.</p></td></tr><tr id="1c0db293" class="ijRowEven"><td id="9ae868f7"><p>Disable</p></td><td id="cd344956"><p>Disables the TeamCity integration in the selected TeamCity server or project.                    Use this option to disable the integration features in your project.                    If the integration is disabled, the <span class="control">Enable</span> option is available.</p></td></tr></tbody></table></div>    </div>    <div class="last-modified" data-skip-index="skip">Last modified: 7 March 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Project-Notification-Templates.html">Edit Notification Templates</a><a class="navigation-links__next" href="Enable-and-Configure-Time-Tracking.html">Enable Time Tracking</a></div><section class="seealso" data-skip-index="skip"><div class="seealso__header"><h2>See Also</h2></div><div class="seealso__content"><div class="seealso__col" data-skip-index="skip"><h3>User Guide:</h3><ul class="list"><li class="list__item"><a href="VCS-Changes.html"><span>View and Edit VCS Changes</span></a></li><li class="list__item"><a href="Map-Issues-to-VCS-Change-Commit.html"><span>Link Issues in VCS Commits</span></a></li><li class="list__item"><a href="Apply-Commands-in-VCS-Commits.html"><span>Apply Commands in VCS Commits</span></a></li></ul></div></div></section></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>