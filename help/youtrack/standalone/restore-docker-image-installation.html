<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>恢复Docker安装-帮助|帮助YouTrack单机版</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="restore-docker-image-installation" data-breadcrumbs="Installation-and-Upgrade.xml|Installation and Upgrade/youtrack-docker.xml|Docker Container/restore-docker-image-installation.xml|Restore a Docker Installation" data-main-title="Restore a Docker Installation"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack独立帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="restore-docker-image-installation.xml" data-toc="restore-docker-image-installation">恢复Docker安装</h1>    <aside class="prompt" rel="restore-docker-image-installation.xml" id="ebfa60ee" data-type="note" data-title="Note">        <p id="350a3190">要成功地从备份还原数据库，备份文件的版本应与将数据库还原到的YouTrack版本相同或早于该版本。</p>    </aside>    <p id="366abd5f">在开始之前，请确保您具有要还原的数据库的备份副本。请注意备份副本的位置，因此请确保在此过程中选择正确的文件。</p>    <ul class="list _ul"><li class="list__item" id="34784802"><p>如果升级失败后回滚到以前的安装版本，请使用在安装之前创建的备份。如果忽略此先决条件，请找到与先前安装的版本相对应的备份文件。</p></li><li class="list__item" id="64d9463c"><p>如果尝试还原当前安装，请在设置为与当前安装版本相对应的“ <span class="control">备份”位置</span>的目录中找到已存档的备份文件。</p></li></ul>    <div class="chapter"><h2 id="restore-from-database-backup" data-toc="restore-docker-image-installation#restore-from-database-backup">从数据库的备份副本还原安装</h2>        <p id="992317c5">要将数据库还原到当前版本或先前版本，您需要重新安装YouTrack并在安装过程中将备份用作<span class="control">升级源</span> 。</p>        <p id="57fc845e">还原到YouTrack的先前版本时，请使用与要还原的产品版本相对应的备份。</p>        <section class="procedure-steps"><h3 id="0b28e246">要从备份还原数据库：</h3><aside class="prompt" rel="0b28e246" id="7636b642" data-type="tip" data-title=""><p>需要权限：低级管理员写</p></aside><ol class="list _decimal"><li class="list__item" id="39e3f08d"><p>停止YouTrack服务。有关详细说明，请参阅<a href="start-stop-docker.html#stop-docker-container">停止Docker容器</a> 。</p></li><li class="list__item" id="84209775"><p>清洁内部物品<code class="code">data</code>和<code class="code">conf</code>目录。您需要<i id="bc22fdbe">在主机上</i>清除这两个特定<i id="bc22fdbe">于</i> YouTrack的目录的内容。有关更多详细信息，请参阅安装说明的“ <a href="youtrack-docker-installation.html#create-and-configure-directories">创建和配置目录”</a>一章。</p></li><li class="list__item" id="7be893b1"><p id="d18f0a68">确保要还原的备份文件位于<code class="code">backups</code> <i id="90b8f180">主机上的</i> YouTrack目录。用户还必须可以访问备份文件<code class="code">13001:13001</code>在容器内运行YouTrack服务。例如，在Linux主机上，可以使用以下命令来确保访问权限：</p>                <div class="code-block" data-lang="bash">chmod 750 <path to="" the="" backup="" file="" on="" host="" machine="">弦13001：13001 <path to="" the="" backup="" file="" on="" host="" machine="">
    </path></path></div>                <p id="7e3d6ae8">运行docker映像时，需要将此目录映射到容器内的相应目录-<code class="code">/opt/youtrack/backups</code></p>            </li><li class="list__item" id="40636c98"><p id="a4ad96ff">执行以下命令以使用YouTrack服务器运行容器：</p>                <div class="code-block" data-lang="bash"><youtrack-server-instance><path data="" to="" directory="">docker run -it</path></youtrack-server-instance> --name <youtrack-server-instance>\ -v <path data="" to="" directory="">：/ opt / youtrack / data \ -v <path to="" conf="" directory="">：/ opt / youtrack / conf \ -v <path to="" logs="" directory="">：/ opt / youtrack / logs \ -v <path to="" backups="" directory="">：/ opt / youtrack / backups \ -p <port on="" host="">：8080 \ jetbrains / youtrack： <version>
    </version></port></path></path></path></path></youtrack-server-instance></div>                <p id="d881d23e">有关运行YouTrack容器和命令参数的更多详细信息，请参阅<a href="youtrack-docker-installation.html#run-youtrack-service">“运行YouTrack Docker容器”</a> 。</p>                <ul class="list _ul"><li class="list__item" id="678d0771"><p>YouTrack图像将启动基于Web的配置向导。在浏览器中，打开控制台输出中显示的“配置向导”的URL。</p></li></ul>            </li><li class="list__item" id="1f0f4c43"><p>在<span class="control">配置向导中</span> ，选择<span class="control">升级</span>选项。</p><figure><a class="lightbox" href="/help/img/youtrack/2019.2/upgrade-config-wizard-start.zoomed.png"><img alt="Yt升级配置向导启动" title="Yt升级配置向导启动" src="/help/img/youtrack/2019.2/upgrade-config-wizard-start.png" id="041faee9" width="600" height="247"></a></figure>            <p></p></li><li class="list__item" id="224580cd"><p>在“ <span class="control">选择升级源”</span>页面上，选择备份作为<span class="control">升级源</span> ，然后单击“ <span class="control">下一步”</span>按钮。</p><figure><a class="lightbox" href="/help/img/youtrack/2019.2/docker-upgrade-source.zoomed.png"><img alt="Docker升级选择源" title="Docker升级选择源" src="/help/img/youtrack/2019.2/docker-upgrade-source.png" id="1b31ebd2" width="600" height="355"></a></figure>            <p></p></li><li class="list__item" id="7a79bb42"><p id="6960830b">查看YouTrack存储产品数据的位置。完成后，单击<span class="control">升级</span>按钮。</p>                <figure><a class="lightbox" href="/help/img/youtrack/2019.2/docker-upgrade-http-confirm.zoomed.png"><img alt="Docker升级确认设置" title="Docker升级确认设置" src="/help/img/youtrack/2019.2/docker-upgrade-http-confirm.png" id="67dd14fe" width="600" height="499"></a></figure>                <ul class="list _ul"><li class="list__item" id="5fd27d7b"><p>YouTrack服务从备份文件中的数据开始。</p></li></ul>            </li></ol></section>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="start-stop-docker.html">运行和停止Docker容器将</a> <a class="navigation-links__next" href="run-docker-container-as-service.html">Docker容器作为服务运行</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>