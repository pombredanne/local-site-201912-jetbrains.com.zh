<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>从另一台YouTrack服务器导入问题-帮助|帮助YouTrack单机版</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Import-from-Another-YouTrack-Server" data-breadcrumbs="Migrating-to-YouTrack.xml|Migrate to YouTrack/Import-from-Another-YouTrack-Server.xml|Import Issues from Another YouTrack Server" data-main-title="Import Issues from Another YouTrack Server"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack独立帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Import-from-Another-YouTrack-Server.xml" data-toc="Import-from-Another-YouTrack-Server">从另一台YouTrack服务器导入问题</h1>    <p id="4e692f2c">此页面提供有关使用<a href="https://github.com/JetBrains/youtrack-python-scripts" rel="noopener noreferrer" data-external="true" target="_blank">Python导入脚本</a>将问题从一台YouTrack服务器<a href="https://github.com/JetBrains/youtrack-python-scripts" rel="noopener noreferrer" data-external="true" target="_blank">导入</a>到另一台YouTrack服务器的说明。使用这些说明可以：</p>    <ul class="list _ul"><li class="list__item" id="9c2fe816"><p><a href="#import-all">从另一个YouTrack服务器中的项目导入所有问题</a> 。</p></li><li class="list__item" id="4174632b"><p><a href="#import-one">从另一台YouTrack服务器导入单个问题</a> 。</p></li></ul>            <p id="6902d963">在开始之前，请考虑您的选择。仅当您要<i id="ffb63a79">迁移数量有限的项目或问题</i>时，才应遵循这些说明。如果仅要将YouTrack Standalone安装从一台服务器移到另一台服务器，则可以将新的YouTrack服务器配置为使用旧数据库的副本。有关说明，请参阅“ <a href="Changing-Database-Location.html">更改数据库位置”</a> 。</p>            <p id="0c70b0b0">此过程需要执行以下步骤：</p>        <ol class="list _decimal"><li class="list__item" id="890ae229"><p><a href="#set-up-your-environment">设置您的本地环境</a> 。</p></li><li class="list__item" id="f34f9643"><p>导入您的问题。您可以<a href="#import-all">从项目导入所有问题，</a>也可以<a href="#import-one">导入单个问题</a> 。</p></li></ol>    <div class="chapter"><h2 id="import-issues-permissions" data-toc="Import-from-Another-YouTrack-Server#import-issues-permissions">权限</h2>        <p id="f85e8e2b">您用于登录源YouTrack服务器的用户帐户需要具有读取问题及其所有属性（包括要导入的项目中的自定义字段）的权限。您用于登录目标YouTrack服务器的用户帐户需要具有创建和更新项目，创建用户，读取问题专用字段以及更新问题专用字段的权限。我们建议您对源服务器和目标服务器都使用具有<span class="control">系统管理员</span>角色的帐户。</p>    </div>    <div class="chapter"><h2 id="import-issue-details" data-toc="Import-from-Another-YouTrack-Server#import-issue-details">导入细节</h2>        <p id="4dfb79b5">从其他YouTrack服务器导入问题时，请注意以下机制：</p>        <ul class="list _ul"><li class="list__item" id="9518f410">                <p id="a035e523">问题是根据每个项目导入的。源项目由其指定<code class="code">projectID</code> 。导入问题时，也将导入问题属性中引用的所有实体。这包括用户（来自<span class="control">Reporter</span>和<span class="control">Assignee之</span>类的问题字段）和自定义字段的值集。</p>                <aside class="prompt" rel="a035e523" id="2c022cc0" data-type="warning" data-title="">                    <p id="9c365094">导入数据中对用户的引用将映射到YouTrack中的现有帐户。如果找不到匹配项，则会创建一个新的用户帐户。</p>                    <p id="90aa2baa">根据您的订阅计划，为导入的用户分配了许可证。对于超出您的每用户许可限制的用户，导入的用户被标记为禁止用户。</p>                    <p id="dd0788bc">有关更多信息，请参见<a href="Ban-User-Accounts.html">禁止用户帐户</a> 。</p>                </aside>            </li><li class="list__item" id="989f6b88"><p>导入用户时，将为用户帐户分配一个随机生成的密码。要使用源服务器上的凭据登录到目标YouTrack服务器，用户必须使用“ <span class="control">重置密码”</span>链接来创建新密码。</p></li><li class="list__item" id="9b26c31d"><p>仅从源YouTrack服务器导入目标项目中使用的自定义字段。要确保从源服务器导入所有数据，请检查目标服务器中的项目，并验证它是否包含正确数量和类型的自定义字段。</p></li></ul>    </div>    <div class="chapter"><h2 id="set-up-your-environment" data-toc="Import-from-Another-YouTrack-Server#set-up-your-environment">设置环境</h2>        <p id="8b84ffe0"><a href="https://github.com/JetBrains/youtrack-python-scripts" rel="noopener noreferrer" data-external="true" target="_blank">Python导入脚本</a>支持“导入到YouTrack”。这些脚本基于YouTrack REST API构建。实际上，您实际上不需要使用Python进行任何编程，但是您确实需要安装Python和包含导入脚本的软件包。</p>        <section class="procedure-steps"><h3 id="749d1161">设置环境：</h3><ol class="list _decimal"><li class="list__item" id="ecac0ed9"><p id="2cf7a049">下载并安装<a href="https://www.python.org/downloads/release/python-2714/" rel="noopener noreferrer" data-external="true" target="_blank">Python</a> 。Python客户端库与Python 2.7+兼容。不支持Python 3版本。您可以选择自己喜欢的安装目录。</p>                <p id="13191607">macOS，CentOS，Red Hat Enterprise Linux（RHEL）和Ubuntu的最新版本均随附Python 2.7。如果使用任何这些操作系统，请继续下一步。</p></li><li class="list__item" id="cc5390c3">                <p id="2bc805ad">安装包含导入脚本的软件包。打开操作系统支持的命令行界面，然后输入以下命令：</p><div class="code-block" data-lang="none"><code class="code-block__wrapper">pip install youtrack-scripts</code></div>                <p></p>                <ul class="list _ul"><li class="list__item" id="db2ff55d"><p>导入脚本安装在您的本地环境中。</p></li><li class="list__item" id="df696fda"><p>的<code class="code">youtrack</code>包含YouTrack REST API的Python客户端库的软件包会自动作为依赖项安装。</p></li></ul>                <p id="3057691b">如果您不想全局安装软件包，则只能使用以下命令为您的用户帐户安装软件包：</p><div class="code-block" data-lang="none"><code class="code-block__wrapper">pip install --user youtrack-scripts</code></div>                <p></p>            </li></ol></section>    </div>    <div class="chapter"><h2 id="import-all" data-toc="Import-from-Another-YouTrack-Server#import-all">导入项目中的所有问题</h2>        <p id="c7facf98">Python脚本可让您一次从源项目中导入所有问题。目标项目是自动创建的。</p>        <p id="2f7ea3ab">如果您只想导入单个问题，请参阅“ <a href="#import-one">导入单个问题”</a> 。</p>        <section class="procedure-steps"><h3 id="import-procedure">导入项目中的所有问题：</h3><aside class="prompt" rel="import-procedure" id="00c7ea9b" data-type="tip" data-title="">                <p id="988744ba">此过程需要多个权限。使用被授予源服务器和目标服务器<span class="control">系统管理员</span>角色的帐户。</p>            </aside><ol class="list _decimal"><li class="list__item" id="4d588aef"><p>打开操作系统支持的命令行界面。</p></li><li class="list__item" id="70629bd3"><p>如有必要，将当前目录更改为Python的安装目录。例如（Windows）：</p><div class="code-block" data-lang="none"><code class="code-block__wrapper">cd C:\Python27</code></div><p></p></li><li class="list__item" id="d21b0509">                <p id="2a7ed962">输入以下命令：</p>                    <div class="code-block" data-lang="none"><code class="code-block__wrapper">youtrack2youtrack [OPTIONS] AUTH_OPTIONS source_url target_url [projectId ...]</code></div>                <aside class="prompt" rel="4a198dee" id="7296038a" data-type="note" data-title=""><p>最新版本的导入脚本支持使用永久令牌或密码在YouTrack服务中进行身份验证。我们强烈建议您使用永久令牌。另外，请注意，提供身份验证数据的语法已更改。现在，您必须提供它们作为命令选项。</p></aside>                    <p id="7b6df90a">将命令行参数替换为如下所述的值：</p>                <div class="table-wrapper"><table width="100%" id="d1104a63"><thead><tr id="4fb49139" class="ijRowHead"><th id="83f38dc1" width="20%"><p>参数</p></th><th id="7e77a730"><p>描述</p></th></tr></thead><tbody><tr id="ba01f2d7" class="ijRowOdd"><td id="10a4e845"><code class="code">source_url</code></td><td id="a76b08fd"><p>要从中导入问题的源YouTrack服务器的URL。</p></td></tr><tr id="ab005593" class="ijRowEven"><td id="c75dd5d9"><code class="code">target_url</code></td><td id="d77357b2"><p>要导入问题的目标YouTrack服务器的URL。</p></td></tr><tr id="55743188" class="ijRowOdd"><td id="b6c24a79"><code class="code">projectId</code></td><td id="d7bc2bcc"><p>的<code class="code">projectID</code>项目导入到目标YouTrack服务器。</p></td></tr></tbody></table></div>                <p id="5f97210a">该命令还支持以下选项：</p>                <div class="table-wrapper"><table width="100%" id="434bab08"><thead><tr id="c1bb9a6c" class="ijRowHead"><th id="1bb9b2aa"><p>选项</p></th><th id="9d0d00f1"><p>描述</p></th></tr></thead><tbody><tr id="a5f9ab8d" class="ijRowOdd"><td id="99e72143" colspan="2">                            <p id="000d2f7b"><code class="code">AUTH_OPTIONS</code> -使用它们为源和目标YouTrack服务提供身份验证数据。</p>                        </td></tr><tr id="2307e342" class="ijRowEven"><td id="b264e4a7"><code class="code">-t</code></td><td id="bdff2797"><p>源YouTrack服务的授权令牌。</p></td></tr><tr id="fd70feb3" class="ijRowOdd"><td id="0ec07d40"><code class="code">-u</code></td><td id="89e3be30"><p>源YouTrack服务的用户登录名。</p></td></tr><tr id="d10b8272" class="ijRowEven"><td id="a3a20fc7"><code class="code">-p</code></td><td id="3c433d25"><p>源YouTrack服务的用户密码。</p></td></tr><tr id="964593f1" class="ijRowOdd"><td id="30a2a1f7"><code class="code">-T</code></td><td id="451bbf70"><p>目标YouTrack服务的授权令牌。</p></td></tr><tr id="f7e47440" class="ijRowEven"><td id="8f18c639"><code class="code">-U</code></td><td id="2b2511e7"><p>目标YouTrack服务的用户登录名。</p></td></tr><tr id="d4adcaa1" class="ijRowOdd"><td id="c48121b9"><code class="code">-P</code></td><td id="4151d9fe"><p>目标YouTrack服务的用户密码。</p></td></tr><tr id="2a8c85cf" class="ijRowEven"><td id="c0e07521" colspan="2">                            <code class="code">OPTIONS</code>                        </td></tr><tr id="53a075e2" class="ijRowOdd"><td id="35a5ac64"><code class="code">-h</code></td><td id="f4d9619d"><p>显示命令帮助并退出。</p></td></tr><tr id="3854ebd3" class="ijRowEven"><td id="e66f12be"><code class="code">-a</code></td><td id="bd471feb"><p>仅导入附件。</p></td></tr><tr id="af0eaee5" class="ijRowOdd"><td id="c47f89bc"><code class="code">-n</code></td><td id="62c29162"><p>创建新问题，而不是导入它们。</p></td></tr><tr id="cb829c71" class="ijRowEven"><td id="75536d90"><code class="code">-c</code></td><td id="0c2b70ba"><p>添加新评论以解决问题。</p></td></tr><tr id="26b193c2" class="ijRowOdd"><td id="1e492e37"><code class="code">-f</code></td><td id="112c48ed"><p>同步自定义字段值。</p></td></tr><tr id="e68cb6c6" class="ijRowEven"><td id="5322f711"><code class="code">-S</code></td><td id="5fb346bc"><p>同步问题标签。发行标签是代表登录用户创建的。</p></td></tr><tr id="3666714e" class="ijRowOdd"><td id="2f17a784"><code class="code">-r</code></td><td id="5e332498"><p>用新的附件替换旧的附件（删除并重新导入）。</p></td></tr><tr id="598d2047" class="ijRowEven"><td id="fb9b0070"><code class="code">-d</code></td><td id="794ef2f8"><p>禁用用户缓存。</p></td></tr><tr id="9f69c987" class="ijRowOdd"><td id="ade4188c"><code class="code">-w</code></td><td id="afd015c1"><p>隐性周期值（用作JT-19362的解决方法）。</p></td></tr><tr id="b2a2e40b" class="ijRowEven"><td id="1f2e3ce3"><code class="code">-s</code></td><td id="5151ae96"><p>时间跟踪设置格式<code class="code">"days_in_a_week:hours_in_a_day"</code></p></td></tr></tbody></table></div>                <ul class="list _ul"><li class="list__item" id="8b6381cb"><p>该命令执行Python导入脚本。</p></li><li class="list__item" id="9fc6c2ad"><p>如果成功，则会在命令行界面中针对每个问题打印以下行：</p><div class="code-block" data-lang="bash">已<issue id="">成功导入</issue>问题[ <issue id="">]</issue></div>                    <p></p></li></ul>            </li><li class="list__item" id="703d3f93">                <p id="86935ccb">检查目标YouTrack服务器并验证问题是否已正确导入。如果您对结果不满意，并想重新导入数据：</p>                <ul class="list _ul"><li class="list__item" id="2743acb0"><p>删除目标服务器中的项目。其所有问题也被删除。</p></li><li class="list__item" id="dc2ab03f"><p>再次运行导入脚本。</p></li></ul>            </li></ol></section>    </div>    <div class="chapter"><h2 id="import-one" data-toc="Import-from-Another-YouTrack-Server#import-one">导入单期</h2>        <p id="eb4f6593">在某些情况下，您可能希望一次导入一个问题。例如，当您要将问题从内部YouTrack实例迁移到公共跟踪器时。此过程中使用的Python脚本将一个问题从源项目导入到另一个YouTrack服务器中的现有项目。</p>         <p id="953a7677">请按照以下步骤将单个问题从一个YouTrack实例导入到另一个。</p>        <section class="procedure-steps"><h3 id="import-single-procedure">要将单个问题从一个YouTrack实例导入到另一个：</h3><aside class="prompt" rel="import-single-procedure" id="7a07ca9f" data-type="tip" data-title="">                <p id="03fb0952">此过程需要多个权限。使用被授予源服务器和目标服务器<span class="control">系统管理员</span>角色的帐户。</p>            </aside><ol class="list _decimal"><li class="list__item" id="fb720a1b"><p>打开操作系统支持的命令行界面。</p></li><li class="list__item" id="0e66a5d2"><p>如有必要，将当前目录更改为Python的安装目录。例如（Windows）：</p><div class="code-block" data-lang="bash">CD C：\ Python 27</div><p></p></li><li class="list__item" id="2caceed2">                <p id="4219e1cb">输入以下命令：</p><div class="code-block" data-lang="bash">moveIssue src_url src_login src_password trg_url trg_login trg_password src_issueId trg_projectId</div>将命令行参数替换为如下所述的值：<p></p>                <div class="table-wrapper"><table width="100%" id="d639bc3f"><thead><tr id="815cae42" class="ijRowHead"><th id="371e213d" width="20%"><p>参数</p></th><th id="bbaf300d"><p>描述</p></th></tr></thead><tbody><tr id="552b5f2a" class="ijRowOdd"><td id="2894cd55"><code class="code">src_url</code></td><td id="8729d400"><p>要从中导入问题的源YouTrack服务器的URL。</p></td></tr><tr id="8320ed0b" class="ijRowEven"><td id="1e76f486"><code class="code">src_login</code></td><td id="1cfa0685"><p>您用来登录源YouTrack服务器的帐户的用户名。</p></td></tr><tr id="5c20493a" class="ijRowOdd"><td id="97e93ae3"><code class="code">src_password</code></td><td id="ef974613"><p>您用来登录源YouTrack服务器的帐户密码。</p></td></tr><tr id="358eef67" class="ijRowEven"><td id="8de576ba"><code class="code">trg_url</code></td><td id="c29b1c3a"><p>要导入问题的目标YouTrack服务器的URL。</p></td></tr><tr id="0f3a4191" class="ijRowOdd"><td id="84425009"><code class="code">trg_login</code></td><td id="ca600d70"><p>您用于登录目标YouTrack服务器的帐户的用户名。</p></td></tr><tr id="07d35d80" class="ijRowEven"><td id="064f6984"><code class="code">trg_password</code></td><td id="f7248c2d"><p>您用来登录源YouTrack服务器的帐户密码。</p></td></tr><tr id="d8783ed6" class="ijRowOdd"><td id="609ceb4a"><code class="code">src_issueId</code></td><td id="a08bc023"><p>的<code class="code">issueID</code>要导入到目标YouTrack实例的问题。</p></td></tr><tr id="853a12dd" class="ijRowEven"><td id="9e619fc1"><code class="code">trg_projectId</code></td><td id="f7cfa593"><p>的<code class="code">projectID</code>要将源问题发布到的目标YouTrack实例中的项目。</p></td></tr></tbody></table></div>            </li><li class="list__item" id="28bf1e66"><p>检查目标YouTrack服务器，并验证问题是否已正确导入。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="troubleshooting-csv-import" data-toc="Import-from-Another-YouTrack-Server#troubleshooting-csv-import">故障排除</h2>        <p id="e466b323">如果在运行导入脚本时遇到任何错误，请查看是否符合以下任何条件。</p>        <div class="table-wrapper"><table width="100%" id="e94f74aa"><thead><tr id="95e6dc03" class="ijRowHead"><th id="c4bdb2cf" width="10%"><p>条件</p></th><th id="f4e37a3b"><code class="code">Error for [/user/login]: 302: Moved Temporarily</code></th></tr></thead><tbody><tr id="db6da06c" class="ijRowOdd"><td id="28ded479"><p>原因</p></td><td id="2a9783b2"><p>您用于<code class="code">target_url</code>参数不正确。最常见的错误是为YouTrack实例输入基本网址，而无需<code class="code">/youtrack</code> URL的末尾。</p></td></tr><tr id="9e214bd2" class="ijRowEven"><td id="39c51f58"><p>解</p></td><td id="3fa3307e">                    <p id="26127887">更改值<code class="code">target_url</code>参数，然后再次运行导入脚本。使用显示为YouTrack服务的“ <span class="control">基本URL”</span>设置的值。</p>                    <ol class="list _decimal"><li class="list__item" id="1c9aaa27"><p>对于YouTrack Standalone，复制“ <span class="control">全局设置”</span>页面上“ <span class="control">基本URL”</span>设置中的值。</p></li><li class="list__item" id="31388303"><p>对于YouTrack InCloud，请复制“ <span class="control">域设置”</span>页面上“ <span class="control">基本URL”</span>设置中的值。</p></li></ol></td></tr></tbody></table></div>        <div class="table-wrapper"><table width="100%" id="40eafb3e"><thead><tr id="1b5a2bf8" class="ijRowHead"><th id="033b9411" width="10%"><p>条件</p></th><th id="493a53a6"><code class="code">Error for [<resource>]: 403: Forbidden: You have no permissions for <resource></code></th></tr></thead><tbody><tr id="c23ae778" class="ijRowOdd"><td id="80770135"><p>原因</p></td><td id="eab8087c"><p>您用于运行导入脚本的用户帐户无权读取或更新目标资源。资源URL指示用户无法访问哪个实体。</p></td></tr><tr id="1e1ab13c" class="ijRowEven"><td id="24b2a196"><p>解</p></td><td id="22dea10a"><p>使用具有足够权限来更新目标资源的用户帐户运行导入脚本。</p></td></tr></tbody></table></div>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Import-from-Trac.html">从Trac导入从</a> <a class="navigation-links__next" href="Migrate-from-Standalone-to-InCloud.html">独立迁移到InCloud</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>