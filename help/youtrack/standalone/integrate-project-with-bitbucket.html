<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>与Bitbucket集成-帮助|帮助YouTrack单机版</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="integrate-project-with-bitbucket" data-breadcrumbs="Managing-Projects.xml|Projects/Connect-to-a-VCS.xml|Connect to a VCS/integrate-project-with-bitbucket.xml|Integrate with Bitbucket" data-main-title="Integrate with Bitbucket" data-article-props="
                {
                
            " seeals=":[=" titl=":=" user="" guid=",=" link="" ur=":" vcs-changes.htm="," tex=":" view="" and="" edit="" vcs="" change="}=" map-issues-to-vcs-change-commit.htm="," issues="" in="" commit="}=" apply-commands-in-vcs-commits.htm="," apply="" commands="" ]}="" ]="" }=""><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack独立帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="integrate-project-with-bitbucket.xml" data-toc="integrate-project-with-bitbucket">与Bitbucket集成</h1>  <p id="0fc041f0">您可以将YouTrack中的项目与<a href="https://bitbucket.org/" rel="noopener noreferrer" data-external="true" target="_blank">bitbucket.org</a>上托管的VCS存储库集成。</p>  <aside class="prompt" rel="0fc041f0" id="d6f39233" data-type="warning" data-title="Availability">    <p id="d98a6cfa">YouTrack和Bitbucket之间的集成仅在YouTrack 2019.1.51078及更高版本中受支持。较旧的YouTrack版本使用已停用的Bitbucket Cloud REST API版本。</p></aside>  <p id="c1df9e1b">Bitbucket集成启用了YouTrack中的以下功能：</p>  <ul class="list _ul"><li class="list__item" id="96df7f0d"><p>直接从提交注释或请求请求描述中将命令应用于YouTrack问题。有关更多信息，请参见《 <a href="Apply-Commands-in-VCS-Commits.html">VCS提交》中的“应用命令”</a> 。</p></li><li class="list__item" id="25167f19"><p>在每个问题的活动流中跟踪与特定问题相关的提交。有关更多信息，请参见<a href="VCS-Changes.html">查看和编辑VCS更改</a> 。</p></li><li class="list__item" id="3fa2eb7a"><p>在提交消息中添加指向YouTrack问题的链接。有关更多信息，请参见《 <a href="Map-Issues-to-VCS-Change-Commit.html">VCS提交中的链接问题》</a> 。</p></li></ul>  <aside class="prompt" rel="e93e5049" id="67062680" data-type="note" data-title="">    <p id="353ff2f8">启用并配置Bitbucket集成时，您将在项目和Bitbucket存储库之间定义映射。项目管理员可以根据每个项目执行此操作。</p>    <p id="d67fb9e4">管理员可以为YouTrack中的任何项目启用和管理Bitbucket集成。有关更多信息，请参见<a href="Integration-with-Bitbucket.html">Bitbucket集成</a> 。</p>  </aside>  <div class="chapter"><h2 id="bitbucket-integration-prerequisites" data-toc="integrate-project-with-bitbucket#bitbucket-integration-prerequisites">先决条件</h2>                <ul class="list _ul"><li class="list__item" id="93cddfda"><p>入站连接可访问YouTrack。具体来说，您需要确保您的网络不会阻止VCS服务器与YouTrack之间的连接。</p></li><li class="list__item" id="9faa5d91"><p>用于连接到Bitbucket的帐户要么是存储库的所有者，要么具有对该存储库的管理员级别的访问权限。这是其登录名和密码用于验证的用户帐户。如果您使用的帐户没有对存储库的管理员级别的访问权限，则会遇到<code class="code">unable to perform operation</code>错误。</p></li></ul>        </div>        <div class="chapter"><h2 id="configure-bitbucket-integration" data-toc="integrate-project-with-bitbucket#configure-bitbucket-integration">配置Bitbucket集成</h2>          <p id="51ea42b9">第一步是在项目与YouTrack和Bitbucket中的存储库之间建立连接。要连接Bitbucket，您需要输入Bitbucket帐户的凭据。此身份验证基于授予您在Bitbucket中的帐户的访问权限，向YouTrack授予对存储库的访问权限。</p>            <p id="8c99e9b4">您用于设置集成的表格接受您的Bitbucket帐户密码或应用程序密码。我们强烈建议您使用应用密码。</p>                <section class="procedure-steps"><h3 id="bitbucket-project-procedure">要连接到Bitbucket存储库：</h3><aside class="prompt" rel="bitbucket-project-procedure" id="5347b9d3" data-type="tip" data-title=""><p>需要权限：更新项目</p></aside><ol class="list _decimal"><li class="list__item" id="eb8b163e"><p>单击标题中的“ <span class="control">项目”</span>链接以打开“ <span class="control">项目”</span>列表。</p></li><li class="list__item" id="70f07f27"><p>从项目的“ <span class="control">管理”</span>菜单中，选择“ <span class="control">VCS”</span> 。</p><figure><a class="lightbox" href="/help/img/youtrack/2019.2/project-administration-vcs-integration.zoomed.png"><img alt="项目管理VCS集成" title="项目管理VCS集成" src="/help/img/youtrack/2019.2/project-administration-vcs-integration.png" id="c6b82a5b" width="600" height="209"></a></figure>                        <p></p></li><li class="list__item" id="3f80e6c4"><p id="113a438d">单击“ <span class="control">新建VCS集成”</span>按钮。</p>                                <ul class="list _ul"><li class="list__item" id="8b675383"><p>将打开“ <span class="control">新建VCS集成”</span>对话框。</p><figure><a class="lightbox" href="/help/img/youtrack/2019.2/new-vcs-integration-bitbucket.zoomed.png"><img alt="新的Bitbucket VCS集成" title="新的Bitbucket VCS集成" src="/help/img/youtrack/2019.2/new-vcs-integration-bitbucket.png" id="9e7b422d" width="600" height="260"></a></figure><p></p></li></ul></li><li class="list__item" id="060b41c5"><p>对于<span class="control">服务器类型</span> ，选择<span class="control">Bitbucket</span> 。</p></li><li class="list__item" id="6848bdb7"><p>将指向您的Bitbucket存储<span class="control">库的URL</span>粘贴到“ <span class="control">存储库URL”</span>输入字段中。</p></li><li class="list__item" id="b7687599"><p id="172bc17a">输入Bitbucket帐户的登录名和密码。</p>                        <p id="19182848"><span class="control">密码</span>输入字段接受您的Bitbucket帐户的密码或应用程序的密码。</p>                        <p id="21d6a4a2">要创建应用密码，请点击<span class="control">创建应用密码</span>链接以访问您在Bitbucket中的帐户。您用于此集成的应用密码需要以下权限：</p>                        <div class="table-wrapper"><table width="100%" id="d49aae55"><thead><tr id="c5e56a24" class="ijRowHead"><th id="b124f3b2" width="20%"><p>类别</p></th><th id="a6c82a97"><p>允许</p></th></tr></thead><tbody><tr id="3d245c88" class="ijRowOdd"><td id="30700c51"><p>储存库</p></td><td id="bc616dd5"><p>阅读，管理</p></td></tr><tr id="6990fc67" class="ijRowEven"><td id="4d116c29"><p>拉取要求</p></td><td id="dd0eb537"><p>读</p></td></tr><tr id="74c3d14d" class="ijRowOdd"><td id="887f9bed"><p>问题</p></td><td id="ebdb5adf"><p>读</p></td></tr><tr id="ae4778f7" class="ijRowEven"><td id="74922603"><p>网络挂钩</p></td><td id="7ffcf235"><p>读和写</p></td></tr></tbody></table></div>                    </li><li class="list__item" id="8a8afd7f"><p id="8becc1d8">单击<span class="control">保存</span>按钮。</p>                    <ul class="list _ul"><li class="list__item" id="c2465c91"><p>您的YouTrack项目已与Bitbucket中选定的存储库集成。</p></li><li class="list__item" id="3f2a4f87"><p>来自Bitbucket存储库的引用项目中问题的提交将显示在所引用问题的活动流中。</p></li><li class="list__item" id="59e5ee4a"><p>侧边栏显示用于配置VCS集成的其他设置。</p><figure><a class="lightbox" href="/help/img/youtrack/2019.2/bitbucket-integration-settings-project.zoomed.png"><img alt="Bitbucket集成设置" title="Bitbucket集成设置" src="/help/img/youtrack/2019.2/bitbucket-integration-settings-project.png" id="1a960eb9" width="600" height="290"></a></figure><p></p></li></ul>                    <p id="2475903f">要了解有关这些设置的更多信息，请参阅<a href="#integration-settings">集成设置</a> 。</p></li></ol></section>        </div>  <div class="chapter"><h2 id="integration-settings" data-toc="integrate-project-with-bitbucket#integration-settings">整合设定</h2>    <p id="70c2255e">默认情况下，VCS集成处理由任何分支中的任何用户提交到存储库的更改。在YouTrack中有权访问该问题的任何用户都可以在问题活动流中查看这些更改。</p>    <p id="8298176f">如果您只想处理指定分支中特定用户的更改，或限制YouTrack中VCS更改的可见性，则可以自定义集成设置。使用以下设置来自定义集成：</p>    <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="17b1982d"><thead><tr id="a7c2549c" class="ijRowHead"><th id="1b10792f" width="20%"><p>设置</p></th><th id="27b14c5d"><p>描述</p></th></tr></thead><tbody><tr id="3b6f1388" class="ijRowOdd"><td id="52227005"><p>资料库</p></td><td id="0bb00d34"><p id="c12f7921">显示集成版本控制系统中存储库的路径。</p>          <p id="e67254e1">如果需要，可以在设置集成后编辑存储库的位置。有关说明，请参阅“ <a href="edit-repository-settings.html">编辑存储库设置”</a> 。</p>        </td></tr><tr id="ab478477" class="ijRowEven"><td id="6ed8cc85"><p>提交者</p></td><td id="4c46d861"><p>限制更新提交给指定组成员的消息中的命令的问题的能力。来自非选定组成员的用户的VCS更改仍附加到相关问题，但是将忽略其提交中指定的任何命令。</p></td></tr><tr id="58537b70" class="ijRowOdd"><td id="5c854bd0"><p>监控分支</p></td><td id="4d138630"><p id="63827f33">存储要监视更改的分支的名称。对于Bitbucket集成，请使用短名称而不是分支的完全限定名称。</p>          <ul class="list _ul"><li class="list__item" id="45aebaaa"><p>使用<code class="code">+</code>包括一个分支。</p></li><li class="list__item" id="b89ba674"><p>使用<code class="code">-</code>排除分支。</p></li><li class="list__item" id="a159fba1"><p>使用<code class="code">*</code>作为通配符。该占位符匹配字符串中的一个或多个字符。例如，要包括所有功能分支，请使用：</p><div class="code-block" data-lang="bash">+：功能/ *</div><p></p></li><li class="list__item" id="e4997d8f"><p>要监视所有分支，请将输入字段留空。</p></li></ul>          <p id="4a430038">如果在连接到Bitbucket时输入为<span class="control">存储库URL</span>的地址指向特定分支，则在建立连接时该分支会自动添加到受监视分支列表中。</p>        </td></tr><tr id="c0371d22" class="ijRowEven"><td id="94d0afbf"><p>解析提交问题评论</p></td><td id="00fd3350"><p id="b4e30166">启用后，提交消息文本的特定部分将作为注释复制到问题。当您将部分提交消息作为注释复制到问题时，您可以触发@mention通知并将信息公开给无法访问VCS更改的用户。</p>              <p id="c436dd70">此设置不会影响VCS更改中提交消息的显示方式。整个提交消息（包括命令和问题注释）始终显示为活动流中VCS更改记录的一部分。</p>              <p id="0c2faa6f">您仅应在以下情况下启用此选项：</p>              <ul class="list _ul"><li class="list__item" id="6fe3698b"><p>您希望在提交消息中提及其他用户，并在将文本复制到问题注释时生成通知。</p></li><li class="list__item" id="8b16883b"><p>您限制了VCS更改的可见性，并希望使与提交有关的信息作为注释对外部用户可见。</p></li></ul>              <p id="6a1fda6f">要了解有关YouTrack如何处理提交消息的更多信息，请参阅《 <a href="Apply-Commands-in-VCS-Commits.html">VCS提交》中的“应用命令”</a> 。</p></td></tr><tr id="2ff2a376" class="ijRowOdd"><td id="26319dfc"><p>VCS更改可见性</p></td><td id="0c7a613d"><p>将VCS更改的可见性限制为YouTrack中的一个或多个用户组。当不受限制时，VCS更改列表对任何有权读取项目中问题的用户都是可见的。</p></td></tr></tbody></table></div>  </div>  <div class="chapter"><h2 id="troubleshooting" data-toc="integrate-project-with-bitbucket#troubleshooting">故障排除</h2>    <p id="ac76148c"><b id="6c05ec60">条件</b> -对VCS提交中的问题的引用未显示为YouTrack中的VCS更改。</p>    <div class="table-wrapper"><table width="100%" id="eac4caa5"><thead><tr id="7814c426" class="ijRowHead"><th id="41bd7adf" width="50%"><p>原因</p></th><th id="b63d48a9"><p>解</p></th></tr></thead><tbody><tr id="9fd7b680" class="ijRowOdd"><td id="a0a113e4"><p>集成的VCS中的Webhook不存在，被禁用或格式错误。</p></td><td id="2aff514a"><p id="2cc655d0">检查VCS存储库设置中的webhook。确保存在网络钩子并已将其启用。</p>          <p id="3142030e">如果您怀疑Webhook有问题，请在VCS的设置中将其删除或禁用，然后在YouTrack中设置新的VCS集成。</p></td></tr></tbody></table></div>      <p id="db19ed26"><b id="97fa1e42">条件</b> -VCS提交中指定的命令不适用于YouTrack中的问题。</p>      <div class="table-wrapper"><table width="100%" id="59e72387"><thead><tr id="6cc917bd" class="ijRowHead"><th id="3e4535da" width="50%"><p>原因</p></th><th id="350831e4"><p>解</p></th></tr></thead><tbody><tr id="12365b30" class="ijRowOdd"><td id="4dafd3c6"><p>提交对存储库所做的更改的用户不是集成设置中<span class="control">Committers</span>组的成员。</p></td><td id="9c485253"><p>将提交者添加到YouTrack中的指定组，或者修改集成设置中的选择。</p></td></tr><tr id="eb0ee7ad" class="ijRowEven"><td id="58c00f2b"><p>提交对存储库的更改的用户无权更新所连接项目中的问题。</p></td><td id="88d19c58"><p>将这些用户添加到项目团队中，或授予他们在项目中的角色，该角色包括“ <span class="control">读取问题”</span>和“ <span class="control">更新问题”</span>权限。</p></td></tr><tr id="515a64c6" class="ijRowOdd"><td id="83ed7310"><p>YouTrack找不到与提交消息的作者匹配的用户帐户。</p></td><td id="d97307fb"><p id="29c0176c">用户必须在YouTrack和Bitbucket中为其帐户使用相同的电子邮件地址，或者将存储在其Bitbucket个人资料中作为昵称存储的值添加到其Hub帐户中的VCS用户名列表中。</p>                  <p id="86a3a09b">有关更多信息，请参见<a href="match-commit-authors-and-youtrack-users.html">匹配提交作者和YouTrack用户</a> 。</p></td></tr></tbody></table></div>      <p id="09264205"><b id="bb7762c1">条件</b> -YouTrack返回错误<code class="code">unable to perform operation</code>当您尝试与Bitbucket存储库建立连接时。请按照以下说明解决问题。</p>    <div class="table-wrapper"><table width="100%" id="3efba1d3"><thead><tr id="963b70b9" class="ijRowHead"><th id="836319c1" width="50%"><p>原因</p></th><th id="f5f511bd"><p>解</p></th></tr></thead><tbody><tr id="5b8da6fb" class="ijRowOdd"><td id="4a6735ea"><p>用于通过Bitbucket进行身份验证的登录名和密码属于不是存储库所有者并且没有管理员级别访问权限的用户。这种集成使用webhooks，只能由存储库所有者和其他被授予管理员访问权限的用户创建。</p></td><td id="fb4c1c16"><p id="a212c02d">访问存储库的“ <span class="control">用户”和“组”访问</span>设置，并将管理员访问权限授予您用于通过Bitbucket进行身份验证的用户。您还可以授予该用户所属组的管理员访问权限。</p>          <p id="d75cf4b8">或者，使用存储库中已被授予管理员访问权限的帐户的登录名和密码。</p>        </td></tr></tbody></table></div>  </div>                <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="integrate-project-with-gitlab.html">与GitLab</a> <a class="navigation-links__next" href="Project-Notification-Templates.html">编辑通知模板</a> <a class="navigation-links__prev" href="integrate-project-with-gitlab.html">集成</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>