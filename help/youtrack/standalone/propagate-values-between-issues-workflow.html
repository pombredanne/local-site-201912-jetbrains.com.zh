<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>在问题之间传播价值-帮助|帮助YouTrack单机版</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="propagate-values-between-issues-workflow" data-breadcrumbs="Administration.xml|Administration/Workflow-Guide.xml|Workflows/Workflow-Use-Cases.xml|Use Cases for Workflows/propagate-values-between-issues-workflow.xml|Propagate Values Between Issues" data-main-title="Propagate Values Between Issues"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack独立帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="propagate-values-between-issues-workflow.xml" data-toc="propagate-values-between-issues-workflow">在问题之间传播价值</h1>        <p id="7ebbc797">问题跟踪的一个常见要求是根据应用于相关问题的更改来更新问题中的值。在YouTrack中，工作流支持此用例。</p>  <p id="7811aa05">接下来的两个案例演示了如何根据其他问题的更改来更新问题。这些问题与父子任务关系相关联。但是，您可以将这种方法应用于其他链接类型的问题，具体取决于您的过程。</p>  <div class="chapter"><h2 id="update-subtasks-when-parent-changes" data-toc="propagate-values-between-issues-workflow#update-subtasks-when-parent-changes">将更改应用于父问题时更新子主题</h2>    <p id="2f78528d">第一个方向是使用自上而下的方法来应用更新：将更新应用于父发行时，子任务也会相应地更新。我们称这种行为为<i id="176ee11c">继承，</i>并且在YouTrack中有多个默认工作流，这些工作流为各个字段实现了此行为，例如<a href="Workflow-Subtask-Inherit-Assignee.html">Subtask Inherit Assignee</a> ， <a href="Workflow-Subtask-Inherit-Fix-Versions.html">Subtask Inherit Fix Versions</a>和<a href="Workflow-Subtask-Inherit-Subsystem.html">Subtask Inherit Subsystem</a> 。让我们看一下<span class="control">Subsystem</span>字段的相应规则：</p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; var工作流程= require（'@ jetbrains / youtrack-scripting-api / workflow'）; Exports.rule =实体。Issue.onChange（{ （）&& ctx.issue.fields。子系统}，动作：function（ctx）{var issue = ctx.issue; var safeSetSubsystem = function（subtask）{if（subtask.project &&！subtask.project.isArchived）{如果（subtask.project.key === issue.project.key || subtask.project.findFieldByName（ctx。Subsystem.name））{如果（！subtask.fields。子系统）{变量值= subtask.project.findFieldByName（ctx。Subsystem.name）.findValueByName（issue.fields。Subsystem.name）; if（value）{subtask.fields。子系统=值； }}}}}; issue.links ['parent for']。added.forEach（safeSetSubsystem）; }，要求：{子系统：{类型：实体。EnumField.fieldType}，SubtaskOf：{类型：实体。IssueLinkPrototype，名称：“ Subtask”，向外：“ parent for”，向内：“ subtask of”}}}}）；</div>    <aside class="prompt" rel="a047e6c1" id="1fd4852e" data-type="note" data-title="Workflow Localization">      <p id="dc49f32c">YouTrack中的默认工作流程使用<code class="code">workflow.i18n(...)</code>本地化工作流消息的方法。在编写自己的工作流程时，您始终会知道YouTrack安装的语言，因此无需使用此方法。</p>      <p id="f37c41c6">如果要在默认工作流程中编辑消息，请删除此方法，并将其用法替换为简单的消息文本字符串。有关详细信息，请参阅<a href="Workflow-Localization.html">本地化工作流消息</a> 。</p>    </aside>    <p id="710201fe">您可能会注意到，此规则非常冗长。这种冗长的语言保证了当子任务之一属于不使用<span class="control">Subsystem</span>字段的项目时，规则不会因错误而失败。我们建议您每次都遵循这种方法，因为该规则可能会引用该规则所附加的项目以外的其他项目中的问题。</p>  </div>  <div class="chapter"><h2 id="update-parent-issue-when-subtask-changes" data-toc="propagate-values-between-issues-workflow#update-parent-issue-when-subtask-changes">将更改应用于子任务时更新父问题</h2>    <p id="8ba4ff7f">第二个方向是自下而上。当子任务代表完成较大任务的步骤时，使用此方法。当所有子任务都达到特定状态时，这意味着父问题也已达到该状态。最基本的示例是在所有子任务均已修复后，关闭父级问题。此规则是默认“子<a href="Workflow-Subtasks.html">任务”</a>工作流中的模块之一：</p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; var工作流程= require（'@ jetbrains / youtrack-scripting-api / workflow'）; Exports.rule =实体。Issue.onChange（{标题：workflow.i18n（'解决所有子任务后修复父项'），后卫：function（ctx）{return ctx.issue.isReported && ctx.issue.becomesResolved;}，操作：function（ctx） {var processParent = function（issue）{if（issue.links ['subtask of] .isEmpty（））{return;} var parent = issue.links ['subtask of] .first（）; if（parent && parent.project &&！parent.project.isArchived && parent.isReported &&！parent.isResolved）{var unresolvedSubtask = parent.links ['parent for']。find（function（subtask）{return subtask.isReported &&！subtask.fields。State.isResolved; }）;如果（！unresolvedSubtask）{var field = parent.project.findFieldByName（ctx。State.name）; if（field）{var value = field.findValueByName（ctx。州。固定名称）;如果（值）{父。状态=值； workflow.message（workflow.i18n（'自动将{0}设置为Done'，parent.id））;返回父母}}}}}; var issue = ctx.issue; while（issue）{issue = processParent（issue）; }}，要求：{州：{类型：实体。State.fieldType，固定：{}}}}）；</div>    <p id="c20e5061">根据您的过程，这种“达到目标状态”的条件可能会非常不同。例如，您可以在字段“文档”中提供值“否（默认）”和“是”。将每个子任务分配给“是”时，表示整个父问题均已记录在案。</p>  </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="update-fields-on-issue-update.html">有关问题更新</a> <a class="navigation-links__next" href="track-spent-time-workflow.html">跟踪花费时间的</a> <a class="navigation-links__prev" href="update-fields-on-issue-update.html">更新字段</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>