<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');</script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>小部件开发指南-帮助| YouTrack单机版</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="building-custom-widgets" data-breadcrumbs="Resources-for-Developers.xml|Resources for Developers/building-custom-widgets.xml|Widget Development Guide/custom-widget-tutorial.xml|Custom Widget Tutorial/test-custom-widgets.xml|Test a Custom Widget/custom-widgets-API-reference.xml|Custom Widgets API Reference/sample-custom-widgets.xml|Sample Custom Widgets" data-main-title="Widget Development Guide"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack独立帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="building-custom-widgets.xml" data-toc="building-custom-widgets">小部件开发指南</h1>    <p id="d8ce0ced">自定义窗口小部件是微型应用程序视图，您可以将其嵌入到YouTrack仪表板中。您可以构建一个小部件，使您可以查看和与属于软件生态系统的任何应用程序进行交互，包括对YouTrack数据和存储在内置Hub服务中的信息的自定义视图。</p>    <p id="893d22e9">此页面包括小部件包和清单文件的基本概述。有关自定义小部件的分步介绍，请阅读《 <a href="custom-widget-tutorial.html">自定义小部件教程》</a> 。</p>    <div class="chapter"><h2 id="yeoman-generator-custom-widget" data-toc="building-custom-widgets#yeoman-generator-custom-widget">快速开始</h2>        <p id="c359c40b">构建自定义窗口小部件的最快方法是使用我们的Yeoman生成器。运行发电机时：</p>        <ul class="list _ul"><li class="list__item" id="d1f85976"><p>Yeoman建立了基本的项目结构并安装了所有必需的依赖项。</p></li><li class="list__item" id="fe7c636f"><p>的<code class="code">index.html</code>小部件包所需的文件是在<code class="code">src</code>目录。</p></li><li class="list__item" id="bdb47893"><p>命令行中的提示可让您指定<code class="code">name</code> ， <code class="code">description</code>和<code class="code">author</code>中的属性<code class="code">manifest.json</code>文件。</p></li><li class="list__item" id="94fd7d2a"><p>样本小部件的代码已保存到<code class="code">app</code>子目录。</p></li></ul>        <p id="6da59477">要使用生成器构建自定义窗口小部件，请<a href="https://github.com/JetBrains/ring-ui/blob/master/packages/generator/hub-widget" rel="noopener noreferrer" data-external="true" target="_blank">访问GitHub中的窗口小部件生成器，</a>并按照README文件中的说明进行操作。要开始使用，请使用以下命令：</p>        <div class="code-block" data-lang="none">npm install -g yo @ jetbrains / generator-ring-ui</div>        <p id="66bc7f29">然后切换到窗口小部件的根目录（如有必要，请创建一个）并运行：</p>        <div class="code-block" data-lang="none">yo @ jetbrains / ring-ui：hub-widget</div>        <p id="83fb1df3">生成器提示您输入窗口小部件名称（默认为当前目录的名称），窗口小部件描述和作者。Yeoman创建您的项目文件并为您安装所有依赖项。</p>        <p id="3d7e7996">此时，您应该拥有开始使用所需的所有工具。在构建窗口小部件时，请使用此页面上的信息作为参考。</p>    </div>    <div class="chapter"><h2 id="widget-package" data-toc="building-custom-widgets#widget-package">小部件包</h2>        <p id="47d5635e">小部件是使用HTML，CSS和JavaScript构建的。这些是在沙盒嵌入式框架（iFrame）中运行的静态Web应用程序。</p>        <ul class="list _ul"><li class="list__item" id="530527f1"><p>该小部件必须具有名为<code class="code">index.html</code> 。</p></li><li class="list__item" id="43d65d62"><p>您的窗口小部件包可以包含相关的源文件。</p></li></ul>        <p id="b24add86">您可以使用一些资源来构建窗口小部件。</p>        <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="61df45a5"><thead><tr id="8abbbf03" class="ijRowHead"><th id="af101784" width="20%"><p>资源资源</p></th><th id="9fd6f634"><p>描述</p></th></tr></thead><tbody><tr id="340aee57" class="ijRowOdd"><td id="f8932fa3"><a href="https://unpkg.com/hub-dashboard-addons@0.0.8/dashboard.css" rel="noopener noreferrer" data-external="true" target="_blank">dashboard.css</a></td><td id="87ef0998"><p>该.css文件包含用于YouTrack中的窗口小部件的默认文本样式和布局定义。您可以将其用作仪表板小部件的默认样式表，或修改这些样式以更改小部件布局。</p></td></tr><tr id="aa6181e0" class="ijRowEven"><td id="0bb42c78"><a href="https://unpkg.com/hub-dashboard-addons@latest" rel="noopener noreferrer" data-external="true" target="_blank">仪表板脚本</a> </td><td id="139b33fb">该脚本包含通过消息与仪表板通信的代码。它创建一个<code class="code">Dashboard</code>全局范围内的对象，您可以在其中调用单个方法<code class="code">registerWidget</code> 。<p id="0be05547">要使用此脚本，请选择以下实现之一：</p>                    <ul class="list _ul"><li class="list__item" id="67648e16"><p>在您的标题中添加对它的引用<code class="code">index.html</code>文件。将参考包装在<script> tag. For example:                            </p><div class="code-block" data-lang="markup"><script src="https://unpkg.com/hub-dashboard-addons@latest"></script></p></li></ul></td></tr></tbody></table></div>                        <p></p><li class="list__item" id="dc48beb2"><p>使用npm软件包管理器将脚本与<code class="code">npm install hub-dashboard-addons</code>命令。然后，您可以根据需要在应用程序中添加对脚本的引用。</p></li>                <table><tbody><tr id="2445b8c6" class="ijRowOdd"><td id="32da9c14"><a href="https://github.com/JetBrains/ring-ui" rel="noopener noreferrer" data-external="true" target="_blank">环形界面</a></td><td id="e28fdb22"><p id="514b8883">JetBrains已发布了一个用于Web产品的Web组件的开源库。该库包含50多个React控件，范围从简单的链接和按钮到复杂的控件（如日期选择器和交互式分层数据列表）。该库在YouTrack，Hub，Upsource，TeamCity和其他产品中广泛使用。</p>                    <p id="48d14692">有关组件和设置说明的完整列表，请<a href="https://jetbrains.github.io/ring-ui/master/index.html" rel="noopener noreferrer" data-external="true" target="_blank">在线</a>访问<a href="https://jetbrains.github.io/ring-ui/master/index.html" rel="noopener noreferrer" data-external="true" target="_blank">Ring UI库</a> 。</p></td></tr></tbody></table></div>        <p id="1a4072c6">为小部件组装所有内容和源文件后，将清单添加到最顶层目录并创建一个ZIP存档。然后，您可以将ZIP存档导入到YouTrack中，并启用该小部件以在您的仪表板上使用。</p>    </article></div>    <div class="chapter"><h2 id="widget-manifest" data-toc="building-custom-widgets#widget-manifest">小部件清单</h2>        <p id="129dbd35">每个小部件应包含一个<code class="code">manifest.json</code>文件。该文件定义您的自定义窗口小部件的属性。</p>        <p id="46c60eaa">为了让YouTrack读取并显示小部件清单中的属性：</p>        <ul class="list _ul"><li class="list__item" id="8a5b2b1b"><p>该文件必须命名<code class="code">manifest.json</code> 。</p></li><li class="list__item" id="caf9a069"><p>该文件必须存储在ZIP存档的最顶层目录中。</p></li></ul>        <p id="e0ef9d29">小部件清单中定义了以下属性：</p>        <div class="table-wrapper"><table class=" wide" width="100%" id="3dbe5b3e"><thead><tr id="fb56dc49" class="ijRowHead"><th id="6dbed80b" width="20%"><p>属性</p></th><th id="1f5e4982" width="10%"><p>类型</p></th><th id="f08ab74e"><p>描述</p></th><th id="3d129333" width="10%"><p>条件</p></th></tr></thead><tbody><tr id="7fa15c66" class="ijRowOdd"><td id="812f0b1d"><p>键</p></td><td id="73af9f68"><p>串</p></td><td id="19467638"><p>用于在YouTrack中标识窗口小部件的内部ID。每个服务器的此ID必须唯一。</p></td><td id="2c6a6a04"><p>需要</p></td></tr><tr id="00824761" class="ijRowEven"><td id="c28eae83"><p>版</p></td><td id="93acde56"><p>串</p></td><td id="145b7a74"><p>窗口小部件应用程序的版本号。</p></td><td id="441d75aa"><p>需要</p></td></tr><tr id="65db5f35" class="ijRowOdd"><td id="1133fa59"><p>名称</p></td><td id="4edf0e49"><p>串</p></td><td id="ef41e82f"><p>自定义窗口小部件的名称。这将在“ <span class="control">自定义小部件”</span>列表中标识小部件，并显示在“ <span class="control">添加小部件”</span>下拉菜单中。</p></td><td id="4107c17d"><p>需要</p></td></tr><tr id="021cb8d1" class="ijRowEven"><td id="78a30f15"><p>描述</p></td><td id="c9eb8134"><p>串</p></td><td id="f4b87063"><p>在“ <span class="control">自定义小部件”</span>列表上显示的描述。</p></td><td id="9aa5777e"><p>需要</p></td></tr><tr id="c67ec7a0" class="ijRowOdd"><td id="867670f2"><p>作者</p></td><td id="b7a3b074"><p>串</p></td><td id="84e52af9"><p>创建窗口小部件的开发人员的名称和电子邮件地址。指定的格式与NPM软件包中使用的格式相同。有关更多信息，请参考<a href="https://docs.npmjs.com/files/package.json#people-fields-author-contributors" rel="noopener noreferrer" data-external="true" target="_blank">npm软件包说明</a> 。</p></td><td id="c57dee21"><p>需要</p></td></tr><tr id="51c1ff46" class="ijRowEven"><td id="3d75f56f"><p>homeUrl</p></td><td id="86352d76"><p>网址</p></td><td id="dac1adf8"><p>小部件主页或代码存储库的网址。显示在小部件列表的“ <span class="control">详细信息”</span>侧栏中。</p></td><td id="8b12326c"><p>可选的</p></td></tr><tr id="4e04abf2" class="ijRowOdd"><td id="20eb5f65"><p>应用名称</p></td><td id="b73435f3"><p>串</p></td><td id="dd2625df"><p>窗口小部件旨在显示其内容的应用程序的名称。例如， <code class="code">YouTrack</code> 。</p></td><td id="5828ac68"><p>可选的</p></td></tr><tr id="3d1674b7" class="ijRowEven"><td id="f2e3dbbd"><p>iconUrl</p></td><td id="e129790d"><p>网址</p></td><td id="18ca0f36"><p>用作小部件图标的图像的地址。该位置是相对于小部件根文件夹的，没有斜杠。如果为空，则在<code class="code">applicationName</code>显示在小部件标题中。</p></td><td id="8f5b9275"><p>可选的</p></td></tr><tr id="5395d38f" class="ijRowOdd"><td id="260db78b"><p>依存关系</p></td><td id="81e652d8"><p>序列</p></td><td id="35c4fa98"><p id="6e713bc3">小部件向其发送HTTP请求的服务列表。指定为键和值对的序列。为了使小部件按预期工作，必须将这些服务连接到YouTrack安装。有关更多信息，请参见<a href="#widget-dependencies">依赖关系</a> 。</p>                    <ul class="list _ul"><li class="list__item" id="8c5130e1"><p>密钥必须等于注册服务的应用程序名称属性。如果密钥与YouTrack中的任何服务都不匹配，则忽略该属性。</p></li><li class="list__item" id="90ae4e46"><p id="ed70e233">这些值对应于指定服务支持的应用程序版本。该窗口小部件仅具有其版本与指定服务匹配的应用程序。</p>                            <p id="8454eb8c">版本号遵循语义版本规范（SemVer）推荐的格式。有关更多信息，请参考<a href="https://docs.npmjs.com/misc/semver" rel="noopener noreferrer" data-external="true" target="_blank">npm</a>的<a href="https://docs.npmjs.com/misc/semver" rel="noopener noreferrer" data-external="true" target="_blank">语义版本器</a> 。</p>                        </li></ul>                </td><td id="cfcbbad5"><p>可选的</p></td></tr><tr id="323869c2" class="ijRowEven"><td id="61c1e36c"><p>产品展示</p></td><td id="55b3d3c0"><p>序列</p></td><td id="4d4d6c88">可以安装小部件的产品和兼容版本的列表。指定为键和值对的序列，类似于依赖项列表。有关更多信息，请参见<a href="#widget-products">产品</a> 。<ul class="list _ul"><li class="list__item" id="70091b2e"><p>密钥必须等于注册服务的应用程序名称属性。如果密钥与任何已注册的服务都不匹配，则忽略该属性。</p></li><li class="list__item" id="451a7454"><p>这些值对应于小部件兼容的应用程序版本。版本与指定服务匹配的应用程序仅支持安装。</p></li></ul>                </td><td id="ffc98a62"><p>需要</p></td></tr><tr id="2b9f84fe" class="ijRowOdd"><td id="6fdb2ceb"><p>视图</p></td><td id="38577c7f"><p>序列</p></td><td id="efc8361f">视觉属性列表。支持以下属性：<div class="table-wrapper"><table class=" wide" width="100%" id="13614b4c"><thead><tr id="78506da3" class="ijRowHead"><th id="7bf02a95"><p>属性</p></th><th id="be74a912"><p>类型</p></th><th id="cbeeda27"><p>描述</p></th></tr></thead><tbody><tr id="cca05ef3" class="ijRowOdd"><td id="662b9add"><p>淡出</p></td><td id="d4a66e22"><p>布尔型</p></td><td id="bfc55a8c"><p>确定滚动内容区域的视觉呈现。什么时候<code class="code">true</code> ，将阴影应用于小部件内滚动内容区域的顶部和底部。</p></td></tr><tr id="2fc22353" class="ijRowEven"><td id="4b29708b"><p>defaultWidth</p></td><td id="4db05df4"><p>整数</p></td><td id="c02ff161"><p>设置用户将小部件添加到仪表板时的默认宽度。如果为空，则将值设置为<code class="code">2</code> 。</p></td></tr><tr id="0ea57a7e" class="ijRowOdd"><td id="2a3d9d13"><p>defaultHeight</p></td><td id="5a16f0df"><p>整数</p></td><td id="83e2a5e1"><p>设置用户将小部件添加到仪表板时的默认宽度。如果为空，则将值设置为<code class="code">2</code> 。</p></td></tr></tbody></table></div>可以为<code class="code">defaultWidth</code>和<code class="code">defaultHeight</code>属性与仪表板上网格的列和行相对应。“ <span class="control">仪表板”</span>页面的网格具有八列和无限数量的行。在窗口小部件清单中设置这些属性时，将确定最适合在窗口小部件中显示内容的宽度和高度。</td><td id="f552ed8f"><p>可选的</p></td></tr><tr id="d248720e" class="ijRowEven"><td id="03f9e2f0"><p>能力</p></td><td id="7b4161d0"><p>序列</p></td><td id="07c35b97">窗口小部件在Web浏览器中支持的功能列表。这些属性通知安装窗口小部件的用户操纵浏览器行为的功能。支持以下属性：<div class="table-wrapper"><table class=" wide" width="100%" id="4d69bd0c"><thead><tr id="f6b27ad8" class="ijRowHead"><th id="d19c0980"><p>属性</p></th><th id="410fc2a6"><p>类型</p></th><th id="9990b6dc"><p>描述</p></th></tr></thead><tbody><tr id="8192e7f8" class="ijRowOdd"><td id="ae273483"><p>弹出窗口</p></td><td id="6c7267ad"><p>布尔型</p></td><td id="a0522c86"><p>什么时候<code class="code">true</code> ，该小部件能够显示警报并在新的浏览器标签或窗口中打开链接。当小部件使用<code class="code">target="_blank"</code>一个或多个链接的属性，使用<code class="code">window.open()</code>方法，或使用<code class="code">alert()</code>方法。</p></td></tr><tr id="3aef456b" class="ijRowEven"><td id="479eab49"><p>顶部导航</p></td><td id="59a235d0"><p>布尔型</p></td><td id="014f649a"><p>什么时候<code class="code">true</code> ，该小部件能够在浏览器窗口中打开链接作为顶部文档，从而远离当前页面。当小部件使用<code class="code">target="_parent"</code>要么<code class="code">target="_top"</code>一个或多个链接的属性。</p></td></tr></tbody></table></div>                </td><td id="806c590d"><p>可选的</p></td></tr></tbody></table></div>        <p id="db2df878">以下示例显示了如何在JSON文件中定义每个属性。要构建自己的清单，请复制此示例，将其粘贴到编辑器中，然后用您自己的示例属性替换。</p>        <div class="code-block" data-lang="json">{“键”：“ some-widget”，“版本”：“ 1.0”，“名称”：“显示名称”，“描述”：“做某事的小部件”，“作者”：“ Dee Veloper <dee.veloper@gmail.com>”，“ homeUrl“：” https://github.com/huston007/some-widget“，” applicationName“：” YouTrack“，” iconUrl“：” static / icon.svg“，” dependencies“：{” YouTrack“：”> 2017.1“，” Hub“：”> 3.0“}，”产品“：{” Hub“：”> = 2018.1“，” Upsource“：”> = 2018.1“，” YouTrack“：”> = 2018.1“}，” view“：{” fadeOut“：true，” defaultWidth“：3，” defaultHeight“：2}，” capabilities“：{” popups“：true，” topNavigation“：true}}</dee.veloper@gmail.com></div>    </div>    <div class="chapter"><h2 id="widget-compatibility" data-toc="building-custom-widgets#widget-compatibility">小部件兼容性</h2>        <p id="d9dad13c">窗口小部件清单中有两个部分，用于定义窗口小部件是否与安装兼容以及与其连接的服务。使用此处提供的信息相应地设置清单中的值。</p>        <div class="chapter"><h3 id="widget-dependencies">依存关系</h3>            <p id="f3e69327">的<code class="code">dependencies</code>部分包含小部件向其发送HTTP请求的服务的列表。如果这些服务未连接到YouTrack安装，则该小部件没有任何要显示的数据。</p>            <p id="dbd04757">在某些情况下，您的HTTP请求要求所连接的服务使用特定的API版本。为了正常运行，您的窗口小部件需要指定支持该请求的最低版本号。</p>        </div>        <div class="chapter"><h3 id="widget-products">产品展示</h3>            <p id="b96e31e9">的<code class="code">products</code>部分列出了可将其安装到其中的产品。在这里，版本控制取决于产品本身支持的仪表板API的版本。</p>            <p id="8b1b3694">新的次要Hub版本正式支持仪表板API扩展。新的次要版本的YouTrack和Upsource也包含这些更改。</p>            <p id="ee886310">例如，如果窗口小部件使用在Hub 2018.1发行后添加的方法，则可以在Hub版本2018.2及更高版本中安装该窗口小部件。参考资料中对YouTrack和Upsource的引用<code class="code">products</code>本节还应要求2081.2为安装的最低版本。</p>        </div>    </div>    <div class="chapter"><h2 id="widget-size-limitations" data-toc="building-custom-widgets#widget-size-limitations">大小限制</h2>        <p id="3b96f042">为了保护您的安装免受恶意归档软件包的侵扰，集线器会阻止太大或包含太多文件的上载。这些限制适用于所有上载，包括从JetBrains插件存储库下载的自定义窗口小部件。每个小部件软件包都受以下限制：</p>        <ul class="list _ul"><li class="list__item" id="0157bd17"><p>ZIP存档本身不能大于10 MB。</p></li><li class="list__item" id="9776e36a"><p>存档中的单个未压缩文件不能大于30 MB。</p></li><li class="list__item" id="fb092023"><p>ZIP存档不能包含超过1000个文件。</p></li></ul>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Time-Tracking-REST-API.html">时间跟踪REST API</a> <a class="navigation-links__next" href="custom-widget-tutorial.html">自定义小部件教程</a></div><div id="disqus_thread" data-skip-index="skip"></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>