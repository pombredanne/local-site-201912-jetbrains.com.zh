<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>时间表规则-帮助| YouTrack单机版</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="on-schedule-rules" data-breadcrumbs="Administration.xml|Administration/Workflow-Guide.xml|Workflows/Workflow-Rules.xml|Workflow Rule Types/on-schedule-rules.xml|On-schedule Rules" data-main-title="On-schedule Rules"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索YouTrack独立帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="on-schedule-rules.xml" data-toc="on-schedule-rules">时间表规则</h1>  <p id="8f7c71e3"><span class="control">时间表上的</span>规则定义了一组更改，这些更改根据设置的时间表应用。例如，您可以定期检查特定属性值的问题并通知用户或组。这些规则替换了旧工作流程中使用的<span class="control">计划</span>规则。</p>  <p id="710de036">时间表规则由特殊的工作流程用户执行。这是被授予全套权限的系统用户帐户。该帐户的权限无法修改。工作流用户帐户不包括在许可证限制中，也不显示在用户列表中。</p>    <div class="chapter"><h2 id="sample-on-schedule-rule">时间表规则样本</h2>    <p id="6583467c">该规则每天10:00执行。该规则检查分配的未解决问题，并在“ <span class="control">到期日期”</span>字段中包含一个值。如果到期日期是过去的日期，则将通知发送给受让人。</p>    <div class="code-block" data-lang="javascript">var实体= require（'@ jetbrains / youtrack-scripting-api / entities'）; Exports.rule =实体。Issue.onSchedule（{title：'到期日到期时通知受让人'，搜索：'#Unresolved has：受让人具有：{Due Date}'，cron：'0 0 10 * *？'，mutantUpdateNotifications：false，guard：function（ctx）{返回ctx.issue.fields。DueDate <Date.now（）; }，动作：function（ctx）{var issue = ctx.issue;问题域。Assignee.notify（'[YouTrack]过期'，'问题'+ issue.id +'过期。'）; }，要求：{受让人：{类型：实体。User.fieldType}，DueDate：{类型：实体。Field.dateType，名称：“到期日”}}}）；</div>    <p id="7719146a">定义此计划内规则的组件如下：</p>    <ul class="list _ul"><li class="list__item" id="f23a7b5c"><p>同样，脚本以<code class="code">require</code>引用工作流API中的实体模块的语句。这意味着可以使用以下命令在此脚本中访问此模块中包含的所有内容。 <code class="code">entities</code>变量。</p></li><li class="list__item" id="75975b17"><p>对于此规则， <code class="code">exports.rule</code>属性使用<code class="code">Issue.onSchedule</code>方法。这会将声明后的脚本作为计划规则导出。</p></li><li class="list__item" id="82a0a79a"><p id="7b2711b7">规则主体本身包含以下属性的定义：</p>        <div class="table-wrapper"><table width="100%" id="913127df"><thead><tr id="224e63e4" class="ijRowHead"><th id="9fe0707c" width="20%"><p>属性</p></th><th id="e0786396"><p>描述</p></th></tr></thead><tbody><tr id="efb53fc5" class="ijRowOdd"><td id="d53649e5"><p>标题</p></td><td id="79492cea"><p>可选的人类可读标题。标题仅在管理界面中可见。</p></td></tr><tr id="4dfa92c8" class="ijRowEven"><td id="02adea34"><p>搜索</p></td><td id="e12e8115"><p id="81e19f2d">确定该规则要处理哪些问题的搜索查询。它可以是使用标准YouTrack搜索查询语法的字符串（请参阅<a href="Search-and-Command-Attributes.html">Search Query Reference</a> ），也可以是在每次触发规则时重新计算搜索字符串的函数。</p>              <p id="5060a8a8">使用函数时，请按名称引用。例如， <code class="code">search: getSearchExpression</code> 。</p>                <p id="7c84666a">强烈建议您使搜索表达式尽可能具体，而不要在操作内添加条件。</p></td></tr><tr id="cf2c2d2c" class="ijRowOdd"><td id="cbd43fc5"><p>克朗</p></td><td id="a8312981"><p id="7b1e97a8">应用规则的时间表，以<a href="http://www.quartz-scheduler.org/documentation/quartz-2.3.0/tutorials/crontrigger.html" rel="noopener noreferrer" data-external="true" target="_blank">Java cron表达式</a>指定。</p>              <p id="9c90ea34">在此示例中，表达式每天在为YouTrack服务器设置的时区中的10:00触发此规则。</p>                          </td></tr><tr id="72e7a009" class="ijRowEven"><td id="a27d28dc"><p>MutantUpdateNotifications</p></td><td id="90fb3ef6"><p id="e4e49a09">一个标志，用于确定是否针对此规则应用的更改发送更新通知。如果要应用更新而不发送通知，请设置为<code class="code">true</code> 。</p>              <p id="a20bb288">什么时候<code class="code">true</code>此属性还禁止在同一事务中应用级联更改的通知。例如，当按计划规则应用的更新触发来自一个或多个按变更规则的更新时，整个更改集将以静默方式应用。</p>              <p id="c1bbadb1">此属性的值不影响显式发送的通知，就像在本示例中使用的<span class="control">.notify</span>方法一样。</p>              <p id="4a383e35">此属性与此示例无关，因为该规则不应用任何问题更改。即使设置为<code class="code">true</code> ，即使用<code class="code">.notify</code>方法仍在交付。</p></td></tr><tr id="c5b39634" class="ijRowOdd"><td id="b7bea220"><p>守护</p></td><td id="1085279b"><p>确定执行规则的条件的功能。如果不满足保护条件，则规则中指定的操作不适用于问题。</p></td></tr><tr id="4a29f24a" class="ijRowEven"><td id="4f2d87f7"><p>行动</p></td><td id="9cc927f4"><p id="83907295">应应用于与搜索条件匹配的每个问题的操作。针对每个问题分别触发此操作。操作本身由工作流用户帐户执行。</p>              <p id="a11e4a0d">在此示例中，我们使用<code class="code">Assignee.notify</code>警告当前受让人该问题已过期的方法。</p></td></tr><tr id="8582a5fc" class="ijRowOdd"><td id="db2f996e"><p>要求</p></td><td id="f0c58a20"><p id="597bf9e2">规则无误执行所需的实体列表。此属性确保可以将规则安全地附加到项目。</p>              <p id="fef3e64f">在此示例中，要求确保“ <span class="control">受让人”</span>和“ <span class="control">到期日期”</span>字段都存储正确的类型，并且在规则所附加的项目中可用。如果缺少任何一个字段，则在“ <span class="control">工作流”</span>列表中显示错误。在附加必填字段之前，无法启用该规则。</p></td></tr></tbody></table></div></li></ul>  </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="on-change-rules.html">变更规则</a> <a class="navigation-links__next" href="state-machine-per-issue-type.html">状态机规则</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>