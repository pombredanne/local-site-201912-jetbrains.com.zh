<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta charset="UTF-8"><meta name="robots" content="noindex"><title>Streamline Issue Reporting - Help | YouTrack Standalone</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="streamline-issue-reporting-workflows"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search YouTrack Standalone Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>YouTrack Standalone 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="streamline-issue-reporting-workflows" id="streamline-issue-reporting-workflows.xml">Streamline Issue Reporting</h1>    <p id="288a7d5a">You can set up a basic issue reporting process without workflows.        It all starts with the configuration of the custom fields in your projects.        For most custom fields, you can choose whether the field can or cannot be empty.</p>        <p id="22ec950c">If the field is cannot be empty, you must assign a default value in the configuration.            This value is automatically assigned to each issue that is reported in the project.            Moreover, you cannot clear the value of the field, only replace it with another value.</p>    <p id="442bc98c">By defining whether fields can or cannot be empty and setting default values accordingly, you can effectively set the starting point for new issues in your project.</p>    <p id="60fa1802">While field configuration options are useful, they have some limitations.        There are a number of use cases that are not addressed by empty values and default values:</p>    <ul class="list _ul"><li class="list__item" id="eb6d9c0a"><p>You want to require a value in the <span class="control">Due Date</span> field.          Fields that store simple values (like string, integer, float, date, or period) cannot store a default value.          In new issues, these fields are always empty.</p></li><li class="list__item" id="072165bc"><p>You want reporters to set the value in a specific field without suggesting a default.          For example, you want to assign each task to a <span class="control">Subsystem</span>, but there isn’t a logical value that you would suggest as a default.</p></li><li class="list__item" id="e4f8fd36"><p>You want to set default values dynamically.          For example, you always want the <span class="control">Due Date</span> to be two weeks from today.</p></li><li class="list__item" id="5bd4fe37"><p>You want to provide your customers with a template for reporting issues.          The template contains predefined values for custom fields and a default description.</p></li><li class="list__item" id="a5f82243"><p>As an extension of the previous case, you want to provide your customers with a collection of templates for issues in the same project.          Each template varies based on the value that is selected for a custom field value (like <span class="control">Type</span>) or can be applied to a draft using menu actions.</p></li></ul>        <p id="6e700879">Support for these use cases can be implemented with various workflow rules, some of which are already available as default workflows in YouTrack.</p>  <div class="chapter"><h2 id="make-field-mandatory" data-toc="streamline-issue-reporting-workflows#make-field-mandatory">Make a Field Mandatory</h2>    <p id="b9b0c2da">The first case is about making simple fields mandatory for new issues. This case is addressed by the <code class="code">issue.fields.required(field, message)</code> method.      This method checks if the field is empty.      If it is, the current changes are rolled back and a message is shown to the reporter.      Check out the <code class="code">Require due dates for submitted issues</code> rule from the <a href="Workflow-Due-Date.html">Due Date</a> workflow:</p>    <div class="code-block" data-lang="javascript">var entities = require('@jetbrains/youtrack-scripting-api/entities');
var workflow = require('@jetbrains/youtrack-scripting-api/workflow');

exports.rule = entities.Issue.onChange({
  title: workflow.i18n('Require due dates for submitted issues'),
  guard: function(ctx) {
    return ctx.issue.becomesReported;
  },
  action: function(ctx) {
    ctx.issue.fields.required(ctx.DueDate,
      workflow.i18n('You must set the Due date!'));
  },
  requirements: {
    DueDate: {
      type: entities.Field.dateType,
      name: "Due Date"
    }
  }
});</div>  <aside class="note " data-title="Workflow Localization" rel="cce2877d" id="aa63dbd1"><br><br>    <p id="b8d7bf24">Default workflows in YouTrack use the <code class="code">workflow.i18n(...)</code> method to localize workflow messages.      When you write your own workflows, you always know the language of your YouTrack installation, so you don’t need to use this method.</p>    <p id="3456ee27">If you want to edit the messages in default workflows, remove this method and replace its usage with a plain string of message text.    For details, see <a href="Workflow-Localization.html">Localization</a>.</p>  </aside>    <p id="b928045d">Note the guard in this rule.      This guard ensures that the check is only initiated once, after the reporter has filled in the issue content and attempts to create the issue.</p>      <p id="c818d476">If you want to make it so the value for this field cannot be removed for submitted issues, update the guard as follows:</p>    <div class="code-block" data-lang="javascript">guard: function(ctx) {
  return ctx.issue.isReported;
},</div>    <p id="504e8831">The use case for making reporters set the value in a specific field is solved with the same kind of rule.      Simply take a custom field that can be empty and check whether it is empty or not when a new issue is reported.      The <code class="code">issue.fields.required(field, message)</code> method works the same for all types of custom fields.</p>  </div>  <div class="chapter"><h2 id="set-dynamic-defaults" data-toc="streamline-issue-reporting-workflows#set-dynamic-defaults">Set Dynamic Defaults</h2>    <p id="0be92ade">You can use workflows to calculate the default value for a field automatically.      For example, the following rule sets the value for the Due date field to a date that is two weeks from the current date:</p>    <div class="code-block" data-lang="javascript">var entities = require('@jetbrains/youtrack-scripting-api/entities');

var WEEK_IN_MS = 7 * 24 * 60 * 60 * 1000;

exports.rule = entities.Issue.onChange({
  title: 'Set Due Date on issue submitting',
  guard: function(ctx) {
    return ctx.issue.becomesReported &amp;&amp; !ctx.issue.fields.DueDate;
  },
  action: function(ctx) {
    ctx.issue.fields.DueDate = Date.now() + 2 * WEEK_IN_MS;
  },
  requirements: {
    DueDate: {
      type: entities.Field.dateType,
      name: 'Due Date'
    }
  }
});</div>  </div>  <div class="chapter"><h2 id="build-issue-templates" data-toc="streamline-issue-reporting-workflows#build-issue-templates">Build Issue Templates</h2>    <p id="ad8342ff">Another popular case that is supported by one of the default workflows adds a default description to new issues.      Here is how it is implemented in our <a href="Workflow-Default-Description.html">Default Description</a> workflow:</p>    <div class="code-block" data-lang="javascript">var entities = require('@jetbrains/youtrack-scripting-api/entities');
var workflow = require('@jetbrains/youtrack-scripting-api/workflow');

exports.rule = entities.Issue.onChange({
  title: workflow.i18n('Insert default description template for external users'),
  guard: function(ctx) {
    var issue = ctx.issue;
    return !issue.isReported &amp;&amp; !issue.becomesReported &amp;&amp; !issue.description;
  },
  action: function(ctx) {
    ctx.issue.description =
      workflow.i18n('What steps will reproduce the problem?') +
      "\n1.\n2.\n3.\n\n" +
      workflow.i18n("What is the expected result?") +
      "\n\n" +
      workflow.i18n("What happens instead?") +
      "\n\n" +
      workflow.i18n("Please provide any additional information below.") +
      "\n" +
      workflow.i18n("Attach a screenshot if possible") +
      "\n";
  },
  requirements: {}
});</div>    <p id="a0f3d9ed">This workflow rule sets the default description for each new issue.      This rule is triggered as soon as the reporter edits any value in the new issue, for example, typing a summary or changing the project.      Due to technical limitations, this rule can’t be applied at the moment when the <span class="control">New Issue</span> page opens.</p>      <p id="8a4cbcb2">You can extend this workflow to let reporters choose between different templates without filling in a lot of data manually.        For example, you can use different templates for feature requests and bug reports:</p>    <ul class="list _ul"><li class="list__item" id="08de81cd"><p>For bug reports, you require the steps to reproduce (STR) in the description.</p></li><li class="list__item" id="fd4d254a"><p>For features, you require the suggestion and motivation (what and why). You also want to set the value for the <span class="control">Fix versions</span> field to <span class="control">Backlog</span>.</p></li></ul>    <p id="60454874">For this case, the easiest approach consists of two parts:</p>    <ul class="list _ul"><li class="list__item" id="8169dc60"><p>Make the <span class="control">Type</span> field empty by default.</p></li><li class="list__item" id="bcc36dba"><p>Force setting the value for the <span class="control">Type</span> field when the reporter starts to create an issue:        <div class="code-block" data-lang="javascript">var entities = require('@jetbrains/youtrack-scripting-api/entities');

exports.rule = entities.Issue.onChange({
  title: 'Choose Type when new issue is created',
  guard: function(ctx) {
    var issue = ctx.issue;
    return !issue.isReported &amp;&amp; !issue.becomesReported &amp;&amp;
      !issue.fields.Type &amp;&amp; !issue.isChanged('project');
  },
  action: function(ctx) {
    ctx.issue.fields.required(ctx.Type, 'Please choose issue Type before editing!');
  },
  requirements: {
    Type: {
      type: entities.EnumField.fieldType
    }
  }
});</div>      </p></li><li class="list__item" id="f204169a"><p>Add a rule which sets the values based on the selection in the <span class="control">Type</span> field:        <div class="code-block" data-lang="javascript">var entities = require('@jetbrains/youtrack-scripting-api/entities');

exports.rule = entities.Issue.onChange({
  title: 'Set issue template based on Type',
  guard: function(ctx) {
    var issue = ctx.issue;
    return !issue.isReported &amp;&amp; !issue.becomesReported &amp;&amp; !issue.description &amp;&amp;
      issue.fields.isChanged(ctx.Type) &amp;&amp; !issue.fields.oldValue(ctx.Type);
  },
  action: function(ctx) {
    var issue = ctx.issue;

    var typeIs = function(value) {
      return issue.fields.Type.name === value.name;
    };

    if (typeIs(ctx.Type.Bug)) {
      issue.description =
        'What steps will reproduce the problem?' +
        '\n1.\n2.\n3.\n\n' +
        'What is the expected result?\n\n' +
        'What happens instead?\n';
    } else if (typeIs(ctx.Type.Feature)) {
      issue.description =
        'What should be implemented?\n\n' +
        'Why is this functionality required?\n';
      issue.fields.FixVersions.add(ctx.FixVersions.Backlog);
    }
  },
  requirements: {
    Type: {
      type: entities.EnumField.fieldType,
      Bug: {},
      Feature: {}
    },
    FixVersions: {
      type: entities.ProjectVersion.fieldType,
      multi: true,
      name: 'Fix versions',
      Backlog: {}
    }
  }
});</div>      </p></li></ul>  </div>  <div class="chapter"><h2 id="add-templates-to-actions-menu" data-toc="streamline-issue-reporting-workflows#add-templates-to-actions-menu">Add Templates to the Actions Menu</h2>    <p id="ec80519a">Another way to support this use case is to provide a list of templates in the form of actions.      Action rules are a special type of workflow rule.      Each action rule is associated with a command and an item in the list of actions that are shown in the <span class="control">Command Dialog</span> drop-down menu.      These rules are triggered when the user executes the command or clicks the corresponding item.      For details, see <a href="Workflow-Rules.html#action-rules">Action Rules</a>.</p>    <p id="3d411788">Here’s a sample action rule for the feature request template:</p>    <div class="code-block" data-lang="javascript">var entities = require('@jetbrains/youtrack-scripting-api/entities');

exports.rule = entities.Issue.action({
  title: 'Feature template',
  command: 'feature-template',
  guard: function(ctx) {
    var issue = ctx.issue;
    return !issue.isReported &amp;&amp; !issue.becomesReported &amp;&amp; !issue.description;
  },
  action: function(ctx) {
    var issue = ctx.issue;
    issue.description =
      'What should be implemented?\n\n' +
      'Why is this functionality required?\n';
    issue.fields.Type = ctx.Type.Feature;
    issue.fields.FixVersions.add(ctx.FixVersions.Backlog);
  },
  requirements: {
    Type: {
      type: entities.EnumField.fieldType,
      Feature: {}
    },
    FixVersions: {
      type: entities.ProjectVersion.fieldType,
      multi: true,
      name: 'Fix versions',
      Backlog: {}
    }
  }
});</div>    <p id="d62d036a">To make reporters select a template, first check if the description is empty.      If so, suggest that they choose a template from the menu.</p>    <div class="code-block" data-lang="javascript">var entities = require('@jetbrains/youtrack-scripting-api/entities');
var workflow = require('@jetbrains/youtrack-scripting-api/workflow');

exports.rule = entities.Issue.onChange({
  title: 'Choose a template when new issue is created',
  guard: function(ctx) {
    var issue = ctx.issue;
    return !issue.isReported &amp;&amp; !issue.becomesReported &amp;&amp; !issue.description;
  },
  action: function(ctx) {
    workflow.check(false, 'Please, choose one of templates in action menu!');
  },
  requirements: {
    Type: {
      type: entities.EnumField.fieldType
    }
  }
});</div>    <p id="8f80f8d8">The field-based approach is better for simple cases.      When you have complex templates that are defined by a combination of field values, use the action-based approach.</p>  </div><div class="last-modified" data-skip-index="skip">Last modified: 8 July 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="prevent-unwanted-updates-workflows.html">Prevent Unwanted Updates</a><a class="navigation-links__next" href="generate-issues-automatically-workflows.html">Generate Issues Automatically</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>