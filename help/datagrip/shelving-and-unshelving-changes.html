<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>搁置和搁置更改-帮助|帮助数据夹</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Shelving_and_Unshelving_Changes" data-article-props="
                {
                
            " seeals=":[=" titl=":=" referenc="}=" link=":=" ur=":" shelf-tab.htm="," tex=":" shelf="" ta="}=" version-control-reference.htm="," version="" control="" shelve-changes-dialog.htm="," shelve="" changes="" dialo="}=" unshelve-changes-dialog.htm="," unshelve="" ="url"="http:=" ="text"="developer=" }="" ]},="" ,="" ]}="" ]="" [windows or linux;macos=""><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索DataGrip帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>DataGrip 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_default_for_macos" data-group="primary">macOS的默认设置</option><option value="primary_intellij_idea_classic_macos" data-group="primary">IntelliJ IDEA经典版（macOS）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_sublime_text_macos" data-group="primary">崇高文字（macOS）</option><option value="secondary_default_for_windows" data-group="secondary">Windows的默认设置</option><option value="secondary_default_for_macos" data-group="secondary">macOS的默认设置</option><option value="secondary_intellij_idea_classic" data-group="secondary">IntelliJ IDEA经典版</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_sublime_text" data-group="secondary">崇高文字</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Shelving_and_Unshelving_Changes.xml" data-toc="Shelving_and_Unshelving_Changes">搁置和搁置更改</h1>        <a name="shelve-unshelve changes"></a>            <p id="1d0cf860">搁置架暂时存储您尚未提交的未决更改。例如，如果您需要切换到另一个任务，并且希望将更改保留在一边以在以后进行处理，这将很有用。</p>            <p id="5953ec5a">使用DataGrip，您可以搁置单独的文件和整个<span title="您尚未提交给VCS的一组本地更改。对项目文件的所有更改都将自动放置在活动更改列表中（通常是默认更改列表）。" class="tooltip">变更列表</span> 。</p>            <p id="b67df9ff">搁置后，可以根据需要多次应用更改。</p>                <section class="procedure-steps"><h3 id="ChList">搁置更改</h3><ol class="list _decimal"><li class="list__item" id="f428452d"><p>打开<span class="control">版本控制</span>工具窗口<kbd data-primary_default_for_windows="Alt+9" data-primary_default_for_macos="⌘+9" data-primary_intellij_idea_classic_macos="⌘+9" data-primary_emacs="Alt+9" data-primary_default_for_xwin="Alt+9" data-primary_default_for_gnome="Alt+9" data-primary_default_for_kde="Alt+9" data-primary_sublime_text="Alt+9" data-primary_sublime_text_macos="⌘+9" data-secondary_default_for_windows="⌥9" data-secondary_default_for_macos="⌘9" data-secondary_intellij_idea_classic="⌘9" data-secondary_emacs="⌥9" data-secondary_default_for_xwin="⌥9" data-secondary_default_for_gnome="⌥9" data-secondary_default_for_kde="⌥9" data-secondary_sublime_text="⌥9" data-secondary_sublime_text_macos="⌘9">Alt+9</kbd>并切换到“ <span class="control">本地更改”</span>标签。</p></li><li class="list__item" id="19f014c6"><p>右键单击要放在架子上的文件或<span class="control">更改列表，然后</span>从上下文菜单中选择“ <span class="control">搁置更改</span> ”。</p></li><li class="list__item" id="3315ab26"><p>在“ <span class="control">搁置更改”</span>对话框中，查看已修改文件的列表。</p></li><li class="list__item" id="88cd71f5"><p>在“ <span class="control">提交消息”</span>字段中，输入要创建的架子的名称，然后单击“ <span class="control">搁置更改”</span>按钮。</p></li></ol><p id="shelve-silently">您也可以静默搁置更改，而无需显示“ <span class="control">搁置更改”</span>对话框。为此，请选择要搁置的文件或更改列表，然后单击“ <span class="control">静默搁置”</span>图标<img class="inline-icon-16" src="/help/img/idea/2019.2/icons.vcs.shelveSilent.svg@2x.png" width="16" alt="默默搁置">在工具栏上，或按<kbd data-primary_default_for_windows="Ctrl+Alt+H" data-primary_default_for_macos="Ctrl+Alt+H" data-primary_intellij_idea_classic_macos="Ctrl+Alt+H" data-primary_emacs="Ctrl+Alt+H" data-primary_default_for_xwin="Ctrl+Alt+H" data-primary_default_for_gnome="Ctrl+Alt+H" data-primary_default_for_kde="Ctrl+Alt+H" data-primary_sublime_text="Ctrl+Alt+H" data-primary_sublime_text_macos="Ctrl+Alt+H" data-secondary_default_for_windows="⌃⌥H" data-secondary_default_for_macos="⌃⌥H" data-secondary_intellij_idea_classic="⌃⌥H" data-secondary_emacs="⌃⌥H" data-secondary_default_for_xwin="⌃⌥H" data-secondary_default_for_gnome="⌃⌥H" data-secondary_default_for_kde="⌃⌥H" data-secondary_sublime_text="⌃⌥H" data-secondary_sublime_text_macos="⌃⌥H">Ctrl+Alt+H</kbd> 。包含要搁置的更改的更改列表的名称将用作架子名称。</p><p id="4ae4f53e">为避免结成多个同名的架子（例如<span class="control">Default</span> ），您可以将文件或<span class="control">更改</span>列表从“ <span class="control">本地更改”</span>选项卡拖到“ <span class="control">架子”</span>选项卡，等待一秒钟直到它被激活，然后编辑新的架子释放鼠标按钮时即时命名。</p></section>                                <section class="procedure-steps"><h3 id="unshelve-changes">搁置更改</h3><p id="d19de63e">搁置正在将已推迟的更改从磁盘架移至待处理的更改列表。搁置的更改可以从视图中过滤掉或从架子上删除。</p><ol class="list _decimal"><li class="list__item" id="a8f3666a"><p>在“ <span class="control">版本控制”</span>工具窗口的“ <span class="control">货架”</span>选项卡中，选择一个更改列表或您要搁置的文件。</p></li><li class="list__item" id="a10cbda0"><p>按<kbd data-primary_default_for_windows="Ctrl+Shift+U" data-primary_default_for_macos="Shift+⌘+U" data-primary_intellij_idea_classic_macos="Shift+⌘+U" data-primary_emacs="Ctrl+Shift+U" data-primary_default_for_xwin="Ctrl+Shift+U" data-primary_default_for_gnome="Ctrl+Shift+U" data-primary_default_for_kde="Ctrl+Shift+U" data-primary_sublime_text="Ctrl+Shift+U" data-primary_sublime_text_macos="Shift+⌘+U" data-secondary_default_for_windows="⌃⇧U" data-secondary_default_for_macos="⇧⌘U" data-secondary_intellij_idea_classic="⇧⌘U" data-secondary_emacs="⌃⇧U" data-secondary_default_for_xwin="⌃⇧U" data-secondary_default_for_gnome="⌃⇧U" data-secondary_default_for_kde="⌃⇧U" data-secondary_sublime_text="⌃⇧U" data-secondary_sublime_text_macos="⇧⌘U">Ctrl+Shift+U</kbd>或从所选内容的上下文菜单中选择“ <span class="control">搁置</span> ”。</p></li><li class="list__item" id="5fc4b6a8">                        <p id="cd573300">在打开的“取消搁置的<span class="control">更改”</span>对话框中，在“ <span class="control">名称”</span>字段中指定要将未搁置的更改还原到的更改列表。您可以从列表中选择一个现有的更改列表，或为要创建的包含未搁置更改的新更改列表键入名称。您可以在“ <span class="control">注释”</span>字段（可选）中输入新变更列表的描述。</p>                        <p id="bdc588d6">如果要使新变更列表处于活动状态，请选择<span class="control">设置活动选项</span> 。否则，当前活动的更改列表将保持活动状态。</p>                    </li><li class="list__item" id="95a897f7"><p>如果你想DataGrip保留在其停用了新的修改相关联的任务的<span title="上下文是与变更列表关联的一组打开的文件。" class="tooltip">上下文</span>和恢复的背景下，当变更列表变得活跃，选中<span class="control">跟踪上下文</span>选项。</p></li><li class="list__item" id="ae64d1ea">                        <p id="2030aae1">如果要删除将要搁置的更改，请选择“ <span class="control">从架子中删除成功应用的文件”</span>选项。未搁置的文件将从此架子中删除，并添加到另一个变更列表中，并标记为已应用。在通过单击将其明确删除之前，它们不会被完全删除。 <img class="inline-icon-16" src="/help/img/idea/2019.2/icons.actions.gc.svg@2x.png" width="16" alt="删除图标">在工具栏上，或从上下文菜单中选择“ <span class="control">清理已搁置的书架</span> ”。</p>                        <aside class="note " rel="2030aae1" id="54d339a4" data-title="">                            <p id="1adff5c9">如果您意外删除了未搁置的文件，则可以从“ <span class="control">最近删除”</span>节点中查看和还原它们。</p>                        </aside>                    </li><li class="list__item" id="381ec70b"><p>单击<span class="control">确定</span> 。如果修补程序版本和当前版本之间发生冲突，请按照<a href="resolving-conflicts.html">解决冲突中</a>所述解决它们。</p></li></ol><p id="unshelve-silently">您可以静默取消搁置更改，而无需显示“取消搁置<span class="control">更改”</span>对话框。为此，请选择要取消搁置的文件或更改列表，然后单击“ <span class="control">静默</span>取消搁置”图标<img class="inline-icon-16" src="/help/img/idea/2019.2/icons.vcs.unshelveSilent.svg@2x.png" width="16" alt="静默地搁浅图标">在工具栏上，或按<kbd data-primary_default_for_windows="Ctrl+Alt+U" data-primary_default_for_macos="Alt+⌘+U" data-primary_intellij_idea_classic_macos="Alt+⌘+U" data-primary_emacs="Ctrl+Alt+U" data-primary_default_for_xwin="Ctrl+Alt+U" data-primary_default_for_gnome="Ctrl+Alt+U" data-primary_default_for_kde="Ctrl+Alt+U" data-primary_sublime_text="Ctrl+Alt+U" data-primary_sublime_text_macos="Alt+⌘+U" data-secondary_default_for_windows="⌃⌥U" data-secondary_default_for_macos="⌥⌘U" data-secondary_intellij_idea_classic="⌥⌘U" data-secondary_emacs="⌃⌥U" data-secondary_default_for_xwin="⌃⌥U" data-secondary_default_for_gnome="⌃⌥U" data-secondary_default_for_kde="⌃⌥U" data-secondary_sublime_text="⌃⌥U" data-secondary_sublime_text_macos="⌥⌘U">Ctrl+Alt+U</kbd> 。未搁置的文件将被移至活动的挂起变更列表。</p><p id="256d8c8b">您也可以将文件或<span class="control">更改</span>列表从“ <span class="control">货架”</span>选项卡拖动到“ <span class="control">本地更改”</span>选项卡以静默取消搁置。如果您按住它拖动<kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Ctrl</span></kbd>键，它将被复制到“ <span class="control">本地更改”</span>标签，而不是从机架中删除。</p></section>                <section class="procedure-steps"><h3 id="restore-unshelved">恢复搁置的更改</h3><p id="811b5a9e">DataGrip使您可以在必要时重新应用未搁置的更改。所有未搁置的更改都可以重复使用，直到通过单击<img class="inline-icon-16" src="/help/img/idea/2019.2/icons.actions.gc.svg@2x.png" width="16" alt="删除搁置的更改">工具栏上的图标，或从上下文菜单中选择“ <span class="control">清理已搁置</span>的<span class="control">已搁置</span> ”。</p><ol class="list _decimal"><li class="list__item" id="c09156d8"><p>确保<span class="control">节目已被搁置</span> <img class="inline-icon-16" src="/help/img/idea/2019.2/icons.vcs.patch_applied.svg@2x.png" width="16" alt="显示已显示未搁置按钮">工具栏选项已启用。</p></li><li class="list__item" id="efbf9ef9"><p>选择要还原的文件或文件架。</p></li><li class="list__item" id="f6837162"><p>从选择的上下文菜单中，选择<span class="control">“还原”。</span>                    </p></li></ol></section>                <section class="procedure-steps"><h3 id="external-patches">应用外部补丁</h3><p id="df10d542">您可以导入在DataGrip内部或外部创建的补丁，并将其应用为搁置的更改。</p><ol class="list _decimal"><li class="list__item" id="b89368b4"><p>在“ <span class="control">版本控制”</span>工具窗口的“ <span class="control">货架”</span>选项卡中，从上下文菜单中选择“ <span class="control">导入补丁</span> ”。</p></li><li class="list__item" id="7aa8fb74"><p>在打开的对话框中，选择要应用的补丁文件。选定的色块将在<span class="control">架子上</span>显示为架子。</p></li><li class="list__item" id="e9c1162d"><p>选择带有补丁的新添加的架子，然后从所选内容的上下文菜单中选择“ <span class="control">取消</span>搁置<span class="control">更改</span> ”。</p></li></ol></section>                <section class="procedure-steps"><h3 id="automatically-shelve-base-revision">自动搁置基础修订</h3><p id="37654ead">将DataGrip配置为始终搁置受Git版本控制的文件的基本修订版可能会很有用。</p><ol class="list _decimal"><li class="list__item" id="dc29d2ad">                        <p id="fbf51cef">                            <a name="open_settings"></a>在“ <span class="control">设置/首选项”</span>对话框中（ <kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd> ），选择<span class="control">版本控制|货架</span> 。</p>                    </li><li class="list__item" id="ee171dfe">                        <p id="e953e673">选择“ <span class="control">在分布式版本控制系统下搁置文件的基本修订”</span>选项。</p>                        <p id="3ff7a8b3">如果启用此选项，则文件的基本修订版将保存到文件架中，如果应用架子导致冲突，则该文件将在<a href="https://en.wikipedia.org/wiki/Merge_(version_control)#Three-way_merge" rel="noopener noreferrer" data-external="true" target="_blank">三路合并</a>期间使用。如果禁用，DataGrip将在项目历史记录中查找基本修订，这可能需要一段时间；此外，可能会遗漏有冲突的架子所基于的修订版本（例如，如果由于进行了变基操作而更改了历史记录）。</p>                    </li></ol></section>                <section class="procedure-steps"><h3 id="change-shelve-location">更改默认的货架位置</h3><p id="0016963a">默认情况下，架子目录位于您的项目目录下。但是，您可能要更改默认的架子位置。例如，如果您要避免在清理工作副本时意外删除架子，或者要将它们存储在一个单独的存储库中，以允许团队成员共享架子，这将很有用。</p><ol class="list _decimal"><li class="list__item" id="1e09f691"><p>打开<span class="control" data-section="Windows or Linux">设置</span> <span class="control" data-section="macOS">首选项</span>对话框<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd>然后选择<span class="control">版本控制|</span>左侧的<span class="control">货架</span>节点。</p></li><li class="list__item" id="e7f349f4"><p>单击<span class="control">更改货架位置</span>按钮，然后在打开的对话框中指定新位置。</p></li><li class="list__item" id="b66b3f5e"><p>如有必要，请选择<span class="control">将书架移至新位置</span>选项，以将现有书架移至新目录。</p></li></ol></section>            <p id="7b04ee95">观看此视频教程，了解如何从货架中受益，从而能够切换到其他任务而又不会丢失未完成的工作：</p>            <div class="video-player"><object width="600" height="400" type="application/x-shockwave-flash" data="//www.youtube.com/v/Zb8k8q8n8Ao?color2=FBE9EC&rel=0&hd=1&autoplay=0&version=3&modestbranding=1&fs=1"><param name="movie" value="//www.youtube.com/v/Zb8k8q8n8Ao?color2=FBE9EC&rel=0&hd=1&autoplay=1&version=3&modestbranding=1&fs=1"><param name="allowFullScreen" value="true"><param name="msallowFullScreen" value="true"><param name="webkitallowFullScreen" value="true"><param name="mozallowFullScreen" value="true"><param name="oallowFullScreen" value="true"><param name="allowscriptaccess" value="always"></object></div>          <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月11日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="managing-changelists.html">管理变更列表</a> <a class="navigation-links__next" href="using-patches.html">使用补丁</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>