<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>配置构建约束和供应商-帮助|帮助高地</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Configuring build constraints and vendoring" data-breadcrumbs="Configuring projects/Configuring build constraints and vendoring.xml|Configuring build constraints and vendoring" data-main-title="Configuring build constraints and vendoring"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索GoLand帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>GoLand 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows默认</option><option value="primary_default_for_macos" data-group="primary">macOS的默认设置</option><option value="primary_intellij_idea_classic_macos" data-group="primary">IntelliJ IDEA经典版（macOS）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_macos" data-group="primary">Eclipse（macOS）</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_sublime_text_macos" data-group="primary">崇高文字（macOS）</option><option value="secondary_default_for_windows" data-group="secondary">Windows默认</option><option value="secondary_default_for_macos" data-group="secondary">macOS的默认设置</option><option value="secondary_intellij_idea_classic" data-group="secondary">IntelliJ IDEA经典版</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_macos" data-group="secondary">Eclipse（macOS）</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_sublime_text" data-group="secondary">崇高文字</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Configuring build constraints and vendoring.xml" data-toc="Configuring build constraints and vendoring">配置构建约束和供应商</h1>    <p id="9b66f010">构建约束条件和供应商模式是可用于微调构建过程的工具。利用构建约束，您可以定义文件包含在包中的规则。启用供应商模式后，仅使用存储在项目中的依赖项程序包构建应用程序。因此，您只能在包中包含一组特定的文件，并使用您在本地修改或打补丁的依赖项。</p>    <div class="chapter"><h2 id="build-constraints" data-toc="Configuring build constraints and vendoring#build-constraints">构建约束</h2>        <p id="55062c56">生成约束或生成标记是一行注释，其中列出了将文件包含在包中的条件。这些标签可以描述操作系统，体系结构，Go版本，编译器，CGO支持或目标系统的任何其他要求。在以下示例中，我们声明该文件适用于具有以下要求的目标系统：Linux，AMD64体系结构，1.12 Go版本，并且不支持CGO。</p>        <figure><img alt="构建约束" title="构建约束" src="/help/img/idea/2019.3/go_example_build_constraints.png" id="a7b55872" class=" _border-line" width="521" height="598"></figure>        <p id="ed62c2bd">GoLand可以使用这些约束条件来确定在验证，解析和符号建议期间必须忽略哪些文件。如果文件不满足目标系统的要求，GoLand将显示一条通知。</p>        <figure><img alt="关于构建约束的通知" title="关于构建约束的通知" src="/help/img/idea/2019.3/go_example_build_constraints_invalid.png" id="1828957a" class=" _border-line" width="661" height="656"></figure>        <section class="procedure-steps"><h3 id="configure-build-constraints-for-your-project">配置项目的构建约束</h3><p id="8d338ea2">您在设置中定义的选项描述了项目的目标系统。</p><ol class="list _decimal"><li class="list__item" id="48a29959"><p>打开设置 （ <kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd> ）并导航到<span class="menupath" data-skip-index="skip">Go |建立标签和供应商</span> 。</p></li><li class="list__item" id="e543e912"><p>从下拉列表中，选择目标系统的期望值。如果有任何自定义标签，请在“ <span class="control">自定义标签”</span>字段中指定它们（使用标签之间的空格作为分隔符）。</p></li><li class="list__item" id="f7fec21f"><p>单击<span class="control">确定</span> 。</p></li></ol><figure><img alt="配置项目的构建约束" title="配置项目的构建约束" src="/help/img/idea/2019.3/go_configure_project_build_contraints.png" id="d5dafdd7" class=" _border-line" width="700" height="1130"></figure></section>    </div>    <div class="chapter"><h2 id="vendoring" data-toc="Configuring build constraints and vendoring#vendoring">供应商</h2>        <section class="procedure-steps"><h3 id="ff7a93dc">为Go模块启用供应模式</h3><a name="enable_vendoring_mode_vgo"></a><p id="8c660670">启用<span class="filepath">供应商</span>模式后，仅使用存储在项目中<span class="filepath">供应商</span>目录下的依赖项软件包来构建应用程序。在这种模式下，Go命令将忽略<span class="filepath">go.mod中的</span>依赖项描述，并假定<span class="filepath">供应商</span>目录包含正确的依赖项副本。默认情况下，当您使用Go模块时，在构建过程中将忽略<span class="filepath">供应商</span>目录。</p><ol class="list _decimal"><li class="list__item" id="f0cd4594"><p>在设置中<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd> ％project_type％项目中，导航到<span class="control">Go | ％project_type％</span> 。</p></li><li class="list__item" id="6e342a3c"><p id="e9d4aa59">选择<span class="control">供应商模式</span>复选框，然后单击<span class="control">确定</span> 。</p>            <figure><img alt="启用供应商模式" title="启用供应商模式" src="/help/img/idea/2019.3/go_enable_vendoring_mode.png" id="6770ccc8" class=" _border-line" width="619" height="396"></figure>        </li></ol></section>        <section class="procedure-steps"><h3 id="enable-vendoring-support-for-go-1-5">为Go 1.5启用供应商支持</h3><p id="9ef11069">如果您为Go 1.5启用了供应商支持，则GoLand会根据<a href="https://go.googlesource.com/proposal/+/master/design/25719-go15vendor.md" rel="noopener noreferrer" data-external="true" target="_blank">Go Vendoring Experiment Proposal</a>解析并完成符号。</p><ol class="list _decimal"><li class="list__item" id="ffce87b5"><p>打开设置 （ <kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd> ）并导航到<span class="menupath" data-skip-index="skip">Go | GOROOT</span> 。确保GOROOT使用Go 1.5。</p></li><li class="list__item" id="6350b4db"><p>导航到<span class="menupath" data-skip-index="skip">|建立标签和供应商</span> 。</p></li><li class="list__item" id="cf9f9e99"><p>从“ <span class="control">启用供应商”</span>列表中，选择“ <span class="control">启用”</span> 。</p></li></ol><figure><img alt="为Go 1.5启用供应商支持" title="为Go 1.5启用供应商支持" src="/help/img/idea/2019.3/go_enable_vendoring_for_go115.png" id="7514bb54" class=" _border-line" width="700" height="1130"></figure></section>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="configuring-goroot-and-gopath.html">配置GOROOT和GOPATH</a> <a class="navigation-links__next" href="content-root.html">内容根</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>