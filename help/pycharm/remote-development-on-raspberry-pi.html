<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>教程：在Raspberry Pi上进行远程开发-帮助|帮助PyCharm</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Remote_Development_on_Raspberry_Pi"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索PyCharm帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PyCharm 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_intellij_idea_classic_macos" data-group="primary">IntelliJ IDEA经典版（macOS）</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_default_for_xwin_windows" data-group="primary">XWin的默认设置（Windows）</option><option value="secondary_default_for_macos" data-group="secondary">macOS的默认设置</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_default_for_xwin_macos" data-group="secondary">XWin的默认设置（macOS）</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Remote_Development_on_Raspberry_Pi.xml" data-toc="Remote_Development_on_Raspberry_Pi">教程：在Raspberry Pi上进行远程开发</h1><div class="chapter"><h2 id="intro" data-toc="Remote_Development_on_Raspberry_Pi#intro">介绍</h2>    <p id="ace567b8">我们都知道ISP有过分推销其连接的习惯，这有时会使我们的连接不如我们希望的那样好。同样，我们许多人都在等待树莓派的酷项目。因此，让我们使用Pi来检查我们的互联网连接！</p>    <p id="fa623c13">互联网连接的关键指标之一是对互联网上其他主机的ping时间。因此，让我们编写一个可以定期ping其他主机并记录结果的程序。</p>    <p id="6508e8f0">对于那些想要在其他远程计算机（例如AWS实例或DigitalOcean Droplet）上远程执行代码的人，过程是完全相同的。</p>    <p id="9d337179">本教程已在Windows上创建，并且代码已在RPi（Linux计算机）上执行。在其他受支持的操作系统上，某些路径和工作流程可能会略有不同。</p></div><div class="chapter"><h2 id="prereq" data-toc="Remote_Development_on_Raspberry_Pi#prereq">在你开始前</h2>    <p id="76240761">要执行本教程，请确保您满足以下先决条件：</p>    <ul class="list _ul"><li class="list__item" id="b39f638d"><p>您拥有PyCharm的专业版。</p></li><li class="list__item" id="10679a92"><p>该代码将在任何Linux机器上运行。您也可以使用本地VM。</p></li></ul>    <p id="install-additional-software">您还需要一些其他软件：</p>    <ul class="list _ul"><li class="list__item" id="fa0c83c9"><p><span class="emphasis">PostgreSQL</span> ，因为它将用于创建数据库。</p></li><li class="list__item" id="0f695799"><p><span class="emphasis">Libpq-dev</span> ，是<span class="emphasis">Psycopg2</span>所需的。</p></li><li class="list__item" id="bb1455a4"><p><span class="emphasis">Python-dev</span> ，需要编译<span class="emphasis">Psycopg2</span> 。</p></li></ul>    <p id="4b69d630">要一次安装所有这些，请运行以下命令：</p>    <div class="code-block" data-lang="bash">sudo apt-get更新&& sudo apt-get安装-y postgresql libpq-dev python-dev</div></div><div class="chapter"><h2 id="raspberry-ping" data-toc="Remote_Development_on_Raspberry_Pi#raspberry-ping">覆盆子坪</h2>        <p id="4637ae41">我们将构建的应用程序包括两部分：</p>            <ul class="list _ul"><li class="list__item" id="f8d65e7c"><p><span class="control">首先</span> ，我们实际进行测量。要衡量结果，我们可以仅调用每台Linux机器（包括Raspberry Pi）随附的ping命令行工具。然后，我们将结果存储在PostgreSQL数据库中。</p></li><li class="list__item" id="d83e0459"><p><span class="control">其次</span> ，我们将使用Flask应用程序可视化结果，该应用程序使用Matplotlib绘制最近结果的图形。</p></li></ul>    </div><div class="chapter"><h2 id="prepare" data-toc="Remote_Development_on_Raspberry_Pi#prepare">准备您的Raspberry Pi</h2>    <p id="c2930ed4">因为我们希望以后可以查看带有结果的网页，所以重要的是在我们的网络中为Pi提供固定的IP。为此，请编辑<span class="filepath">/ etc / network / interfaces</span> 。有关其他详细信息，请参见<a href="https://thepihut.com/blogs/raspberry-pi-tutorials/16683276-how-to-setup-a-static-ip-address-on-your-raspberry-pi" rel="noopener noreferrer" data-external="true" target="_blank">本教程</a> 。</p>    <p id="aff4b659">将Pi设置为使用静态IP后，请使用<code class="code">raspi-config</code>在命令行上。转到“ <span class="control">高级选项”</span> ，选择“ <span class="control">SSH”</span> ，然后选择“ <span class="control">是”</span> 。完成此操作后，就可以开始使用PyCharm了。</p></div><div class="chapter"><h2 id="creating-project" data-toc="Remote_Development_on_Raspberry_Pi#creating-project">建立专案</h2>        <p id="fcb0d282">创建一个纯Python项目：为此，选择<span class="menupath" data-skip-index="skip">File |新项目</span> 。将项目命名为“ raspberry.pi”。请参阅<a href="creating-empty-project.html">创建纯Python项目</a> 。</p>                <p id="1d392947">然后按照<a href="configuring-remote-interpreters-via-ssh.html">使用SSH配置</a>远程解释器中所述添加SSH远程解释<a href="configuring-remote-interpreters-via-ssh.html">器</a> 。配置SSH服务器时，请指定您的Pi（ <span class="control">主机</span> ）的IP地址，例如172.27.120.177。另外，指定用于登录设备的凭据。</p>        <p id="0d34aa2b">接下来，在PyCharm中，按<kbd data-primary_default_for_windows="Ctrl+Shift+A" data-primary_intellij_idea_classic_macos="Shift+⌘+A" data-primary_default_for_gnome="Ctrl+Shift+A" data-primary_default_for_kde="Ctrl+Shift+A" data-primary_sublime_text="Ctrl+Shift+P" data-primary_eclipse="Ctrl+Shift+A" data-primary_emacs="Escape, X" data-primary_default_for_xwin_windows="N/A" data-secondary_default_for_macos="⇧⌘A" data-secondary_default_for_gnome="⌃⇧A" data-secondary_default_for_kde="⌃⇧A" data-secondary_eclipse="⌃⇧A" data-secondary_default_for_xwin_macos="N/A" data-secondary_sublime_text_macos="⇧⌘P">Ctrl+Shift+A</kbd> ，开始输入“开始SSH会话”：</p>        <figure><img alt="py开始ssh会话" title="py开始ssh会话" src="/help/img/idea/2019.2/py_start_ssh_session.png" id="c5494297" width="408" height="101"></figure>        <p id="7b1c82c2">然后从主机列表中选择您的Raspberry Pi，您应该已连接。</p>        <p id="c43c57e3">接下来， <a href="#install-additional-software">安装其他软件</a> 。</p>    </div><div class="chapter"><h2 id="setup-permission" data-toc="Remote_Development_on_Raspberry_Pi#setup-permission">在PostgreSQL中设置权限并创建数据库</h2>        <p id="46efddff">现在，我们需要在PostgreSQL中设置权限。最简单的方法是返回到我们的SSH终端，并运行以下命令以Postgres用户身份获得SQL提示：</p>            <div class="code-block" data-lang="bash">须藤-u postgres psql</div>            <p id="972cd30a">现在，让我们创建一个用户（在Postgres术语中为“角色”），该用户的名称与运行该过程的用户的名称相同：</p>        <div class="code-block" data-lang="bash">使用登录密码“ hunter2”创建角色pi；</div>        <p id="dc5100fb">重要的提示！确保PostgreSQL中的角色具有与您的Linux用户名相同的名称。您可能还想替换一个更好的密码。在psql中以分号（;）结束SQL语句很重要，因为它将假定您正在编写多行语句，直到以分号终止。我们授予pi用户登录权限，这仅意味着该用户可以登录。没有登录权限的角色用于创建组。</p>        <p id="database">接下来，创建一个数据库：</p>        <div class="code-block" data-lang="bash">用所有者pi创建数据库pi;</div>        <p id="6468cbac">接下来，使用以下命令退出<span class="emphasis">psql</span> <code class="code">\q</code> 。</p>    </div><div class="chapter"><h2 id="run" data-toc="Remote_Development_on_Raspberry_Pi#run">捕获ping</h2>    <p id="fbfaa61d">要获取有关Internet连接质量的信息，让我们使用系统的<span class="emphasis">ping</span>实用程序ping服务器，然后使用正则表达式读取结果。因此，让我们看一下<span class="emphasis">ping</span>的输出：</p>    <div class="code-block" data-lang="bash">PING jetbrains.com（54.217.236.18）56（84）个字节的数据。来自ec2-54-217-236-18.eu-west-1.compute.amazonaws.com（54.217.236.18）的64个字节：icmp_seq = 1 ttl = 47 time = 32.9 ms来自ec2-54-217-236的64个字节-18.eu-west-1.compute.amazonaws.com（54.217.236.18）：icmp_seq = 2 ttl = 47 time = 32.9 ms来自ec2-54-217-236-18.eu-west-1.compute的64个字节.amazonaws.com（54.217.236.18）：icmp_seq = 3 ttl = 47 time = 32.9 ms来自ec2-54-217-236-18.eu-west-1.compute.amazonaws.com（54.217.236.18）的64个字节： icmp_seq = 4 ttl = 47时间= 32.9毫秒--- jetbrains.com ping统计信息---传输4个数据包，接收4个数据包，0％数据包丢失，时间3003ms rtt最小值/平均值/最大值/ mdev = 32.909 / 32.951 / 32.992 / 0.131毫秒</div>    <p id="8c8d058e">所有具有单独往返时间的线路都以<code class="code">64 bytes from</code> 。因此，让我们创建一个文件<span class="filepath">ping.py</span> （ <span class="menupath" data-skip-index="skip">File | New-Python File</span> ），然后开始编码。</p>    <p id="1fff4f13">我们可以先获取ping的输出，然后遍历各行，选择以数字开头，后跟单词“ bytes from”的字节：</p>    <div class="code-block" data-lang="python">host ='jetbrains.com'ping_output = subprocess32.check_output（[“ ping”，host，“ -c 5”]）for ping_output.split（'\ n'）中的行：如果re.match（“ \ d +从“，line）：打印（行）</div>    <p id="9965d43a">此时，如果您运行代码<kbd data-primary_default_for_windows="Ctrl+Shift+F10" data-primary_intellij_idea_classic_macos="Ctrl+Shift+F10" data-primary_default_for_gnome="Ctrl+Shift+F10" data-primary_default_for_kde="Ctrl+Shift+F10" data-primary_sublime_text="Ctrl+Shift+F10" data-primary_eclipse="Ctrl+Shift+F10" data-primary_emacs="Ctrl+Shift+F10" data-primary_default_for_xwin_windows="N/A" data-secondary_default_for_macos="⌃⇧R" data-secondary_default_for_gnome="⌃⇧F10" data-secondary_default_for_kde="⌃⇧F10" data-secondary_eclipse="⌃⇧F10" data-secondary_default_for_xwin_macos="N/A" data-secondary_sublime_text_macos="N/A">Ctrl+Shift+F10</kbd> ，您应该看到以下代码在Raspberry Pi上远程运行：</p>    <figure><img alt="py树莓派运行" title="py树莓派运行" src="/help/img/idea/2019.2/py_raspberry_pi_run.png" id="a2b71621" width="807" height="230"></figure>    <p id="648d0fd4">要检查部署设置是否正确，请指向“ <span class="menupath" data-skip-index="skip">工具” |</span> “ <span class="menupath" data-skip-index="skip">工具”。</span>在主菜单上<span class="menupath" data-skip-index="skip">部署</span> 。应该检查检查命令“ <span class="control">自动上传”</span> 。</p></div><div class="chapter"><h2 id="store" data-toc="Remote_Development_on_Raspberry_Pi#store">储存ping</h2>        <p id="3fda4781">我们想将ping存储在<span class="emphasis">PostgreSQL中</span> ，所以让我们为它们创建一个表。首先，我们需要创建一个PostgreSQL数据库：</p>        <figure><img alt="py数据库PostgreSQL" title="py数据库PostgreSQL" src="/help/img/idea/2019.2/py_database_postgresql.png" id="de887d22" width="392" height="403"></figure>        <p id="8c0cacb3">选择PostgreSQL后，将打开“数据源”页面：</p>        <figure><img alt="py创建postrgesql数据库常规设置" title="py创建postrgesql数据库常规设置" src="/help/img/idea/2019.2/py_create_postrgesql_database_general_settings.png" id="30357651" width="563" height="313"></figure>        <p id="03d2f33f">在此页面上，下载所需的驱动程序，输入所需的凭据，然后单击“ <span class="control">测试连接”</span>按钮以确保已连接。</p>        <p id="813082b1">由于我们的数据库仅公开给localhost，因此我们将需要使用SSH隧道：</p>        <figure><img alt="py创建postrgesql数据库ssh隧道" title="py创建postrgesql数据库ssh隧道" src="/help/img/idea/2019.2/py_create_postrgesql_database_ssh_tunnel.png" id="6a156d21" width="568" height="241"></figure>        <p id="2e1c441c">接下来，连接后，通过执行<a href="https://github.com/ErnstHaagsman/raspberryping/blob/master/setup_db.sql" rel="noopener noreferrer" data-external="true" target="_blank">setup_db.sql</a>脚本来创建表。为此，将脚本从GitHub复制粘贴到连接后立即打开的SQL控制台中，然后使用绿色的播放按钮执行。</p>        <p id="174e4fb3">现在我们已经完成了这项工作，让我们扩展脚本以将ping记录到数据库中。要从Python连接到数据库，我们需要安装<span class="emphasis">psycopg2</span> 。为此，指向<span class="menupath" data-skip-index="skip">文件|设置</span> （对于Windows和Linux）或<span class="menupath" data-skip-index="skip">PyCharm /首选项</span> （对于macOS用户），然后单击页面<a href="project-interpreter.html">项目解释器</a> ，然后使用<img class="inline-icon-16" src="/help/img/idea/2019.2/icons.general.add.svg@2x.png" width="16" alt="图标一般添加svg">安装软件包。如果您想查看完整的脚本，可以<a href="https://github.com/ErnstHaagsman/raspberryping/blob/master/ping.py" rel="noopener noreferrer" data-external="true" target="_blank">在GitHub上查看</a> 。</p>    </div><div class="chapter"><h2 id="cron" data-toc="Remote_Development_on_Raspberry_Pi#cron">克朗</h2>        <p id="85c6644e">为了确保我们实际上定期记录ping，我们需要安排此脚本运行。为此，我们将使用<span class="emphasis">cron</span> 。在对数据库使用对等身份验证时，我们需要确保脚本以<span class="emphasis">pi</span>用户身份运行。因此，让我们打开一个SSH会话（确保我们以<span class="emphasis">pi</span>身份登录），然后运行<code class="code">crontab -e</code>编辑我们的用户crontab。然后在文件底部添加以下行：</p>        <div class="code-block" data-lang="bash">* / 5 * * * * /home/pi/raspberryping/ping.py jetbrains.com >> /var/log/raspberryping.log 2>＆1</div>        <p id="06312d19"><span class="emphasis">确保文件末尾有换行符！</span></p>        <p id="94bf9595">首先<code class="code">*/5</code>表示该脚本每5分钟运行一次。如果您希望使用其他频率，则可以<a href="https://en.wikipedia.org/wiki/Cron" rel="noopener noreferrer" data-external="true" target="_blank">了解有关crontabs的更多信息</a> 。现在我们还需要创建日志文件，并确保脚本可以写入该文件：</p>        <div class="code-block" data-lang="bash">sudo touch /var/log/raspberryping.log sudo chown pi：pi /var/log/raspberryping.log</div>        <p id="d2727726">此时，请花费一些时间，稍后再返回时，应记录一些ping时间。为了验证，让我们使用PyCharm的数据库工具进行检查。打开<a href="database-tool-window.html">数据库工具窗口</a> （在屏幕右侧），然后双击表。您应该看到它包含值：</p>        <figure><img alt="py数据库填充" title="py数据库填充" src="/help/img/idea/2019.2/py_databse_filled.png" id="c8cbbdc5" width="806" height="257"></figure>    </div><div class="chapter"><h2 id="flask" data-toc="Remote_Development_on_Raspberry_Pi#flask">创建一个Flask应用程序</h2>            <p id="c6d6dcdd">如果我们看不到有关ping的统计信息，则仅记录ping并没有好处。因此，让我们编写一个小的Flask应用程序（要安装Flask，请使用<code class="code">pip install</code>在终端中），然后使用<a href="matplotlib-support.html">matplotlib</a>绘制最近ping时间的图表。</p>            <p id="6f3a0642">在Flask应用程序中，我们将创建两条路线：</p>            <ul class="list _ul"><li class="list__item" id="d79a8aff"><p>上<code class="code">/</code> ，我们将使用基本统计信息（最近一小时的最短时间，平均时间，最长时间）列出我们在过去一小时中查验的目的地。</p></li><li class="list__item" id="5bf34e10"><p>上<code class="code">/graphs/<destination></code>我们将在最近3小时内绘制ping图。</p></li></ul>            <p id="55140cd3">的<code class="code">/</code>路由很简单：我们只需执行查询即可获取我们感兴趣的数据，并将其传递给模板。<a href="https://github.com/ErnstHaagsman/raspberryping/blob/master/analyze.py" rel="noopener noreferrer" data-external="true" target="_blank">在GitHub上查看完整代码</a> 。</p>            <p id="0d8f45f3">为了确保一切正常，让我们在调用时设置一个断点<code class="code">render_template</code> ：</p>            <figure><img alt="py渲染模板断点" title="py渲染模板断点" src="/help/img/idea/2019.2/py_render_template_breakpoint.png" id="1037173f" width="549" height="120"></figure>            <p id="efb3eb24">然后开始调试会话<img class="inline-icon-16" src="/help/img/idea/2019.2/icons.actions.startDebugger.svg@2x.png" width="16" alt="图标操作startDebugger svg">并在浏览器中查看结果。</p>            <p id="8cfcb895">的<code class="code">/graphs/<destination></code>路线要复杂得多。首先，我们必须在合理大小的垃圾箱中（例如10分钟）获取过去三个小时的ping平均值。其次，我们必须绘制图形。</p>                   </div><div class="chapter"><h2 id="querying-data" data-toc="Remote_Development_on_Raspberry_Pi#querying-data">查询数据</h2>            <p id="77b771ac">因此，我们正在寻找的数据是：</p>            <ul class="list _ul"><li class="list__item" id="16f83dbb"><p>最近3个小时中的每10分钟</p></li><li class="list__item" id="3ab5bf99"><p>获取到指定目的地的最小，平均和最大ping时间</p></li></ul>                <p id="75b61551">第一部分使这成为一个相当复杂的查询。即使PostgreSQL支持间隔，日期范围和生成一系列日期的方法，也无法生成一系列范围。解决此问题的一种方法是使用公用表表达式（CTE），这是一种执行子查询的方法，您以后可以将其称为真实表。</p>                <p id="ada24a08">要以10分钟的间隔获取最近三个小时的一系列时间戳很容易：</p>            <div class="code-block" data-lang="sql">从generate_series（now（）-间隔“ 3小时”，now（），间隔“ 10分钟”）中选择begin_time；</div>            <p id="5ad8415e"><a href="https://www.postgresql.org/docs/9.5/static/functions-srf.html" rel="noopener noreferrer" data-external="true" target="_blank">generate_series</a>函数采用三个参数： <code class="code">begin</code> ， <code class="code">end</code>和<code class="code">step</code> 。该函数适用于数字和时间戳，因此很容易。如果我们正好在这些时候想要ping，现在就可以完成。但是，我们需要两个时间戳之间的时间。因此，我们可以使用另一种SQL魔术： <a href="https://www.postgresql.org/docs/9.6/static/functions-window.html" rel="noopener noreferrer" data-external="true" target="_blank">窗口函数</a> ，该<a href="https://www.postgresql.org/docs/9.6/static/functions-window.html" rel="noopener noreferrer" data-external="true" target="_blank">函数</a>使我们能够对当前所在行之前或之后的行进行处理。所以我们添加<code class="code">end_time</code>对我们的查询：</p>            <div class="code-block" data-lang="sql">从generate_series（now（）-间隔“ 3小时”，now（），间隔“ 10分钟”）begin_time中选择begin_time，LEAD（begin_time）OVER（ORDER BY begin_time ASC）作为end_time；</div>            <p id="4990f53f"><code class="code">LEAD</code>按照结果中指定的顺序获取结果中下一行的值<code class="code">OVER</code>条款。您可以使用<code class="code">LAG</code>以类似的方式获取上一行。所以现在我们可以用<code class="code">WITH intervals as ( … query goes here … )</code>使其成为CTE。然后，我们可以加入ping表并获得我们想要的结果：</p>            <div class="code-block" data-lang="sql">间隔为AS（SELECT begin_time，LEAD（begin_time）OVER（ORDER BY begin_time）AS end_time FROM generate_series（now（）-INTERVAL'3 hours'，now（），INTERVAL '10 minutes'）begin_time）SELECT i.begin_time AT TIME ZONE'Europe / Berlin'AS begin_time，i.end_time AT TIME ZONE'Europe / Berlin'AS end_time，p.destination，count（p.pingtime），round（avg（p.pingtime），2）AS avg，max（ p.pingtime），min（p.pingtime）从间隔i左联接ping p ON p.recorded_at> = i.begin_time AND p.recorded_at <i.end_time其中i.end_time不为空且目标=％s GROUP BY i .begin_time，i.end_time，p.destination ORDER BY i.begin_time ASC;</div>            <p id="9e68f068">接下来，让我们执行此查询。为此，请右键单击编辑器背景，然后在上下文菜单上选择“ <span class="control">执行</span> ”：</p>            <figure><img alt="py从pycharm执行sql" title="py从pycharm执行sql" src="/help/img/idea/2019.2/py_execute_sql_from_pycharm.png" id="3a139034" width="1011" height="862"></figure>            <p id="225edc8e">（如果您没有看到<span class="control">Execute</span> ，请选择<span class="control">Attach Console</span> ，让PyCharm知道您要在哪个数据库上执行查询）。</p>    <p id="24bd7691">顺便说一句，您可以使查询工作快30倍。要实现这种显着的加速，请将此索引添加到您的查询中：</p>    <div class="code-block" data-lang="sql">创建索引pings_recorded_at打开pings（recorded_at）;</div>        </div><div class="chapter"><h2 id="graph" data-toc="Remote_Development_on_Raspberry_Pi#graph">绘制数据图</h2>            <p id="4eb76021">获取数据后，使用<a href="http://matplotlib.org/" rel="noopener noreferrer" data-external="true" target="_blank">matplotlib</a>生成线图，其中每个线的最小，平均和最大ping时间的线数。Matplotlib使您可以使用<a href="http://matplotlib.org/devdocs/api/_as_gen/matplotlib.axes.Axes.plot_date.html" rel="noopener noreferrer" data-external="true" target="_blank">plot_date函数</a>轻松绘制基于时间的数据。</p>            <p id="1a165645">绘图准备就绪后，将其作为<span class="filepath">.png</span>文件“保存”到StringIO对象，然后该对象用于创建HTTP响应。通过设置<code class="code">content_type</code>标头<code class="code">image/png</code> ，一切都安排好了。</p>            <p id="dd5e60d9">所以最终结果是：</p>            <figure><img alt="py树莓派pi时间图" title="py树莓派pi时间图" src="/help/img/idea/2019.2/py_raspberry_pi_ping_time_graph.png" id="d33dca39" width="738" height="695"></figure>            <p id="d8918216">如果您想查看完整的代码，请查看<a href="https://github.com/ErnstHaagsman/raspberryping/blob/master/analyze.py" rel="noopener noreferrer" data-external="true" target="_blank">GitHub上的analyst.py</a> 。</p>    </div>        <div class="chapter"><h2 id="summary" data-toc="Remote_Development_on_Raspberry_Pi#summary">摘要</h2>            <p id="f45a7a95">恭喜您通过了本教程！让我们重复在PyCharm的帮助下所做的事情：</p>            <ul class="list _ul"><li class="list__item" id="8d9cc000"><a href="#creating-project">创建一个项目</a></li><li class="list__item" id="07bed488"><p>在终端中， <a href="#setup-permission">设置权限并创建一个用户</a> 。</p></li><li class="list__item" id="65b3962c"><p><a href="#database">创建了一个数据库</a> 。</p></li><li class="list__item" id="b142735a"><p><a href="#run">捕获到ping</a> 。</p></li><li class="list__item" id="ad79979b"><p><a href="#store">将ping存储在一个特殊的数据库中</a> 。</p></li><li class="list__item" id="e45831da"><a href="#flask">创建了一个Flask应用程序</a> </li><li class="list__item" id="2b1c642e"><a href="#querying-data">查询数据</a> </li><li class="list__item" id="b5c0067c"><a href="#graph">绘制数据</a> </li></ul>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月6日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="deployment-in-pycharm.html">教程：在PyCharm Analysis</a> <a class="navigation-links__next" href="analyzing-applications.html">应用程序中进行</a> <a class="navigation-links__prev" href="deployment-in-pycharm.html">部署</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>