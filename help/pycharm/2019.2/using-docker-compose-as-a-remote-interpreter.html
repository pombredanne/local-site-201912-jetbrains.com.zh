<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"></meta><meta name="robots" content="noindex"></meta><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Configure a remote interpreter using Docker Compose - Help | PyCharm</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="add_interpreter_docker_compose" data-article-props="&#xA;                {&#xA;                &#xA;            &#34;seeAlso&#34;:[&#xA;            &#xA;                {&#34;title&#34;: &#34;Languages, Frameworks and Technologies&#34;,&#xA;                 &#34;links&#34;: [&#xA;                &#xA;        {&#34;url&#34;:&#34;templates.html#debug&#34;,&#34;text&#34;:&#34;To debug a Django template&#34;}&#xA;                    ]},&#xA;                {&#34;title&#34;: &#34;Web Resources&#34;,&#xA;                 &#34;links&#34;: [&#xA;                &#xA;        {&#34;url&#34;:&#34;http://devnet.jetbrains.com/community/python?view=documents&#xA;            &#34;,&#34;text&#34;:&#34;Developer Community&#34;}&#xA;                    ]}&#xA;            ]&#xA;        &#xA;                }&#xA;            "><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search PyCharm Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PyCharm 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default_for_windows" selected>Default for Windows</option><option data-group="primary" value="primary_intellij_idea_classic_macos">IntelliJ IDEA Classic (macOS)</option><option data-group="primary" value="primary_default_for_gnome">Default for GNOME</option><option data-group="primary" value="primary_default_for_kde">Default for KDE</option><option data-group="primary" value="primary_sublime_text">Sublime Text</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_default_for_xwin_windows">Default for XWin (Windows)</option><option data-group="secondary" value="secondary_default_for_macos">Default for macOS</option><option data-group="secondary" value="secondary_default_for_gnome">Default for GNOME</option><option data-group="secondary" value="secondary_default_for_kde">Default for KDE</option><option data-group="secondary" value="secondary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_default_for_xwin_macos">Default for XWin (macOS)</option><option data-group="secondary" value="secondary_sublime_text_macos">Sublime Text (macOS)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 data-toc="add_interpreter_docker_compose" id="Using_Docker_Compose_as_a_Remote_Interpreter.xml">Configure a remote interpreter using Docker Compose</h1>        <a name="edition"></a>     <aside class="warning " data-title="" rel="Using_Docker_Compose_as_a_Remote_Interpreter.xml" id="97256b1e"><p>        This feature is only supported in the <b id="8b2d4d64" origin="intellij-platform">Professional</b> edition.         This edition is commercial, and it provides an outstanding set of features:          see the <a href="/pycharm/features/editions_comparison_matrix.html" data-external="true" target="_blank" rel="noopener noreferrer">comparison matrix</a> for more details.    </p></aside>                <div class="chapter"><h2 id="prereq" data-toc="add_interpreter_docker_compose#prereq">Prerequisites</h2>            <p id="9824c3d3">Make sure that the following prerequisites are met:</p>                                    <ul class="list _ul"><li class="list__item" id="e60fc8c7">                    <p id="66a4402d">You have a stable Internet connection.</p>                    <a name="docker-internet-requirement"></a>            <p id="25d0a9c4">To operate with Docker you need the <a href="https://hub.docker.com/_/busybox" data-external="true" target="_blank" rel="noopener noreferrer">busybox</a> image be available on your machine.            Ensure that you have a stable Internet connection, so that PyCharm can download and run <code class="code">busybox:latest</code>.            Once you have successfully configured Docker, you can go offline.</p>                    </li><li class="list__item" id="33f1977c">                    <p id="d3ec77d0">Docker is installed. You can install Docker on the various platforms, but here we'll use the                        <a href="https://docs.docker.com/docker-for-windows/" data-external="true" target="_blank" rel="noopener noreferrer">Windows</a>                                                installation.                    </p>                    <p id="9f678c74">Note that you might want to repeat this tutorial on different platforms; then use Docker installations                        for <a href="https://docs.docker.com/docker-for-mac/" data-external="true" target="_blank" rel="noopener noreferrer">macOS</a>                                                and                        <a href="https://docs.docker.com/engine/installation/linux/ubuntu/" data-external="true" target="_blank" rel="noopener noreferrer">Linux</a> (Ubuntu, other                        distributions-related instructions are available as well). </p>                </li><li class="list__item" id="285bbed4"><a name="prereq_plural"></a>                        <p id="1135b46d">Before you start working with Docker, make sure that the Docker Integration and Python Docker plugins are enabled.        The plugins are bundled with PyCharm and activated by default. If the plugins are not activated,            enable them on the <a href="plugins-settings.html">Plugins</a> page <a name="open_settings"></a>                of the <span class="control">Settings/Preferences</span> dialog (<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_default_for_xwin_windows="N/A" data-secondary_default_for_macos="⌘," data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_default_for_xwin_macos="N/A" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd>)     as described in            <a href="managing-plugins.html">Managing plugins</a>.</p>        <p id="fd1fd809">If you are using Docker for Windows, enable the <span class="control">Expose daemon on tcp://localhost:2375 without TLS</span> option            in the <span class="control">General</span> section of your Docker settings.</p>                    </li></ul>        </div>        <div class="chapter"><h2 id="example" data-toc="add_interpreter_docker_compose#example">Preparing an example</h2>                            <p id="e8698bff">We could have actually repeated the                    <a href="using-docker-as-a-remote-interpreter.html#example">same example</a> as was used for Docker,                    but for Docker Compose it makes no sense - too simple...</p>                <p id="efe3c7ab">To show a realistic example of a Docker Compose application, we'll use a Django application with a                    PostgreSQL database running in a separate container.                    <a href="https://github.com/ErnstHaagsman/djangodocker" data-external="true" target="_blank" rel="noopener noreferrer">Get the project from GitHub,</a>                    and open it in PyCharm (<span data-skip-index="skip" class="menupath">File | Open</span>).</p>                <p id="1701b56f">For this Django application, we should create two containers: one for a database, and one for the                    application itself. We'll use the Docker Compose to link the two containers together. </p>                                </div>        <div class="chapter"><h2 id="dockerfile" data-toc="add_interpreter_docker_compose#dockerfile">Adding files for Docker and Docker Compose</h2>            <p id="1f3d1f5d">In the Project tool window, right-click the project root and choose <span data-skip-index="skip" class="menupath">New | File</span>                <kbd data-primary_default_for_windows="Alt+Insert" data-primary_intellij_idea_classic_macos="Ctrl+N" data-primary_default_for_gnome="Alt+Insert" data-primary_default_for_kde="Alt+Insert" data-primary_sublime_text="Alt+Insert" data-primary_eclipse="Alt+Insert" data-primary_emacs="Alt+Insert" data-primary_default_for_xwin_windows="N/A" data-secondary_default_for_macos="⌘N" data-secondary_default_for_gnome="N/A" data-secondary_default_for_kde="N/A" data-secondary_eclipse="N/A" data-secondary_default_for_xwin_macos="N/A" data-secondary_sublime_text_macos="⌘N">Alt+Insert</kbd>, enter the filename (here <span class="filepath">Dockerfile</span>) and enter the following                code:</p>            <div class="code-block" data-lang="shell">
                FROM python:3.6

                WORKDIR /app

                # By copying over requirements first, we make sure that Docker will cache
                # our installed requirements rather than reinstall them on every build
                COPY requirements.txt /app/requirements.txt
                RUN pip install -r requirements.txt

                # Now copy in our code, and run it
                COPY . /app
                EXPOSE 8000
                CMD ["python", "manage.py", "runserver", "0.0.0.0:8000"]
    </div>                        <p id="docker-compose">Next, repeat the same steps for the <span class="filepath">docker-compose.yml</span> file and enter the following                code:</p>            <div class="code-block" data-lang="yaml">
                version: '2'
                services:
                    web:
                        build: .
                        ports:
                            - "8000:8000"
                        volumes:
                            - .:/app
                        links:
                            - db

                    db:
                        image: "postgres:9.6"
                        ports:
                            - "5432:5432"
                        environment:
                            POSTGRES_PASSWORD: hunter2
            </div>                        <p id="d7fa9255">Let's look at the <span class="filepath">docker-compose.yml</span> file. This file defines 2 services:                <code class="code">web</code> and <code class="code">db</code>, and links them together. </p>                    </div>        <div class="chapter"><h2 id="configuring-docker" data-toc="add_interpreter_docker_compose#configuring-docker">Configuring Docker</h2>            <p id="a60bfd54">Now that we've prepared our example, let's configure Docker. </p>            <p id="d640d3b7">To do that, open Settings                 dialog (<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_default_for_xwin_windows="N/A" data-secondary_default_for_macos="⌘," data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_default_for_xwin_macos="N/A" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd> or click <img class="inline-icon-16" src="/help/img/idea/2019.2/icons.general.settings.svg@2x.png" width="16" alt="Settings">                on the main toolbar) and click the <a href="docker-connection-settings.html">Docker page</a> under the                <span class="control">Build, Execution, Deployment</span> node. Click <img class="inline-icon-16" src="/help/img/idea/2019.2/icons.general.add.svg@2x.png" width="16" alt="Add a docker server"> to create a Docker server.</p>            <p id="207961dd">Accept the suggested default values:</p>            <figure><img alt="Docker settings" title="Docker settings" src="/help/img/idea/2019.2/py_docker_settings.png" id="9d94e050" width="700" height="930"></figure>                        <p id="3ac7bf2d">For macOS, select <span class="control">Docker for Mac</span> to connect to the Docker daemon. </p>            <figure><img alt="Docker settings" title="Docker settings" src="/help/img/idea/2019.2/py_docker_settings_mac.png" id="3ba794e1" width="700" height="970"></figure>            <aside class="note " data-title="" rel="3ba794e1" id="f8fa23f2"><p>The <span class="control">Path mappings</span> settings are not available on Linux. So, if you want to map some directories on a virtual machine to            some path on your local Linux machine, you will have to do it manually.</p></aside>            <p id="67070169">Next, apply changes. </p>        </div>        <div class="chapter"><h2 id="docker-compose-remote" data-toc="add_interpreter_docker_compose#docker-compose-remote">Configuring Docker Compose as a remote interpreter</h2>            <p id="8c895881">Let's now define a remote interpreter based on Docker-Compose.</p>                                                                        <a name="python-installation"></a>        <p id="bd29c29d">Ensure that you have downloaded and installed <a href="https://www.python.org/downloads/" data-external="true" target="_blank" rel="noopener noreferrer">Python</a> on your computer.</p>                    <p id="70483822">Open the <span class="control">Add Python Interpreter</span> dialog by either way:</p>                <ul class="list _ul"><li class="list__item" id="45efa5d1"><p>When you're in the <span class="control">Editor</span>, the most convenient way is to use the <span class="control">Python Interpreter</span> widget in the <span>Status Bar</span>. Click the widget and                        select <span data-skip-index="skip" class="menupath">Add Interpreter ...</span></p></li><li class="list__item" id="07f84a2f"><p id="b9a1c0e7">If you are in the <span class="control">Settings/Preferences</span> dialog <kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_default_for_xwin_windows="N/A" data-secondary_default_for_macos="⌘," data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_default_for_xwin_macos="N/A" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd>, select <span data-skip-index="skip" class="menupath">Project &lt;project name&gt; | Project Interpreter</span>.                        Click the <img class="inline-icon-16" src="/help/img/idea/2019.2/icons.general.gearPlain.svg@2x.png" width="16" alt="The Configure project interpreter"> icon and select <span class="control">Add</span>.</p></li></ul>                <a name="add_docker-compose"></a>                    <p id="d0ad08bf">In the dialog that opens, select the <span class="control">Docker Compose</span> option,                        from the drop-down lists select the Docker server, Docker Compose service (here <code class="code">web</code>),                        configuration file (here <code class="code">docker-compose.yml</code>)and image name (here <code class="code">python</code>).</p>                    <p id="5da93eec">Why we've chosen <code class="code">web</code>? This choice is explained by the fact, that after configuring a                        Docker-Compose-based interpreter, we'll be able to create regular run configurations that will alter the                        behavior of the container we selected. Therefore, if we want to debug the code in a container, that's the                        one we should select here. All other containers in the compose file will always be started together with                        this one, but you won't be able to affect their behavior from PyCharm - they'll always behave as if you                        started them with the command <code class="code">docker-compose up</code> from the command line.</p>                    <p id="3b3ca6eb">Next, wait while PyCharm starts your Docker-Compose configuration to scan and index:</p>                                        <figure><img alt="Configure remote Python interpreter" title="Configure remote Python interpreter" src="/help/img/idea/2019.2/py_docker_as_remote.png" id="8bcefdfc" width="700" height="1106"></figure>                                                                    </div>        <div class="chapter"><h2 id="tw" data-toc="add_interpreter_docker_compose#tw">Using the Docker tool window</h2>            <p id="f95c559e">Since we've <a href="#configuring-docker">configured                Docker</a>, the <span class="control">Services</span> tool window button appears at the bottom of PyCharm's main window. Click this button and see your container running:</p>            <figure><img alt="Docker window" title="Docker window" src="/help/img/idea/2019.2/py_docker_running_container.png" id="80d427ce" width="700" height="706"></figure>                    </div>        <div class="chapter"><h2 id="db_Settings" data-toc="add_interpreter_docker_compose#db_Settings">Configuring database credentials</h2>            <p id="c68e5617">Modify the <code class="code">DATABASES</code> section of the <span class="filepath">settings.py</span> file in your Django project to add database configuration details:</p>            <div class="code-block" data-lang="python">
                DATABASES = {
                    'default': {
                        'ENGINE': 'django.db.backends.postgresql',
                        'NAME': 'postgres',
                        'USER': 'postgres',
                        'PASSWORD': 'hunter2',
                        'HOST': 'db'
                    }
                }
            </div>        </div>        <div class="chapter"><h2 id="run" data-toc="add_interpreter_docker_compose#run">Running your application under Docker-Compose</h2>            <p id="a2962ec4">First, as we are executing a Django application, we must run a migration.</p>                            <p id="3b26b62c">To do that, choose <span data-skip-index="skip" class="menupath">Tools | Run 'manage.py' task</span> and enter <code class="code">migrate</code>:</p>                <figure><img alt="manage.py task is running in the Docker" title="manage.py task is running in the Docker" src="/help/img/idea/2019.2/py_docker_run_manage_py_task.png" id="0350ae6f" width="700" height="798"></figure>                <p id="19af93f3">(See <a href="running-manage-py.html">Running Tasks of manage.py Utility</a> for details.)</p>                <p id="9daf46ea">Next, create an ordinary Django server run/debug configuration. To do that, from the main menu choose                    <span data-skip-index="skip" class="menupath">Run | Edit Configurations...</span>; in the dialog that opens click <img class="inline-icon-16" src="/help/img/idea/2019.2/icons.general.add.svg@2x.png" width="16" alt="Add Run/Debug configuration for a Django Server"> and                    select <span class="control">Django Server</span>:</p>                <figure><img alt="Run/Debug configuration for a Django server" title="Run/Debug configuration for a Django server" src="/help/img/idea/2019.2/py_docker_run_django_server_docker_compose.png" id="049ca43f" width="700" height="1498"></figure>                <p id="2359d93d">                    <span class="emphasis">The only thing you should pay attention to, is that <span class="control">Host</span> field must be set to                        <span class="filepath">0.0.0.0</span> - to make sure that we listen to requests coming from outside the Docker container.                    </span>                </p>                <p id="aaf959c3">Launch this configuration (<span data-skip-index="skip" class="menupath">Run | Run 'RunDjangoApp'</span>): </p>                <figure><img alt="Docker compose run" title="Docker compose run" src="/help/img/idea/2019.2/py_docker_compose_run.png" id="4c59ca1d" width="700" height="378"></figure>                <p id="1">To see output in your web browser, go to <a href="http://localhost:8000" data-external="true" target="_blank" rel="noopener noreferrer">http://localhost:8000</a>                    (in the address bar, change <span class="filepath">0.0.0.0</span> to <span class="filepath">localhost</span>): </p><aside class="tip sideblock" data-title="" rel="1" id="4ae0331a">                    <p id="13ce6fe8">If you are using the Docker Machine, use the machine's IP address instead.</p>                </aside>                <figure><img alt="Django application output" title="Django application output" src="/help/img/idea/2019.2/py_docker_django_app_result.png" id="97ffbba5" width="700" height="289"></figure>                                                </div>                <div class="chapter"><h2 id="summary" data-toc="add_interpreter_docker_compose#summary">Summary</h2>            <p id="fee51a2d">Let's summarize what has been done with the help of PyCharm:</p>            <ul class="list _ul"><li class="list__item" id="296f938a"><p>We downloaded a Django application from GitHub and opened it.</p></li><li class="list__item" id="91074bc7"><p>We added specific Docker Compose files to our project.</p></li><li class="list__item" id="c70b1128"><p>We configured a remote interpreter based on Docker Compose.</p></li><li class="list__item" id="b7282d3b"><p>We ran our Django application in the Docker Compose container.</p></li></ul>        </div>            <div class="last-modified" data-skip-index="skip">Last modified: 6 November 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="using-docker-as-a-remote-interpreter.html">Configure a remote interpreter using Docker</a><a class="navigation-links__next" href="installing-uninstalling-and-upgrading-packages.html">Install, uninstall, and upgrade packages</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>