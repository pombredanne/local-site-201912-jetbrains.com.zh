<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><meta name="description" content="How to debug a simple Python application" data-skip-index="skip"><title>第2步。调试第一个Python应用程序-帮助|帮助PyCharm</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Debugging_Your_First_Python_Application" data-article-props="
                {
                
            " seeals=":[=" titl=":=" procedure=",=" link=":=" ur=":" running-applications.htm="," tex=":" running="" application="}=" debugging-code.htm="," debuggin="}=" web="" resource=",=" http:="" ="" devnet.jetbrains.com="" community="" python?view="documents" developer="" communit="}=" tutorials="" and="" example=",=" debugging-python-code.htm="," debugging="" with="" pychar="}="><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索PyCharm帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PyCharm 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_intellij_idea_classic_macos" data-group="primary">IntelliJ IDEA经典版（macOS）</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_default_for_xwin_windows" data-group="primary">XWin的默认设置（Windows）</option><option value="secondary_default_for_macos" data-group="secondary">macOS的默认设置</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_default_for_xwin_macos" data-group="secondary">XWin的默认设置（macOS）</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Debugging_Your_First_Python_Application.xml" data-toc="Debugging_Your_First_Python_Application">第2步。调试第一个Python应用程序</h1>    <div class="chapter"><h2 id="where-is-the-problem" data-toc="Debugging_Your_First_Python_Application#where-is-the-problem">找出问题的根源</h2>       <p id="fc1c71fb">还记得您在上<a href="creating-and-running-your-first-python-project.html">一教程中</a>创建并运行<span class="filepath">Car</span>脚本吗？让我们再玩一点，然后修改<code class="code">average_speed</code>功能如下：</p>       <div class="code-block" data-lang="python">def average_speed（self）：返回self.odometer / self.time</div>    <p id="9d83d7cb">让我们看看启动脚本并尝试找出平均速度时会发生什么：</p>    <figure><img alt="错误讯息" title="错误讯息" src="/help/img/idea/2019.2/py_run_error.png" id="58c4ebba" width="679" height="461"></figure>    <p id="64048c99">糟糕...PyCharm报告运行时错误： <code class="code">ZeroDivisionError</code> 。</p>        <p id="9f0af4bb">让我们更深入地研究我们的代码，找出问题所在。我们可以使用PyCharm调试器来查看代码中到底发生了什么。要开始调试，您必须先设置一些<a href="using-breakpoints.html">断点</a> 。要创建断点，只需单击装订线</p>    <figure><img alt="添加断点" title="添加断点" src="/help/img/idea/2019.2/py_breakpoints_added.png" id="395589a3" width="517" height="434"></figure>    <p id="1cb0efb5">接下来，点击<img alt="运行图标" title="运行图标" src="/help/img/idea/2019.2/run_from_left_gutter_icon.png" id="ff387975" width="16" height="15" class="inline-icon-16">天沟中的图标<code class="code">main</code>子句，然后选择<span class="control">Debug'Car'</span> 。PyCharm启动调试会话，并显示“ <a href="debug-tool-window.html">调试工具”窗口</a> 。</p>    <figure><img alt="调试工具窗口" title="调试工具窗口" src="/help/img/idea/2019.2/py_debugToolWindow.png" id="3aa8515d" width="700" height="572"></figure>    <p id="3c9e352b">点击<img class="inline-icon-16" src="/help/img/idea/2019.2/icons.actions.resume.svg@2x.png" width="16" alt="恢复图标">按钮以继续执行脚本，然后在“ <a href="debug-tool-window-console.html">控制台”选项卡</a>中输入<code class="code">S</code> ：</p>    <figure><img alt="调试工具窗口：“控制台”选项卡" title="调试工具窗口：“控制台”选项卡" src="/help/img/idea/2019.2/py_debugToolWindow1.png" id="5dc9ba30" width="700" height="478"></figure>            <p id="01a754a4">点击<img class="inline-icon-16" src="/help/img/idea/2019.2/icons.actions.resume.svg@2x.png" width="16" alt="恢复图标">按钮以恢复脚本执行。现在瞧瞧！例外在这里。另一个断点也出现了：默认情况下，PyCharm会因代码中未捕获的任何异常而暂停，并且会显示带有闪电的断点图标。</p>    <figure><img alt="异常断点" title="异常断点" src="/help/img/idea/2019.2/py_debugToolWindow2.png" id="e66b8461" width="700" height="648"></figure>    <p id="e862dcd2">调试器还会显示错误消息。因此，我们找到了问题所在。您还可以在调试器中看到该值<code class="code">self.time</code>等于零：</p>          <div class="chapter"><h3 id="surround" data-toc="Debugging_Your_First_Python_Application#surround">周围的代码</h3>               <p id="1b8261df">为了避免再次遇到相同的问题，我们添加一个<code class="code">if</code>语句检查时间是否等于零。为此，请选择语句<code class="code">return self.odometer / self.time</code>在方法中<code class="code">average_speed</code>然后按<kbd data-primary_default_for_windows="Ctrl+Alt+T" data-primary_intellij_idea_classic_macos="Alt+⌘+T" data-primary_default_for_gnome="Ctrl+Alt+T" data-primary_default_for_kde="Ctrl+Alt+T" data-primary_sublime_text="Ctrl+Alt+T" data-primary_eclipse="Shift+Alt+Z" data-primary_emacs="Ctrl+Alt+T" data-primary_default_for_xwin_windows="N/A" data-secondary_default_for_macos="⌥⌘T" data-secondary_default_for_gnome="⌃⌥T" data-secondary_default_for_kde="⌃⌥T" data-secondary_eclipse="⌥⇧Z" data-secondary_default_for_xwin_macos="N/A" data-secondary_sublime_text_macos="⌥⌘T">Ctrl+Alt+T</kbd> （ <span class="menupath" data-skip-index="skip">代码|环绕</span> ）：</p>    <figure><img alt="环绕声代码" title="环绕声代码" src="/help/img/idea/2019.2/py_surround.png" id="3984da50" width="385" height="380"></figure>                       <p id="6d079fb8">PyCharm创建存根<code class="code">if</code>构造，剩下的任务是用适当的内容填充它。</p>                    <p id="706f2212">编辑后，我们得到以下信息：</p>            <figure><img alt="附带代码的结果" title="附带代码的结果" src="/help/img/idea/2019.2/py_surround_result.png" id="7d0e2804" width="398" height="134"></figure>                    </div>    <p id="ea6f7feb">让我们仔细看看调试器如何显示您的代码在做什么。</p></div>    <div class="chapter"><h2 id="debug" data-toc="Debugging_Your_First_Python_Application#debug">详细调试</h2>              <p id="b9bfcf57">调试工具窗口显示了用于<a href="debug-tool-window-frames.html">frame</a> ， <a href="debug-tool-window-variables.html">variables</a>和<a href="debug-tool-window-watches.html">watchs的</a>专用窗格以及显示所有输入和输出信息的<a href="debug-tool-window-console.html">控制台</a> 。如果希望控制台始终可见，可以将其拖动到PyCharm窗口的边缘之一。</p>                <div class="chapter"><h3 id="step" data-toc="Debugging_Your_First_Python_Application#step">踏步</h3>                <p id="ce7ea398">如果您想逐行查看代码的功能，则无需在每行上都放置一个断点，则可以单步执行代码。</p>                <p id="dbe72d20">让我们看一下逐步执行示例程序的样子：单击<img class="inline-icon-16" src="/help/img/idea/2019.2/icons.actions.resume.svg@2x.png" width="16" alt="恢复图标">按钮，转到控制台询问汽车的平均速度（键入“ S”），我们可以看到我们按下了断点。</p>                                <p id="2ab1e445">我们可以使用<a href="debug-tool-window.html#steptoolbar">步进工具栏上的按钮</a>来选择我们要在哪一行停止。</p>                <figure><img alt="步进工具栏" title="步进工具栏" src="/help/img/idea/2019.2/py_stepping_toolbar.png" id="46044a71" width="229" height="45"></figure>                                <p id="51627cfd">例如，单击“ <span class="control">跳过”</span>按钮<img class="inline-icon-16" src="/help/img/idea/2019.2/icons.actions.traceOver.svg@2x.png" width="16" alt="跳过图标">并看到蓝色标记移至下一行代码：</p>                <figure><img alt="在调试过程中逐步执行" title="在调试过程中逐步执行" src="/help/img/idea/2019.2/py_debugging1_step_over.png" id="f5e9e140" width="700" height="724"></figure>                                                    <p id="566322fb">如果单击单<span class="control">步执行</span>按钮<img class="inline-icon-16" src="/help/img/idea/2019.2/icons.actions.traceInto.svg@2x.png" width="16" alt="进入图标"> ，您将在行后看到<code class="code">action = input("What should I do? [A]ccelerate, [B]rake, " "show [O]dometer, or show average [S]peed?").upper()</code>调试器进入文件<span class="filepath">parse.py</span> ：</p>                    <figure><img alt="在调试过程中介入" title="在调试过程中介入" src="/help/img/idea/2019.2/py_debugging1_step_into.png" id="b89651ce" width="700" height="858"></figure>                    <p id="627c6ff1">但是，如果继续使用<img class="inline-icon-16" src="/help/img/idea/2019.2/icons.actions.traceOver.svg@2x.png" width="16" alt="跳过图标"> ，您将看到您的应用程序仅传递到下一个循环：</p>                    <figure><img alt="调试：传递到下一个循环" title="调试：传递到下一个循环" src="/help/img/idea/2019.2/py_debugging1_next_input.png" id="ff5468e2" width="700" height="364"></figure>                                <p id="76a429ab">如果您想专注于自己的代码，请使用“ <span class="control">进入我的代码”</span>按钮<img class="inline-icon-16" src="/help/img/idea/2019.2/python.icons.com.jetbrains.python.debug.StepIntoMyCode.svg@2x.png" width="16" alt="进入我的代码"> -因此，您将避免进入库类。</p>                <p id="c104a39c">有关详细信息，请参见<a href="debug-tool-window.html#steptoolbar">步进工具栏</a>和单<a href="stepping-through-the-program.html">步执行程序</a>部分。</p>            </div>        <div class="chapter"><h3 id="watch" data-toc="Debugging_Your_First_Python_Application#watch">观看</h3>            <p id="cb3d5cca">PyCharm允许您观看任何变量。只需点击<img class="inline-icon-16" src="/help/img/idea/2019.2/artwork.studio.icons.common.add@2x.png" width="16" alt="添加按钮"> <span class="control">手表</span>标签的工具栏，键入要观察的变量的名字上-让它成为<code class="code">my_car.time</code> 。请注意，此处提供代码完成功能：</p>            <figure><img alt="观看完成" title="观看完成" src="/help/img/idea/2019.2/py_debugging1_watch_completion.png" id="b87a3864" width="700" height="430"></figure>                        <p id="e69e5abb">首先，您会看到时间等于nil-这意味着该变量尚未定义：</p>            <figure><img alt="观看错误" title="观看错误" src="/help/img/idea/2019.2/py_debugging1_watch_error.png" id="07dab53b" width="700" height="438"></figure>                        <p id="ebfa79c6">但是，当程序执行继续到定义变量的范围时，监视将获得以下视图：</p>            <figure><img alt="观看变量获取值" title="观看变量获取值" src="/help/img/idea/2019.2/py_debugging1_watch_normal.png" id="2dcbf902" width="700" height="436"></figure>                        <p id="e453ed0c">有关详细信息<a href="adding-editing-and-removing-watches.html">，</a>请参见<a href="adding-editing-and-removing-watches.html">添加，编辑和删除手表</a>部分。</p>        </div>        <div class="chapter"><h3 id="inline-debugging" data-toc="Debugging_Your_First_Python_Application#inline-debugging">内联调试</h3>            <p id="0e9fd528">您可能已经注意到了另一个PyCharm功能，可以轻松查看您的代码在做什么： <a href="inline-debugging.html">内联调试器</a> 。按下任何断点后，PyCharm就会在编辑器中立即向您显示许多变量的值：</p>            <figure><img alt="内联调试" title="内联调试" src="/help/img/idea/2019.2/py_debugging.png" id="2cb395cd" width="619" height="119"></figure>                        <p id="55aa2914">默认情况下，此<a href="inline-debugging.html">内联调试</a>功能处于启用状态。如果看不到内联调试值，请使用设置图标检查其是否已启用<img class="inline-icon-16" src="/help/img/idea/2019.2/icons.general.gearPlain.svg@2x.png" width="16" alt="设定值">在“ <a href="debug-tool-window.html">调试工具”窗口上</a> ：</p>            <figure><img alt="内联显示值" title="内联显示值" src="/help/img/idea/2019.2/inline_debugging.png" id="0cab794a" width="250" height="314"></figure>                    </div>        <div class="chapter"><h3 id="evaluate" data-toc="Debugging_Your_First_Python_Application#evaluate">计算表达式</h3>            <p id="eed94867">最后，您可以随时评估任何表达式。例如，如果要查看变量的值，请单击<img class="inline-icon-16" src="/help/img/idea/2019.2/icons.debugger.evaluateExpression.svg@2x.png" width="16" alt="评估表达式按钮">按钮。</p>                                  <p id="96935311">然后在打开的对话框中，点击<span class="control">评估</span> ：</p>            <figure><img alt="评估对话框" title="评估对话框" src="/help/img/idea/2019.2/py_debugging1_evaluate_expression_action.png" id="7bf8e64f" width="355" height="404"></figure>                        <p id="cd93fcfc">实际上，您可以通过手表看到相同的事物。使用评估表达式，您可以执行手表无法做到的事情：可以更改事情。</p>            <p id="66abcb5e">例如，如果输入里程表的期望值（例如50），然后继续单步执行脚本，则会得到以下信息：</p>            <figure><img alt="评估表达式：目标值" title="评估表达式：目标值" src="/help/img/idea/2019.2/py_debugging1_evaluate_expression_change_value.png" id="acaa1d39" width="700" height="704"></figure>                        <p id="432b5184">有关详细信息，请参见“ <a href="evaluating-expressions.html">评估表达式”</a>部分。</p>            <p id="7b189f31">您也可以点击按钮<img class="inline-icon-16" src="/help/img/idea/2019.2/python.icons.com.jetbrains.python.pythonConsole.svg@2x.png" width="16" alt="启用Python控制台">在调试器中启用Python控制台。在此模式下，您可以输入一些命令和表达式。例如，您可以修改变量值。</p>            <figure><img alt="在Python控制台中进行调试时更改变量" title="在Python控制台中进行调试时更改变量" src="/help/img/idea/2019.2/py_debugging_python_console.png" id="466a4c7a" width="700" height="766"></figure>        </div>    </div>    <div class="chapter"><h2 id="summary" data-toc="Debugging_Your_First_Python_Application#summary">摘要</h2>              <p id="bb9b6c05">因此，您已经完成了！恭喜！让我们重复在PyCharm的帮助下所做的事情：</p>        <ul class="list _ul"><li class="list__item" id="e48398e5"><p>找出问题的根源</p></li><li class="list__item" id="8f82e7b5"><p>设置断点</p></li><li class="list__item" id="01c9838d"><p>逐步执行程序</p></li><li class="list__item" id="1356bd7d"><p>创建了一只手表</p></li><li class="list__item" id="877d3982"><p>评估表达式</p></li></ul>    </div>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月6日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="creating-and-running-your-first-python-project.html">步骤1。创建并运行您的第一个Python项目</a> <a class="navigation-links__next" href="testing-your-first-python-application.html">步骤3。测试您的第一个Python应用程序</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>