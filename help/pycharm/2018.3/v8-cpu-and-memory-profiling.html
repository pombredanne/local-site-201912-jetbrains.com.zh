<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta name="robots" content="noindex"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta charset="UTF-8"><title>V8 CPU and Memory Profiling - Help | PyCharm</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="V8_CPU_and_Memory_Profiling"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search PyCharm Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PyCharm 2018.3 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Windows/Linux Default</option><option data-group="primary" value="primary_default_for_gnome">GNOME</option><option data-group="primary" value="primary_default_for_kde">KDE</option><option data-group="primary" value="primary_default_for_xwin">XWin</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="secondary_intellij_idea_classic_os_x">IntelliJ IDEA Classic (Mac OS X)</option><option data-group="secondary" value="secondary_xcode">Xcode</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_resharper">ReSharper</option><option data-group="secondary" value="secondary_resharper_osx">ReSharper (Mac OS X)</option><option data-group="secondary" value="secondary_emacs">Emacs (Mac OS X)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="true"><h1 data-toc="V8_CPU_and_Memory_Profiling" id="V8_CPU_and_Memory_Profiling.xml">V8 CPU and Memory Profiling</h1>         <aside class="warning " data-title="" rel="V8_CPU_and_Memory_Profiling.xml" id="f6c88201"><p>        This feature is only supported in the <b id="7d015ca8" origin="intellij-platform">Professional</b> edition.         This edition is commercial, and it provides an outstanding set of features:          see the <a href="/pycharm/features/editions_comparison_matrix.html" data-external="true" target="_blank" rel="noopener noreferrer"><span>comparison matrix</span></a> for more details.    </p></aside>        <p id="1a57fb10">            As you may know, <a href="https://code.google.com/p/v8/" data-external="true" target="_blank" rel="noopener noreferrer"><span>V8</span></a> is an open-source JavaScript engine            developed by Google.            It is used in Google <span class="emphasis">Chrome</span>, <a href="http://www.chromium.org/Home" data-external="true" target="_blank" rel="noopener noreferrer"><span>Chromium</span></a>, <span class="emphasis">Node.js</span>,            and <a href="https://iojs.org/en/index.html" data-external="true" target="_blank" rel="noopener noreferrer"><span>io.js</span></a>.        </p>        <p id="4bb68272">            <span class="emphasis">V8</span>            has a sampling CPU profiler <span class="emphasis">V8 profiler</span> which is intended for capturing and analyzing            CPU profiles and heap snapshots            for your <span class="emphasis">Node.js</span> applications. With V8 CPU profiling you can get a better understanding            of which parts of your code take up the most CPU time,            and how your code is executed and optimized by the V8 JavaScript engine.        </p>        <p id="97df75f7">            You can also open and explore profiles and snapshots captured in Google Chrome DevTools for your client-side            code.        </p>    <div class="chapter"><h2 id="dbe54d8f" data-toc="V8_CPU_and_Memory_Profiling#dbe54d8f">Why is profiling important</h2>        <ul class="list _bullet"><li class="list__item" id="0b0b0d3d"><p>                A carefully designed algorithm can make your code faster and manage your memory consumption better, even                more efficiently than the virtual machine can.                Profiling is the way to look inside the execution of your code and prove your assumptions about your                design decisions.            </p></li><li class="list__item" id="2e2d2889"><p>                Profiling is especially relevant for JavaScript, which is a powerful language with advanced features                like dynamic typing, closures,                and even the ability to create code at runtime. Therefore the behavior of the JavaScript engine is quite                sophisticated,                and there are cases when you really need to go deep into the details of how the engine works.                Some of the code patterns you use need being tweaked to allow the JavaScript optimizer to do its work.            </p></li><li class="list__item" id="f4d7a8b1"><p>                JavaScript is by no means a simple language to judge if your code manages memory well.                Closure memory leaks are a good illustration of the fact that code that looks good and simple may still                cause leaks.            </p></li></ul>    </div>    <div class="chapter"><h2 id="ws_v8_profiling_preparing" data-toc="V8_CPU_and_Memory_Profiling#ws_v8_profiling_preparing">Preparing for V8 CPU and memory heap profiling</h2>        <aside class="tip sideblock" data-title="" rel="ws_v8_profiling_preparing" id="3aae3dbb">            <p id="7f3201f6">                        Before you start, make sure you have <a href="http://nodejs.org/" data-external="true" target="_blank" rel="noopener noreferrer"><span>Node.js</span></a> on your computer.                </p>        </aside>        <aside class="tip sideblock" data-title="" rel="install_v8_via_ui" id="9ab3c1af">            <p id="5106bd71">                                You can also install the <code class="code" data-lang="Java">v8-profiler</code> package on the <a href="node-js.html">Node.js and NPM page</a>        as described in <a href="installing-and-removing-external-software-using-node-package-manager.html"><span>npm and Yarn</span></a>.                </p>        </aside>        <p id="c50130e8">            V8 CPU profiling is provided through the PyCharm built-in functionality, so you do not need to install any            additional software.        </p>        <p id="install_v8_via_ui">            V8 memory heap profiling is provided through the            globally installed <a href="https://www.npmjs.com/package/v8-profiler" data-external="true" target="_blank" rel="noopener noreferrer"><span>v8-profiler</span></a>            package.                    </p>        <p id="87ef940b">            <span class="emphasis">To install v8-profiler globally</span><br>                            Open the built-in PyCharm <span class="control">Terminal</span> (<kbd data-primary_default="Alt+F12" data-primary_default_for_gnome="Alt+F12" data-primary_default_for_kde="Alt+F12" data-primary_default_for_xwin="Alt+F12" data-primary_emacs="Alt+F12" data-primary_visual_studio="Alt+F12" data-primary_netbeans="Alt+F12" data-primary_eclipse="Alt+F12" data-secondary_mac_os_x_10.5_="⌥F12" data-secondary_mac_os_x="⌥F12" data-secondary_eclipse_mac_os_x="⌥F12" data-secondary_intellij_idea_classic_os_x="N/A" data-secondary_xcode="N/A" data-secondary_visual_studio="⌥F12" data-secondary_resharper="N/A" data-secondary_resharper_osx="N/A" data-secondary_emacs="⌥F12">Alt+F12</kbd>)                and type <code class="code" data-lang="Java">npm install&nbsp;-g v8-profiler</code> at the command prompt.        </p>    </div>    <div class="chapter"><h2 id="ws_node_cpu_profiling" data-toc="V8_CPU_and_Memory_Profiling#ws_node_cpu_profiling">CPU profiling</h2>        <p id="30f646d4">            With V8 CPU profiling you can get a better understanding of which parts of your code take up the most CPU            time,            and how your code is executed and optimized by the V8 JavaScript engine.        </p>        <p id="4e0a0f2d">            To identify the processes that consume most of your CPU, you can use two methods: <span class="emphasis">sampling        </span> and <span class="emphasis">tracing</span>.            <ul class="list _bullet"><li class="list__item" id="e79a0665">                    When the <span class="emphasis">sampling</span> method is applied, you periodically record stack traces of                    your application.                    The periods between records are measured in conventional units referred to as <span class="emphasis">                    ticks</span>.                    <p id="cff5a0d0">                        This method does not guarantee very good accuracy or precision for the following reason:                        snapshots are taken at random moments therefore any function can happen to be recorded in a                        snapshot.                        However, sampling can give us a rough picture of where the most of time is spent.                                            </p>                </li><li class="list__item" id="c1b1ca02"><p>                    When the <span class="emphasis">tracing</span> method is used, we actively record tracing information by                    ourselves, directly in the code.                    It is obviously better to get exact measurements of how much time each method took,                    and also allows you to count how many times the traced method was called.                    The disadvantage of this method is that it comes with bigger <span class="emphasis">result distortion</span> compared                    to <span class="emphasis">sampling</span>.                </p></li></ul>        </p>        <p id="00e8b471">            <span class="emphasis">Result Distortion</span>. Both sampling and tracing introduce delays into execution and            therefore influence the profiling results.            With sampling, delays can be estimated as some fixed amount of time for each sampling event and do not            introduce greater distortion than the sampling method itself            (i.e. the delay is much shorter than the sampling interval).            With tracing, the profiling delay depends on the code and the places where we made tracing measurements.            For instance, if a traced method is called inside other traced methods numerously, all inner delays will            accumulate for the outer method.            If so, it may be difficult to separate the execution time from tracing distortion.        </p>        <p id="6e52a493">            Usually we use sampling and tracing methods together. We start with sampling to get an idea of which parts            of our code take the most time,            and then instrument the code with tracing calls to zero on the issues.        </p>        <p id="98154db7">            Measurements are made not only for the work of your code, but also for the activities performed by the engine itself, such as compilation,            calls of system libraries, optimization, and garbage collection.            The following time metrics are made for execution of functions themselves and for performing activities:            <ul class="list _bullet"><li class="list__item" id="d81e96cf"><p>                    <span class="emphasis">Total</span>: the number of ticks (the time) during which a function was executed or                    an activity was performed.                </p></li><li class="list__item" id="b750d457"><p><span class="emphasis">Total%</span>: the ratio of a function/activity execution time to the entire time when                    measurements were made.                </p></li><li class="list__item" id="16b9acbc"><p><span class="emphasis">Self</span>: the pure execution time of a function/activity itself, without the time                    spent on executing functions called by it.                </p></li><li class="list__item" id="942b2130"><p><span class="emphasis">Self%</span>: the ratio of the pure execution time of a function/activity to the                    entire time when the measurements were made.                </p></li><li class="list__item" id="9d05897e"><p><span class="emphasis">Of Parent</span>: the ratio of the pure execution time of a function to the execution                    time of the function that called it (<span class="emphasis">Parent</span>).                </p></li></ul>        </p>        <div class="chapter"><h3 id="ws_node_configuring_cpu_profiling">Configuring CPU profiling</h3>                <p id="02d9f0d7">                    To invoke V8 CPU profiling on application start, you need to specify additional settings                    in the <span class="control">Node.js</span> run configuration according to which the application will be                    launched.                </p>            <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="9c4bd162"><p>                                Choose <span data-skip-index="skip" class="menupath">Run | Edit Configuration</span> on the main menu.                                                    Click <img class="inline-icon-16" src="/help/img/idea/2018.3/icons.general.add@2x.png" width="16" alt="icons general add"> on the toolbar  and select <span class="control">Node.js</span> from the pop-up list.                    </p></li><li class="list__item" id="c771fed6"><p>                    From the list, choose the <span class="emphasis">Node.js</span> run configuration to activate CPU Profiling                    in or                    create a new configuration                    as described in <a href="running-and-debugging-node-js.html"><span>Running and Debugging Node.js</span></a>.                </p></li><li class="list__item" id="b99e03ff">                    Switch to the <span class="control">V8 Profiling</span> pane and specify the following:                    <ol class="list _decimal"><li class="list__item" id="f027cfde"><p>                            Select the <span class="control">Record CPU profiling info</span> checkbox.                        </p></li><li class="list__item" id="02753d34"><p>                            In the <span class="control">Log folder</span> field, specify the folder to store recorded logs in.                            Profiling data are stored in V8 log files <code class="code" data-lang="Java">isolate-&lt;session number&gt;</code>.                        </p></li></ol>                </li></ol></section>        </div>        <div class="chapter"><h3 id="ws_node_collecting_cpu_profiling_data">Collecting CPU profiling information</h3>            <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="362b8e6d"><p>                    Select the run configuration from the list on the main toolbar and then choose <span data-skip-index="skip" class="menupath">Run | Run                    &lt;configuration name&gt;                </span> on the main menu                    or click <span class="control">Run</span> <img class="inline-icon-16" src="/help/img/idea/2018.3/icons.toolwindows.toolWindowRun.svg@2x.png" width="16" alt="icons toolwindows toolWindowRun svg">.                </p></li><li class="list__item" id="96b2faf6"><p>                    When the scenario that you need to profile is executed, stop the process by clicking                    the                    <span class="control">Stop</span> <img class="inline-icon-16" src="/help/img/idea/2018.3/icons.actions.suspend.svg@2x.png" width="16" alt="icons actions suspend svg"> toolbar button.                </p></li></ol></section>            <p id="d652474d">                V8 log file will be processed by V8 scripts to calculate averaged call traces.                PyCharm opens the                <a href="v8-profiling-tool-window.html">V8 Profiling Tool Window</a>.            </p>        </div>        <div class="chapter"><h3 id="ws_node_analyzing_cpu_profiling_data">Analyzing CPU profiling information</h3>            <p id="9c1fde87">                Analyzing the profiling logs is available after the process stops because currently stopping and                restarting profiling during execution of an application is not supported.            </p>            <p id="c22bcaf6">                The collected profiling data is displayed in the                <a href="v8-profiling-tool-window.html">V8 Profiling Tool Window</a>                which PyCharm opens automatically when you stop your application.                        If the window is already opened and shows the profiling data for another session, a new tab is added. Tabs that were opened automatically are named after the run configurations        that control execution of the applications and  collecting the profiling data.                </p>            <p id="6f91f825">                        If you want to open and analyze some previously saved profiling data, choose <span data-skip-index="skip" class="menupath">V8 Profiling - Analyze V8 Profiling Log</span> on the main menu        and select the relevant V8 log file <code class="code" data-lang="Java">isolate-&lt;session number&gt;</code>. PyCharm creates a separate tab with the name of the log file.                </p>            <div class="chapter"><h4 id="ws_node_exploring_call_trees">Exploring call Trees</h4>                    <p id="900e6d82">                                Based on the collected profiling data, PyCharm builds three call trees and displays each of them in a separate pane.        Having several call trees provides the possibility to analyze the application execution from two different points of view: on the one hand,        which calls were time consuming ("heavy"), and on the other hand, "who called whom".                        </p>                    <ul class="list _bullet"><li class="list__item" id="f5ebe9bd"><p>                                    The <span class="control">Top Calls</span> pane shows a list of performed activities sorted in the descending order by the <span class="emphasis">Self</span> metrics.        For each activity PyCharm displays its <span class="emphasis">Total</span>, <span class="emphasis">Total%</span>, and <span class="emphasis">Self%</span> metrics.                For each function call, PyCharm displays the name of the file, the line, and the  column where the function is defined.                                    <figure><img alt="v8ProfilerCPUTopCalls.png" title="v8ProfilerCPUTopCalls.png" src="/help/img/idea/2018.3/v8ProfilerCPUTopCalls.png" id="3ea84dcc" width="625" height="319"></figure>                                    The diagram in the <span class="control">Overview</span> pane shows distribution of self time for calls        with the <span class="emphasis">Self%</span> metrics above 1%.                                <figure><img alt="v8ProfilerCPUTopCallsOverviewPane.png" title="v8ProfilerCPUTopCallsOverviewPane.png" src="/help/img/idea/2018.3/v8ProfilerCPUTopCallsOverviewPane.png" id="a2ef45bc" width="442" height="283"></figure>                        </p></li><li class="list__item" id="0b686636">                                    The <span class="control">Bottom-up</span> pane also shows the performed activities sorted in the descending order by the <span class="emphasis">Self</span> metrics. Unlike the <span class="control">Top Calls</span> pane,        the <span class="control">Bottom-up</span> pane shows only the activities with the <span class="emphasis">Total%</span> metrics above 2 and the functions that called them. This is helpful if you encounter        a <span class="emphasis">heavy</span> function and want to find out where it was called from.        <p id="b0f1e5cb">            For each activity PyCharm displays its execution time in <span class="emphasis">ticks</span> and the <span class="emphasis">Of Parent</span> metrics.                    For each function call, PyCharm displays the name of the file, the line, and the  column where the function is defined.            </p>                            </li><li class="list__item" id="e59e5dcb">                                    The <span class="control">Top-down</span> pane shows the entire call hierarchy with the functions that are execution entry points at the top.        For each activity PyCharm displays its <span class="emphasis">Total</span>, <span class="emphasis">Total%</span>, <span class="emphasis">Self</span>, and <span class="emphasis">Self%</span> metrics.                For each function call, PyCharm displays the name of the file, the line, and the  column where the function is defined.                                            Some of the functions may have been optimized by V8, see <a href="http://floitsch.blogspot.de/2012/03/optimizing-for-v8-introduction.html" data-external="true" target="_blank" rel="noopener noreferrer"><span>Optimizing for V8</span></a> for details.        <ul class="list _bullet"><li class="list__item" id="446f1828"><p>                The functions that have been optimized are marked with an asterisk (<code class="code" data-lang="Java">*</code>) before the function name.            </p></li><li class="list__item" id="d20d4f00"><p>                The functions that possibly require optimization but still have not been optimized                are marked with a tilde (<code class="code" data-lang="Java">~</code>) character before the function name.                Though optimization may be delayed by the engine or skipped if the code is short-running,                a tilde (<code class="code" data-lang="Java">~</code>) points at a place where the code can be rewritten to achieve better performance.            </p></li></ul>                                <figure><img alt="v8ProfilerCPUTrees.png" title="v8ProfilerCPUTrees.png" src="/help/img/idea/2018.3/v8ProfilerCPUTrees.png" id="6b17ba30" width="625" height="282"></figure>                        </li></ul>                    <section class="procedure-steps"><ul class="list "><li class="list__item" id="544f8878"><p>                            To navigate to the source code of a function, select the function in question in the tree                            and                            click                            <img class="inline-icon-16" src="/help/img/idea/2018.3/icons.actions.edit.svg@2x.png" width="16" alt="icons actions edit svg">                            on the toolbar                            or choose <span class="control">Jump to source</span> on the context menu of the selection.                            The file with the source code of the selected function is opened in the editor with the                            cursor                            positioned at the function.                        </p></li><li class="list__item" id="47036242"><p>                                    When a tab for a profiling session is opened, by default the nodes with heaviest calls are expanded. While exploring the trees, you may like to fold some nodes or expand other ones.                                To restore the original tree presentation, click the <span class="control">Expand Heavy Traces</span> button                            <img alt="icon_expand_heavy_calls.png" title="icon_expand_heavy_calls.png" src="/help/img/idea/2018.3/icon_expand_heavy_calls.png" id="45beeae2" width="15" height="15" class="inline-icon-15">                            on the toolbar.                        </p></li><li class="list__item" id="85e22c81">                            To have PyCharm display only the calls that indeed cause performance problems, filter out                            light calls:                            <ol class="list _decimal"><li class="list__item" id="1c9152b6"><p>                                    Click the <span class="control">Filter</span> button                                    <img class="inline-icon-16" src="/help/img/idea/2018.3/icons.general.filter.svg@2x.png" width="16" alt="Filter">                                    on the toolbar.                                </p></li><li class="list__item" id="de93186e"><p>                                            Using the slider, specify the minimum <span class="emphasis">Total%</span> or <span class="emphasis">Parent%</span> value for a call to be displayed and click <span class="control">Done</span>.                                    </p></li></ol>                        </li><li class="list__item" id="1abdbb54"><p>                            To expand or collapse all the nodes in the active pane, click                            <img class="inline-icon-16" src="/help/img/idea/2018.3/icons.actions.expandall.svg@2x.png" width="16" alt="icons actions expandall svg">                            or                            <img class="inline-icon-16" src="/help/img/idea/2018.3/icons.actions.collapseall.svg@2x.png" width="16" alt="icons actions collapseall svg">                            on the toolbar respectively.                        </p></li><li class="list__item" id="20fd0d48"><p>                            To expand or collapse a node, select it and choose <span class="control">Expand Node</span> or <span class="control">                            Collapse Node                        </span> on the context menu of the selection.                        </p></li><li class="list__item" id="8fcc0fe5">                            Save and compare calls and lines:                            <ul class="list _bullet"><li class="list__item" id="c8ed8c26"><p>                                    To save a line with a function and its metrics, select the function and choose <span class="control">                                    Copy                                </span> on the context menu of the selection.                                            This may be helpful if you want to compare the measurements for a function from two sessions, for example, after you make some improvements to the code.                                    </p></li><li class="list__item" id="6839ff10"><p>                                    To save only the function name and the name of the file where the function is                                    defined,                                    select the function and choose <span class="control">Copy Call</span> on the context menu of                                    the                                    selection.                                </p></li><li class="list__item" id="c952e2af"><p>                                    To compare an item with the contents of the Clipboard, select the item in question                                    and                                    choose <span class="control">Compare With Clipboard</span> on the context menu of the                                    selection.                                    Compare the items in the <span class="emphasis">Difference Viewer</span> that opens.                                </p></li></ul>                        </li><li class="list__item" id="8da6beaa"><p>                            To save the call tree in the current pane to a text file, click                            <img class="inline-icon-16" src="/help/img/idea/2018.3/icons.toolbarDecorator.export.svg@2x.png" width="16" alt="icons toolbarDecorator export svg">                            on the toolbar and specify the target file in the dialog box that opens.                        </p></li></ul></section>            </div>            <div class="chapter"><h4 id="ws_node_profiling_analyzing_flame_chart">Analyzing the Flame chart</h4>                        <p id="3d4e61de">            Use the multicolor chart in the <span class="control">Flame Chart</span> tab to find where the application paused and explore the calls that provoked these pauses.            The chart consists of four areas:        </p>        <ul class="list _bullet"><li class="list__item" id="60a1fbe2"><p>                The upper area shows a timeline with two sliders to limit the beginning and the end of a fragment to investigate.            </p></li><li class="list__item" id="c744f292"><p>                The bottom area shows a stack of calls in the form of a multicolor chart. When called for the first time, each function is assigned a random color,                whereupon every call of this function within the current session is shown in this color.            </p></li><li class="list__item" id="6a4a3966"><p>                The middle area shows a summary of  calls from the <span class="emphasis">Garbage Collector</span>, the engine, the external calls,                and the execution itself. The  colors reserved for the <span class="emphasis">Garbage Collector</span>, the engine, the external calls,                and the execution are listed on top of the area:                <figure><img alt="v8_flame_chart_reserved_colors.png" title="v8_flame_chart_reserved_colors.png" src="/help/img/idea/2018.3/v8_flame_chart_reserved_colors.png" id="95c1a191" width="236" height="22"></figure>            </p></li><li class="list__item" id="dfdd6400"><p>                The right-hand pane lists the calls within a selected fragment, for each call the list shows its duration, the name of the called function,                and file where the function is defined.            </p></li></ul>                    <div class="chapter"><h5 id="4a6c289f">Selecting a Fragment in the Timeline</h5>                            <p id="2ff6ba18">To explore  the processes within a certain period of time, you need to select the fragment in question. You can do it in two ways:</p>        <ul class="list _bullet"><li class="list__item" id="7ef0cb4d"><p>                Use the sliders:                <figure><img alt="v8_flame_chart_sliders.png" title="v8_flame_chart_sliders.png" src="/help/img/idea/2018.3/v8_flame_chart_sliders.png" id="62a13bca" width="184" height="63"></figure>            </p></li><li class="list__item" id="18a0f700"><p>                Click the <span class="emphasis">window</span> between two sliders and drag it to the required fragment:                <figure><img alt="v8_flame_chart_window_between_sliders.png" title="v8_flame_chart_window_between_sliders.png" src="/help/img/idea/2018.3/v8_flame_chart_window_between_sliders.png" id="cbfa9954" width="184" height="62"></figure>            </p></li></ul>        <p id="d113d9ed">            In either case, the multicolor chart below shows the stack of calls within the selected fragment.        </p>        <p id="238f2edb">            To enlarge the chart, click the selected fragment and then click the <span class="control">Zoom</span> button <img class="inline-icon-16" src="/help/img/idea/2018.3/artwork.icons.zoomIn@2x.png" width="16" alt="artwork icons zoomIn">            on the toolbar. PyCharm opens a new tab and shows the selected fragment enlarged to fit the tab width so you can examine the fragment with more details.        </p>                    </div>                <div class="chapter"><h5 id="197c3528">Synchronization in the Flame chart</h5>                            <p id="96e162f0">            The bottom and the right-hand areas are synchronized: as you drag the slider in the bottom area through the timeline            the focus in the right-hand pane moves to the call that was performed at each moment.        </p>        <p id="c9073a90">            Moreover, if you click a call in the bottom area, the slider moves to it automatically            and the focus in the right-hand pane switches to the corresponding function, if necessary the list scrolls automatically.            And vice versa, if you click an item in the list, PyCharm selects the corresponding call in the bottom area            and drags the slider to it automatically:            <figure><img alt="v8_flame_chart_.bottom_area.png" title="v8_flame_chart_.bottom_area.png" src="/help/img/idea/2018.3/v8_flame_chart_.bottom_area.png" id="99657a2c" width="689" height="510"></figure>        </p>        <p id="4bd72766">            PyCharm supports navigation from the right-hand area to the source code of called functions, to the other panes of the tool window, and to areas in the flame chart with specific metrics.        </p>        <ul class="list _bullet"><li class="list__item" id="3d751d77"><p>                To jump to the source code of a called function, select the call in question                and choose <span class="control">Jump to Source</span> on the context menu of the selection.            </p></li><li class="list__item" id="58ada197">                To switch to another pane, select the call in question, choose <span class="control">Navigate To</span> on the context menu of the selection and then choose the destination:                <ul class="list _bullet"><li class="list__item" id="c60c7516"><span class="control">Navigate in Top Calls</span></li><li class="list__item" id="2106018f"><span class="control">Navigate in Bottom-up</span></li><li class="list__item" id="0fb893e0"><span class="control">Navigate in Top-down</span></li></ul>                PyCharm switches to the selected pane and moves the focus to the call in question.            </li><li class="list__item" id="6b1fcb36">                To have the flame chart zoomed at the fragments with specific metrics of a call, select the call in question, choose <span class="control">Navigate To</span> on the context menu of the slection,                and then choose the metrics:                <ul class="list _bullet"><li class="list__item" id="60e08189"><span class="control">Navigate to Longest Time</span></li><li class="list__item" id="c901e024"><span class="control">Navigate to Typical Time</span></li><li class="list__item" id="8bfa3742"><span class="control">Navigate to Longest Self Time</span></li><li class="list__item" id="aa4cfde3"><span class="control">Navigate to Typical Self Time</span></li></ul>            </li></ul>        <p id="c1c34a43">            You can also navigate to the stack trace of a call to view and analyze exceptions. To do that, select the call in question and choose <span class="control">Show As Stack Trace</span>. PyCharm opens the stack trace in a separate tab,            to return to the <span class="control">Flame Chart</span> pane, click <span class="control">V8 CPU Profiling</span>  tool window button in the bottom tool window.        </p>                    </div>            </div>        </div>    </div>    <div class="chapter"><h2 id="ws_node_memory_profiling" data-toc="V8_CPU_and_Memory_Profiling#ws_node_memory_profiling">Memory profiling</h2>        <p id="60b3d144">            Though the <span class="emphasis">V8</span> JavaScript engine does memory management for you,            memory leaks or dynamic memory problems are still possible. Here are some examples of memory leaks or            shortcomings reasons:            <ul class="list _bullet"><li class="list__item" id="278452ca"><p>                    Using global objects to store collections of data, with complicated free policies.                </p></li><li class="list__item" id="ee85f84e"><p>                    Errors in usages of closures: closures keep references onto outside objects.                </p></li><li class="list__item" id="a8bd293b"><p>                    Keeping detached DOM nodes in javascript variables.                </p></li><li class="list__item" id="60afdce4"><p>                    Too frequent memory allocation.                </p></li></ul>            Memory management control is especially important for <span class="emphasis">Node.js</span> applications,            because the server-side code tend to run long while memory inaccuracy is accumulated.        </p>        <p id="a271c492">            <span class="emphasis">V8 heap snapshots</span>            are complicated by their nature;            they include many “engine” objects; the inner structure of objects differs from what you expect while            reading your code.            Learn more at <a href="https://developer.chrome.com/devtools/docs/javascript-memory-profiling" data-external="true" target="_blank" rel="noopener noreferrer"><span>JavaScript Memory Profiling</span></a>.        </p>        <div class="chapter"><h3 id="ws_node_configuring_memory_profiling">Configuring memory profiling</h3>                <p id="c3810b78">                    To allow taking memory snapshots, you need to specify additional settings                    in the <span class="control">Node.js</span> run configuration according to which the application will be                    launched.                </p>            <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="0dd602e6"><p>                                Choose <span data-skip-index="skip" class="menupath">Run | Edit Configuration</span> on the main menu.                        </p></li><li class="list__item" id="808179a6"><p>                    Click <img class="inline-icon-16" src="/help/img/idea/2018.3/icons.general.add@2x.png" width="16" alt="Add icon"> and choose the <span class="emphasis">Node.js</span> run configuration to activate CPU Profiling                    in or                    create a new configuration                    as described in <a href="running-and-debugging-node-js.html"><span>Running and Debugging Node.js</span></a>.                </p></li><li class="list__item" id="1a3c77b1"><p>                    Switch to the <span class="control">V8 Profiling</span> pane and select the <span class="control">Allow taking heap snapshots</span> checkbox.                </p></li></ol></section>            <p id="b12bc866">                To take memory snapshots of an application running on a Docker container,                select the <span class="control">Auto configure</span> checkbox and add <span class="emphasis">v8-profiler</span> to                your <code class="code" data-lang="Java">package.json</code> file,                then switch to the <span class="control">V8 profiling</span> tab and specify the path as <code class="code" data-lang="Java">./node_modules/v8-profiler</code>.            </p>        </div>        <div class="chapter"><h3 id="ws_node_collecting_memory_profiling_data">Collecting memory profiling information</h3>            <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="e8f6edcc"><p>                    Select the run configuration from the list on the main toolbar and then choose <span data-skip-index="skip" class="menupath">Run | Run                    &lt;configuration                    name&gt;                </span> on the main menu                    or click <span class="control">Run</span> <img class="inline-icon-16" src="/help/img/idea/2018.3/icons.toolwindows.toolWindowRun.svg@2x.png" width="16" alt="icons toolwindows toolWindowRun svg">.                </p></li><li class="list__item" id="0cab1bed"><p>                    At any time during the application execution, click the <span class="control">Take Heap Snapshot</span> button                    <img alt="ws v8 profiling take snapshot" title="ws v8 profiling take snapshot" src="/help/img/idea/2018.3/ws_v8_profiling_take_snapshot.png" id="1208ddbd" width="15" height="15" class="inline-icon-15">                    on the toolbar of the <span class="control">Run</span> tool window.                </p></li><li class="list__item" id="53cd1a6f"><p>                    In the dialog box that opens, choose the folder to store the taken snapshot in and specify the name                    to                    save the snapshot file with.                    To start analyzing the snapshot immediately, select the <span class="control">Open snapshot</span> checkbox.                </p></li><li class="list__item" id="7dfe3ffa"><p>                    Click <span class="control">OK</span> to save the snapshot.                </p></li></ol></section>        </div>        <div class="chapter"><h3 id="ws_node_analyzing_memory_profiling_data">Analyzing memory profiling information</h3>            <p id="4a7382d6">                The collected profiling data is displayed in the                <a href="v8-heap-tool-window.html">V8 Heap Tool Window</a>,                which opens when you take a snapshot at choose to open it.                        If the window is already opened and shows the profiling data for another session, a new tab is added. Tabs that were opened automatically are named after the run configurations        that control execution of the applications and  collecting the profiling data.                </p>            <p id="0ebcb07d">                        If you want to open and analyze some previously saved mempry profiling data, choose <span data-skip-index="skip" class="menupath">V8 Profiling - Analyze V8 Heap Snapshot</span> on the main menu        and select the relevant <code class="code" data-lang="Java">.snapshot</code> file. PyCharm creates a separate tab with the name of the selected file.                </p>            <p id="06d03e9e">                The tool window has three tabs that present the collected information from difference point of views.                <ul class="list _bullet"><li class="list__item" id="bfcd8890">                                The <span class="control">Containment</span> tab shows the objects in your application grouped under several top-level entries: <span class="emphasis">DOMWindow objects</span>,        <span class="emphasis">Native browser objects</span>, and  <span class="emphasis">GC Roots</span>, which are roots the <span class="emphasis">Garbage Collector</span> actually uses.        See <a href="https://developer.chrome.com/devtools/docs/javascript-memory-profiling#containment-view" data-external="true" target="_blank" rel="noopener noreferrer"><span>Containment View</span></a> for details.                            <p id="2dbaa34d">                                    For each object, the tab shows its <span class="emphasis">distance from the GC root</span>, that is the shortest simple path of nodes between the object and the GC root,        the <a href="https://developer.chrome.com/devtools/docs/javascript-memory-profiling#shallow-size" data-external="true" target="_blank" rel="noopener noreferrer"><span>shallow size</span></a>  of the object,        and the <a href="https://developer.chrome.com/devtools/docs/javascript-memory-profiling#retained-size" data-external="true" target="_blank" rel="noopener noreferrer"><span>retained size</span></a> of the object.        Besides the absolute values of the object's size, PyCharm shows the percentage of memory the object occupies.                            </p>                    </li><li class="list__item" id="b394ae53"><p>                                The <span class="control">Biggest Objects</span> tab shows the most memory-consuming objects        sorted by their <a href="https://developer.chrome.com/devtools/docs/javascript-memory-profiling#retained-size" data-external="true" target="_blank" rel="noopener noreferrer"><span>retained sizes</span></a>.        In this tab, you can spot memory leaks provoked by accumulating data in some global object.                        </p></li><li class="list__item" id="e883ca8c"><p>                                The <span class="control">Summary</span> tab shows the objects in your application grouped by their types.        The tab shows the number of objects of each type, their size, and the percentage of memory that they occupy.        This information may be a clue to the memory state.                        </p></li></ul>            </p>            <p id="cc63b136">                        Each tab has a <span class="control">Details</span> pane, which shows the path to the currently selected object from GC roots        and the list of object’s <span class="emphasis">retainers</span>, that is, the objects that keep links to the selected object.        Every heap snapshot has many “back” references and loops, so there are always many retainers for each object.                </p>            <div class="chapter"><h4 id="ws_node_memory_profiling_navigating_through_snapshot">Navigating through a snapshot</h4>                <section class="procedure-steps"><ul class="list "><li class="list__item" id="ddcd18f0"><p>                                To help differentiate objects and move from one to another without losing the context, mark objects with text labels.        To set a label to an object, select the object of interest and click <img alt="ws_v8_profiling_mark.png" title="ws_v8_profiling_mark.png" src="/help/img/idea/2018.3/ws_v8_profiling_mark.png" id="e947c2ba" width="14" height="15" class="inline-icon-14">        on the toolbar or choose <span class="control">Mark</span> on the context menu of the selection. Then type the label to mark the object with in the dialog box that opens.                        </p></li><li class="list__item" id="1a2a9d6d">                                To navigate to the function or variable that corresponds to an object, select the object of interest and click        <img class="inline-icon-16" src="/help/img/idea/2018.3/icons.actions.edit.svg@2x.png" width="16" alt="icons actions edit svg"> on the toolbar        or choose <span class="control">Edit Source</span> on the context menu of the selection. If the button and the menu option are disabled, this means that PyCharm has not found a function        or a variable that corresponds to the selected object.        <p id="c46c6c74">            If several functions or variables are found, they are shown in a pop-up suggestion list.        </p>                        </li><li class="list__item" id="bb3fdbbd"><p>                                To jump from an object in the <span class="control">Biggest Objects</span> or <span class="control">Summary</span> tab or <span class="control">Occurrences</span> view to the same object in the <span class="control">Containment</span> tab,        select the object in question in the <span class="control">Biggest Objects</span> or <span class="control">Summary</span> tab        and click <img alt="ws_v8_profiling_navigate_in_main_tree.png" title="ws_v8_profiling_navigate_in_main_tree.png" src="/help/img/idea/2018.3/ws_v8_profiling_navigate_in_main_tree.png" id="3b764095" width="15" height="15" class="inline-icon-15"> on the toolbar        or choose <span class="control">Navigate in Main Tree</span> on the context menu of the selection.                This helps you investigate the object from the containment point of view and concentrate on the links between objects.                            </p></li><li class="list__item" id="6b792806">                                To search through a snapshot:        <ol class="list _decimal"><li class="list__item" id="a1b28654"><p>                In the <span class="control">Containment</span> tab, click <img class="inline-icon-16" src="/help/img/idea/2018.3/icons.actions.find.svg@2x.png" width="16" alt="icons actions find svg"> on the toolbar.            </p></li><li class="list__item" id="0a68d361">                In the                <a href="v8-heap-search-dialog.html">V8 Heap Search Dialog</a>                that opens, specify the search pattern and the scope to search in. The available scopes are:                <ul class="list _bullet"><li class="list__item" id="9741ccdc"><p>            <span class="control">Everywhere:</span> select this checkbox to search in all the scopes.            When this checkbox is selected, all the other search types are disabled.        </p></li><li class="list__item" id="33416f53">            <span class="control">Link Names:</span> select this checkbox to search among the object names that <span class="emphasis">V8</span> creates            when calling the <span class="emphasis">C++ runtime</span>,            see <a href="http://stackoverflow.com/questions/11202824/what-is-in-javascript" data-external="true" target="_blank" rel="noopener noreferrer"><span>http://stackoverflow.com/questions/11202824/what-is-in-javascript</span></a>.            <p id="230959f0">                In the                <a href="v8-heap-tool-window.html">V8 Heap Tool Window</a>,                link names are marked with the <code class="code" data-lang="Java">%</code> character (<code class="code" data-lang="Java">%&lt;link name&gt;</code>).            </p>        </li><li class="list__item" id="7e49d3af"><p>            <span class="control">Class Names:</span> select this checkbox to search among functions-constructors.        </p></li><li class="list__item" id="119111c9"><p>            <span class="control">Text Strings:</span> select this checkbox to perform a textual search in the contents of the objects.        </p></li><li class="list__item" id="8b331971">            <span class="control">Snapshot Object IDs:</span> select this checkbox to search among the unique identifiers of objects.            <span class="emphasis">V8</span> assigns such a unique identifier in the format to each object when the object is created and            preserves it until the object is destroyed. This means that you can find and compare the same objects in several snapshots taken            within the same session.            <p id="94945007">                In the                <a href="v8-heap-tool-window.html">V8 Heap Tool Window</a>,                object IDs are marked with the <code class="code" data-lang="Java">@</code> character (<code class="code" data-lang="Java">@&lt;object id&gt;</code>).            </p>        </li><li class="list__item" id="8dd04679"><p>            <span class="control">Marks:</span> select this checkbox to search among the labels you set to objects manually            by clicking <img alt="ws_v8_profiling_mark.png" title="ws_v8_profiling_mark.png" src="/help/img/idea/2018.3/ws_v8_profiling_mark.png" id="e149366e" width="14" height="15" class="inline-icon-14"> on the toolbar of the <span class="control">Containment</span> tab.        </p></li></ul>                <p id="07871153">                    The search results are displayed in the <span class="control">Details</span> pane, in a separate <span class="control">Occurrences of '&lt;search pattern&gt;'</span> view.                    To have the search results shown grouped by the search scopes you specified, press the <span class="control">Group by Type</span> toggle button on the toolbar.                </p>                <p id="6cec31b1">                    When you open the dialog box next time, it will show the settings from the previous search.                </p>            </li></ol>                        </li></ul></section>            </div>        </div>    </div>    <div class="last-modified" data-skip-index="skip">Last modified: 27 February 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="unit-testing-node-js.html">Testing Node.js</a><a class="navigation-links__next" href="installing-and-removing-external-software-using-node-package-manager.html">npm and Yarn</a></div><section class="seealso" data-skip-index="skip"><div class="seealso__header"><h2>See Also</h2></div><div class="seealso__content"><div class="seealso__col" data-skip-index="skip"><h3>Procedures:</h3><ul class="list"><li class="list__item"><a href="running-and-debugging-node-js.html"><span>Running and Debugging Node.js</span></a></li><li class="list__item"><a href="developing-node-js-applications.html"><span>Node.js</span></a></li></ul></div><div class="seealso__col" data-skip-index="skip"><h3>Reference:</h3><ul class="list"><li class="list__item"><a href="run-debug-configuration-node-js.html"><span>Run/Debug Configuration: Node.js</span></a></li><li class="list__item"><a href="v8-heap-tool-window.html"><span>V8 Heap Tool Window</span></a></li><li class="list__item"><a href="v8-profiling-tool-window.html"><span>V8 Profiling Tool Window</span></a></li></ul></div></div></section></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>