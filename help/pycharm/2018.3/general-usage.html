<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta name="robots" content="noindex"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta charset="UTF-8"><title>General Usage - Help | PyCharm</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="IntelliLang.General Usage"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search PyCharm Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PyCharm 2018.3 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default" selected>Windows/Linux Default</option><option data-group="primary" value="primary_default_for_gnome">GNOME</option><option data-group="primary" value="primary_default_for_kde">KDE</option><option data-group="primary" value="primary_default_for_xwin">XWin</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="secondary_mac_os_x">Mac OS X</option><option data-group="secondary" value="secondary_eclipse_mac_os_x">Eclipse (Mac OS X)</option><option data-group="secondary" value="secondary_intellij_idea_classic_os_x">IntelliJ IDEA Classic (Mac OS X)</option><option data-group="secondary" value="secondary_xcode">Xcode</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_resharper">ReSharper</option><option data-group="secondary" value="secondary_resharper_osx">ReSharper (Mac OS X)</option><option data-group="secondary" value="secondary_emacs">Emacs (Mac OS X)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="false"><h1 data-toc="IntelliLang.General Usage" id="General_Usage.xml">General Usage</h1>                       <aside class="warning " data-title="" rel="General_Usage.xml" id="db84df61"><p>                        The following is only valid when IntelliLang Plugin is installed and enabled!                </p></aside>                 <aside class="warning " data-title="" rel="General_Usage.xml" id="07fbf745"><p>        This feature is not available in the <b id="e03a7945" origin="intellij-platform">Educational</b> edition of PyCharm.    </p></aside>    <p id="0222270c">The plugin's usage is simple and straightforward, yet very flexible. Either add the provided set of annotations            to your project and start using them, configure the plugin to use a custom set of annotations or simply use        the UI configuration to make PyCharm learn that e.g. the String argument of            <code class="code" data-lang="Java">Pattern.compile()</code> should be treated as a regular expression.</p>    <div class="chapter"><h2 id="use-annotations" data-toc="IntelliLang.General Usage#use-annotations">Using the annotations</h2>    <p id="97331ac5">IntelliLang makes use of three base-annotations: <code class="code" data-lang="Java">@Language</code>,        <code class="code" data-lang="Java">@Pattern</code> and <code class="code" data-lang="Java">@Subst</code>.</p>    <ul class="list _ul"><li class="list__item" id="da91d878"><p><code class="code" data-lang="Java">@Language</code> is responsible for the Language injection feature.</p></li><li class="list__item" id="87b0b9fa"><p><code class="code" data-lang="Java">@Pattern</code> is used to validate Strings against a certain regular expression          pattern.</p></li><li class="list__item" id="60135dd1"><p><code class="code" data-lang="Java">@Subst</code> is used to substitute non-compile time constant expressions with a fixed          value. This allows you to validate patterns and build the prefix/suffix of an injected language (see below)          even for non-constant expressions that are known to contain certain kinds of values during runtime.</p></li></ul>            <p id="fc17e2e3">The annotations supplied with IntelliLang are located in the file <code class="code" data-lang="Java">annotations.jar</code>        which can be found in <code class="code" data-lang="Java">/plugins/IntelliLang/lib</code>.</p>    <div class="chapter"><h3 id="AtLanguage">@Language</h3>    <p id="387c2d89">The <code class="code" data-lang="Java">@Language</code> annotation can be used to annotate String fields, local variables,        method parameters and methods returning Strings. This will cause String-literals that are assigned to a        field/variable, passed as a parameter or are used as a method's return value to be interpreted as the specified        language.</p>    <p id="90129660">Additionally, there's the <span class="control">Language Mismatch</span> inspection which checks for clashes between the        <i id="6dcd61c1">expected language</i> and the <i id="02cc4720">actual language</i> when a field/variable is assigned or a value returned        from a method.</p>    <p id="b185906e">The plugin supports <i id="de96fd6b">direct</i> and <i id="bc2f1b14">indirect</i> annotations, i.e. you can either directly use the        annotation like this:</p>    <div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="err">@</span><span class="nx">Language</span><span class="p">(</span><span class="s2">&quot;JavaScript&quot;</span><span class="p">)</span>
    <span class="nb">String</span> <span class="nx">code</span> <span class="o">=</span> <span class="s2">&quot;var x = 1 + 2&quot;</span><span class="p">;</span></code></div>    <p id="aa270e21">or annotate another annotation class like this:</p>    <div class="code-block" data-lang="Generic"><code class="code-block__wrapper">@Language<span class="o">(</span><span class="s2">&quot;XPath&quot;</span><span class="o">)</span>
    public @interface XPath <span class="o">{</span> <span class="o">}</span></code></div>    <p id="f96a4452">which can then simply be used to annotate elements as <code class="code" data-lang="Java">@XPath</code>.</p>    <p id="bd7f3696">It's very easy to obtain the <code class="code" data-lang="Java">language-id</code> that must be supplied as the annotation's value attribute:     IntelliLang provides the list of available language via the regular code-completion action. Just select the     appropriate language from the ctrl-space pop-up window:</p>            <figure><img alt="lang completion" title="lang completion" src="/help/img/idea/2018.3/lang-completion.png" id="a1f67689" width="376" height="228"></figure>    </div>    <div class="chapter"><h3 id="AtPattern">@Pattern</h3>    <p id="b5ca6502">The <code class="code" data-lang="Java">@Pattern</code> annotation is responsible for marking Strings that have to comply with a        certain regular expression and can be used in just the same way as the <code class="code" data-lang="Java">@Language</code>        annotation. That means, it's possible to create derived annotations, such as an        <code class="code" data-lang="Java">@Number</code> annotation that requires a String to consist of one or more digits:</p>    <div class="code-block" data-lang="Generic"><code class="code-block__wrapper">@Pattern<span class="o">(</span><span class="s2">&quot;\\d+&quot;</span><span class="o">)</span>
    public @interface Number <span class="o">{</span> <span class="o">}</span></code></div>    <p id="1a516826">In fact, the predefined annotations already contain two of such derived annotations: The first one,        <code class="code" data-lang="Java">@PrintFormat</code>, matches the printf-like pattern used by <code class="code" data-lang="Java">java.util.Formatter</code> and        another one, <code class="code" data-lang="Java">@Identifier</code>, describes a valid Java identifier. These are ready to use without        having to specify any additional pattern.</p>    </div>    <div class="chapter"><h3 id="AtSubst">@Subst</h3>    <p id="96fad2b6">The <code class="code" data-lang="Java">@Subst</code> annotation is used to substitute references that are not compile-time constant which        enables the plugin to do <span class="control">Pattern Validation</span> based on the assumption that the substituted        value is compatible with the values that are expected during runtime. The plugin will complain if the value does        not match the expected pattern.</p>    <p id="fbf8d631">It also helps to build a valid context of prefix/suffix (see next section) for the Language Injection feature.            Consider this example:</p>    <div class="code-block" data-lang="Java"><code class="code-block__wrapper"><span class="nd">@Subst</span><span class="o">(</span><span class="s">&quot;Tahoma&quot;</span><span class="o">)</span>
<span class="kd">final</span> <span class="n">String</span> <span class="n">font</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JLabel</span><span class="o">().</span><span class="na">getFont</span><span class="o">().</span><span class="na">getName</span><span class="o">();</span>

<span class="nd">@Language</span><span class="o">(</span><span class="s">&quot;HTML&quot;</span><span class="o">)</span>
<span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="s">&quot;&lt;html&gt;&lt;span style=&#39;font: &quot;</span> <span class="o">+</span> <span class="n">font</span> <span class="o">+</span> <span class="s">&quot;; font-size:smaller&#39;&gt;&quot;</span> <span class="o">+</span> <span class="o">...</span> <span class="o">+</span> <span class="s">&quot;&lt;/span&gt;&lt;/html&gt;&quot;</span><span class="o">;</span></code></div>    <p id="fc60076c">Without substituting the value of the variable <code class="code" data-lang="Java">font</code> with the value <i id="6e308469">Tahoma</i>        (actually it could just be a single character here), the injected fragment would be syntactically incorrect,        causing the error <i id="1c554eec">a term expected</i> to be displayed after the "<code class="code" data-lang="Java">font:</code>"        instruction.</p>    </div>    </div>    <div class="chapter"><h2 id="PrefixAndSuffix" data-toc="IntelliLang.General Usage#PrefixAndSuffix">Supplying context: prefix and suffix</h2>    <p id="68a79bdc">When annotating an element, it's possible to supply a prefix and a suffix that should be prepended/appended when            the language fragment is being parsed. This can be used to supply context information, i.e. if the prefix        for a JavaScript injection is "var someContextVariable;", PyCharm will know that the variable           <i id="f07645be">someContextVariable</i> is declared and will not warn about it being undeclared when it's used.</p>    <p id="1e5e0135">Apart from the manual ability to supply a prefix and suffix, IntelliLang dynamically determines those values            from the context a String literal is being used in:</p>    <div class="code-block" data-lang="Javascript"><code class="code-block__wrapper"><span class="err">@</span><span class="nx">Language</span><span class="p">(</span><span class="nx">value</span> <span class="o">=</span><span class="nx">JavaScript</span><span class="p">,</span> <span class="nx">prefix</span> <span class="o">=</span> <span class="s2">&quot;function doSomethingElse(a){ }&quot;</span><span class="p">)</span>
<span class="nb">String</span> <span class="nx">code</span> <span class="o">=</span> <span class="s2">&quot;function doSomething() {\n&quot;</span> <span class="o">+</span>
<span class="s2">&quot;  var x = 1;\n&quot;</span> <span class="o">+</span>
<span class="s2">&quot;  doSomethingElse(x);\n&quot;</span> <span class="o">+</span>
<span class="s2">&quot;}&quot;</span><span class="p">;</span></code></div>    <p id="771d4a4f">In this example, the JavaScript language will be injected into each of the three String literals, and each one's            prefix and suffix will be calculated from the preceding and following expressions so that the resulting text            that's being parsed is valid JavaScript syntax:</p>    <ul class="list _ul"><li class="list__item" id="7e6c0ed1"><p>no "missing '}'" error will be displayed: The closing brace is part of the first literal's suffix.</p></li><li class="list__item" id="201b9dab"><p>the variable <code class="code" data-lang="Java">x</code> that is used in <code class="code" data-lang="Java">doSomethingElse(a);</code>          will be declared: Its declaration is part of the second literal's prefix.</p></li><li class="list__item" id="d5855ba9"><p>the function <code class="code" data-lang="Java">doSomethingElse()</code> will be known as well: It's defined in the          statically supplied prefix.</p></li></ul>    </div>    <div class="chapter"><h2 id="notes" data-toc="IntelliLang.General Usage#notes">Important notes</h2>        <ul class="list _ul"><li class="list__item" id="prefix-trouble">There are some issues with the PyCharm Language Injection API that                impose certain restrictions on the prefix/suffix of an injected language fragment. For instance, it's                not allowed for a token of the language to span across the prefix/suffix of an element. This could e.g.                happen if the prefix ends with a whitespace character and the fragment starts with whitespace.                <p id="2cffde00">The plugin deals with this special situation in the way that it trims the prefix/suffix and inserts                    exactly one space character as a separator. However, this doesn't work if a space character is no                    token separator, which e.g. applies to JavaScript string literals. </p>                <p id="388c5d74">Such cases cannot be automatically dealt with and PyCharm core will produce an assertion.</p></li><li class="list__item" id="22749778"><p>Even though the dynamic prefix/suffix calculation provides a proper context for the language fragment,                some things may not work as expected. Most notably this are the refactoring (rename) and navigation                functions. </p></li></ul></div><div class="last-modified" data-skip-index="skip">Last modified: 27 February 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="intellilang-configuration.html">IntelliLang Configuration</a><a class="navigation-links__next" href="quick-edit-language.html">Quick Edit Language</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>