<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><meta name="description" content="How to create and run a simple Django application (creating project; running Django server;
   configuring database; creating models, templates, views; launching application; testing application)" data-skip-index="skip"><title>第四步。创建和运行第一个Django项目-帮助|帮助PyCharm</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Creating_and_Running_Your_First_framework_Project"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索PyCharm帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PyCharm 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_intellij_idea_classic_macos" data-group="primary">IntelliJ IDEA经典版（macOS）</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_default_for_xwin_windows" data-group="primary">XWin的默认设置（Windows）</option><option value="secondary_default_for_macos" data-group="secondary">macOS的默认设置</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_default_for_xwin_macos" data-group="secondary">XWin的默认设置（macOS）</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Creating_and_Running_Your_First_framework_Project.xml" data-toc="Creating_and_Running_Your_First_framework_Project">第四步。创建和运行第一个Django项目</h1>          <a name="edition"></a>     <aside class="warning " rel="Creating_and_Running_Your_First_framework_Project.xml" id="ee7dd259" data-title=""><p>仅<b id="743b33b8" origin="intellij-platform">专业</b>版支持此功能。该版本是商业版本，它提供了一组出色的功能：有关更多详细信息，请参见<a href="/pycharm/features/editions_comparison_matrix.html" rel="noopener noreferrer" data-external="true" target="_blank">比较矩阵</a> 。</p></aside>   <div class="chapter"><h2 id="prereqs" data-toc="Creating_and_Running_Your_First_framework_Project#prereqs">在你开始前</h2>        <p id="a32c149e">确保满足以下先决条件：</p>                <ul class="list _ul"><li class="list__item" id="da2ae82d"><p>您正在使用PyCharm 2016.1或更高版本。如果您仍然没有PyCharm，请从此<a href="/pycharm/download/" rel="noopener noreferrer" data-external="true" target="_blank">页面</a>下载。要安装PyCharm，请根据您的平台按照说明进行操作。</p></li><li class="list__item" id="0d4a33d9"><p>您的计算机上至少已正确安装一个Python解释器。您可以从此<a href="http://python.org/download/" rel="noopener noreferrer" data-external="true" target="_blank">页面</a>下载翻译。</p></li><li class="list__item" id="e305dd68"><p>您已安装Django软件包。要了解如何使用PyCharm UI安装软件包，请阅读<a href="installing-uninstalling-and-upgrading-packages.html">安装，卸载和升级软件包一节</a> 。您也可以按照<a href="https://docs.djangoproject.com/en/1.8/topics/install/" rel="noopener noreferrer" data-external="true" target="_blank">如何安装Django</a>页面中的说明<a href="https://docs.djangoproject.com/en/1.8/topics/install/" rel="noopener noreferrer" data-external="true" target="_blank">安装Django</a> 。</p></li></ul>        <p id="fd350fa2">本教程是根据以下假设创建的：</p><ul class="list _ul"><li class="list__item" id="f8ed3dee"><p>Python 3.4.1。</p></li><li class="list__item" id="2db4a656"><p>Django 1.x（高于Django 1.10）。</p></li><li class="list__item" id="057ffad7"><p>本教程中使用的示例类似于<a href="https://docs.djangoproject.com/en/1.8/" rel="noopener noreferrer" data-external="true" target="_blank">Django文档中</a>使用的示例。样本项目可以从<a href="https://github.com/yzozulya/djtp_first_steps" rel="noopener noreferrer" data-external="true" target="_blank">这里</a>下载。</p></li></ul>    </div>    <div class="chapter"><h2 id="create-project" data-toc="Creating_and_Running_Your_First_framework_Project#create-project">创建一个新项目</h2>        <p id="9886e0dd">实际上，所有新项目都是以相同的方式创建的：通过在“ <a href="welcome-screen.html">欢迎”屏幕</a>的“快速入门”区域中单击“ <span class="control">创建新项目”</span>按钮：</p>            <figure><img alt="欢迎画面" title="欢迎画面" src="/help/img/idea/2019.2/py_welcomeScreen.png" id="5660b444" width="700" height="970"></figure>        <p id="567ae89e">如果您已经打开了一个项目，请选择<span class="menupath" data-skip-index="skip">File | File</span>创建一个新项目<span class="menupath" data-skip-index="skip">。</span>主菜单上的<span class="menupath" data-skip-index="skip">新建项目...。</span></p>        <p>然后，选择所需的项目类型（此处为Django）。指定项目名称和位置。</p><p id="8e394c6e">Python最佳实践是为每个项目创建一个virtualenv。为此，请展开“ <span class="control">项目解释器：新Virtualenv环境”</span>节点，然后选择用于创建新虚拟环境的工具。让我们选择<span class="control">Virtualenv</span>工具，并指定用于新虚拟环境的位置和基本解释器。如有必要，请选择下面的两个复选框。</p><p>接下来，展开“ <span class="control">更多设置”</span>节点并指定与Django相关的设置。在“ <span class="control">应用程序名称”</span>字段中，指定应用程序名称（此处为<span class="control">polls</span> ）。</p>        <figure><img alt="选择项目类型" title="选择项目类型" src="/help/img/idea/2019.2/py_choose_project_type.png" id="aea5a4f4" width="777" height="981"></figure>        <p id="c82e9a8d">单击<span class="control">创建</span> -Django项目已准备就绪。</p>    </div>    <div class="chapter"><h2 id="whats-inside" data-toc="Creating_and_Running_Your_First_framework_Project#whats-inside">探索项目结构</h2>        <p id="d6b57e6c">如上所述，基本上，存根项目已准备就绪。它包含特定于框架的文件和目录。创建任何受支持类型的项目（无论是Pyramid还是Google App Engine）时，也会发生同样的情况。</p>        <p id="9ea95c82">让我们看看如何在“ <a href="project-tool-window.html">项目工具窗口”中</a>看到新项目的结构。</p>        <div class="chapter"><h3 id="project-view" data-toc="Creating_and_Running_Your_First_framework_Project#project-view">项目工具窗口的项目视图</h3>            <p id="86ec6273">默认情况下显示此视图。它显示了Django特定的项目结构： <span class="filepath">民意调查</span>和<span class="filepath">mysite</span>目录；此外，您还会看到<span class="filepath">manage.py</span>和<span class="filepath">settings.py</span>文件。</p>            <p id="9cde22a8">请注意，在此视图中看不到<span class="filepath">.idea</span>目录：</p>            <figure><img alt="专案检视" title="专案检视" src="/help/img/idea/2019.2/py_project_view.png" id="958c402f" width="245" height="367"></figure>        </div>        <div class="chapter"><h3 id="project-files" data-toc="Creating_and_Running_Your_First_framework_Project#project-files">项目工具窗口的项目文件视图</h3>            <p id="b55971e0">如果由于某些原因您希望查看<span class="filepath">.idea</span>目录的内容，请选择视图<span class="control">Project Files</span> ：如您所见，该视图显示相同的目录和文件以及<span class="filepath">.idea</span>目录，因为它位于项目根目录下：</p>            <figure><img alt="项目文件" title="项目文件" src="/help/img/idea/2019.2/py_project_files_view.png" id="07c6d6ef" width="245" height="491"></figure>            <p id="7d322cd2">让我们返回到“项目”视图。</p>        </div>        <div class="chapter"><h3 id="what-see-project-view" data-toc="Creating_and_Running_Your_First_framework_Project#what-see-project-view">我们在“项目”视图中看到什么？</h3>            <ul class="list _ul"><li class="list__item" id="beff6d48"><p><span class="filepath">mysite</span>目录是您的项目的容器。在项目视图中，以粗体表示。</p></li><li class="list__item" id="42e9a635"><p><span class="filepath">manage.py</span> ：这是一个命令行实用程序，可让您与Django项目进行交互。有关详细信息，请参考<a href="http://django.readthedocs.org/en/latest/ref/django-admin.html" rel="noopener noreferrer" data-external="true" target="_blank">Django文档</a> 。</p></li><li class="list__item" id="4a207a0b"><p>嵌套目录<span class="filepath">mysite</span>是项目的实际Python包。</p></li><li class="list__item" id="51adcbf1"><p><span class="filepath">mysite / __ init__.py</span> ：此空文件告诉Python该目录应被视为Python软件包。</p></li><li class="list__item" id="9c6304f8"><p><span class="filepath">mysite / settings.py</span> ：此文件包含<a href="http://django.readthedocs.org/en/latest/topics/settings.html" rel="noopener noreferrer" data-external="true" target="_blank">Django项目的配置</a> 。</p></li><li class="list__item" id="37a5bd68"><p><span class="filepath">mysite / urls.py</span> ：此文件包含<a href="http://django.readthedocs.org/en/latest/topics/http/urls.html" rel="noopener noreferrer" data-external="true" target="_blank">Django项目</a>的<a href="http://django.readthedocs.org/en/latest/topics/http/urls.html" rel="noopener noreferrer" data-external="true" target="_blank">URL声明</a> 。</p></li><li class="list__item" id="f4659bc6"><p><span class="filepath">mysite / wsgi.py</span> ：此文件定义了与WSGI兼容的Web服务器为您的项目提供服务的入口点。有关更多详细信息，请参见<a href="http://django.readthedocs.org/en/latest/howto/deployment/wsgi/index.html" rel="noopener noreferrer" data-external="true" target="_blank">如何使用WSGI</a>进行<a href="http://django.readthedocs.org/en/latest/howto/deployment/wsgi/index.html" rel="noopener noreferrer" data-external="true" target="_blank">部署</a> 。</p></li><li class="list__item" id="73cb5b15">                    <p id="b949cfd5">嵌套目录<span class="filepath">民意测验</span>包含开发Django应用程序所需的所有文件（目前，这些文件为空）：</p>                    <ul class="list _ul"><li class="list__item" id="7c8e79e6"><p>同样， <span class="filepath">polls / _init_.py</span>告诉Python该目录应被视为Python包。</p></li><li class="list__item" id="9caf71cc"><p><span class="filepath">polls / models.py</span> ：在此文件中，我们将为我们的应用程序<a href="#creating_models">创建模型</a> 。</p></li><li class="list__item" id="582d017a"><p><span class="filepath">polls / views.py</span> ：在此文件中，我们将<a href="#creating_views">创建views</a> 。</p></li></ul>                </li><li class="list__item" id="c1127bbf"><p><span class="filepath">模板</span>目录现在为空。它应该包含模板文件。</p></li><li class="list__item" id="adfe1093"><p>嵌套目录<span class="filepath">迁移</span>目前仅包含软件包文件<span class="filepath">_init_.py</span> ，但将来会用于将对模型所做的更改（添加字段，删除模型等）传播到数据库模式中。在<a href="https://docs.djangoproject.com/en/1.8/topics/migrations/" rel="noopener noreferrer" data-external="true" target="_blank">此处</a>阅读迁移说明。</p></li></ul>            <p id="3ea5a4ce">请注意，您可以根据需要创建任意数量的Django应用程序。要将应用程序添加到项目中，请运行<code class="code">startapp</code> <span class="filepath">manage.py</span>实用程序的任务（ <span class="menupath" data-skip-index="skip">工具|运行manage.py task</span> ，然后键入<code class="code">startapp</code>在控制台中）。</p>        </div>    </div>    <div class="chapter"><h2 id="database-configure" data-toc="Creating_and_Running_Your_First_framework_Project#database-configure">配置数据库</h2>    <p id="d30045ae">现在，当项目存根准备好时，让我们进行一些微调。打开以编辑<span class="filepath">settings.py</span> 。为此，请在“项目”工具窗口中选择文件，然后按<kbd data-primary_default_for_windows="F4" data-primary_intellij_idea_classic_macos="F4" data-primary_default_for_gnome="F4" data-primary_default_for_kde="F4" data-primary_sublime_text="F4" data-primary_eclipse="F12" data-primary_emacs="F4" data-primary_default_for_xwin_windows="N/A" data-secondary_default_for_macos="⌘↓" data-secondary_default_for_gnome="F4" data-secondary_default_for_kde="F4" data-secondary_eclipse="F12" data-secondary_default_for_xwin_macos="N/A" data-secondary_sublime_text_macos="N/A">F4</kbd> 。该文件将在编辑器中的其自己的标签中打开。</p>    <p id="cb641e01">指定要在应用程序中使用的数据库。为此，找到<code class="code">DATABASES</code>变量：点击<kbd data-primary_default_for_windows="Ctrl+F" data-primary_intellij_idea_classic_macos="⌘+F" data-primary_default_for_gnome="Ctrl+F" data-primary_default_for_kde="Ctrl+F" data-primary_sublime_text="Ctrl+F" data-primary_eclipse="N/A" data-primary_emacs="Ctrl+Alt+S" data-primary_default_for_xwin_windows="N/A" data-secondary_default_for_macos="⌘F" data-secondary_default_for_gnome="⌃F" data-secondary_default_for_kde="⌃F" data-secondary_eclipse="N/A" data-secondary_default_for_xwin_macos="N/A" data-secondary_sublime_text_macos="⌘F">Ctrl+F</kbd> ，然后在搜索字段中开始输入您要查找的字符串。然后，在<code class="code">'ENGINE'</code> ，在点后添加数据库管理系统的名称（您可以使用在注释后指定的任何名称，但首先我们将从<span class="filepath">sqlite3</span>开始。）</p>    <p id="46c9c9b7">在里面<code class="code">'NAME'</code>行中，输入所需数据库的名称，即使该数据库尚不存在。</p>    <figure><img alt="定义数据库" title="定义数据库" src="/help/img/idea/2019.2/py_db_config.png" id="90bd8a88" width="455" height="324"></figure></div>    <div class="chapter"><h2 id="launch-server" data-toc="Creating_and_Running_Your_First_framework_Project#launch-server">启动Django服务器</h2>        <p id="7b15bfd1">由于我们谨慎选择了<span class="filepath">sqlite3</span> ，因此不需要定义其他值（用户凭据，端口和主机）。现在让我们检查我们的设置是否正确。这很容易做到：只需启动<code class="code">runserver</code> <span class="filepath">manage.py</span>实用程序的任务：按<kbd data-primary_default_for_windows="Ctrl+Alt+R" data-primary_intellij_idea_classic_macos="Alt+R" data-primary_default_for_gnome="Ctrl+Alt+R" data-primary_default_for_kde="Ctrl+Alt+R" data-primary_sublime_text="Ctrl+Alt+R" data-primary_eclipse="N/A" data-primary_emacs="Ctrl+Alt+R" data-primary_default_for_xwin_windows="N/A" data-secondary_default_for_macos="⌥R" data-secondary_default_for_gnome="⌃⌥R" data-secondary_default_for_kde="⌃⌥R" data-secondary_eclipse="N/A" data-secondary_default_for_xwin_macos="N/A" data-secondary_sublime_text_macos="⌥R">Ctrl+Alt+R</kbd> ，然后在<span class="filepath">manage.py</span>控制台中输入任务名称：</p>        <figure><img alt="在控制台中运行manage.py" title="在控制台中运行manage.py" src="/help/img/idea/2019.2/py_runserver.png" id="2530468b" width="676" height="470"></figure>        <p id="e4206366">请按照建议的链接查看以下页面：</p>        <figure><img alt="预览页面" title="预览页面" src="/help/img/idea/2019.2/py_runserver_result.png" id="42bc07e5" width="604" height="162"></figure>    </div>    <div class="chapter"><h2 id="creating_models" data-toc="Creating_and_Running_Your_First_framework_Project#creating_models">建立模型</h2>        <p id="b6c6a6ad">接下来，打开以编辑文件<span class="filepath">models.py</span> ，并注意import语句已经存在。然后键入以下代码：</p>        <div class="code-block" data-lang="python">从django.db导入模型＃添加了以下几行：从django.utils导入datetime导入时区类Question（模型。模型）：question_text =模型。CharField（max_length = 200）pub_date =模型。DateTimeField（'发布日期'）def __str __（self）：返回self.question_text def was_published_recently（self）：now = timezone.now（）立即返回-datetime.timedelta（days = 1）<= self.pub_date <=现在was_published_recently .admin_order_field ='pub_date'was_published_recently.boolean = True was_published_recently.short_description ='最近发布？'类Choice（型号。模型）：问题=模型。ForeignKey（问题，on_delete =模型。DO_NOTHING，）choice_text =模型。CharField（max_length = 200）票=模型。IntegerField（default = 0）def __str __（self）：返回self.choice_text</div>        <p id="454f0e2e">实际上，您可以复制粘贴，但是建议键入-它可以帮助您查看功能强大的PyCharm的代码完成情况：</p>        <figure><img alt="使用代码竞争" title="使用代码竞争" src="/help/img/idea/2019.2/py_completion.png" id="1b372bcf" width="244" height="105"></figure>    </div>    <div class="chapter"><h2 id="database-create" data-toc="Creating_and_Running_Your_First_framework_Project#database-create">建立资料库</h2>    <p id="dd141462">我们必须为新模型创建表。为此，我们将使用魔术<kbd data-primary_default_for_windows="Ctrl+Alt+R" data-primary_intellij_idea_classic_macos="Alt+R" data-primary_default_for_gnome="Ctrl+Alt+R" data-primary_default_for_kde="Ctrl+Alt+R" data-primary_sublime_text="Ctrl+Alt+R" data-primary_eclipse="N/A" data-primary_emacs="Ctrl+Alt+R" data-primary_default_for_xwin_windows="N/A" data-secondary_default_for_macos="⌥R" data-secondary_default_for_gnome="⌃⌥R" data-secondary_default_for_kde="⌃⌥R" data-secondary_eclipse="N/A" data-secondary_default_for_xwin_macos="N/A" data-secondary_sublime_text_macos="⌥R">Ctrl+Alt+R</kbd>调用<span class="filepath">manage.py</span>控制台的快捷方式。首先执行的命令是<code class="code">makemigrations polls</code> ：</p>        <figure><img alt="执行移民" title="执行移民" src="/help/img/idea/2019.2/py_makemigration.png" id="786a1df7" width="675" height="460"></figure>        <p id="c40c33fd">因此，您已经告诉Django，已经创建了两个新模型，即<code class="code">Choice</code>和<code class="code">Question</code> ，并创建了一个迁移：</p>        <figure><img alt="移民" title="移民" src="/help/img/idea/2019.2/py_makemigration1.png" id="55933f18" width="551" height="498"></figure>        <p id="76c47b97">接下来，在提示符后，键入以下命令：</p>        <code class="code">sqlmigrate polls 0001</code>        <figure><img alt="执行sqlmigrate池0001" title="执行sqlmigrate池0001" src="/help/img/idea/2019.2/py_sqlmigrate.png" id="5f2517f1" width="676" height="682"></figure>        <p id="8f3fa521">最后跑<code class="code">migrate</code>在数据库中实际创建这些表的命令：</p>        <figure><img alt="在数据库中创建表" title="在数据库中创建表" src="/help/img/idea/2019.2/py_migrate.png" id="64f4d2e4" width="676" height="636"></figure>    </div>    <div class="chapter"><h2 id="adm-functions" data-toc="Creating_and_Running_Your_First_framework_Project#adm-functions">履行行政职能</h2>        <p id="48184739">首先，创建一个超级用户。为此，请键入<code class="code">createsuperuser</code>在<span class="filepath">manage.py</span>控制台中的命令中，指定您的电子邮件地址和密码：</p>        <figure><img alt="创建一个超级用户" title="创建一个超级用户" src="/help/img/idea/2019.2/py_superuser.png" id="8062e409" width="677" height="539"></figure>        <p id="5c369ee1">自从我们决定启用站点管理以来，PyCharm已经取消注释文件<span class="filepath">urls.py中</span>的相应行。</p>        <p id="5435f3a0">打开<span class="filepath">民意调查</span>目录中的<span class="filepath">admin.py</span>文件进行编辑，然后查看以下已存在的代码：</p>        <div class="code-block" data-lang="python">从django.contrib导入管理员</div>        <p id="5041a82d">但是，我们需要为管理站点启用编辑功能。</p>        <div class="chapter"><h3 id="prepare-run-config" data-toc="Creating_and_Running_Your_First_framework_Project#prepare-run-config">准备运行/调试配置</h3>            <p id="3bae05bc">现在，我们可以转到管理页面。当然，很有可能先运行Django服务器，然后转到浏览器，然后在地址栏中键入整个URL，但是使用PyCharm，有一种更简单的方法：使用预先配置的Django服务器运行配置并进行一些细微修改。</p>            <a name="default-working-dir-warning"></a>    <aside class="warning " rel="prepare-run-config" id="ab3837da" data-title=""><p>不要为“ <span class="control">模板”</span>节点下列出的默认“运行/调试配置”设置工作目录。这可能会导致新创建的“运行/调试配置”中的目标无法解决。</p></aside>              <p id="ebe64644">要打开此运行/调试配置进行编辑，请在主工具栏上，单击运行/调试配置选择器，然后选择“ <span class="control">编辑配置”</span> （或从主菜单中选择<span class="menupath" data-skip-index="skip">“运行” |“编辑配置</span> ”）：</p>            <figure><img alt="编辑运行/调试配置" title="编辑运行/调试配置" src="/help/img/idea/2019.2/py_edit_runconfig.png" id="ab0aaef1" width="279" height="178"></figure>            <p id="44e74530">在“ <a href="run-debug-configuration-django-server.html">运行/调试配置”对话框中</a> ，为该运行/调试配置命名（此处为<code class="code">mysite</code> ），启用在默认浏览器中运行应用程序（选中复选框<span class="control">运行浏览器</span> ），并指定默认情况下要打开的网站页面（此页面为<span class="filepath">http://127.0.0.1:8000/admin/</span> ）：</p>            <figure><img alt="设置默认网页" title="设置默认网页" src="/help/img/idea/2019.2/py_runconfig.png" id="20108a72" width="650" height="1213"></figure>        </div>        <div class="chapter"><h3 id="launch-admin-site" data-toc="Creating_and_Running_Your_First_framework_Project#launch-admin-site">启动管理站点</h3>            <p id="bbeff94d">现在，要启动该应用程序，请按<kbd data-primary_default_for_windows="Shift+F10" data-primary_intellij_idea_classic_macos="Shift+F10" data-primary_default_for_gnome="Shift+F10" data-primary_default_for_kde="Shift+F10" data-primary_sublime_text="Shift+F10" data-primary_eclipse="Shift+Alt+X" data-primary_emacs="Shift+F10" data-primary_default_for_xwin_windows="N/A" data-secondary_default_for_macos="⌃R" data-secondary_default_for_gnome="⇧F10" data-secondary_default_for_kde="⇧F10" data-secondary_eclipse="⌥⇧X" data-secondary_default_for_xwin_macos="N/A" data-secondary_sublime_text_macos="N/A">Shift+F10</kbd> ，或点击<img class="inline-icon-16" src="/help/img/idea/2019.2/icons.toolwindows.toolWindowRun.svg@2x.png" width="16" alt="跑">在主工具栏上打开标准Django网站登录页面：</p>            <figure><img alt="登录页面" title="登录页面" src="/help/img/idea/2019.2/py_login_page.png" id="b6db003c" width="352" height="185"></figure>            <p id="eeae5463">登录后，将显示管理页面。它具有“ <span class="control">身份验证和授权（组和用户）”部分</span> ，但“ <span class="control">轮询”</span>不可用。为什么这样？</p>            <p id="1d383d68">我们必须告诉管理员Question对象具有管理界面；为此，我们打开文件<span class="filepath">polls / admin.py</span>进行编辑（在“项目”视图中选择它，然后按<kbd data-primary_default_for_windows="F4" data-primary_intellij_idea_classic_macos="F4" data-primary_default_for_gnome="F4" data-primary_default_for_kde="F4" data-primary_sublime_text="F4" data-primary_eclipse="F12" data-primary_emacs="F4" data-primary_default_for_xwin_windows="N/A" data-secondary_default_for_macos="⌘↓" data-secondary_default_for_gnome="F4" data-secondary_default_for_kde="F4" data-secondary_eclipse="F12" data-secondary_default_for_xwin_macos="N/A" data-secondary_sublime_text_macos="N/A">F4</kbd> ），然后输入以下代码：</p>            <div class="code-block" data-lang="python">从django.contrib从.models import导入admin问题＃此行添加admin.site.register（Question）＃此行添加</div>            <p id="68350b23">再次注意代码完成：</p>            <figure><img alt="代码完成" title="代码完成" src="/help/img/idea/2019.2/py_completion1.png" id="83b18ab5" width="507" height="215"></figure>            <p id="c5eaaba3">刷新页面，看到出现带有<span class="control">问题的</span> <span class="control">民意调查</span>部分：</p>            <figure><img alt="站点管理页面" title="站点管理页面" src="/help/img/idea/2019.2/py_site_admin_page.png" id="313a97bd" width="657" height="357"></figure>            <p id="28c335b2">单击<span class="control">添加</span>以创建一些问题。</p>        </div>        <div class="chapter"><h3 id="edit-admin-py" data-toc="Creating_and_Running_Your_First_framework_Project#edit-admin-py">编辑admin.py</h3>            <p id="6f974635">但是，每个问题都有许多选择，但是选择仍然不可用。再次打开以编辑<span class="filepath">polls / admin.py</span>文件，并进行如下更改：</p>            <div class="code-block" data-lang="python">从django.contrib导入.models import Choice，问题类ChoiceInline（admin。TabularInline）：模型=选择额外= 3类QuestionAdmin（管理员。ModelAdmin）：fieldsets = [（无，{'fields'：['question_text']}），（'Date information'，{'fields'：['pub_date']，'classes'：['collapse']}） ，]内联= [ChoiceInline] admin.site.register（Question，QuestionAdmin）</div>            <p id="29136344">现在查看“ <span class="control">更改问题”</span>页面：</p>            <figure><img alt="更改问题页面" title="更改问题页面" src="/help/img/idea/2019.2/py_change_question.png" id="344f5ae7" width="853" height="596"></figure>        </div>    </div>    <div class="chapter"><h2 id="creating_views" data-toc="Creating_and_Running_Your_First_framework_Project#creating_views">撰写意见</h2>        <p id="df08a7d5">打开文件<span class="filepath">polls / views.py</span>进行编辑，然后输入以下Python代码：</p>        <div class="code-block" data-lang="python">从django.http导入HttpResponse def索引（请求）：返回HttpResponse（“ Hello，世界。您正在民意调查索引中。”）</div>        <p id="214fca00">接下来，将一个名称为<span class="filepath">urls.py</span>的新文件添加到<span class="filepath">polls</span>目录，并在其中输入以下代码：</p>        <div class="code-block" data-lang="python">from django.conf.urls从导入URL。导入视图urlpatterns = [url（r'^ $'，views.index，name ='index'），]</div>        <p id="e414ffb1">接下来，打开以编辑文件<span class="filepath">mysite / urls.py</span> （PyCharm已为您创建），并为索引页面添加URL。您应该以以下代码结束：</p>        <div class="code-block" data-lang="python">从django.conf.urls导入include，从django.contrib导入url admin urlpatterns = [url（r'^ polls /'，include（'polls.urls'）），＃此行添加了url（r'^ admin /' ，admin.site.urls），]</div>        <p id="c7b00fdf">现在，打开页面<span class="filepath">127.0.0.1:8000/polls/</span>并享受：</p>        <figure><img alt="首页" title="首页" src="/help/img/idea/2019.2/py_result1.png" id="2bb7cbc2" width="514" height="190"></figure>        <p id="554c1260">接下来，让我们添加更多视图。再次，将以下代码添加到文件<span class="filepath">polls / views.py中</span> ：</p>        <div class="code-block" data-lang="python">def detail（request，question_id）：返回HttpResponse（“您正在查看问题％s。”％question_id）def results（request，question_id）：response =“您正在查看问题％s的结果。”返回HttpResponse（响应％question_id）def投票（request，question_id）：返回HttpResponse（“您对问题％s进行投票。”％question_id）</div>        <p id="455d4e2e">将这些新视图连接到<code class="code">polls.urls</code>通过添加以下模块<code class="code">url()</code>电话：</p>        <div class="code-block" data-lang="python">from django.conf.urls从导入URL。导入视图urlpatterns = [url（r'^ $'，views.index，name ='index'），＃例如：/ polls / 5 / url（r'^（？P <question_id>[0-9] +）/ $'，views.detail，name ='detail'），＃例如：/ polls / 5 / results / url（r'^（？P <question_id>[0-9] +）/ results / $'，views.results，name ='results'），＃例如：/ polls / 5 / vote / url（r'^（？P <question_id>[0-9] +）/ vote / $'，views.vote，name ='vote'），]</question_id></question_id></question_id></div>        <p id="f555672d">如果现在在浏览器中打开相应的页面，则会看到例如：</p>        <figure><img alt="申请页面" title="申请页面" src="/help/img/idea/2019.2/py_result2.png" id="492aaae9" width="567" height="489"></figure>    </div>    <div class="chapter"><h2 id="create-templates" data-toc="Creating_and_Running_Your_First_framework_Project#create-templates">创建Django模板</h2>        <p id="8c8443f3">如您所见，这些页面的设计在视图中硬编码。因此，要使其更具可读性，您必须编辑相应的Python代码。然后，让我们从Python分离输出的视觉表示-为此，我们创建模板。</p>        <p id="494d1189">打开以编辑<span class="filepath">polls / views.py</span>文件，并将其内容替换为以下代码：</p>        <div class="code-block" data-lang="python">从django.http导入HttpResponse，从django.shortcuts导入HttpResponseRedirect，从django.urls渲染，从.models导入反向，问题，选择def索引（请求）：latest_question_list = Question.objects.order_by（'-pub_date'）[： 5] context = {'latest_question_list'：Latest_question_list}返回render（request，'polls / index.html'，context）def detail（request，question_id）：问题= get_object_or_404（Question，pk = question_id）返回render（request，' defs（request，question_id）：问题= get_object_or_404（Question，pk = question_id）return render（request，'polls / results.html'，{'question' ：问题}）def投票（request，question_id）：问题= get_object_or_404（Question，pk = question_id）试试：selected_choice = question.choice_set.get（pk = request.POST ['choice']），但（KeyError，Choice。DidNotNotExist）：返回render（request，'polls / detail.html'，{'question'：问题，'error_message'：“您没有选择一个选择。”，}）else：selected_choice.votes + = 1 selected_choice。 save（）return HttpResponseRedirect（reverse（'polls：results'，args = {question.id，）））</div>        <p id="0d1e4c5e">顺便说一句，请注意帮助您创建导入语句的导入助手。</p>        <p id="e28ab232">您注意到的第一件事是对页面<span class="filepath">index.html</span>的未解析引用：</p>        <figure><img alt="view.py代码" title="view.py代码" src="/help/img/idea/2019.2/py_template1.png" id="4b7be1b0" width="575" height="232"></figure>        <p id="4e15d734">PyCharm建议<a href="intention-actions.html">快速修复</a> ：如果您单击灯泡或按<kbd data-primary_default_for_windows="Alt+Enter" data-primary_intellij_idea_classic_macos="Alt+Enter" data-primary_default_for_gnome="Alt+Enter" data-primary_default_for_kde="Alt+Enter" data-primary_sublime_text="Alt+Enter" data-primary_eclipse="Alt+Enter" data-primary_emacs="Alt+Enter" data-primary_default_for_xwin_windows="N/A" data-secondary_default_for_macos="⌥⏎" data-secondary_default_for_gnome="⌥⏎" data-secondary_default_for_kde="⌥⏎" data-secondary_eclipse="⌥⏎" data-secondary_default_for_xwin_macos="N/A" data-secondary_sublime_text_macos="⌥⏎">Alt+Enter</kbd> ，则会在模板文件夹中创建相应的模板文件（请注意，PyCharm还会在此模板应驻留的目录中创建目录<span class="filepath">民意调查</span> ）：</p>        <figure><img alt="创建一个模板" title="创建一个模板" src="/help/img/idea/2019.2/py_template2.png" id="a818b6d7" width="663" height="317"></figure>        <p id="25afc206">到目前为止，文件<span class="filepath">index.html</span>为空。向其添加以下代码：</p>        <div class="code-block" data-lang="python">{％载入staticfiles％} <link rel="stylesheet" type="text/css" href="javascript:void(0);"> {％，如果latest_question_list％}<ul>{last_question_list％中有问题的%%}<li><a href="{% url 'detail' question.id %}" gtc:encodedoriginal="PGEgaHJlZj0ieyUgdXJsICdkZXRhaWwnIHF1ZXN0aW9uLmlkICV9Ij4="> {{question.question_text}} </a></li>{％endfor％}</ul>{％else％}<p>没有民意调查。</p>{％ 万一 ％}</div>        <p id="61d53e3e">注意模板文件中的<a href="auto-completing-code.html">代码完成</a> ！例如，当您键入开头<code class="code">{%</code> ，PyCharm添加匹配的结束符<code class="code">%}</code>自动将插入符号放置在将来输入的位置。在HTML标记中，代码完成也是可用的。</p>        <p id="8f59ca73">注意图标<img class="inline-icon-16" src="/help/img/idea/2019.2/icons.fileTypes.html.svg@2x.png" width="16" alt="html类型">和<img alt="python类型" title="python类型" src="/help/img/idea/2019.2/pythonScript.png" id="670f5bb3" width="20" height="24" class="inline-icon-20">分别出现在文件<span class="filepath">views.py</span>和<span class="filepath">index.html</span>的左侧装订线中：</p>        <figure><img alt="查看html和python代码" title="查看html和python代码" src="/help/img/idea/2019.2/py_template3.png" id="60c0078c" width="511" height="366"></figure><p id="e1b802ac">这些图标使您可以立即在视图方法及其模板之间切换。在文章<a href="navigating-between-templates-and-views.html">在模板和视图之间导航</a>以及<a href="part-6-framework-specific-navigation.html">第6部分中阅读有关这种导航的更多信息</a><a href="part-6-framework-specific-navigation.html">。特定于Django的Navigation</a> 。</p>    </div>    <div class="chapter"><h2 id="stylesheet" data-toc="Creating_and_Running_Your_First_framework_Project#stylesheet">使用样式表</h2>        <p id="098d1596">正如您在视图文件<span class="filepath">index.html中</span>看到的那样，有对样式表的引用，但尚未解决：</p>        <p id="155048cf">通过以下方式解决此引用：</p>        <ol class="list _decimal"><li class="list__item" id="1c511b88">                <p id="7665f071">创建目录。为此，在“项目”视图中，选择“ Python软件包<span class="filepath">polls”</span> ，然后按<kbd data-primary_default_for_windows="Alt+Insert" data-primary_intellij_idea_classic_macos="Ctrl+N" data-primary_default_for_gnome="Alt+Insert" data-primary_default_for_kde="Alt+Insert" data-primary_sublime_text="Alt+Insert" data-primary_eclipse="Alt+Insert" data-primary_emacs="Alt+Insert" data-primary_default_for_xwin_windows="N/A" data-secondary_default_for_macos="⌘N" data-secondary_default_for_gnome="N/A" data-secondary_default_for_kde="N/A" data-secondary_eclipse="N/A" data-secondary_default_for_xwin_macos="N/A" data-secondary_sublime_text_macos="⌘N">Alt+Insert</kbd> 。</p>                <p id="d8eae510">在出现的弹出菜单上，选择<span class="control">目录</span> ，然后指定目录结构的名称<span class="filepath">static / polls</span> 。</p></li><li class="list__item" id="dcd236c2"><p>接下来，在此目录中创建一个样式表。为此，选择最里面的目录<span class="filepath">民意调查</span> ，按<kbd data-primary_default_for_windows="Alt+Insert" data-primary_intellij_idea_classic_macos="Ctrl+N" data-primary_default_for_gnome="Alt+Insert" data-primary_default_for_kde="Alt+Insert" data-primary_sublime_text="Alt+Insert" data-primary_eclipse="Alt+Insert" data-primary_emacs="Alt+Insert" data-primary_default_for_xwin_windows="N/A" data-secondary_default_for_macos="⌘N" data-secondary_default_for_gnome="N/A" data-secondary_default_for_kde="N/A" data-secondary_eclipse="N/A" data-secondary_default_for_xwin_macos="N/A" data-secondary_sublime_text_macos="⌘N">Alt+Insert</kbd> ，选择“ <span class="control">样式表</span> ”选项，然后在打开的对话框中输入样式。</p></li><li class="list__item" id="cc018318"><p>根据您的偏好，为创建的样式表提供一些内容。例如，我们希望看到项目符号列表以绿色显示：</p><div class="code-block" data-lang="markup">li a {color：green; }</div>            <p></p></li></ol>    </div>    <div class="chapter"><h2 id="results" data-toc="Creating_and_Running_Your_First_framework_Project#results">我们到了！</h2>        <p id="80d57318">现在，让我们检查可用民意调查的列表。我们的管理站点已经在运行，访问包含民意测验列表的页面（索引页面）的最简单方法是指定其URL：在浏览器的地址栏中，而不是<span class="filepath">/ admin /</span> ，键入<span class="filepath">/ polls /</span> ：</p>        <figure><img alt="民意调查" title="民意调查" src="/help/img/idea/2019.2/py_result3.png" id="8ae47363" width="303" height="169"></figure>    </div>    <div class="chapter"><h2 id="test" data-toc="Creating_and_Running_Your_First_framework_Project#test">测试一下...</h2>        <p id="7dc97203">现在，让我们看看PyCharm如何帮助简化应用程序的测试。</p>        <p id="7f75912c"><span class="filepath">民意调查</span>目录中已经有文件<span class="filepath">tests.py</span> 。至此，该文件为空。自然，建议将新测试放在此特定文件中。例如，我们要确保我们的民意调查不为空：</p>        <div class="code-block" data-lang="python">从django.urls导入datetime从django.test导入反向从django.utils导入TestCase从.models导入时区问题def create_question（question_text，days）：time = timezone.now（）+ datetime.timedelta（days = days）返回Question.objects.create（question_text = question_text，pub_date = time）类QuestionViewTests（TestCase）：def test_index_view_with_no_questions（self）：“”“如果没有问题，则应显示适当的消息。“”“ response = self.client.get（reverse（'index'））self.assertEqual（response.status_code，200）self.assertContains（response，”没有可用的民意调查。“）self.assertQuerysetEqual（response.context [ 'latest_question_list']，[]）</div>        <p id="8dc9b427">要运行此测试，请在编辑器中右键单击文件<span class="filepath">tests.py</span>的背景，选择选项<span class="control">运行</span> ，或按<kbd data-primary_default_for_windows="Ctrl+Shift+F10" data-primary_intellij_idea_classic_macos="Ctrl+Shift+F10" data-primary_default_for_gnome="Ctrl+Shift+F10" data-primary_default_for_kde="Ctrl+Shift+F10" data-primary_sublime_text="Ctrl+Shift+F10" data-primary_eclipse="Ctrl+Shift+F10" data-primary_emacs="Ctrl+Shift+F10" data-primary_default_for_xwin_windows="N/A" data-secondary_default_for_macos="⌃⇧R" data-secondary_default_for_gnome="⌃⇧F10" data-secondary_default_for_kde="⌃⇧F10" data-secondary_eclipse="⌃⇧F10" data-secondary_default_for_xwin_macos="N/A" data-secondary_sublime_text_macos="N/A">Ctrl+Shift+F10</kbd> 。PyCharm建议了两个选项：运行UnitTest（定义为<a href="settings-tools-python-integrated-tools.html">默认测试运行器</a> ）或Django测试。</p>                <p id="06ffdbdb">测试结果显示在“运行”工具窗口的“ <a href="test-runner-tab.html">测试运行器”</a>选项卡中：</p>        <figure><img alt="运行测试" title="运行测试" src="/help/img/idea/2019.2/py_test_run2.png" id="05e84599" width="676" height="428"></figure>    </div>    <div class="chapter"><h2 id="summary" data-toc="Creating_and_Running_Your_First_framework_Project#summary">摘要</h2>        <p id="e7e16f4d">本简短教程已结束。您已经成功创建并启动了一个简单的Django应用程序。让我们重复在PyCharm的帮助下所做的事情：</p>        <ul class="list _ul"><li class="list__item" id="8ac5b2df"><p>Django项目和应用程序已创建</p></li><li class="list__item" id="67e0f846"><p>Django服务器启动</p></li><li class="list__item" id="ae0bf7ae"><p>已配置的数据库</p></li><li class="list__item" id="db05a7c8"><p>创建模型，视图和模板</p></li><li class="list__item" id="ac5c8404"><p>应用启动</p></li><li class="list__item" id="bc2f4524"><p>创建并执行测试</p></li></ul>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月6日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="testing-your-first-python-application.html">第三步测试您的第一个Python应用程序</a> <a class="navigation-links__next" href="mastering-keyboard-shortcuts.html">掌握PyCharm键盘快捷键</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>