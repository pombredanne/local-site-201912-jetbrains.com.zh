<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>分析重复项-帮助|帮助PyCharm</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="procedures.workingwithmodules.duplicates" data-article-props="
                {
                
            " seeals=":[=" titl=":=" procedure=",=" link=":=" ur=":" extract-method.htm="," tex=":" extract="" metho="}=" referenc=",=" specify-code-duplication-analysis-scope.htm="," specify="" duplication="" analysis="" scop="}=" code-duplication-analysis-settings.htm="," code="" setting="}=" duplicates-tool-window.htm="," duplicates="" tool="" windo="}=" web="" resource=",=" http:="" ="" devnet.jetbrains.com="" community="" python?view="documents" developer="" communit="}="><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索PyCharm帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>PyCharm 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_intellij_idea_classic_macos" data-group="primary">IntelliJ IDEA经典版（macOS）</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_default_for_xwin_windows" data-group="primary">XWin的默认设置（Windows）</option><option value="secondary_default_for_macos" data-group="secondary">macOS的默认设置</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_default_for_xwin_macos" data-group="secondary">XWin的默认设置（macOS）</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Analyzing_Duplicates.xml" data-toc="procedures.workingwithmodules.duplicates">分析重复项</h1>                  <a name="edition"></a>     <aside class="warning " rel="Analyzing_Duplicates.xml" id="8d4c96ba" data-title=""><p>仅<b id="200629ba" origin="intellij-platform">专业</b>版支持此功能。该版本是商业版本，它提供了一组出色的功能：有关更多详细信息，请参见<a href="/pycharm/features/editions_comparison_matrix.html" rel="noopener noreferrer" data-external="true" target="_blank">比较矩阵</a> 。</p></aside>            <p id="b6bc3a86">PyCharm可帮助您找到一定范围内的重复代码块。该范围可以是单个文件，项目，模块或自定义范围。分析结果直接显示在编辑器中或“ <a href="duplicates-tool-window.html">重复工具”窗口</a>的专用选项卡中。</p>        <section class="procedure-steps"><h3 id="detect-duplicates" data-toc="procedures.workingwithmodules.duplicates#detect-duplicates">实时检测重复</h3><p id="02fc0a8b">PyCharm可以即时发现重复项。通过“ <span class="emphasis">重复代码片段</span> <a href="code-inspection.html">检查”</a>执行分析，您可以在“ <span class="menupath" data-skip-index="skip">编辑器” |</span> “ <span class="control">常规”</span>节点下找到该<span class="emphasis">代码片段</span> <span class="menupath" data-skip-index="skip">。检查</span>页面<a name="open_settings"></a> <span class="control">设置/首选项</span>对话框（ <kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_default_for_xwin_windows="N/A" data-secondary_default_for_macos="⌘," data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_default_for_xwin_macos="N/A" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd> ）。</p><p id="39ade143">如果您偶然发现了现有的重复项，或者以某种方式通过编写或粘贴代码来创建一个重复项，PyCharm会报告问题，并提出快速修复建议，使您可以导航到检测到的重复项，或者在“ <span class="control">重复项”</span>工具窗口中查看所有<span class="control">重复项</span> 。</p><figure><img alt="实时检测重复" title="实时检测重复" src="/help/img/idea/2019.2/py_detect_duplicates.png" id="678129db" width="613" height="708"></figure></section>                <section class="procedure-steps"><h3 id="configure-duplicates-analysis" data-toc="procedures.workingwithmodules.duplicates#configure-duplicates-analysis">配置重复分析</h3><ol class="list _decimal"><li class="list__item" id="9943f337">                <p id="5dc64dfd">                    <a name="open_settings"></a>在“ <span class="control">设置/首选项”</span>对话框中（ <kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_default_for_xwin_windows="N/A" data-secondary_default_for_macos="⌘," data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_default_for_xwin_macos="N/A" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd> ），转到“ <span class="menupath" data-skip-index="skip">编辑器” |重复项</span> 。</p>            </li><li class="list__item" id="0a5684a4">                <p id="8c855acd">在打开的“ <span class="control">重复项”</span>页面上，选择应该对重复项进行分析的文件类型。此外，选中“ <span class="control">变量或标识符名称</span> / <span class="control">函数或字段名称</span> / <span class="control">常量值”</span>复选框以定义是否应将使用不同名称的两个相同实体视为重复项。</p>                <p id="3d3691f7">例如，如果启用了<span class="control">变量或标识符名称</span>以及<span class="control">功能或字段名称</span> ，则以下两个功能将被视为重复的：</p>                <div class="code-block" data-lang="python">def demo（a，b，c）：return_type_of_sqrt = math.sqrt（b ** 2-4 * a * c）root1 =（-b + return_type_of_sqrt）/（2 * a）root2 =（-b-return_type_of_sqrt）/ （2 * a）打印（root1，root2）def sqrt_func（n，m，k）：return_type_of_sqrt = math.sqrt（m ** 2-4 * n * k）result1 =（-m + return_type_of_sqrt）/（2 * n）result2 =（-m-return_type_of_sqrt）/（2 * n）print（result1，result2）</div>            </li><li class="list__item" id="acbc7747">                <p id="e0074966">                    <a name="open_settings"></a>在“ <span class="control">设置/首选项”</span>对话框中（ <kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_emacs="Ctrl+Alt+S" data-primary_default_for_xwin_windows="N/A" data-secondary_default_for_macos="⌘," data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_default_for_xwin_macos="N/A" data-secondary_sublime_text_macos="⌘,">Ctrl+Alt+S</kbd> ），转到“ <span class="menupath" data-skip-index="skip">编辑器” |检查，</span>然后在“ <span class="control">常规”</span>节点下选择“ <span class="emphasis">重复代码片段</span>检查”。</p>            </li><li class="list__item" id="7b9a1f26">                <p id="eb474166">在检查选项中，选择是仅在同一文件中还是在整个项目中查看重复项。在“ <span class="control">不要显示比简单的重复项更简单的</span>字段”中，设置要检测的重复语言结构的大小。在Python上下文中，默认情况下会忽略少于45个单位的构造。更改单位数量，以便对较小的代码片段进行重复检测。单位值可以计算如下： <code class="code">units = 2*<number of statements> + <number of expressions></code> 。</p>                <figure><img alt="重复的代码片段检查设置" title="重复的代码片段检查设置" src="/help/img/idea/2019.2/py_duplicated_code_fragment_inspection_settings.png" id="77750e37" width="700" height="825"></figure>            </li></ol></section>    <section class="procedure-steps"><h3 id="search-duplicates" data-toc="procedures.workingwithmodules.duplicates#search-duplicates">手动搜索重复项（不建议使用）</h3><aside class="note " rel="search-duplicates" id="f4bdfba9" data-title="">            <p id="21f34a91">此选项已被弃用，不久将被删除。</p>        </aside><ol class="list _decimal"><li class="list__item" id="642a1ffd"><p>在主菜单中，选择<span class="menupath" data-skip-index="skip">代码|找到重复项</span> 。</p></li><li class="list__item" id="958a7684"><p>在“ <span class="control">指定代码重复分析范围”</span>对话框中，指定分析范围：整个项目，当前文件，未提交的文件（对于受版本控制的项目）或某些自定义范围。此外，您也可以将测试源包括在分析中。</p></li><li class="list__item" id="e4f9e592">            <p id="4a55b7c2">在“ <span class="control">代码重复分析设置”</span>对话框中，选择要分析的语言。</p>            <p id="d1389daa">对于每种语言，检查选项以定义分析首选项。例如，您可以选择请求将代码片段视为重复的相同匹配项，或者指定一个特定的限制，在该限制之下，代码构造不被视为重复（例如，避免报告每个<code class="code">if</code>在源代码中构建）。</p>        </li><li class="list__item" id="64474f39">            <p id="751cd121">在“ <a href="duplicates-tool-window.html">重复工具”窗口中</a> ，浏览分析结果。</p>            <figure><img alt="img" title="img" src="/help/img/idea/2019.2/py_analyzeDuplicates.png" id="07c0c57c" width="536" height="163"></figure>                                                <ul class="list _ul"><li class="list__item" id="877a8829"><p>在工具窗口的左窗格中查看重复项列表。</p></li><li class="list__item" id="397c5612"><p>在右窗格中查看找到的重复项之间的差异。使用箭头按钮将选定的副本放置在差异查看器的部分之一中，并比较代码片段。</p></li><li class="list__item" id="33385966"><p>使用<span class="control">跳转到源</span>或<span class="control">显示源</span>上下文菜单命令在编辑器中导航到重复项。</p></li><li class="list__item" id="e4b2b5f1"><p>通过将<a href="extract-method.html">提取方法重构</a>应用于检测到的自动发现并突出显示的重复代码块，从源代码中消除重复项。</p></li></ul>            </li></ol></section>  <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月6日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="retaining-hierarchy-tabs.html">保留层次结构选项卡，</a> <a class="navigation-links__next" href="analyzing-external-stacktraces.html">分析外部堆栈跟踪</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>