<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><meta charset="UTF-8"><title>Tuning up a ZIP installation - Help | Upsource</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Tuning_up_a_ZIP_installation"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search Upsource Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>Upsource 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="default" selected>Default (Windows/Linux)</option><option data-group="secondary" value="mac_os_x_10.5_">Default (Mac OS X 10.5+)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Tuning_up_a_ZIP_installation" id="Tuning_up_a_ZIP_installation.xml">Tuning up a ZIP installation</h1>    <aside class="note " data-title="" rel="Tuning_up_a_ZIP_installation.xml" id="25b45af3">        <p id="ae04dcde">The commands on this page are for Linux and OS X. For a Windows installation, replace <code class="code">.sh</code> with <code class="code">.bat</code> and use the backslash.        </p>        <p id="a884e97b">Always execute commands on behalf of the OS user that runs the Upsource service. These commands create            configuration files and folders. The Upsource service user should have sufficient permissions to access            these files and folders.        </p>    </aside>    <aside class="note " data-title="" rel="Tuning_up_a_ZIP_installation.xml" id="acfd5ad1">        <p id="fa0ed206">Read about Upsource services, processes, properties and how they're organized and interrelated in <a href="advanced-upsource-tuning.html">Advanced Upsource tuning</a>.        </p>    </aside>    <aside class="warning " data-title="" rel="Tuning_up_a_ZIP_installation.xml" id="c32d5355">        <p id="7fd623d0">The one-way synchronization from the configuration file to the database can lead to problems if you're not            careful. System properties that are set in the Upsource UI are applied directly to the database. If you            change a setting in the UI that has been updated in the configuration file, the setting in the configuration            file will be applied to the database on restart, overwriting the setting in the UI.        </p>    </aside>    <div class="chapter"><h2 id="configure-launcher-properties" data-toc="Tuning_up_a_ZIP_installation#configure-launcher-properties">Configuring Upsource Launcher properties</h2>        <p id="e1bf3b8a">Upsource Launcher process uses:</p>        <ul class="list _ul"><li class="list__item" id="01f3e4da">                <p id="9e0c718d">Upsource-specific properties — can be changed programmatically with the <code class="code">configure</code> command.                </p>                <p id="4b9badb6">See <a href="upsource-launcher-properties.html#upsource-specific-properties">a list of the                    configurable Upsource-specific Launcher properties</a>.                </p>            </li><li class="list__item" id="7e465242">                <p id="67fe5cd8">JVM properties — can be changed programmatically with the <code class="code">configure</code> command or by                    manually editing the configuration file <i id="ac38fb6b">upsource.jvmoptions</i>.                </p>                <p id="e5da3da6">A JVM property can be also changed on a                    <b id="ca0ca10d">                        <a href="#change-jvm-temporary">temporary</a>                    </b>                    basis, passing it as an ad hoc parameter with the <code class="code">start</code> command.                    This method only applies the changes for the current run and does not change the configuration file.                    Use this option when you want to test changes to your server configuration.                </p>                <p id="946058b5">See <a href="upsource-launcher-properties.html#default-jvm-options">a list of the default JVM                    options for the Upsource Launcher process</a>.                </p>            </li></ul>        <section class="procedure-steps"><h3 id="97eefc25">To change Upsource-specific Launcher properties:</h3><ol class="list _decimal"><li class="list__item" id="e27a1b99"><p>Stop Upsource:                <code class="code">&lt;upsource_home&gt;/bin/upsource.sh stop</code>            </p></li><li class="list__item" id="f66eb6f6"><p>Enter the <code class="code">upsource.sh configure</code> command, followed by all of the settings that you want to                update in the configuration file. You can set multiple options in a single command. For example:                <div class="code-block" data-lang="bash">&lt;upsource_home&gt;/bin/upsource.sh configure --listen-port 1111 --base-url
                    http://upsource.mydomain.com:2222
    </div>            </p></li><li class="list__item" id="486d45f0"><p><a href="starting-stopping.html">Start Upsource</a>.            </p></li></ol></section>        <aside class="tip sideblock" data-title="" rel="97eefc25" id="5d8d76f5">            <p id="e4a0900c">You can mix Upsource-specific and JVM properties in a single <code class="code">configure</code> command.            </p>        </aside>        <section class="procedure-steps"><h3 id="change-jvm-program">To change JVM Launcher properties programmatically:</h3><ol class="list _decimal"><li class="list__item" id="7ee1b561"><p>Stop Upsource:                <code class="code">&lt;upsource_home&gt;/bin/upsource.sh stop</code>            </p></li><li class="list__item" id="7e7ced4c">                <p id="3e5083af">Enter the <code class="code">upsource.sh configure</code> command, followed by all of the settings that you want                    to update in the configuration file.                </p>                <p id="2925fcb6">Use the <code class="code">-J</code> prefix followed by a JVM option. Do not add any spaces between the prefix and                    the option.                </p>                <p id="2658dd11">The symbol that precedes the option determines how it is applied:</p>                <ul class="list _ul"><li class="list__item" id="329b7cbe"><p>Add an option with the <code class="code">-</code> symbol.                    </p></li><li class="list__item" id="cc329161"><p>Remove an option with the <code class="code">+</code> symbol.                    </p></li></ul>                <p id="465a3e02">If you specify a value, the corresponding option is only removed if it has exactly the same value.                </p>                <p id="24e55061">You can set multiple options in a single command.</p>                <p id="8f7fa763">Example:</p>                <div class="code-block" data-lang="bash">upsource.sh configure -J-Xmx1024m -J-XX:+HeapDumpOnOutOfMemoryError
    </div>            </li><li class="list__item" id="7a7a55b1"><p><a href="starting-stopping.html">Start Upsource</a>.            </p></li></ol></section>        <p id="a66ec22c">You can also change JVM setting by editing a configuration file manually.</p>        <section class="procedure-steps"><h3 id="change-jvm-manually">To change JVM Launcher properties manually:</h3><ol class="list _decimal"><li class="list__item" id="4c6a2b4c"><p>Stop Upsource:                <code class="code">&lt;upsource_home&gt;/bin/upsource.sh stop</code>            </p></li><li class="list__item" id="7b33e35b">                <p id="16c4f1ac">Open the configuration file <i id="c6c125f4">upsource.jvmoptions</i> located in the directory <code class="code">&lt;upsource_home&gt;/conf</code>.                </p>                <p id="d98a018c">If the the file does not exist, create it and copy the contents of the sample configuration file with                    the <i id="a52ea944">.dist</i> extension into it.                </p>            </li><li class="list__item" id="2f755a59"><p>Edit the JVM options directly in the file. List each JVM option on a new line. To set a pre-defined                JVM option, simply uncomment the corresponding line.            </p></li><li class="list__item" id="e8e45668"><p>Save and close the file.</p></li><li class="list__item" id="48b65793">                <p id="ede7ab3e"><a href="starting-stopping.html">Start Upsource</a>.                </p>                <ul class="list _ul"><li class="list__item" id="856d0daf"><p>The changes to the configuration file are copied to the database.</p></li><li class="list__item" id="9d2ec8f7"><p>Upsource starts using the specified settings.</p></li></ul>            </li></ol></section>        <section class="procedure-steps"><h3 id="change-jvm-temporary">To change JVM Launcher properties on a temporary basis (ad hoc):</h3><ol class="list _decimal"><li class="list__item" id="4609b00a"><p>Stop Upsource:                <code class="code">&lt;upsource_home&gt;/bin/upsource.sh stop</code>            </p></li><li class="list__item" id="3372b122">                <p id="9439a90d">Enter the <code class="code">upsource.sh start</code> command, followed by all of the settings that you want to                    pass to Upsource on start.                </p>                <p id="a082da8b">Use the <code class="code">--J</code> prefix to pass the settings as ad hoc parameters. Follow the prefix with a                    JVM option. Do not add any spaces between the prefix and the option.                </p>                <p id="c38cdcfe">The symbol that precedes the option determines how it is applied:</p>                <ul class="list _ul"><li class="list__item" id="ebf9d663"><p>Add an option with the <code class="code">-</code> symbol.                    </p></li><li class="list__item" id="8c4966c0"><p>Remove an option with the <code class="code">+</code> symbol.                    </p></li></ul>                <p id="fe4893f1">If you specify a value, the corresponding option is only removed if it has exactly the same value.                </p>                <p id="adf4de3d">You can set multiple options in a single command.</p>                <p id="68963620">Example:</p>                <div class="code-block" data-lang="bash">upsource.sh start --J-Xmx1024m --J-XX:+HeapDumpOnOutOfMemoryError
    </div>                <ul class="list _ul"><li class="list__item" id="a385eedc"><p>Upsource starts with the specified settings, bypassing the configuration file.</p></li><li class="list__item" id="1ece76e5"><p>The configuration file is not modified.</p></li><li class="list__item" id="d912e5e4">                        <p id="b9a9d9dc">Subsequent starts that do not specify the ad hoc parameter use the settings that are stored                            in the configuration file. To run Upsource with the previous settings, simply restart it                            without passing any custom parameters.                        </p>                    </li></ul>            </li></ol></section>    </div>    <div class="chapter"><h2 id="configure-frontend-properties" data-toc="Tuning_up_a_ZIP_installation#configure-frontend-properties">Configuring Upsource Frontend properties</h2>        <p id="c8535017">Upsource Frontend process uses:</p>        <ul class="list _ul"><li class="list__item" id="c53f2d2e">                <p id="34a37c60">                    <a href="upsource-frontend-properties.html#upsource-specific-properties">Upsource-specific                        properties                    </a>                </p>            </li><li class="list__item" id="15677964">                <p id="d876fe2f">                    <a href="upsource-frontend-properties.html#default-jvm-options">JVM properties (options)</a>                </p>            </li></ul>        <p id="939e30fb">Upsource Frontend properties can be changed programmatically with the <code class="code">configure</code> command or by            manually editing the configuration file            <i id="01291a62">upsource-frontend.jvmoptions</i>        </p>        <section class="procedure-steps"><h3 id="c14d66e9">To configure Frontend properties programmatically:</h3><ol class="list _decimal"><li class="list__item" id="ecafe553"><p>Stop Upsource:                <code class="code">&lt;upsource_home&gt;/bin/upsource.sh stop</code>            </p></li><li class="list__item" id="f67cc73f">                <p id="3fbd17f3">Switch to the directory                    <code class="code">&lt;upsource_home&gt;/conf/upsource-frontend</code>                </p>            </li><li class="list__item" id="3c31beb3">                <p id="bffe3d0f">Enter the <code class="code">upsource-frontend.sh configure</code> command, followed by all of the settings that                    you want to update in the configuration file.                </p>                <p id="ddcf6691">Use the <code class="code">-J</code> prefix followed by a property or JVM option. Do not add any spaces between                    the prefix and the option.                </p>                <p id="28e39f08">The symbol that precedes the option determines how it is applied:</p>                <ul class="list _ul"><li class="list__item" id="f5c219ef"><p>Add an option with the <code class="code">-</code> symbol.                    </p></li><li class="list__item" id="bd307982"><p>Remove an option with the <code class="code">+</code> symbol.                    </p></li></ul>                <p id="695295a8">If you specify a value, the corresponding option is only removed if it has exactly the same value.                </p>                <p id="ad2c2e08">You can set multiple options in a single command.</p>                <p id="79f4b1fd">Example 1:</p>                <div class="code-block" data-lang="bash">upsource-frontend.sh configure
                    -J-Dfrontend.diff.filesize.limit=2000
    </div>                <p id="a89b0f61">In this example we increased the maximum number of lines to display in a diff from 1000(default) to                    2000.                </p>                <p id="f5c5c0fe">Example 2:</p>                <div class="code-block" data-lang="bash">upsource-frontend.sh configure -J-Xmx1024m
                    -J-XX:+HeapDumpOnOutOfMemoryError
    </div>            </li><li class="list__item" id="b1f4425e">                <p id="dc251a57"><a href="starting-stopping.html">Start Upsource</a>.                </p>                <ul class="list _ul"><li class="list__item" id="8a7da07b"><p>Upsource starts with the specified settings.</p></li><li class="list__item" id="50bf3829"><p>The configuration file <code class="code">upsource-frontend.jvmoptions</code> is modified and the new                        settings will be applied to any consequent startup.                    </p></li></ul>            </li></ol></section>        <section class="procedure-steps"><h3 id="243f6182">To configure Frontend properties manually:</h3><ol class="list _decimal"><li class="list__item" id="6ecdad41"><p>Stop Upsource:                <code class="code">&lt;upsource_home&gt;/bin/upsource.sh stop</code>            </p></li><li class="list__item" id="a1643b2c">                <p id="14287673">Open the configuration file <i id="6d6b79c4">upsource-frontend.jvmoptions</i> located in the <code class="code">&lt;upsource_home&gt;/conf/upsource-frontend</code> directory.                    If the file does not exist, create it.                </p>            </li><li class="list__item" id="3b3cee66"><p>Edit existing properties directly in the file. Add new properties with their values to the end of the                file.            </p></li><li class="list__item" id="01ddba56"><p>Save and close the file.</p></li><li class="list__item" id="0b1b7d76">                <p id="b14f042a"><a href="starting-stopping.html">Start Upsource</a>.                </p>                <ul class="list _ul"><li class="list__item" id="4e5aac51"><p>The changes to the configuration file are copied to the database.</p></li><li class="list__item" id="69345e41"><p>Upsource starts with the specified settings.</p></li></ul>            </li></ol></section>    </div>    <div class="chapter"><h2 id="configure-cassandra-properties" data-toc="Tuning_up_a_ZIP_installation#configure-cassandra-properties">Configuring Upsource Cassandra properties</h2>        You can manage the Cassandra process by changing its JVM options with the <code class="code">configure</code> command or by        manually editing the configuration file <i id="f7451e76">cassandra.jvmoptions</i>. See        <a href="upsource-cassandra-properties.html">Upsource Cassandra properties</a>        for a list of the default options.        <section class="procedure-steps"><h3 id="32ebf218">To configure Cassandra properties programmatically:</h3><ol class="list _decimal"><li class="list__item" id="148b7420"><p>Stop Upsource:                <code class="code">&lt;upsource_home&gt;/bin/upsource.sh stop</code>            </p></li><li class="list__item" id="cb08f732">                <p id="32de2585">Switch to the directory                    <code class="code">&lt;upsource_home&gt;/conf/cassandra</code>                </p>            </li><li class="list__item" id="47a923f2">                <p id="f59eec00">Enter the <code class="code">cassandra.sh configure</code> command, followed by all of the settings that you want                    to update in the configuration file.                </p>                <p id="c38085fc">Use the <code class="code">-J</code> prefix followed by a JVM option. Do not add any spaces between the prefix and                    the option.                </p>                <p id="768b017f">The symbol that precedes the option determines how it is applied:</p>                <ul class="list _ul"><li class="list__item" id="11839011"><p>Add an option with the <code class="code">-</code> symbol.                    </p></li><li class="list__item" id="bfaebb9a"><p>Remove an option with the <code class="code">+</code> symbol.                    </p></li></ul>                <p id="c8188b29">If you specify a value, the corresponding option is only removed if it has exactly the same value.                </p>                <p id="42a8af4b">You can set multiple options in a single command.</p>                <p id="7cdf3aa2">Example:</p>                <div class="code-block" data-lang="bash">cassandra.sh configure -J-Xmx3500m
                    -J-XX:+HeapDumpOnOutOfMemoryError
    </div>            </li><li class="list__item" id="25d9a0de"><p><a href="starting-stopping.html">Start Upsource</a>.            </p></li></ol></section>        <section class="procedure-steps"><h3 id="2fa06a04">To configure Cassandra properties manually:</h3><ol class="list _decimal"><li class="list__item" id="8347df29"><p>Stop Upsource:                <code class="code">&lt;upsource_home&gt;/bin/upsource.sh stop</code>            </p></li><li class="list__item" id="0fce2c92">                <p id="08192fd1">Open the configuration file <i id="242d9fa6">cassandra.jvmoptions</i> located in the <code class="code">&lt;upsource_home&gt;/conf/cassandra</code> directory.                    If the file does not exist, create it.                </p>            </li><li class="list__item" id="efe1cd9e"><p>Edit existing properties directly in the file. Add new properties with their values to the end of the                file.            </p></li><li class="list__item" id="d22aa84a"><p>Save and close the file.</p></li><li class="list__item" id="7309c18c">                <p id="61851dc5"><a href="starting-stopping.html">Start Upsource</a>.                </p>                <ul class="list _ul"><li class="list__item" id="d63b7c8d"><p>The changes you made to the configuration file are copied to the database.</p></li><li class="list__item" id="48807a96"><p>Upsource starts with the specified settings.</p></li></ul>            </li></ol></section>    </div><div class="last-modified" data-skip-index="skip">Last modified: 9 August 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="advanced-upsource-tuning.html">Advanced Upsource tuning</a><a class="navigation-links__next" href="tuning-up-a-docker-installation.html">Tuning up a Docker installation</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>