<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><meta charset="UTF-8"><title>Error: "Could not initialize class com.sun.jna.Native" - Help | Upsource</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Error___Could_not_initialize_class_com.sun.jna.Native_.xml"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search Upsource Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>Upsource 2019.1 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="default" selected>Default (Windows/Linux)</option><option data-group="secondary" value="mac_os_x_10.5_">Default (Mac OS X 10.5+)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Error___Could_not_initialize_class_com.sun.jna.Native_.xml" id="Error___Could_not_initialize_class_com.sun.jna.Native_.xml">Error: "Could not initialize class com.sun.jna.Native"</h1>    <p id="7d108cac">The error occurs on the Cassandra database startup.  Cassandra throws the following exception while starting:</p>    <p id="2bc5d30f"><font style="color:#ff0000"> ERROR o.a.c.service.CassandraDaemon - Exception in thread Thread[MemtableFlushWriter:1,5,main]</font></p>    <p id="39e8f7ef"><font style="color:#ff0000"> java.lang.NoClassDefFoundError: Could not initialize class com.sun.jna.Native</font></p>    <p id="73805ebe"><font style="color:#ff0000"> at org.apache.cassandra.utils.memory.MemoryUtil.allocate(MemoryUtil.java:82) ~[apache-cassandra-2.2.4.jar:2.2.4]</font></p>    <p id="5846b1e0"><font style="color:#ff0000"> at org.apache.cassandra.io.util.Memory.&lt;init&gt;(Memory.java:74) ~[apache-cassandra-clientutil-2.2.4.jar:2.2.4]</font></p>    <p id="2b633ed4"><font style="color:#ff0000"> ...</font></p>        <div class="chapter"><h2 id="c60d17ff">Solution</h2>        <p id="6b8a558d">This issue is typically caused by a <i id="38ab0cb4">noexec</i> flag set on the temporary directory.</p>        <p id="704eb23c">There are two possible ways to resolve the issue:</p>        <ul class="list _ul"><li class="list__item" id="c0434d1f"><p id="8b570994">                Remount the <i id="35c10c71">tmp</i> directory without the <i id="6c4886d7">noexec</i> flag.            </p>            <p id="bc756fbf">or</p></li><li class="list__item" id="b452a006"><p id="355ece0d">                Configure Cassandra to use another location as a temporary directory. To do that...            </p>                <p id="09b53991">...<b id="304bffd0">for a ZIP installation:</b></p>                <ol class="list _decimal"><li class="list__item" id="22342d88">                        <p id="53587c3e">Stop Upsource: <code class="code">&lt;upsource_home&gt;/bin/upsource.sh stop</code></p>                    </li><li class="list__item" id="c089386a">                        <p id="e9e88db2">Run the following command:</p>                        <div class="code-block" data-lang="bash">
                            &lt;Upsource_home&gt;/apps/cassandra/bin/cassandra.sh configure -J-Djava.io.tmpdir=$HOME
    </div>                    </li><li class="list__item" id="8eb6c1e3">                        <p id="bc5797e9"><a href="starting-stopping.html">Start Upsource</a></p>                    </li></ol>                <p id="42799ef9">...<b id="6dbe1701">for a Docker installation:</b></p>                <ol class="list _decimal"><li class="list__item" id="2bdae7dd">                        <p id="d44a7d9c">Stop Upsource: <code class="code">docker exec &lt;containerId&gt; stop</code></p>                    </li><li class="list__item" id="521905b0">                        <p id="c882be84">Run the following command:</p>                        <div class="code-block" data-lang="bash">
                            docker run -it
                            -v &lt;path to data directory&gt;:/opt/upsource/data \
                            -v &lt;path to conf directory&gt;:/opt/upsource/conf \
                            -v &lt;path to logs directory&gt;:/opt/upsource/logs  \
                            -v &lt;path to backups directory&gt;:/opt/upsource/backups \
                            -p &lt;port on host&gt;:XXXX \
                            --entrypoint=/bin/bash jetbrains/upsource:&lt;version&gt; \
                            /opt/upsource/apps/cassandra/bin/cassandra.sh \
                            configure -J-Djava.io.tmpdir=$HOME
    </div>                    </li></ol>            </li></ul>    </div><div class="last-modified" data-skip-index="skip">Last modified: 9 August 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="error-400-bad-request-while-connecting-to-mercurial-repository.html">Error 400: "Bad Request while connecting to Mercurial repository"</a><a class="navigation-links__next" href="error-some-services-registered-by-product-are-not-valid-in-target-hub.html">Error: "Some services registered by Product are not valid in target Hub"</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>