<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><meta content="troubleshooting, trouble shooting, troubleshoot, problem, workaround" name="description"><meta charset="UTF-8"><meta name="robots" content="noindex"><title>Upsource 3.5 Help :: Common issues with Upsource</title><link rel="stylesheet" href="/help/app/app.css"></head><body data-id="issues"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search Upsource Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header"><div class="container"><h3>Upsource 3.5 Help</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="default" selected>Default (Windows/Linux)</option><option data-group="primary" value="default_for_gnome">GNOME</option><option data-group="primary" value="default_for_kde">KDE</option><option data-group="primary" value="default_for_xwin">XWindow</option><option data-group="primary" value="emacs">Emacs</option><option data-group="primary" value="visual_studio">Visual Studio</option><option data-group="primary" value="netbeans_6.5">NetBeans 6.5</option><option data-group="primary" value="eclipse">Eclipse</option><option data-group="secondary" value="mac_os_x_10.5_">Default (Mac OS X 10.5+)</option><option data-group="secondary" value="mac_os_x">OS X</option><option data-group="secondary" value="eclipse_mac_os_x">OS X Eclipse</option><option data-group="secondary" value="intellij_idea_classic_os_x">IntelliJ IDEA Classic (OS X)</option><option data-group="secondary" value="xcode">Xcode</option><option data-group="secondary" value="visual_studio">Visual Studio</option><option data-group="secondary" value="resharper">ReSharper</option><option data-group="secondary" value="resharper_osx">ReSharper OSX</option><option data-group="secondary" value="emacs">Emacs</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="false"><div class="navigation-links _top"><a class="navigation-links__next" href="third-party-software-shipped-with-upsource.html">Third-party software shipped with Upsource</a></div><h1>Common issues with Upsource</h1><a name="d8432e6"></a><p>This document lists common issues that Upsource users and administrators face, and suggests solutions.</p><table class=" wide             " width="100%" id="d8432e9"><thead><tr id="d8432e11" class="ijRowHead"><a name="d8432e11"></a><th><a name="d8432e13"></a>
               <a name="d8432e15"></a><p>Issue</p>
           </th><th><a name="d8432e19"></a>
               <a name="d8432e21"></a><p>Cause</p>
           </th><th><a name="d8432e25"></a>
               <a name="d8432e27"></a><p>Solution</p>
           </th></tr></thead><tbody><tr id="d8432e32" class="ijRowOdd"><a name="d8432e32"></a><td><a name="d8432e34"></a>
               <a name="d8432e36"></a><p>You forgot your administrator password.</p>
           </td><td><a name="d8432e40"></a>
               <a name="d8432e42"></a><p> </p>
           </td><td><a name="d8432e46"></a>
               <a name="d8432e48"></a><p>Reset your administrator account password.</p>
               <a name="d8432e51"></a><p><a name="d8432e52"></a><a href="#ResetPassword"><span>See instruction</span></a></p>
           </td></tr><tr id="d8432e57" class="ijRowEven"><a name="d8432e57"></a><td><a name="d8432e59"></a>
               <a name="d8432e61"></a><p>Expired free license.</p>
           </td><td><a name="d8432e65"></a>
               <a name="d8432e67"></a><p>Following the upgrade, Upsource fails to convert an older license to the new free license.</p>
           </td><td><a name="d8432e71"></a>
               <a name="d8432e73"></a><p>Provide new license.</p>
               <a name="d8432e76"></a><p><a name="d8432e77"></a><a href="#License"><span>See instruction</span></a></p>
           </td></tr><tr id="d8432e82" class="ijRowOdd"><a name="d8432e82"></a><td><a name="d8432e84"></a>
               <a name="d8432e86"></a><p>"Server SSL certificate not trusted" displayed during upgrade.</p>
           </td><td><a name="d8432e90"></a>
               <a name="d8432e92"></a><p>Upsource can't connect to the external Hub because the server SSL certificate is not found or expired.</p>
           </td><td><a name="d8432e96"></a>
               <a name="d8432e98"></a><p>Import the Hub certificate to Upsource and configure Upsource to accept it.</p>
               <a name="d8432e101"></a><p><a name="d8432e102"></a><a href="#Certificate"><span>See instruction</span></a></p>
           </td></tr><tr id="d8432e107" class="ijRowEven"><a name="d8432e107"></a><td rowspan="2"><a name="d8432e109"></a>
               <a name="d8432e111"></a><p>Upsource fails to start.</p>
           </td><td><a name="d8432e115"></a>
               <a name="d8432e117"></a><p>External (standalone) Hub is not yet initialized.</p>
           </td><td><a name="d8432e121"></a>
               <a name="d8432e123"></a><p><ul class="list _ul"><li class="list__item"><a name="d8432e126"></a>Stop Upsource.</li><li class="list__item"><a name="d8432e129"></a>Wait a few minutes for Hub to initialize.</li><li class="list__item"><a name="d8432e132"></a>Start Upsource.</li></ul></p>
           </td></tr><tr id="d8432e139" class="ijRowOdd"><a name="d8432e139"></a><td><a name="d8432e141"></a>
               <a name="d8432e143"></a><p>Upsource can't connect to the external Hub because the server SSL certificate is not found or expired.</p>
           </td><td><a name="d8432e147"></a>
               <a name="d8432e149"></a><p>Import the Hub certificate to Upsource and configure Upsource to accept it.</p>
               <a name="d8432e152"></a><p><a name="d8432e153"></a><a href="#Certificate"><span>See instruction</span></a></p>
           </td></tr><tr id="d8432e158" class="ijRowEven"><a name="d8432e158"></a><td><a name="d8432e160"></a>
               <a name="d8432e162"></a><p>Code insight in Maven or Gradle based project is not working.
                   The code analysis status indicator remains grey.</p>
           </td><td><a name="d8432e166"></a>
               <a name="d8432e168"></a><p>Code intelligence is disabled or not properly configured.</p>
           </td><td><a name="d8432e172"></a>
               <a name="d8432e174"></a><p>Enable/edit code intelligence settings.  If it doesn't help, get mvn.out (gradle.out) file and contact support.</p>
               <a name="d8432e177"></a><p><a name="d8432e178"></a><a href="#CodeIntelligence"><span>See instruction</span></a></p>
           </td></tr><tr id="d8432e183" class="ijRowOdd"><a name="d8432e183"></a><td><a name="d8432e185"></a>
               <a name="d8432e187"></a><p>Upsource services consume all memory.</p>
           </td><td><a name="d8432e191"></a>
               <a name="d8432e193"></a><p>OutOfMemory exception.</p>
           </td><td><a name="d8432e197"></a>
               <a name="d8432e199"></a><p>Increase heap size available to Upsource frontend process.</p>
               <a name="d8432e202"></a><p><a name="d8432e203"></a><a href="#OutOfMemory"><span>See instruction</span></a></p>
           </td></tr><tr id="d8432e208" class="ijRowEven"><a name="d8432e208"></a><td><a name="d8432e210"></a>
               <a name="d8432e212"></a><p>New commits are not getting indexed.</p>
           </td></tr><tr id="d8432e217" class="ijRowOdd"><a name="d8432e217"></a><td><a name="d8432e219"></a>
               <a name="d8432e221"></a><p>Revisions are stuck in "indexing in progress" state.</p>
           </td></tr><tr id="d8432e226" class="ijRowEven"><a name="d8432e226"></a><td><a name="d8432e228"></a>
               <a name="d8432e230"></a><p>Web UI is extremely slow.</p>
           </td></tr><tr id="d8432e236" class="ijRowOdd"><a name="d8432e236"></a><td><a name="d8432e238"></a>
               <a name="d8432e240"></a><p>Cassandra database won't start when Upsource launched.</p>
           </td><td><a name="d8432e244"></a>
               <a name="d8432e246"></a><p>Not enough memory for Cassandra database.</p>
           </td><td><a name="d8432e250"></a>
               <a name="d8432e252"></a><p>Increase heap size available to Cassandra process.</p>
               <a name="d8432e255"></a><p><a name="d8432e256"></a><a href="#MemoryForCassandra"><span>See instruction</span></a></p>
           </td></tr><tr id="d8432e261" class="ijRowEven"><a name="d8432e261"></a><td><a name="d8432e263"></a>
               <a name="d8432e265"></a><p>Slow Cassandra performance.</p>
           </td><td><a name="d8432e269"></a>
               <a name="d8432e271"></a><p>Insufficient memory lock settings.</p>
           </td><td><a name="d8432e275"></a>
               <a name="d8432e277"></a><p>Increase memory lock limit.</p>
               <a name="d8432e280"></a><p><a name="d8432e281"></a><a href="#InsufficientMemorySettings"><span>See instruction</span></a></p>
           </td></tr></tbody></table><aside class="note sideblock"><a name="d8432e288"></a><p>All commands listed here are Windows commands unless mentioned otherwise. If you're working on a Linux or Mac OS X server, simply replace <code class="code" data-lang="Java">.bat</code> with <code class="code" data-lang="Java">.sh</code>. For Mac OS X or Linux, please make sure to start Upsource as a non-root user.</p></aside><a name="ResetPassword"></a><h2>1. You forgot your administrator password</h2><a name="d8432e301"></a><h3>Problem</h3><a name="d8432e304"></a><p>You can't access your administrator account because you forgot your password.</p><a name="d8432e307"></a><h3>Solution</h3><a name="d8432e310"></a><p>Reset your administrator account password as follows:</p><a name="d8432e313"></a><a name="dynaProc0"></a><section class="procedure-steps"><ol class=".list _decimal"><li class="list__item">
            Stop Upsource: <code class="code" data-lang="Java">&lt;upsource_home&gt;\bin\upsource.bat stop</code>
        </li><li class="list__item">
            <a name="d8432e323"></a><p>Enter your new password and start Upsource with the following command:</p>
            <a name="d8432e326"></a><p><code class="code" data-lang="Java">&lt;upsource_home&gt;\bin\upsource.bat start --J-Djetbrains.jetpass.admin.restore=true --J-Djetbrains.jetpass.admin.password=XXXXX</code></p>
            <a name="d8432e330"></a><p>where XXXXX is your new password. Please notice two dashes before J, which means properties are applied to the current start only and should not be reverted by a user manually later.</p>
        </li></ol></section><a name="License"></a><h2>2. Following the upgrade from earlier versions (2.X.X) to version 3.5, Upsource Free 10 Users Pack license is not recognised as valid.</h2><a name="d8432e339"></a><h3>Problem</h3><a name="d8432e342"></a><p>After backing up project data from an older build and upgrading to Upsource 3.5 with that project data, Upsource may fail to convert an older license to the new free license. The erroneously preserved license manifests itself as expired and does not allow using Upsource.</p><a name="d8432e345"></a><h3>Solution</h3><a name="d8432e348"></a><p>Instead of the expired license, please <a name="d8432e350"></a><a href="entering-your-license.html"><span>enter</span></a> the following license name/key combination:</p><a name="d8432e354"></a><p>Name:</p><a name="d8432e357"></a><p>
      <code class="code" data-lang="Java">Upsource 3.5 Free 10 Users Pack</code>
   </p><a name="d8432e364"></a><p>Key:</p><a name="d8432e367"></a><p>
      <code class="code" data-lang="Java">7df4fea355a244e799d0a34bdb7b2d384ecd5e2c244b338ae5baac82b85b93d172d6998c68d22818248e2cc721e602a87ced6cac5ebb36f8579582aac00d033e7a2c3fa1fd26e0219d71de568ffc3caf55759c91768642d07b9615a2ce832b79556ec5ee826125fba7ecb14224a3534d37913c8b6cdbf9f2b1796bc85aa0b4dd</code>
   </p><a name="MemoryForCassandra"></a><h2>3. Not enough memory for Cassandra database</h2><a name="d8432e376"></a><h3>Problem</h3><a name="d8432e379"></a><p>Apache Cassandra database won't start when Upsource launched</p><a name="d8432e382"></a><h3>Solution</h3><a name="d8432e386"></a><p>Increase heap size to Cassandra process as follows:</p><a name="d8432e389"></a><a name="dynaProc1"></a><section class="procedure-steps"><ol class=".list _decimal"><li class="list__item">
         Stop Upsource: <code class="code" data-lang="Java">&lt;upsource_home&gt;\bin\upsource.bat stop</code>
      </li><li class="list__item">
         <a name="d8432e399"></a><p>Run the following command:</p>
         <a name="d8432e402"></a><p><code class="code" data-lang="Java">&lt;upsource_home&gt;\apps\cassandra\bin\cassandra.bat configure -J-Xmx5000m</code></p>
      </li><li class="list__item">
         Start Upsource: <code class="code" data-lang="Java">&lt;upsource_home&gt;\bin\upsource.bat start</code>
      </li></ol></section><a name="InsufficientMemorySettings"></a><h2>4. Insufficient memory settings in Linux may affect Cassandra database performance</h2><a name="d8432e417"></a><h3>Problem</h3><a name="d8432e420"></a><p>The following warning:</p><code class="code" data-lang="Java">Unable to lock JVM memory (ENOMEM). This can result in part of the JVM being swapped out, especially with mmapped I/O enabled</code><a name="d8432e427"></a><p>encountered in the cassandra-stderr.log file indicates insufficient memory lock settings. Even though most of the time it will not cause any problem, it may potentially affect Cassandra performance in some cases.</p><a name="d8432e430"></a><h3>Solution</h3><a name="d8432e433"></a><p>Increase memory lock limit by running the <code class="code" data-lang="Java">ulimit</code> command, or, if you work in Debian, modify the /etc/security/limits.conf file - change <code class="code" data-lang="Java">max locked memory</code> to <code class="code" data-lang="Java">unlimited</code> for the user under which Cassandra runs.</p><a name="OutOfMemory"></a><h2>5. OutOfMemory exception</h2><a name="d8432e448"></a><h3>Problem</h3><ul class="list _ul"><li class="list__item"><a name="d8432e453"></a>Upsource services consume all memory</li><li class="list__item"><a name="d8432e456"></a>New commits are not getting indexed</li><li class="list__item"><a name="d8432e459"></a>Some (all) revisions are stuck in "indexing in progress" state</li><li class="list__item"><a name="d8432e462"></a>Web UI is extremely slow</li></ul><a name="d8432e467"></a><h3>Solution</h3><a name="d8432e470"></a><a name="dynaProc2"></a><section class="procedure-steps"><ol class=".list _decimal"><li class="list__item">
            Stop Upsource: <code class="code" data-lang="Java">&lt;upsource_home&gt;\bin\upsource.bat stop</code>
        </li><li class="list__item">
            <a name="d8432e480"></a><p>Run the following command:</p>
            <a name="d8432e483"></a><p><code class="code" data-lang="Java">&lt;upsource_home&gt;\apps\upsource-frontend\bin\upsource-frontend.bat configure -J-Xmx2000m</code></p>
        </li><li class="list__item">
            Start Upsource: <code class="code" data-lang="Java">&lt;upsource_home&gt;\bin\upsource.bat start</code>
        </li></ol></section><a name="CodeIntelligence"></a><h2>6. Code intelligence is not available</h2><a name="d8432e498"></a><h3>Problem</h3><a name="d8432e501"></a><p>Code insight in Maven or Gradle based project is not working. The code analysis status indicator remains grey.</p><a name="d8432e504"></a><h3>Solution</h3><a name="d8432e508"></a><a name="dynaProc3"></a><section class="procedure-steps"><ol class=".list _decimal"><li class="list__item">
         Double-check that you have set <a name="d8432e512"></a><u id="d8432e512">Upsource properties</u> correctly when creating your <a name="d8432e515"></a><a href="creating-your-first-project.html"><span>Upsource project</span></a>, including a correct path to project model. Edit if necessary.
      </li><li class="list__item">
         If it doesn't help, contact <a name="d8432e521"></a><a href="/support/upsource/" data-external="true"><span>Upsource support</span></a> and describe your problem. Please include a mvn.out or gradle.out file (for Maven or Gradle project correspondingly) with your inquiry.
      </li></ol></section><a name="d8432e526"></a><p>To find mvn.out (or gradle.out) file:</p><aside class="note sideblock"><a name="d8432e530"></a><p>Upsource project ID usually differs from a project name.</p></aside><a name="d8432e533"></a><a name="dynaProc4"></a><section class="procedure-steps"><ol class=".list _decimal"><li class="list__item">
            <a name="d8432e537"></a><p>Download the zipped generated tree at the following URL: <code class="code" data-lang="Java">&lt;Your_Upsource_URL&gt;/~generatedTree/&lt;Project_ID&gt;:&lt;Revision_ID&gt;</code></p>
            <a name="d8432e542"></a><p>Where &lt;Revision_ID&gt; is an ID of the revision which lacks code intelligence.</p>
        </li><li class="list__item">
            <a name="d8432e548"></a><p>Find the mvn.out (or gradle.out) file in that tree.</p>
            <a name="d8432e551"></a><p>If no such file exists:</p>
        </li><li class="list__item">
            Navigate to /.idea/model.info
        </li><li class="list__item">
            Open model.info and copy the revision ID
        </li><li class="list__item">
            Download the generated tree again, replacing the revision ID in the URL with the one you've copied.
        </li><li class="list__item">
            Find the mvn.out (or gradle.out) file in that tree.
        </li></ol></section><a name="Certificate"></a><h2>7. Server SSL certificate is not found or expired</h2><a name="d8432e572"></a><h3>Problem</h3><a name="d8432e576"></a><p>Upsource is unable to connect to external Hub, which results in the following:</p><ul class="list _ul"><li class="list__item"><a name="d8432e581"></a>Upsource fails to start.</li><li class="list__item"><a name="d8432e584"></a>During an upgrade procedure, the message <a name="d8432e586"></a><i id="d8432e586">Server SSL certificate not trusted</i> is shown in the Upsource web UI.</li></ul><a name="d8432e591"></a><h3>Solution</h3><a name="d8432e594"></a><p>Follow this instruction to import the Hub certificate to Upsource and configure Upsource to accept it:</p><a name="d8432e597"></a><a name="dynaProc5"></a><section class="procedure-steps"><ol class=".list _decimal"><li class="list__item">
            <a name="d8432e601"></a><p>Download your host's certificate from the browser (the instruction is for Google Chrome):</p>
            <ul class="list _alpha-lower"><li class="list__item"><a name="d8432e606"></a>Open the Hub home page (for instance https://myhub.com)</li><li class="list__item"><a name="d8432e609"></a>Click the lock icon in the address bar to display information about the host.</li><li class="list__item"><a name="d8432e612"></a>Go to the <a name="d8432e614"></a><span class="control">Connections</span> tab and click <a name="d8432e617"></a><span class="control">Certificate information</span>. A dialog with information about the host's certificate will be displayed.</li><li class="list__item"><a name="d8432e621"></a>Go to the <a name="d8432e623"></a><span class="control">Details</span> tab and click the <a name="d8432e626"></a><span class="control">Export...</span> button at the bottom.</li><li class="list__item"><a name="d8432e630"></a>Save the certificate in the "Base64-encoded ASCII, single certificate" format (let's call it <a name="d8432e632"></a><i id="d8432e632">myhub.com.cer</i></li></ul>
        </li><li class="list__item">
            <a name="d8432e639"></a><p>Create a new keystore and import the certificate into it. Give it a new password (it must be at least 6 characters) and confirm that you trust the certificate. </p>
            <a name="d8432e642"></a><div class="code-block" data-lang="Console"><code class="code-block__wrapper">keytool -import -trustcacerts -file myhub.com.cer -alias myhub.com -keystore keystore.jks
Enter keystore password: &lt;keystore password&gt;
Re-enter new password: &lt;keystore password&gt;
...
&lt;Certificate info shown here&gt;
...
Trust this certificate? <span class="o">[</span>no<span class="o">]</span>: yes
Certificate was added to keystore</code></div>
        </li><li class="list__item">
            <a name="d8432e648"></a><p>Copy the file <a name="d8432e650"></a><i id="d8432e650">keystore.jks</i> to <a name="d8432e653"></a><i id="d8432e653">&lt;upsource-home&gt;/conf/internal/keystore.jks</i></p>
        </li><li class="list__item">
            <a name="d8432e659"></a><p>In <a name="d8432e661"></a><i id="d8432e661">&lt;upsource-home&gt;/conf/internal/bundle.properties</i> set:
            <a name="d8432e664"></a><div class="code-block" data-lang="Console"><code class="code-block__wrapper">additional-keystore-path<span class="o">=</span>&lt;upsource-home&gt;/conf/internal/keystore.jks
additional-keystore-password<span class="o">=</span>&lt;keystore-password&gt;</code></div>
            Where keystore-password is the password you provided in Step 2.
            </p>
        </li><li class="list__item">
            <a name="d8432e671"></a><p>Restart Upsource <code class="code" data-lang="Console">&lt;upsource-home&gt;\bin\upsource.bat restart</code></p>
        </li></ol></section><div class="last-modified">Last modified: 21 February 2017 </div></article><div id="disqus_thread"></div></div></section></main></div><script></script><script src="/help/app/app.js"></script></body></html>