<html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><meta charset="UTF-8"><title>Docker安装-帮助|帮助上游</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Docker_installation"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索上游帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>上载2019.1帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="default" data-group="primary" selected>默认（Windows / Linux）</option><option value="mac_os_x_10.5_" data-group="secondary">默认（Mac OS X 10.5+）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Docker_installation.xml" data-toc="Docker_installation">Docker安装</h1>    <p id="94be74c2">在继续安装之前，请确保您在主机上安装了最新版本的<a href="https://www.docker.com/" rel="noopener noreferrer" data-external="true" target="_blank">Docker</a> 。</p>    <div class="chapter"><h2 id="pull-image">1。拉上图片</h2>        <p id="01f2ee15">从Docker Hub存储库中获取最新的Upsource版本的图像：</p>        <code class="code">docker pull jetbrains/upsource:<version></code>哪里<version>是Upsource版本的完整版本号。</version></div>    <div class="chapter"><h2 id="prepare-folders">2。准备文件夹</h2>        <aside class="note " rel="prepare-folders" id="8f932c85" data-title="">            <p id="76cc5cef">您可以跳过此步骤，而对于演示或测试运行，可以跳过下一步中显示的卷映射命令，但是不建议在生产实例中这样做。如果没有映射，所有的Upsource数据将被路由到匿名容器卷，并且在移除容器时可能会意外丢失。此外，所有数据都将由Docker引擎存储在带有神秘名称的子文件夹中，从而几乎不可能定位和访问以进行将来的备份或升级。</p>        </aside>        <p id="a45f636b">创建空目录来存储上游数据，配置，日志和备份文件：</p>        <div class="code-block" data-lang="bash">mkdir -p -m 750 <path data="" to="" directory=""><path to="" logs="" directory=""><path to="" conf="" directory=""><path to="" backups="" directory="">
    </path></path></path></path></div>        <p id="c0311870">这些目录将作为卷传递到Upsource容器。</p>        <p id="6136fdd1">建议您相应地命名文件夹：</p>        <ul class="list _ul"><li class="list__item" id="e3c55832">                <i id="c286ad96">数据</i>            </li><li class="list__item" id="d5cfbf99">                <i id="3157e1ab">配置</i>            </li><li class="list__item" id="7568ac97">                <i id="3f9dabb0">日志</i>            </li><li class="list__item" id="8ef0bfe5">                <i id="93ec27bf">备份</i>            </li></ul>        <p id="00d62268">Upsource服务在Docker容器内以非root帐户13001：13001（group：id）运行。授予该帐户读/写权限，以访问您创建的目录（仅Linux才需要-对于macOS或Windows跳过此步骤）：</p>        <div class="code-block" data-lang="bash">chown -R 13001：13001 <path data="" to="" directory=""><path to="" logs="" directory=""><path to="" conf="" directory=""><path to="" backups="" directory="">
    </path></path></path></path></div>    </div>    <div class="chapter"><h2 id="run">3。运行上游</h2>        <p id="aa52c7ed">使用以下命令来运行带有Upsource服务器的容器，并映射Upsource数据卷和端口：</p>        <div class="code-block" data-lang="bash"><upsource-server-instance><path data="" to="" directory="">docker run -it</path></upsource-server-instance> --name <upsource-server-instance>\ -v <path data="" to="" directory="">：/ opt / upsource / data \ -v <path to="" conf="" directory="">：/ opt / upsource / conf \ -v <path to="" logs="" directory="">：/ opt / upsource / logs \ -v <path to="" backups="" directory="">：/ opt / upsource / backups \ -p <port on="" host="">：8080 \ jetbrains /上游： <version>
    </version></port></path></path></path></path></upsource-server-instance></div>        <p id="9ea09717">哪里：</p>        <p id="82c3cf63">            <code class="code"><upsource-server-instance></code>是您为容器指定的名称。</p>        <p id="b20d8339">            <code class="code">-v <path to data directory>:/opt/upsource/data</code>映射在容器中你在步骤2中的主机上创建的<i id="62307a14">数据</i>目录中的<i id="c28541d3">数据</i>目录。为其他目录设置了相同的映射： <i id="ddf0b9bd">conf，logs，backups</i> 。</p>        <p id="b986e334">            <code class="code">-p <port on host>:8080</code>此端口映射指示您的主机侦听<port on="" host="">并将所有流量传播到Docker容器内的端口8080。</port></p>        <p id="ae04a51e"><b id="a1c38f54">仅Windows</b> ：添加参数<code class="code">-u root</code>后<code class="code">-p <port on host>:8080</code> 。</p>        <p id="551c6430">            <code class="code">jetbrains/upsource:<version></code>使用Upsource构建指向正确的映像。</p>        <p id="52f51351">上游服务从Docker容器内的{0.0.0.0:8080}启动，并且端口8080映射到<port on="" host="">您指定的端口<port on="" host="">。这样，可以从<port on="" host="">对您的主机具有网络访问权限的任何计算机上访问服务<port on="" host="">。例如，如果主机的FQDN是host.mydomain.com，而主机名<port on="" host="">是7777，则该服务将在http://host.mydomain.com:7777上可用。</port></port></port></port></port></p>    </div>    <div class="chapter"><h2 id="configure">4。配置上游</h2>        <p id="c66a89c1">首次运行时，Upsource服务将从上述地址处的配置向导启动。打开浏览器，输入地址，然后按照<a href="configuration-wizard.html">首次配置后的配置中</a>所述的步骤完成安装。</p>        <p id="fecaff99">为了实现自动安装，您可以<b id="023403ad">跳过向导</b> ，但是您需要显式设置<i id="f57c294f">基本URL</i> ，即最终用户可以使用Upsource服务的URL。</p>        <p id="5ac134d4">要跳过配置向导，请<b id="0b009f02">在</b>运行Upsource（步骤3） <b id="0b009f02">之前</b>运行以下命令：</p>        <div class="code-block" data-lang="bash"><path data="" to="" directory="">docker</path>运行<path data="" to="" directory="">-it</path> -v <path data="" to="" directory="">：/ opt / upsource / data \ -v <path to="" conf="" directory="">：/ opt / upsource / conf \ -v <path to="" logs="" directory="">：/ opt / upsource / logs \ -v <path to="" backups="" directory="">：/ opt / upsource / backups \ -p <port on="" host="">：8080 \ jetbrains / upsource： <version>\配置\ -J-Ddisable.configuration.wizard.on.clean.install = true \ --base-url = http：//upsource.mydomain.com：XXXX</version></port></path></path></path></path></div>        <p id="5e8e905f"><b id="cca0f96d">仅Windows</b> ：添加参数<code class="code">-u root</code>后<code class="code">-p <port on host>:8080</code> 。</p>        <p id="0344c0fa">如果您需要<b id="c96522a0">更改</b>正在运行的Upsource实例<b id="c96522a0">的基本URL</b> ，请执行以下操作：</p>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="066e36c9">                <p id="0b641acd">停止上载： <code class="code">docker exec <containerId> stop</code>                </p>            </li><li class="list__item" id="48835cd2">                <p id="6da9bdb7">运行以下命令：</p>                <div class="code-block" data-lang="bash"><path data="" to="" directory="">docker</path>运行<path data="" to="" directory="">-it</path> -v <path data="" to="" directory="">：/ opt / upsource / data \ -v <path to="" conf="" directory="">：/ opt / upsource / conf \ -v <path to="" logs="" directory="">：/ opt / upsource / logs \ -v <path to="" backups="" directory="">：/ opt / upsource / backups \ -p <port on="" host="">：8080 \ jetbrains / upsource： <version>\ configure --base-url = http：//upsource.mydomain.com：XXXX</version></port></path></path></path></path></div>                <p id="96b62f61"><b id="3a7447af">仅Windows</b> ：添加参数<code class="code">-u root</code>后<code class="code">-p <port on host>:8080</code> 。</p>            </li><li class="list__item" id="8a24338e">                <p id="dcde937d">启动上游： <code class="code">docker start <containerId></code>                </p>            </li></ol></section>        <p id="bfeec9c6">运行配置您的安装的容器是一次性的，之后可以安全地将其卸下。 <code class="code">docker rm</code>命令。</p>        <p id="578b6a40">要查看所有停止的容器，请运行<code class="code">docker ps -a</code>        </p>    </div>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年8月9日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="zip-installation.html">ZIP安装</a> <a class="navigation-links__next" href="in-cloud-installation.html">云端安装</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>