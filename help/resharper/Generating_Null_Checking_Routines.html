<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Generate Null-Checking Routines - Help | ReSharper</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Generating_Null_Checking_Routines" data-article-props="&#xA;                {&#xA;                &#xA;            &#34;seeAlso&#34;:[&#xA;            &#xA;                {&#34;title&#34;: &#34;Concepts&#34;,&#xA;                 &#34;links&#34;: [&#xA;                &#xA;        {&#34;url&#34;:&#34;Code_Analysis__Code_Annotations.html&#34;,&#34;text&#34;:&#34;Use Annotations to Refine Code Inspection&#34;}&#xA;    ,&#xA;        {&#34;url&#34;:&#34;Code_Analysis__Value_Analysis.html&#34;,&#34;text&#34;:&#34;Value and Nullability Analysis&#34;}&#xA;    &#xA;                    ]}&#xA;            ]&#xA;        &#xA;                }&#xA;            " data-disqus-id="Generating_Null_Checking_Routines_10"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search ReSharper Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>ReSharper 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="secondary" value="rs">ReSharper 2.x/IntelliJ IDEA</option><option data-group="primary" value="vs">Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 data-toc="Generating_Null_Checking_Routines" id="Generating_Null_Checking_Routines.xml">Generate Null-Checking Routines</h1>    <p id="3d8bf9f7">        ReSharper provides plenty of different ways to generate code that checks        value-type parameters, expressions, and variables for null.        Depending on their purpose, null-checking routines can be divided into two categories:    </p>    <ul class="list" data-skip-index="skip"><li class="list__item"><a href="#exception_checks">Null checks for exceptions and assertions</a></li><li class="list__item"><a href="#skip">Null checks to skip objects with null values</a></li></ul>    <div class="chapter"><h2 id="exception_checks" data-toc="Generating_Null_Checking_Routines#exception_checks">Null checks for exceptions and assertions</h2>        <p id="1e5a607e">            There are situations when encountering an object that is a            <code class="code">null</code>            reference is critical in your program and should be either logged or signalled by throwing an exception.            A typical example here is throwing an            <code class="code">ArgumentNullException</code>            in a function that is not designed to accept            <code class="code">null</code>            objects.        </p>        <div class="chapter"><h3 id="generating-null-checks-for-exceptions-and-assertions">Generate null checks for exceptions and assertions</h3>            <p id="ad6f6363">                You can generate these kinds of null checks in the following ways:            </p>            <ul class="list _ul"><li class="list__item" id="cdd40a70"><p>                    Press                    <kbd data-rs="Alt+Enter" data-vs="Alt+Enter">Alt+Enter</kbd>                    on a parameter or expression and choose the corresponding                    <a href="Coding_Assistance__Context_Actions.html">context action</a>:                    <figure><img alt="ReSharper: Checking parameter for null" title="ReSharper: Checking parameter for null" src="/help/img/dotnet/2019.2/ca_check_for_null.png" id="0cc30dcf" width="304" height="161"></figure>                </p></li><li class="list__item" id="601463e9"><p>                    <a name="typing_assist_for_parameter"></a>                        If a parameter is marked with the                        <a href="Reference__Code_Annotation_Attributes.html#NotNullAttribute">[NotNull]</a>                        attribute, you can set the caret directly after the parameter name or parameter type and press                        <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">!</span></kbd>:                        <div class="code-block" data-lang="csharp">
                            
private void Foo([NotNull] object/*!*/ arg/*!*/)

                        </div>                                    </p></li><li class="list__item" id="8f8f40f4"><p>                    When                    <a href="Code_Generation__Type_Constructors.html">generating a constructor</a>                    (<kbd data-rs="Alt+Insert" data-vs="Alt+Insert">Alt+Insert</kbd>                    <span data-skip-index="skip" class="menupath">| Constructor</span>), select                    <span class="control">Check parameters for nul</span> in the dialog.                </p></li><li class="list__item" id="c406b70f"><p>                    To generate an assertion for                    <code class="code">null</code>                    for any nullable expression, ReSharper provides the                    <span class="control">Assert expression for null</span>                    action on                    <kbd data-rs="Alt+Enter" data-vs="Alt+Enter">Alt+Enter</kbd>.                    Depending on the                    <a href="Code_Analysis__Value_Analysis.html#modes">nullability analysis settings</a>,                    it appears as a                    <a href="Code_Analysis__Quick-Fixes.html">quick-fix</a>                    or a                    <a href="Coding_Assistance__Context_Actions.html">context action</a>.                    <figure><img alt="ReSharper: Asserting expression for null" title="ReSharper: Asserting expression for null" src="/help/img/dotnet/2019.2/quick_fix_assert_for_null.png" id="1a850fa1" width="363" height="161"></figure>                    This action becomes unavailable if ReSharper infers that the expression can never be                    <code class="code">null</code>.                </p></li></ul>            <p id="dbd60459">                If you                <a href="Code_Analysis__Annotations_in_Source_Code.html">use code annotations</a>                in your project, ReSharper will decorate parameters, which you check for null, with the                <a href="Reference__Code_Annotation_Attributes.html#NotNullAttribute">[NotNull]</a>                attribute.                This will let ReSharper notify you when null objects are passed to the decorated parameters.                <br>                You can disable adding                <code class="code">[NotNull]</code>                by clearing the                <span class="control">Automatically propagate annotations</span> checkbox on                <a name="the_options_page"></a>        the        <span data-skip-index="skip" class="menupath">Code Inspection | Code Annotations</span>        page of        <a name="product_settings"></a>        ReSharper options                (<kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Alt+R,,O</span></kbd>).            </p>        </div>        <div class="chapter"><h3 id="configuring-null-checks-for-exceptions-and-assertions">Configuring null checks for exceptions and assertions</h3>            <p id="e8fd7083">                This kind of null checks can be written in different ways, so they are configurable on                <a name="the_options_page"></a>        the        <span data-skip-index="skip" class="menupath">Code Editing | C# | Null checking</span>        page of        <a name="product_settings"></a>        ReSharper options                (<kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Alt+R,,O</span></kbd>), which is also accessible from the                <kbd data-rs="Alt+Enter" data-vs="Alt+Enter">Alt+Enter</kbd>                menu on the corresponding actions:            </p>            <figure><img alt="ReSharper: a shortcut for configuring null-check pattern" title="ReSharper: a shortcut for configuring null-check pattern" src="/help/img/dotnet/2019.2/configure_null_check_pattern.png" id="f9c504d0" width="442" height="164"></figure>            <p id="f8067975">                This options page lists all predefined null-checking patterns in the priority order                with higher priority patterns shown on the top.                When ReSharper generates a null check, it will take the highest-priority pattern                which semantically suits the context, taking into account the current C# version.                <a name="CsOrVbVersion"></a>                By default, ReSharper automatically detects C# version based on the associated compiler.                                                                                However, you can specify the target C# version explicitly                                    — right-click the project in the Solution Explorer, choose                    <a href="Configuring_Project_Specific_Properties.html">Edit project item properties</a>                    from the context menu and use the                    <span class="control">C# Language Level</span> selector..                        </p>            <p id="dd901bdc">                For example, with the default configuration the 'throw expression' pattern                <code class="code">$EXPR$ ?? new System.ArgumentNullException($NAME$);</code>                has higher priority than the 'classic' throw statement                <code class="code">if ($EXPR$ == null) throw new System.ArgumentNullException($NAME$);</code>.                But if expressions are not allowed in the current context,                ReSharper will skip the first and use the second pattern:            </p>            <div class="code-block" data-lang="csharp">
                
// Press Alt+Enter on 'arg' and choose 'Check parameter for null'
private void Foo(object arg)
{
    // as expression is not allowed here, the statement is generated:
    if (arg == null) throw new ArgumentNullException(nameof(arg));
}

// However, in the following case the expression is already there
private object myField;
private void Foo(object arg)
{
    myField = arg;
}

// so ReSharper will use the first pattern:
private object myField;
private void Foo(object arg)
{
    myField = arg ?? throw new ArgumentNullException(nameof(arg));
}

            </div>            <p id="c7f19134">                The same applies to generating assertions: ReSharper will use the first pattern that is marked with                <span class="control">Can use for assertion</span>.            </p>            <p id="ebc3b62a">                If you have any preferences for generating null checks, use the                <span class="control">Move up</span>                <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Alt+U</span></kbd>/                <span class="control">Move down</span>                <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Alt+D</span></kbd>                buttons on the options page to raise the priority of patterns that you prefer.            </p>        </div>        <div class="chapter"><h3 id="creating-custom-null-checks-for-exceptions-and-assertions">Creating custom null checks for exceptions and assertions</h3>            <p id="050f3647">                If your codebase provides dedicated helper methods for handling null checks,                you may want to create your own null-checking patterns by editing the two custom patterns                that are highlighted in bold on the options page —                <span class="control">Custom (statement)</span>                and                <span class="control">Custom (expression)</span>:            </p>            <aside data-type="tip" class="prompt" data-title="" rel="050f3647" id="1cce44dc">                <p id="6d75f6e4">                    Mark your custom assertion methods with the                    <a href="Reference__Code_Annotation_Attributes.html#AssertionMethodAttribute">[AssertionMethod]</a> attribute to refine                    <a href="Finding_Code_Issues.html">code inspection</a>.                </p>            </aside>            <figure><img alt="ReSharper: custom patterns for null checking" title="ReSharper: custom patterns for null checking" src="/help/img/dotnet/2019.2/null_checking_custom_patterns.png" id="9d37da6f" width="580" height="276"></figure>            <p id="eb0b2b65">                By default, these two patterns have the lowest priority,                meaning that they will never be used for generation.                So if you are going to use them, move them up to raise their priority.            </p>            <p id="9de665d8">                When a custom pattern is selected in the list,                you can edit it in the text field on the bottom of the page using the                <code class="code">$EXPR$</code>,                <code class="code">$NAME$</code>,                <code class="code">$MESSAGE$</code>                placeholders.                As long as the pattern is valid, ReSharper will display the corresponding icon below the text field.                <br>                You can also tick the                <span class="control">Can use for assertion</span> checkbox to make the pattern work with the                <span class="control">Assert expression for null</span> action.            </p>        </div>    </div>    <div class="chapter"><h2 id="skip" data-toc="Generating_Null_Checking_Routines#skip">Null checks to skip objects with null values</h2>        <p id="f626c253">            Another kind of null checking is used to avoid member access on objects that are            <code class="code">null</code>            references in cases where skipping such objects is acceptable for your program:        </p>        <div class="code-block" data-lang="csharp">
if (expr != null) { DoSomething(); }
// or, starting from C#6.0, with the conditional access operator:
(expr)?.DoSomething();
        </div>        <p id="45eb4a43">            To generate such checks, ReSharper provides            <span class="control">Check expression for null</span> and            <span class="control">Use conditional access</span>            actions on            <kbd data-rs="Alt+Enter" data-vs="Alt+Enter">Alt+Enter</kbd>.            Depending on the            <a href="Code_Analysis__Value_Analysis.html#modes">nullability analysis settings</a>,            these actions appear as            <a href="Code_Analysis__Quick-Fixes.html">quick-fixes</a>            or            <a href="Coding_Assistance__Context_Actions.html">context actions</a>.        </p>        <figure><img alt="ReSharper: Check expression for null quick-fix" title="ReSharper: Check expression for null quick-fix" src="/help/img/dotnet/2019.2/quick_fix_check_for_null.png" id="b30608e0" width="372" height="165"></figure>        <p id="eb2e6598">            However, these actions are unavailable if ReSharper infers that the expression can never return            <code class="code">null</code>, for example, if the corresponding item is marked with the            <a href="Reference__Code_Annotation_Attributes.html#NotNullAttribute">[NotNull]</a>            attribute or if the expression is already checked for null.        </p>    </div>    <a name="supported_in_csharp"></a>            <p id="b43e85e4">                This feature is                <a href="Introduction__Feature_Map.html">supported</a>                in the following languages and technologies:            </p>            <div class="table-wrapper"><table class=" wide" width="100%" id="feb522ad"><thead><tr id="ef867f08" class="ijRowHead"><th id="80b9f877">                                <a href="ReSharper_by_Language__CSharp.html"><img alt="Language: C#" title="Language: C#" src="/help/img/dotnet/2019.2/ThemedIcon.Csharp.Print.[Gray].png" id="5e8bc22b" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="de4c12f0">                                <a href="ReSharper_by_Language__Visual_Basic.html"><img alt="Language: VB.NET" title="Language: VB.NET" src="/help/img/dotnet/2019.2/ThemedIcon.Vbasic.Print.[Gray].png" id="4eacf504" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="a7b050b2">                                <a href="ReSharper_by_Language_CPP.html"><img alt="Language: C++" title="Language: C++" src="/help/img/dotnet/2019.2/ThemedIcon.CppSource.Print.[SymbolsVs11Gray].png" id="986ced08" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="42c69099">                                <a href="ReSharper_by_Language__HTML.html"><img alt="Language: HTML" title="Language: HTML" src="/help/img/dotnet/2019.2/ThemedIcon.Html.Print.[Gray].png" id="52afd2eb" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="189b7528">                                <a href="Web_Development__Index.html"><img alt="Language: ASP.NET" title="Language: ASP.NET" src="/help/img/dotnet/2019.2/ThemedIcon.AspNet.Print.[Gray].png" id="6a593a63" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="4958c724">                                <a href="Web_Development__ASP.NET_MVC.html"><img alt="Language: Razor" title="Language: Razor" src="/help/img/dotnet/2019.2/ThemedIcon.Razor.Print.[Gray].png" id="8f971d60" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="e80b3b2a">                                <a href="ReSharper_by_Language__JavaScript.html"><img alt="Language: JavaScript" title="Language: JavaScript" src="/help/img/dotnet/2019.2/ThemedIcon.Js.Print.[Gray].png" id="82a88d7f" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="03eab92a">                                <a href="ReSharper_by_Language__TypeScript.html"><img alt="Language: TypeScript" title="Language: TypeScript" src="/help/img/dotnet/2019.2/ThemedIcon.TsOptionPage.Print.[Gray].png" id="de154cca" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="83a7b97b">                                <a href="ReSharper_by_Language__CSS.html"><img alt="Language: CSS" title="Language: CSS" src="/help/img/dotnet/2019.2/ThemedIcon.Css.Print.[Gray].png" id="08a1f2f1" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="6cd7a2ec">                                <a href="ReSharper_by_Language__XML.html"><img alt="Language: XML" title="Language: XML" src="/help/img/dotnet/2019.2/ThemedIcon.XmlFile.Print.[Gray].png" id="2479cfff" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="ae0a208c">                                <a href="Languages_XAML.html"><img alt="Language: XAML" title="Language: XAML" src="/help/img/dotnet/2019.2/ThemedIcon.Xaml.Print.[Gray].png" id="908c5a77" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="8cb63595">                                <a href="Resources__Index.html"><img alt="Language: Resx" title="Language: Resx" src="/help/img/dotnet/2019.2/ThemedIcon.Localization.Print.[Gray].png" id="7048fc9e" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="e7d031b0">                                <a href="ReSharper_by_Language__MSBuild.html"><img alt="Language: Build Scripts" title="Language: Build Scripts" src="/help/img/dotnet/2019.2/ThemedIcon.BuildScripts.Print.[Gray].png" id="c619ea7a" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="f39ee2c3">                                <a href="ReSharper_by_Language_Protobuf.html"><img alt="Language: Protobuf" title="Language: Protobuf" src="/help/img/dotnet/2019.2/ThemedIcon.ProtobufOptionPage.Print.[Gray].png" id="c16c2c75" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="8bcb2926">                                <a href="ReSharper_by_Language_JSON.html"><img alt="Language: JSON" title="Language: JSON" src="/help/img/dotnet/2019.2/ThemedIcon.Json.Print.[Gray].png" id="c43a896a" width="25" height="25" class="inline-icon-25"></a>                            </th></tr></thead><tbody><tr id="e72e6b4a" class="ijRowOdd"><td id="72c6b1d0">            <img alt="Feature is available" title="Feature is available" src="/help/img/dotnet/2019.2/check.svg" id="ae752e16" width="17" height="12" class="inline-icon-17">                    </td><td id="0b760b1b">                        <img alt="Feature is not available" title="Feature is not available" src="/help/img/dotnet/2019.2/cross.svg" id="b6f9b817" width="12" height="12" class="inline-icon-12">        </td><td id="b2285b94">                        <img alt="Feature is not available" title="Feature is not available" src="/help/img/dotnet/2019.2/cross.svg" id="12e19a09" width="12" height="12" class="inline-icon-12">        </td><td id="31c2b071">                        <img alt="Feature is not available" title="Feature is not available" src="/help/img/dotnet/2019.2/cross.svg" id="1560108b" width="12" height="12" class="inline-icon-12">        </td><td id="d9dc5155">                        <img alt="Feature is not available" title="Feature is not available" src="/help/img/dotnet/2019.2/cross.svg" id="ccda2b95" width="12" height="12" class="inline-icon-12">        </td><td id="08ec6917">                        <img alt="Feature is not available" title="Feature is not available" src="/help/img/dotnet/2019.2/cross.svg" id="3908c102" width="12" height="12" class="inline-icon-12">        </td><td id="67c1d1fa">                        <img alt="Feature is not available" title="Feature is not available" src="/help/img/dotnet/2019.2/cross.svg" id="e9738fce" width="12" height="12" class="inline-icon-12">        </td><td id="91d0835b">                        <img alt="Feature is not available" title="Feature is not available" src="/help/img/dotnet/2019.2/cross.svg" id="f408012d" width="12" height="12" class="inline-icon-12">        </td><td id="1ed46d11">                        <img alt="Feature is not available" title="Feature is not available" src="/help/img/dotnet/2019.2/cross.svg" id="5a0c4fc5" width="12" height="12" class="inline-icon-12">        </td><td id="83c3dfc4">                        <img alt="Feature is not available" title="Feature is not available" src="/help/img/dotnet/2019.2/cross.svg" id="bef8c629" width="12" height="12" class="inline-icon-12">        </td><td id="29100ce4">                        <img alt="Feature is not available" title="Feature is not available" src="/help/img/dotnet/2019.2/cross.svg" id="30ea19a6" width="12" height="12" class="inline-icon-12">        </td><td id="1707c2c9">                        <img alt="Feature is not available" title="Feature is not available" src="/help/img/dotnet/2019.2/cross.svg" id="778b9477" width="12" height="12" class="inline-icon-12">        </td><td id="e4b6b656">                        <img alt="Feature is not available" title="Feature is not available" src="/help/img/dotnet/2019.2/cross.svg" id="7ba99160" width="12" height="12" class="inline-icon-12">        </td><td id="ec9c3fad">                        <img alt="Feature is not available" title="Feature is not available" src="/help/img/dotnet/2019.2/cross.svg" id="1f558233" width="12" height="12" class="inline-icon-12">        </td><td id="57062d4c">                        <img alt="Feature is not available" title="Feature is not available" src="/help/img/dotnet/2019.2/cross.svg" id="9b16c16f" width="12" height="12" class="inline-icon-12">        </td></tr></tbody></table></div>            <div class="last-modified" data-skip-index="skip">Last modified: 18 November 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Code_Generation__Generating_Code_from_Usage.html">Generate Code from Usage</a><a class="navigation-links__next" href="Generating_Code_with_Completion.html">Generate Code with Code Completion</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>