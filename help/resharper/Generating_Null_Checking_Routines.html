<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>生成Null-checking例程-帮助|帮助锐化器</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Generating_Null_Checking_Routines" data-article-props="
                {
                
            " seeals=":[=" titl=":=" concept=",=" link=":=" ur=":" code_analysis__code_annotations.htm="," tex=":" use="" annotations="" to="" refine="" inspectio="}=" code_analysis__value_analysis.htm="," value="" and="" nullability="" analysi="}=" ="" data-disqus-id="Generating_Null_Checking_Routines_10"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索ReSharper帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>ReSharper 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="rs" data-group="secondary">ReSharper 2.x / IntelliJ IDEA</option><option value="vs" data-group="primary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Generating_Null_Checking_Routines.xml" data-toc="Generating_Null_Checking_Routines">生成空检查例程</h1>    <p id="3d8bf9f7">ReSharper提供了许多不同的方式来生成用于检查值类型参数，表达式和变量是否为空的代码。根据其用途，空检查例程可以分为两类：</p>    <ul class="list" data-skip-index="skip"><li class="list__item"><a href="#exception_checks">空检查异常和断言</a></li><li class="list__item"><a href="#skip">空检查以跳过具有空值的对象</a></li></ul>    <div class="chapter"><h2 id="exception_checks" data-toc="Generating_Null_Checking_Routines#exception_checks">空检查异常和断言</h2>        <p id="1e5a607e">在某些情况下，遇到物体是<code class="code">null</code>引用在您的程序中很关键，应该通过引发异常来记录或发出信号。这里的一个典型例子是抛出一个<code class="code">ArgumentNullException</code>在不旨在接受的功能中<code class="code">null</code>对象。</p>        <div class="chapter"><h3 id="generating-null-checks-for-exceptions-and-assertions">生成空检查异常和断言</h3>            <p id="ad6f6363">您可以通过以下方式生成这些空检查：</p>            <ul class="list _ul"><li class="list__item" id="cdd40a70"><p>按<kbd data-rs="Alt+Enter" data-vs="Alt+Enter">Alt+Enter</kbd>在参数或表达式上，然后选择相应的<a href="Coding_Assistance__Context_Actions.html">上下文操作</a> ：</p><figure><img alt="ReSharper：检查参数是否为空" title="ReSharper：检查参数是否为空" src="/help/img/dotnet/2019.2/ca_check_for_null.png" id="0cc30dcf" width="304" height="161"></figure>                <p></p></li><li class="list__item" id="601463e9"><p>                    <a name="typing_assist_for_parameter"></a>如果参数标记有<a href="Reference__Code_Annotation_Attributes.html#NotNullAttribute">[NotNull]</a>属性，则可以在参数名称或参数类型之后直接设置插入符号，然后按<kbd class="keystroke" data-bypass="true"><span class="keystroke__value">!</span></kbd> ：</p><div class="code-block" data-lang="csharp">私有void Foo（[NotNull] object / *！* / arg / *！* /）</div>                                    <p></p></li><li class="list__item" id="8f8f40f4"><p><a href="Code_Generation__Type_Constructors.html">生成构造函数时</a> （ <kbd data-rs="Alt+Insert" data-vs="Alt+Insert">Alt+Insert</kbd> <span class="menupath" data-skip-index="skip">|构造函数</span> ），在对话框中选择<span class="control">检查参数是否为空</span> 。</p></li><li class="list__item" id="c406b70f"><p>为产生一个断言<code class="code">null</code>对于任何可为空的表达式，ReSharper提供<span class="control">Assert表达式以</span>对<kbd data-rs="Alt+Enter" data-vs="Alt+Enter">Alt+Enter</kbd> 。根据可<a href="Code_Analysis__Value_Analysis.html#modes">空性分析设置</a> ，它显示为<a href="Code_Analysis__Quick-Fixes.html">快速修复</a>或<a href="Coding_Assistance__Context_Actions.html">上下文操作</a> 。</p><figure><img alt="ReSharper：为空声明表达式" title="ReSharper：为空声明表达式" src="/help/img/dotnet/2019.2/quick_fix_assert_for_null.png" id="1a850fa1" width="363" height="161"></figure>如果ReSharper推断该表达式永远不会是，则此操作将不可用。 <code class="code">null</code> 。<p></p></li></ul>            <p id="dbd60459">如果在项目中<a href="Code_Analysis__Annotations_in_Source_Code.html">使用代码注释</a> ，则ReSharper将使用<a href="Reference__Code_Annotation_Attributes.html#NotNullAttribute">[NotNull]</a>属性来修饰您检查为空的参数。当将空对象传递给修饰的参数时，这将使ReSharper通知您。<br>您可以禁用添加<code class="code">[NotNull]</code>清除“ <span class="control">自动传播注释”</span>复选框<a name="the_options_page"></a> <span class="menupath" data-skip-index="skip">代码检查|的代码注释</span>页面<a name="product_settings"></a> ReSharper选项（ <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+R,,O</span></kbd> ）。</p>        </div>        <div class="chapter"><h3 id="configuring-null-checks-for-exceptions-and-assertions">为异常和断言配置空检查</h3>            <p id="e8fd7083">这种空检查可以用不同的方式编写，因此可以在以下位置进行配置<a name="the_options_page"></a> <span class="menupath" data-skip-index="skip">代码编辑| C＃|空检查</span>页<a name="product_settings"></a> ReSharper选项（ <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+R,,O</span></kbd> ），也可以从<kbd data-rs="Alt+Enter" data-vs="Alt+Enter">Alt+Enter</kbd>菜单上相应的动作：</p>            <figure><img alt="ReSharper：配置空检查模式的快捷方式" title="ReSharper：配置空检查模式的快捷方式" src="/help/img/dotnet/2019.2/configure_null_check_pattern.png" id="f9c504d0" width="442" height="164"></figure>            <p id="f8067975">此选项页面按优先级顺序列出所有预定义的空检查模式，其中较高的优先级模式显示在顶部。当ReSharper生成一个空检查时，它将考虑当前C＃版本，采用语义上适合上下文的最高优先级模式。 <a name="CsOrVbVersion"></a>                默认情况下，ReSharper根据关联的编译器自动检测C＃版本。但是，您可以显式指定目标C＃版本-在解决方案资源管理器中右键单击项目，从上下文菜单中选择“ <a href="Configuring_Project_Specific_Properties.html">编辑项目项属性”</a> ，然后使用<span class="control">C＃语言级别</span>选择器。</p>            <p id="dd901bdc">例如，使用默认配置的“ throw expression”模式<code class="code">$EXPR$ ?? new System.ArgumentNullException($NAME$);</code>具有比“经典”引发语句更高的优先级<code class="code">if ($EXPR$ == null) throw new System.ArgumentNullException($NAME$);</code> 。但是，如果当前上下文中不允许使用表达式，则ReSharper将跳过第一个而使用第二个模式：</p>            <div class="code-block" data-lang="csharp">//在'arg'上按Alt + Enter并选择'检查参数是否为空'private void Foo（object arg）{//由于此处不允许使用表达式，因此将生成该语句：如果（arg == null）抛出新的ArgumentNullException （nameof（arg））; } //但是，在以下情况下，表达式已经存在私有对象myField;私有无效Foo（object arg）{myField = arg; } //因此，ReSharper将使用第一种模式：private object myField;私人无效Foo（object arg）{myField = arg ??抛出新的ArgumentNullException（nameof（arg））; }</div>            <p id="c7f19134">这同样适用于生成断言：ReSharper将使用标记为<span class="control">可以用于断言</span>的第一个模式。</p>            <p id="ebc3b62a">如果您对生成空检查有任何偏好，请使用上<span class="control">移</span> <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+U</span></kbd> / <span class="control">下移</span> <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+D</span></kbd>选项页面上的按钮可以提高您喜欢的模式的优先级。</p>        </div>        <div class="chapter"><h3 id="creating-custom-null-checks-for-exceptions-and-assertions">为异常和断言创建自定义的空检查</h3>            <p id="050f3647">如果您的代码库提供了专用的帮助方法来处理空检查，那么您可能希望通过编辑选项页面上以粗体突出显示的两个自定义模式来创建自己的空检查模式<span class="control">-Custom（语句）</span>和<span class="control">Custom（表达式）</span> ：</p>            <aside class="prompt" rel="050f3647" id="1cce44dc" data-type="tip" data-title="">                <p id="6d75f6e4">使用<a href="Reference__Code_Annotation_Attributes.html#AssertionMethodAttribute">[AssertionMethod]</a>属性标记您的自定义断言方法，以优化<a href="Finding_Code_Issues.html">代码检查</a> 。</p>            </aside>            <figure><img alt="ReSharper：用于空检查的自定义模式" title="ReSharper：用于空检查的自定义模式" src="/help/img/dotnet/2019.2/null_checking_custom_patterns.png" id="9d37da6f" width="580" height="276"></figure>            <p id="eb0b2b65">默认情况下，这两种模式的优先级最低，这意味着它们将永远不会用于生成。因此，如果要使用它们，请向上移动它们以提高其优先级。</p>            <p id="9de665d8">在列表中选择自定义样式后，您可以使用以下命令在页面底部的文本字段中对其进行编辑<code class="code">$EXPR$</code> ， <code class="code">$NAME$</code> ， <code class="code">$MESSAGE$</code>占位符。只要模式有效，ReSharper就会在文本字段下方显示相应的图标。<br>您也可以勾选<span class="control">可以用于断言</span>复选框，以使模式与<span class="control">用于空</span>操作的<span class="control">Assert表达式一起使用</span> 。</p>        </div>    </div>    <div class="chapter"><h2 id="skip" data-toc="Generating_Null_Checking_Routines#skip">空检查以跳过具有空值的对象</h2>        <p id="f626c253">另一种null检查用于避免对以下对象的成员访问： <code class="code">null</code>在程序中可以接受此类对象的引用：</p>        <div class="code-block" data-lang="csharp">如果（expr！= null）{DoSomething（）; } //，或者从C＃6.0开始，使用条件访问运算符（expr）?。做点什么（）;</div>        <p id="45eb4a43">为了生成这样的检查，ReSharper提供了<span class="control">Check表达式为null</span>和在以下位置<span class="control">使用条件访问</span>操作<kbd data-rs="Alt+Enter" data-vs="Alt+Enter">Alt+Enter</kbd> 。根据可<a href="Code_Analysis__Value_Analysis.html#modes">空性分析设置</a> ，这些操作将显示为<a href="Code_Analysis__Quick-Fixes.html">快速修复</a>或<a href="Coding_Assistance__Context_Actions.html">上下文操作</a> 。</p>        <figure><img alt="ReSharper：检查表达式是否为空快速修复" title="ReSharper：检查表达式是否为空快速修复" src="/help/img/dotnet/2019.2/quick_fix_check_for_null.png" id="b30608e0" width="372" height="165"></figure>        <p id="eb2e6598">但是，如果ReSharper推断表达式永远不会返回，则这些操作将不可用。 <code class="code">null</code> ，例如，如果相应的项目标记有<a href="Reference__Code_Annotation_Attributes.html#NotNullAttribute">[NotNull]</a>属性，或者该表达式已被检查为null。</p>    </div>    <a name="supported_in_csharp"></a>            <p id="b43e85e4">以下语言和技术<a href="Introduction__Feature_Map.html">支持</a>此功能：</p>            <div class="table-wrapper"><table class=" wide" width="100%" id="feb522ad"><thead><tr id="ef867f08" class="ijRowHead"><th id="80b9f877">                                <a href="ReSharper_by_Language__CSharp.html"><img alt="语言：C＃" title="语言：C＃" src="/help/img/dotnet/2019.2/ThemedIcon.Csharp.Print.[Gray].png" id="5e8bc22b" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="de4c12f0">                                <a href="ReSharper_by_Language__Visual_Basic.html"><img alt="语言：VB.NET" title="语言：VB.NET" src="/help/img/dotnet/2019.2/ThemedIcon.Vbasic.Print.[Gray].png" id="4eacf504" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="a7b050b2">                                <a href="ReSharper_by_Language_CPP.html"><img alt="语言：C ++" title="语言：C ++" src="/help/img/dotnet/2019.2/ThemedIcon.CppSource.Print.[SymbolsVs11Gray].png" id="986ced08" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="42c69099">                                <a href="ReSharper_by_Language__HTML.html"><img alt="语言：HTML" title="语言：HTML" src="/help/img/dotnet/2019.2/ThemedIcon.Html.Print.[Gray].png" id="52afd2eb" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="189b7528">                                <a href="Web_Development__Index.html"><img alt="语言：ASP.NET" title="语言：ASP.NET" src="/help/img/dotnet/2019.2/ThemedIcon.AspNet.Print.[Gray].png" id="6a593a63" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="4958c724">                                <a href="Web_Development__ASP.NET_MVC.html"><img alt="语言：剃刀" title="语言：剃刀" src="/help/img/dotnet/2019.2/ThemedIcon.Razor.Print.[Gray].png" id="8f971d60" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="e80b3b2a">                                <a href="ReSharper_by_Language__JavaScript.html"><img alt="语言：JavaScript" title="语言：JavaScript" src="/help/img/dotnet/2019.2/ThemedIcon.Js.Print.[Gray].png" id="82a88d7f" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="03eab92a">                                <a href="ReSharper_by_Language__TypeScript.html"><img alt="语言：TypeScript" title="语言：TypeScript" src="/help/img/dotnet/2019.2/ThemedIcon.TsOptionPage.Print.[Gray].png" id="de154cca" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="83a7b97b">                                <a href="ReSharper_by_Language__CSS.html"><img alt="语言：CSS" title="语言：CSS" src="/help/img/dotnet/2019.2/ThemedIcon.Css.Print.[Gray].png" id="08a1f2f1" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="6cd7a2ec">                                <a href="ReSharper_by_Language__XML.html"><img alt="语言：XML" title="语言：XML" src="/help/img/dotnet/2019.2/ThemedIcon.XmlFile.Print.[Gray].png" id="2479cfff" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="ae0a208c">                                <a href="Languages_XAML.html"><img alt="语言：XAML" title="语言：XAML" src="/help/img/dotnet/2019.2/ThemedIcon.Xaml.Print.[Gray].png" id="908c5a77" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="8cb63595">                                <a href="Resources__Index.html"><img alt="语言：Resx" title="语言：Resx" src="/help/img/dotnet/2019.2/ThemedIcon.Localization.Print.[Gray].png" id="7048fc9e" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="e7d031b0">                                <a href="ReSharper_by_Language__MSBuild.html"><img alt="语言：构建脚本" title="语言：构建脚本" src="/help/img/dotnet/2019.2/ThemedIcon.BuildScripts.Print.[Gray].png" id="c619ea7a" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="f39ee2c3">                                <a href="ReSharper_by_Language_Protobuf.html"><img alt="语言：Protobuf" title="语言：Protobuf" src="/help/img/dotnet/2019.2/ThemedIcon.ProtobufOptionPage.Print.[Gray].png" id="c16c2c75" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="8bcb2926">                                <a href="ReSharper_by_Language_JSON.html"><img alt="语言：JSON" title="语言：JSON" src="/help/img/dotnet/2019.2/ThemedIcon.Json.Print.[Gray].png" id="c43a896a" width="25" height="25" class="inline-icon-25"></a>                            </th></tr></thead><tbody><tr id="e72e6b4a" class="ijRowOdd"><td id="72c6b1d0">            <img alt="功能可用" title="功能可用" src="/help/img/dotnet/2019.2/check.svg" id="ae752e16" width="17" height="12" class="inline-icon-17">                    </td><td id="0b760b1b">                        <img alt="功能不可用" title="功能不可用" src="/help/img/dotnet/2019.2/cross.svg" id="b6f9b817" width="12" height="12" class="inline-icon-12">        </td><td id="b2285b94">                        <img alt="功能不可用" title="功能不可用" src="/help/img/dotnet/2019.2/cross.svg" id="12e19a09" width="12" height="12" class="inline-icon-12">        </td><td id="31c2b071">                        <img alt="功能不可用" title="功能不可用" src="/help/img/dotnet/2019.2/cross.svg" id="1560108b" width="12" height="12" class="inline-icon-12">        </td><td id="d9dc5155">                        <img alt="功能不可用" title="功能不可用" src="/help/img/dotnet/2019.2/cross.svg" id="ccda2b95" width="12" height="12" class="inline-icon-12">        </td><td id="08ec6917">                        <img alt="功能不可用" title="功能不可用" src="/help/img/dotnet/2019.2/cross.svg" id="3908c102" width="12" height="12" class="inline-icon-12">        </td><td id="67c1d1fa">                        <img alt="功能不可用" title="功能不可用" src="/help/img/dotnet/2019.2/cross.svg" id="e9738fce" width="12" height="12" class="inline-icon-12">        </td><td id="91d0835b">                        <img alt="功能不可用" title="功能不可用" src="/help/img/dotnet/2019.2/cross.svg" id="f408012d" width="12" height="12" class="inline-icon-12">        </td><td id="1ed46d11">                        <img alt="功能不可用" title="功能不可用" src="/help/img/dotnet/2019.2/cross.svg" id="5a0c4fc5" width="12" height="12" class="inline-icon-12">        </td><td id="83c3dfc4">                        <img alt="功能不可用" title="功能不可用" src="/help/img/dotnet/2019.2/cross.svg" id="bef8c629" width="12" height="12" class="inline-icon-12">        </td><td id="29100ce4">                        <img alt="功能不可用" title="功能不可用" src="/help/img/dotnet/2019.2/cross.svg" id="30ea19a6" width="12" height="12" class="inline-icon-12">        </td><td id="1707c2c9">                        <img alt="功能不可用" title="功能不可用" src="/help/img/dotnet/2019.2/cross.svg" id="778b9477" width="12" height="12" class="inline-icon-12">        </td><td id="e4b6b656">                        <img alt="功能不可用" title="功能不可用" src="/help/img/dotnet/2019.2/cross.svg" id="7ba99160" width="12" height="12" class="inline-icon-12">        </td><td id="ec9c3fad">                        <img alt="功能不可用" title="功能不可用" src="/help/img/dotnet/2019.2/cross.svg" id="1f558233" width="12" height="12" class="inline-icon-12">        </td><td id="57062d4c">                        <img alt="功能不可用" title="功能不可用" src="/help/img/dotnet/2019.2/cross.svg" id="9b16c16f" width="12" height="12" class="inline-icon-12">        </td></tr></tbody></table></div>            <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月18日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Code_Generation__Generating_Code_from_Usage.html">从使用情况</a> <a class="navigation-links__next" href="Generating_Code_with_Completion.html">生成代码通过代码完成生成代码</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>