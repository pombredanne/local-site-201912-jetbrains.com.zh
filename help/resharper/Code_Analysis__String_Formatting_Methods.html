<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>字符串文字的代码分析和帮助程序-帮助锐化器</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Code_Analysis__String_Formatting_Methods" data-article-props="
                {
                
            " seeals=":[=" titl=":=" concept=",=" link=",=" ur=":" code_analysis__code_inspections.htm="," tex=":" code="" inspection="}=" code_analysis__code_annotations.htm="," use="" annotations="" to="" refine="" inspectio="}=" code_analysis__value_analysis.htm="," value="" and="" nullability="" analysi="}=" external="" http:="" ="" resharper.blogspot.com="" 2007="" 04="" format-strings-episode-one.htm="," resharper="" horizons:="" format="" strings="" -="" episode="" on="}=" ="text"="resharper=" }="" ]}="" ]="" code_analysis__string_formatting_methods_1=""><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索ReSharper帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>ReSharper 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="rs" data-group="secondary">ReSharper 2.x / IntelliJ IDEA</option><option value="vs" data-group="primary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Code_Analysis__String_Formatting_Methods.xml" data-toc="Code_Analysis__String_Formatting_Methods">字符串文字的代码分析和帮助器</h1>    <p id="36b98aa0">ReSharper为代码中的字符串文字提供了许多功能。您可以从ReSharper的代码分析和许多帮助程序中受益：</p>        <ul class="list" data-skip-index="skip"><li class="list__item"><a href="#plain-strings">纯弦</a></li><li class="list__item"><a href="#formatting">字符串格式化方法</a></li><li class="list__item"><a href="#custom">自定义字符串格式设置方法</a></li><li class="list__item"><a href="#interpolated-strings">插值字符串</a></li></ul>    <div class="chapter"><h2 id="plain-strings" data-toc="Code_Analysis__String_Formatting_Methods#plain-strings">纯弦</h2>        <p id="7aa8890c">当您在代码中使用纯字符串时，以下是ReSharper如何为您提供帮助的方法：</p>        <ul class="list _ul"><li class="list__item" id="55f5d8f7">                <a name="escape"></a>            <p id="01195a3b">默认情况下，ReSharper突出显示所有非普通字符串中正确和不正确的转义序列：</p>            <img alt="突出显示字符串中的转义序列" title="突出显示字符串中的转义序列" src="/help/img/dotnet/2019.2/regexp_string.png" id="11df4410" width="252" height="30" class="inline-icon-252">                                </li><li class="list__item" id="64797597"><p>您可以将常规字符串转换为逐字字符串，然后按<kbd data-rs="Alt+Enter" data-vs="Alt+Enter">Alt+Enter</kbd>当您的插入符在字符串中并选择相应的<a href="Coding_Assistance__Context_Actions.html">上下文操作时</a> 。这也适用于内插字符串。</p></li><li class="list__item" id="7b94a764"><p>您只需按以下即可<a href="Splitting_Lines_with_String_Literals.html">拆分字符串文字</a> <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Enter</span></kbd> 。</p></li><li class="list__item" id="97f7a7e2"><p>如果字符串包含正则表达式，ReSharper可以突出显示其语法和错误，并帮助您在表达式内部完成代码。有关更多信息，请参见<a href="Regular_Expressions_Assistance.html">正则表达式帮助</a> 。<br>同样，您可以使ReSharper分析字符串文字中的HTML。为了使ReSharper知道字符串文字中的特定语言，可以使用相应的<a href="Coding_Assistance__Context_Actions.html">上下文操作</a>或添加注释。 <code class="code">/*language=regexp|jsregexp|html*/</code>就在字符串文字之前。</p></li><li class="list__item" id="6da2a6d6"><p>您可以在字符串中选择一些子字符串，然后自动<a href="Refactorings__Introduce_Variable_for_Substring.html">为该子字符串引入一个变量</a> 。</p></li><li class="list__item" id="5253c713"><p>如果您的项目可本地化，则可以自动<a href="Resources__Refactorings.html#move-to-resource">将字符串移动到resource</a> 。</p></li></ul>    </div>    <div class="chapter"><h2 id="formatting" data-toc="Code_Analysis__String_Formatting_Methods#formatting">字符串格式化方法</h2>        <p id="e75557ae">ReSharper分析格式字符串和所有.NET字符串格式化方法的参数，例如<code class="code">String.Format</code> ， <code class="code">Text.StringBuilder.AppendFormat</code> ， 要么<code class="code">Console.WriteLine</code> 。</p>        <p id="60ad64ee">在使用字符串格式化方法时，ReSharper突出显示格式占位符，并且当您的插入符位于任意一个时，还使用相应的参数同步突出显示占位符：</p>        <figure><img alt="在字符串格式化方法中突出显示参数和占位符" title="在字符串格式化方法中突出显示参数和占位符" src="/help/img/dotnet/2019.2/string_formatting_highlight.png" id="c9348f17" width="509" height="73"></figure>        <p id="60c77eb8">如果参数和格式占位符不匹配（导致<code class="code">FormatException</code>在运行时，如果缺少参数，ReSharper会为缺少或冗余的参数生成警告：</p>        <figure><img alt="警告字符串格式化方法中缺少参数" title="警告字符串格式化方法中缺少参数" src="/help/img/dotnet/2019.2/string_formatting_warning.png" id="ad369b5c" width="639" height="95"></figure>        <p id="9ce7f1b6">您可以通过按以下按钮轻松解决此问题<kbd data-rs="Alt+Enter" data-vs="Alt+Enter">Alt+Enter</kbd>超过警告。ReSharper将建议自动添加缺少的参数或删除格式不匹配的占位符。</p>        <p id="1167331e">ReSharper还可以帮助您检测和删除其他字符串格式化方法中对字符串格式化方法的多余调用。例如：</p>        <figure><img alt="冗余调用字符串格式化方法" title="冗余调用字符串格式化方法" src="/help/img/dotnet/2019.2/string_formatting_redundant.png" id="c02ff3c0" width="641" height="185"></figure>        <p id="70aee5ca">要快速转换字符串文字和变量的串联，请按<kbd data-rs="Alt+Enter" data-vs="Alt+Enter">Alt+Enter</kbd>连接中的任何位置，并使用<span class="control">To String。格式化调用</span> <a href="Coding_Assistance__Context_Actions.html">上下文动作</a> 。例如，如果我们在<code class="code">return</code>声明以下方法：</p>        <div class="code-block" data-lang="csharp">公共字符串Greet（字符串名称，整数年龄）{返回“嗨，我的名字是“ +名称+”，我是“ +年龄； }</div>        <p id="9dccd0c4">它将转换为：</p>        <div class="code-block" data-lang="csharp">公共字符串Greet（字符串名称，整数年龄）{返回字符串。Format（“嗨，我叫{0}，我叫{1}”，名字，年龄）； }</div>        <p id="0aff061f">您还可以使用上下文操作来自动添加和删除字符串中的格式占位符和参数。当您在字符串文字中调用<span class="control">插入格式参数</span>操作时，ReSharper会插入一个具有正确索引的新占位符，并使您到达可以立即开始键入参数的位置。也可以在纯字符串上调用此操作。在这种情况下，ReSharper会自动将其转换为<code class="code">String.Format</code>呼叫。</p>        <p id="89fc398d">为了快速删除格式占位符以及相应的参数，请在占位符处设置插入符号，然后按<kbd data-rs="Alt+Enter" data-vs="Alt+Enter">Alt+Enter</kbd>然后选择<span class="control">删除格式参数</span> 。</p>    </div>    <div class="chapter"><h2 id="custom" data-toc="Code_Analysis__String_Formatting_Methods#custom">自定义字符串格式设置方法</h2>        <p id="d5897af0">当出现自定义字符串格式设置方法时，您必须告诉ReSharper这样解释它，这很容易-您需要使用<code class="code">[StringFormatMethodAttribute]</code>从<a href="Code_Analysis__Code_Annotations.html">JetBrains。注释名称空间</a> 。该方法具有此属性后，您将享受<a href="#formatting">标准格式化方法可使用的</a>所有<a href="#formatting">功能</a> 。</p>        <p id="f32f16ee">考虑自定义字符串格式设置方法<code class="code">ShowError</code> ：</p>        <div class="code-block" data-lang="csharp">public void ShowError（string formatString，params object [] args）{//一些自定义逻辑控制台。WriteLine（formatString，args）; }</div>        <p id="23da7f8f">如果方法调用不正确，如下所示，则ReSharper没有机会检测到缺少的参数：</p>        <figure><img alt="字符串格式化方法调用不正确" title="字符串格式化方法调用不正确" src="/help/img/dotnet/2019.2/stringFormattingMethods_01.png" id="15248c1f" width="208" height="36" class="inline-icon-208"></figure>        <section class="procedure-steps"><h3 id="774267d7">使ReSharper了解自定义字符串格式设置方法</h3><ol class="list _decimal"><li class="list__item" id="d6cba9a4"><p>参考<code class="code">JetBrains.Annotations</code>名称空间，如“ <a href="Code_Analysis__Annotations_in_Source_Code.html">源代码</a>中的<a href="Code_Analysis__Annotations_in_Source_Code.html">注释”</a>部分中所述。</p></li><li class="list__item" id="a2822f81"><p>使用注释您的自定义字符串格式设置方法<code class="code">[StringFormatMethodAttribute]</code>属性，它带有一个参数-格式字符串参数的名称：</p><div class="code-block" data-lang="csharp">[StringFormatMethod（“ formatString”）] public void ShowError（string formatString，params object [] args）{//一些自定义逻辑控制台。WriteLine（formatString，args）; }</div>            <p></p></li></ol></section>        <p id="9694317f">现在，调用此自定义格式设置方法时，ReSharper将能够警告您有关缺少参数的信息。更重要的是， <span class="control">Add参数</span> <a href="Code_Analysis__Quick-Fixes.html">快速修复</a>将使您更轻松地插入它们：</p>        <figure><img alt="字符串格式化方法调用的快速修复" title="字符串格式化方法调用的快速修复" src="/help/img/dotnet/2019.2/stringFormattingMethods_03.png" id="bfbb2648" width="335" height="208"></figure>        <aside class="prompt" rel="bfbb2648" id="8b97ba71" data-type="tip" data-title="">            <p id="3030bdf9">您可以使用<a href="Code_Analysis__External_Annotations.html">外部注释</a>对已编译库中的自定义字符串格式方法进行<a href="Code_Analysis__External_Annotations.html">注释</a> 。</p>        </aside>    </div>    <div class="chapter"><h2 id="interpolated-strings" data-toc="Code_Analysis__String_Formatting_Methods#interpolated-strings">插值字符串</h2>        <p id="ab78befe">如果您在专案中使用C＃6.0，则可以使用<a href="https://msdn.microsoft.com/en-us/library/dn961160.aspx" rel="noopener noreferrer" data-external="true" target="_blank">内插字串，</a>而不是<code class="code">String.Format</code>方法。</p>        <p id="b2dab11a">            <a name="CsOrVbVersion"></a>默认情况下，ReSharper根据关联的编译器自动检测C＃版本。但是，您可以显式指定目标C＃版本-在解决方案资源管理器中右键单击项目，从上下文菜单中选择“ <a href="Configuring_Project_Specific_Properties.html">编辑项目项属性”</a> ，然后使用<span class="control">C＃语言级别</span>选择器。</p>        <p id="6d10692c">在C＃6.0项目中，ReSharper突出显示了<code class="code">String.Format</code>建议将其转换为插值字符串。您可以使用<a href="Code_Analysis__Quick-Fixes.html">快速修复程序</a>通过几次击键来转换当前用法或<a href="Code_Analysis__Fix_in_Scope.html">特定范围内的</a>所有用法。</p>        <figure><img alt="ReSharper：转换String的用法。格式化为字符串插值" title="ReSharper：转换String的用法。格式化为字符串插值" src="/help/img/dotnet/2019.2/use_string_interpolation.png" id="432efdcb" width="562" height="137"></figure>        <p id="53c719f1">如果插值的字符串不包含表达式，则ReSharper突出显示<code class="code">$</code>签名多余，可以帮助您删除它：</p>        <figure><img alt="ReSharper：将不带参数的字符串插值转换为字符串文字" title="ReSharper：将不带参数的字符串插值转换为字符串文字" src="/help/img/dotnet/2019.2/to_string_literal_fix.png" id="7396bf6b" width="385" height="160"></figure>        <p id="1e282925">如果您需要快速添加<code class="code">$</code>在字符串的开头，当您深入输入字符串时，可以按<kbd data-rs="Alt+Enter" data-vs="Alt+Enter">Alt+Enter</kbd>然后选择<span class="control">到字符串插值</span> 。<br>然后，您还可以选择“ <span class="control">插入插值”参数，</span>然后ReSharper将添加参数占位符<code class="code">{ }</code>在您的插入位置。</p>        <figure><img alt="ReSharper：将简单字符串转换为字符串插值" title="ReSharper：将简单字符串转换为字符串插值" src="/help/img/dotnet/2019.2/ca_to_string_interpolation.png" id="e537aa90" width="592" height="125"></figure>    </div>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月18日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Collection_Access_Analysis.html">集合访问分析</a> <a class="navigation-links__next" href="Code_Analysis__Code_Annotations.html">使用注释来完善代码检查</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>