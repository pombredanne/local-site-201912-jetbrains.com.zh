<html lang="en-US" ><head><meta charset="UTF-8"><meta name="robots" content="noindex"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>分析和优化项目参考-帮助|帮助锐化器</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Navigation_and_Search__Finding_Usages__Optimizing_References" data-breadcrumbs="Project_Level_Assistance.xml|Project-Level Assistance/Navigation_and_Search__Finding_Usages__Optimizing_References.xml|Analyze and Optimize Project References" data-main-title="Analyze and Optimize Project References" data-article-props="
                {
                
            " seeals=":[=" titl=":=" concept=",=" link=":=" ur=":" architecture__project_dependencies_exploration.htm="," tex=":" exploring="" project="" dependency="" diagra="}=" procedure=",=" finding_code_dependent_on_modules.htm="," find="" dependent="" on="" referenced="" module="}=" refactorings__remove_unused_references.htm="," remove="" unused="" reference="}=" refactorings__safe_delete.htm="," safe="" delete="" refactorin="}=" referenc=",=" reference__windows__analyze_references.htm="," analyze="" references="" windo="}=" ="" data-disqus-id="Navigation_and_Search__Finding_Usages__Optimizing_References_10"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索ReSharper帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>ReSharper 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="rs" data-group="secondary">ReSharper 2.x / IntelliJ IDEA</option><option value="vs" data-group="primary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Navigation_and_Search__Finding_Usages__Optimizing_References.xml" data-toc="Navigation_and_Search__Finding_Usages__Optimizing_References">分析和优化项目参考</h1>        <a name="%actionId%"></a>    <p id="520170c2">      <span class="menupath" data-skip-index="skip">ReSharper |查找|优化参考…</span>      <br>      <kbd data-rs="Ctrl+Alt+Y" data-vs="Ctrl+Alt+Y">Ctrl+Alt+Y</kbd>      <br>      <code class="code">ReSharper_OptimizeReferences</code>    </p>      <p id="ef5a8cfc">此功能有助于管理您现有的项目/装配体引用，浏览参考的项目/组件的用法以及删除未使用的引用。您可以在任何单个项目上调用此功能，并使用“ <a href="Reference__Windows__Analyze_References.html">分析参考”窗口</a>来分析和优化项目参考。</p>    <aside class="prompt" rel="ef5a8cfc" id="ab986173" data-type="tip" data-title="">        <p id="2d4cde04">此功能不需要编译您的项目，这意味着即使您的项目当前已损坏，也可以调用它。</p>    </aside>    <div class="chapter"><h2 id="analyze" data-toc="Navigation_and_Search__Finding_Usages__Optimizing_References#analyze">分析项目参考</h2>        <p id="cc30e357">“ <span class="control">分析引用”</span>工具窗口显示当前项目中的项目/装配体引用，并让您探索如何正确使用引用。要探索特定程序集，名称空间或类型的用法，您可以按种类对其进行过滤并将其分组。</p>        <p id="4a428b85"><a href="Reference__Symbol_Icons.html">符号图标</a>可以帮助您区分不同种类的符号。每种用法均带有行号和列；不同的图标表示不同的用法，例如读，写，属性或调用用法。您可以双击任何用法以直接导航到源代码。</p>        <section class="procedure-steps"><h3 id="82c55f3f">分析项目参考</h3><ol class="list _decimal"><li class="list__item" id="556e6459"><p>在解决方案资源管理器中，选择要分析的项目或其“ <span class="control">引用”</span>节点。</p></li><li class="list__item" id="e64d858f">                <p id="6610c0f9">请执行以下任一操作：</p>                <ul class="list _ul"><li class="list__item" id="6b801175"><p>选择<a name="%actionId%"></a> <span class="menupath" data-skip-index="skip">ReSharper |查找|优化参考…</span>                      </p></li><li class="list__item" id="58f10232"><p>右键单击所选内容，然后在上下文菜单中选择“ <span class="control">优化引用</span> ”。</p></li><li class="list__item" id="98940b91"><p>按<kbd data-rs="Ctrl+Alt+Y" data-vs="Ctrl+Alt+Y">Ctrl+Alt+Y</kbd> 。</p></li></ul>            </li><li class="list__item" id="be1ace44"><p>使用“ <a href="Reference__Windows__Analyze_References.html">分析引用”窗口</a>中的控件来浏览项目引用。</p><figure><img alt="ReSharper：分析和优化项目参考" title="ReSharper：分析和优化项目参考" src="/help/img/dotnet/2019.3/ToolWindow_Analyze_References.png" id="90eb2281" width="601" height="509"></figure>            <p></p></li></ol></section>    </div>    <div class="chapter"><h2 id="remove_unused" data-toc="Navigation_and_Search__Finding_Usages__Optimizing_References#remove_unused">删除未使用的引用</h2>        <p id="90b71ab1">清理项目引用的最简单方法是单击“ <span class="control">删除所有未使用的引用”</span> <img alt="ThemedIcon RemoveAllUnusedReferences屏幕灰色" title="ThemedIcon RemoveAllUnusedReferences屏幕灰色" src="/help/img/dotnet/2019.3/ThemedIcon.RemoveAllUnusedReferences.Screen.[Gray].png" id="6937e3ef" width="16" height="16" class="inline-icon-16">在工具栏上。如果要保留一些未使用的引用或删除一些使用的引用（并手动解决随后的编译错误），则可以进行相应的选择，然后单击“ <span class="control">删除选定的引用”。</span> <img alt="ThemedIcon RemoveSelected参考屏幕灰色" title="ThemedIcon RemoveSelected参考屏幕灰色" src="/help/img/dotnet/2019.3/ThemedIcon.RemoveSelectedReference.Screen.[Gray].png" id="27b77302" width="16" height="16" class="inline-icon-16"> 。</p>        <aside class="prompt" rel="90b71ab1" id="tip_implicit" data-type="tip" data-title="">            <p id="a3daa295">如果您的项目引用隐式加载的程序集，则可以在启动之前<a href="#implicit">将其从清理中排除</a></p>        </aside>        <p id="usings">当您删除项目和程序集引用时，ReSharper也会从已删除的程序集中删除所有引用名称空间的冗余名称空间导入指令。</p>        <aside class="prompt" rel="usings" id="no_undo" data-type="note" data-title="">            <p id="aabfce1a">删除项目/程序集引用的操作无法撤消。</p>        </aside>        <p id="e2285314">所有Visual Studio项目都必须引用<code class="code">mscorlib</code>从Visual Studio 2010开始， <code class="code">System.Core</code>组件。这些组件都标有别针<img alt="ThemedIcon针屏灰色" title="ThemedIcon针屏灰色" src="/help/img/dotnet/2019.3/ThemedIcon.Pin.Screen.[Gray].png" id="8083a43b" width="16" height="16" class="inline-icon-16">图标，则无法删除这些引用。</p>        <p id="359b3fe9">无论是否使用它们， <span class="control">编译所需</span>的<span class="control">引用</span>都显示在<span class="control">编译器</span>组<span class="control">所需</span>的<span class="control">引用中</span> 。该组中的引用通常具有“相关用法”，即隐式（非直接）用法。在最简单的情况下，相关用法是由类型的层次结构引起的。也就是说，如果使用某种类型，则必须引用包含该类型的超类型的所有程序集。</p>        <p id="ded9d15c">NuGet软件包与相应的图标一起显示<img alt="ThemedIcon NuGet屏幕呈灰色" title="ThemedIcon NuGet屏幕呈灰色" src="/help/img/dotnet/2019.3/ThemedIcon.NuGet.Screen.[Gray].png" id="144e1d27" width="16" height="16" class="inline-icon-16"> 。删除NuGet软件包时，ReSharper将使用NuGet卸载机制。</p>        <a name="other_ways_to_clean_project_refs"></a>        <p id="5de6db8f">还有两种清理项目和装配体参考的方法。</p>        <ul class="list _ul"><li class="list__item" id="156e27f8"><p>您可以在项目上或“解决方案资源管理器”中的“ <span class="control">引用”</span>节点上调用“ <a href="Refactorings__Remove_Unused_References.html">删除未使用的引用”</a>命令。</p></li><li class="list__item" id="568dc78c"><p>您可以在“解决方案资源管理器”中展开“ <span class="control">引用”</span>节点，选择要删除的引用，然后调用“ <a href="Refactorings__Safe_Delete.html">安全删除”重构</a> ，该操作可以静默删除未使用的引用，或打开一个对话框，显示使用所选引用的方式和位置。</p></li></ul>        </div>    <div class="chapter"><h2 id="implicit" data-toc="Navigation_and_Search__Finding_Usages__Optimizing_References#implicit">保留对隐式加载的程序集的引用</h2>        <p id="9e72315a">一些项目类型隐式使用引用，这意味着这些引用仅在运行时使用。即使这些引用没有代码依赖性，也无法安全删除它们。</p>        <p id="5f9bb4a4">如果仍然要使用ReSharper清理功能（“ <a href="Reference__Windows__Analyze_References.html">分析引用”窗口</a>中的“ <a href="#remove_unused">删除所有未使用的引用”</a>按钮和“重构<a href="Refactorings__Remove_Unused_References.html">未使用的引用”</a>重构），则需要这样标记隐式加载的程序集。</p>        <section class="procedure-steps"><h3 id="e832b183">标记隐式加载的程序集</h3><ol class="list _decimal"><li class="list__item" id="7a8bd8ce"><p>打开<a href="Reference__Windows__Analyze_References.html">分析参考窗口</a>            </p></li><li class="list__item" id="9076a6d1"><p>在“ <span class="control">未使用的引用”</span>部分中，找到需要保留的隐式使用的引用。</p></li><li class="list__item" id="ed3dfd65">                <p id="38c5a812">右键单击引用，然后选择以下选项之一：</p>                <ul class="list _ul"><li class="list__item" id="836d136c"><p>                        <span class="control">将引用标记为在运行时使用</span> -将选定的引用从当前项目的清除中排除</p></li><li class="list__item" id="35b59587"><p>                        <span class="control">将引用标记为整个解决方案在运行时使用</span> -将选定的引用从解决方案的所有项目中清除</p></li></ul>            </li><li class="list__item" id="c13cc2ba"><p>ReSharper将在其<a href="Sharing_Configuration_Options.html">分层设置</a>中将有关隐式使用的引用的信息保存为<span class="filepath">*。项目或解决方案的DotSettings.user</span>文件。</p></li></ol></section>    </div>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月28日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Code_Analysis__Project_Hierarchy.html">探索项目层次结构</a> <a class="navigation-links__next" href="Finding_Exploring_and_Installing_NuGet_Packages.html">查找，探索和安装NuGet软件包</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>