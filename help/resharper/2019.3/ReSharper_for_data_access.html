<html lang="en-US" ><head><meta charset="UTF-8"><meta name="robots" content="noindex"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>ReSharper进行数据访问-帮助|帮助锐化器</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="ReSharper_for_data_access" data-breadcrumbs="Getting_Started.xml|Getting Started and Tutorials/Domain_specific_ReSharper_tutorials.xml|Domain-specific ReSharper tutorials/ReSharper_for_data_access.xml|ReSharper for Data Access" data-main-title="ReSharper for Data Access" data-article-props="
                {
                
            " seeals=":[=" titl=":=" concept=",=" link=":=" ur=":" refactorings__index.htm="," tex=":" refactoring="}=" code_generation__index.htm="," code="" generatio="}=" code_analysis__quick-fixes.htm="," quick-fixes="" for="" issue="}=" ="" data-disqus-id="ReSharper_for_data_access_10"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索ReSharper帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>ReSharper 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="rs" data-group="secondary">ReSharper 2.x / IntelliJ IDEA</option><option value="vs" data-group="primary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="ReSharper_for_data_access.xml" data-toc="ReSharper_for_data_access">ReSharper用于数据访问</h1>    <p id="0b697f53">无论使用哪种数据库和驱动程序/ ORM，在应用程序中设置数据访问的任务都非常相似。从创建实体到建立存储库，ReSharper都可帮助您更好更快地完成工作。</p>    <div class="chapter"><h2 id="entity-creation" data-toc="ReSharper_for_data_access#entity-creation">实体创建</h2>        <p id="3bc898e8">实体是数据访问的核心，因为它们存储数据库中的数据。在ReSharper中，有很多方法可以快速创建实体。一种方法是使用<kbd data-rs="Alt+Insert" data-vs="Alt+Insert">Alt+Insert</kbd>解决方案资源管理器中的快捷方式，它将为您提供熟悉的“ <span class="control">生成”</span>菜单以及可用<a href="Templates__Template_Basics__Template_Types.html#file">文件模板</a>的列表：</p>        <figure><img alt="“ ReSharper进行数据访问”教程" title="“ ReSharper进行数据访问”教程" src="/help/img/dotnet/2019.3/data_access1.png" id="56a0d7cb" width="261" height="200"></figure>        <p id="55191cdf">在上面的菜单中选择“ <span class="control">班级</span> ”，系统会提示您为班级命名：</p>        <figure><img alt="“ ReSharper进行数据访问”教程" title="“ ReSharper进行数据访问”教程" src="/help/img/dotnet/2019.3/data_access2.png" id="400bc649" width="336" height="120"></figure>        <p id="c38a3fb8">您会自动获得一个名为<code class="code">Person</code>在名为<span class="filepath">Person.cs</span>的文件中。</p>        <p id="6815ab1a">作为替代，您可以让ReSharper从用法中推断类名称及其成员。例如，您可以键入一个类调用，然后按<kbd data-rs="Alt+Enter" data-vs="Alt+Enter">Alt+Enter</kbd> <a href="Code_Generation__Generating_Code_from_Usage.html">生成</a>类：</p>        <figure><img alt="“ ReSharper进行数据访问”教程" title="“ ReSharper进行数据访问”教程" src="/help/img/dotnet/2019.3/data_access3.png" id="f1447ac2" width="220" height="143"></figure>        <p id="c57748d3">以几乎相同的方式，ReSharper可以帮助您生成类成员。例如，您可以尝试分配一个名为<code class="code">Name</code> ReSharper将提供创建属性的选项：</p>        <figure><img alt="“ ReSharper进行数据访问”教程" title="“ ReSharper进行数据访问”教程" src="/help/img/dotnet/2019.3/data_access4.png" id="0fbc0002" width="179" height="138"></figure>        <p id="ccbac706">ReSharper可以正确猜测类型，但是可以更改它：</p>        <figure><img alt="“ ReSharper进行数据访问”教程" title="“ ReSharper进行数据访问”教程" src="/help/img/dotnet/2019.3/data_access5.png" id="c179578d" width="256" height="73"></figure>        <p id="e276337c">建立实体的另一种方法是使用<a href="Templates__Template_Basics__Template_Types.html#live">实时模板</a> 。由于ReSharper在安装时会自动导入Visual Studio模板，因此您可以使用例如<a href="Reference__Templates_Explorer__Live_Templates_CSHARP.html#Live_prop_CSHARP">prop</a>模板快速向您的实体添加属性：</p>        <figure><img alt="“ ReSharper进行数据访问”教程" title="“ ReSharper进行数据访问”教程" src="/help/img/dotnet/2019.3/data_access6.png" id="6dd7ec8f" width="262" height="89"></figure>    </div>    <div class="chapter"><h2 id="entity-build-up" data-toc="ReSharper_for_data_access#entity-build-up">实体建立</h2>        <p id="ed4f8970">尽管在许多情况下，您希望使实体尽可能简单，但是在某些情况下，您需要向实体中添加其他功能。例如，初始化构造函数使您的实体更易于使用。幸运的是，在这样的情况下，我们有ReSharper的“ <a href="Generating_Type_Members.html">生成”菜单</a> <kbd data-rs="Alt+Insert" data-vs="Alt+Insert">Alt+Insert</kbd> 。通过此菜单，您可以向现有类型添加各种功能。</p>        <p id="b4b89a0f">假设您要向我们的Person类型添加一个完全初始化的构造函数。为此，请按<kbd data-rs="Alt+Insert" data-vs="Alt+Insert">Alt+Insert</kbd>在课堂上，然后选择<code class="code">Constructor</code> ：</p>        <figure><img alt="ReSharper用于数据访问" title="ReSharper用于数据访问" src="/help/img/dotnet/2019.3/cookbook_create_type.png" id="79a1fede" width="277" height="286"></figure>        <p id="44780f0c">您将看到一个对话框，询问您要初始化哪些属性：</p>        <figure><img alt="ReSharper用于数据访问" title="ReSharper用于数据访问" src="/help/img/dotnet/2019.3/cookbook_create_type1.png" id="f88f7146" width="466" height="400"></figure>        <p id="50a10534">如果您选择所有属性并按<code class="code">Finish</code> ，您的类将获取以下生成的构造函数：</p><div class="code-block" data-lang="csharp">公共人员（字符串名称，整数年龄）{名称=名称；年龄=年龄； }</div>        <p id="b9ba3fda">如果您希望您的实体具有可比性，并且可以轻松托管在以下集合中，例如<code class="code">HashSet<T></code> ，您需要实现平等成员-这是一项艰巨的任务！幸运的是，ReSharper的<span class="control">Generate</span>菜单再次具有一个<a href="Code_Generation__Equality_Members.html">相应的option</a> ，它使您可以实现：</p>        <ul class="list _ul"><li class="list__item" id="2e08b4b0"><p>平等经营者<code class="code">==</code>和<code class="code">!=</code>            </p></li><li class="list__item" id="f97ffc69"><p>正确<code class="code">Equals()</code>重载，以及（可选） <code class="code">IEquatable<T></code>接口</p></li><li class="list__item" id="ff6ca721"><p>一个好的<code class="code">GetHashCode()</code>方法</p></li></ul>        <p id="a2169e64">您可以相信ReSharper会特别注意所有属性-它会执行所有正确的null检查，并且会使用<code class="code">Equals()</code>要么<code class="code">==</code>取决于要比较的类型。</p>        <p id="4c395d87">最后一个示例（有更多可用选项）是自动创建<code class="code">ToString()</code>方法。再一次，您可以选择参与哪些属性，然后，ReSharper会生成一个简洁的实现：</p><div class="code-block" data-lang="csharp">公共替代字符串ToString（）{返回字符串。Format（“名称：{0}，年龄：{1}”，名称，年龄）； }</div>        <p id="285ffad1">请注意，即使您的ORM为您构建了基本实体类，您也可以使用这些功能。由于生成的类通常是部分类，因此没有什么可以阻止您创建该类的另一部分并在其上运行Generate操作。</p>    </div>    <div class="chapter"><h2 id="infrastructure" data-toc="ReSharper_for_data_access#infrastructure">基础设施</h2>        <p id="f7fd9666">准备好实体之后，就该建立对使用数据库有用的基础结构了。当然，具体取决于您使用的ORM或驱动程序，但是在这里，我们将研究NoRM和MongoDB的使用。</p>        <p id="ed5e80ea">假设您从以下代码开始：</p><div class="code-block" data-lang="csharp">void AddPerson（）{使用（var m = new Mongo（“ personnel”，“ localhost”，“ 27017”，字符串。空））{var coll = m。GetCollection <person>（“人”）； var p = new Person（“ Jack”，20）;科尔。插入（p）; }}</person></div>        <p id="df7454c2">我们可以做的第一件事是重构数据库连接数据。为此，让我们使用ReSharper的“ <a href="Refactor_This.html">重构此</a>快捷方式” <kbd data-rs="Ctrl+Shift+R" data-vs="Ctrl+Shift+R">Ctrl+Shift+R</kbd>与<code class="code">new</code>语句已选中，然后选择“ <a href="Refactorings__Extract_Method.html">提取方法”</a>选项：</p>        <figure><img alt="“ ReSharper进行数据访问”教程" title="“ ReSharper进行数据访问”教程" src="/help/img/dotnet/2019.3/data_access7.png" id="e5b2dae3" width="552" height="177"></figure>        <p id="d8c68ccc">因此，ReSharper为您提供了配置方法的选项。叫它吧<code class="code">GetDatabase()</code> ：</p>        <figure><img alt="“ ReSharper进行数据访问”教程" title="“ ReSharper进行数据访问”教程" src="/help/img/dotnet/2019.3/data_access8.png" id="147112cf" width="655" height="592"></figure>        <p id="0775794f">这就是ReSharper产生的东西：</p><div class="code-block" data-lang="csharp">私有静态Mongo GetDatabase（）{返回新的Mongo（“人员”，“本地主机”，“ 27017”，字符串。空）； }</div>        <p id="6fe51708">原来的电话改为<code class="code">GetDatabase()</code>当然。</p>    </div>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月28日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="ReSharper_for_Universal_Apps.html">ReSharper for Universal Apps和Windows Phone</a> <a class="navigation-links__next" href="ReSharper_for_VSTO.html">ReSharper for VSTO</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>