<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><meta content="&#xA;        Detecting possible NullReferenceException with ReSharper&#xA;    " name="description" data-skip-index="skip"><title>Value and Nullability Analysis - Help | ReSharper</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Code_Analysis__Value_Analysis" data-article-props="&#xA;                {&#xA;                &#xA;            &#34;seeAlso&#34;:[&#xA;            &#xA;                {&#34;title&#34;: &#34;Concepts&#34;,&#xA;                 &#34;links&#34;: [&#xA;                &#xA;        {&#34;url&#34;:&#34;Code_Analysis__Index.html&#34;,&#34;text&#34;:&#34;Code Analysis&#34;}&#xA;    ,&#xA;        {&#34;url&#34;:&#34;Collection_Access_Analysis.html&#34;,&#34;text&#34;:&#34;Collection Access Analysis&#34;}&#xA;    ,&#xA;        {&#34;url&#34;:&#34;Code_Analysis__String_Formatting_Methods.html&#34;,&#34;text&#34;:&#34;Code Analysis and Helpers for String Literals&#34;}&#xA;    ,&#xA;        {&#34;url&#34;:&#34;Code_Analysis__Code_Annotations.html&#34;,&#34;text&#34;:&#34;Use Annotations to Refine Code Inspection&#34;}&#xA;    ,&#xA;        {&#34;url&#34;:&#34;Generating_Null_Checking_Routines.html&#34;,&#34;text&#34;:&#34;Generate Null-Checking Routines&#34;}&#xA;    &#xA;                    ]}&#xA;            ]&#xA;        &#xA;                }&#xA;            " data-disqus-id="Code_Analysis__Value_Analysis_10"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search ReSharper Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>ReSharper 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="secondary" value="rs">ReSharper 2.x/IntelliJ IDEA</option><option data-group="primary" value="vs">Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Code_Analysis__Value_Analysis" id="Code_Analysis__Value_Analysis.xml">Value and Nullability Analysis</h1>                <p id="7f957562">        ReSharper performs value analysis to help you find possible 'null'        dereferences as well as redundant boolean comparisons and null checks.    </p>    <div class="chapter"><h2 id="different-ways-of-analyzing-values" data-toc="Code_Analysis__Value_Analysis#different-ways-of-analyzing-values">Different ways of analyzing values</h2>        <p id="87066d1e">            ReSharper analyzes values in two general ways:        </p>        <ul class="list _ul"><li class="list__item" id="43a57768">                <p id="90f23e7d">By understanding the behavior of language constructs.</p>                <p id="04371055">                    In the example below, based on the fact that the parameter                    <code class="code">obj</code>                    was explicitly checked for nullability, ReSharper reasonably supposes that the value of                    <code class="code">obj</code>                    can be indeed 'null' and displays the corresponding warning:                </p>                <figure><img alt="ReSharper: Nullability analysis" title="ReSharper: Nullability analysis" src="/help/img/dotnet/2019.2/Code_Analysis__Value_Analysis__1.png" id="20b1cecc" width="424" height="189"></figure>            </li><li class="list__item" id="66a53d8e">                <p id="119aa39b">                    By relying on                    <a href="Code_Analysis__Code_Annotations.html">code annotation attributes</a>                    (<a href="Reference__Code_Annotation_Attributes.html#CanBeNullAttribute">[CanBeNull]</a>,                    <a href="Reference__Code_Annotation_Attributes.html#NotNullAttribute">[NotNull]</a>,                    <a href="Reference__Code_Annotation_Attributes.html#ItemCanBeNullAttribute">                        [ItemCanBeNull]</a>,                    <a href="Reference__Code_Annotation_Attributes.html#ItemNotNullAttribute">[ItemNotNull]</a>)                </p>                <p id="dc0190d7">                    In this example, the method                    <code class="code">Bar</code>                    is marked with the                    <code class="code">[CanBeNull]</code>                    attribute,                    Using this information, ReSharper warns you that the return value of                    <code class="code">Bar</code>                    can be null, and calling a method on it could lead to a 'null' dereference:                </p>                <figure><img alt="ReSharper: Nullability analysis" title="ReSharper: Nullability analysis" src="/help/img/dotnet/2019.2/Code_Analysis__Value_Analysis__2.png" id="3304c3fc" width="455" height="221"></figure>                <aside data-type="tip" class="prompt" data-title="" rel="3304c3fc" id="3c5fc3b5">                    <p id="fd558490">                        If necessary, you can make code analysis even more precise with                        <a href="Contract_Annotations.html">contract annotations</a>.                        They help you define dependencies between arguments of a function and its return value.                    </p>                </aside>            </li></ul>        <aside data-type="tip" class="prompt" data-title="" rel="0621b128" id="9d6ef551">            <p id="566d352d">                You can instantly fix these problems (for example automatically add a nullability check) using                <a href="Code_Analysis__Quick-Fixes.html">quick-fixes</a>.            </p>        </aside>    </div>    <div class="chapter"><h2 id="modes" data-toc="Code_Analysis__Value_Analysis#modes">Value and nullability analysis modes</h2>        <p id="9352287c">            ReSharper can analyze values in different modes:        </p>        <ul class="list _ul"><li class="list__item" id="6de31e0e"><p>                <i id="d660bcf0">Optimistic</i>                <br>                By default, value analysis mode is optimistic.                In this mode, ReSharper only warns about possible 'null' dereference if the value was explicitly                checked for nullability, or if the symbol is marked with the                <code class="code">[CanBeNull]</code> or                <code class="code">[ItemCanBeNull]</code>                attribute.                The optimistic mode is demonstrated in the examples above.            </p></li><li class="list__item" id="b72c6fe2"><p>                <i id="b6314e73">Pessimistic</i>                <br>                In this mode, ReSharper warns about possible 'null' dereference in all contexts where the value is not                checked for nullability explicitly, unless the symbol is marked with the                <code class="code">[NotNull]</code> or                <code class="code">[ItemNotNull]</code>                attribute.            </p></li></ul>        <p id="75fb8bae">            To change value analysis mode or disable the analysis, configure the            <span class="control">Value analysis mode</span>            preference on            <a name="the_options_page"></a>        the        <span data-skip-index="skip" class="menupath">Code Inspection | Settings</span>        page of        <a name="product_settings"></a>        ReSharper options                (<kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Alt+R,,O</span></kbd>).        </p>    </div>    <div class="chapter"><h2 id="further_examples" data-toc="Code_Analysis__Value_Analysis#further_examples">Further examples of value analysis</h2>        <p id="7a981019">            Here are some more examples of ReSharper's value and nullability analysis:        </p>        <ul class="list _ul"><li class="list__item" id="6f92cac9"><p>                If a nullability check has been already done with a simple LINQ query,                ReSharper tells you that a further nullability check is redundant:                <figure><img alt="Redundant nullability check for collection item" title="Redundant nullability check for collection item" src="/help/img/dotnet/2019.2/value_analysis_collection_1.png" id="16685349" width="530" height="149"></figure>            </p></li><li class="list__item" id="c9842d4b"><p>                The same happens if you mark a collection with the                <code class="code">[ItemNotNull]</code>                attribute:                <figure><img alt="Redundant nullability check for collection item" title="Redundant nullability check for collection item" src="/help/img/dotnet/2019.2/value_analysis_collection_2.png" id="0cb2c464" width="402" height="136"></figure>            </p></li><li class="list__item" id="40a9b1e9"><p>                The next example illustrates how value analysis works when the                <i id="58a2dabf">pessimistic</i>                mode is enabled.                The value of the list was checked for nullability, but not list items.                Therefore ReSharper warns here about possible 'null' dereference.                <figure><img alt="Redundant nullability check for collection item" title="Redundant nullability check for collection item" src="/help/img/dotnet/2019.2/value_analysis_collection_3.png" id="f520e971" width="478" height="169"></figure>            </p></li></ul>    </div>    <div class="last-modified" data-skip-index="skip">Last modified: 18 November 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Spell_Checking.html">Spell Checking with ReSpeller</a><a class="navigation-links__next" href="Collection_Access_Analysis.html">Collection Access Analysis</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>