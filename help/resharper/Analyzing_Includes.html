<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Analyzing Includes - Help | ReSharper</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Analyzing_Includes" data-disqus-id="Analyzing_Includes_10"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search ReSharper Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>ReSharper 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="secondary" value="rs">ReSharper 2.x/IntelliJ IDEA</option><option data-group="primary" value="vs">Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Analyzing_Includes" id="Analyzing_Includes.xml">Analyzing Includes</h1>    <p id="c5950270">        <a name="CppIncludesProfilerInCurrentProject"></a>    <span data-skip-index="skip" class="menupath">ReSharper | Inspect | Analyze Includes in Current Project</span>          <br>        <a name="CppIncludesProfilerInSolution"></a>    <span data-skip-index="skip" class="menupath">ReSharper | Inspect | Analyze Includes in Solution</span>      </p>    <p id="2afe61ce">        Long build times caused by huge hierarchies of includes        is one of the biggest problems in large real-world C++ projects.        ReSharper has a few features to help you with optimizing includes in design time.        For example, it will        <a href="Code_Analysis_in_CPP.html#remove_include">mark unused</a>        <code class="code">#include</code> directives or automatically create forward declarations for unresolved names        instead of including the headers with the required declarations.    </p>    <p id="5a8eaca4">        To address the includes hierarchies problem in a more systematic way, ReSharper provides        <span class="emphasis">Includes Analyzer</span>,        a code inspection tool that helps you locate and eliminate unnecessary header dependencies.    </p>    <div class="chapter"><h2 id="how-is-it-helpful" data-toc="Analyzing_Includes#how-is-it-helpful">How is it helpful?</h2>        <p id="9578532c">            A typical project might contain many thousands of            <code class="code">#include</code>            directives, and it is not clear which of them are worth investigating.            Includes Analyzer attempts to estimate the contribution of each header file to the build time,            based on the number of lines of code that it adds to the total compilation workload.            While this is not a precise metric,            it is a useful starting point to find and prioritize the most included header files.        </p>        <p id="3e044136">            After you identify the header dependencies that potentially have the biggest impact,            you can try getting rid of them one by one via the standard approaches, for example:        </p>        <ul class="list _ul"><li class="list__item" id="d74433d9"><p>                using                <a href="http://www.gotw.ca/publications/mill04.htm" data-external="true" target="_blank" rel="noopener noreferrer">forward declarations</a>                wherever possible,            </p></li><li class="list__item" id="c24c8346"><p>                removing unneeded <code class="code">#include</code> directives,            </p></li><li class="list__item" id="1c73dbf0"><p>                applying the                <a href="http://en.cppreference.com/w/cpp/language/pimpl" data-external="true" target="_blank" rel="noopener noreferrer">Pimpl idiom</a>,            </p></li><li class="list__item" id="e402dca3"><p>                splitting large header files into smaller ones.            </p></li></ul>        <p id="b92b1574">            One important limitation of Includes Analyzer is that ReSharper does not actually run a full preprocessing            stage in order to speed up the analysis process.            This means that the line count does not in fact include the results of macro expansions,            and that include guards do not get handled as well.            Instead, ReSharper assumes that each header file starts with an include guard or a #pragma once directive,            and gets included at most once in any source file.            Each successive include of the same header does not count towards its number of contributed lines,            which means that sometimes you may encounter            <span class="emphasis">Times included</span>            and other metrics equal to zero next to an internal tree node.        </p>    </div>    <div class="chapter"><h2 id="starting-the-analysis" data-toc="Analyzing_Includes#starting-the-analysis">Starting the analysis</h2>        <p id="8514e1cb">            To start the analysis, invoke one of the            <span data-skip-index="skip" class="menupath">ReSharper | Inspect | Analyze Includes inâ€¦</span>            actions from the main menu, or select            <span class="control">Analyze Includes</span>            from the Solution Explorer context menu.        </p>        <p id="0c2d80d1">            ReSharper will analyze the files in the given scope and present a report in a dedicated tool window,            where you can explore the dependencies between the files.            The            <span class="control">Includes analysis</span>            window provides two separate views,            <span class="control">Includees</span>            and            <span class="control">Includers</span>,            both of which present include dependencies as a tree where each node corresponds to a file.            You can switch between these views via the corresponding toolbar buttons,            or by navigating to the same file in the other view from the context menu.        </p>    </div>    <div class="chapter"><h2 id="includees-view" data-toc="Analyzing_Includes#includees-view">Includees view</h2>        <p id="91c0cc0b">            The            <span class="control">Includees</span>            view helps you understand how many lines of code the header file in a top-level tree node            contributes to all source files that directly or indirectly include it. Child nodes in this view represent            files            that include the file from the parent node. Consider the following analysis of the entire            <a href="https://github.com/catchorg/Catch2" data-external="true" target="_blank" rel="noopener noreferrer">Catch2</a>            solution:        </p>        <figure><img alt="ReSharper Includes analysis - Includees view" title="ReSharper Includes analysis - Includees view" src="/help/img/dotnet/2019.2/IncludesAnalyzerIncludees.png" id="e3e8ece1" width="636" height="317"></figure>        <p id="7bd099a6">There are three metrics for each node in the tree:</p>        <ul class="list _ul"><li class="list__item" id="762cdbc2"><p>                <span class="emphasis">Times included</span>                shows how many source files include the header in the top-level node through the path to the                current node. In the example above,                <span class="filepath">catch_common.h</span>                was included into 75 source files in total, of which 26 included                <span class="filepath">catch_common.h</span>                through the                <code class="code">#include "catch_common.h"</code>                directive in                <span class="filepath">catch_tag_alias_autoregistrar.h</span>.            </p></li><li class="list__item" id="0432196e"><p>                <span class="emphasis">Line contribution</span>                shows how many lines of code the header in the top-level node contributed through the path                to the current node by itself, without transitively included files.                <span class="filepath">catch_common.h</span>                contributed 4,050 lines of code in total,                which is 75 (the number of source files that include it) times 54 (the number of lines of                code in the file). Out of 4,050 in total, 1,404 lines were contributed because of                <code class="code">#include "catch_common.h"</code>                in                <span class="filepath">catch_tag_alias_autoregistrar.h</span>.            </p></li><li class="list__item" id="348c7e7f"><p>                <span class="emphasis">Line contribution inclusive</span>                is similar to                <span class="emphasis">Line contribution</span>, but this metric takes into account all headers                transitively included into the file in the top-level node. For example                <span class="filepath">catch_common.h</span>, together with the headers                included into it, contributes 2,654,938 lines in total during compilation of the entire solution.                1,017,626                of those lines were contributed because of                <code class="code">#include "catch_common.h"</code>                in                <code class="code">catch_tag_alias_autoregistrar.h</code>.                <span class="emphasis">Line contribution inclusive</span>                is the default and arguably the most useful sorting criteria.            </p></li></ul>    </div>    <div class="chapter"><h2 id="includers-view" data-toc="Analyzing_Includes#includers-view">Includers view</h2>        <p id="922f1be0">            The            <span class="control">Includers</span>            view is similar to the            <span class="control">Includees</span>            view, but acts in the opposite way:            the child nodes inside the tree represent files which are included into the file from the parent node.        </p>        <figure><img alt="ReSharper Includes analysis - Includers view" title="ReSharper Includes analysis - Includers view" src="/help/img/dotnet/2019.2/IncludesAnalyzerIncluders.png" id="54994c34" width="636" height="317"></figure>        <p id="2d7c1c33">            This view shows how many lines of code are transitively included into the file in a top-level node            as if it was compiled as a standalone source file (for example            <span class="filepath">catch_common.h</span>            together with all headers included into it comprises            42,365 lines of code, of which 27,046 were brought with            <code class="code">#include&lt;string&gt;)</code>. The metrics that this view provides are        </p>        <ul class="list _ul"><li class="list__item" id="55b15632"><p>                <span class="emphasis">Includee count</span>                (the number of included files),            </p></li><li class="list__item" id="dda8ce79"><p>                <span class="emphasis">Line count</span>                (the size of the file itself),            </p></li><li class="list__item" id="064f91be"><p>                <span class="emphasis">Line count inclusive</span>                (the size of the file with all the header files it includes).            </p></li></ul>    </div>    <div class="chapter"><h2 id="options" data-toc="Analyzing_Includes#options">Options</h2>        <p id="bc545a09">            In addition to navigation controls and the refresh button,            the toolbar in the Includes analysis window lets you change two options:        </p>        <ul class="list _ul"><li class="list__item" id="848a801b"><p>                <span class="emphasis">Show only root nodes belonging to some project</span>                will hide top-level tree nodes                that correspond to files not belonging to any project.                This is a quick way to filter out library files                if you want to concentrate only on headers inside your solution.            </p></li><li class="list__item" id="a6450fe4"><p>                By default, ReSharper skips blank lines and comments during an analysis. The                <span class="emphasis">Count blank and comment lines</span>                button lets you change this behavior.            </p></li></ul>    </div><div class="last-modified" data-skip-index="skip">Last modified: 18 November 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Navigation_in_CPP.html">Navigation and Search</a><a class="navigation-links__next" href="Refactorings_for_CPP.html">Refactorings</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>