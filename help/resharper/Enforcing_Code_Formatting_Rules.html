<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>管理和应用代码格式设置规则-帮助|帮助锐化器</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body type=""  data-id="editing.codeReformatting" data-article-props="
                {
                
            " seeals=":[=" titl=":=" concept=",=" link=":=" ur=":" code_cleanup__index.htm="," tex=":" code="" cleanu="}=" code_analysis__quick-fixes.htm="," quick-fixes="" for="" issue="}=" coding_assistance__importing_namespaces.htm="," import="" missing="" namespace="}=" procedure=",=" coding_assistance__naming_style.htm="," naming="" styl="}=" managing="" and="" applying="" formatting="" rule="}=" file_and_type_layout.htm="," file="" layou="}=" file_header_style.htm="," header="" ="url"="http:=" ="text"="resharper=" }="" ,="" ]}="" ]="" enforcing_code_formatting_rules_1=""><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索ReSharper帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>ReSharper 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="rs" data-group="secondary">ReSharper 2.x / IntelliJ IDEA</option><option value="vs" data-group="primary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Enforcing_Code_Formatting_Rules.xml" data-toc="editing.codeReformatting">管理和应用代码格式化规则</h1>            <a name="%actionId%"></a>    <p id="1440e758">      <span class="menupath" data-skip-index="skip">ReSharper |编辑重新格式化代码</span>      <br>      <kbd data-rs="Ctrl+Alt+L" data-vs="Ctrl+Alt+Enter">Ctrl+Alt+L</kbd>      <br>      <code class="code">ReSharper_ReformatCode</code>    </p>      <a name="intro"></a>        <p id="dbe8fc85">代码样式的一个重要方面是如何设置代码格式，即如何使用空格和空白行来排列和分隔代码块，是否以及如何使用制表符缩进，是否以及如何包装长行等。 。</p>        <p id="69cb18f2">ReSharper代码格式化规则集广泛，具有默认配置，该配置考虑了默认的Visual Studio格式化选项以及许多最佳实践。您可以<a href="#configure">配置</a>格式设置规则的每个细节，并在代码中强制执行规则。这些规则适用于ReSharper <a name="apply_features_raw"></a>产生具有<a href="Auto-Completing_Code.html">代码完成</a>和<a href="Code_Generation__Index.html">代码生成</a>功能的新代码，应用<a href="Templates__Index.html">代码模板</a>并执行<a href="Refactorings__Index.html">重构</a> 。格式设置规则也可以<a href="#reformat">应用于</a>当前选择，当前文件中<a href="#reformat">的现有代码</a> ，或者适用于整个解决方案的更大范围。</p>        <div class="chapter"><h2 id="pasted" data-toc="editing.codeReformatting#pasted">自动格式化已编辑和粘贴的代码</h2>        <p id="e20c1037">在编辑器中键入代码时，只要键入分号，ReSharper都会重新格式化表达式<code class="code">;</code>并在输入大括号后立即重新格式化代码块<code class="code">}</code> 。如有必要，您可以在计算机上禁用这些自动格式设置<a name="the_options_page"></a> <span class="menupath" data-skip-index="skip">环境|编辑器的“编辑者行为”</span>页面<a name="product_settings"></a> ReSharper选项（ <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+R,,O</span></kbd> ）。</p>        <p id="3a50212e">ReSharper还允许您在粘贴代码时自动应用<a href="#configure">格式设置规则</a> 。默认情况下，粘贴的代码未完全重新格式化，而仅应用缩进设置。如果要完全格式化粘贴的代码，或禁用粘贴时的格式化，请使用<a name="the_auto_format_on_paste_selector"></a>在上的<span class="control">自动格式化粘贴</span>选择器上<a name="the_options_page"></a> <span class="menupath" data-skip-index="skip">环境|编辑器的“编辑者行为”</span>页面<a name="product_settings"></a> ReSharper选项（ <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+R,,O</span></kbd> ）。</p>        <aside class="prompt" rel="3a50212e" id="tip_undo_paste_formatting" data-type="tip" data-title="">            <p id="fcd7cf94">即使启用了自动格式设置或粘贴时自动缩进，也可以在不重新格式化的情况下粘贴代码：按<kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Ctrl+Z</span></kbd>粘贴后立即进行，仅格式化将被撤消。</p>        </aside>        <p id="vs_format_on_paste">请注意，默认情况下，Visual Studio对编辑和粘贴的代码应用其自己的格式设置规则。如果您使用的是ReSharper自动格式化功能，建议您禁用Visual Studio自动格式化。您可以在Visual Studio选项（“ <span class="menupath" data-skip-index="skip">工具” |“选项”</span> ）中进行操作。例如，对于C＃，请清除“ <span class="menupath" data-skip-index="skip">文本编辑器” |</span> “ <span class="menupath" data-skip-index="skip">文本编辑器”</span>上的相应复选框<span class="menupath" data-skip-index="skip">。 C＃|代码样式|格式|常规</span>选项页面。</p>    </div>    <div class="chapter"><h2 id="reformat" data-toc="editing.codeReformatting#reformat">重新格式化现有代码</h2>        <p id="1d63693d">ReSharper提供了几种重新格式化现有代码的方法。简而言之，您可以随时使用<kbd data-rs="Ctrl+Alt+L" data-vs="Ctrl+Alt+Enter">Ctrl+Alt+L</kbd> ，但是下面介绍了一些详细信息和替代方法。</p>        <section class="procedure-steps"><h3 id="8b9088e6">重新格式化任何范围内的现有代码</h3><a name="step_select_scope"></a><ol class="list _decimal"><li class="list__item" id="5db6ef13">            <p id="6f1baf38">选择您要重新格式化代码的范围：</p>            <ul class="list _ul"><li class="list__item" id="cafc0692"><p>在编辑器中进行选择以重新格式化选择中的代码。</p></li><li class="list__item" id="7ce166c6"><p>将插入符号设置在文件中的任何位置以重新格式化文件中的代码。</p></li><li class="list__item" id="33302761"><p>在<span class="control">解决方案资源管理器中</span>选择一个或多个项目，以重新格式化这些项目及其子项目下文件的代码。</p></li></ul>        </li><li class="list__item" id="199fca07"><p>            <a name="invoke_command"></a>按<a name="invoke_command_base"></a><kbd data-rs="Ctrl+Alt+L" data-vs="Ctrl+Alt+Enter">Ctrl+Alt+L</kbd>或选择<a name="%actionId%"></a> <span class="menupath" data-skip-index="skip">ReSharper |编辑</span>从主菜单<span class="menupath" data-skip-index="skip">重新格式化代码</span> 。或者，您可以按<kbd data-rs="Ctrl+Shift+A" data-vs="Ctrl+Shift+A">Ctrl+Shift+A</kbd> ，开始在弹出窗口中键入命令名称，然后在此处选择它。</p></li></ol></section>        <p id="66721bd8">您可以直接从<kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+Enter</span></kbd>动作清单。</p>        <section class="procedure-steps"><h3 id="6d5c7e7d">在当前选择中重新格式化代码</h3><ol class="list _decimal"><li class="list__item" id="0750e1f8"><p>在编辑器中，选择要重新格式化的代码块。</p></li><li class="list__item" id="d18c0e16"><p>按<kbd data-rs="Alt+Enter" data-vs="Alt+Enter">Alt+Enter</kbd>或单击插入符号左侧的<a href="Actions_List.html#indicators">动作指示器</a>以打开<a href="Actions_List.html#action_list">动作列表</a> 。</p></li><li class="list__item" id="03865196"><p>选择<img alt="ThemedIcon CodeCleanupOption页面屏幕灰色" title="ThemedIcon CodeCleanupOption页面屏幕灰色" src="/help/img/dotnet/2019.2/ThemedIcon.CodeCleanupOptionPage.Screen.[Gray].png" id="9d0c633f" width="16" height="16" class="inline-icon-16">在操作列表中<span class="control">选择格式</span> 。</p><figure><img alt="重新格式化当前选择的代码" title="重新格式化当前选择的代码" src="/help/img/dotnet/2019.2/format_selection.png" id="d8ef7413" width="484" height="166"></figure>            <p></p></li></ol></section>        <p id="a6ebf263">另外，您可以使用<a href="Code_Cleanup__Index.html">代码清除</a>来重新格式化任何范围内的代码。如果要将代码重新格式化与应用其他代码样式结合使用，代码清理可能会有所帮助。</p>        <a name="generated_note"></a>        <aside class="prompt" rel="reformat" id="8f1e352d" data-type="note" data-title="">            <p id="1f2fe2b2">代码清除不适用于生成的代码。默认情况下，ReSharper提供通常由Visual Studio生成的生成代码（例如Windows Form Designer生成的代码）的文件掩码和区域列表。如有必要，您可以在上<a href="Code_Analysis__Configuring_Warnings.html#exclude_generated">编辑生成的项目列表</a> <a name="the_options_page"></a> <span class="menupath" data-skip-index="skip">代码检查|的“生成的代码”</span>页面<a name="product_settings"></a> ReSharper选项（ <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+R,,O</span></kbd> ）。</p>        </aside>            <section class="procedure-steps"><h3 id="e7427b18">使用代码清除重新格式化代码</h3><a name="step_select_scope"></a><ol class="list _decimal"><li class="list__item" id="756fa532">            <p id="1750b484">选择您要重新格式化代码的范围：</p>            <ul class="list _ul"><li class="list__item" id="d56f0f0e"><p>在编辑器中进行选择以重新格式化选择中的代码。</p></li><li class="list__item" id="1203845f"><p>将插入符号设置在文件中的任何位置以重新格式化文件中的代码。</p></li><li class="list__item" id="9f6a2112"><p>在<span class="control">解决方案资源管理器中</span>选择一个或多个项目，以重新格式化这些项目及其子项目下文件的代码。</p></li></ul>        </li><li class="list__item" id="f73136ef">            <p id="b64ed12f">请执行以下任一操作：</p>            <ul class="list _ul"><li class="list__item" id="f369abf4"><p>                    <a name="invoke_command"></a>按<a name="invoke_command_base"></a><kbd data-rs="Ctrl+Alt+F" data-vs="Ctrl+E,C">Ctrl+Alt+F</kbd>或选择<a name="%actionId%"></a> <span class="menupath" data-skip-index="skip">ReSharper |编辑</span>从主菜单<span class="menupath" data-skip-index="skip">清除代码</span> 。</p></li><li class="list__item" id="c88cb74f"><p>右键单击文本编辑器中的任意位置，或右键单击所选内容，然后在上下文菜单中选择“ <span class="control">清理代码”</span> 。</p></li></ul>        </li><li class="list__item" id="6d8151ba"><p>在打开的<a href="Reference__Code_Cleanup.html">“代码清除”对话框</a>中，选择“ <i id="fcf6faac">默认：重新格式化代码”</i>配置文件。</p></li><li class="list__item" id="9b796efe"><p>点击<span class="control">运行</span> 。ReSharper将根据您的格式首选项重新格式化所选范围内的代码。</p></li></ol></section>        <aside class="prompt" rel="e7427b18" id="1b1b7ed0" data-type="note" data-title="">            <p id="e8dcbe1c"><i id="f7ff3a04">默认：重新格式化代码</i>配置文件不会重新格式化XML文档注释。您可以使用“ <i id="f6ef9508">默认值：完全清除”</i>配置文件或为此创建自己的自定义清除配置文件。有关详细信息，请参阅<a href="Code_Cleanup__Usage_Scenarios__Reformatting_XML.html">重新格式化XML文档注释</a> 。</p>        </aside>        <a name="silent"></a>                <p id="7b97cacf">如果要在不打开“ <a href="Reference__Code_Cleanup.html">代码清除”对话框</a>的情况下<i id="09055c27" origin="dotnet">重新格式化代码</i> ，则可以将默认的“ <i id="09055c27" origin="dotnet">重新格式化代码”</i>配置文件绑定到<a href="Code_Cleanup__Index.html#silent_mode">静默清除</a>并通过按以下命令运行它<kbd data-rs="Ctrl+Shift+Alt+F" data-vs="Ctrl+E,F">Ctrl+Shift+Alt+F</kbd> 。您还可以创建一个<a href="Code_Cleanup__Index.html#custom_profile">自定义清除配置文件</a> ，该<a href="Code_Cleanup__Index.html#custom_profile">配置文件</a>将代码重新格式化与其他代码样式任务结合在一起。</p>        </div>    <div class="chapter"><h2 id="using-code-inspection-to-maintain-formatting-rules" data-toc="editing.codeReformatting#using-code-inspection-to-maintain-formatting-rules">使用代码检查来维护C＃和C ++中的格式设置规则</h2>        <p id="8c01a5cf">在C＃和C ++中，还可以使用<a href="Finding_Code_Issues.html">代码检查功能</a>来维护代码格式化样式。ReSharper提供<a href="Reference__Code_Inspections_CSHARP.html#FormattingIssues">了数十种</a>格式检查，默认情况下所有这些检查都是禁用的。</p>        <a name="cpp_support_note"></a>        <aside class="prompt" rel="using-code-inspection-to-maintain-formatting-rules" id="ae6805be" data-type="note" data-title="">            <p id="1743f0f9">                <a name="cpp_products"></a> <a href="/resharper-cpp/" rel="noopener noreferrer" data-external="true" target="_blank">ReSharper C ++</a>提供了C ++支持， <a href="/resharper-cpp/" rel="noopener noreferrer" data-external="true" target="_blank">ReSharper C ++</a>是一种专用产品，可以单独安装，也可以与ReSharper或<a href="/dotnet/" rel="noopener noreferrer" data-external="true" target="_blank">ReSharper Ultimate</a>并排安装。</p>        </aside>            <p id="3ba5a444">根据解决方案的不同，您的代码库可能会发生数百种轻微的格式冲突，例如方法之间的缩进大小不同，开关语句中的大小写标签缩进不同，缺少换行符等。为所有这些违规启用代码检查可能太吵了。</p>        <p id="39d6bc52">另一方面，存在格式化问题，这些问题会降低代码的可读性或可能影响您对代码的理解。例如：</p>                <ul class="list _ul"><li class="list__item" id="014577d5"><p>同一行上有多个类型成员，</p></li><li class="list__item" id="f0f49608"><p>一行上有多个语句，</p></li><li class="list__item" id="d5ab1448"><p>在子语句周围缩进不正确，</p></li><li class="list__item" id="b121d496"><p>声明括号周围的缩进不正确，</p></li><li class="list__item" id="4eba67d8"><p>声明括号周围的缩进不正确。</p></li></ul>        <p id="af9746f7">对于此类格式问题，我们建议<a href="Code_Analysis__Configuring_Warnings.html#disable">启用</a>代码检查。</p>        <figure id="b1c5c807" width="600" data-theme="light"><img class="js-gif" src="/help/img/dotnet/2019.2/formatting-inspections.png" width="600" data-gif-src="/help/img/dotnet/2019.2/formatting-inspections.animated.gif" style="width:600px"></figure>    </div>    <div class="chapter"><h2 id="keeping-existing-formatting" data-toc="editing.codeReformatting#keeping-existing-formatting">保持现有格式</h2>        <p id="3407bbfe">您可以“柔和”应用一些格式设置规则，这意味着在ReSharper时将应用此类规则<a name="apply_features_raw"></a>产生具有<a href="Auto-Completing_Code.html">代码完成</a>和<a href="Code_Generation__Index.html">代码生成</a>功能的新代码，应用<a href="Templates__Index.html">代码模板</a>并执行<a href="Refactorings__Index.html">重构</a> ，但是当您<a href="#reformat">重新格式化现有代码</a>时，这些规则将被忽略（例如，使用<kbd data-rs="Ctrl+Alt+L" data-vs="Ctrl+Alt+Enter">Ctrl+Alt+L</kbd> ）。</p>        <p id="b3454ec8">要使格式设置规则不太严格， <span class="control">请</span>对特定上下文使用“ <span class="control">保留现有...”</span> ，“ <span class="control">保留最大空白行</span> ”和“ <span class="control">简单包装”</span>首选项。您可以在以下位置检查或更改这些首选项的配置<a name="product_settings"></a> ReSharper选项（ <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+R,,O</span></kbd> ）：</p>        <figure><img alt="ReSharper：保留选定规则的现有格式" title="ReSharper：保留选定规则的现有格式" src="/help/img/dotnet/2019.2/keep_existing_formatting.png" id="c27cb2d1" width="766" height="258"></figure>    </div>    <div class="chapter"><h2 id="reformatting-with-different-line-break-styles" data-toc="editing.codeReformatting#reformatting-with-different-line-break-styles">重新格式化具有不同换行样式的代码</h2>        <p id="1f1f63ba">ReSharper还允许您使用显式操作而不是格式化规则来以不同方式重新格式化相似的代码。当您选择<a href="#keeping-existing-formatting">保留</a>相关规则的<a href="#keeping-existing-formatting">现有格式</a>时，这些操作最有帮助。但是，如果设置更严格，则相应的显式格式化操作将不起作用，因为此类配置意味着格式化规则应始终应用于受影响的上下文中。例如，如果禁用了“ <span class="control">保持现有...”</span>首选项，则下面描述的wrap / chop / spacious / compact命令将呈现相同的结果。如果将某些换行规则设置为<span class="control">Chop ...</span> ，则即使调用了wrap / compact命令，也会始终切掉相应上下文中的代码。</p>        <div class="chapter"><h3 id="wrap-long-line">包装和切长线</h3>            <p id="2104dd4a">当插入符在一条线上时，“ <span class="control">Wrap long line”</span>和“ <span class="control">Chop long line”</span>操作可用，该操作比允许的最大行长长-您可以在“ <span class="control">Right margin（columns）”</span>首选项上对其进行配置<a name="the_options_page"></a> <span class="menupath" data-skip-index="skip">代码编辑| C＃|格式样式|的换行和换行</span>页面<a name="product_settings"></a> ReSharper选项（ <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+R,,O</span></kbd> ）。</p>            <p id="15ecb763">你可以按<kbd data-rs="Alt+Enter" data-vs="Alt+Enter">Alt+Enter</kbd>并选择一项操作以添加必要的换行符。</p>            <p id="3d22958d"><span class="control">长行换行将</span>添加仅足够的换行符，以确保不超过配置的<span class="control">行长</span> ：</p>            <p id="f908850a">                <span class="emphasis">重新格式化之前</span>            </p>            <div class="code-block" data-lang="csharp">var reportHtml = CreateReport（“ 359CD313-7C7E-49B2-A2AB-E12FDFD1319D”，DateTimeOffset。UtcNow。AddMonths（-1），DateTimeOffset。UtcNow，useRichText：true）;</div>            <p id="04407790">                <span class="emphasis">重新格式化后</span>            </p>            <div class="code-block" data-lang="csharp">var reportHtml = CreateReport（“ 359CD313-7C7E-49B2-A2AB-E12FDFD1319D”，DateTimeOffset。UtcNow。AddMonths（-1），DateTimeOffset。UtcNow，useRichText：true）;</div>            <p id="78b3698a"><span class="control">长</span>整行将为该行上的每个实体添加换行符：</p>            <p id="7367db6b">                <span class="emphasis">重新格式化之前</span>            </p>            <div class="code-block" data-lang="csharp">var reportHtml = CreateReport（“ 359CD313-7C7E-49B2-A2AB-E12FDFD1319D”，DateTimeOffset。UtcNow。AddMonths（-1），DateTimeOffset。UtcNow，useRichText：true）;</div>            <p id="ae79642e">                <span class="emphasis">重新格式化后</span>            </p>            <div class="code-block" data-lang="csharp">var reportHtml = CreateReport（“ 359CD313-7C7E-49B2-A2AB-E12FDFD1319D”，DateTimeOffset。UtcNow。AddMonths（-1），DateTimeOffset。UtcNow，useRichText：true）;</div>        </div>        <div class="chapter"><h3 id="compact-spacious-and-strict-format-for-code-blocks">紧凑，宽敞且严格的代码块格式</h3>            <p id="c6d5b235">用于显式重新格式化代码的另一组操作可帮助您在选择中强制执行更紧凑（更少的换行符）或更宽敞（更多的换行符）格式。</p>            <p id="8c4889cc">要调用这些动作，请选择一个代码块（您可以使用<kbd data-rs="Ctrl+W" data-vs="Ctrl+Alt+Right">Ctrl+W</kbd>选择一个逻辑块），按<kbd data-rs="Alt+Enter" data-vs="Alt+Enter">Alt+Enter</kbd>然后选择“ <span class="control">格式选择”</span>下的操作之一。</p>            <p id="26a3e83b">如果您有太多的换行符，这不利于阅读代码，则删除它们可能是一个好主意。在下面的示例中，空的getter和setter不会带来任何有用的信息，可以安全地放在一行上。您可以使用<span class="control">紧凑格式（较少的换行符）</span>操作来执行此操作：</p>            <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="0ec0d49f"><thead><tr id="6db60619" class="ijRowHead"><th id="b9166dc7"><p>重新格式化之前</p></th><th id="c9cd406a"><p>重新格式化后</p></th></tr></thead><tbody><tr id="19a57a75" class="ijRowOdd"><td id="f8aef035">                        <div class="code-block" data-lang="csharp">公共字符串名称{get;组; } public int年龄{get;组; }</div>                    </td><td id="b3f6ca37">                        <div class="code-block" data-lang="csharp">公共字符串名称{get;组; } public int年龄{get;组; }</div>                    </td></tr></tbody></table></div>            <p id="f79f1f97">您可能要使用<span class="control">宽敞的格式（印章）</span>使多行代码块更易于阅读。例如，您可能想在复杂的行中添加更多的换行符<code class="code">if</code>陈述或沉重<code class="code">XElement</code>构造函数调用：</p>            <p id="690d04af">                <span class="emphasis">重新格式化之前</span>            </p>            <div class="code-block" data-lang="csharp">汇总表。添加（新XElement（“ tr”，新XElement（“ td”，XmlHelpers。CreateHyperlink（检查。文本，CodeInspectionHelpers。TryGetStaticHref（检查。id），null，true），新的XComment（compoundName）），新的XElement（“ td”，GetSeverityLink（检查）。严重程度））））；</div>            <p id="7c15b40c">                <span class="emphasis">重新格式化后</span>            </p>            <div class="code-block" data-lang="csharp">汇总表。添加（新XElement（“ tr”，新XElement（“ td”，XmlHelpers。CreateHyperlink（检查。文本，CodeInspectionHelpers。TryGetStaticHref（检查。id），null，true），新的XComment（compoundName）），新的XElement（“ td”，GetSeverityLink（检查）。严重程度））））；</div>            <p id="f5a2700b">“ <span class="control">严格格式”</span>操作将重新格式化选择，而忽略任何现有的换行符，而与“ <span class="control">保持现有...”</span>首选项的配置方式无关。</p>        </div>    </div>    <div class="chapter"><h2 id="configure" data-toc="editing.codeReformatting#configure">配置代码格式规则</h2>        <p id="1cf1bfc3">可以将格式化规则配置为很高的详细程度。例如，您可以定义是在特定运算符周围放置空格还是缩进嵌套<code class="code">using</code>陈述。</p>        <aside class="prompt" rel="1cf1bfc3" id="61db96c6" data-type="tip" data-title="">            <p id="2a9ef751">您还可以使用<a href="Using_EditorConfig.html">EditorConfig</a>配置代码格式。</p>        </aside>        <section class="procedure-steps"><h3 id="e4c1e033">配置代码格式规则</h3><a name="step_open_options"></a><ol class="list _decimal"><li class="list__item" id="7ebe942c"><p>            <a name="open_options_raw"></a>选择<span class="menupath" data-skip-index="skip">ReSharper |</span>在主菜单或按<span class="menupath" data-skip-index="skip">选项</span> <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+R,,O</span></kbd> 。</p></li><li class="list__item" id="59fb2ab4"><p>使用<span class="menupath" data-skip-index="skip">代码编辑|常规格式样式</span>页面，以检查并配置适用于所有语言的选项。</p></li><li class="list__item" id="688a1248"><p>使用<span class="menupath" data-skip-index="skip">代码编辑| [语言] |格式样式</span>页面可配置特定于语言的格式首选项。在这些页面上，您可以使用底部的预览区域来查看ReSharper如何将特定首选项应用于代码。</p></li><li class="list__item" id="88ec2e7e"><p>请点击<a name="save_inline"></a>单击<span class="control">保存</span>以应用修改，并让ReSharper选择将修改<span class="control">保存</span>到何处，或使用“ <span class="control">保存到”</span>列表将修改保存到特定的设置层。有关更多信息，请参阅<a href="Sharing_Configuration_Options.html">管理和共享转发器设置</a> 。</p></li></ol></section>                    <p id="configure_format">作为浏览选项页面的替代方法，您可以选择一个代码块并仅配置适用于该代码块的格式设置规则。您将能够直接在编辑器中观察修改后的格式化程序设置如何影响所选块中的代码。</p>            <aside class="prompt" rel="configure_format" id="f2d27c05" data-type="note" data-title="">                <p id="7f7bb512">格式设置规则的上下文配置适用于C＃，C ++，JavaScript和TypeScript。</p>            </aside>            <section class="procedure-steps"><h3 id="9eb2c1b3">为所选代码配置格式设置规则</h3><ol class="list _decimal"><li class="list__item" id="8069692f"><p>在编辑器中，选择要重新格式化的代码块。</p></li><li class="list__item" id="46b76428"><p>按<kbd data-rs="Alt+Enter" data-vs="Alt+Enter">Alt+Enter</kbd>或单击插入符号左侧的<a href="Actions_List.html#indicators">动作指示器</a>以打开<a href="Actions_List.html#action_list">动作列表</a> 。</p></li><li class="list__item" id="97957e79"><p>选择<span class="menupath" data-skip-index="skip">格式|配置</span> 。</p></li><li class="list__item" id="719c9eaa"><p>在打开的“ <span class="control">配置格式”</span>对话框中，您将看到影响所选代码块的所有格式设置规则。代码块本身将被虚线框包围：</p><figure><img alt="配置选定代码的格式设置规则" title="配置选定代码的格式设置规则" src="/help/img/dotnet/2019.2/configure_format_dialog.png" id="ec1202f2" width="579" height="480"></figure>                <p></p></li><li class="list__item" id="70054a75"><p>更改格式规则时，您将看到它们如何影响所选块中的代码。</p></li><li class="list__item" id="a1ea56e2"><p>请点击<a name="save_inline"></a>单击<span class="control">保存</span>以应用修改，并让ReSharper选择将修改<span class="control">保存</span>到何处，或使用“ <span class="control">保存到”</span>列表将修改保存到特定的设置层。有关更多信息，请参阅<a href="Sharing_Configuration_Options.html">管理和共享转发器设置</a> 。</p></li><li class="list__item" id="5fa0282a"><p>请注意，您还可以通过在“ <span class="control">保存到”</span>列表中选择<span class="control">.editorconfig</span>来选择<a href="Using_EditorConfig.html#exporting-code-style-settings-to-editorconfig">将配置的格式设置规则导出到EditorConfig</a> 。</p></li><li class="list__item" id="cdfccefe"><p>（可选）您可以单击<a name="save_as_comments"></a> <span class="control">另存为评论</span> 。这样，您的修改将被保存<a href="#using-comments-to-configure-formatter">为</a>选定块之前和之后的<a href="#using-comments-to-configure-formatter">注释</a> 。这使您可以在本地覆盖所需的格式化程序规则，而无需修改任何设置。</p></li><li class="list__item" id="34db1b80"><p>ReSharper将关闭对话框并重新格式化代码块。</p></li></ol></section>            </div>        <div class="chapter"><h2 id="formatting-rules-from-existing-code" data-toc="editing.codeReformatting#formatting-rules-from-existing-code">使用现有代码中的格式设置规则</h2>        <p id="f695fb79">            <a name="auto_format_intro"></a>调整单个格式首选项的另一种方法是从现有代码示例中学习格式规则，该代码示例可以是选定的块，当前文件，一组文件，一个或多个项目或整个解决方案。ReSharper将分析选定的样本并列出与当前设置不同的格式规则。然后，您将能够查看检测到的规则，根据需要对其进行更改，并将其保存到所需的<a href="Sharing_Configuration_Options.html">设置层</a> 。</p>        <aside class="prompt" rel="f695fb79" id="72c47f3f" data-type="note" data-title="">            <p id="797ed2a0">格式化规则的检测适用于C＃和C ++。</p>        </aside>        <section class="procedure-steps"><h3 id="058ae5ad">从现有代码中学习格式化规则</h3><a name="step_select_scope"></a><ol class="list _decimal"><li class="list__item" id="c3c36dcd">            <p id="a4923eca">选择您要分析格式的范围：</p>            <ul class="list _ul"><li class="list__item" id="939eb88f"><p>在编辑器中进行选择，以分析选择中的格式。</p></li><li class="list__item" id="12dd44f4"><p>将插入号设置在文件中的任何位置以分析文件中的格式。</p></li><li class="list__item" id="a785b397"><p>在<span class="control">解决方案资源管理器中</span>选择一个或多个项目，以分析这些项目及其子项目下文件的格式。</p></li></ul>        </li><li class="list__item" id="93e5eb4a">                <p id="8373bf6d">请执行以下任一操作：</p>                <ul class="list _ul"><li class="list__item" id="6f0add2d"><p>选择<span class="menupath" data-skip-index="skip">ReSharper |编辑</span>在主菜单中<span class="menupath" data-skip-index="skip">检测格式设置</span> 。</p></li><li class="list__item" id="e305f1e4"><p>右键单击并在上下文菜单中选择“ <span class="menupath" data-skip-index="skip">检测格式设置”</span> 。</p></li><li class="list__item" id="57f65a27"><p>如果代码示例是一个选择，请按<kbd data-rs="Alt+Enter" data-vs="Alt+Enter">Alt+Enter</kbd>然后选择<span class="menupath" data-skip-index="skip">格式选择|检测格式设置</span> 。</p></li></ul>            </li><li class="list__item" id="64a4e1a7"><p>查看与您当前设置不同的规则：</p><figure><img alt="ReSharper：使用现有代码中的格式设置规则" title="ReSharper：使用现有代码中的格式设置规则" src="/help/img/dotnet/2019.2/detect_formatting_rules.png" id="b9812a39" width="506" height="335"></figure>            <p></p></li><li class="list__item" id="1a595cba"><p>请点击<a name="save_inline"></a>单击<span class="control">保存</span>以应用修改，并让ReSharper选择将修改<span class="control">保存</span>到何处，或使用“ <span class="control">保存到”</span>列表将修改保存到特定的设置层。有关更多信息，请参阅<a href="Sharing_Configuration_Options.html">管理和共享转发器设置</a> 。</p></li><li class="list__item" id="1a820ca2"><p>如果代码示例是一个选择，则可以选择单击<a name="save_as_comments"></a> <span class="control">另存为评论</span> 。这样，您的修改将被保存<a href="#using-comments-to-configure-formatter">为</a>选定块之前和之后的<a href="#using-comments-to-configure-formatter">注释</a> 。这使您可以在本地覆盖所需的格式化程序规则，而无需修改任何设置。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="using-comments-to-configure-formatter" data-toc="editing.codeReformatting#using-comments-to-configure-formatter">使用注释来配置格式化程序</h2>        <p id="0e40179f">ReSharper允许您偏离配置的格式规则，而无需实际更改规则。您甚至可以在代码的某些部分完全禁用格式化程序。</p>        <aside class="prompt" rel="0e40179f" id="4d25ffd6" data-type="note" data-title="">            <p id="ffb94382">您可以使用C＃，C ++，JavaScript，TypeScript，HTML和Protobuf中的注释来配置格式化程序。</p>        </aside>        <p id="ba1ce1a8">要禁用格式化程序，请使用以下注释：</p>        <ul class="list _ul"><li class="list__item" id="ca43df81"><p>                <code class="code">// @formatter:off</code> —在此行之后禁用格式化程序</p></li><li class="list__item" id="598d8b8c"><p>                <code class="code">// @formatter:on</code> —在此行之后启用格式化程序</p></li></ul>        <p id="fe4448a3">如果禁用格式化程序太多，则可以用注释更改任何单独的格式化规则。</p>        <section class="procedure-steps"><h3 id="ebc08249">更改带有注释的单个格式设置规则</h3><ol class="list _decimal"><li class="list__item" id="31248882"><p>查找您要调整的格式设置规则的名称。您可以在ReSharper选项（ <span class="menupath" data-skip-index="skip">“代码编辑| [语言] |格式样式”</span> ）中查找它，也可以选择要应用所需规则的代码块，然后按<kbd data-rs="Alt+Enter" data-vs="Alt+Enter">Alt+Enter</kbd> ，然后选择<span class="control">格式选择|配置</span> 。在打开的对话框中，您可以研究影响选择的所有规则，甚至更改它们以查看更改的实时预览。在此对话框中，您也可以单击“ <span class="control">另存为注释”</span> ，ReSharper将为所有修改后的规则生成必要的注释。</p></li><li class="list__item" id="dc20aa36"><p>当您知道规则的名称时，可以在<a href="EditorConfig_Index.html">EditorConfig属性</a>的<a href="EditorConfig_Index.html">Index中</a>查找其ID-在浏览器中使用搜索。例如，如果要查找在分号前触发空格的规则，请在分号<span class="emphasis">前</span>搜索， <span class="emphasis">然后</span>找到ID： <code class="code">space_before_semicolon</code> 。</p></li><li class="list__item" id="2856b52f"><p>在索引网页上找到规则的ID时，单击描述链接以了解该规则允许使用哪些值。以下示例<code class="code">space_before_semicolon</code> ，它<a href="EditorConfig_CSHARP_SpacesPageSchema.html#resharper_csharp_space_before_semicolon">可以接受</a> <code class="code">true</code>要么<code class="code">false</code> 。</p></li><li class="list__item" id="e3036a8a"><p>在要更改规则的代码之前添加以下注释：<br>                <code class="code">// @formatter:<rule_ID> <value></code> ，例如，要在分号前启用空格，请添加<br>                <code class="code">// @formatter:space_before_semicolon true</code> 。</p></li><li class="list__item" id="a7b574e8"><p>规则的新值将一直应用到文件末尾。如果要返回到选项中配置的值，请添加以下注释：<br>                <code class="code">// @formatter:<rule_ID> restore</code> ， 例如，<br>                <code class="code">// @formatter:space_before_semicolon restore</code> 。</p></li></ol></section>    </div>        <div class="chapter"><h2 id="storing_and_sharing" data-toc="editing.codeReformatting#storing_and_sharing">存储和共享格式设置规则</h2>        <a name="shared_settings"></a>                <p id="a36e46df">您的代码格式设置首选项是使用<a href="Sharing_Configuration_Options.html">基于图层的设置</a>机制保存的。除其他外，此机制使您可以针对不同的解决方案维护不同的首选项，并将这些首选项保持在VCS下，并自动与团队成员共享。</p>                            <p id="d8de4ac4">ReSharper还支持在<a href="Using_EditorConfig.html">EditorConfig中</a>为所有语言定义的格式设置， <a href="Using_EditorConfig.html">并</a>为C ++，JavaScript和TypeScript提供<a href="Using_Clang_Format.html">Clang-Format</a> 。这些设置可以存储在解决方案层次结构不同级别上的<span class="filepath">.editorconfig</span> ， <span class="filepath">.clang格式</span>或<span class="filepath">_clang格式的</span>文件中。这些文件通常放在VCS下，以便在那里定义的设置在项目团队之间共享。<br>ReSharper允许您使用EditorConfig定义ReSharper设置（在“ <span class="control">选项”</span>对话框中）可用的任何格式设置。您可以在<a href="EditorConfig_Properties.html">EditorConfig参考中</a>找到支持的EditorConfig属性的名称和描述。<br>至于Clang-Format，ReSharper将仅应用<a href="Using_Clang_Format.html#supported_options">支持的Clang-Format选项</a> 。</p>        <p id="91c5a23e">重要的是要注意， <span class="filepath">.editorconfig</span>文件中定义的任何格式设置属性都将覆盖该<span class="filepath">.editorconfig</span>文件适用范围内的ReSharper设置中定义的相同属性。用Clang-Format定义的格式设置属性将覆盖ReSharper设置和EditorConfig设置。</p>        <p id="d9a6bbc3">共享格式选项时要知道的另一件事是缩进样式（制表符/空格）和大小默认情况下是从Visual Studio选项中获取的。如果要共享特定语言的这些首选项，请清除“ <span class="menupath" data-skip-index="skip">代码编辑” |</span> “ <span class="control">使用Visual Studio中的缩进样式和大小”</span>复选框。 <span class="menupath" data-skip-index="skip">[语言] |格式样式|</span> ReSharper选项的“选项<span class="menupath" data-skip-index="skip">卡和缩进”</span>页面，并将更改保存到共享设置层。</p>    </div>    <a name="supported_in"></a>        <a name="supported_in_csharp"></a>            <p id="6ca46aac">以下语言和技术<a href="Introduction__Feature_Map.html">支持</a>此功能：</p>            <div class="table-wrapper"><table class=" wide" width="100%" id="737daa55"><thead><tr id="52470979" class="ijRowHead"><th id="8660015f">                                <a href="ReSharper_by_Language__CSharp.html"><img alt="语言：C＃" title="语言：C＃" src="/help/img/dotnet/2019.2/ThemedIcon.Csharp.Print.[Gray].png" id="6cfdd596" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="59e6f58f">                                <a href="ReSharper_by_Language__Visual_Basic.html"><img alt="语言：VB.NET" title="语言：VB.NET" src="/help/img/dotnet/2019.2/ThemedIcon.Vbasic.Print.[Gray].png" id="4b93087e" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="e69276df">                                <a href="ReSharper_by_Language_CPP.html"><img alt="语言：C ++" title="语言：C ++" src="/help/img/dotnet/2019.2/ThemedIcon.CppSource.Print.[SymbolsVs11Gray].png" id="88119832" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="196c4159">                                <a href="ReSharper_by_Language__HTML.html"><img alt="语言：HTML" title="语言：HTML" src="/help/img/dotnet/2019.2/ThemedIcon.Html.Print.[Gray].png" id="b4ecc0bd" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="5bcc3e75">                                <a href="Web_Development__Index.html"><img alt="语言：ASP.NET" title="语言：ASP.NET" src="/help/img/dotnet/2019.2/ThemedIcon.AspNet.Print.[Gray].png" id="db48032b" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="1cb63fe6">                                <a href="Web_Development__ASP.NET_MVC.html"><img alt="语言：剃刀" title="语言：剃刀" src="/help/img/dotnet/2019.2/ThemedIcon.Razor.Print.[Gray].png" id="cae41407" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="54532b3a">                                <a href="ReSharper_by_Language__JavaScript.html"><img alt="语言：JavaScript" title="语言：JavaScript" src="/help/img/dotnet/2019.2/ThemedIcon.Js.Print.[Gray].png" id="fb3aea3b" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="31c4dba3">                                <a href="ReSharper_by_Language__TypeScript.html"><img alt="语言：TypeScript" title="语言：TypeScript" src="/help/img/dotnet/2019.2/ThemedIcon.TsOptionPage.Print.[Gray].png" id="812bb3a9" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="381b8160">                                <a href="ReSharper_by_Language__CSS.html"><img alt="语言：CSS" title="语言：CSS" src="/help/img/dotnet/2019.2/ThemedIcon.Css.Print.[Gray].png" id="09eb6eda" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="710cc277">                                <a href="ReSharper_by_Language__XML.html"><img alt="语言：XML" title="语言：XML" src="/help/img/dotnet/2019.2/ThemedIcon.XmlFile.Print.[Gray].png" id="ef04fa2b" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="d400a0cf">                                <a href="Languages_XAML.html"><img alt="语言：XAML" title="语言：XAML" src="/help/img/dotnet/2019.2/ThemedIcon.Xaml.Print.[Gray].png" id="56211335" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="e9d64da4">                                <a href="Resources__Index.html"><img alt="语言：Resx" title="语言：Resx" src="/help/img/dotnet/2019.2/ThemedIcon.Localization.Print.[Gray].png" id="ce8dbf4e" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="b0bb05e1">                                <a href="ReSharper_by_Language__MSBuild.html"><img alt="语言：构建脚本" title="语言：构建脚本" src="/help/img/dotnet/2019.2/ThemedIcon.BuildScripts.Print.[Gray].png" id="cc4dc82b" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="da35c377">                                <a href="ReSharper_by_Language_Protobuf.html"><img alt="语言：Protobuf" title="语言：Protobuf" src="/help/img/dotnet/2019.2/ThemedIcon.ProtobufOptionPage.Print.[Gray].png" id="41ce6641" width="25" height="25" class="inline-icon-25"></a>                            </th><th id="ee8635c1">                                <a href="ReSharper_by_Language_JSON.html"><img alt="语言：JSON" title="语言：JSON" src="/help/img/dotnet/2019.2/ThemedIcon.Json.Print.[Gray].png" id="06b04fc8" width="25" height="25" class="inline-icon-25"></a>                            </th></tr></thead><tbody><tr id="f770009b" class="ijRowOdd"><td id="6662c678">            <img alt="功能可用" title="功能可用" src="/help/img/dotnet/2019.2/check.svg" id="45128210" width="17" height="12" class="inline-icon-17">                    </td><td id="d9706510">            <img alt="功能可用" title="功能可用" src="/help/img/dotnet/2019.2/check.svg" id="18973409" width="17" height="12" class="inline-icon-17">                    </td><td id="96e69701">            <img alt="功能可用" title="功能可用" src="/help/img/dotnet/2019.2/check.svg" id="2b996721" width="17" height="12" class="inline-icon-17">                    </td><td id="fb5bc93b">            <img alt="功能可用" title="功能可用" src="/help/img/dotnet/2019.2/check.svg" id="7b268be8" width="17" height="12" class="inline-icon-17">                    </td><td id="f8fb4710">            <img alt="功能可用" title="功能可用" src="/help/img/dotnet/2019.2/check.svg" id="54750219" width="17" height="12" class="inline-icon-17">                    </td><td id="46a4ffc0">            <img alt="功能可用" title="功能可用" src="/help/img/dotnet/2019.2/check.svg" id="158f074b" width="17" height="12" class="inline-icon-17">                    </td><td id="050b6b91">            <img alt="功能可用" title="功能可用" src="/help/img/dotnet/2019.2/check.svg" id="8641ff90" width="17" height="12" class="inline-icon-17">                    </td><td id="b89c570a">            <img alt="功能可用" title="功能可用" src="/help/img/dotnet/2019.2/check.svg" id="63ab311a" width="17" height="12" class="inline-icon-17">                    </td><td id="01a6f437">            <img alt="功能可用" title="功能可用" src="/help/img/dotnet/2019.2/check.svg" id="d16c1d93" width="17" height="12" class="inline-icon-17">                    </td><td id="fca0fc5d">            <img alt="功能可用" title="功能可用" src="/help/img/dotnet/2019.2/check.svg" id="89d6de56" width="17" height="12" class="inline-icon-17">                    </td><td id="29caadc6">            <img alt="功能可用" title="功能可用" src="/help/img/dotnet/2019.2/check.svg" id="0c57c2f8" width="17" height="12" class="inline-icon-17">                    </td><td id="2f620632">            <img alt="功能可用" title="功能可用" src="/help/img/dotnet/2019.2/check.svg" id="4fc495a5" width="17" height="12" class="inline-icon-17">                    </td><td id="84ced1b4">            <img alt="功能可用" title="功能可用" src="/help/img/dotnet/2019.2/check.svg" id="0e76d19d" width="17" height="12" class="inline-icon-17">                    </td><td id="2810de43">            <img alt="功能可用" title="功能可用" src="/help/img/dotnet/2019.2/check.svg" id="666162b1" width="17" height="12" class="inline-icon-17">                    </td><td id="2b97a690">            <img alt="功能可用" title="功能可用" src="/help/img/dotnet/2019.2/check.svg" id="513ec803" width="17" height="12" class="inline-icon-17">                    </td></tr></tbody></table></div>                <p id="56523a8d">此处给出的说明和示例解决了C＃中该功能的使用。有关特定于其他语言的详细信息，请参阅“ <a href="ReSharper_by_Language__Index.html">按语言划分的ReSharper”</a>部分中的相应主题。</p>        <a name="style_seealso"></a>            <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月18日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Code_Formatting_Style.html">格式化和重新格式化代码</a> <a class="navigation-links__next" href="Indentation_Style.html">缩进样式</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>