<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Clang-Tidy集成-帮助|帮助锐化器</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Clang_Tidy_Integration" data-article-props="
                {
                
            " seeals=":[=" titl=":=" how="" to=",=" link=":=" ur=":" using_clang_format.htm="," tex=":" using="" clang-forma="}=" ="" data-disqus-id="Clang_Tidy_Integration_10"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索ReSharper帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>ReSharper 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="rs" data-group="secondary">ReSharper 2.x / IntelliJ IDEA</option><option value="vs" data-group="primary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Clang_Tidy_Integration.xml" data-toc="Clang_Tidy_Integration">Clang-Tidy整合</h1>    <a name="cpp_support_note"></a>        <aside class="prompt" rel="Clang_Tidy_Integration.xml" id="6d842cd0" data-type="note" data-title="">            <p id="fceede43">                <a name="cpp_products"></a> <a href="/resharper-cpp/" rel="noopener noreferrer" data-external="true" target="_blank">ReSharper C ++</a>提供了C ++支持， <a href="/resharper-cpp/" rel="noopener noreferrer" data-external="true" target="_blank">ReSharper C ++</a>是一种专用产品，可以单独安装，也可以与ReSharper或<a href="/dotnet/" rel="noopener noreferrer" data-external="true" target="_blank">ReSharper Ultimate</a>并排安装。</p>        </aside>        <p id="dbf5fd3c">        <a href="https://clang.llvm.org/extra/clang-tidy/" rel="noopener noreferrer" data-external="true" target="_blank">Clang-Tidy</a>是基于流行的Clang编译器的功能强大的开源代码分析工具。它带有大量的代码检查和针对典型编程错误的修复程序。</p>    <aside class="prompt" rel="dbf5fd3c" id="8475f95b" data-type="tip" data-title=""><p>默认情况下，启用Clang-Tidy集成，但您可以在以下位置禁用和配置它<a name="the_options_page"></a> <span class="menupath" data-skip-index="skip">代码编辑| C ++ |的Clang-Tidy</span>页面<a name="product_settings"></a> ReSharper选项（ <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+R,,O</span></kbd> ）。</p></aside>    <p id="7300f529">ReSharper提供了与Clang-Tidy的无缝集成。这意味着，当您编辑文件时，ReSharper会在后台作为单独的过程在其上运行Clang-Tidy，同时显示检查结果以及其他<a href="Code_Analysis__Code_Inspections.html">ReSharper的检查</a> 。通过将当前文档的文本保存到临时文件中并指示Clang-Tidy使用它而不是磁盘版本，透明地处理未保存的文件。</p>    <div class="chapter"><h2 id="clang-tidy-inspections" data-toc="Clang_Tidy_Integration#clang-tidy-inspections">lang整洁检查</h2>        <p id="7fe8ade8">为了区分Clang-Tidy支票和ReSharper的支票，您可以在支票消息的方括号中查看支票的名称：</p>        <figure><img alt="ReSharper中的Clang-Tidy检查" title="ReSharper中的Clang-Tidy检查" src="/help/img/dotnet/2019.2/clang_tidy_inspection.png" id="b4afe605" width="687" height="225"></figure>        <p id="3e3c6d98">除了<a href="Reference__Code_Inspections_CPP.html#ClangTidy">通过Clang-Tidy检查</a>进行<a href="Reference__Code_Inspections_CPP.html#ClangTidy">诊断</a>之外，ReSharper还<a href="Reference__Code_Inspections_CPP.html#ClangStaticAnalyzer">通过Clang静态分析器</a>发布<a href="Reference__Code_Inspections_CPP.html#ClangStaticAnalyzer">诊断，</a>并<a href="Reference__Code_Inspections_CPP.html#Clang">提供Clang编译器本身提供的警告</a> 。它们都具有相应的可<a href="Code_Analysis__Code_Inspections.html#severity">配置严重性级别</a> ，可以对其进行<a href="Code_Analysis__Configuring_Warnings.html">调整以满足您的需求</a> 。</p>        <p id="6caaf08b">默认情况下，某些Clang-Tidy检查会重复检查ReSharper的内置检查。此外， <a href="Reference__Code_Inspections_CPP.html#ClangStaticAnalyzer">所有静态分析器检查</a>均被禁用，因为启用它们会大大降低Clang-Tidy的速度。</p>        <p id="386e392d">与内置检查一样，您可以使用检查上下文菜单<a href="Code_Analysis__Configuring_Warnings.html#change_severity">快速更改Clang-Tidy检查的严重性</a> ，或<a href="Code_Analysis__Configuring_Warnings.html#suppress">通过注释</a>来<a href="Code_Analysis__Configuring_Warnings.html#suppress">抑制它</a> 。还有一个附加操作可打开在线文档页面以进行特定检查。</p>        <figure><img alt="ReSharper：Clang-Tidy检查菜单" title="ReSharper：Clang-Tidy检查菜单" src="/help/img/dotnet/2019.2/clang_tidy_inspection_menu.png" id="28647f28" width="740" height="242"></figure>    </div>    <div class="chapter"><h2 id="clang-tidy-fixes" data-toc="Clang_Tidy_Integration#clang-tidy-fixes">Clang-Tidy修复</h2>        <p id="026834cb">ReSharper允许您将Clang-Tidy提供的修补程序与其自身的内置<a href="Code_Analysis__Quick-Fixes.html">快速修补程序</a>类似地应用。与其他批量修补程序一样，Clang-Tidy修补程序可以单独应用，也可以<a href="Code_Analysis__Fix_in_Scope.html">在特定范围内</a> （文件，文件夹，项目或解决方案）应用。</p>        <figure id="81b9c2a3" width="550" data-theme="light"><img class="js-gif" src="/help/img/dotnet/2019.2/clang_tidy_fix.png" width="550" data-gif-src="/help/img/dotnet/2019.2/clang_tidy_fix.animated.gif" style="width:550px"></figure>        <p id="23f80ef2">默认情况下，ReSharper将<a href="Enforcing_Code_Formatting_Rules.html">重新格式化</a>由Clang-Tidy修复程序更改的代码，以维护代码样式。<span class="control">在应用Clang-Tidy fix-its</span>设置<span class="control">后，</span>可以通过<span class="control">重新格式化更改的代码</span>禁用此行为<a name="the_options_page"></a> <span class="menupath" data-skip-index="skip">代码编辑| C ++ |的Clang-Tidy</span>页面<a name="product_settings"></a> ReSharper选项（ <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+R,,O</span></kbd> ）。禁用此设置将加快Clang-Tidy修复程序的执行速度。</p>    </div>    <div class="chapter"><h2 id="applying-clang-tidy-fixes-with-code-cleanup" data-toc="Clang_Tidy_Integration#applying-clang-tidy-fixes-with-code-cleanup">通过代码清理应用Clang-Tidy修复程序</h2>        <p id="5d54858e">Clang-Tidy修复程序也可以与<a href="Code_Cleanup__Index.html">代码清理</a>一起应用。内置代码清除配置文件不包括Clang-Tidy阶段，因此要启用它，您需要<a href="Code_Cleanup__Index.html#custom_profile">创建一个新的自定义配置文件</a>并选择Clang-Tidy检查，当您使用此配置文件<a href="Code_Cleanup__Index.html#running">运行代码清除</a>时将执行检查。</p>        <figure><img alt="ReSharper：通过代码清理应用Clang-Tidy修复程序" title="ReSharper：通过代码清理应用Clang-Tidy修复程序" src="/help/img/dotnet/2019.2/clang_tidy_cleanup.png" id="74eb5c96" width="560" height="393"></figure>        <p id="clang_cleanup_details">即使关闭了相应的检查功能，也会应用所选的修复程序<a name="the_options_page"></a> <span class="menupath" data-skip-index="skip">代码检查|的检查严重性</span>页面<a name="product_settings"></a> ReSharper选项（ <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+R,,O</span></kbd> ）。一次启用太多检查时要小心-代码清理仅对给定文件运行Clang-Tidy一次，因此，如果多个修复程序接触同一代码块，则更改可能会相互冲突。</p>    </div>    <div class="chapter"><h2 id="clang-tidy-config" data-toc="Clang_Tidy_Integration#clang-tidy-config">配置Clang-Tidy</h2>        <p id="4136552e">ReSharper不会编写自己的Clang-Tidy配置，因此可以选择用户提供的配置。Clang-Tidy尝试从一个文件中读取每个源文件的配置<code class="code">.clang-tidy</code>文件位于源文件的最接近的父目录中。这里的源文件（与其他ReSharper检查一样）是<code class="code">.cpp</code>文件本身（如果运行分析），或者随机<code class="code">.cpp</code>对头文件执行分析时，包含头的文件。或者，您可以在以下位置使用<span class="control">Clang-Tidy配置</span>设置<a name="the_options_page"></a> <span class="menupath" data-skip-index="skip">代码编辑| C ++ |的Clang-Tidy</span>页面<a name="product_settings"></a> ReSharper选项（ <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+R,,O</span></kbd> ）通过传递具有自定义配置的字符串到Clang-Tidy <code class="code">-config</code>命令行选项。</p>        <p id="9e7c0e4c">的<code class="code">-checks</code>命令行选项用于将启用的检查列表传递给Clang-Tidy，然后将其附加到从Clang-Tidy配置读取的checks选项的值。构造<code class="code">-checks</code>参数，ReSharper会采用“ <span class="control">启用/禁用的Clang-Tidy检查列表”</span>设置的值<a name="the_options_page"></a> <span class="menupath" data-skip-index="skip">代码编辑| C ++ |的Clang-Tidy</span>页面<a name="product_settings"></a> ReSharper选项（ <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+R,,O</span></kbd> ）并附加在“ <span class="menupath" data-skip-index="skip">代码检查” |“检查”中</span>关闭的检查名称。 <span class="menupath" data-skip-index="skip">检查严重性</span>选项页面。</p>        <p id="64e12d9e">            <a name="clang_binary"></a>默认情况下，ReSharper使用Clang-tidy 8的内置二进制文件。您可以使ReSharper使用任何其他Clang-tidy二进制文件（版本7或更高版本）。为此，请在“ <span class="control">使用外部clang-tidy</span> on”下指定其路径。 <a name="the_options_page"></a> <span class="menupath" data-skip-index="skip">代码编辑| C ++ |的Clang-Tidy</span>页面<a name="product_settings"></a> ReSharper选项（ <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+R,,O</span></kbd> ）。</p>        <p id="d45e48b6">如有必要，您还可以通过按禁用当前文档中的Clang-Tidy分析<kbd data-rs="Ctrl+Shift+Alt+9" data-vs="Ctrl+Shift+Alt+9">Ctrl+Shift+Alt+9</kbd>或通过<a href="Code_Analysis__Status_Indicator.html#status_indicator">状态指示器</a>上下文菜单中的“ <span class="control">启用Clang-Tidy分析”</span>切换。</p>    </div>    <div class="chapter"><h2 id="limitations-of-clang-tidy-integration" data-toc="Clang_Tidy_Integration#limitations-of-clang-tidy-integration">Clang-Tidy集成的局限性</h2>        <ul class="list _ul"><li class="list__item" id="bca6a690"><p>Clang无法读取使用UTF-16或UTF-32编码的文件，因此Clang-Tidy目前不支持这些文件。</p></li><li class="list__item" id="f58f6c82"><p>有时Clang-Tidy可能会在您的代码上崩溃，并且Windows将显示“进程已停止工作”消息。在这种情况下，请针对当前的解决方案禁用Clang-Tidy集成<a name="the_options_page"></a> <span class="menupath" data-skip-index="skip">代码编辑| C ++ |的Clang-Tidy</span>页面<a name="product_settings"></a> ReSharper选项（ <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+R,,O</span></kbd> ）。</p></li><li class="list__item" id="8523f9ae"><p>如果您使用的是自定义的Clang-tidy二进制文件（ <span class="control">请</span>在<a name="the_options_page"></a> <span class="menupath" data-skip-index="skip">代码编辑| C ++ |的Clang-Tidy</span>页面<a name="product_settings"></a> ReSharper选项（ <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+R,,O</span></kbd> ）），则只能使用版本7或更高版本。</p></li></ul>    </div>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月18日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__next" href="Using_Clang_Format.html">使用Clang格式的</a> <a class="navigation-links__prev" href="Code_Style_Assistance_in_CPP.html">代码样式帮助</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>