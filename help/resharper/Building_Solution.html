<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>建筑解决方案-帮助|锐化器</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Building_Solution" data-article-props="
                {
                
            " seeals=":[=" titl=":=" external="" link=":=" ur=":" http:="" ="" blog.jetbrains.com="" dotnet="" 2015="" 10="" 15="" introducing-resharper-build="" ="," tex=":" resharper="" ultimate="" blog:="" introducing="" buil="}=" }="" ]}="" ]="" building_solution_1=""><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索ReSharper帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>ReSharper 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="rs" data-group="secondary">ReSharper 2.x / IntelliJ IDEA</option><option value="vs" data-group="primary">视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Building_Solution.xml" data-toc="Building_Solution">建筑解决方案</h1>            <p id="a91a17d7">ReSharper允许您使用多个并行过程逐步构建解决方案。您可以使用ReSharper Build代替本机Visual Studio的构建管理。</p>    <p id="fca9ab17">请注意，ReSharper不会替代MSBuild-您的项目仍可正常构建。区别在于不需要重建的项目不会重建。</p>    <div class="chapter"><h2 id="starting" data-toc="Building_Solution#starting">开始ReSharper构建</h2>        <p id="025bf96a">默认情况下，ReSharper Build被禁用。要启用它，请执行以下一项操作：</p>        <ul class="list _ul"><li class="list__item" id="1a40f83c"><p>转到<span class="menupath" data-skip-index="skip">工具| ReSharper构建|</span> ReSharper选项的“ <span class="menupath" data-skip-index="skip">常规”</span>页面，然后在“ <span class="control">构建引擎”</span>部分中选择“ ReSharper构建”。</p></li><li class="list__item" id="30f11587"><p>打开“ <a href="Reference_Windows_ReSharper_Build.html">生成并运行”窗口</a> （ <span class="menupath" data-skip-index="skip">ReSharper | Windows | ReSharper Build</span> ），然后单击“ <span class="control">启用ReSharper生成”</span> 。</p></li></ul>        <aside class="prompt" rel="10358874" id="e19744b1" data-type="tip" data-title="">            <p id="6b6c2f39">ReSharper Build的启用/禁用状态保存在<a href="Sharing_Configuration_Options.html">分层设置中</a> ，因此您可以按解决方案使用它。</p>        </aside>        <p id="1cd7cf5e">启用ReSharper Build后，有几种方法可以构建您的解决方案：</p>        <ul class="list _ul"><li class="list__item" id="5622405f"><p>使用任何Visual Studio <span class="menupath" data-skip-index="skip">生成</span>命令-例如<span class="menupath" data-skip-index="skip">Build |建立解决方案</span> <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Ctrl+Shift+B</span></kbd> — ReSharper Build覆盖了所有这些命令和快捷方式。</p></li><li class="list__item" id="dde6ab38"><p>点击<span class="control">构建</span> <img alt="ThemedIcon SolBuilderDuoBuild屏幕呈灰色" title="ThemedIcon SolBuilderDuoBuild屏幕呈灰色" src="/help/img/dotnet/2019.2/ThemedIcon.SolBuilderDuoBuild.Screen.[Gray].png" id="c2c64c8d" width="16" height="16" class="inline-icon-16">或在<span class="control">ReSharper Build＆Run</span>窗口的工具栏上的下拉菜单中选择其他可用的构建命令。</p></li><li class="list__item" id="4f5faef3"><p>要构建，重建或清理特定项目，请在“ <a href="Reference_Windows_ReSharper_Build.html">构建和运行”窗口中</a>右键单击该项目，然后在上下文菜单中选择相应的命令。</p></li></ul>        <p id="1df434b7">            <a name="nuget_restorer_intro"></a> ReSharper还提供了自己的NuGet恢复器的实现，该实现可与所有Visual Studio版本一起使用。默认情况下，ReSharper确保在每次构建之前还原所有相关的NuGet软件包，但是您可以通过清除“ <span class="menupath" data-skip-index="skip">工具” |</span> “相应<span class="menupath" data-skip-index="skip">工具”</span>上的相应复选框来禁用它<span class="menupath" data-skip-index="skip">。建立</span> ReSharper选项的<span class="menupath" data-skip-index="skip">常规</span>页面。如果禁用了自动还原，则始终可以通过单击<span class="control">“还原NuGet软件包”</span>来手动运行它<img alt="ThemedIcon NuGet屏幕呈灰色" title="ThemedIcon NuGet屏幕呈灰色" src="/help/img/dotnet/2019.2/ThemedIcon.NuGet.Screen.[Gray].png" id="0524411f" width="16" height="16" class="inline-icon-16">在“ <a href="Reference_Windows_ReSharper_Build.html">构建和运行”窗口</a>的工具栏上。<br>如果此选项页上已启用，则NuGet恢复器会将日志写入输出。您还可以在“ <span class="menupath" data-skip-index="skip">工具” |“</span>配置”中配置日志消息级别并查看日志信息以进行还原。 ReSharper选项的<span class="menupath" data-skip-index="skip">NuGet Restorer</span>页面。</p>    </div>    <div class="chapter"><h2 id="process" data-toc="Building_Solution#process">建立过程</h2>        <a name="how_it_works"></a>            <p id="fd77ebb2">首次运行ReSharper Build时，它将根据您的<a href="#config">配置</a>使用多个并行进程来构建所有项目。所有构建管理都发生在过程外，因此Visual Studio在运行构建时仍会保持响应。</p>            <p id="14f2f74c">下次构建解决方案时，ReSharper只会构建更改了<a href="#supported-build-items">受支持的构建项目的项目</a> 。如果更改影响其他项目中使用的公共类型，则也会重新构建从属项目。</p>            <p id="00739b6c">不受更改影响的项目将被完全跳过，包括所有其他构建逻辑。如果要为跳过的项目执行<a href="https://docs.microsoft.com/en-us/visualstudio/ide/how-to-specify-build-events-csharp" rel="noopener noreferrer" data-external="true" target="_blank">构建前和构建后事件</a>和/或<a href="https://docs.microsoft.com/en-gb/visualstudio/msbuild/how-to-extend-the-visual-studio-build-process" rel="noopener noreferrer" data-external="true" target="_blank">BeforeBuild和AfterBuild MSBuild目标</a> ，请使用以下相应的复选框<a name="the_options_page"></a> <span class="menupath" data-skip-index="skip">工具| ReSharper构建|的一般</span>页面<a name="product_settings"></a> ReSharper选项（ <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+R,,O</span></kbd> ）。</p>            <p id="cdf10bec">ReSharper Build维护MSBuild任务，目标和项目的输入和输出的依存关系图，并有效地监视文件系统的更改。当您开始构建时，ReSharper Build已经知道时间戳是否是最新的，而无需调用MSBuild：如果时间戳是最新的，则将跳过该项目。</p>            <p id="18d68c47">默认情况下，ReSharper Build使用与Visual Studio设置中指定的MSBuild版本相同的MSBuild版本，并在6个进程中并行运行。如有必要，您可以显式指定MSBuild版本并更改以下进程的数量<a name="the_options_page"></a> <span class="menupath" data-skip-index="skip">工具| ReSharper构建|的一般</span>页面<a name="product_settings"></a> ReSharper选项（ <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+R,,O</span></kbd> ）。</p>                <p id="3009fc71">构建过程和摘要在“ <a href="Reference_Windows_ReSharper_Build.html">构建和运行”窗口</a>中可视化：</p>        <figure><img alt="ReSharper：“解决方案构建器”窗口" title="ReSharper：“解决方案构建器”窗口" src="/help/img/dotnet/2019.2/solution_builder_window.png" id="6aac1ea9" width="472" height="372"></figure>        <p id="662ce01b">解决方案的所有项目都在网格中可视化，每个项目都有特定的颜色。您也可以将鼠标悬停在项目上以显示说明状态的工具提示。颜色代表项目的构建状态：</p>        <ul class="list _ul"><li class="list__item" id="bb040199"><p>                <b id="68585c6c">深灰色</b> -项目已清理或从未构建。</p></li><li class="list__item" id="8af0ec8b"><p>                <b id="20f598f9">灰色</b> -由于以下两个原因之一而未构建项目：将其从解决方案构建中<a href="#exclude">排除</a> ，或者仅针对特定项目运行构建，并且不构建不相关的项目。</p></li><li class="list__item" id="912b3c61"><p>                <b id="159a446d">浅蓝色</b> -该项目是在上一次运行中构建的，没有任何更改。</p></li><li class="list__item" id="e8622158"><p>                <b id="e8fa78d8">蓝色</b> -项目是在上一次运行中构建的，没有任何更改；它引用的项目只有私有更改。</p></li><li class="list__item" id="65ed3a60"><p>                <b id="c2bfd87e">绿色</b> –项目已更改，或者一个从属项目进行了公共更改，然后在没有警告的情况下成功地对其进行了重建。</p></li><li class="list__item" id="583b5669"><p>                <b id="08112614">黄色</b> -项目已更改，或者一个从属项目进行了公共更改，然后成功警告重建。</p></li><li class="list__item" id="7a525451"><p>                <b id="64514fdb">红色</b> -项目已更改，或者从属项目之一进行了公共更改，因此项目构建失败。</p></li></ul>        <p id="b6218066">如果需要取消当前版本，请选择<span class="menupath" data-skip-index="skip">ReSharper |。建立</span>在主菜单中<span class="menupath" data-skip-index="skip">取消构建</span> 。</p>    </div>    <div class="chapter"><h2 id="build_results" data-toc="Building_Solution#build_results">分析构建结果</h2>        <p id="06885bcf">构建完成后，ReSharper会在“ <a href="Reference_Windows_Build_Results.html">构建结果”窗口中</a>显示构建错误（以及可选的警告）。</p>        <figure><img alt="对构建结果进行分组和排序" title="对构建结果进行分组和排序" src="/help/img/dotnet/2019.2/build_results.png" id="a9b8efda" width="638" height="322"></figure>        <p id="21fc3a62">默认情况下，仅在存在构建错误时才会显示结果。如有必要，可以使用“ <span class="menupath" data-skip-index="skip">工具” |</span> “ <span class="control">显示”中的“显示构建结果...”</span>选择器。 <span class="menupath" data-skip-index="skip">ReSharper构建|</span> ReSharper选项的<span class="menupath" data-skip-index="skip">常规</span>页面可显示带有警告的结果，始终显示或永远不显示结果。</p>        <p id="4188c600">在“ <span class="control">构建结果”</span>窗口中，您可以通过以下方式之一进一步研究构建输出：</p>        <ul class="list _ul"><li class="list__item" id="ede05032"><p>使用“ <span class="control">分组依据”</span>选择器中的多个选项之一，选择一种方便的方法将结果<span class="control">分组</span> 。</p></li><li class="list__item" id="2f7b4ec5"><p>如果存在构建错误，则仅这些错误出现在窗口中。如果您还想查看编译警告，请单击“ <span class="control">显示警告”</span> <img alt="ThemedIcon警告屏幕灰色" title="ThemedIcon警告屏幕灰色" src="/help/img/dotnet/2019.2/ThemedIcon.Warning.Screen.[Gray].png" id="aed06f69" width="16" height="16" class="inline-icon-16">在工具栏上。</p></li><li class="list__item" id="9ed8cbdd"><p>使用上<span class="control">一个</span> <img alt="ThemedIcon上萤幕灰色" title="ThemedIcon上萤幕灰色" src="/help/img/dotnet/2019.2/ThemedIcon.Up.Screen.[Gray].png" id="0629b985" width="16" height="16" class="inline-icon-16"> / <span class="control">下一个</span> <img alt="ThemedIcon萤幕下灰" title="ThemedIcon萤幕下灰" src="/help/img/dotnet/2019.2/ThemedIcon.Down.Screen.[Gray].png" id="fcc75925" width="16" height="16" class="inline-icon-16">按钮或<kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Shift+F8</span></kbd> / <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">F8</span></kbd>在构建消息之间导航的快捷方式。</p></li><li class="list__item" id="1b4dfc01"><p>要预览引发错误或警告的代码，请单击“ <span class="control">显示预览”。</span> <img alt="主题图标预览切换屏幕灰色" title="主题图标预览切换屏幕灰色" src="/help/img/dotnet/2019.2/ThemedIcon.PreviewToggle.Screen.[Gray].png" id="a55b6a4d" width="16" height="16" class="inline-icon-16">或按<kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Ctrl+P</span></kbd> 。在预览窗格（可以位于窗口的左侧或底部）中，用红色或蓝色花体突出显示错误和警告。</p></li><li class="list__item" id="3c95c87a"><p>双击任何错误或警告，以导航到编辑器中的相应代码行。</p></li></ul>    </div>    <div class="chapter"><h2 id="config" data-toc="Building_Solution#config">配置ReSharper构建</h2>        <p id="baad0bd6">您可以在<span class="menupath" data-skip-index="skip">ReSharper |</span>下的<span class="menupath" data-skip-index="skip">ReSharper</span>选项页面上配置ReSharper Build。 <span class="menupath" data-skip-index="skip">选项|工具| ReSharper构建</span> 。</p>        <p id="disable_a_feature">您可以通过清除以下位置上的<span class="control">ReSharper Build</span>复选框来禁用ReSharper解决方案构建器： <a name="the_options_page"></a> <span class="menupath" data-skip-index="skip">环境|的产品和功能</span>页面<a name="product_settings"></a> ReSharper选项（ <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+R,,O</span></kbd> ）。</p>        <aside class="prompt" rel="disable_a_feature" id="35939021" data-type="tip" data-title="">            <a name="shared_settings"></a>                <p id="6335ec5f">您的构建配置首选项是使用<a href="Sharing_Configuration_Options.html">基于图层的设置</a>机制保存的。除其他外，此机制使您可以针对不同的解决方案维护不同的首选项，并将这些首选项保持在VCS下，并自动与团队成员共享。</p>            </aside>        <div class="chapter"><h3 id="exclude">从构建中排除项目</h3>            <a name="chunk_exclude"></a>                <p id="3e2f4091">如果在构建解决方案时不需要构建某些项目，则可以排除它们以减少构建时间。为此，请转至<span class="menupath" data-skip-index="skip">工具| ReSharper构建|</span> ReSharper选项的<span class="menupath" data-skip-index="skip">启发式</span>页面，并标记您要在“ <span class="control">永不构建</span>的<span class="control">项目”</span>部分中排除的项目或解决方案文件夹。您可以使用本节中的搜索框来过滤解决方案树，以仅显示匹配项。</p>                <p id="439b409d">请注意，即使您在解决方案资源管理器中对这些项目调用<span class="control">Build</span>命令，您也将无法<span class="control">构建</span>它们。</p>                <p id="99981c6f">排除项目意味着即使源文件已过时或引用的项目具有公共API更改，也不会重建它。这非常剧烈，并且可能导致未捕获的编译错误，但对于暂时排除编译速度慢且未在当前开发任务中使用的项目很有用。这类似于在Visual Studio中卸载项目以使其无法编译，但是源文件仍可供ReSharper使用，以允许导航和重构。我们建议您先重新启用和重建，然后再提交源代码控制，或者使用<a href="Code_Analysis__Solution-Wide_Analysis.html">解决方案范围的分析</a>来显示您键入时的编译错误。</p>                        <aside class="prompt" rel="99981c6f" id="39fff3b5" data-type="tip" data-title="">                <p id="245abd37">您可以在<a href="Reference_Windows_ReSharper_Build.html">Build＆Run窗口中</a>右键单击该项目，然后在<span class="control">Build heuristic</span>下的上下文菜单中选择相应的项目，从而将项目添加到“始终构建”或“从不构建”列表。</p>            </aside>        </div>        <div class="chapter"><h3 id="forcing-specific-projects-to-build">强制建立特定项目</h3>            <a name="chunk_force"></a>                <p id="3385b6cd">如果ReSharper Build之前已成功构建，并且自此之后未进行任何更改，则不会构建项目。如果需要独立于某些项目而构建某些项目，则可以强制构建它们。为此，请在“ <span class="control">应始终</span>构建的<span class="control">项目”</span>部分中标记要强制构建的项目或解决方案文件夹。您可以使用本节中的搜索框来过滤解决方案树，以仅显示匹配项。</p>                <p id="d450a3ae">将项目标记为“始终构建”会告诉ReSharper Build永远不要将启发式方法应用于该项目，而是始终将其传递给MSBuild。这并不意味着将始终重建并重新编译该项目，而是意味着始终会调用MSBuild-MSBuild仍将检查时间戳记并可能执行增量构建。这对于具有ReSharper Build无法跟踪的自定义构建步骤的项目很有用（尽管最好将自定义构建步骤重写为支持<a href="#incremental_build">增量构建的</a>适当MSBuild目标。）</p>                    </div>        <div class="chapter"><h3 id="visualisation-settings">可视化设置</h3>            <p id="f0556e1e">默认情况下，当您开始ReSharper构建时，将弹出“ <a href="Reference_Windows_ReSharper_Build.html">构建和运行”窗口</a> ，并且Visual Studio状态栏中还会显示构建进度。如有必要，可以在“ <span class="menupath" data-skip-index="skip">工具” |“</span>配置”中配置此行为。 <span class="menupath" data-skip-index="skip">ReSharper构建|</span> ReSharper选项的<span class="menupath" data-skip-index="skip">常规</span>页面。</p>        </div>    </div>   <div class="chapter"><h2 id="supported-build-items" data-toc="Building_Solution#supported-build-items">支持的构建项目</h2>       <p id="78ed0c13">在评估先前生成的项目中的更改以确定是否对其进行重建时，ReSharper会检查最常见的<a href="https://docs.microsoft.com/en-us/visualstudio/msbuild/msbuild-items" rel="noopener noreferrer" data-external="true" target="_blank">MSBuild项目</a>类型的<a href="https://docs.microsoft.com/en-us/visualstudio/msbuild/msbuild-items" rel="noopener noreferrer" data-external="true" target="_blank">项目</a> ：</p>       <div class="code-block" data-lang="bash">“ ApplicationDefinition”，“ Page”，“ Compile”，“ Content”，“ EmbeddedResource”，“ Resource”，“ SplashScreen”，“ XamlAppDef”，“ EntityDeploy”，“ DesignDataWithDesignTimeCreatableTypes”，“ DesignData”</div>       <p id="28df0fed">类型的构建项目中的更改<code class="code">None</code>和上面未列出的其他类型默认情况下会被忽略。如果您的项目构建依赖于其他自定义构建项目类型，则应向这些类型的名称注册<code class="code">AvailableItemName</code>在<span class="filepath">.csproj</span> / <span class="filepath">.vbproj</span>文件中，例如：</p>       <div class="code-block" data-lang="markup">
           
           <itemgroup>
               <availableitemname include="CustomBuildItemType"></availableitemname>
               <custombuilditemtype include="SomeFileToProcess.abcd"></custombuilditemtype>
           </itemgroup>
           
       </div>   </div>    <div class="chapter"><h2 id="limitations" data-toc="Building_Solution#limitations">ReSharper Build支持的项目类型和限制</h2>        <p id="54864ea7">ReSharper Build支持大多数基于MSBuild的.NET项目类型和语言（C＃，VB.NET，F＃，C ++），包括.NET Core项目。但是，存在以下限制：</p>        <ul class="list _ul"><li class="list__item" id="2855da35"><p>                <span class="emphasis">非MSBuild项目</span> 。ReSharper Build无法用于非基于MSBuild的项目类型。这包括网站（基于文件夹的项目，而不是MVC Web应用程序），WinJS应用程序和DNX应用程序。如果您的解决方案中有这些类型的项目，则整个解决方案构建将退回到标准的MSBuild构建过程。</p></li><li class="list__item" id="644ea4f5">                <p id="57283450">                    <span class="emphasis">自定义构建步骤</span> 。通常，自定义构建步骤（包括C ++项目中的构建前和构建后步骤）等同于调用批处理文件，并执行多个命令行以将文件复制到输出目录中。就ReSharper Build而言，这是一个黑匣子-它不知道自定义构建步骤中发生了什么，因此无法跟踪输入和输出。此外，如果跳过该项目，构建步骤将无法运行，这可能会导致构建问题（这是默认情况下禁用ReSharper Build的主要原因）。</p>                <p id="incremental_build">但是，自定义MSBuild目标和任务将与ReSharper Build一起使用，只要自定义目标和任务支持<a href="https://msdn.microsoft.com/en-us/library/ms171483.aspx" rel="noopener noreferrer" data-external="true" target="_blank">增量构建</a> ，并带有可监视时间戳更改的输入和输出列表即可。强烈建议将天真的自定义构建步骤转换为自定义目标，以便通过ReSharper Build获得良好的效果。</p>                <p id="72a0d406">如果无法替换自定义生成步骤，则可以将该项目添加到应“始终生成”的项目列表中，而无需应用试探法，这意味着它们始终传递给MSBuild，并且将运行MSBuild的标准增量生成过程。可以在“ <span class="menupath" data-skip-index="skip">工具” |“</span>配置”中进行配置。 <span class="menupath" data-skip-index="skip">ReSharper构建|</span> ReSharper选项的<span class="menupath" data-skip-index="skip">启发式</span>页面。</p>            </li></ul>    </div>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月18日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__next" href="Run_Configurations.html">使用运行配置</a> <a class="navigation-links__prev" href="Finding_Exploring_and_Installing_NuGet_Packages.html">查找，浏览和安装NuGet软件包</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>