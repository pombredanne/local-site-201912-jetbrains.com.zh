<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Refactorings for C++ - Help | ReSharper</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Refactorings_for_CPP" data-article-props="&#xA;                {&#xA;                &#xA;            &#34;seeAlso&#34;:[&#xA;            &#xA;                {&#34;title&#34;: &#34;Concepts&#34;,&#xA;                 &#34;links&#34;: [&#xA;                &#xA;        {&#34;url&#34;:&#34;Refactorings__Index.html&#34;,&#34;text&#34;:&#34;Refactorings&#34;}&#xA;    ,&#xA;        {&#34;url&#34;:&#34;Main_Set_of_Refactorings.html&#34;,&#34;text&#34;:&#34;Main Set of Refactorings&#34;}&#xA;    ,&#xA;        {&#34;url&#34;:&#34;ReSharper_by_Language_CPP.html&#34;,&#34;text&#34;:&#34;ReSharper by Language: C++&#34;}&#xA;    &#xA;                    ]},&#xA;                {&#34;title&#34;: &#34;Reference&#34;,&#xA;                 &#34;links&#34;: [&#xA;                &#xA;        {&#34;url&#34;:&#34;Reference__Options__Languages__CPP__Context_Actions.html&#34;,&#34;text&#34;:&#34;Context Actions for C++&#34;}&#xA;    &#xA;                    ]}&#xA;            ]&#xA;        &#xA;                }&#xA;            " data-disqus-id="Refactorings_for_CPP_10"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search ReSharper Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>ReSharper 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="secondary" value="rs">ReSharper 2.x/IntelliJ IDEA</option><option data-group="primary" value="vs">Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 data-toc="Refactorings_for_CPP" id="Refactorings_for_CPP.xml">Refactorings for C++</h1>        <a name="cpp_support_note"></a>        <aside data-type="note" class="prompt" data-title="" rel="Refactorings_for_CPP.xml" id="02adc996">            <p id="afc3157d">                <a name="cpp_products"></a>C++ support is available either with                        <a href="https://www.jetbrains.com/resharper-cpp/" data-external="true" target="_blank" rel="noopener noreferrer">ReSharper C++</a>                        — a dedicated product that you can install                        separately or side by side with ReSharper, or with                        <a href="https://www.jetbrains.com/dotnet/" data-external="true" target="_blank" rel="noopener noreferrer">ReSharper Ultimate</a>.                                </p>        </aside>        <a name="tip_micro_refactorings"></a>                <aside data-type="tip" class="prompt" data-title="" rel="Refactorings_for_CPP.xml" id="ccabe36a">            <p id="c38e3334">                In addition to refactorings, ReSharper provides                <a href="Reference__Options__Languages__CPP__Context_Actions.html">a number of smaller local code transformations</a>                available with                <a href="Coding_Assistance__Context_Actions.html">Context Actions</a>.            </p>        </aside>        <a name="refactorings"></a>        <p id="503119c7">            ReSharper provides the following refactorings for C++:        </p>        <ul class="list" data-skip-index="skip"><li class="list__item"><a href="#change_signature">Change Signature</a></li><li class="list__item"><a href="#extr_method">Extract Method</a></li><li class="list__item"><a href="#intro_field">Introduce Field</a></li><li class="list__item"><a href="#namespace_alias">Introduce Namespace Alias</a></li><li class="list__item"><a href="#introduce_var">Introduce Variable</a></li><li class="list__item"><a href="#inline_var">Inline Variable</a></li><li class="list__item"><a href="#rename">Rename</a></li><li class="list__item"><a href="#typedef">Introduce/Inline typedef</a></li></ul>        <a name="info"></a>        <section class="procedure-steps"><h3 id="45cd855c">To perform a refactoring</h3><ol class="list _decimal"><li class="list__item" id="825a36ae"><p>                Set your caret at a symbol, select a code fragment that you want to refactor,                or select an item in a tool window.            </p></li><li class="list__item" id="4e02b8e5">                <p id="0f538bb8">                    Do one of the following:                </p>                <ul class="list _bullet"><li class="list__item" id="a965dec1"><p>                        In the main menu, choose                        <span data-skip-index="skip" class="menupath">ReSharper | Refactor </span>, and then select a desired refactoring.                        The list of refactorings available in this menu depends on the current context.                        If ReSharper cannot suggest any refactorings for the context, the entire menu is disabled.                    </p></li><li class="list__item" id="13fd7539"><p>                        In the editor,                        <a href="Reference__Windows__File_Structure_Window.html">File Structure window</a>,                        or other ReSharper window, right-click the item you want to transform, choose                        <span class="control">Refactor</span>                        from the context menu, and then select the required refactoring.&nbsp;&nbsp;                    </p></li><li class="list__item" id="9274acbb"><p>                        In the main menu, choose&nbsp;                        <span data-skip-index="skip" class="menupath">ReSharper | Refactor  | Refactor This</span>, or press                        <kbd data-rs="Ctrl+Shift+R" data-vs="Ctrl+Shift+R">Ctrl+Shift+R</kbd>                                                to display the list of applicable refactorings, then select one of them. You can also choose                        <span class="control">Refactor This</span>                        in the context menu of a selection.                    </p></li><li class="list__item" id="1a248ae3"><p>                        Use                        <a href="Reference__Keyboard_Shortcuts.html#refactorings">                            default keyboard shortcuts</a>                                                assigned to specific refactorings, or                        <a href="Configuring_Keyboard_Shortcuts.html#individual">                            assign custom shortcuts</a>                                                to your favorite refactoring commands.                    </p></li></ul>            </li><li class="list__item" id="7c6cd5f9">                <p id="026a2aa5">                    If the selected refactoring requires user input,                    the refactoring wizard opens. Note that the wizard's dialogs are not modal,                    so you can edit the code while the wizard is open.                </p>                <p id="82867c38">                    To roll back refactoring actions, the wizard provides the option&nbsp;                    <span class="control">To enable Undo, open all files with changes for editing</span>. If you                    select this option, ReSharper opens all modified files in new editor                    tabs and enables you to roll the refactoring back. In this case, you                    will need to save the changes yourself. If this option is not                    selected,&nbsp;ReSharper saves modified&nbsp;files automatically, without opening them.                </p>            </li><li class="list__item" id="4c6f8662"><p>                If a refactoring operation would cause code conflicts (such as                duplicate names, visibility conflicts, and so on), the wizard displays                the list of conflicts on the last step, before you apply the refactoring.                For some conflicts, the wizard can also suggest quick-fixes. For more information, see                <a href="Refactorings__Resolving_Conflicts_in_Refactorings.html">Resolving Conflicts in Refactorings</a>.            </p></li></ol></section>        <aside data-type="note" class="prompt" data-title="" rel="45cd855c" id="5accb660">            <p id="2dd0203b">                Visual Studio provides its own                <span class="control">Refactor</span>                menu, which is available from both main and context menus. By default, ReSharper hides the native Visual                Studio menu replacing it with its own one. To make the Visual Studio menu accessible, select the                <span class="control">Hide overridden Visual Studio menu items</span>                checkbox on the                <span data-skip-index="skip" class="menupath">Environment | Keyboard &amp; Menus</span>                page of ReSharper options.            </p>        </aside>        <p id="28304b57">            Some refactorings are available immediately after you modify code in the editor. For more information, see            <a href="Refactorings__Inplace_Refactorings.html">Inplace Refactorings</a>        </p>            <div class="chapter"><h2 id="change_signature" data-toc="Refactorings_for_CPP#change_signature">Change Signature</h2>        <p id="7d707aac">            The Change Signature refactoring allows you to make one or more different modifications            to the signatures of a function.            All usages, implementations, and overrides of the function will be updated accordingly.        </p>        <a name="dedicated_shortcut"></a>        <p id="9e593b88">            You can also invoke this refactoring with the dedicated shortcut            <kbd data-rs="Ctrl+F6" data-vs="Ctrl+R,S">Ctrl+F6</kbd>.        </p>            <figure><img alt="Changing signature of a C++ function" title="Changing signature of a C++ function" src="/help/img/dotnet/2019.2/cpp_change_signature.png" id="93756203" width="671" height="646"></figure>    </div>    <div class="chapter"><h2 id="extr_method" data-toc="Refactorings_for_CPP#extr_method">Extract Method</h2>        <a name="extract_method_intro"></a>        <p id="3a1f7db5">            This refactoring allows you to create a new method                        based on the selected code fragment.            ReSharper analyses the selected statements and detects variables that can be converted            into method parameters or represent its return value.        </p>            <a name="dedicated_shortcut"></a>        <p id="9c7e2cf5">            You can also invoke this refactoring with the dedicated shortcut            <kbd data-rs="Ctrl+Alt+M" data-vs="Ctrl+R,M">Ctrl+Alt+M</kbd>.        </p>            <p id="9b5dc7da">            Suppose that you want to extract the logic of calculating a discriminant to a separate method:        </p>        <figure><img alt="Extract method in C++: Selecting expression" title="Extract method in C++: Selecting expression" src="/help/img/dotnet/2019.2/cpp_extract_method_1.png" id="8f6b7931" width="520" height="156"></figure>        <p id="878cc1c0">            In the            <span class="control">Extract Method</span> dialog, you can pick method arguments,            choose a return value and preview the resulted method:        </p>        <figure><img alt="Extract method in C++: Specifying method details" title="Extract method in C++: Specifying method details" src="/help/img/dotnet/2019.2/cpp_extract_method_2.png" id="89e80dd1" width="655" height="546"></figure>        <p id="551302d8">            As soon as you click            <span class="control">Next</span>, the new method is created and the selected expression is replaced with            the method call.        </p>        <figure><img alt="Extract method in C++: Extracted method" title="Extract method in C++: Extracted method" src="/help/img/dotnet/2019.2/cpp_extract_method_3.png" id="c4ea5191" width="520" height="198"></figure>    </div>    <div class="chapter"><h2 id="intro_field" data-toc="Refactorings_for_CPP#intro_field">Introduce Field</h2>        <p id="intro">        This refactoring allows you to create a new field based on a selected expression,        initialize it with the expression or from the constructor, and replace occurrences of the expression        in the current type with references to the newly introduced field.    </p>        <a name="dedicated_shortcut"></a>        <p id="db458df9">            You can also invoke this refactoring with the dedicated shortcut            <kbd data-rs="Ctrl+Alt+D" data-vs="Ctrl+R,F">Ctrl+Alt+D</kbd>.        </p>            <p id="203b8c06">            In the example below, we use this refactoring to replace two occurrences of the same string with a new            private field and initialize it from the existing constructor:        </p>        <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="577e7760"><thead><tr id="fa6d6ea8" class="ijRowHead"><th id="1596da07"><p>Before refactoring</p></th><th id="3d6d6165"><p>After refactoring</p></th></tr></thead><tbody><tr id="663ef31f" class="ijRowOdd"><td id="dc3dce1e">                    <div class="code-block" data-lang="cpp">
#include &lt;exception&gt;
#include &lt;iostream&gt;

class ErrorHandler
{
  ErrorHandler()
  {
  }

public:
  void logError(std::exception&amp; e)
  {
    auto errorLogFIle = fopen("log.txt", "w");
    fprintf(errorLogFIle, "Something has failed: %s", e.what());
    fclose(errorLogFIle);
  }

  void printError(std::exception&amp; e)
  {
    printf("Something has failed: %s", e.what());
  }

private:
};
                    </div>                </td><td id="1a0c926b">                    <div class="code-block" data-lang="cpp">
#include &lt;exception&gt;
#include &lt;iostream&gt;

class ErrorHandler
{
  ErrorHandler(): error_message("Something has failed: %s") {}

public:
  void logError(std::exception&amp; e)
  {
    auto errorLogFIle = fopen("log.txt", "w");
    fprintf(errorLogFIle, error_message, e.what());
    fclose(errorLogFIle);
  }

  void printError(std::exception&amp; e)
  {
    printf(error_message, e.what());
  }

private:
  const char* error_message;
};
                    </div>                </td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="namespace_alias" data-toc="Refactorings_for_CPP#namespace_alias">Introduce Namespace Alias</h2>        <p id="f021ffe4">            This refactoring helps you create a namespace alias for a namespace usage and replace the currently            selected usage or all usages in the current document with the alias.            Depending on the selected usages,            the namespace alias is declared in closest possible scope to the usages.        </p>        <p id="8ecb0feb">            To invoke this refactoring, set the caret at a namespace usage and press            <kbd data-rs="Ctrl+Shift+R" data-vs="Ctrl+Shift+R">Ctrl+Shift+R</kbd>            or choose            <a name="RefactorThis"></a>    <span data-skip-index="skip" class="menupath">ReSharper | Refactor | Refactor This…</span>   from the menu, and then select            <span class="control">Introduce namespace alias</span> in the            <a href="Refactor_This.html">Refactor This</a> popup. If there are multiple occurrences of the namespace usage in the document,            you will be able to choose whether to replace the current usage or all usages.        </p>        <p id="c839da8b">            In the example below, we use this refactoring to add a namespace alias for the            <code class="code">SpaceOne::SpaceTwo</code>            namespace.        </p>        <div class="table-wrapper"><table class="  _layout-fixed" width="100%" id="20ae72fd"><thead><tr id="d1964497" class="ijRowHead"><th id="5e34133e"><p>Before refactoring</p></th><th id="02919bb4"><p>After refactoring</p></th></tr></thead><tbody><tr id="37a223f3" class="ijRowOdd"><td id="7981fd3b">                    <div class="code-block" data-lang="cpp">
namespace SpaceOne
{
  namespace SpaceTwo
  {
    int ten = 10;
    inline void foo()
    {
      // do something
    }
  }
}

inline int test()
{
  SpaceOne::SpaceTwo::foo();
  return SpaceOne::SpaceTwo::ten;
}
                    </div>                </td><td id="dcec3e81">                    <div class="code-block" data-lang="cpp">
namespace SpaceOne
{
  namespace SpaceTwo
  {
    int ten = 10;
    inline void foo()
    {
      // do something
    }
  }
}

inline int test()
{
  namespace s_two_alias = SpaceOne::SpaceTwo;
  s_two_alias::foo();
  return s_two_alias::ten;
}
                    </div>                </td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="introduce_var" data-toc="Refactorings_for_CPP#introduce_var">Introduce Variable</h2>        <p id="intro">        This refactoring allows you to create a new local variable                based on a selected expression, initialize it with the expression, and finally        replace all occurrences of the expression in the method with references to the newly introduced variable.    </p>        <a name="dedicated_shortcut"></a>        <p id="f2bfe408">            You can also invoke this refactoring with the dedicated shortcut            <kbd data-rs="Ctrl+Alt+V" data-vs="Ctrl+R,V">Ctrl+Alt+V</kbd>.        </p>        </div>    <div class="chapter"><h2 id="inline_var" data-toc="Refactorings_for_CPP#inline_var">Inline Variable</h2>        <p id="intro">        This refactoring allows you to replace all occurrences of a variable in the code with its initializer.        Note that the refactoring should be only applied if the variable value stays unchanged after initialization.    </p>        <a name="dedicated_shortcut"></a>        <p id="8ac2e5f3">            You can also invoke this refactoring with the dedicated shortcut            <kbd data-rs="Ctrl+Alt+N" data-vs="Ctrl+R,I">Ctrl+Alt+N</kbd>.        </p>        </div>    <div class="chapter"><h2 id="rename" data-toc="Refactorings_for_CPP#rename">Rename</h2>        <a name="rename_intro"></a>        <p id="bc10db1e">            One of the most time-consuming refactorings is supported for C++.            Modifying the name of a symbol can cause many problems if you try to do it manually.            When you invoke the            <a href="Refactorings__Rename.html">Rename refactoring</a> (also available with the dedicated            <kbd data-rs="F2" data-vs="Ctrl+R,R">F2</kbd> shortcut),            all checks are done by ReSharper.            Either all modification are performed smoothly if no conflicts exist, or            you get the list of conflicts that you can resolve manually to be sure that only necessary and appropriate            changes are made.        </p>            <p id="02931c98">            When you use this refactoring to rename a class, ReSharper            will automatically rename corresponding files (source and header).        </p>        <p id="edaa9635">            You can also invoke this refactoring on a file in the Solution Explorer.            As soon as you provide a new name for the file, ReSharper will update all its usages in includes.        </p>    </div>    <div class="chapter"><h2 id="typedef" data-toc="Refactorings_for_CPP#typedef">Introduce/Inline typedef</h2>        <p id="7af796ab">            The            <span class="control">Introduce typedef</span> refactoring lets you quickly create a            <code class="code">typedef</code> for the selected data type and replace the selected data type and optionally,            all occurrences of this data type in the current file, with the newly created            <code class="code">typedef</code>.        </p>        <p id="a34f123f">            The            <span class="control">Inline typedef</span> refactoring makes exactly the opposite - it removes the selected            <code class="code">typedef</code> and replaces all its usages with the declared data type.        </p>        <figure data-theme="light" id="1104d9c8" width="600"><img class="js-gif" src="/help/img/dotnet/2019.2/cpp_typedef_refactorings.png" data-gif-src="/help/img/dotnet/2019.2/cpp_typedef_refactorings.animated.gif" width="600" style="width:600px;"></figure>        <p id="64a4616a">            If you want the            <span class="control">Introduce typedef</span> refactoring to use type alias instead of            <code class="code">typedef</code>, select the corresponding checkbox on            <a name="the_options_page"></a>        the        <span data-skip-index="skip" class="menupath">Code Editing | С++ | Code Style</span>        page of        <a name="product_settings"></a>        ReSharper options                (<kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Alt+R,,O</span></kbd>).            For more information, see            <a href="https://docs.microsoft.com/en-us/cpp/cpp/aliases-and-typedefs-cpp" data-external="true" target="_blank" rel="noopener noreferrer">Aliases and typedefs (C++) on Microsoft Docs</a>.        </p>    </div>    <div class="last-modified" data-skip-index="skip">Last modified: 18 November 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Analyzing_Includes.html">Analyzing Includes</a><a class="navigation-links__next" href="Code_Templates_in_CPP.html">Code Templates</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>