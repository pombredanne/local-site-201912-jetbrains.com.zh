


<!doctype html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>NuGet references / ReSharper  DevGuide</title>
    <link rel="stylesheet" href="/help/resharper/sdk/app/app.css">
    <link rel="shortcut icon" href="/help/resharper/sdk/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="57x57" href="/help/resharper/sdk/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/help/resharper/sdk/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/help/resharper/sdk/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/help/resharper/sdk/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/help/resharper/sdk/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/help/resharper/sdk/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/help/resharper/sdk/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/help/resharper/sdk/apple-touch-icon-180x180.png">
    <link rel="mask-icon" href="/help/resharper/sdk/apple-mask-icon.svg" color="black">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-square70x70logo" content="/help/resharper/sdk/mstile-70x70.png">
    <meta name="msapplication-TileImage" content="/help/resharper/sdk/mstile-144x144.png">
    <meta name="msapplication-square150x150logo" content="/help/resharper/sdk/mstile-150x150.png">
    <meta name="msapplication-wide310x150logo" content="/help/resharper/sdk/mstile-310x150.png">
    <meta name="msapplication-square310x310logo" content="/help/resharper/sdk/mstile-310x310.png">
    <meta name="theme-color" content="#000000">
    <meta name="description" content="Documentation for writing extensions for ReSharper" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.jetbrains.com/help/resharper/sdk//Extensions/Plugins/ProjectSetup/NuGetReferences.html" />
    <meta property="og:site_name" content="JetBrains ReSharper" />
    <meta property="og:title" content="NuGet references" />
    <meta property="og:description" content="Documentation for writing extensions for ReSharper" />
    <meta property="og:image" content="https://www.jetbrains.com/help/resharper/sdk/jetbrains.png" />
    <meta property="article:modified_time" content="2017-07-10T19:28:42+00:00" />
    <!-- <meta property="article:section" content="" /> 
    <meta property="article:tag" content="" /> -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@JBPlatform" />
    <meta name="twitter:title" content="NuGet references" />
    <meta name="twitter:description" content="Documentation for writing extensions for ReSharper" />
    <meta name="twitter:image" content="https://www.jetbrains.com/help/resharper/sdk/jetbrains.png" />
    <meta class="swiftype" name="product" data-type="string" content="/help/resharper/sdk/"></meta>
<link  rel="stylesheet" href="/help/resharper/sdk/app/styles.css"></head>
<body data-id="Extensions/Plugins/ProjectSetup/NuGetReferences">
<div class="wrapper">
    <section class="panel _nav">
        <header class="panel__header">
            <div class="container">
                <form class="search-box">
                    <label for="search-box__input" class="search-box__label">
                        <input type="text" class="search-box__input" id="search-box__input" placeholder="Search ReSharper  DevGuide">
                    </label>
                    <div class="search-box__clear" title="Clear"></div>
                </form>
            </div>
        </header>
        <nav class="panel__content">
            <div class="container _nav">
                <menu class="nav-tree"></menu>
            </div>
            <div class="container _footer panel__footer">
                <p><a data-bypass="true" href="//youtrack.jetbrains.com/issues/IJSDK">Send feedback</a></p>
                <p>&copy; 2000&ndash;2018 <a href="//www.jetbrains.com">JetBrains</a> s.r.o.<br>
                    All rights reserved.</p>
            </div>
        </nav>
    </section>

    <main class="panel _main" role="main">
        <header class="panel__header">
            <div class="container">
                <h3>ReSharper DevGuide</h3>
                
                <div class="panel-trigger"></div>
            </div>
        </header>
        <section class="panel__content">
            <div class="container">
                <article class="article" data-shortcut-switcher="false">
                    <div class="navigation-links _top" data-swiftype-index="false">
                        <a class="navigation-links__prev" href="/Extensions/Plugins/ProjectSetup/CreatingProjects.html">Creating the project</a>
                        <a class="navigation-links__next" href="/Extensions/Plugins/ProjectSetup/InitialInstallation.html">Initial Installation</a>
                    </div>
                    <a data-bypass="true" href="https://github.com/JetBrains/resharper-devguide/edit/master/Extensions/Plugins/ProjectSetup/NuGetReferences.md" class="page-link-to-github" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub">
                        <i class="github-icon"></i>
                        <span class="text">Edit page</span>
                    </a>

                    <h1>NuGet references</h1>
                    <p>Your plugin project needs to add a NuGet reference to <a href="http://www.nuget.org/packages/JetBrains.ReSharper.SDK/" data-external="true" target="_blank" rel="noopener noreferrer"><span>the <code class="code highlight language-text">JetBrains.ReSharper.SDK</code> package</span></a>. This package will include all dependencies required to build plugins that extend ReSharper - both the core ReSharper Platform (e.g. language support, reference providers, etc) and the ReSharper product (e.g. navigation, unit testing support, etc.).</p>

<aside class="note">
  <p> There are currently no packages available to allow extending features specific to other .net tools, such as dotCover and dotTrace. Instructions for this will be made available later. If you need instructions sooner, please raise an <a href="https://github.com/JetBrains/resharper-devguide/issues" data-external="true" target="_blank" rel="noopener noreferrer"><span>issue for the documentation</span></a>.</p>
</aside>

<ul id="markdown-toc">
  <li><a href="#versioning" id="markdown-toc-versioning"><span>Versioning</span></a></li>
  <li><a href="#test-packages" id="markdown-toc-test-packages"><span>Test packages</span></a></li>
  <li><a href="#continuous-integration" id="markdown-toc-continuous-integration"><span>Continuous integration</span></a></li>
  <li><a href="#troubleshooting" id="markdown-toc-troubleshooting"><span>Troubleshooting</span></a></li>
</ul>

<a name="versioning" class="elem-anchor"></a>
<h2>Versioning<a href="#versioning" class="anchor-link"><span></span></a></h2>

<p>The <code class="code highlight language-text">JetBrains.ReSharper.SDK</code> package is used to target the current version of ReSharper. There isn’t a separate package for major versions of ReSharper, e.g. ReSharper 10, ReSharper 9, etc. When a new version of the ReSharper Platform is released, a new version of <code class="code highlight language-text">JetBrains.ReSharper.SDK</code> is released to match - the SDK package version tracks the version of the ReSharper Platform. To target the current release of ReSharper, add a reference to the latest stable version of the SDK package in the NuGet gallery. EAP versions of ReSharper will have an SDK that is released with a newer version number, and marked as pre-release.</p>

<p>In order to target an older version of the SDK, you can add a NuGet reference to a specific version of the SDK, e.g. by using the following command in the “Package Manager Console”:</p>

<div class="code-block" data-lang="text"><code class="code-block__wrapper">Install-Package JetBrains.ReSharper.SDK -Version 9.0.20141204.190166
</code></div>

<p>The specific version number can be found by looking at the package history on the gallery. The major and minor version numbers of the SDK package match the product version of ReSharper. For example:</p>

<table>
  <thead>
    <tr>
      <th>Product version</th>
      <th>NuGet version</th>
      <th>Release date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2016.2</td>
      <td>2016.2.20160818.171542</td>
      <td>18-Aug-2016</td>
    </tr>
    <tr>
      <td>2016.1.2</td>
      <td>2016.1.20160523.144409</td>
      <td>23-May-2016</td>
    </tr>
    <tr>
      <td>2016.1.1</td>
      <td>2016.1.20160504.105616</td>
      <td>4-May-2016</td>
    </tr>
    <tr>
      <td>2016.1</td>
      <td>2016.1.20160414.161610</td>
      <td>14-Apr-2016</td>
    </tr>
    <tr>
      <td>10.0</td>
      <td>10.0.20151218.132857</td>
      <td>21-Dec-2015</td>
    </tr>
    <tr>
      <td>9.2</td>
      <td>9.2.20150819.163916</td>
      <td>19-Aug-2015</td>
    </tr>
    <tr>
      <td>9.1</td>
      <td>9.1.20150522.81235</td>
      <td>27-Jul-2015</td>
    </tr>
    <tr>
      <td>9.0</td>
      <td>9.0.20141204.190166</td>
      <td>4-Dec-2015</td>
    </tr>
    <tr>
      <td>8.2</td>
      <td>8.2.1158</td>
      <td>21-Mar-2014</td>
    </tr>
    <tr>
      <td>8.1</td>
      <td>8.1.555</td>
      <td>13-Dec-2014</td>
    </tr>
  </tbody>
</table>

<aside class="note">
  <p> The 2016.1.1 and 2016.1.2 SDK releases are automated from the release of 2016.1.1 and 2016.1.2 maintenance releases. There should be no binary incompatibilities, and you can use any 2016.1.x SDK to target any version of 2016.1.x.</p>
</aside>

<p>An existing plugin project can be updated to the latest SDK by simply updating the <code class="code highlight language-text">JetBrains.ReSharper.SDK</code> package. Changes to the API are to be expected (see the guide on <a href="/help/resharper/sdk/Extensions/PlatformVersioning.html"><span>Platform Versioning</span></a> for more details), and significant changes are called out in the <a href="/help/resharper/sdk/Extensions/WhatsNew.html"><span>What’s New?</span></a> guide.</p>

<p>If an existing plugin project is required to stay at a particular version, rather than be upgraded to a new version, you can specify the required version in the <code class="code highlight language-text">packages.config</code> file, by setting the <code class="code highlight language-text">allowedVersions</code> attribute to the required version:</p>

<div class="code-block" data-lang="xml"><code class="code-block__wrapper"><span class="nt">&lt;packages&gt;</span>
  <span class="nt">&lt;package</span> <span class="na">id=</span><span class="s">"JetBrains.ReSharper.SDK"</span> <span class="na">version=</span><span class="s">"8.2.1158"</span> <span class="na">allowedVersions=</span><span class="s">"[8.2.1158]"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/packages&gt;</span>
</code></div>

<a name="test-packages" class="elem-anchor"></a>
<h2>Test packages<a href="#test-packages" class="anchor-link"><span></span></a></h2>

<p><a href="/help/resharper/sdk/Extensions/Plugins/Testing.html"><span>Test projects</span></a> should be created as .net class library projects and should include the <code class="code highlight language-text">JetBrains.ReSharper.SDK.Tests</code> package. This package includes <code class="code highlight language-text">JetBrains.ReSharper.SDK</code> as a dependency. It is a small package that only includes a simple <code class="code highlight language-text">.props</code> file that gets automatically included into the test project, and sets the <code class="code highlight language-text">JetTestProject</code> MSBuild property to <code class="code highlight language-text">true</code>. This causes the other SDK packages to alter their behaviour. Notably, it enables the “CopyLocal” flag. Normally, the SDK packages disable copy local, so the only files in the build folder are the plugin’s, plus dependencies. This is because it’s not possible to run the plugin without installing into a local installation of ReSharper, so it makes no sense to copy all of the ReSharper references to the build folder. Tests, on the other hand, run independently of the Visual Studio ReSharper host, and require the ReSharper references so that nunit can find the referenced assemblies.</p>

<aside class="note">
  <p> Testing is broken in the 2016.2 SDK (the test runner uses an assembly of the same name and version as in the bin folder from the SDK, and the multiple copies cause Reflection loading issues). This is fixed for 2016.2.1.</p>
</aside>

<aside class="note">
  <p> ReSharper 9.0 did not include a <code class="code highlight language-text">JetBrains.ReSharper.SDK.Tests</code> package, although 8.x and 9.1 did. The ReSharper 9.0 SDK package did not modify the copy local settings, so there was no need for a test package as the files were always copied. For various reasons, this change has been rolled back to the current behaviour.</p>
</aside>

<a name="continuous-integration" class="elem-anchor"></a>
<h2>Continuous integration<a href="#continuous-integration" class="anchor-link"><span></span></a></h2>

<p>The SDK packages are intended to work with continuous integration (CI), and provide everything necessary to build your plugin. Nothing else needs to be installed on the CI server. The NuGet packages are designed to work with package restore, so the <code class="code highlight language-text">packages</code> folder should not be committed into source control.</p>

<a name="troubleshooting" class="elem-anchor"></a>
<h2>Troubleshooting<a href="#troubleshooting" class="anchor-link"><span></span></a></h2>

<p>If you see the following error message, or something similar, you will need to restart Visual Studio and try again. It might also help to temporarily suspend ReSharper:</p>

<div class="code-block" data-lang="text"><code class="code-block__wrapper">Install failed. Rolling back...
The result "" of evaluating the value "$(BuildTaskAssembly)" of the "AssemblyName" attribute in element &lt;UsingTask&gt; is not valid.  C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.WinFX.targets
</code></div>

<p>This issue is due to a race condition in MSBuild, that can be triggered while ReSharper is active, and when packages that match certain criteria are installed. Unfortunately, this can affect the SDK. Frequently, there is no issue, and the SDK can be upgraded with no issues. However, occasionally, MSBuild can fail to evaluate properties correctly, which causes the error message above. Furthermore, the error is persistent until Visual Studio is restarted. Restarting Visual Studio and reattempting the upgrade will frequently work (it might also help to roll back to the last source control check in first).</p>

<p>It appears that ReSharper being active can exacerbate this issue, and make it more likely (presumably because ReSharper is monitoring both NuGet installs and changes to MSBuild’s project system). It might help to <a href="https://resharper-support.jetbrains.com/hc/en-us/articles/206546999-How-can-I-temporary-disable-turn-off-ReSharper-" data-external="true" target="_blank" rel="noopener noreferrer"><span>temporarily suspend ReSharper</span></a> while updating the NuGet packages.</p>


                    <div class="navigation-links _bottom" data-swiftype-index="false">
                        <a class="navigation-links__prev" href="/Extensions/Plugins/ProjectSetup/CreatingProjects.html">Creating the project</a>
                        <a class="navigation-links__next" href="/Extensions/Plugins/ProjectSetup/InitialInstallation.html">Initial Installation</a>
                    </div>
                    <div class="last-modified">
                        Last modified: 10 July 2017
                    </div>
                </article>

                <section class="disqus">
                    <div id="disqus_thread"></div>
                </section>
            </div>
        </section>
    </main>
</div>

<script src="/help/resharper/sdk/app/app.js" data-baseurl="/help/resharper/sdk/"></script>

</body>
</html>

