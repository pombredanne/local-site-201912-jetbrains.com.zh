<html lang="en-US" ><head>
    <meta charset="UTF-8">
    <title>NuGet参考/ ReSharper DevGuide</title>
    <link rel="stylesheet" href="/help/resharper/sdk/app/app.css">
    <link rel="shortcut icon" href="/help/resharper/sdk/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/help/resharper/sdk/apple-touch-icon-57x57.png" sizes="57x57">
    <link rel="apple-touch-icon" href="/help/resharper/sdk/apple-touch-icon-60x60.png" sizes="60x60">
    <link rel="apple-touch-icon" href="/help/resharper/sdk/apple-touch-icon-72x72.png" sizes="72x72">
    <link rel="apple-touch-icon" href="/help/resharper/sdk/apple-touch-icon-114x114.png" sizes="114x114">
    <link rel="apple-touch-icon" href="/help/resharper/sdk/apple-touch-icon-120x120.png" sizes="120x120">
    <link rel="apple-touch-icon" href="/help/resharper/sdk/apple-touch-icon-144x144.png" sizes="144x144">
    <link rel="apple-touch-icon" href="/help/resharper/sdk/apple-touch-icon-152x152.png" sizes="152x152">
    <link rel="apple-touch-icon" href="/help/resharper/sdk/apple-touch-icon-180x180.png" sizes="180x180">
    <link rel="mask-icon" href="/help/resharper/sdk/apple-mask-icon.svg" color="black">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-square70x70logo" content="/help/resharper/sdk/mstile-70x70.png">
    <meta name="msapplication-TileImage" content="/help/resharper/sdk/mstile-144x144.png">
    <meta name="msapplication-square150x150logo" content="/help/resharper/sdk/mstile-150x150.png">
    <meta name="msapplication-wide310x150logo" content="/help/resharper/sdk/mstile-310x150.png">
    <meta name="msapplication-square310x310logo" content="/help/resharper/sdk/mstile-310x310.png">
    <meta name="theme-color" content="#000000">
    <meta name="description" content="Documentation for writing extensions for ReSharper">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.jetbrains.com/help/resharper/sdk//Extensions/Plugins/ProjectSetup/NuGetReferences.html">
    <meta property="og:site_name" content="JetBrains ReSharper">
    <meta property="og:title" content="NuGet references">
    <meta property="og:description" content="Documentation for writing extensions for ReSharper">
    <meta property="og:image" content="https://www.jetbrains.com/help/resharper/sdk/jetbrains.png">
    <meta property="article:modified_time" content="2017-07-10T19:28:42+00:00">
    <!-- <meta property="article:section" content="" /> 
    <meta property="article:tag" content="" /> -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@JBPlatform">
    <meta name="twitter:title" content="NuGet references">
    <meta name="twitter:description" content="Documentation for writing extensions for ReSharper">
    <meta name="twitter:image" content="https://www.jetbrains.com/help/resharper/sdk/jetbrains.png">
    <meta class="swiftype" name="product" data-type="string" content="/help/resharper/sdk/">
<link rel="stylesheet" href="/help/resharper/sdk/app/styles.css"></head>
<body  data-id="Extensions/Plugins/ProjectSetup/NuGetReferences">
<div class="wrapper">
    <section class="panel _nav">
        <header class="panel__header">
            <div class="container">
                <form class="search-box">
                    <label class="search-box__label" for="search-box__input">
                        <input type="text" class="search-box__input" id="search-box__input" placeholder="搜索ReSharper DevGuide">
                    </label>
                    <div class="search-box__clear" title="明确"></div>
                </form>
            </div>
        </header>
        <nav class="panel__content">
            <div class="container _nav">
                <menu class="nav-tree"></menu>
            </div>
            <div class="container _footer panel__footer">
                <p><a href="//youtrack.jetbrains.com/issues/IJSDK" data-bypass="true">发送反馈</a></p>
                <p>©2000–2018 <a href="//www.jetbrains.com">JetBrains</a> sro<br>版权所有。</p>
            </div>
        </nav>
    </section>

    <main class="panel _main" role="main">
        <header class="panel__header">
            <div class="container">
                <h3>ReSharper开发指南</h3>
                
                <div class="panel-trigger"></div>
            </div>
        </header>
        <section class="panel__content">
            <div class="container">
                <article class="article" data-shortcut-switcher="false">
                    <div class="navigation-links _top" data-swiftype-index="false">
                        <a class="navigation-links__prev" href="/Extensions/Plugins/ProjectSetup/CreatingProjects.html">创建项目</a> <a class="navigation-links__next" href="/Extensions/Plugins/ProjectSetup/InitialInstallation.html">初始安装</a>
                    </div>
                    <a href="https://github.com/JetBrains/resharper-devguide/edit/master/Extensions/Plugins/ProjectSetup/NuGetReferences.md" class="page-link-to-github" rel="noopener noreferrer" title="在GitHub上编辑此页面" data-bypass="true" target="_blank">
                        <i class="github-icon"></i> <span class="text">编辑页面</span>
                    </a>

                    <h1>NuGet参考</h1>
                    <p>你的插件项目需要增加的NuGet引用<a href="http://www.nuget.org/packages/JetBrains.ReSharper.SDK/" rel="noopener noreferrer" data-external="true" target="_blank"><span>了<code class="code highlight language-text">JetBrains.ReSharper.SDK</code>包装</span></a> 。该软件包将包括构建扩展ReSharper的插件所需的所有依赖关系-核心ReSharper平台（例如，语言支持，参考提供程序等）和ReSharper产品（例如，导航，单元测试支持等）。</p>

<aside class="note">
  <p>当前没有可用的软件包来允许扩展特定于其他.net工具的功能，例如dotCover和dotTrace。有关说明将在以后提供。如果您需要更快的说明，请提出<a href="https://github.com/JetBrains/resharper-devguide/issues" rel="noopener noreferrer" data-external="true" target="_blank"><span>有关文档</span></a>的<a href="https://github.com/JetBrains/resharper-devguide/issues" rel="noopener noreferrer" data-external="true" target="_blank"><span>问题</span></a> 。</p>
</aside>

<ul id="markdown-toc">
  <li><a href="#versioning" id="markdown-toc-versioning"><span>版本控制</span></a></li>
  <li><a href="#test-packages" id="markdown-toc-test-packages"><span>测试包</span></a></li>
  <li><a href="#continuous-integration" id="markdown-toc-continuous-integration"><span>持续集成</span></a></li>
  <li><a href="#troubleshooting" id="markdown-toc-troubleshooting"><span>故障排除</span></a></li>
</ul>

<a name="versioning" class="elem-anchor"></a>
<h2>版本控制<a href="#versioning" class="anchor-link"><span></span></a></h2>

<p>的<code class="code highlight language-text">JetBrains.ReSharper.SDK</code>软件包用于定位ReSharper的当前版本。没有针对ReSharper的主要版本（例如ReSharper 10，ReSharper 9等）的单独软件包。发布新版本的ReSharper Platform时，将发行新版本的ReSharper。 <code class="code highlight language-text">JetBrains.ReSharper.SDK</code>已发布以匹配-SDK软件包版本跟踪ReSharper平台的版本。要针对ReSharper的当前版本，请在NuGet画廊中添加对SDK包的最新稳定版本的引用。ReSharper的EAP版本将具有一个包含较新版本号的SDK，并标记为预发行版。</p>

<p>为了定位较旧版本的SDK，您可以将NuGet引用添加到特定版本的SDK，例如，通过在“包管理器控制台”中使用以下命令：</p>

<div class="code-block" data-lang="text"><code class="code-block__wrapper">Install-Package JetBrains.ReSharper.SDK -Version 9.0.20141204.190166</code></div>

<p>通过查看图库中的包装历史记录，可以找到特定的版本号。SDK软件包的主要版本号和次要版本号与ReSharper的产品版本匹配。例如：</p>

<table>
  <thead>
    <tr>
      <th>产品版本</th>
      <th>NuGet版本</th>
      <th>发布日期</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2016.2</td>
      <td>2016.2.20160818.171542</td>
      <td>2016年8月18日</td>
    </tr>
    <tr>
      <td>2016.1.2</td>
      <td>2016.1.20160523.144409</td>
      <td>2016年5月23日</td>
    </tr>
    <tr>
      <td>2016.1.1</td>
      <td>2016.1.20160504.105616</td>
      <td>2016年5月4日</td>
    </tr>
    <tr>
      <td>2016.1</td>
      <td>2016.1.20160414.161610</td>
      <td>2016年4月14日</td>
    </tr>
    <tr>
      <td>10.0</td>
      <td>10.0.20151218.132857</td>
      <td>2015年12月21日</td>
    </tr>
    <tr>
      <td>9.2</td>
      <td>9.2.20150819.163916</td>
      <td>2015年8月19日</td>
    </tr>
    <tr>
      <td>9.1</td>
      <td>9.1.20150522.81235</td>
      <td>2015年7月27日</td>
    </tr>
    <tr>
      <td>9.0</td>
      <td>9.0.20141204.190166</td>
      <td>2015年12月4日</td>
    </tr>
    <tr>
      <td>8.2</td>
      <td>8.2.1158</td>
      <td>2014年3月21日</td>
    </tr>
    <tr>
      <td>8.1</td>
      <td>8.1.555</td>
      <td>2014年12月13日</td>
    </tr>
  </tbody>
</table>

<aside class="note">
  <p>2016.1.1和2016.1.2 SDK版本自2016.1.1和2016.1.2维护版本开始自动执行。不应存在二进制不兼容性，并且您可以使用任何2016.1.x SDK来定位任何版本的2016.1.x。</p>
</aside>

<p>您可以通过简单地更新现有插件项目将其更新为最新的SDK。 <code class="code highlight language-text">JetBrains.ReSharper.SDK</code>包。预计会对API进行更改（有关更多详细信息，请参见<a href="/help/resharper/sdk/Extensions/PlatformVersioning.html"><span>平台版本</span></a>指南），并且在“ <a href="/help/resharper/sdk/Extensions/WhatsNew.html"><span>新增功能”</span></a>中将进行重大更改<a href="/help/resharper/sdk/Extensions/WhatsNew.html"><span>。</span></a> 指南。</p>

<p>如果要求现有插件项目保持特定版本，而不是升级到新版本，则可以在<code class="code highlight language-text">packages.config</code>文件，通过设置<code class="code highlight language-text">allowedVersions</code>属性为必需的版本：</p>

<div class="code-block" data-lang="xml"><code class="code-block__wrapper"><span class="nt"><packages></span> <span class="nt"><package</span> <span class="na">id=</span><span class="s">"JetBrains.ReSharper.SDK"</span> <span class="na">version=</span><span class="s">"8.2.1158"</span> <span class="na">allowedVersions=</span><span class="s">"[8.2.1158]"</span> <span class="nt">/></span> <span class="nt"></packages></span></code></div>

<a name="test-packages" class="elem-anchor"></a>
<h2>测试包<a href="#test-packages" class="anchor-link"><span></span></a></h2>

<p><a href="/help/resharper/sdk/Extensions/Plugins/Testing.html"><span>测试项目</span></a>应创建为.net类库项目，并应包括<code class="code highlight language-text">JetBrains.ReSharper.SDK.Tests</code>包。该套餐包括<code class="code highlight language-text">JetBrains.ReSharper.SDK</code>作为依赖。这是一个小包装，只包含一个简单的<code class="code highlight language-text">.props</code>文件会自动包含在测试项目中，并设置<code class="code highlight language-text">JetTestProject</code> MSBuild属性<code class="code highlight language-text">true</code> 。这将导致其他SDK程序包更改其行为。值得注意的是，它启用“ CopyLocal”标志。通常，SDK软件包会禁用本地复制，因此build文件夹中的唯一文件是插件的文件以及相关性。这是因为没有安装到ReSharper的本地安装中就无法运行插件，因此将所有ReSharper引用复制到build文件夹是没有意义的。另一方面，测试独立于Visual Studio ReSharper主机运行，并且需要ReSharper引用，以便nunit可以找到引用的程序集。</p>

<aside class="note">
  <p>测试在2016.2 SDK中被破坏（测试运行程序使用与SDK中bin文件夹中的名称和版本相同的程序集，并且多个副本会导致反射加载问题）。该问题在2016.2.1中已修复。</p>
</aside>

<aside class="note">
  <p>ReSharper 9.0不包含<code class="code highlight language-text">JetBrains.ReSharper.SDK.Tests</code>软件包，尽管8.x和9.1确实如此。ReSharper 9.0 SDK软件包不会修改复制本地设置，因此不需要测试软件包，因为始终会复制文件。由于各种原因，此更改已回滚到当前行为。</p>
</aside>

<a name="continuous-integration" class="elem-anchor"></a>
<h2>持续集成<a href="#continuous-integration" class="anchor-link"><span></span></a></h2>

<p>SDK软件包旨在与持续集成（CI）一起使用，并提供构建插件所需的一切。CI服务器上不需要安装其他任何东西。NuGet软件包旨在与软件包还原一起使用，因此<code class="code highlight language-text">packages</code>文件夹不应提交到源代码管理中。</p>

<a name="troubleshooting" class="elem-anchor"></a>
<h2>故障排除<a href="#troubleshooting" class="anchor-link"><span></span></a></h2>

<p>如果看到以下错误消息或类似消息，则需要重新启动Visual Studio并重试。暂时暂停ReSharper也可能会有所帮助：</p>

<div class="code-block" data-lang="text"><code class="code-block__wrapper">Install failed. Rolling back... The result "" of evaluating the value "$(BuildTaskAssembly)" of the "AssemblyName" attribute in element <UsingTask> is not valid. C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.WinFX.targets</code></div>

<p>此问题归因于MSBuild中的竞争状况，在ReSharper处于活动状态以及安装了符合特定条件的程序包时，可以触发该竞争状况。不幸的是，这可能会影响SDK。通常，没有问题，并且可以毫无问题地升级SDK。但是，有时，MSBuild可能无法正确评估属性，从而导致出现上述错误消息。此外，错误将一直存在，直到重新启动Visual Studio。重新启动Visual Studio并重新尝试升级通常会起作用（这也可能有助于先回滚到最后一次进行源代码管理检查）。</p>

<p>看起来ReSharper处于活动状态可能会加剧此问题，并使其更可能出现（可能是因为ReSharper同时监视NuGet的安装和MSBuild项目系统的更改）。在更新NuGet程序包时<a href="https://resharper-support.jetbrains.com/hc/en-us/articles/206546999-How-can-I-temporary-disable-turn-off-ReSharper-" rel="noopener noreferrer" data-external="true" target="_blank"><span>暂时暂停ReSharper</span></a>可能会有所帮助。</p>


                    <div class="navigation-links _bottom" data-swiftype-index="false">
                        <a class="navigation-links__prev" href="/Extensions/Plugins/ProjectSetup/CreatingProjects.html">创建项目</a> <a class="navigation-links__next" href="/Extensions/Plugins/ProjectSetup/InitialInstallation.html">初始安装</a>
                    </div>
                    <div class="last-modified">上次修改时间：2017年7月10日</div>
                </article>

                <section class="disqus">
                    <div id="disqus_thread"></div>
                </section>
            </div>
        </section>
    </main>
</div>

<script src="/help/resharper/sdk/app/app.js" data-baseurl="/help/resharper/sdk/"></script>




</body></html>