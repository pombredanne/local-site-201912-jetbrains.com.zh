<html lang="en-US" ><head>
    <meta charset="UTF-8">
    <title>/ ReSharper开发指南</title>
    <link rel="stylesheet" href="/help/resharper/sdk/app/app.css">
    <link rel="shortcut icon" href="/help/resharper/sdk/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/help/resharper/sdk/apple-touch-icon-57x57.png" sizes="57x57">
    <link rel="apple-touch-icon" href="/help/resharper/sdk/apple-touch-icon-60x60.png" sizes="60x60">
    <link rel="apple-touch-icon" href="/help/resharper/sdk/apple-touch-icon-72x72.png" sizes="72x72">
    <link rel="apple-touch-icon" href="/help/resharper/sdk/apple-touch-icon-114x114.png" sizes="114x114">
    <link rel="apple-touch-icon" href="/help/resharper/sdk/apple-touch-icon-120x120.png" sizes="120x120">
    <link rel="apple-touch-icon" href="/help/resharper/sdk/apple-touch-icon-144x144.png" sizes="144x144">
    <link rel="apple-touch-icon" href="/help/resharper/sdk/apple-touch-icon-152x152.png" sizes="152x152">
    <link rel="apple-touch-icon" href="/help/resharper/sdk/apple-touch-icon-180x180.png" sizes="180x180">
    <link rel="mask-icon" href="/help/resharper/sdk/apple-mask-icon.svg" color="black">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-square70x70logo" content="/help/resharper/sdk/mstile-70x70.png">
    <meta name="msapplication-TileImage" content="/help/resharper/sdk/mstile-144x144.png">
    <meta name="msapplication-square150x150logo" content="/help/resharper/sdk/mstile-150x150.png">
    <meta name="msapplication-wide310x150logo" content="/help/resharper/sdk/mstile-310x150.png">
    <meta name="msapplication-square310x310logo" content="/help/resharper/sdk/mstile-310x310.png">
    <meta name="theme-color" content="#000000">
    <meta name="description" content="Documentation for writing extensions for ReSharper">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.jetbrains.com/help/resharper/sdk//Platform/Shell/Icons/CreatingCompiledIcons.html">
    <meta property="og:site_name" content="JetBrains ReSharper">
    <meta property="og:title" content="">
    <meta property="og:description" content="Documentation for writing extensions for ReSharper">
    <meta property="og:image" content="https://www.jetbrains.com/help/resharper/sdk/jetbrains.png">
    <meta property="article:modified_time" content="2015-08-03T16:29:31+00:00">
    <!-- <meta property="article:section" content="" /> 
    <meta property="article:tag" content="" /> -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@JBPlatform">
    <meta name="twitter:title" content="">
    <meta name="twitter:description" content="Documentation for writing extensions for ReSharper">
    <meta name="twitter:image" content="https://www.jetbrains.com/help/resharper/sdk/jetbrains.png">
    <meta class="swiftype" name="product" data-type="string" content="/help/resharper/sdk/">
<link rel="stylesheet" href="/help/resharper/sdk/app/styles.css"></head>
<body  data-id="Platform/Shell/Icons/CreatingCompiledIcons">
<div class="wrapper">
    <section class="panel _nav">
        <header class="panel__header">
            <div class="container">
                <form class="search-box">
                    <label class="search-box__label" for="search-box__input">
                        <input type="text" class="search-box__input" id="search-box__input" placeholder="搜索ReSharper DevGuide">
                    </label>
                    <div class="search-box__clear" title="明确"></div>
                </form>
            </div>
        </header>
        <nav class="panel__content">
            <div class="container _nav">
                <menu class="nav-tree"></menu>
            </div>
            <div class="container _footer panel__footer">
                <p><a href="//youtrack.jetbrains.com/issues/IJSDK" data-bypass="true">发送反馈</a></p>
                <p>©2000–2018 <a href="//www.jetbrains.com">JetBrains</a> sro<br>版权所有。</p>
            </div>
        </nav>
    </section>

    <main class="panel _main" role="main">
        <header class="panel__header">
            <div class="container">
                <h3>ReSharper开发指南</h3>
                
                <div class="panel-trigger"></div>
            </div>
        </header>
        <section class="panel__content">
            <div class="container">
                <article class="article" data-shortcut-switcher="false">
                    <div class="navigation-links _top" data-swiftype-index="false">
                        
                        
                    </div>
                    <a href="https://github.com/JetBrains/resharper-devguide/edit/master/Platform/Shell/Icons/CreatingCompiledIcons.md" class="page-link-to-github" rel="noopener noreferrer" title="在GitHub上编辑此页面" data-bypass="true" target="_blank"><i class="github-icon"></i> <span class="text">编辑页面</span></a> <a name="creating-compiled-icons" class="elem-anchor"></a>
<h1>创建编译的图标<a href="#creating-compiled-icons" class="anchor-link"><span></span></a></h1>

<p>最常见的图标类型是已编译的图标，由<code class="code highlight language-text">CompiledIconId</code> 。这些图标作为XAML资源以编译类型嵌入到程序集引用中。</p>

<p>ReSharper SDK包括MSBuild生成操作和自定义任务，该任务将从XAML或PNG文件生成图标。自定义任务会生成两个文件-一个新的XAML文件，其中包含一个<code class="code highlight language-text">DrawingBrush</code>每个图片的资源，以及提供以下内容的C＃文件： <code class="code highlight language-text">CompiledIconId</code>实例，以及指向新XAML资源字典的指针。生成文件后，应将它们都添加到Visual Studio项目中。</p>

<a name="themed-icons" class="elem-anchor"></a>
<h2>主题图标<a href="#themed-icons" class="anchor-link"><span></span></a></h2>

<p>通过在生成的XAML文件中包含多个图像（每个主题方面支持一个版本）来支持主题图标。每个图像都有自己的名称和预期的主题方面，因此，主题图标将具有名称相同但主题方面名称不同的多个图像。</p>

<p>检索图标时，将按优先级顺序列举当前主题的各个方面，并使用该图标的第一个匹配图像。如果没有与主题主题匹配的图像，则使用后备图像（如果有）。后备图像是在没有主题方面的情况下创建的图像。如果没有后备图像，则使用图标的任意主题图像。</p>

<p>有关主题和主题方面的更多详细信息，请参见<a href="/help/resharper/sdk/Platform/Shell/Theming/Icons.html"><span>主题部分</span></a> 。</p>

<a name="xaml-icons" class="elem-anchor"></a>
<h2>XAML图标<a href="#xaml-icons" class="anchor-link"><span></span></a></h2>

<p>XAML图像是图标的首选格式，因为它们可以更好地缩放以适应更大的尺寸和更高的屏幕DPI分辨率。</p>

<p>输入的XAML文件应为<code class="code highlight language-text">ResourceDictionary</code>包含一些<code class="code highlight language-text">DrawingBrush</code>资源，都标有<code class="code highlight language-text">x:Key</code>通过名称唯一标识图标的属性。该文件应添加到Visual Studio项目中，并将其生成操作设置为<code class="code highlight language-text">ThemedIconsXamlV3</code> 。</p>

<p>每个笔刷可以包含多个单独的图像，每个图像都支持一个主题。这些图像被水平放置，而不是遵循严格的网格，自定义任务将自动发现不同的，不重叠的图像。这些图像将再次保存为生成的新XAML文件。 <code class="code highlight language-text">ResourceDictionary</code> ，每个主题图片都保存为自己的个人<code class="code highlight language-text">DrawingBrush</code> 。</p>

<p>需要对新的XAML图像进行注释，同时使用图标的名称和要使用的主题方面的名称。从附加到原始XAML文件的MSBuild元数据中检索主题方面。的<code class="code highlight language-text">ThemeColumns</code>元素用于提供主题方面名称的用分号分隔的列表，水平条中的每个图像均以相同的顺序列出。</p>

<p>需要类似的元数据来指定如何处理单个图像的背景。的<code class="code highlight language-text">RemoveBackgroundElement</code>描述这种行为。出于所有目的和目的，除了将值设置为<code class="code highlight language-text">True</code> 。</p>

<p>这两个元数据都是必需的，否则自定义任务将不会处理XAML文件。要添加元数据，请编辑<code class="code highlight language-text">.csproj</code>在项目文件中，找到代表原始XAML文件的元素，并将其设置如下：</p>

<div class="code-block" data-lang="xml"><code class="code-block__wrapper"><span class="nt"><ThemedIconsXamlV3</span> <span class="na">Include=</span><span class="s">"path-to-xaml-file"</span><span class="nt">></span> <span class="nt"><ThemeColumns></span>Gray;GrayDark;Color<span class="nt"></ThemeColumns></span> <span class="nt"><RemoveBackgroundElement></span>True<span class="nt"></RemoveBackgroundElement></span> <span class="nt"></ThemedIconsXamlV3></span></code></div>

<p><a href="/help/resharper/sdk/Platform/Shell/Theming/Icons.html"><span>主题部分</span></a>中列出了主题方面的名称。</p>

<a name="png-icons" class="elem-anchor"></a>
<h2>PNG图标<a href="#png-icons" class="anchor-link"><span></span></a></h2>

<p>ReSharper还支持将PNG文件用作图标，尽管建议改用XAML，因为XAML文件可以更好地缩放到更大的尺寸和更高的屏幕DPI分辨率。</p>

<p>为了从PNG文件创建图标，请将文件添加到Visual Studio项目中，并将其生成操作设置为<code class="code highlight language-text">ThemedIconPng</code> 。PNG文件通常为正方形，例如16×16，尽管没有强制实施的限制-可以包含较大的图标以实现较高的DPI或仅用于以较大的尺寸显示。</p>

<p>命名约定受命名约定支持。主题方面的名称应放在方括号中，例如<code class="code highlight language-text">Foo[GrayDark].png</code> ，以及用于每个主题方面的单独的PNG文件。如果未指定主题外观名称，则在找不到主题特定的图像时会将图像视为后备图像。</p>

<p><a href="/help/resharper/sdk/Platform/Shell/Theming/Icons.html"><span>主题部分</span></a>中列出了主题方面的名称。</p>

<a name="generated-files" class="elem-anchor"></a>
<h2>生成的文件<a href="#generated-files" class="anchor-link"><span></span></a></h2>

<p>自定义任务会生成两个文件-一个包含已处理图像的新XAML文件和一个包含已处理图像的C＃文件<code class="code highlight language-text">CompiledIconId</code>实例。</p>

<p>文件名基于包含文件夹的名称，使用格式<code class="code highlight language-text">ThemedIcons.<DIR>.generated.cs</code>和<code class="code highlight language-text">ThemedIcons.<DIR>.generated.xaml</code> ，在哪里<code class="code highlight language-text"><DIR></code>是包含文件夹的名称，减去任何<code class="code highlight language-text">Icons</code>后缀。例如文件夹<code class="code highlight language-text">BarIcons</code>将创建名为<code class="code highlight language-text">ThemedIcons.Bar.generated.cs</code>和<code class="code highlight language-text">ThemedIcons.Bar.generated.xaml</code> 。</p>

<p>生成的XAML是<code class="code highlight language-text">ResourceDictionary</code>每个主题图像都是作为一个单独的图像创建的<code class="code highlight language-text">DrawingBrush</code> ，并带有图标名称和相应的主题方面。</p>

<p>生成的C＃文件包含<code class="code highlight language-text">CompiledIconId</code>用于标识和使用图标的实例。生成的类在密封的类内部创建，以防止与该命名空间内的其他类发生冲突。每个类都源自空的抽象<code class="code highlight language-text">CompiledIconClass</code>类，并标有<code class="code highlight language-text">[CompiledIconClass]</code>属性，以允许在运行时发现图标XAML文件。该类还声明了几个程序集级别的属性，以帮助识别和加载图标XAML文件，为XAML中的图像分配友好名称，并为图标注册XAML命名空间。</p>

<p>每个类都有一个公共静态字段，称为<code class="code highlight language-text">Id</code> ，这是的实例<code class="code highlight language-text">IconId</code>使用图标时使用的符号。</p>

<div class="code-block" data-lang="csharp"><code class="code-block__wrapper"><span class="k">namespace</span> <span class="nn">Foo</span> <span class="p">{</span> <span class="c1">// Name based on the folder containing the images - Bar</span> <span class="k">public</span> <span class="k">sealed</span> <span class="k">class</span> <span class="nc">BarThemedIcons</span> <span class="p">{</span> <span class="c1">// The attribute allows for discovery of the XAML. The first argument</span> <span class="c1">// is the XAML pack address of the embedded XAML resource. The second</span> <span class="c1">// argument is the icon index, and the third is the name</span> <span class="p">[</span><span class="nf">CompiledIconClass</span><span class="p">(</span><span class="s">".../ThemedIcons.Bar.generated.xaml"</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="s">"Quux"</span><span class="p">)]</span> <span class="k">public</span> <span class="k">sealed</span> <span class="k">class</span> <span class="nc">Quux</span> <span class="p">:</span> <span class="n">CompiledIconClass</span> <span class="p">{</span> <span class="k">public</span> <span class="k">static</span> <span class="n">IconId</span> <span class="n">Id</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">CompiledIconId</span><span class="p">(</span><span class="s">".../ThemedIcons.Bar.generated.xaml"</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="s">"Quux"</span><span class="p">);</span> <span class="p">}</span> <span class="p">}</span> <span class="p">}</span></code></div>

<p>首次生成文件后，应将它们添加到Visual Studio项目中。</p>

<a name="other-useful-metadata" class="elem-anchor"></a>
<h2>其他有用的元数据<a href="#other-useful-metadata" class="anchor-link"><span></span></a></h2>

<p>自定义任务还可以识别<code class="code highlight language-text">FullPath</code>元数据，如果图标是从另一个位置（可能在项目之间共享）链接到Visual Studio项目中的，则很有用。的<code class="code highlight language-text">FullPath</code>元数据应该是输出位置的预期完整路径，在该位置将生成的文件放置在该位置。</p>



                    <div class="navigation-links _bottom" data-swiftype-index="false">
                        
                        
                    </div>
                    <div class="last-modified">上次修改时间：2015年8月3日</div>
                </article>

                <section class="disqus">
                    <div id="disqus_thread"></div>
                </section>
            </div>
        </section>
    </main>
</div>

<script src="/help/resharper/sdk/app/app.js" data-baseurl="/help/resharper/sdk/"></script>




</body></html>