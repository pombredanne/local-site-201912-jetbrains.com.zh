


<!doctype html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title> / ReSharper  DevGuide</title>
    <link rel="stylesheet" href="/help/resharper/sdk/app/app.css">
    <link rel="shortcut icon" href="/help/resharper/sdk/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="57x57" href="/help/resharper/sdk/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/help/resharper/sdk/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/help/resharper/sdk/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/help/resharper/sdk/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/help/resharper/sdk/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/help/resharper/sdk/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/help/resharper/sdk/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/help/resharper/sdk/apple-touch-icon-180x180.png">
    <link rel="mask-icon" href="/help/resharper/sdk/apple-mask-icon.svg" color="black">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-square70x70logo" content="/help/resharper/sdk/mstile-70x70.png">
    <meta name="msapplication-TileImage" content="/help/resharper/sdk/mstile-144x144.png">
    <meta name="msapplication-square150x150logo" content="/help/resharper/sdk/mstile-150x150.png">
    <meta name="msapplication-wide310x150logo" content="/help/resharper/sdk/mstile-310x150.png">
    <meta name="msapplication-square310x310logo" content="/help/resharper/sdk/mstile-310x310.png">
    <meta name="theme-color" content="#000000">
    <meta name="description" content="Documentation for writing extensions for ReSharper" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.jetbrains.com/help/resharper/sdk//Platform/Logging/AdvancedConfiguration.html" />
    <meta property="og:site_name" content="JetBrains ReSharper" />
    <meta property="og:title" content="" />
    <meta property="og:description" content="Documentation for writing extensions for ReSharper" />
    <meta property="og:image" content="https://www.jetbrains.com/help/resharper/sdk/jetbrains.png" />
    <meta property="article:modified_time" content="2016-01-07T00:33:04+00:00" />
    <!-- <meta property="article:section" content="" /> 
    <meta property="article:tag" content="" /> -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@JBPlatform" />
    <meta name="twitter:title" content="" />
    <meta name="twitter:description" content="Documentation for writing extensions for ReSharper" />
    <meta name="twitter:image" content="https://www.jetbrains.com/help/resharper/sdk/jetbrains.png" />
    <meta class="swiftype" name="product" data-type="string" content="/help/resharper/sdk/"></meta>
<link  rel="stylesheet" href="/help/resharper/sdk/app/styles.css"></head>
<body data-id="Platform/Logging/AdvancedConfiguration">
<div class="wrapper">
    <section class="panel _nav">
        <header class="panel__header">
            <div class="container">
                <form class="search-box">
                    <label for="search-box__input" class="search-box__label">
                        <input type="text" class="search-box__input" id="search-box__input" placeholder="Search ReSharper  DevGuide">
                    </label>
                    <div class="search-box__clear" title="Clear"></div>
                </form>
            </div>
        </header>
        <nav class="panel__content">
            <div class="container _nav">
                <menu class="nav-tree"></menu>
            </div>
            <div class="container _footer panel__footer">
                <p><a data-bypass="true" href="//youtrack.jetbrains.com/issues/IJSDK">Send feedback</a></p>
                <p>&copy; 2000&ndash;2018 <a href="//www.jetbrains.com">JetBrains</a> s.r.o.<br>
                    All rights reserved.</p>
            </div>
        </nav>
    </section>

    <main class="panel _main" role="main">
        <header class="panel__header">
            <div class="container">
                <h3>ReSharper DevGuide</h3>
                
                <div class="panel-trigger"></div>
            </div>
        </header>
        <section class="panel__content">
            <div class="container">
                <article class="article" data-shortcut-switcher="false">
                    <div class="navigation-links _top" data-swiftype-index="false">
                        
                        
                    </div>
                    <a data-bypass="true" href="https://github.com/JetBrains/resharper-devguide/edit/master/Platform/Logging/AdvancedConfiguration.md" class="page-link-to-github" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub">
                        <i class="github-icon"></i>
                        <span class="text">Edit page</span>
                    </a>

                    
                    <a name="advanced-configuration" class="elem-anchor"></a>
<h1>Advanced Configuration<a href="#advanced-configuration" class="anchor-link"><span></span></a></h1>

<p>While logging can be enabled on the command line, specifying a configuration file allows for much more flexibility in what gets logged. The file is an XML file called <code class="code highlight language-text">LogConfiguration.xml</code>, and should be created in <code class="code highlight language-text">%LOCALAPPDATA%\JetBrains\{HostFullIdentifier}\v{WaveVersion}</code>.</p>

<aside class="note">
  <p> The <code class="code highlight language-text">{HostFullIdentifier}</code> is the name of the install folder for the current host, such as <code class="code highlight language-text">ReSharperPlatformVs12</code> for Visual Studio 2013. More details can be found in the section on <a href="/help/resharper/sdk/Extensions/Deployment/InstallProcess/HostIdentifiers.html"><span>Host Identifiers</span></a>. Similarly, the <code class="code highlight language-text">{WaveVersion}</code> is the version of the <a href="/help/resharper/sdk/Extensions/PlatformVersioning.html"><span>ReSharper Platform Wave</span></a>, e.g. <code class="code highlight language-text">v05</code> for ReSharper 10.0 or <code class="code highlight language-text">v04</code> for ReSharper 9.2.</p>
</aside>

<p>When running the ReSharper Platform in an <a href="/help/resharper/sdk/Extensions/Deployment/LocalInstallation/ExperimentalInstance.html"><span>experimental instance of Visual Studio</span></a>, the logging subsystem will also look for a file called <code class="code highlight language-text">LogConfiguration.Debug.xml</code>, allowing for a separate configuration for debugging extensions in experimental instances. This file is looked for first, and if it doesn’t exist, the <code class="code highlight language-text">LogConfiguration.xml</code> file is used instead.</p>

<aside class="tip">
  <p> A separate log file can be used for tests, too. The test host use “Tests” as the host identifier, and “Test” as the sub-configuration suffix in the filename, which means tests will look for a file called <code class="code highlight language-text">LogConfiguration.Test.xml</code> in the <code class="code highlight language-text">%LOCALAPPDATA%\JetBrains\Tests\v{WaveVersion}</code> folder. If this file doesn’t exist, it will then look for <code class="code highlight language-text">LogConfiguration.xml</code> in the same folder.</p>
</aside>

<p>The best way to set up a log file is via the <a href="/help/resharper/sdk/Platform/Logging.html#logging-options-page"><span>Logging Options Page</span></a> which is only visible when in <a href="/help/resharper/sdk/Extensions/InternalMode.html"><span>Internal Mode</span></a>.</p>

<p>The file format is fairly straightforward:</p>

<div class="code-block" data-lang="xml"><code class="code-block__wrapper"><span class="nt">&lt;configuration&gt;</span>

  <span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">"file"</span> <span class="na">class=</span><span class="s">"JetBrains.Util.Logging.FileLogEventListener"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;arg&gt;</span>c:\logs\resharper-{date}.log<span class="nt">&lt;/arg&gt;</span>
  <span class="nt">&lt;/appender&gt;</span>

  <span class="nt">&lt;root</span> <span class="na">level=</span><span class="s">"VERBOSE"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;appender-ref&gt;</span>file<span class="nt">&lt;/appender-ref&gt;</span>
  <span class="nt">&lt;/root&gt;</span>

  <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"JetBrains.Platform.Util"</span> <span class="na">level=</span><span class="s">"OFF"</span> <span class="nt">/&gt;</span>

  <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"JetBrains.DataFlow"</span> <span class="na">level=</span><span class="s">"TRACE"</span> <span class="na">additivity=</span><span class="s">"false"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;appender-ref&gt;</span>file<span class="nt">&lt;/appender-ref&gt;</span>
  <span class="nt">&lt;/logger&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></div>

<p>The <code class="code highlight language-text">appender</code> element defines an appender/listener, which is the class that will listen for events and output them.</p>

<ul>
  <li><code class="code highlight language-text">name</code> - the <code class="code highlight language-text">name</code> attribute is required so the appender can be referenced later in the file.</li>
  <li><code class="code highlight language-text">class</code> - the <code class="code highlight language-text">class</code> attribute is the fully qualified type name of the appender class. The class must implement the <code class="code highlight language-text">ILogEventListener</code> interface.</li>
  <li><code class="code highlight language-text">pattern</code> - the <code class="code highlight language-text">pattern</code> attribute (not shown) defines a pattern that can be used to define the output pattern for messages. See <a href="#appender-patterns"><span>below</span></a> for more details.</li>
  <li><code class="code highlight language-text">arg</code> - the <code class="code highlight language-text">arg</code> element is used to pass arguments to the constructor of the appender. Multiple child <code class="code highlight language-text">arg</code> elements are allowed, and are passed as-is, as strings, to the appender. It is up to the appender to interpret the argument value. For example, the <code class="code highlight language-text">FileLogEventListener</code> will substitute the current date in the value <code class="code highlight language-text">C:\logs\resharer-{date}.log</code>.</li>
</ul>

<p>The <code class="code highlight language-text">root</code> element defines the logging level and appenders that apply for all categories, unless otherwise overridden. It is the default way of setting the logging details for the Platform.</p>

<ul>
  <li><code class="code highlight language-text">level</code> - this is the logging level, as text. See <a href="/help/resharper/sdk/Platform/Logging.html#logging-levels"><span>here</span></a> for the list of logging levels.</li>
  <li><code class="code highlight language-text">appender-ref</code> - the <code class="code highlight language-text">appender-ref</code> child elements specify the name of the appenders that are to be used to log events. The appenders need to be created in <code class="code highlight language-text">appender</code> elements at the head of the file.</li>
</ul>

<p>The <code class="code highlight language-text">logger</code> element defines the logging level and appenders to use for a category. When creating a logger, the code can specify a category, usually a namespace. This allows for logging to be configured differently for different parts of the Platform. For example, the <code class="code highlight language-text">JetBrains.Platform.Util</code> category can be set to <code class="code highlight language-text">OFF</code> to disable all logging from components in the <code class="code highlight language-text">JetBrains.Platform.Util</code> namespace, or the <code class="code highlight language-text">JetBrains.DataFlow</code> namespace can be configured to output to a different file, and capture events at a different logging level.</p>

<ul>
  <li><code class="code highlight language-text">name</code> - the <code class="code highlight language-text">name</code> attribute is required to specify the category that is to be configured.</li>
  <li><code class="code highlight language-text">level</code> - the <code class="code highlight language-text">level</code> attribute allows overriding the <code class="code highlight language-text">root</code> logging level.</li>
  <li><code class="code highlight language-text">additivity</code> - the <code class="code highlight language-text">additivity</code> attribute is a boolean value to control if previously declared appenders are also used for this category. The default value is <code class="code highlight language-text">true</code>.</li>
  <li><code class="code highlight language-text">appender-ref</code> - the <code class="code highlight language-text">appender-ref</code> child elements can be used to specify one or more appenders that will be used to output the log events. More than one element can be specified. All appenders must be specified in <code class="code highlight language-text">appender</code> elements at the head of the file.</li>
</ul>

<p>The ReSharper Platform will pick up changes to the file automatically, without requiring a restart.</p>

<a name="built-in-appenders" class="elem-anchor"></a>
<h3>Built in appenders<a href="#built-in-appenders" class="anchor-link"><span></span></a></h3>

<p>The ReSharper Platform ships with a number of appenders:</p>

<ul>
  <li><code class="code highlight language-text">JetBrains.Util.Logging.DebugOutputLogEventListener</code> outputs log events to an attached debugger, using the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363362.aspx" data-external="true" target="_blank" rel="noopener noreferrer"><span><code class="code highlight language-text">OutputDebugString</code></span></a> method.
    <ul>
      <li>It can accept a single string argument that defines a prefix to be output before each event.</li>
    </ul>
  </li>
  <li><code class="code highlight language-text">JetBrains.Util.Logging.FileLogEventListener</code> outputs log events to a file.
    <ul>
      <li>It requires a single string argument specifying the file path. It will process the string and substitute special variables to make the log file unique.
        <ul>
          <li><code class="code highlight language-text">{pid}</code> - process ID</li>
          <li><code class="code highlight language-text">{pname}</code> - process name</li>
          <li><code class="code highlight language-text">{temp}</code> - full path to the <code class="code highlight language-text">%TEMP%</code> folder.</li>
          <li><code class="code highlight language-text">{date}</code> - the current date.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="code highlight language-text">JetBrains.Util.Logging.MessageBoxListener</code> will display a message box when an event’s message matches a given regular expression.
    <ul>
      <li>It requires two string arguments. The first is a regular expression that must match an event’s message. The second is the text to be shown when the event matches.</li>
    </ul>
  </li>
  <li><code class="code highlight language-text">LogEventListener</code> is a listener that will call a given <code class="code highlight language-text">Action&lt;LogEvent&gt;</code> when an event is logged. It isn’t intended to be used from the configuration file, but from code.</li>
  <li><code class="code highlight language-text">TextWriterLogEventListener</code> is also intended to be used by code, writing events to a given <code class="code highlight language-text">TextWriter</code>.</li>
  <li><code class="code highlight language-text">ConsoleToolLogger</code>, <code class="code highlight language-text">MsBuildToolLogger</code> and <code class="code highlight language-text">TeamCityToolLogger</code> are all used by command line tools to log events when running in the command line, as MSBuild tasks, or in Team City. They are automatically configured by the console host.</li>
</ul>

<a name="appender-patterns" class="elem-anchor"></a>
<h3>Appender patterns<a href="#appender-patterns" class="anchor-link"><span></span></a></h3>

<p>The <code class="code highlight language-text">pattern</code> attribute of the <code class="code highlight language-text">appender</code> element can be used to format log messages. Control sequences beginning with the percent symbol <code class="code highlight language-text">%</code> can be used to substitute parameters, e.g. <code class="code highlight language-text">%L</code> is substituted with the log level.</p>

<ul>
  <li><code class="code highlight language-text">%d</code> - date. Accepts option parameter in curly braces. E.g. <code class="code highlight language-text">%d{hh:mm:ss}</code></li>
  <li><code class="code highlight language-text">%m</code> - original message.</li>
  <li><code class="code highlight language-text">%M</code> - message, including exception with stack trace if present.</li>
  <li><code class="code highlight language-text">%e</code> - short exception.</li>
  <li><code class="code highlight language-text">%E</code> - long exception.</li>
  <li><code class="code highlight language-text">%n</code> - new line.</li>
  <li><code class="code highlight language-text">%l</code> - log level’s first character, e.g. <code class="code highlight language-text">V</code> for <code class="code highlight language-text">VERBOSE</code>.</li>
  <li><code class="code highlight language-text">%L</code> - log level.</li>
  <li><code class="code highlight language-text">%c</code> - category (i.e. namespace). Accepts optional parameter in curly braces to limit length of namespace segments, e.g. <code class="code highlight language-text">%c{2}</code> will output the category <code class="code highlight language-text">A.B.C.D</code> as <code class="code highlight language-text">C.D</code>.</li>
  <li><code class="code highlight language-text">%t</code> - thread ID.</li>
  <li><code class="code highlight language-text">%T</code> - thread name.</li>
  <li><code class="code highlight language-text">%p</code> - process ID.</li>
  <li><code class="code highlight language-text">%P</code> - process name.</li>
</ul>

<p>Also, the width of the parameter can be specified between the percent symbol and the control character, e.g. <code class="code highlight language-text">%{min}.{max}c</code> will ensure that the output value has at least <code class="code highlight language-text">{min}</code> characters and at most <code class="code highlight language-text">{max}</code>. If there are fewer characters than <code class="code highlight language-text">{min}</code>, the text is right justified (padded with leading spaces). By specifying a negative number for <code class="code highlight language-text">{min}</code>, the text is left justified (padded with trailing spaces).</p>



                    <div class="navigation-links _bottom" data-swiftype-index="false">
                        
                        
                    </div>
                    <div class="last-modified">
                        Last modified: 7 January 2016
                    </div>
                </article>

                <section class="disqus">
                    <div id="disqus_thread"></div>
                </section>
            </div>
        </section>
    </main>
</div>

<script src="/help/resharper/sdk/app/app.js" data-baseurl="/help/resharper/sdk/"></script>

</body>
</html>

