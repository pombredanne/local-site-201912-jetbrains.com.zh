<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>基于图层的设置-帮助| JetBrains骑士</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Configuring_ReSharper__Sharing_Configuration_Options" data-breadcrumbs="Configuring__Index.xml|Streamline Your Work with Rider/Rider_Settings.xml|Rider Settings/Sharing_Configuration_Options.xml|Layer-Based Settings" data-main-title="Layer-Based Settings" data-article-props="
                {
                
            " seeals=":[=" titl=":=" referenc=",=" link=":=" ur=":" reference__templates__predefined.htm="," tex=":" predefined="" template="}=" ="" data-disqus-id="Sharing_Configuration_Options_rdr"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索JetBrains Rider帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>JetBrains Rider 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="visual_studio" data-group="primary">视觉工作室</option><option value="resharper" data-group="primary">锐化器</option><option value="_default" data-group="primary">默认（IntelliJ IDEA）</option><option value="visual_studio_osx" data-group="secondary">Visual Studio（macOS）</option><option value="resharper_osx" data-group="secondary">ReSharper（macOS）</option><option value="mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5+（IntelliJ IDEA）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Sharing_Configuration_Options.xml" data-toc="Configuring_ReSharper__Sharing_Configuration_Options">基于图层的设置</h1>    <a name="settings_ui"></a>            <p id="706b6e18">在“车手设置”对话框中<kbd data-visual_studio="Ctrl+Alt+S" data-resharper="Ctrl+Alt+S" data-_default="Ctrl+Alt+S" data-visual_studio_osx="⌘ ," data-resharper_osx="⌘ ," data-mac_os_x_10.5_="⌘ ,">Ctrl+Alt+S</kbd> ，您可以查看页面图标以了解特定页面使用哪种设置管理机制：</p>            <figure><img alt="车手：代码格式设置" title="车手：代码格式设置" src="/help/img/rider/2019.2/code_style_settings.png" id="4adb9266" width="382" height="164"></figure>            <p id="97516009">未标记任何图标的页面将承载保存在用户配置文件中的IDE设置。</p>                    <aside class="prompt" rel="97516009" id="5b0e8f97" data-type="tip" data-title=""><p>基于层<a name="compatible_settings"></a>设置与ReSharper兼容，因此，如果您使用ReSharper，Rider将读取并应用您在ReSharper中配置的设置。</p></aside>        <p id="a615f02b">Rider的后端功能继承自ReSharper。因此，使这些功能的首选项与ReSharper兼容，并使用分层设置的机制进行管理。</p>        <div class="chapter"><h2 id="layers" data-toc="Configuring_ReSharper__Sharing_Configuration_Options#layers">默认设置和设置层</h2>        <p id="21b3e597">开箱即用的JetBrains Rider带有默认的首选项集，这些首选项基于.NET世界中的约定和最佳实践。这些默认设置在产品中进行了硬编码，如有必要，您始终可以重置为默认设置。如果更改任何基于图层的设置，则更改将保存在设置图层中，JetBrains Rider会应用此更改覆盖相应的默认设置。最初，JetBrains Rider建议三层，您可以在其中保存您的首选项： <i id="6c277cd3">这台计算机</i> ， <i id="7ef1e586">解决方案团队共享的</i> <i id="4bd26bc1">解决方案</i>和<i id="4bd26bc1">解决方案个人的</i> 。</p>                <div class="chapter"><h3 id="this-computer-layer">“此计算机”层</h3>            <p id="97846775">此设置层指定用于您的个人全局设置，并适用于本地计算机上的所有解决方案。<br>相应的设置文件另存为：</p>            <ul class="list _ul"><li class="list__item" id="46e88c00"><p>Windows： <span class="filepath">％USERPROFILE％\。RiderXXX \ config \ resharper-host \ GlobalSettingsStorage。点设置</span>                </p></li><li class="list__item" id="456e1ec1"><p>macOS： <span class="filepath">〜/ Library / Preferences / RiderXXX / config / resharper-host / GlobalSettingsStorage。点设置</span>                </p></li><li class="list__item" id="4a21f8bb"><p>Linux： <span class="filepath">〜/。RiderXXX / config / resharper-host / GlobalSettingsStorage。点设置</span>                </p></li></ul>        </div>        <div class="chapter"><h3 id="solution-team-shared-layer">“解决方案团队共享”层</h3>            <p id="f3a42748">此层用于执行您的团队对当前解决方案的首选项的常用设置，例如<a href="Coding_Assistance__Naming_Style.html">命名样式</a> ， <a href="Enforcing_Code_Formatting_Rules.html">格式规则</a>等。此层中的设置将覆盖<span class="control">此计算机</span>层中的设置。<br>相应的设置文件<span class="filepath"><solutionname>.sln。DotSettings</solutionname></span>保存在解决方案文件夹中。<br>一旦将此文件添加到您的VCS中并且团队成员获得了该文件，他们将自动应用此文件中的设置，而无需重新加载解决方案。</p>        </div>        <div class="chapter"><h3 id="solution-personal-layer">“个人解决方案”层</h3>            <p id="2ef48afc">该层允许您覆盖团队共享设置而不更改它们。如果您只需要在此解决方案中应用某些设置并且独立于团队，则可能会发现这很有用。<br>相应的设置文件<span class="filepath"><solutionname>.sln。DotSettings.user</solutionname></span>将保存在解决方案文件夹中。您不应将其添加到VCS。</p>        </div>        <p id="29c9cc88">请看下面的插图。您可以看到最初所有设置层都是空的，因此JetBrains Rider可以“透视它们”并应用默认设置：</p>        <figure><img alt="默认和修改的设置层" title="默认和修改的设置层" src="/help/img/dotnet/2019.2/settings_default.png" id="2906287f" width="474" height="334"></figure>        <p id="611f1fb0">实际上，最初设置层文件不存在，它们是在您修改并保存一些基于层的设置后首先创建的。但是，如果存在设置文件，则对于其中未定义的所有基于图层的设置，它仍然是“透明的”。</p>    </div>    <div class="chapter"><h2 id="saving_overriding" data-toc="Configuring_ReSharper__Sharing_Configuration_Options#saving_overriding">保存并覆盖基于图层的设置</h2>        <p id="33d89b48">每次您更改Rider设置中的某些基于图层的设置<kbd data-visual_studio="Ctrl+Alt+S" data-resharper="Ctrl+Alt+S" data-_default="Ctrl+Alt+S" data-visual_studio_osx="⌘ ," data-resharper_osx="⌘ ," data-mac_os_x_10.5_="⌘ ,">Ctrl+Alt+S</kbd> ，您可以选择保存更改的位置。<br>            </p><figure><img alt="在JetBrains Rider选项中保存或保存到" title="在JetBrains Rider选项中保存或保存到" src="/help/img/rider/2019.2/save_settings.png" id="916a2415" width="365" height="170"></figure>                    <p></p>        <div class="chapter"><h3 id="smart_save">保存（智能保存）</h3>            <p id="80d4395f">这将应用“智能保存”逻辑。<br>使用它来保存您的修改，并保持团队共享和/或自定义图层（如果有）完整。换句话说，如果您只想保存更改而不必担心设置图层，请使用“ <span class="control">保存”</span> 。<br>                <span class="control">保存</span>会将您的更改保存到“此计算机”设置层，然后-如果在“解决方案团队共享”和/或自定义层中还有其他修改后的设置值，则更改也将保存到“解决方案个人”覆盖其他图层中的值。</p>            <p id="43e015e1">考虑下图中的示例。假设您更改了三个基于图层的设置，并使用“绿色”而不是“蓝色”值；这些更改已保存在“此计算机”层中。然后，您的团队决定在团队共享解决方案中设置A和C为“黄色”，因此，这些值由团队负责人保存在“解决方案团队共享”层中，JetBrains Rider会在您尽快应用它们从您的VCS中提取更改。最终，您意识到对设置A的“绿色”值感到更加自在，然后再次更改并保存了它，这一次它也保存在“解决方案个人”层中，使您可以应用所需的值无需更改团队共享层：</p>            <figure><img alt="应用和覆盖JetBrains Rider设置" title="应用和覆盖JetBrains Rider设置" src="/help/img/dotnet/2019.2/layers2.png" id="c8278799" width="467" height="330"></figure>        </div>        <div class="chapter"><h3 id="saveTo">保存到（保存到特定图层）</h3>            <p id="7b0cbc5c">您将需要使用这些命令将修改后的设置保存到“解决方案团队共享”层或自定义层。如果出于某些目的需要修改，还可以将其保存到其他任何层。</p>            <aside class="prompt" rel="7b0cbc5c" id="099f6244" data-type="note" data-title="">                <p id="8c4a0df9">不幸的是，在当前的实现中，无法看到定义了在“ <span class="control">设置”</span>对话框中看到的<span class="control">设置的</span>图层值。</p>            </aside>            <p id="fef3e054">将基于图层的设置保存到特定图层的唯一陷阱是，如果在同一层设置中用其他值定义了相同的设置，则该值在层堆栈中的其他层上的任何地方都不会应用。下图显示了我们如何尝试在“此计算机”层中将设置C更改为“红色”，以及为何无法更改结果设置。</p>            <figure><img alt="使用“保存到”保存JetBrains Rider设置" title="使用“保存到”保存JetBrains Rider设置" src="/help/img/dotnet/2019.2/layers3.png" id="26ad8db1" width="577" height="337"></figure>        </div>            </div>    <div class="chapter"><h2 id="managing" data-toc="Configuring_ReSharper__Sharing_Configuration_Options#managing">管理设置层</h2>        <p id="4a4de525">默认情况下，您可以使用“解决方案团队共享”层共享每个解决方案的JetBrains Rider设置-唯一要做的就是将<span class="filepath">* .dotSettings</span>文件置于版本控制下。<br>如果要以其他方式共享设置，则需要学习如何创建新的设置图层，以及如何导入和导出它们。为此，JetBrains Rider提供了<span>“设置图层”对话框</span> ，该对话框可在“ <span class="control">设置”</span>对话框中找到（通过单击“ <span class="control">管理图层”</span>按钮）。</p>        <p id="acd16752">自定义设置层将添加到现有默认层下。例如，如果要将自定义层的设置应用于所有解决方案，则将其添加到“此计算机”层下；否则，将其添加到解决方案特定的层之一下，具体取决于您是否希望它覆盖团队共享设置。</p>        <p id="e6b4097d">一旦添加了自定义设置层，它就会出现在“ <span class="control">设置”</span>对话框的<span class="control">“</span> <span class="control">保存”</span>选择器中，您可以使用它将修改后的设置保存到自定义层。您还可以通过<a href="#edit">编辑此层</a>来<a href="#edit">修改此层中的设置</a> 。</p>        <section class="procedure-steps"><h3 id="addCustom">添加自定义设置层</h3><ol class="list _decimal"><li class="list__item" id="ef4b1f1c"><p>在“ <span class="control">设置图层”</span>对话框中，选择要在其下添加图层的默认图层之一。</p></li><li class="list__item" id="02e641c1">                <p id="a4be88cf">请执行以下任一操作：</p>                <ul class="list _ul"><li class="list__item" id="e87f402c"><p>点击<span class="control">添加图层</span> <img alt="主题图标已添加参数屏幕灰色" title="主题图标已添加参数屏幕灰色" src="/help/img/dotnet/2019.2/ThemedIcon.AddedParameter.Screen.[Gray].png" id="50a0c532" width="16" height="16" class="inline-icon-16"> ，然后单击<span class="control">创建设置文件</span>以创建新的空设置层，或单击<span class="control">打开设置文件</span> / <span class="control">从URI添加</span>以从文件系统或任何URI包括现有设置层。</p></li><li class="list__item" id="b18cfed4"><p>右键单击并在“ <span class="control">添加层”</span>选择器中选择相应的命令之一。</p></li></ul>            </li><li class="list__item" id="e2acf8f2"><p>根据所选命令，为新的设置层文件指定名称和位置，或者使用来选择现有的设置层文件<span class="filepath">。DotSettings</span>扩展名。</p></li><li class="list__item" id="e22c451e"><p>根据添加的图层中的设置，将根据其在图层堆栈中的位置来应用，这可以在“ <span class="control">设置图层”</span>对话框中看到，即，如果在上层中定义了某些设置，则在生成的结果中将使用上层的值设置。如有必要，可以使用在选择图层时可用的“上<span class="control">移”</span>和“ <span class="control">下移”</span>按钮重新排列组中的自定义设置层。</p></li></ol></section>        <p id="09a5d6c3">作为使用“ <span class="control">设置”</span>对话框中的<span class="control">“</span> <span class="control">保存”</span>选择器将修改后的设置保存到特定图层的一种替代方法，您可以打开特定的设置图层进行编辑。</p>        <section class="procedure-steps"><h3 id="edit">编辑特定的设置层</h3><ol class="list _decimal"><li class="list__item" id="b04f742d"><p>在“ <span class="control">设置层”</span>对话框中，选择要编辑的设置层。</p></li><li class="list__item" id="165f6db6">                <p id="15c2af34">请执行以下任一操作：</p>                <ul class="list _ul"><li class="list__item" id="da7b49cf"><p>点击<span class="control">编辑图层</span> <img alt="ThemedIcon设置屏幕灰色" title="ThemedIcon设置屏幕灰色" src="/help/img/rider/2019.2/ThemedIcon.Settings.Screen.[Gray].png" id="da09b0dc" width="16" height="16" class="inline-icon-16"> 。</p></li><li class="list__item" id="dd1cbcf1"><p>右键单击并在上下文菜单中选择“ <span class="control">编辑</span> ”。</p></li><li class="list__item" id="5e9095d6"><p>双击所需的图层。</p></li></ul>            </li><li class="list__item" id="736172e0"><p>将打开“ <span class="control">设置”</span>对话框，在该对话框的顶部显示图层名称及其位置：</p><figure><img alt="JetBrains Rider：编辑单个设置图层" title="JetBrains Rider：编辑单个设置图层" src="/help/img/rider/2019.2/options_for_layer.png" id="9bd3d778" width="638" height="269"></figure>请注意，在此模式下看到的设置值要么取自默认值，要么取自编辑图层中定义的值。如果未在编辑的图层中定义设置，则显示默认设置的值（例如，下图中的“设置B”的值）。<figure><img alt="编辑单个设置层" title="编辑单个设置层" src="/help/img/dotnet/2019.2/editing_layer.png" id="6c3227f6" width="428" height="249"></figure>另请注意，在编辑设置层时，将不会看到<a href="Directory_Based_Settings.html">基于目录的设置</a> 。<p></p></li><li class="list__item" id="726ebe91"><p>根据需要在图层中编辑设置，然后单击“ <span class="control">保存”</span>以保存更改。</p></li></ol></section>        <p id="2d079a09">您可以将特定的设置子集从任何设置层导出到新的设置文件。然后，可以在JetBrains Rider的另一个实例上使用此文件来应用这些设置。</p>        <section class="procedure-steps"><h3 id="export_settings">从特定的设置层导出设置</h3><ol class="list _decimal"><li class="list__item" id="650780cd"><p>在“ <span class="control">设置层”</span>对话框中，选择一个应从中导出设置的设置层。</p></li><li class="list__item" id="8ac06c02">                <p id="e1274b06">请执行以下任一操作：</p>                <ul class="list _ul"><li class="list__item" id="6654047c"><p>在工具栏上，单击“ <span class="control">导入/导出自”</span> <img alt="ThemedIcon ImportExportLayer屏幕灰色" title="ThemedIcon ImportExportLayer屏幕灰色" src="/help/img/dotnet/2019.2/ThemedIcon.ImportExportLayer.Screen.[Gray].png" id="76cdf96e" width="16" height="16" class="inline-icon-16"> ，然后点击<span class="control">导出到文件</span> 。</p></li><li class="list__item" id="2a7bb902"><p>右键单击该图层，然后在上下文菜单中选择“ <span class="control">导出到文件</span> ”。</p></li></ul>            </li><li class="list__item" id="27e27a5f"><p>在打开的“ <span class="control">导出到文件”</span>对话框中，指定要导出的设置组，然后单击“ <span class="control">确定”</span> ，然后指定设置层文件的名称和位置。</p></li></ol></section>        <p id="edf6abb6">作为<a href="#addCustom">添加自定义设置层</a>的替代方法，您可以将设置的子集从该自定义层复制到现有默认层或自定义层之一。</p>        <section class="procedure-steps"><h3 id="import_settings">从设置图层文件导入设置</h3><ol class="list _decimal"><li class="list__item" id="535f1b4f"><p>在“ <span class="control">设置层”</span>对话框中，选择要在其中导入设置的设置层。</p></li><li class="list__item" id="9976d5bf">                <p id="e842a437">请执行以下任一操作：</p>                <ul class="list _ul"><li class="list__item" id="6094ec0c"><p>在工具栏上，单击“ <span class="control">导入/导出设置”</span> <img alt="ThemedIcon ImportExportLayer屏幕灰色" title="ThemedIcon ImportExportLayer屏幕灰色" src="/help/img/dotnet/2019.2/ThemedIcon.ImportExportLayer.Screen.[Gray].png" id="b733b1a8" width="16" height="16" class="inline-icon-16"> 。根据要导入的文件的位置，单击<span class="control">从文件</span> <span class="control">导入</span>或<span class="control">从URL导入</span> 。</p></li><li class="list__item" id="718fb548"><p>右键单击该层。<span class="control">从</span>上下文菜单中单击<span class="control">导入</span> ，然后单击<span class="control">从文件导入</span>或<span class="control">导入从URL。</span></p></li></ul>            </li><li class="list__item" id="bf883108"><p>指定要导入文件的位置。请注意，如果您选择从URL导入，则文件的路径应以UNC格式指定。</p></li><li class="list__item" id="3ff3803a"><p>在打开的“ <span class="control">从文件导入”</span>对话框中，指定要导入的设置组，然后单击“ <span class="control">确定”</span> 。</p></li></ol></section>        <p id="5de7f676">JetBrains Rider还允许您将设置的子集从一个已安装的设置层复制到另一层。</p>        <section class="procedure-steps"><h3 id="copy_settings">将设置从一层复制到另一层</h3><ol class="list _decimal"><li class="list__item" id="709a7170"><p>在“ <span class="control">设置层”</span>对话框中，选择要从中复制设置的设置层。</p></li><li class="list__item" id="71821e39">                <p id="219b6e82">请执行以下任一操作：</p>                <ul class="list _ul"><li class="list__item" id="5b11c8bf"><p>在工具栏上，单击“ <span class="control">将设置复制到”。</span> <img alt="ThemedIcon CopySettings屏幕呈灰色" title="ThemedIcon CopySettings屏幕呈灰色" src="/help/img/dotnet/2019.2/ThemedIcon.CopySettings.Screen.[Gray].png" id="8b98b311" width="16" height="16" class="inline-icon-16"> ，然后选择目标设置层。</p></li><li class="list__item" id="4cb55565"><p>右键单击该图层，在上下文菜单中选择“ <span class="control">将设置复制到</span> ”，然后选择目标设置图层。</p></li></ul>                            </li><li class="list__item" id="c0eb18a3"><p>在打开的“ <span class="control">复制到”</span>对话框中，指定要复制的设置组，然后单击“ <span class="control">确定”</span> 。</p></li></ol></section>        <p id="reset_settings">如有必要，您可以清除保存在特定图层中的所有设置。为此，右键单击该图层，然后在上下文菜单中单击“ <span class="control">重置</span> ”。</p>                <p id="036755a5">您也可以通过清除旁边的复选框来临时禁用自定义设置层，或者右键单击该自定义设置层并在上下文菜单中选择“ <span class="control">删除”</span> ，以卸载特定的自定义设置层。</p>        <aside class="prompt" rel="036755a5" id="6231ab1c" data-type="note" data-title="">            <p id="f6dd161b">请注意，在对话框中删除设置层时，不会从磁盘上删除该层文件，因此以后可以根据需要挂载该文件。</p>        </aside>    </div>    <div class="chapter"><h2 id="upgrading" data-toc="Configuring_ReSharper__Sharing_Configuration_Options#upgrading">将基于图层的设置升级到较新版本</h2>        <p id="f7e03550">有时，较新版本的JetBrains Rider可能会对基于图层的设置的存储格式进行修改。在这种情况下，受影响的设置文件会在新版本的首次启动时自动升级-JetBrains Rider只是将具有修改格式的设置添加到设置文件中。它还添加了一个条目，该条目指出已升级内容以防止进一步升级。例如：</p>        <div class="code-block" data-lang="markup">
            
            <s:boolean x:key="/Default/Environment/SettingsMigration/IsMigratorApplied/[migration_ID]/@EntryIndexedValue">真正</s:boolean>
            
        </div>        <p id="c2694b06">但是，即使基于层的设置文件已升级，仍可以与较旧的JetBrains Rider版本一起使用（例如，如果您与未升级的队友共享此文件），因为不推荐使用的设置既不会更改，也不会更改删除。除其他外，这意味着您可以<span class="emphasis">安全地</span>将自动升级的<span class="filepath">.dotSettings</span>文件中的<span class="emphasis">更改提交</span>到VCS。</p>        <p id="a83a4cd5">此处需要特别注意的是，当您在更新后返回较旧版本，然后使用该较旧版本更改某些设置，然后返回较新版本时，JetBrains Rider将不会第二次升级设置。因此，您更改的某些设置可能以较旧的格式保存，而较新的版本则不会读取。</p>        <p id="f84a28c2">因此，如果您（或您的团队）同时使用两个不同版本的JetBrains Rider，则可能要检查在一个版本中修改的首选项在另一版本中是否正确读取，如果没有，则只需在该版本中再次进行相同的修改即可。其他版本。</p>    </div>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Directory_Based_Settings.html">基于目录的设置</a> <a class="navigation-links__next" href="Sharing_Your_IDE_Settings.html">共享您的IDE设置</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>