<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta name="robots" content="noindex"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta charset="UTF-8"><title>Convert Anonymous to Named Type refactoring - Help | JetBrains Rider</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="Refactorings__Convert_Anonymous_to_Named_Type" data-disqus-id="Refactorings__Convert_Anonymous_to_Named_Type_rdr"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search JetBrains Rider Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>JetBrains Rider 2018.3 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="visual_studio" selected>Visual Studio</option><option data-group="primary" value="resharper">ReSharper</option><option data-group="primary" value="_default">Default (IntelliJ IDEA)</option><option data-group="secondary" value="visual_studio_osx">Visual Studio (macOS)</option><option data-group="secondary" value="resharper_osx">ReSharper (macOS)</option><option data-group="secondary" value="mac_os_x_10.5_">Mac OS X 10.5+ (IntelliJ IDEA)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 data-toc="Refactorings__Convert_Anonymous_to_Named_Type" id="Refactorings__Convert_Anonymous_to_Named_Type.xml">Convert Anonymous to Named Type refactoring</h1>            \    <p id="79578c9d">        Anonymous types are very convenient when you need to process a result of a query locally.        However, if you need to pass the result around your program        or if there are several queries that return the similar name/value parts, you may probably need a named type.        <br>        In such cases, JetBrains Rider can convert the existing usage (or usages) of an anonymous type into a named type        and update the usages.        If necessary, JetBrains Rider will find and convert similar anonymous types in the whole solution.        In the dialog that this refactoring provides, you can customize the created type — specify whether it        should have auto-properties or properties with backing fields,        or generate equality and formatting method overrides.    </p>    <aside class="tip sideblock" data-title="" rel="79578c9d" id="78e04502">        <p id="098a8a86">            The new named class can be created either as a nested class in the current type or as top-level class            in the current file.            If necessary, you can then use            <a href="Refactorings__Move__Type_to_Outer_Scope.html"><span>Move Type to Outer Scope refactoring</span></a> and            <a href="Refactorings__Move__Type_to_Another_File.html"><span>Move Type to Another File refactoring</span></a> to place the new class wherever you need.        </p>    </aside>    <p id="bbdc07e7">        In the example below, two similar anonymous types are converted into the        <code class="code">BookLIst</code> class, though we only invoke the refactoring on one of them.        All usages of the types found within the specified scope are modified accordingly:    </p>    <div class="table-wrapper"><table class="                 " width="100%" id="c40f5059"><thead><tr id="bc334bca" class="ijRowHead"><th id="6ff091c9"><p>Before refactoring</p></th><th id="002628b4"><p>After refactoring</p></th></tr></thead><tbody><tr id="0e43b8e5" class="ijRowOdd"><td id="1295c662"><p>                <div class="code-block" data-lang="C#">
class MyTest
{
    void Test(List&lt;Book&gt; books)
    {
        var bookList =
            from book in books
            select new
                {book.Author, book.Title};
    }
}

class MyNewTest
{
    void Foo(List&lt;Book&gt; library)
    {
        var bookCatalog =
            from item in library
            select new
                {item.Author, item.Title};
    }
}
                </div>            </p></td><td id="5b39afee"><p>                <div class="code-block" data-lang="C#">
public class BookList
{
    public string Author { get; set; }
    public string Title { get; set; }
}

class MyTest
{
    private void Test(List&lt;Book&gt; books)
    {
        var bookList =
            from book in books
            select new BookList
                {Author = book.Author,
                    Title = book.Title};
    }
}

class MyNewTest
{
    private void Foo(List&lt;Book&gt; library)
    {
        var bookCatalog =
            from item in library
            select new BookList
                {Author = item.Author,
                    Title = item.Title};
    }
}
                </div>            </p></td></tr></tbody></table></div>    <p id="84c49a04">        Note that this refactoring cannot be applied if the anonymous type initializer has another anonymous        initializers inside. For example:        <div class="code-block" data-lang="C#">
var bookList = from book in books
    select new {book.Author, title = new {book.Title}};
        </div>        Here you can apply this refactoring to        <code class="code">new {book.Title}</code>        but not to        <code class="code">new {book.Author, title = new {book.Title}}</code>.    </p>    <section class="procedure-steps"><h2 id="f2186b3a">To convert anonymous type(s) to a named type</h2><ol class="list _decimal"><li class="list__item" id="ae43016b"><p>            Place the caret at either anonymous type initializer or at the            <code class="code">new</code>            keyword.        </p></li><li class="list__item" id="7774468a">            Do one of the following:            <ul class="list _ul"><li class="list__item" id="6f4eaa55"><p>                    Press                    <kbd data-visual_studio="Ctrl+Shift+R" data-resharper="Ctrl+Shift+R" data-_default="Ctrl+Shift+Alt+T" data-visual_studio_osx="⌘ ⇧ R" data-resharper_osx="⌘ ⇧ R" data-mac_os_x_10.5_="^ T">Ctrl+Shift+R</kbd>                    and then choose                    <span class="control">Replace Anonymous Type with Named Class</span>                </p></li><li class="list__item" id="f5dd9681"><p>                    Choose                    <span data-skip-index="skip" class="menupath">Refactor | Replace Anonymous Type with Named Class</span>                    in the main menu.                </p></li></ul>                            The                <span class="control">Replace Anonymous Type with Named Class</span>                dialog will open.                    </li><li class="list__item" id="9bd83b5b">            Specify a name for a new class, and configure the following options:            <ul class="list _ul"><li class="list__item" id="d752d02c"><p>                    <span class="control">Scope</span>: JetBrains Rider can find anonymous types with compatible object initializers                    (similar name/value parts) in the whole solution, or you can apply the refactoring to the current                    method only.                </p></li><li class="list__item" id="38ca7a14"><p>                    <span class="control">Location</span>:                    the new named type can be created as a nested class in the current type, or created aa an                    independent class in the current namespace.                </p></li><li class="list__item" id="738cff8d"><p>                    <span class="control">How to generate properties</span>: JetBrains Rider can generate either read and write                    auto-properties, or read-only properties with backing fields in the new class.                </p></li><li class="list__item" id="134552f4"><p>                    <span class="control">How to generate methods</span>: as an option, you can choose to create stubs for                    <code class="code">Equals()</code>,                    <code class="code">GetHashCode()</code>, and                    <code class="code">ToString()</code>                    method overrides in the new class.                </p></li><li class="list__item" id="306c5f5b"><p>                    <span class="control">Show processed usages in 'Find Results'</span>: if this check box is selected,                    JetBrains Rider shows all anonymous types that it finds and converts in the                    <a href="Reference__Windows__Find_Results_Window.html"><span>Find Results window</span></a>.                    You may want to tick this check box if you are converting similar anonymous types in the                    whole solution.                </p></li></ul>        </li><li class="list__item" id="c514dacf"><p>            To apply the refactoring, click            <span class="control">Next</span>.        </p></li><li class="list__item" id="13de1e49">            If no conflicts are found, JetBrains Rider performs the refactoring immediately.            Otherwise, it prompts you to            <a href="Refactorings__Resolving_Conflicts_in_Refactorings.html">resolve conflicts</a>.            <aside class="tip sideblock" data-title="" rel="7dc75185" id="cc7b5f4a">                <p id="f3c2159b">                            Right after the refactoring has been completed, all changes that it makes anywhere,        including other files, are registered as a single operation.        So you can use the        <span class="control">Undo</span>        action        (<kbd data-visual_studio="Ctrl+Z" data-resharper="Ctrl+Z" data-_default="Ctrl+Z" data-visual_studio_osx="⌘ Z" data-resharper_osx="⌘ Z" data-mac_os_x_10.5_="⌘ Z">Ctrl+Z</kbd>) to roll back all these changes with a single keystroke.                    </p>            </aside>        </li></ol></section>    <figure><img alt="Replace Anonymous Type with Named Class" title="Replace Anonymous Type with Named Class" src="/help/img/rider/2018.3/Convert_Anonymous_to_Named_Type__dialog_box.png" id="d9245485" width="419" height="450"></figure>    <p id="e7d1f240">        If you have selected        <span class="control">Show processed usages in 'Find Results'</span>,        the new class and modified usages are shown in the        <a href="Reference__Windows__Find_Results_Window.html"><span>Find Results window</span></a>:    </p>    <figure><img alt="Results of converting anonymous types into a named class" title="Results of converting anonymous types into a named class" src="/help/img/rider/2018.3/Convert_Anonymous_to_Named_Type__Find_Results.png" id="f83e59ca" width="649" height="275"></figure>                                        <div class="last-modified" data-skip-index="skip">Last modified: 25 April 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Refactorings__Convert_Abstract_Class_to_Interface.html">Convert Abstract Class to Interface</a><a class="navigation-links__next" href="Refactorings__Convert_Extension_Method_to_Plain_Static.html">Convert Extension Method to Plain Static</a></div><section class="seealso" data-skip-index="skip"><div class="seealso__header"><h2>See Also</h2></div><div class="seealso__content"><div class="seealso__col" data-skip-index="skip"><h3>Procedures:</h3><ul class="list"><li class="list__item"><a href="Refactorings__Index.html"><span>Refactorings</span></a></li><li class="list__item"><a href="Refactorings__Convert_Property_to_Auto-Property.html"><span>Convert Property to Auto-Property refactoring</span></a></li></ul></div></div></section></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>