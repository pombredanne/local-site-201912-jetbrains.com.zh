<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta name="robots" content="noindex"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta charset="UTF-8"><title>Karma - Help | JetBrains Rider</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="Running_Unit_Tests_on_Karma" data-disqus-id="Running_Unit_Tests_on_Karma_rdr"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search JetBrains Rider Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>JetBrains Rider 2018.3 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="visual_studio" selected>Visual Studio</option><option data-group="primary" value="resharper">ReSharper</option><option data-group="primary" value="_default">Default (IntelliJ IDEA)</option><option data-group="secondary" value="visual_studio_osx">Visual Studio (macOS)</option><option data-group="secondary" value="resharper_osx">ReSharper (macOS)</option><option data-group="secondary" value="mac_os_x_10.5_">Mac OS X 10.5+ (IntelliJ IDEA)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 data-toc="Running_Unit_Tests_on_Karma" id="Running_Unit_Tests_on_Karma.xml">Karma</h1>                                                        <p id="ws_js_test_karma_intro">            <a href="http://karma-runner.github.io/0.12/" data-external="true" target="_blank" rel="noopener noreferrer"><span>Karma</span></a> is a tool for testing client-side JavaScript.                            Karma executes tests against your application running in a real browser, which ensures correctness and trustworthiness of test results.                JetBrains Rider integrates with Karma so you can run, debug, and monitor coverage of your tests from inside the IDE.            You can see the test results in a treeview and easily navigate to the test source from there.            Test status is shown next to the test in the editor with an option to quickly run it or debug it.        </p>    <div class="chapter"><h2 id="ws_karma_before_you_start" data-toc="Running_Unit_Tests_on_Karma#ws_karma_before_you_start">Before you start</h2>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="f8bcabd7"><p>                        Download and install        <a href="http://nodejs.org/#download" data-external="true" target="_blank" rel="noopener noreferrer"><span>Node.js</span></a>.                </p></li><li class="list__item" id="b4492f22"><p>                                Install and enable the Karma repository plugin on the        <a href="Plugins_Settings.html">Plugins page</a>  as described in <a href="Managing_Plugins.html"><span>Managing Plugins</span></a>.                </p></li></ol></section>    </div><div class="chapter"><h2 id="ws_karma_installation" data-toc="Running_Unit_Tests_on_Karma#ws_karma_installation">Installing Karma and plugins</h2>    <aside class="tip sideblock" data-title="" rel="ws_karma_installation" id="5e8bcd1d">        <p id="6ebb69ab">                            You can also install the <code class="code">karma</code> package on the <a href="Node_js.html">Node.js and NPM page</a>        as described in <a href="Installing_and_Removing_External_Software_Using_Node_Package_Manager.html"><span>npm and Yarn</span></a>.            </p>    </aside>    <section class="procedure-steps"><ul class="list _no-style"><li class="list__item" id="553ecc64">                        Open the built-in JetBrains Rider <span class="control">Terminal</span> (<kbd data-visual_studio="Ctrl+Alt+1" data-resharper="Ctrl+Alt+1" data-_default="Alt+F12" data-visual_studio_osx="⌘ ^ 1" data-resharper_osx="⌘ ^ 1" data-mac_os_x_10.5_="⌥ F12">Ctrl+Alt+1</kbd>)            and type one of the following commands at the command prompt:        <ul class="list _bullet"><li class="list__item" id="ae4eac3e"><p>                <code class="code">npm install</code> if Karma and all the required plugins are already defined in <code class="code">package.json</code>.            </p></li><li class="list__item" id="9b8d5908"><p>                To install Karma and the required plugins (e.g. <code class="code">karma-jasmine</code> or <code class="code">jasmine-core</code>)                as  <a href="https://docs.npmjs.com/getting-started/using-a-package.json#specifying-packages" data-external="true" target="_blank" rel="noopener noreferrer"><span>development dependencies</span></a>                <div class="code-block" data-lang="Java">
                    npm install&nbsp;--save-dev karma
                    npm install&nbsp;--save-dev &lt;required_karma_plugin&gt; &lt;another_required_karma_plugin&gt;
                </div>            </p></li></ul>            Learn more on the <a href="https://karma-runner.github.io/1.0/intro/installation.html" data-external="true" target="_blank" rel="noopener noreferrer"><span>Karma official website</span></a>.        </li></ul></section></div>    <div class="chapter"><h2 id="karmaConfig" data-toc="Running_Unit_Tests_on_Karma#karmaConfig">Generating a Karma configuration file</h2>     <p id="c9a90b4c">Karma tests are run according to a <span class="filepath">karma.conf.js</span> configuration file         which is generated in the interactive mode. If you already have <span class="filepath">karma.conf.js</span> in your project, just skip this step.         For more details on Karma configuration, see <a href="http://karma-runner.github.io/0.12/config/configuration-file.html" data-external="true" target="_blank" rel="noopener noreferrer"><span>Karma official website</span></a>.     </p>        <section class="procedure-steps"><h2 id="0a2b9345">To create a Karma configuration file</h2><ol class="list _decimal"><li class="list__item" id="2df32e4a">                Open the <span class="control">Terminal</span> and start the <span class="filepath">karma.conf.js</span> generation wizard by typing one of the following depending on your operating system:                <ul class="list _bullet"><li class="list__item" id="2a0aea31"><p>                        For macOS and Linux:<br>                        <span class="filepath">./node_modules/karma/bin/karma init</span>                    </p></li><li class="list__item" id="66d62c6f"><p>                        For Windows:<br>                        <code class="code">npm install&nbsp;-g karma-cli</code><br>                        <code class="code">karma init</code>                    </p></li></ul>            </li><li class="list__item" id="fd537a45"><p>                Answering the questions of the wizard, specify the testing framework to use and                the browsers to be captured automatically.                        See also <a href="http://karma-runner.github.io/0.12/config/files.html" data-external="true" target="_blank" rel="noopener noreferrer"><span>Karma Files: Pattern matching</span></a>.            </p></li></ol></section>        </div>    <div class="chapter"><h2 id="ws_karma_running" data-toc="Running_Unit_Tests_on_Karma#ws_karma_running">Running tests</h2>        <aside class="tip sideblock" data-title="" rel="createRunConfigKarma" id="6c787d04">            <p id="b444e8be">                To run or debug tests in Headless Chrome, type <code class="code">ChromeHeadless</code> in the <span class="control">Browsers to start</span> field.                Alternatively, add <code class="code">'ChromeHeadless'</code> to the <code class="code">browsers</code> configuration option in <span class="filepath">karma.conf.js</span>.                See <a href="https://developers.google.com/web/updates/2017/06/headless-karma-mocha-chai" data-external="true" target="_blank" rel="noopener noreferrer"><span>Automated testing with Headless Chrome</span></a> for details.            </p>        </aside>        <p id="90983420">                                            With JetBrains Rider, you can quickly run a single Karma test right from the editor or create a run/debug configuration to execute some or all of your tests.            </p>        <section class="procedure-steps"><h2 id="e4807b4c">To run a single test from the editor</h2><ul class="list _no-style"><li class="list__item" id="e439a416"><p>                Click <img class="inline-icon-16" src="/help/img/rider/2018.3/icons.toolwindows.toolWindowRun.svg@2x.png" width="16" alt="Run"> or <img class="inline-icon-16" src="/help/img/rider/2018.3/icons.actions.rerun@2x.png" width="16" alt="Rerun"> in the left gutter            and choose <span class="control">Run &lt;test_name&gt;</span> from the pop-up list.                    You can also see whether a test has passed or failed right in the editor,        thanks to the <span class="emphasis">test status</span> icons <img alt="ws_icon_test_status.png" title="ws_icon_test_status.png" src="/help/img/idea/2018.3/ws_icon_test_status.png" id="16bbe5b0" width="12" height="13" class="inline-icon-12"> in the left gutter.                </p></li></ul></section>        <section class="procedure-steps"><h2 id="createRunConfigKarma">To create a Karma run configuration</h2><ol class="list _decimal"><li class="list__item" id="open_edit_run_config_dialog"><p>                                    Select a test file in the <span class="control">Project</span> tool window        and choose <span class="control">Create &lt;file name&gt;</span> on the context menu.                        The                    <a href="Run_Debug_Configuration_Karma.html">Run/Debug Configuration: Karma</a>                    dialog box opens.                </p></li><li class="list__item" id="2984a83e">                                                    Specify the Node.js interpreter to use. This can be a <a href="Developing_Node_JS_Applications.html#ws_node_configure_local_node_interpreter">local Node.js interpreter</a>            or a <a href="Developing_Node_JS_Applications.html#ws_node_wsl">Node.js on Windows Subsystem for Linux</a>.                                        <p id="6cf657d6">                            Optionally, specify the <a href="Run_Debug_Configuration_Node_JS.html#node_parameters">Node.js-specific option parameters</a> and        the <a href="http://en.wikipedia.org/wiki/Environment_variable" data-external="true" target="_blank" rel="noopener noreferrer"><span>environment variables</span></a> to be passed to Node.js.                        </p>                </li><li class="list__item" id="karma_run_config_browser"><p>                    Specify the location of the <code class="code">karma</code> package,                    the path to <span class="filepath">karma.conf.js</span>, and the browsers from which Karma will access its server.                </p></li></ol></section>        <section class="procedure-steps"><h2 id="6b0851fd">To run tests via a run configuration</h2><ol class="list _decimal"><li class="list__item" id="0c0d83a9"><p>                                                            Select the Karma run/debug configuration from the list on the main toolbar        and click <img class="inline-icon-16" src="/help/img/rider/2018.3/icons.toolwindows.toolWindowRun.svg@2x.png" width="16" alt="Run with Coverage">&nbsp;to the right of the list.                            </p></li><li class="list__item" id="bf59c56d"><p>                    The Karma test server starts automatically without any steps from your side. View and analyze messages from the test server in the <span class="control">Karma Server</span> tab                    of the <span class="control">Run</span> tool window.                </p></li><li class="list__item" id="0231ff81"><p>                            <span>Monitor test execution</span>        in the        <span class="control">Test Runner</span> tab of the        <span class="control">Run</span>        tool window.                    </p></li></ol></section>        <section class="procedure-steps"><h2 id="ws_js_test_rerun_failed_tests">To rerun failed tests</h2><ul class="list "><li class="list__item" id="b2dbabad"><p>                        In the <span>Test Runner tab</span>, click <img class="inline-icon-16" src="/help/img/rider/2018.3/icons.runConfigurations.rerunFailedTests.svg@2x.png" width="16" alt="Rerun Failed Tests button"> on the toolbar.        JetBrains Rider will execute all the tests that failed during the previous session.                    <figure><img alt="Rerun a failed Karma test" title="Rerun a failed Karma test" src="/help/img/idea/2018.3/ws_rerun_failed_tests_karma_button.png" id="8cad0dea" width="600" height="209"></figure>            </p></li><li class="list__item" id="f3d8b5f2"><p>                To rerun a specific failed test, select <span data-skip-index="skip" class="menupath">Run &lt;test name&gt;</span> on its context menu.            </p></li></ul></section>        <aside class="tip sideblock" data-title="" rel="ws_js_test_rerun_failed_tests" id="4ef57aa7">            <p id="c670d005">                See <span>Rerunning Tests</span> for details.            </p>        </aside>    </div>    <div class="chapter"><h2 id="ws_karma_navigation" data-toc="Running_Unit_Tests_on_Karma#ws_karma_navigation">Navigation</h2>                        <p id="ff9bfb39">            With JetBrains Rider, you can jump between a file and the related test file.            Navigation from a test result in the            <span>Test Runner Tab</span> to the test is also supported.        </p>        <section class="procedure-steps"><h2 id="naming_convention">To jump between a file and the related test file</h2><ul class="list _no-style"><li class="list__item" id="dcf09dff"><p>            Open the file in the editor and choose <span data-skip-index="skip" class="menupath">Go To | Test</span> or <span data-skip-index="skip" class="menupath">Go To | Test Subject</span>            on the context menu, or just press <kbd data-visual_studio="N/A" data-resharper="N/A" data-_default="Ctrl+Shift+T" data-visual_studio_osx="N/A" data-resharper_osx="N/A" data-mac_os_x_10.5_="⌘ ⇧ T">N/A</kbd>.            </p></li></ul></section>                <aside class="tip sideblock" data-title="" rel="naming_convention" id="c3930d08">            <p id="f37bf98e">                The test file should follow popular naming conventions,                e.g. have a <code class="code">.test.</code>, <code class="code">.spec.</code> or <code class="code">_spec.</code> suffix and should be located either next to the source file or in a <code class="code">test</code> folder.            </p>        </aside>        <section class="procedure-steps"><h2 id="b0a9284e">To jump from a test result to the test</h2><ul class="list "><li class="list__item" id="35e73c29"><p>            Select the test name in the <span class="control">Test Runner</span> tab and choose <span class="control">Jump to Source</span> on the context menu.            The test file opens in the editor  with the cursor placed at the test definition.            </p></li><li class="list__item" id="b29abca0"><p>                For failed tests, JetBrains Rider brings you to the failure line in the test from the stack trace.                    If the exact line is not in the stack trace, you will be taken to the test definition.                            </p></li></ul></section>        </div><div class="chapter"><h2 id="ws_karma_debugging" data-toc="Running_Unit_Tests_on_Karma#ws_karma_debugging">Debugging tests</h2>    <p id="f9899a05">                                        With JetBrains Rider, you can quickly start debugging a single Karma test right from the editor or create a run/debug configuration to debug some or all of your tests.        </p>    <section class="procedure-steps"><h2 id="36e0cc13">To start debugging a single test from the editor</h2><ul class="list _no-style"><li class="list__item" id="b19a9634"><p>        Click <img class="inline-icon-16" src="/help/img/rider/2018.3/icons.toolwindows.toolWindowRun.svg@2x.png" width="16" alt="Run"> or <img class="inline-icon-16" src="/help/img/rider/2018.3/icons.actions.rerun@2x.png" width="16" alt="Rerun"> in the left gutter        and choose <span class="control">Debug &lt;test_name&gt;</span> from the pop-up list.        </p></li></ul></section>    <section class="procedure-steps"><h2 id="ceb9e4b9">To launch test debugging via a run/debug configuration</h2><ol class="list _decimal"><li class="list__item" id="eb4a46d9"><p>                Create a Karma run/debug configuration <a href="#createRunConfigKarma">as described above</a>.            </p></li><li class="list__item" id="3c436139"><p>                                                        Select the Karma run/debug configuration from the list on the main toolbar        and click <img class="inline-icon-16" src="/help/img/rider/2018.3/icons.actions.startDebugger.svg@2x.png" width="16" alt="Run with Coverage">&nbsp;to the right of the list.                    </p></li><li class="list__item" id="1247c634"><p>                        In the        <a href="Debug_Tool_Window.html"><span>Debug window</span></a> that opens, proceed as usual:        <a href="Stepping_Through_the_Program.html">step through the tests</a>,        <span>stop and resume</span> test execution,        <a href="Examining_Suspended_Program.html">examine the test when suspended</a>, etc.                </p></li></ol></section></div>    <div class="chapter"><h2 id="ws_karma_code_coverage" data-toc="Running_Unit_Tests_on_Karma#ws_karma_code_coverage">Monitoring code coverage</h2>        <p id="cc9f51f7">            With JetBrains Rider,                            you can also monitor how much of your code is        <a href="http://en.wikipedia.org/wiki/Code_coverage" data-external="true" target="_blank" rel="noopener noreferrer"><span>covered with Karma tests</span></a>.        JetBrains Rider displays this statistics in a dedicated tool window and  marks covered and uncovered lines visually right in the editor.                To monitor coverage, you need to install the <code class="code">karma-coverage</code> package and update <span class="filepath">karma.conf.js</span>.        </p>        <section class="procedure-steps"><h2 id="switch_to_karma_home">To install karma-coverage</h2><ul class="list _no-style"><li class="list__item" id="f4739d4b"><p>                                Open the built-in JetBrains Rider <span class="control">Terminal</span> (<kbd data-visual_studio="Ctrl+Alt+1" data-resharper="Ctrl+Alt+1" data-_default="Alt+F12" data-visual_studio_osx="⌘ ^ 1" data-resharper_osx="⌘ ^ 1" data-mac_os_x_10.5_="⌥ F12">Ctrl+Alt+1</kbd>)                    and type <code class="code">npm install &nbsp;--save-dev karma-coverage</code>.            </p></li></ul></section>        <section class="procedure-steps"><h2 id="65cfabd7">To add karma-coverage definition to the configuration file</h2><ol class="list _decimal"><li class="list__item" id="51bf3c79"><p>                Open <span class="filepath">karma.conf.js</span> in the editor.            </p></li><li class="list__item" id="bea130b4"><p>                Locate the <code class="code">reporters</code> definition and add <code class="code">coverage</code> to the list of values in the format:                <div class="code-block" data-lang="Javascript">
reporters: ['progress', 'coverage']
                </div>            </p></li><li class="list__item" id="ec48bb3c"><p>                Add a <code class="code">preprocessors</code> definition and specify the coverage scope in the format:                <div class="code-block" data-lang="Javascript">
preprocessors: {'**/*.js': ['coverage']}
                </div>            </p></li></ol></section>        <section class="procedure-steps"><h2 id="2da3bd7f">To launch tests with coverage</h2><ol class="list _decimal"><li class="list__item" id="a9b9f20d"><p>                Create a Karma run/debug configuration <a href="#createRunConfigKarma">as described above</a>.            </p></li><li class="list__item" id="6fecdabe"><p>                                                        Select the Karma run/debug configuration from the list on the main toolbar        and click <img class="inline-icon-16" src="/help/img/rider/2018.3/icons.general.runWithCoverage.svg@2x.png" width="16" alt="Run with Coverage">&nbsp;to the right of the list.                            Alternatively, use the test icons in the editor to quickly run a specific suite or a test with coverage:                <figure><img alt="ws_mocha_quickly-run-with-coverage.png" title="ws_mocha_quickly-run-with-coverage.png" src="/help/img/idea/2018.3/ws_mocha_quickly-run-with-coverage.png" id="7ecda270" width="800" height="171"></figure>            </p></li><li class="list__item" id="9ff38cd5">                Monitor the code coverage in the <span>Coverage</span> tool window.                        Every time <span class="emphasis">Karma</span> tests are run, a coverage report is actually generated on the disk.        The format of a coverage report can be configured in the configuration file, for example:        <div class="code-block" data-lang="Java">
// karma.conf.js
module.exports = function(config) {
config.set({ ...
// optionally, configure the reporter
coverageReporter: { type : 'html', dir : 'coverage/' }
...
});};
        </div>        The following <code class="code">type</code> values are acceptable:        <ul class="list _bullet"><li class="list__item" id="416f30b3"><p><code class="code">html</code> produces a bunch of HTML files with annotated source code.</p></li><li class="list__item" id="776c3495"><p><code class="code">lcovonly</code> produces an <code class="code">lcov.info</code> file.</p></li><li class="list__item" id="b65b4a74"><p><code class="code">lcov</code> produces HTML + <code class="code">.lcov</code> files. This format is applied by default.</p></li><li class="list__item" id="74f26df2"><p><code class="code">cobertura</code> produces a <code class="code">cobertura-coverage.xml</code> file for easy Hudson integration.</p></li><li class="list__item" id="641b4044"><p><code class="code">text-summary</code> produces a compact text summary of coverage, typically to the console.</p></li><li class="list__item" id="c1c05974"><p><code class="code">text</code> produces a detailed text table with coverage for all files.</p></li></ul>                </li></ol></section>    </div>        <div class="last-modified" data-skip-index="skip">Last modified: 25 April 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Running_Unit_Tests_on_Jest.html">Jest</a><a class="navigation-links__next" href="Running_Unit_Tests_on_Mocha.html">Mocha</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>