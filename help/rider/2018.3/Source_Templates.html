<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta name="robots" content="noindex"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta charset="UTF-8"><title>Source Templates - Help | JetBrains Rider</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="Source_Templates" data-disqus-id="Source_Templates_rdr"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search JetBrains Rider Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>JetBrains Rider 2018.3 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="visual_studio" selected>Visual Studio</option><option data-group="primary" value="resharper">ReSharper</option><option data-group="primary" value="_default">Default (IntelliJ IDEA)</option><option data-group="secondary" value="visual_studio_osx">Visual Studio (macOS)</option><option data-group="secondary" value="resharper_osx">ReSharper (macOS)</option><option data-group="secondary" value="mac_os_x_10.5_">Mac OS X 10.5+ (IntelliJ IDEA)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Source_Templates" id="Source_Templates.xml">Source Templates</h1>            <aside class="note " data-title="" rel="Source_Templates.xml" id="56665bb0">            <p id="e5406f02">                This page describes templates for .NET languages.                Web-specific templates, which work in HTML, JavaScript, TypeScript, etc. are described in                <a href="Templates_Web.html"><span>Web-Specific Templates</span></a>.            </p>        </aside>        <p id="c6d0eb75">        Traditionally, templates or snippets are stored and managed outside of your source code.        This makes sense because normally a template helps you quickly produce some universal boilerplate code.        For these purposes, JetBrains Rider provides a lot of predefined        <a href="Templates__Applying_Templates__Creating_Source_Code_Using_Live_Templates.html">live templates</a>,        <a href="Templates__Applying_Templates__Surrounding_Code_Fragments_with_Templates.html">surround templates</a>, and        <a href="Templates__Applying_Templates__Creating_Files_from_Templates.html">file templates</a>.        You can also        <a href="Templates__Creating_and_Editing_Templates.html">create your own templates</a> of these types.    </p>    <p id="2b9dd734">        However, you may want to produce some repeatable code that is only relevant in your current project or solution.        JetBrains Rider allows you to streamline such tasks with        <i id="9f470bb2">Source Templates</i>.    </p>    <div class="chapter"><h2 id="848f9e68" data-toc="Source_Templates#848f9e68">How it Works</h2>        <p id="92b55dd8">            In contrast to traditional templates, source templates can be created anywhere in the code of your project            as            <a href="https://msdn.microsoft.com/en-us//library/bb383977.aspx" data-external="true" target="_blank" rel="noopener noreferrer"><span>extension methods</span></a>.            You can define them for some specific types of your project or for any standard types.            You can even make a source template available for all types by creating it as an extension method for            <code class="code">object</code>.        </p>        <p id="7cdfdef2">            As soon as a template is defined, it becomes available in the            <a href="Auto-Completing_Code.html">code completion list</a>            for the objects of            corresponding type and its inheritors.            When you choose the template in the list, JetBrains Rider inserts the code            from the body of the template method into your code.        </p>        <p id="c018a8b7">            Here is an example that illustrates a simplest application of a source template.            Our template            <code class="code">forEach</code>,            which will be available for all generic collections, will insert code that iterates the collection.            We can define the template in any static class in our project.            JetBrains Rider will identify it as a template by the            <code class="code">[SourceTemplate]</code>            attribute:        </p>        <div class="code-block" data-lang="C#">
public static class Foo
{
    [SourceTemplate]
    public static void forEach&lt;T&gt;(this IEnumerable&lt;T&gt; x)
    {
        foreach (var i in x)
        {
            //$ $END$
        }
    }
}
        </div>        <p id="d61df9ce">            To deploy this template, we now can use            <a href="Coding_Assistance_Code_Completion_Auto.html">automatic completion</a>            for any collection object:        </p>        <figure><img alt="Source template in the completion list" title="Source template in the completion list" src="/help/img/dotnet/2018.3/sourceTemplatesExample.png" id="29ba7130" width="360" height="152"></figure>        <p id="9ba3cec1">            When you select the template item, the object is replaced with the template text:        </p>        <div class="code-block" data-lang="C#">
public Test(IEnumerable&lt;string&gt; enumerable)
{
    foreach (var i in enumerable)
    {

    }
}
        </div>        <p id="db1986c8">            Note that the            <code class="code">//$ $END$</code>            comment in the template definition is nothing else but the            <a href="Templates__Template_Basics__Template_Variables.html#predefined">predefined template parameter            </a>            defining the caret position after the template is applied.            You can            <a href="#params">use other parameters</a>            in your template to make the template more flexible.        </p>    </div>    <div class="chapter"><h2 id="bcfb6c7b" data-toc="Source_Templates#bcfb6c7b">Why Use Source Templates</h2>        <p id="0cd2c795">            As mentioned above, source templates are most helpful for the code blocks that you want to reuse in the            current project or solution.            Here are some points that show the advantages of source templates over traditional templates:        </p>        <ul class="list _ul"><li class="list__item" id="8724fd97"><p>                To work with source templates, you do not have to switch anywhere â€” everything is in your editor.            </p></li><li class="list__item" id="1c3090c3"><p>                The templates are strongly typed, which means that you can only call them on relevant objects.            </p></li><li class="list__item" id="134f1409"><p>                As long as template definitions compile, you can be sure that the template code has no errors.            </p></li><li class="list__item" id="de49261b"><p>                While creating and editing source templates, your favorite JetBrains Rider features are at your disposal:                <a href="Design_time_Inspection.html">code inspection</a>,                <a href="Navigation_and_Search__Index.html">navigation features</a>,                <a href="Auto-Completing_Code.html">code completion</a>, just to name a few.            </p></li></ul>    </div>    <div class="chapter"><h2 id="creating" data-toc="Source_Templates#creating">Creating Source Templates</h2>        <p id="98ff2894">            For definitions of your source templates, you can create a new class or use an existing static class            where you keep your extension methods.        </p>        <div class="chapter"><h3 id="75908d8f">Template method and its body</h3>            <p id="f720d3ba">                A source template must be a public extension method and have the                <code class="code">[SourceTemplate]</code>                attribute. The attribute is defined in the                <code class="code">JetBrains.Annotations</code>                namespace, together with                <code class="code">[NotNull]</code>,                <code class="code">[CanBeNull]</code>                and other                <a href="Code_Analysis__Code_Annotations.html">code annotation attributes</a>.                Therefore, to define source template methods, you should                <a href="Code_Analysis__Annotations_in_Source_Code.html#enabling">                    enable JetBrains Rider code annotation support in your project</a>.            </p>            <p id="9e449b1c">                In the template body, you can write the code that does anything you like.                Normally, it does something with the caller object, but it is not necessary.            </p>            <p id="ef56c5f0">                You may also need to use some code that would not compile in the template method.                For example, you may want to use the caller object name to generate a name of a local variable.                In this case, place this code inside a line or a block comment that starts with the '$' sign:            </p>            <div class="code-block" data-lang="C#">
[SourceTemplate]
public static void Bar(this Entity entity)
{
    /*$ var $entity$Id = entity.GetId();;
    DoSomething($entity$Id); */
}
            </div>        </div>        <div class="chapter"><h3 id="params">Parameters and macros</h3>            <p id="7af394b4">                In source templates, you can use                <a href="Templates__Template_Basics__Template_Variables.html">parameters</a> amd                <a href="Templates__Template_Basics__Template_Macros.html">macros</a>.                Depending on the macro that you are going to use for the parameter,                you can choose between several ways of specifying and using parameters.            </p>            <ul class="list _ul"><li class="list__item" id="58be0a7d">                    <p id="0f1054e2">                        You can create a template parameter by adding a new parameter to the template method.                        By default, it will behave as an editable parameter, i.e. it will receive focus during the                        <a href="Reference__Hot_Spot_Session.html"><span>Hot Spot Session</span></a> when you apply the template.                        If you want to define a macro for this parameter,  you need to add the                        <code class="code">[Macro]</code> attribute as shown in the example below.                    </p>                    <ul class="list _ul"><li class="list__item" id="262e17d0"><p>                            The 'Expression' property of the attribute defines which macro should be used.                            You can specify one of the                            <a href="Template_Macros.html">available template macros</a>.                        </p></li><li class="list__item" id="1ea7d5df"><p>                            The 'Editable' property optionally specifies whether the user will be able to edit the                            parameter when the template is applied.                            By default, all user-defined parameters are editable; the value '-1'                            makes the parameter non-editable.                            <br>                            If the same parameter is used several times in the template, only one occurrence                            becomes editable when the template is applied;                            other occurrences are changed synchronously.                            If necessary, you can define which occurrence becomes editable by specifying its                            zero-based index in the 'Editable' property.                        </p></li></ul>                    <div class="code-block" data-lang="C#">
[SourceTemplate]
public static void newGuid(this object obj,
    [Macro(Expression = "guid()", Editable = -1)] string newguid)
{
    Console.WriteLine(newguid);
}
                    </div>                </li><li class="list__item" id="6e31494f">                    <p id="e50b5c7b">                        You can turn any local variable in your template method into a template parameter.                        To do so, you need to add the                        <code class="code">[Macro]</code>                        attribute to the template method definition,                        and specify the variable name in its 'Target' property. For example:                    </p>                    <div class="code-block" data-lang="C#">
[SourceTemplate]
[Macro(Target = "item", Expression = "suggestVariableName()")]
public static void forEach&lt;T&gt;(this IEnumerable&lt;T&gt; collection)
{
    foreach (var item in collection)
    {
        //$ $END$
    }
}
                    </div>                </li><li class="list__item" id="46088d3a">                    <p id="db15a886">                        You can use                        <a href="Templates__Template_Basics__Template_Variables.html#predefined">                            predefined parameters                        </a>                        as well as all user-defined parameters the same way as in other JetBrains Rider templates,                        wrapping the parameter identifier with two '$' signs                        (<code class="code">$param_name$</code>).                    </p>                    <p id="8cc6be1d">                        You can use user-defined template parameters inside string literals, e.g:                    </p>                    <div class="code-block" data-lang="C#">Console.WriteLine("A random GUID: $newguid$");</div>                    <p id="400990fa">                        To use template parameters outside string literals,                        you need to put them in a special template comment that starts with the 's' sign:                        <code class="code">//$ $param_name$</code>. or                        <code class="code">/*$ $param_name$ */</code>.                        For example:                    </p>                    <div class="code-block" data-lang="C#">
[SourceTemplate]
[Macro(Target = "newguid", Expression = "guid()", Editable = -1)]
public static void newGuid(this object obj)
{
    //$ var guid = "$newguid$";
    Console.WriteLine("A random GUID: $newguid$");
}
                    </div>                    <p id="f097a569">                        The caller object as well as                        template parameters created as method parameters and local variables                        can be used both with and without the '$' signs inside the special templates comments.                    </p>                </li></ul>        </div>    </div>    <div class="chapter"><h2 id="applying" data-toc="Source_Templates#applying">Applying source templates</h2>        <p id="5b104c99">            To apply your source template, first make sure that the template is in scope.            That is, either you are in the same namespace            or that the template's namespace is explicitly imported. into your code.        </p>                        <section class="procedure-steps"><h2 id="fe2b7d3e">To create a code fragment from a source template</h2><ol class="list _decimal"><li class="list__item" id="ee855955"><p>                Set the caret where you want to deploy the template.            </p></li><li class="list__item" id="a72f2f3f"><p>                Type an object, for which you want to deploy the template, then type a dot,                and then start typing the name of the template or its                <a href="Navigation_and_Search__CamelHumps.html">CamelHumps</a> abbreviation.            </p></li><li class="list__item" id="e1b0279d"><p>                Select the template in the completion list and click on it or press                <kbd data-bypass="true">Enter</kbd>.            </p></li><li class="list__item" id="0a1f33de"><p>                The caller object, the dot, and the part of the template name that you typed are replaced with                the template body.            </p></li><li class="list__item" id="c2ca028a">            If the template has            <a href="Templates__Template_Basics__Template_Variables.html#editable">                editable parameters</a>            (i.e. requires user input), JetBrains Rider deploys a            <a href="Reference__Hot_Spot_Session.html"><span>hot spot session</span></a>            in the editor and sets the input position at the first parameter.            Then you can do the following:                    <ul class="list _ul"><li class="list__item" id="2c2aaab0"><p>                If JetBrains Rider suggests some values for the current parameter, use                <kbd data-bypass="true">Up</kbd> and                <kbd data-bypass="true">Down</kbd> arrow keys to navigate through the list of suggested values,                or just type in a desired value.            </p></li><li class="list__item" id="9e63ff3e"><p>                Press                <kbd data-bypass="true">Tab</kbd> or                <kbd data-bypass="true">Enter</kbd> to accept the value                and move to the input  position of the next parameter.                If this is the last parameter, the hot spot session completes and                the caret moves to the end position defined for the session.            </p></li><li class="list__item" id="5bb5a117"><p>                Press                <kbd data-bypass="true">Shift+Tab</kbd> to move the input focus to the input position of the previous parameter.            </p></li><li class="list__item" id="a4bc3f38"><p>                Press                <kbd data-bypass="true">Esc</kbd> to exit the hot spot session.                In this case, all session parameters will be initialized with default values.            </p></li></ul>            </li></ol></section>    </div>                <div class="last-modified" data-skip-index="skip">Last modified: 25 April 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Postfix_Templates.html">Postfix Templates</a><a class="navigation-links__next" href="Templates_Web.html">Web-Specific Templates</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>