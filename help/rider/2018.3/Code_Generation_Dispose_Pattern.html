<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta name="robots" content="noindex"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/help/app/v2/analytics.js"></script><meta charset="UTF-8"><title>Generating Dispose Pattern - Help | JetBrains Rider</title><link rel="stylesheet" href="/help/app/v2/app.css"></head><body data-id="Code_Generation_Dispose_Pattern" data-disqus-id="Code_Generation_Dispose_Pattern_rdr"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search JetBrains Rider Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>JetBrains Rider 2018.3 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="visual_studio" selected>Visual Studio</option><option data-group="primary" value="resharper">ReSharper</option><option data-group="primary" value="_default">Default (IntelliJ IDEA)</option><option data-group="secondary" value="visual_studio_osx">Visual Studio (macOS)</option><option data-group="secondary" value="resharper_osx">ReSharper (macOS)</option><option data-group="secondary" value="mac_os_x_10.5_">Mac OS X 10.5+ (IntelliJ IDEA)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 data-toc="Code_Generation_Dispose_Pattern" id="Code_Generation_Dispose_Pattern.xml">Generating Dispose Pattern</h1>                    <p id="ee3bdadd">                                    <span data-skip-index="skip" class="menupath">Code | Generate | Dispose Pattern</span>            <br>            <kbd data-visual_studio="Alt+Insert" data-resharper="Alt+Insert" data-_default="Alt+Insert" data-visual_studio_osx="⌥ Insert" data-resharper_osx="⌘ ^ N" data-mac_os_x_10.5_="⌘ N">Alt+Insert</kbd> |            <span class="control">Dispose Pattern</span>                                </p>        <p id="e4519bb9">        JetBrains Rider helps you automatically generate various implementations of        <code class="code">IDisposable</code> depending on kind of resources that your class owns:    </p>    <ul class="list _ul"><li class="list__item" id="841f9460"><p>            If your class only owns managed            <code class="code">IDisposable</code>            resources, JetBrains Rider will help you generate a simple implementation of            <code class="code">public void Dispose()</code> without parameters, where            <code class="code">Dispose()</code> is called on selected disposable members.        </p></li><li class="list__item" id="2c4d0fee"><p>            If your class only owns unmanaged resources,                                JetBrains Rider will additionally generate destructor and a                    <code class="code">ReleaseUnmanagedResources</code>                    method where you could write your cleanup code.                        </p></li><li class="list__item" id="d0ddce31"><p>            If your class owns or will potentially own (via inheritance) both managed and unmanaged resources,                                JetBrains Rider will additionally create a                    <code class="code">Dispose(bool disposing)</code> method which could be overridden by the inheritors.                        </p></li></ul>    <p id="97146c3a">        To configure how the disposable pattern is implemented, use        <a href="#step_options">option</a> in the        <span class="control">Generate</span> dialog.    </p>    <p id="efd9239d">        In the example below, this command is used to generate a disposable pattern for managed        <code class="code">logger</code> and        <code class="code">resource</code> fields, with a single        <a href="#step_options">option</a>        to generate null checks for these fields.    </p>    <div class="table-wrapper"><table class="                 " width="100%" id="bbbe312a"><thead><tr id="4c42ddd4" class="ijRowHead"><th id="f9f90f35"><p>Before generation</p></th><th id="4b2ad80a"><p>After generation</p></th></tr></thead><tbody><tr id="3c5caee5" class="ijRowOdd"><td id="af102af3"><p>                <div class="code-block" data-lang="C#">
class MyClass
{
    private Logger logger;
    private IDisposable resource;
}
                </div>            </p></td><td id="34a54f44"><p>                <div class="code-block" data-lang="C#">
class MyClass : IDisposable
{
    private Logger logger;
    private IDisposable resource;

    public void Dispose()
    {
        logger?.Dispose();
        resource?.Dispose();
    }
}
                </div>            </p></td></tr></tbody></table></div>                        <section class="procedure-steps"><h2 id="8c37509a">To generate a dispose pattern</h2><ol class="list _decimal"><li class="list__item" id="83efbcd3"><p>            In the editor, set the caret on the type name or            within a type at the line where you want to insert a dispose pattern.            If the caret is on the type name, the generated code will be added in the beginning of the type declaration.        </p></li><li class="list__item" id="fdaf78b5"><p>            Press            <kbd data-visual_studio="Alt+Insert" data-resharper="Alt+Insert" data-_default="Alt+Insert" data-visual_studio_osx="⌥ Insert" data-resharper_osx="⌘ ^ N" data-mac_os_x_10.5_="⌘ N">Alt+Insert</kbd>            or choose                            <span data-skip-index="skip" class="menupath">Code | Generate...</span>              from the main menu.            Alternatively, you can press            <kbd data-visual_studio="Ctrl+Shift+A" data-resharper="Ctrl+Shift+A" data-_default="Ctrl+Shift+A" data-visual_studio_osx="⌘ ⇧ A" data-resharper_osx="⌘ ⇧ A" data-mac_os_x_10.5_="⌘ ⇧ A">Ctrl+Shift+A</kbd>, start typing the command name in the pop-up, and then choose it there.        </p></li><li class="list__item" id="a12b4b9f"><p>            In the            <span class="control">Generate</span>            pop-up menu, select            <span class="control">Dispose Pattern</span>.        </p></li><li class="list__item" id="step_options">            In the            <span class="control">Generate</span>            dialog that appears,            you will see a list of private properties and fields of type assignable to            <code class="code">IDisposable</code>.            Select some or all of these type members, and JetBrains Rider will            generate wrappers in the current type that delegate execution to selected type members.            <figure><img alt="Generating a dispose pattern with JetBrains Rider" title="Generating a dispose pattern with JetBrains Rider" src="/help/img/rider/2018.3/Code_Generation_Dispose_Pattern.png" id="e4273219" width="333" height="332"></figure>                    <p id="807b1e9e">            Optionally, use the following controls in the dialog:        </p>        <ul class="list _ul"><li class="list__item" id="f11249e2"><p>                <span class="control">Fields can be null</span>                — appears if there are any nullable fields or properties in your type.                By default, this check box is selected, meaning that JetBrains Rider will generate null checks                for selected fields.                You can clear this check box if you do not need null checks.            </p></li><li class="list__item" id="aae37338"><p>                <span class="control">I have unmanaged resources</span>                — if this check box is selected,                                    JetBrains Rider will additionally generate destructor and a                    <code class="code">ReleaseUnmanagedResources</code>                    method where you could write your cleanup code.                            </p></li><li class="list__item" id="f7ea3257"><p>                <span class="control">I plan to inherit from this class</span>                — if this check box is selected,                                    JetBrains Rider will additionally create a                    <code class="code">Dispose(bool disposing)</code> method which could be overridden by the inheritors.                            </p></li><li class="list__item" id="1c3c3ebc">                <span class="control">Dispose already exists</span>                — appears if an implementation of                <code class="code">Dispose()</code> already exists and lets you choose whether to:                <ul class="list _ul"><li class="list__item" id="6a377ad7"><p>Replace the method if it already exists.</p></li><li class="list__item" id="b992023a"><p>Put the newly generated method side by side with the existing one.</p></li><li class="list__item" id="24d7e216"><p>Skip generating a new method altogether.</p></li></ul>            </li><li class="list__item" id="2745a560">                <span class="control">Destructor already exists</span>                — appears if you have chosen the                <span class="control">I have unmanaged resources</span> option and the class already has a destructor.                Use this selector to choose whether to:                <ul class="list _ul"><li class="list__item" id="2c66bc6e"><p>Replace the method if it already exists.</p></li><li class="list__item" id="05f6041f"><p>Put the newly generated method side by side with the existing one.</p></li><li class="list__item" id="48c53279"><p>Skip generating a new method altogether.</p></li></ul>            </li></ul>            </li><li class="list__item" id="00495a46"><p>            Click                        <span class="control">OK</span>            to complete the wizard.                    </p></li></ol></section>    <p id="ccab7e3e">        This action is also available as a        <a href="Code_Analysis__Quick-Fixes.html">quick-fix</a> if        <code class="code">IDisposable</code> is not implemented.    </p>    <figure><img alt="A quick-fix that helps generate dispose pattern" title="A quick-fix that helps generate dispose pattern" src="/help/img/rider/2018.3/dipsose_pattern_generation_fix.png" id="b29f2a0b" width="373" height="129"></figure>                                                                            <div class="last-modified" data-skip-index="skip">Last modified: 25 April 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Code_Generation__Delegating_Members.html">Generating Delegating Members</a><a class="navigation-links__next" href="Code_Generation__Generating_Equality_Comparer.html">Generating Equality Comparer</a></div><section class="seealso" data-skip-index="skip"><div class="seealso__header"><h2>See Also</h2></div><div class="seealso__content"><div class="seealso__col" data-skip-index="skip"><h3>Procedures:</h3><ul class="list"><li class="list__item"><a href="Code_Generation__Type_Constructors.html"><span>Generating Type Constructors</span></a></li><li class="list__item"><a href="Code_Generation__Properties.html"><span>Generating Properties</span></a></li><li class="list__item"><a href="Code_Generation__Implementing_Overriding_Methods.html"><span>Implementing/Overriding Members</span></a></li><li class="list__item"><a href="Code_Generation__Partial_Methods.html"><span>Generating Partial Methods</span></a></li><li class="list__item"><a href="Code_Generation__Equality_Members.html"><span>Generating Equality Members</span></a></li><li class="list__item"><a href="Code_Generation__Generating_Equality_Comparer.html"><span>Generating Equality Comparer</span></a></li><li class="list__item"><a href="Code_Generation__Formatting_Members.html"><span>Generating Formatting Members</span></a></li></ul></div><div class="seealso__col" data-skip-index="skip"><h3>External Links:</h3><ul class="list"><li class="list__item"><a href="http://stackoverflow.com/questions/538060/proper-use-of-the-idisposable-interface" data-external="true" target="_blank" rel="noopener noreferrer"><span>StackOverflow: Proper use of the IDisposable interface</span></a></li><li class="list__item"><a href="https://msdn.microsoft.com/en-us/library/system.idisposable.aspx" data-external="true" target="_blank" rel="noopener noreferrer"><span>MSDN: IDisposable Interface</span></a></li><li class="list__item"><a href="http://blog.stephencleary.com/2009/08/how-to-implement-idisposable-and.html" data-external="true" target="_blank" rel="noopener noreferrer"><span>How to Implement IDisposable and Finalizers: 3 Easy Rules. by Stephen Cleary</span></a></li></ul></div></div></section></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/help/app/v2/app.js"></script></body></html>