<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>生成Null-checking例程-帮助|帮助JetBrains骑士</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Generating_Null_Checking_Routines" data-breadcrumbs="Creating_and_Editing_Code.xml|Create and Edit Code/Code_Generation__Index.xml|Code Generation/Generating_Null_Checking_Routines.xml|Generate Null-Checking Routines" data-main-title="Generate Null-Checking Routines" data-article-props="
                {
                
            " seeals=":[=" titl=":=" concept=",=" link=":=" ur=":" code_analysis__code_annotations.htm="," tex=":" use="" annotations="" to="" refine="" inspectio="}=" code_analysis__value_analysis.htm="," value="" and="" nullability="" analysi="}=" web="" resource=",=" http:="" ="" www.jetbrains.net="" devnet="" community="" idea="" k="," developer="" communit="}=" data-disqus-id="Generating_Null_Checking_Routines_rdr"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索JetBrains Rider帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>JetBrains Rider 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="visual_studio" data-group="primary">视觉工作室</option><option value="resharper" data-group="primary">锐化器</option><option value="_default" data-group="primary">默认（IntelliJ IDEA）</option><option value="visual_studio_osx" data-group="secondary">Visual Studio（macOS）</option><option value="resharper_osx" data-group="secondary">ReSharper（macOS）</option><option value="mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5+（IntelliJ IDEA）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Generating_Null_Checking_Routines.xml" data-toc="Generating_Null_Checking_Routines">生成空检查例程</h1>    <p id="bffbb390">JetBrains Rider提供了许多不同的方法来生成用于检查值类型参数，表达式和变量是否为空的代码。根据其用途，空检查例程可以分为两类：</p>    <ul class="list" data-skip-index="skip"><li class="list__item"><a href="#exception_checks">空检查异常和断言</a></li><li class="list__item"><a href="#skip">空检查以跳过具有空值的对象</a></li></ul>    <div class="chapter"><h2 id="exception_checks" data-toc="Generating_Null_Checking_Routines#exception_checks">空检查异常和断言</h2>        <p id="f22a8d4f">在某些情况下，遇到物体是<code class="code">null</code>引用在您的程序中很关键，应该通过引发异常来记录或发出信号。这里的一个典型例子是抛出一个<code class="code">ArgumentNullException</code>在不旨在接受的功能中<code class="code">null</code>对象。</p>        <div class="chapter"><h3 id="generating-null-checks-for-exceptions-and-assertions">生成空检查异常和断言</h3>            <p id="97c090fb">您可以通过以下方式生成这些空检查：</p>            <ul class="list _ul"><li class="list__item" id="191851ac"><p>按<kbd data-visual_studio="Alt+Enter" data-resharper="Alt+Enter" data-_default="Alt+Enter" data-visual_studio_osx="⌥ Enter" data-resharper_osx="⌥ Enter" data-mac_os_x_10.5_="⌥ Enter">Alt+Enter</kbd>在参数或表达式上，然后选择相应的<a href="Coding_Assistance__Context_Actions.html">上下文操作</a> ：</p><figure><img alt="JetBrains Rider：检查参数是否为空" title="JetBrains Rider：检查参数是否为空" src="/help/img/rider/2019.2/ca_check_for_null.png" id="43f6c2b9" width="376" height="113"></figure>                <p></p></li><li class="list__item" id="5253c6ba"><p>                    <a name="typing_assist_for_parameter"></a>如果参数标记有<a href="Reference__Code_Annotation_Attributes.html#NotNullAttribute">[NotNull]</a>属性，则可以在参数名称或参数类型之后直接设置插入符号，然后按<kbd class="keystroke" data-bypass="true"><span class="keystroke__value">!</span></kbd> ：</p><div class="code-block" data-lang="csharp">私有void Foo（[NotNull] object / *！* / arg / *！* /）</div>                                    <p></p></li><li class="list__item" id="b3935459"><p><a href="Code_Generation__Type_Constructors.html">生成构造函数时</a> （ <kbd data-visual_studio="Alt+Insert" data-resharper="Alt+Insert" data-_default="Alt+Insert" data-visual_studio_osx="⌘ ^ N" data-resharper_osx="⌘ ^ N" data-mac_os_x_10.5_="⌘ N">Alt+Insert</kbd> <span class="menupath" data-skip-index="skip">|构造函数</span> ），在对话框中选择<span class="control">检查参数是否为空</span> 。</p></li><li class="list__item" id="0b21216d"><p>为产生一个断言<code class="code">null</code>对于任何可为空的表达式，JetBrains Rider提供<span class="control">Assert表达式以</span>对<kbd data-visual_studio="Alt+Enter" data-resharper="Alt+Enter" data-_default="Alt+Enter" data-visual_studio_osx="⌥ Enter" data-resharper_osx="⌥ Enter" data-mac_os_x_10.5_="⌥ Enter">Alt+Enter</kbd> 。根据可<a href="Code_Analysis__Value_Analysis.html#modes">空性分析设置</a> ，它显示为<a href="Code_Analysis__Quick-Fixes.html">快速修复</a>或<a href="Coding_Assistance__Context_Actions.html">上下文操作</a> 。</p><figure><img alt="JetBrains Rider：声明表达式为null" title="JetBrains Rider：声明表达式为null" src="/help/img/rider/2019.2/quick_fix_assert_for_null.png" id="c97111c0" width="380" height="142"></figure>如果JetBrains Rider推断该表达式永远不能为空，则此操作将不可用<code class="code">null</code> 。<p></p></li></ul>            <p id="f54c04f5">如果您在项目中<a href="Code_Analysis__Annotations_in_Source_Code.html">使用代码注释</a> ，JetBrains Rider将使用<a href="Reference__Code_Annotation_Attributes.html#NotNullAttribute">[NotNull]</a>属性来修饰您检查为空的参数。当将空对象传递给修饰的参数时，这将使JetBrains Rider通知您。<br>您可以禁用添加<code class="code">[NotNull]</code>清除“ <span class="control">自动传播注释”</span>复选框<a name="the_options_page"></a> <span class="menupath" data-skip-index="skip">编辑器|检查设置|的代码注释</span>页面<a name="product_settings"></a> JetBrains骑士设置<kbd data-visual_studio="Ctrl+Alt+S" data-resharper="Ctrl+Alt+S" data-_default="Ctrl+Alt+S" data-visual_studio_osx="⌘ ," data-resharper_osx="⌘ ," data-mac_os_x_10.5_="⌘ ,">Ctrl+Alt+S</kbd> 。</p>        </div>        <div class="chapter"><h3 id="configuring-null-checks-for-exceptions-and-assertions">为异常和断言配置空检查</h3>            <p id="4f3ab214">这种空检查可以用不同的方式编写，因此可以在以下位置进行配置<a name="the_options_page"></a> <span class="menupath" data-skip-index="skip">编辑器|代码样式| C＃|空检查</span>页<a name="product_settings"></a> JetBrains骑士设置<kbd data-visual_studio="Ctrl+Alt+S" data-resharper="Ctrl+Alt+S" data-_default="Ctrl+Alt+S" data-visual_studio_osx="⌘ ," data-resharper_osx="⌘ ," data-mac_os_x_10.5_="⌘ ,">Ctrl+Alt+S</kbd> ，也可以从<kbd data-visual_studio="Alt+Enter" data-resharper="Alt+Enter" data-_default="Alt+Enter" data-visual_studio_osx="⌥ Enter" data-resharper_osx="⌥ Enter" data-mac_os_x_10.5_="⌥ Enter">Alt+Enter</kbd>菜单上相应的动作：</p>            <figure><img alt="JetBrains Rider：配置空检查模式的快捷方式" title="JetBrains Rider：配置空检查模式的快捷方式" src="/help/img/rider/2019.2/configure_null_check_pattern.png" id="259534ac" width="429" height="116"></figure>            <p id="8b398f2e">此设置页面按优先级顺序列出了所有预定义的空检查模式，其中较高的优先级模式显示在顶部。当JetBrains Rider生成空检查时，它将考虑当前C＃版本，采用语义上适合上下文的最高优先级模式。 <a name="CsOrVbVersion"></a>                默认情况下，JetBrains Rider基于关联的编译器自动检测C＃版本。但是，您可以显式指定目标C＃版本-按<kbd data-visual_studio="Alt+Enter" data-resharper="Alt+Enter" data-_default="Alt+Enter" data-visual_studio_osx="⌥ Enter" data-resharper_osx="⌥ Enter" data-mac_os_x_10.5_="⌥ Enter">Alt+Enter</kbd>在解决方案资源管理器中的项目上，并使用“ <span class="control">项目属性”</span>对话框的“ <span class="control">应用程序”</span>页面上的“ <span class="control">语言版本”</span>选择器。</p>            <p id="67ab3418">例如，使用默认配置的“ throw expression”模式<code class="code">$EXPR$ ?? new System.ArgumentNullException($NAME$);</code>具有比“经典”引发语句更高的优先级<code class="code">if ($EXPR$ == null) throw new System.ArgumentNullException($NAME$);</code> 。但是，如果当前上下文中不允许使用表达式，JetBrains Rider将跳过第一个并使用第二个模式：</p>            <div class="code-block" data-lang="csharp">//在'arg'上按Alt + Enter并选择'检查参数是否为空'private void Foo（object arg）{//由于此处不允许使用表达式，因此将生成该语句：如果（arg == null）抛出新的ArgumentNullException （nameof（arg））; } //但是，在以下情况下，表达式已经存在私有对象myField;私有无效Foo（object arg）{myField = arg; } //因此，JetBrains Rider将使用第一种模式：private object myField;私人无效Foo（object arg）{myField = arg ??抛出新的ArgumentNullException（nameof（arg））; }</div>            <p id="19ad6b1e">这同样适用于生成断言：JetBrains Rider将使用标记为<span class="control">可以用于断言</span>的第一个模式。</p>            <p id="e28bdc46">如果您对生成空检查有任何偏好，请使用上<span class="control">移</span> <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+U</span></kbd> / <span class="control">下移</span> <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Alt+D</span></kbd>设置页面上的按钮可以提高您喜欢的图案的优先级。</p>        </div>        <div class="chapter"><h3 id="creating-custom-null-checks-for-exceptions-and-assertions">为异常和断言创建自定义的空检查</h3>            <p id="1c56ac85">如果您的代码库提供了专用的帮助方法来处理空检查，那么您可能希望通过编辑设置页面上以粗体突出显示的两个自定义模式来创建自己的空检查模式： <span class="control">Custom（声明）</span>和<span class="control">Custom（表达式）</span> ：</p>            <aside class="prompt" rel="1c56ac85" id="044bfafc" data-type="tip" data-title="">                <p id="bce0e38b">使用<a href="Reference__Code_Annotation_Attributes.html#AssertionMethodAttribute">[AssertionMethod]</a>属性标记您的自定义断言方法，以优化<a href="Finding_Code_Issues.html">代码检查</a> 。</p>            </aside>            <figure><img alt="JetBrains Rider：用于null检查的自定义模式" title="JetBrains Rider：用于null检查的自定义模式" src="/help/img/dotnet/2019.2/null_checking_custom_patterns.png" id="442cb9ae" width="580" height="276"></figure>            <p id="3cff1d85">默认情况下，这两种模式的优先级最低，这意味着它们将永远不会用于生成。因此，如果要使用它们，请向上移动它们以提高其优先级。</p>            <p id="ddcec948">在列表中选择自定义样式后，您可以使用以下命令在页面底部的文本字段中对其进行编辑<code class="code">$EXPR$</code> ， <code class="code">$NAME$</code> ， <code class="code">$MESSAGE$</code>占位符。只要模式有效，JetBrains Rider就会在文本字段下方显示相应的图标。<br>您也可以勾选<span class="control">可以用于断言</span>复选框，以使模式与<span class="control">用于空</span>操作的<span class="control">Assert表达式一起使用</span> 。</p>        </div>    </div>    <div class="chapter"><h2 id="skip" data-toc="Generating_Null_Checking_Routines#skip">空检查以跳过具有空值的对象</h2>        <p id="f59685c9">另一种null检查用于避免对以下对象的成员访问： <code class="code">null</code>在程序中可以接受此类对象的引用：</p>        <div class="code-block" data-lang="csharp">如果（expr！= null）{DoSomething（）; } //，或者从C＃6.0开始，使用条件访问运算符（expr）?。做点什么（）;</div>        <p id="f8e86287">为了生成此类检查，JetBrains Rider提供了<span class="control">Check表达式以</span>提供<span class="control">null</span>并在以下位置<span class="control">使用条件访问</span>操作<kbd data-visual_studio="Alt+Enter" data-resharper="Alt+Enter" data-_default="Alt+Enter" data-visual_studio_osx="⌥ Enter" data-resharper_osx="⌥ Enter" data-mac_os_x_10.5_="⌥ Enter">Alt+Enter</kbd> 。根据可<a href="Code_Analysis__Value_Analysis.html#modes">空性分析设置</a> ，这些操作将显示为<a href="Code_Analysis__Quick-Fixes.html">快速修复</a>或<a href="Coding_Assistance__Context_Actions.html">上下文操作</a> 。</p>        <figure><img alt="JetBrains Rider：检查表达式是否为空快速修复" title="JetBrains Rider：检查表达式是否为空快速修复" src="/help/img/rider/2019.2/quick_fix_check_for_null.png" id="cb17834e" width="369" height="142"></figure>        <p id="af062302">但是，如果JetBrains Rider推断表达式永远不会返回，则这些操作将不可用<code class="code">null</code> ，例如，如果相应的项目标记有<a href="Reference__Code_Annotation_Attributes.html#NotNullAttribute">[NotNull]</a>属性，或者该表达式已被检查为null。</p>    </div>    <a name="supported_in_csharp"></a>                                    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Code_Generation__Generating_Code_from_Usage.html">从使用情况</a> <a class="navigation-links__next" href="Generating_Code_with_Completion.html">生成代码通过代码完成生成代码</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>