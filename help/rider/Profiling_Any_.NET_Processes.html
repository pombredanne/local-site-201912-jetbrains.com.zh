<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Attaching to and Profiling .NET Processes - Help | JetBrains Rider</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Profiling_Any_.NET_Processes" data-breadcrumbs="Building_Running_and_Debugging.xml|Build, Execute, Deploy/Performance_Profiling.xml|Performance Profiling of .NET Code/Profiling_Any_.NET_Processes.xml|Attaching to and Profiling .NET Processes" data-main-title="Attaching to and Profiling .NET Processes" data-disqus-id="Profiling_Any_.NET_Processes_rdr"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search JetBrains Rider Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>JetBrains Rider 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="visual_studio">Visual Studio</option><option data-group="primary" value="resharper">ReSharper</option><option data-group="primary" value="_default">Default (IntelliJ IDEA)</option><option data-group="secondary" value="visual_studio_osx">Visual Studio (macOS)</option><option data-group="secondary" value="resharper_osx">ReSharper (macOS)</option><option data-group="secondary" value="mac_os_x_10.5_">Mac OS X 10.5+ (IntelliJ IDEA)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 data-toc="Profiling_Any_.NET_Processes" id="Profiling_Any_.NET_Processes.xml">Attaching to and Profiling .NET Processes</h1>    <a name="content"></a>                <p id="34675735">            dotTrace allows you to profile any .NET process that is already running in the system.            The profiling workflow looks like follows:        </p>                <ol class="list _decimal"><li class="list__item" id="5adf77e8">                <a href="#step-1-configure-a-profiling-session">Configuring a profiling session</a>            </li><li class="list__item" id="9b5fb557">                <a href="#step-2-running-the-session-and-getting-snapshots">Running the session and getting                    snapshots                </a>            </li><li class="list__item" id="6d1ef848">                <a href="#step-3-analyzing-collected-snap">Analyzing the collected snapshots</a>            </li></ol>        <div class="chapter"><h2 id="step-1-configure-a-profiling-session" data-toc="Profiling_Any_.NET_Processes#step-1-configure-a-profiling-session">Step 1. Configuring a profiling session</h2>                                    <figure><img alt="Profiling configurations in Rider" title="Profiling configurations in Rider" src="/help/img/rider/2019.2/profiler_configurations_attach.png" id="e7ce8c51" width="463" height="248"></figure>                        <p id="b887ba53">                Before starting a profiling session, make sure you have at least one applicable profiling                configuration.            </p>            <ul class="list _ul"><li class="list__item" id="06c59a69"><p>                    The profiling configuration specifies profiling session settings like which profiling type will be                    used,                    whether child processes must be profiled, and so on.                </p></li><li class="list__item" id="bb89fa67"><p>                    The profiling target is a running .NET process you're going to attach to.                </p></li><li class="list__item" id="ee47653b"><p>                    The <span class="control">Tracing</span> and <span class="control">Line-by-Line</span> profiling types are                    not available when attaching to a process.                </p></li></ul>            <section class="procedure-steps"><h3 id="2f844ebf">To select a profiling configuration</h3><ul class="list "><li class="list__item" id="94402f65">                    <p id="c296c84d">                        In the toolbar, in the list of profiling configurations, select:                    </p>                    <ul class="list _ul"><li class="list__item" id="a61a49dc"><p>                            either one of the                            <a href="#profiling_types">predefined configurations</a>:                            <span class="control">Sampling</span>,                                                        <span class="control">Timeline</span>, <span class="control">Timeline (Mono)</span> (for Mono apps),                            <span class="control">Timeline (Unity)</span>                            (for Unity apps).                        </p></li><li class="list__item" id="523900ca"><p>                            or your own                            <a href="#add_config">custom configuration</a>.                        </p></li></ul>                </li></ul></section>            <section class="procedure-steps"><h3 id="add_config">To create a profiling configuration</h3><ol class="list _decimal"><li class="list__item" id="6a88d84b"><p>                    In the toolbar, in the list of profiling configurations, select                    <span class="control">Edit Configurationsâ€¦</span>.                </p></li><li class="list__item" id="32fe92a6"><p>                    In the opened                    <span class="control">Profiling Configurations</span>                    window, click                    <img alt="Add profiling configuration" title="Add profiling configuration" src="/help/img/rider/2019.2/ThemedIcon.AddPattern.Screen.[Gray].png" id="9d34aced" width="12" height="12" class="inline-icon-12">                    to add a new profiling configuration.                </p></li><li class="list__item" id="736c9623">                    <p id="dbe99438">                        Specify configuration <span class="control">Name</span> and other profiling options:                    </p>                    <ul class="list _ul"><li class="list__item" id="51e197b7">                            <span class="control">Profiling type</span>                                                                                        <a name="profiling_type"></a>                <aside data-type="note" class="prompt" data-title="" rel="51e197b7" id="0ab19aa5">                    <p id="3fe928ed">* Not supported when dotTrace is attached to a profiled process.</p>                </aside>                <div class="table-wrapper"><table class=" wide" width="100%" id="b49fb405"><thead><tr id="f7ea611b" class="ijRowHead"><th id="a4ea24c9"><p>Profiling Method</p></th><th id="aecf3ebb" width="120"><p>Profiling Type</p></th><th id="fb6ca220"><p>Description</p></th><th id="40c6a177"><p>Use Case</p></th></tr></thead><tbody><tr id="b864a602" class="ijRowOdd"><td id="388278fa" rowspan="3"><p>                            <b id="3ed02660" origin="dotnet">                                <font style="color:#003399">                                    <b id="b044daca" origin="dotnet">Performance Profiling</b>                                </font>                            </b>                            <br>                            Detailed timing information about function calls.                                                                                </p></td><td id="9bdb4e46">                            <span class="control">Sampling</span>                        </td><td id="838bb770"><p>Accurate time measurement, number of calls is not measured.                        </p></td><td id="ccea3d98"><p>                            <i id="e7840054" origin="dotnet">Recommended for most cases</i>. Ideal when you look for performance issues in your                            app                            for the first time.                        </p></td></tr><tr id="78fc9bb2" class="ijRowEven"><td id="82c6e2a2">                            <span class="control">Tracing*</span>                        </td><td id="f927853c"><p>Accurate calls number measurement, time measurement may be inaccurate due to profiling                            overhead.                        </p></td><td id="a6859a08"><p>When sampling data is not enough. For example, for analyzing algorithm complexity (when                            info                            about number of calls is more valuable than call time values).                        </p></td></tr><tr id="6d19cfeb" class="ijRowOdd"><td id="b1f47f23">                            <span class="control">Line-by-line*</span>                        </td><td id="90d5fc5f"><p>Each line of code is measured, call time values are inaccurate due to huge profiler                            overhead.                            <br>                                                    </p></td><td id="06020873"><p>For advanced use cases only. For example, when you already know what function causes                            issues                            and                            want to analyze each line of it.                        </p></td></tr><tr id="f85385bd" class="ijRowEven"><td id="76580538"><p>                            <b id="07ef1710" origin="dotnet">                                <font style="color:#003399">                                    <b id="50adeeaa" origin="dotnet">Timeline Profiling</b>                                </font>                            </b>                            <br>                            Detailed temporal data about application threads and events.                                                    </p></td><td id="04571b61">                            <span class="control">Timeline</span>                        </td><td id="829d4d0e">                            <p id="2c9f7189">Collects temporal data about thread states, application events, and other                                multi-threading                                data.                                Based on Event Tracing for Windows (ETW).                            </p>                            <p id="8f19cfb4">                                If you want to create a configuration for profiling Mono or Unity                                applications, select <span class="control">Timeline (Mono)</span> or                                <span class="control">Timeline (Unity)</span> correspondingly.                            </p>                        </td><td id="0d1f925e"><p><i id="42c9305f" origin="dotnet">Recommended for most cases</i>. Especially, for analyzing multithreaded apps. Use it,                            for example, to determine the cause of UI freezes, excessive                            garbage collections, uneven workload distribution, insufficient I/O, and so on.                        </p></td></tr></tbody></table></div>                                                                </li><li class="list__item" id="aad53999">                            <ul class="list _ul"><li class="list__item" id="736f649a">                                    <p id="fd6c3569">                                        <span class="control">Control profiling manually</span>                                        <br>                                        Enables you to control profiling manually via the profiler controls. For                                        example,                                        to take a snapshot, you will have to click                                        <span class="control">Get Snapshot</span>.                                    </p>                                    <ul class="list _ul"><li class="list__item" id="9f053c94">                                            <p id="723d1846">                                                <span class="control">Collect profiling data from start</span>*                                            </p>                                            <p id="2b4979e0">                                                <span class="control">Collect profiling data from start</span>: If selected,                                                dotTrace will start                                                collecting                                                profiling                                                data right after the launch. Otherwise, dotTrace will start collecting                                                the data only after                                                you                                                click <span class="control">Start Recording</span> in the                                                <a href="Performance_Profiler_window.html">Performance                                                    Profiler                                                </a>                                                tool window.                                            </p>                                                                                    </li></ul>                                </li><li class="list__item" id="c648433b"><p>                                    <span class="control">Control profiling via API</span>                                    <br>                                    Enables you to control profiling directly from the code of the profiled application.                                    For example, to take a snapshot in the exact point of your code.                                    Learn more about using the API in the                                    <a href="https://www.jetbrains.com/help/profiler/Profiling_Guidelines__Advanced_Profiling_Using_dotTrace_API.html" data-external="true" target="_blank" rel="noopener noreferrer">dotTrace documentation</a>.                                </p></li></ul>                        </li><li class="list__item" id="cb5f98d0"><p>                            <span class="control">Profile child processes</span>                            <br>                            If selected, dotTrace will profile not only the main app process but the processes                            it runs as well.                        </p></li><li class="list__item" id="93ab3225">            <p id="82ac1592">                <span class="control">Time measurement</span>                <br>                This option defines how dotTrace must calculate calls time.                For more details, refer to                 <a href="https://www.jetbrains.com/help/profiler/Profiling_Guidelines__Setting_the_Right_Meter_Kind.html" data-external="true" target="_blank" rel="noopener noreferrer">https://www.jetbrains.com/help/profiler/Profiling_Guidelines__Setting_the_Right_Meter_Kind.html</a>.                <br>Typically, this is a choice between whether                    dotTrace should calculate time when a thread is not working or should not. More specifically, there are                    four options:            </p>            <ul class="list _ul"><li class="list__item" id="4753fd50"><p>                    <span class="control">Real time (performance counter)</span>                    <br>                    <i id="19d73c75" origin="dotnet">Recommended</i>. dotTrace calculates the overall real time passed between method entry and exit.                    This time does not depend on app threads states.                    Time is calculated using system performance counter.                </p></li><li class="list__item" id="82f21eb2"><p>                    <span class="control">Real time (CPU instruction)</span>                    <br>                    dotTrace calculates the overall real time passed between method entry and exit. This time does not                    depend on app threads states.                    Time is calculated using the CPU register.                </p></li><li class="list__item" id="6c98603d"><p>                    <span class="control">Thread time</span>                    <br>                    dotTrace calculates only the time when a certain thread is running. The time when the thread is                    waiting or sleeping is not included in calculation.                </p></li><li class="list__item" id="a9f482d1"><p>                    <span class="control">Thread cycle time</span>                    <br>                    dotTrace calculates only the time when a certain thread is running. The time when the thread is                    waiting or sleeping is not included in calculation. Time is calculated using the CPU register.                </p></li></ul>            <p id="5e2b9101">                The table next in this section will help you to choose a time measurement method better suitable for your            case.            </p>        </li><li class="list__item" id="355913eb"><p>            <span class="control">Enable inlining</span>            <br>            (Tracing, Line-by-line) Clear this option if you want dotTrace to turn off JIT-inlining and get call stacks that closely resemble            the structure of application's source code.        </p></li><li class="list__item" id="eeef9458"><p>            <span class="control">High accuracy</span>            <br>            (Tracing, Line-by-line)            If selected, dotTrace will take into account time spent in profiler itself by taking more time samples.        </p></li><li class="list__item" id="native"><p>            <span class="control">Collect native allocations</span>            <br>            (Timeline) If selected, dotTrace will collect information about all memory allocations the profiled application            does in the native (unmanaged) heap. To be able to select this option, you must have            <a href="https://msdn.microsoft.com/en-gb/windows/hardware/commercialize/test/wpt/index" data-external="true" target="_blank" rel="noopener noreferrer">Windows Performance Toolkit</a>            installed on your computer.        </p></li><li class="list__item" id="debug"><p>            <span class="control">Collect debug output</span>            <br>            (Timeline) If selected, dotTrace will collect information about all messages the profiled application sends to            the                        <a href="https://www.jetbrains.com/help/profiler/Debug_Output.html" data-external="true" target="_blank" rel="noopener noreferrer">debug output</a>.        </p></li><li class="list__item" id="tpl"><p>            <span class="control">Collect TPL events</span>            <br>            (Timeline) If selected, profiling performance may be affected but dotTrace will collect Task Parallel Library (TPL)            data. If cleared, there will be no <code class="code">Task</code> nodes in            <span class="control">Call Tree</span>            and            <code class="code">async</code>            call nodes will lack their <span class="control">await</span> and            <span class="control">continuations</span>            parts. Learn more about how dotTrace works with asynchronous code            in                        <a href="https://www.jetbrains.com/help/profiler/Analyzing_Async_Calls.xml" data-external="true" target="_blank" rel="noopener noreferrer">https://www.jetbrains.com/help/profiler/Analyzing_Async_Calls.xml</a>.            <br>            Clear this option in case your application does not use multitasking or you do not            need this info.        </p></li></ul>                </li></ol></section>        </div>        <div class="chapter"><h2 id="step-2-running-the-session-and-getting-snapshots" data-toc="Profiling_Any_.NET_Processes#step-2-running-the-session-and-getting-snapshots">Step 2. Running the session and getting snapshots</h2>            <section class="procedure-steps"><h3 id="37f5148f">To start a session and get snapshots</h3><ol class="list _decimal"><li class="list__item" id="1f19f497">                    <p id="d56d68a8">                        In the main menu, select                        <span data-skip-index="skip" class="menupath">Run | Attach to Process with Profiling</span>                        or click the corresponding button                        <img alt="Attach to Process with Profiling" title="Attach to Process with Profiling" src="/help/img/rider/2019.2/icon_attach_profile.png" id="ce880979" width="16" height="16" class="inline-icon-16">                        on the toolbar. This will open a list of running processes.                    </p>                </li><li class="list__item" id="e8443df0">                    <aside data-type="note" class="prompt" data-title="" rel="e8443df0" id="da549b97"><p>                        When attaching to .NET Core processes, note that only .NET Core 3.0 Preview 7 (or later)                        processes are supported.                    </p></aside>                    <p id="212ea34d">                        Select a process you want to profile (note that this must be a managed .NET process)                        and a profiling configuration you want to use.                    </p>                    <p id="5e03b485">                        Once the profiling is started, you will see the                        <a href="Performance_Profiler_window.html">Performance Profiler</a>                        tool window opened on the <span class="control">Profiling</span> tab with the profiling controller inside.                    </p>                </li><li class="list__item" id="e9c847e4"><p>                    If you disabled <span class="control">Collect profiling data from start</span> in the profiling configuration,                    click                    <img alt="Start Recording" title="Start Recording" src="/help/img/rider/2019.2/icon_start_profiling.png" id="faad995b" width="12" height="12" class="inline-icon-12">                    <span class="control">Start Recording</span>                    to start recording profiling data.                    <br>                    Basically, now all you need is reproduce the performance issue you are looking for or,                    if you just evaluate the overall app performance, go through the desired usage scenarios in your                    application.                </p></li><li class="list__item" id="96aa2da2"><p>                    Click                    <img alt="Get Performance Snapshot Rider" title="Get Performance Snapshot Rider" src="/help/img/rider/2019.2/icon_get_snapshot.png" id="3d379dbe" width="10" height="10" class="inline-icon-10">                    <span class="control">Get Snapshot</span>.                    The collected snapshot will be added to the list of snapshots inside the                    <span class="control">Performance Profiler</span>                    window.                    To start collecting profiling data again, click                    <img alt="Start Recording" title="Start Recording" src="/help/img/rider/2019.2/icon_start_profiling.png" id="42cd1f2c" width="12" height="12" class="inline-icon-12">                    <span class="control">Start Recording</span>                    one more time.                </p></li><li class="list__item" id="53e9a2f5"><p>                    After you collect a snapshot(s), you can finish the profiling session.                    Normally, you do it either by closing the profiled application or by detaching the profiler via the                    <img alt="Detach profiler" title="Detach profiler" src="/help/img/rider/2019.2/icon_detach_profiler.png" id="a2862032" width="16" height="16" class="inline-icon-16">                    <span class="control">Detach</span>                    button (                    <img alt="Kill processes" title="Kill processes" src="/help/img/rider/2019.2/icon_kill_profiled_app.png" id="3bac2d95" width="16" height="15" class="inline-icon-16">                    <span class="control">Kill</span>                    forcibly terminates the profiled app and the session, so, use it only in emergency cases).                </p></li></ol></section>        </div>        <div class="chapter"><h2 id="step-3-analyzing-collected-snap" data-toc="Profiling_Any_.NET_Processes#step-3-analyzing-collected-snap">Step 3. Analyzing collected snapshots</h2>            <p id="8397122b">                For more details on how to analyze performance snapshots, refer to                <a href="Analyzing_Profiling_Snapshots.html">Analyzing Profiling Results</a>.            </p>            <section class="procedure-steps"><h3 id="3a61d3d6">To analyze a snapshot</h3><ol class="list _decimal"><li class="list__item" id="114d6b14"><p>                    On the                    <span class="control">All Snapshots</span>                    tab of the                    <a href="Performance_Profiler_window.html">Performance Profiler</a>                    tool window, select the snapshot you want to analyze.                </p></li><li class="list__item" id="6ff9a209">                    <p id="62c9db18">                        Analyze the collected data using one of the views:                    </p>                    <ul class="list _ul"><li class="list__item" id="fe5c8eab"><p>                            <span class="control">Call Tree</span>: a "classic" call tree that shows you all method calls in all                            threads.                            Each top-level node represents a top-level function which was executed by a certain thread.                            Use this view to quickly get down to actual application activity.                            <a href="https://www.jetbrains.com/help/profiler/Call_Tree.html" data-external="true" target="_blank" rel="noopener noreferrer">Learn more</a>                                                    </p></li><li class="list__item" id="e77caa47"><p>                            <span class="control">Top Methods</span>: the best place to start when analyzing application                            performance.                            It is a simple plain list of methods with the highest execution time. Note that you can                            reduce                            the system functions "noise" by excluding them from the list using the                            <img alt="Hide system functions" title="Hide system functions" src="/help/img/rider/2019.2/icon_hide_system_functions_profiler.png" id="4188c4ac" width="16" height="16" class="inline-icon-16">                            toggle: if enabled, method's execution time is calculated as a sum of method's own time                            and the time of all child system methods (down to the next user method in the stack).                            <a href="https://www.jetbrains.com/help/profiler/Plain_List.html" data-external="true" target="_blank" rel="noopener noreferrer">Learn more</a>                                                    </p></li></ul>                </li><li class="list__item" id="83c29fe6"><p>                    Once the suspicious method is found, press <kbd data-visual_studio="F4" data-resharper="F4" data-_default="F4" data-visual_studio_osx="âŒ˜ Down" data-resharper_osx="âŒ˜ Down" data-mac_os_x_10.5_="âŒ˜ Down">F4</kbd> or select                    <span class="control">Jump to Source</span> from the context menu.                    Rider will navigate you right to the method's source code.                </p></li></ol></section>        </div>    <div class="last-modified" data-skip-index="skip">Last modified: 29 November 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Profiling_Unit_Tests.html">Profiling Unit Tests</a><a class="navigation-links__next" href="Analyzing_Profiling_Snapshots.html">Analyzing Profiling Results</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>