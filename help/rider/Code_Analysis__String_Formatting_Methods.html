<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>字符串文字的代码分析和帮助程序-帮助JetBrains骑士</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Code_Analysis__String_Formatting_Methods" data-breadcrumbs="Code_Analysis__Index.xml|Code Analysis/Finding_Code_Issues.xml|Find Code Issues with Code Inspection/Code_Analysis__String_Formatting_Methods.xml|Code Analysis and Helpers for String Literals" data-main-title="Code Analysis and Helpers for String Literals" data-article-props="
                {
                
            " seeals=":[=" titl=":=" concept=",=" link=":=" ur=":" code_analysis__code_inspections.htm="," tex=":" code="" inspection="}=" code_analysis__code_annotations.htm="," use="" annotations="" to="" refine="" inspectio="}=" code_analysis__value_analysis.htm="," value="" and="" nullability="" analysi="}=" web="" resource=",=" http:="" ="" www.jetbrains.net="" devnet="" community="" idea="" k="," developer="" communit="}=" data-disqus-id="Code_Analysis__String_Formatting_Methods_rdr"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索JetBrains Rider帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>JetBrains Rider 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="visual_studio" data-group="primary">视觉工作室</option><option value="resharper" data-group="primary">锐化器</option><option value="_default" data-group="primary">默认（IntelliJ IDEA）</option><option value="visual_studio_osx" data-group="secondary">Visual Studio（macOS）</option><option value="resharper_osx" data-group="secondary">ReSharper（macOS）</option><option value="mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5+（IntelliJ IDEA）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Code_Analysis__String_Formatting_Methods.xml" data-toc="Code_Analysis__String_Formatting_Methods">字符串文字的代码分析和帮助器</h1>    <p id="3e2e37dd">JetBrains Rider为代码中的字符串文字提供了很多功能。您可以在以下方面受益于JetBrains Rider的代码分析和大量帮助程序：</p>        <ul class="list" data-skip-index="skip"><li class="list__item"><a href="#plain-strings">纯弦</a></li><li class="list__item"><a href="#formatting">字符串格式化方法</a></li><li class="list__item"><a href="#custom">自定义字符串格式设置方法</a></li><li class="list__item"><a href="#interpolated-strings">插值字符串</a></li></ul>    <div class="chapter"><h2 id="plain-strings" data-toc="Code_Analysis__String_Formatting_Methods#plain-strings">纯弦</h2>        <p id="d43f0583">当您在代码中使用纯字符串时，以下是JetBrains Rider如何为您提供帮助：</p>        <ul class="list _ul"><li class="list__item" id="0b6ee28a">                <a name="escape"></a>            <p id="e00a13cc">默认情况下，JetBrains Rider突出显示所有非普通字符串中正确和不正确的转义序列：</p>            <img alt="突出显示字符串中的转义序列" title="突出显示字符串中的转义序列" src="/help/img/dotnet/2019.2/regexp_string.png" id="bc54130c" width="252" height="30" class="inline-icon-252">                                </li><li class="list__item" id="fa7bc343"><p>您可以将常规字符串转换为逐字字符串，然后按<kbd data-visual_studio="Alt+Enter" data-resharper="Alt+Enter" data-_default="Alt+Enter" data-visual_studio_osx="⌥ Enter" data-resharper_osx="⌥ Enter" data-mac_os_x_10.5_="⌥ Enter">Alt+Enter</kbd>当您的插入符在字符串中并选择相应的<a href="Coding_Assistance__Context_Actions.html">上下文操作时</a> 。这也适用于内插字符串。</p></li><li class="list__item" id="d3e6abff"><p>您只需按以下即可<a href="Splitting_Lines_with_String_Literals.html">拆分字符串文字</a> <kbd class="keystroke" data-bypass="true"><span class="keystroke__value">Enter</span></kbd> 。</p></li><li class="list__item" id="d675d56a"><p>如果字符串包含正则表达式，JetBrains Rider可以突出显示其语法和错误，并帮助您在表达式内部完成代码。有关更多信息，请参见<a href="Regular_Expressions_Assistance.html">正则表达式帮助</a> 。<br>同样，您可以让JetBrains Rider分析字符串文字中的HTML。为了使JetBrains Rider知道字符串文字中的特定语言，可以使用相应的<a href="Coding_Assistance__Context_Actions.html">上下文操作</a>或添加注释<code class="code">/*language=regexp|jsregexp|html*/</code>就在字符串文字之前。</p></li><li class="list__item" id="a6386140"><p>您可以在字符串中选择一些子字符串，然后自动<a href="Refactorings__Introduce_Variable_for_Substring.html">为该子字符串引入一个变量</a> 。</p></li><li class="list__item" id="da23f614"><p>如果您的项目可本地化，则可以自动<a href="Resources__Refactorings.html#move-to-resource">将字符串移动到resource</a> 。</p></li></ul>    </div>    <div class="chapter"><h2 id="formatting" data-toc="Code_Analysis__String_Formatting_Methods#formatting">字符串格式化方法</h2>        <p id="6ac8d0f2">JetBrains Rider分析格式字符串和所有.NET字符串格式化方法的参数，例如<code class="code">String.Format</code> ， <code class="code">Text.StringBuilder.AppendFormat</code> ， 要么<code class="code">Console.WriteLine</code> 。</p>        <p id="83eebd62">在使用字符串格式方法时，JetBrains Rider突出显示格式占位符，并且当插入符位于任意一个时，还使用相应的参数同步突出显示占位符：</p>        <figure><img alt="在字符串格式化方法中突出显示参数和占位符" title="在字符串格式化方法中突出显示参数和占位符" src="/help/img/dotnet/2019.2/string_formatting_highlight.png" id="7d29238f" width="509" height="73"></figure>        <p id="0bfeeab6">如果参数和格式占位符不匹配（导致<code class="code">FormatException</code>在运行时，如果缺少参数），JetBrains Rider会为缺少或冗余参数生成警告：</p>        <figure><img alt="警告字符串格式化方法中缺少参数" title="警告字符串格式化方法中缺少参数" src="/help/img/dotnet/2019.2/string_formatting_warning.png" id="83691d6d" width="639" height="95"></figure>        <p id="72232d1f">您可以通过按以下按钮轻松解决此问题<kbd data-visual_studio="Alt+Enter" data-resharper="Alt+Enter" data-_default="Alt+Enter" data-visual_studio_osx="⌥ Enter" data-resharper_osx="⌥ Enter" data-mac_os_x_10.5_="⌥ Enter">Alt+Enter</kbd>超过警告。JetBrains Rider将建议自动添加缺少的参数或删除格式不匹配的占位符。</p>        <p id="9ed5d917">JetBrains Rider还可以帮助您检测和删除其他字符串格式化方法中多余的字符串格式化方法调用。例如：</p>        <figure><img alt="冗余调用字符串格式化方法" title="冗余调用字符串格式化方法" src="/help/img/rider/2019.2/string_formatting_redundant.png" id="280e4a56" width="649" height="114"></figure>        <p id="a324170a">要快速转换字符串文字和变量的串联，请按<kbd data-visual_studio="Alt+Enter" data-resharper="Alt+Enter" data-_default="Alt+Enter" data-visual_studio_osx="⌥ Enter" data-resharper_osx="⌥ Enter" data-mac_os_x_10.5_="⌥ Enter">Alt+Enter</kbd>连接中的任何位置，并使用<span class="control">To String。格式化调用</span> <a href="Coding_Assistance__Context_Actions.html">上下文动作</a> 。例如，如果我们在<code class="code">return</code>声明以下方法：</p>        <div class="code-block" data-lang="csharp">公共字符串Greet（字符串名称，整数年龄）{返回“嗨，我的名字是“ +名称+”，我是“ +年龄； }</div>        <p id="71e72a0b">它将转换为：</p>        <div class="code-block" data-lang="csharp">公共字符串Greet（字符串名称，整数年龄）{返回字符串。Format（“嗨，我叫{0}，我叫{1}”，名字，年龄）； }</div>        <p id="fc9df4c9">您还可以使用上下文操作来自动添加和删除字符串中的格式占位符和参数。当您在字符串文字中调用<span class="control">插入格式参数</span>操作时，JetBrains Rider会插入一个具有正确索引的新占位符，并将您带到可以立即开始键入参数的位置。也可以在纯字符串上调用此操作。在这种情况下，JetBrains Rider会自动将其转换为<code class="code">String.Format</code>呼叫。</p>        <p id="8660ab6e">为了快速删除格式占位符以及相应的参数，请在占位符处设置插入符号，然后按<kbd data-visual_studio="Alt+Enter" data-resharper="Alt+Enter" data-_default="Alt+Enter" data-visual_studio_osx="⌥ Enter" data-resharper_osx="⌥ Enter" data-mac_os_x_10.5_="⌥ Enter">Alt+Enter</kbd>然后选择<span class="control">删除格式参数</span> 。</p>    </div>    <div class="chapter"><h2 id="custom" data-toc="Code_Analysis__String_Formatting_Methods#custom">自定义字符串格式设置方法</h2>        <p id="4ec88a7b">当出现自定义字符串格式设置方法时，您必须告诉JetBrains Rider这样解释它，这很容易-您需要使用<code class="code">[StringFormatMethodAttribute]</code>从<a href="Code_Analysis__Code_Annotations.html">JetBrains。注释名称空间</a> 。该方法具有此属性后，您将享受<a href="#formatting">标准格式化方法可使用的</a>所有<a href="#formatting">功能</a> 。</p>        <p id="4f933c13">考虑自定义字符串格式设置方法<code class="code">ShowError</code> ：</p>        <div class="code-block" data-lang="csharp">public void ShowError（string formatString，params object [] args）{//一些自定义逻辑控制台。WriteLine（formatString，args）; }</div>        <p id="c3011055">如果错误地调用了该方法，如下所示，JetBrains Rider将没有机会检测到缺少的参数：</p>        <figure><img alt="字符串格式化方法调用不正确" title="字符串格式化方法调用不正确" src="/help/img/dotnet/2019.2/stringFormattingMethods_01.png" id="cc5c9e35" width="208" height="36" class="inline-icon-208"></figure>        <section class="procedure-steps"><h3 id="a42af4d2">使JetBrains Rider了解自定义字符串格式化方法</h3><ol class="list _decimal"><li class="list__item" id="ec83e637"><p>参考<code class="code">JetBrains.Annotations</code>名称空间，如“ <a href="Code_Analysis__Annotations_in_Source_Code.html">源代码</a>中的<a href="Code_Analysis__Annotations_in_Source_Code.html">注释”</a>部分中所述。</p></li><li class="list__item" id="67aea6e7"><p>使用注释您的自定义字符串格式设置方法<code class="code">[StringFormatMethodAttribute]</code>属性，它带有一个参数-格式字符串参数的名称：</p><div class="code-block" data-lang="csharp">[StringFormatMethod（“ formatString”）] public void ShowError（string formatString，params object [] args）{//一些自定义逻辑控制台。WriteLine（formatString，args）; }</div>            <p></p></li></ol></section>        <p id="a05bf4c8">现在，当调用此自定义格式设置方法时，JetBrains Rider将能够警告您有关缺少参数的信息。更重要的是， <span class="control">Add参数</span> <a href="Code_Analysis__Quick-Fixes.html">快速修复</a>将使您更轻松地插入它们：</p>        <figure><img alt="字符串格式化方法调用的快速修复" title="字符串格式化方法调用的快速修复" src="/help/img/rider/2019.2/stringFormattingMethods_03.png" id="8727cc47" width="336" height="112"></figure>        <aside class="prompt" rel="8727cc47" id="0f90bfc4" data-type="tip" data-title="">            <p id="fe414026">您可以使用<a href="Code_Analysis__External_Annotations.html">外部注释</a>对已编译库中的自定义字符串格式方法进行<a href="Code_Analysis__External_Annotations.html">注释</a> 。</p>        </aside>    </div>    <div class="chapter"><h2 id="interpolated-strings" data-toc="Code_Analysis__String_Formatting_Methods#interpolated-strings">插值字符串</h2>        <p id="a320ee5b">如果您在专案中使用C＃6.0，则可以使用<a href="https://msdn.microsoft.com/en-us/library/dn961160.aspx" rel="noopener noreferrer" data-external="true" target="_blank">内插字串，</a>而不是<code class="code">String.Format</code>方法。</p>        <p id="c7c058f0">            <a name="CsOrVbVersion"></a>默认情况下，JetBrains Rider基于关联的编译器自动检测C＃版本。但是，您可以显式指定目标C＃版本-按<kbd data-visual_studio="Alt+Enter" data-resharper="Alt+Enter" data-_default="Alt+Enter" data-visual_studio_osx="⌥ Enter" data-resharper_osx="⌥ Enter" data-mac_os_x_10.5_="⌥ Enter">Alt+Enter</kbd>在解决方案资源管理器中的项目上，并使用“ <span class="control">项目属性”</span>对话框的“ <span class="control">应用程序”</span>页面上的“ <span class="control">语言版本”</span>选择器。</p>        <p id="784d5160">在C＃6.0项目中，JetBrains Rider重点介绍了<code class="code">String.Format</code>建议将其转换为插值字符串。您可以使用<a href="Code_Analysis__Quick-Fixes.html">快速修复程序</a>通过几次击键来转换当前用法或<a href="Code_Analysis__Fix_in_Scope.html">特定范围内的</a>所有用法。</p>        <figure><img alt="JetBrains Rider：转换String的用法。格式化为字符串插值" title="JetBrains Rider：转换String的用法。格式化为字符串插值" src="/help/img/rider/2019.2/use_string_interpolation.png" id="0153327b" width="570" height="189"></figure>        <p id="be856ca5">如果插值字符串不包含表达式，JetBrains Rider会突出显示<code class="code">$</code>签名多余，可以帮助您删除它：</p>        <figure><img alt="JetBrains Rider：将不带参数的字符串插值转换为字符串文字" title="JetBrains Rider：将不带参数的字符串插值转换为字符串文字" src="/help/img/rider/2019.2/to_string_literal_fix.png" id="e8422c31" width="478" height="132"></figure>        <p id="30d3bf56">如果您需要快速添加<code class="code">$</code>在字符串的开头，当您深入输入字符串时，可以按<kbd data-visual_studio="Alt+Enter" data-resharper="Alt+Enter" data-_default="Alt+Enter" data-visual_studio_osx="⌥ Enter" data-resharper_osx="⌥ Enter" data-mac_os_x_10.5_="⌥ Enter">Alt+Enter</kbd>然后选择<span class="control">到字符串插值</span> 。<br>然后，您还可以选择“ <span class="control">插入插值”参数</span> ，JetBrains Rider将添加参数占位符<code class="code">{ }</code>在您的插入位置。</p>        <figure><img alt="JetBrains Rider：将简单字符串转换为字符串插值" title="JetBrains Rider：将简单字符串转换为字符串插值" src="/help/img/rider/2019.2/ca_to_string_interpolation.png" id="474b9529" width="446" height="109"></figure>    </div>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Collection_Access_Analysis.html">集合访问分析</a> <a class="navigation-links__next" href="Code_Analysis__Code_Annotations.html">使用注释来完善代码检查</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>