<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>编辑项目历史记录-帮助|帮助JetBrains骑士</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Edit_project_history" data-breadcrumbs="Version_Control_Integration.xml|Version control/Using_Git_Integration.xml|Git/Edit_project_history.xml|Edit project history" data-main-title="Edit project history" data-disqus-id="Edit_project_history_rdr"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索JetBrains Rider帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>JetBrains Rider 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="visual_studio" data-group="primary">视觉工作室</option><option value="resharper" data-group="primary">锐化器</option><option value="_default" data-group="primary">默认（IntelliJ IDEA）</option><option value="visual_studio_osx" data-group="secondary">Visual Studio（macOS）</option><option value="resharper_osx" data-group="secondary">ReSharper（macOS）</option><option value="mac_os_x_10.5_" data-group="secondary">Mac OS X 10.5+（IntelliJ IDEA）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Edit_project_history.xml" data-toc="Edit_project_history">编辑项目历史</h1>    <aside class="prompt" rel="Edit_project_history.xml" id="5bffbbcb" data-type="warning" data-title="">        <p id="b1c6b539">除非绝对必要，否则避免修改具有多个贡献者的远程分支的历史记录，例如，如果您不小心推送了一些敏感数据。</p>    </aside>    <p id="force_push_warning">Git允许您编辑项目历史记录。当您在功能分支上工作并想要对其进行清理并使其与他人<a href="Apply_changes_from_one_branch_to_another.html">共享</a>之前看起来像您想要的样子时，这很有用。例如，您可以编辑提交消息，将与相同功能相关的较小的提交压缩在一起，或者将包含无关更改的提交拆分为单独的提交，将更改添加到先前的提交，等等。</p><aside class="prompt" rel="force_push_warning" id="ea425bc5" data-type="note" data-title="">        <p>如果您修改过的历史记录的分支位于远程存储库中，则推送这样的修改将被拒绝以防止数据丢失，因此您必须<a href="Commit_and_push_changes.html#force-push">强制推送所做</a>的更改。</p><p id="05093423">您无法修改<span class="keyword">受保护</span>分支的历史记录，其中<code class="code">push --force</code>不允许（配置受保护的分支<a name="open_settings"></a>在“ <span class="control">设置/首选项”</span>对话框中（ <kbd data-visual_studio="Ctrl+Alt+S" data-resharper="Ctrl+Alt+S" data-_default="Ctrl+Alt+S" data-visual_studio_osx="⌘ ," data-resharper_osx="⌘ ," data-mac_os_x_10.5_="⌘ ,">Ctrl+Alt+S</kbd> ）在<span class="control">版本控制下| Git</span> ）。</p>    </aside>        <div class="chapter"><h2 id="reword-commit" data-toc="Edit_project_history#reword-commit">编辑提交消息</h2>        <p id="edit-commit-message">如果唯一需要更改的是提交消息，则可以在推送此提交之前对其进行编辑。</p>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="8a1dc9b5"><p>在“ <span class="control">日志”</span>视图中右键单击要编辑其消息的提交， <span class="control">然后</span>从上下文菜单中选择“ <span class="control">重新编写词</span> ”，或按<kbd data-visual_studio="F2" data-resharper="F2" data-_default="F2" data-visual_studio_osx="F2" data-resharper_osx="F2" data-mac_os_x_10.5_="F2">F2</kbd> 。</p></li><li class="list__item" id="79dd833e"><p>在打开的对话框中，输入新的提交消息，然后单击<span class="control">确定</span> 。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="amend-commit" data-toc="Edit_project_history#amend-commit">修改上一次提交</h2>        <p id="e724ab5d">有时您可能提交得太早而忘记添加一些文件，或者注意到您要修复的上一个提交中有错误而没有创建单独的提交。</p>        <p id="abdec0e0">您可以通过使用<span class="control">将提交的</span> <span class="emphasis">更改</span>附加到上一个提交的“ <span class="control">修改提交”</span>选项来执行此操作。结果，您最终将获得一个提交而不是两个不同的提交。</p>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="860480be"><p>在“ <span class="control">本地更改”</span>视图中选择要添加到上一次提交的<span class="control">更改</span> ，然后单击“确定”。 <img class="inline-icon-16" src="/help/img/rider/2019.2/icons.actions.commit@2x.png" width="16" alt="提交按钮">在工具栏上或按<kbd data-visual_studio="Ctrl+Shift+Alt+K" data-resharper="Ctrl+K" data-_default="Ctrl+K" data-visual_studio_osx="⌘ ⌥ ⇧ K" data-resharper_osx="⌘ K" data-mac_os_x_10.5_="⌘ K">Ctrl+Shift+Alt+K</kbd> 。</p></li><li class="list__item" id="d4c7d67f"><p>在“ <span class="control">提交更改”</span>对话框中，在<span class="control">提交更改之前</span> ，选择右侧的“ <span class="control">修改提交”</span>选项。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="573e1a83" data-toc="Edit_project_history#573e1a83">修改任何先前的提交</h2>        <p id="d7763d87">如果您需要将更改添加到任何先前的提交中，而不是分别提交，则可以使用<code class="code">fixup</code>或者<code class="code">squash</code>行动。这两个命令都将<span class="emphasis">阶段性更改</span>附加到所选提交，但是以不同方式处理提交消息：</p><ul class="list _bullet"><li class="list__item" id="7cac3f55"><p>                    <code class="code">squash</code>将新的提交消息添加到原始提交</p></li><li class="list__item" id="57579d67"><p>                    <code class="code">fixup</code>丢弃新的提交消息，仅保留原始提交中的消息</p></li></ul>        <p></p>        <aside class="prompt" rel="d7763d87" id="1d881118" data-type="note" data-title="">            <p id="bb67ac52">这两个命令都需要重新设置<a href="Apply_changes_from_one_branch_to_another.html#rebase-branch">基准，</a>因为它们会更改提交哈希。</p>        </aside>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="ad5aa443"><p>进行要附加到任何较早提交的更改（它们将在“ <span class="control">本地更改”</span>视图中可见）。</p></li><li class="list__item" id="1f1a3e37"><p>在“ <span class="control">日志”</span>视图中，右键单击要使用本地更改进行修改的提交，然后从上下文菜单中选择“ <span class="control">修复”</span>或“压<span class="control">入</span> ”。</p></li><li class="list__item" id="db1d0bfe"><p>如果您选择压缩更改，则如有必要，请修改提交消息。</p></li><li class="list__item" id="297c7798"><p>单击“ <span class="control">提交”</span>按钮上的箭头，然后选择“ <span class="control">提交并重新设置基准”</span> 。</p></li></ol></section>    </div>    <div class="chapter"><h2 id="interactive-rebase" data-toc="Edit_project_history#interactive-rebase">通过执行交互式变基来编辑项目历史记录</h2>        <p id="lose_history">Git允许您通过执行<span class="keyword">交互式变基</span>来编辑项目历史记录，以使其线性且有意义。这样，您可以在<a href="Apply_changes_from_one_branch_to_another.html">将</a>更改从<a href="Work_on_several_features_simultaneously.html#feature-branches">功能分支</a> <a href="Apply_changes_from_one_branch_to_another.html">集成</a>到另一个分支之前，通过更改单个提交，更改其顺序，将提交压缩为一个，跳过包含无关更改的提交等来清理提交历史记录。</p>            <section class="procedure-steps"><h3 id="408200e7">编辑当前分支的历史记录</h3><p id="072fba3e">JetBrains Rider允许您在将更改应用于其他分支之前，在当前分支中编辑一系列最近的提交。</p><ol class="list _decimal"><li class="list__item" id="5a13056f">                    <p id="7d1549a5">在“ <span class="control">版本控制”</span>工具窗口的“ <span class="control">日志”</span>选项卡中，选择要编辑的一系列提交中最旧的提交，右键单击它，然后选择“ <span class="control">从此处交互式地变基”</span> 。</p>                    <aside class="prompt" rel="7d1549a5" id="510f9c29" data-type="note" data-title="">                        <p id="0eb8792a">在许多情况下，“ <span class="control">从此处交互式地变基”</span>命令被禁用。例如，当提交有多个父项或不在当前分支中时。要获取有关实际原因的更多信息，请将鼠标悬停在上下文菜单中的“ <span class="control">从此处</span>进行<span class="control">交互式变基”</span>选项上，并在<span class="control">状态栏中</span>预览说明性消息。</p>                    </aside>                    <p id="start_interactive_rebase_from_here">将显示“ <span class="control">交互式重新基准”</span>对话框，其中包含当前分支中在选定提交之后进行的所有提交的列表。</p>                </li><li class="list__item" id="0b82e2ec"><p>如果您需要更改应用提交的顺序，请使用<img class="inline-icon-16" src="/help/img/rider/2019.2/icons.general.arrowUp@2x.png" width="16" alt="向上箭头">和<img class="inline-icon-16" src="/help/img/rider/2019.2/icons.general.arrowDown@2x.png" width="16" alt="向下箭头">纽扣。</p></li><li class="list__item" id="ee43713c">            <p id="25433e84">使用“ <span class="control">动作”</span>列表将以下动作应用于提交（您可以使用<kbd data-visual_studio="Ctrl+Alt+Right" data-resharper="Ctrl+W" data-_default="Ctrl+W" data-visual_studio_osx="⌘ ⌥ Right" data-resharper_osx="⌥ Up" data-mac_os_x_10.5_="⌥ Up">Ctrl+Alt+Right</kbd> / <kbd data-visual_studio="Ctrl+Alt+Left" data-resharper="Ctrl+Shift+W" data-_default="Ctrl+Shift+W" data-visual_studio_osx="⌘ ⌥ Left" data-resharper_osx="⌥ Down" data-mac_os_x_10.5_="⌥ Down">Ctrl+Alt+Left</kbd>选择一个动作）：</p>            <ul class="list _bullet"><li class="list__item" id="a04148a6"><p>                    <span class="control">选择</span> ：按原样应用所选提交。</p></li><li class="list__item" id="4150f17e"><p>                    <span class="control">编辑</span> ：选择此选项可在应用此提交之前编辑受此提交影响的文件。选择此操作后，将在IDE窗口的右下角弹出一个通知。您可以在编辑器中编辑要修改的文件，然后在此通知中单击“ <span class="control">继续”</span>以继续操作。 <code class="code">rebase</code>操作。</p></li><li class="list__item" id="9243edc2"><p>                    <span class="control">跳过</span> ：忽略选定的提交，因此将不会应用这些更改。</p></li><li class="list__item" id="e9fdc73f"><p>                    <span class="control">壁球</span> ：选择以将选定的提交与上一个合并。这两个提交的提交消息将被合并，因此此操作将反映在分支历史中。如有必要，更改提交的顺序，以使要追加更改的提交成为列表中的上一个提交。</p></li><li class="list__item" id="22a5f52f"><p>                    <span class="control">Reword</span> ：选择此选项可在应用提交消息之前对其进行编辑。</p></li><li class="list__item" id="ee92acab"><p>                    <span class="control">Fixup</span> ：选择此选项可将所选提交与上一个提交合并。fixup提交的提交消息将被丢弃，因此此更改在分支历史记录中将不可见。如有必要，更改提交的顺序，以使要追加更改的提交成为列表中的上一个提交。</p></li></ul>        </li></ol></section>            <section class="procedure-steps"><h3 id="1d979706">编辑分支历史并将其集成到另一个分支</h3><p id="0da3e7de">JetBrains的骑士让你<a href="Apply_changes_from_one_branch_to_another.html#rebase-branch">变基</a>上的另一个分支和编辑源分支历史之上的分支应用的更改。</p><ol class="list _decimal"><li class="list__item" id="4bfed37f"><p>从主菜单中选择<span class="control">VCS | VCS。 Git |重新设置基准</span> 。</p></li><li class="list__item" id="2e5bf69d"><p>在“ <span class="control">分支”</span>字段中选择要作为基准的<span class="control">分支</span> ，然后在“ <span class="control">Onto”</span>字段中选择目标分支。</p></li><li class="list__item" id="0040ac73"><p>在“ <span class="control">发件人”</span>字段中，选择要从其开始将所选分支应用于新基础的提交。</p></li><li class="list__item" id="2055f2a1">                    <p id="ae495e30">确保选择了<span class="control">Interactive</span>选项，然后单击<span class="control">Rebase</span> 。</p>                    <p id="7cf8597f">将显示“ <span class="control">交互式重新基准”</span>对话框，其中包含当前分支中在选定提交之后进行的所有提交的列表。</p>                </li><li class="list__item" id="90f10dfb"><p>如果您需要更改提交的顺序，请使用<img class="inline-icon-16" src="/help/img/rider/2019.2/icons.general.arrowUp@2x.png" width="16" alt="向上箭头">和<img class="inline-icon-16" src="/help/img/rider/2019.2/icons.general.arrowDown@2x.png" width="16" alt="向下箭头">纽扣。</p></li><li class="list__item" id="5935e8d1">            <p id="f7175441">使用“ <span class="control">动作”</span>列表将以下动作应用于提交（您可以使用<kbd data-visual_studio="Ctrl+Alt+Right" data-resharper="Ctrl+W" data-_default="Ctrl+W" data-visual_studio_osx="⌘ ⌥ Right" data-resharper_osx="⌥ Up" data-mac_os_x_10.5_="⌥ Up">Ctrl+Alt+Right</kbd> / <kbd data-visual_studio="Ctrl+Alt+Left" data-resharper="Ctrl+Shift+W" data-_default="Ctrl+Shift+W" data-visual_studio_osx="⌘ ⌥ Left" data-resharper_osx="⌥ Down" data-mac_os_x_10.5_="⌥ Down">Ctrl+Alt+Left</kbd>选择一个动作）：</p>            <ul class="list _bullet"><li class="list__item" id="eaf0cc65"><p>                    <span class="control">选择</span> ：按原样应用所选提交。</p></li><li class="list__item" id="23198d65"><p>                    <span class="control">编辑</span> ：选择此选项可在应用此提交之前编辑受此提交影响的文件。选择此操作后，将在IDE窗口的右下角弹出一个通知。您可以在编辑器中编辑要修改的文件，然后在此通知中单击“ <span class="control">继续”</span>以继续操作。 <code class="code">rebase</code>操作。</p></li><li class="list__item" id="99261dd5"><p>                    <span class="control">跳过</span> ：忽略选定的提交，因此将不会应用这些更改。</p></li><li class="list__item" id="dfff61f9"><p>                    <span class="control">壁球</span> ：选择以将选定的提交与上一个合并。这两个提交的提交消息将被合并，因此此操作将反映在分支历史中。如有必要，更改提交的顺序，以使要追加更改的提交成为列表中的上一个提交。</p></li><li class="list__item" id="9fe965a5"><p>                    <span class="control">Reword</span> ：选择此选项可在应用提交消息之前对其进行编辑。</p></li><li class="list__item" id="24875174"><p>                    <span class="control">Fixup</span> ：选择此选项可将所选提交与上一个提交合并。fixup提交的提交消息将被丢弃，因此此更改在分支历史记录中将不可见。如有必要，更改提交的顺序，以使要追加更改的提交成为列表中的上一个提交。</p></li></ul>        </li></ol></section>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月29日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="Use_tags_to_mark_specific_commits.html">使用标签来标记特定的提交</a> <a class="navigation-links__next" href="GitHub.html">GitHub</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>