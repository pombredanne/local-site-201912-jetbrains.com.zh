<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><meta charset="UTF-8"><title>Call Tree (Icicle Chart) - Help | dotMemory</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Icicles" data-disqus-id="Icicles_dm"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search dotMemory Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>dotMemory 2019.2 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="secondary" value="rs">ReSharper 2.x/IntelliJ IDEA</option><option data-group="primary" value="vs" selected>Visual Studio</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Icicles" id="Icicles.xml">Call Tree (Icicle Chart)</h1>        <p id="10b37e07">        The Icicle chart is a graphical representation of the stack trace responsible for creating a        selected object set.    </p>    <p id="94a7cc34">As well as in <span class="control">Call Tree</span>, calls are shown starting from the first call in the stack descending        to the one that        directly created the object set. Each call is shown as a horizontal bar which length depends        on the size of objects allocated in the call's subtree. The more memory was allocated in the underlying subtree,        the longer the bar. It's obvious that over the subtree, function calls (bars) can only reduce in size giving the        subtree a look of an icicle.    </p>    <p id="b770d36c">Use the Icicle chart to get an overview of the stack trace in just one glance. Without digging into the stack        trace, you        can quickly determine which function in the subtree allocates most of memory.    </p>    <div class="chapter"><h2 id="example" data-toc="Icicles#example">Example</h2>        <p id="269cc681">Consider the example below for better understanding of the Icicle chart.</p>        <figure><img alt="Icicles chart example" title="Icicles chart example" src="/help/img/dotnet/2019.2/icicles_2.png" id="9819cf61" width="509" height="188"></figure>                <p id="27a0d798">As you can see, to analyze the Call Tree, you have to expand all subtrees in the stack and interpret the            numbers in the <span class="control">Bytes</span> and            <span class="control">Bytes in subtree</span>            columns. In contrast, just a glance at the Icicle chart allows you to determine main memory generator in the            stack -            the "green icicle". A click on a function you're interested in will show you the corresponding stack trace            (on the right).            <br>The <span class="control">Allocated in function</span> value shows how much memory was allocated directly            in the selected function.            <br>The <span class="control">Allocated in subtree</span> value shows the amount of memory allocated in the            selected function and all underlying functions in the subtree.        </p>        <figure><img alt="Icicles chart" title="Icicles chart" src="/help/img/dotnet/2019.2/icicles_3.png" id="8bc51bcc" width="723" height="161"></figure>    </div>    <div class="chapter"><h2 id="how-the-icicle-chart-is-painted" data-toc="Icicles#how-the-icicle-chart-is-painted">How the icicle chart is painted</h2>        <p id="c4719896">Here are the rules of how dotMemory paints bars (functions) on the Icicle chart:</p>        <ul class="list _ul"><li class="list__item" id="ed9bf46a"><p>                <i id="a8ee765a">Allocated memory</i>                <br>                The more memory is allocated by a function, the larger the color value of the corresponding icicle bar.                Thus, functions that do not create objects by themselves look pale. Vice versa, functions that allocate                memory look darker.                <figure><img alt="Icicles chart" title="Icicles chart" src="/help/img/dotnet/2019.2/icicles_5.png" id="b81632a1" width="800" height="183"></figure>            </p></li><li class="list__item" id="e6ddd5d6"><p>                <i id="e6388df5">Branching</i>                <br>                Each new call subtree (when a function calls two more other functions) in the stack is painted with a                new                color.                <figure><img alt="Icicles branching" title="Icicles branching" src="/help/img/dotnet/2019.2/icicles_4.png" id="db7563f9" width="485" height="73"></figure>            </p></li><li class="list__item" id="9a93d286"><p>                <i id="e12b3194">System namespace</i>                <br>                To help you distinguish system calls from other ones, all functions from the                <code class="code">System</code>                namespace are painted in less saturated color. Consider the example below: The                <code class="code">ThemeCatalogRegistrarBase</code>                class doesn't belong to the                <code class="code">System</code>                namespace.                <figure><img alt="System calls" title="System calls" src="/help/img/dotnet/2019.2/icicles_6.png" id="c7509fd3" width="434" height="80"></figure>            </p></li><li class="list__item" id="24a7b2da">                <p id="00a5f519">                    <i id="9df9b49f">Functions with almost no allocations</i>                    <br>                    For the sake of simplicity, when a number (more than five) of subsequent calls do not allocate memory*,                    dotMemory groups them                    into one bar. Typically, these are system calls that are of no interest for the analysis.                    In the stack trace, such groups of calls are shown as <i id="807111b3">Folded items</i> and the corresponding bars                    are painted with the horizontal line pattern.                    <br>To expand the bars, use the middle-click.                </p>                <aside class="note " data-title="" rel="00a5f519" id="65304995"><p>* In fact, some insignificant allocations within such calls are possible. The length of the last                    and first                    bars in the group is allowed to differ not more than 2% from each other. Therefore, it's more                    correct to talk about "Functions with                    <i id="8f7cc95d">almost</i>                    no allocations".                </p></aside>                <p id="a523f149">                    <figure><img alt="Folded items" title="Folded items" src="/help/img/dotnet/2019.2/icicles_7.png" id="782e1030" width="397" height="191"></figure>                </p>            </li></ul>    </div>    <div class="chapter"><h2 id="zooming-in-and-out" data-toc="Icicles#zooming-in-and-out">Zooming in and out</h2>        <p id="f84eb17a">            If you want to take a more detailed look at a certain call subtree, you can change the scale of the Icicle            chart.        </p>        <section class="procedure-steps"><h3 id="22b16619">To zoom in on a call</h3><ul class="list "><li class="list__item" id="11c1ffe0">                <p id="66f6088c">                    Apply <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Shift+click</span></kbd> to the corresponding bar.                </p>                <p id="c7ee618a">The bar will take the entire width of the chart.</p>            </li></ul></section>        <section class="procedure-steps"><h3 id="58f742f6">To zoom back out</h3><ul class="list "><li class="list__item" id="ae9e0557"><p>                Double-click or use <kbd data-bypass="true" class="keystroke"><span class="keystroke__value">Shift+click</span></kbd> on a call that is located higher                in the stack (as it is represented with a longer bar).            </p></li></ul></section>        <figure><img alt="Icicles chart" title="Icicles chart" src="/help/img/dotnet/2019.2/icicles_9.gif" id="307c09dd" width="444" height="326"></figure>        <aside class="note " data-title="" rel="307c09dd" id="4ac61583">            <p id="99e21768">                For the convenience, when a group of calls (bars) is too short to be displayed in the current scale, the                chart shows them with a single <img alt="Small items" title="Small items" src="/help/img/dotnet/2019.2/icicles_8.png" id="fc488a13" width="13" height="18" class="inline-icon-13"> <i id="48fa43ff">Small items</i> bar.            </p>        </aside>    </div>    <div class="chapter"><h2 id="selecting-objects-for-further-an" data-toc="Icicles#selecting-objects-for-further-an">Selecting objects for further analysis</h2>        <p id="5a26154b">As well as in the <a href="dotMemory_Call_Tree.html">Call Tree</a> view,            you can select the following subjects for further analysis:        </p>        <ul class="list _ul"><li class="list__item" id="7c9b0839"><p>                <a href="#instance">Objects allocated in a particular function instance</a>;            </p></li><li class="list__item" id="cfe0b6dd"><p>                <a href="#subtree">Objects allocated in a function subtree</a>;            </p></li><li class="list__item" id="b32b8829"><p>                <a href="#merged">Objects allocated in all instances of the function</a>.            </p></li><li class="list__item" id="2f6d3c07"><p>                                    <a href="#set">Objects exclusively retained (dominated) by the whole object set</a>.                            </p></li></ul>        <section class="procedure-steps"><h3 id="instance">To select objects allocated by a particular function instance (exact call)</h3><ul class="list "><li class="list__item" id="471ccaf2">                <p id="2216dd6a">                    Do one of the following:                </p>                <ul class="list _ul"><li class="list__item" id="04ae08c9"><p>                        Double-click a corresponding bar.                    </p></li><li class="list__item" id="1ff77036"><p>                        Right-click the bar and choose                        <span class="control">Open objects allocated by this instance of the function</span>.                    </p></li></ul>                <p id="b0791b49">                    After this, the                    <span class="control">Created in instance of function [function_name]</span>                    subject will be added to the                    <a href="First_Look_at_the_dotMemory_s_User_Interface.html#ui">Analysis Path</a>                    and the list of desired objects will be displayed in the                    <a href="Type_List.html">Group by Types</a>                    view.                </p>            </li></ul></section>        <section class="procedure-steps"><h3 id="subtree">To select objects allocated in a function subtree     (function instance and all its underlying calls)</h3><ul class="list "><li class="list__item" id="3ffe0c27">                <p id="1a490431">                    Right-click the corresponding bar and choose                    <span class="control">Open objects allocated by all functions in this subtree</span>.                </p>                <p id="05a963a7">                    After this, the                    <span class="control">Created in subtree of function [function_name]</span>                    subject will be added to the                    <a href="First_Look_at_the_dotMemory_s_User_Interface.html#ui">Analysis Path</a>                    and the list of desired objects will be displayed in the                    <a href="Type_List.html">Group by Types</a>                    view.                </p>            </li></ul></section>        <section class="procedure-steps"><h3 id="merged">To select objects allocated in all instances of a function</h3><ul class="list "><li class="list__item" id="78725bab">                <p id="ab4037ce">                    Right-click the corresponding bar and choose                    <span class="control">Open objects allocated by all instances of the function</span>.                </p>                <p id="5f3a42fe">                    After this, the                    <span class="control">Created in all instances of function [Function_name]</span>                    subject will be added to the                    <a href="First_Look_at_the_dotMemory_s_User_Interface.html#ui">Analysis Path</a>                    and the list of desired objects will be displayed in the                    <a href="Type_List.html">Group by Types</a>                    view.                </p>            </li></ul></section>                    <section class="procedure-steps"><h3 id="set">To select the objects that are exclusively retained by the analyzed objects set</h3><ul class="list "><li class="list__item" id="6265ae4d">                    <p id="8c05774b">                        Click the                        <img alt="Open retained objects" title="Open retained objects" src="/help/img/dotnet/2019.2/open_retained_objects_button.png" id="2d2d3925" width="25" height="23" class="inline-icon-25">                        <span class="control">Open objects retained by this set</span>                        button.                    </p>                    <p id="edec5bc7">                        After this, the                        <span class="control">Exclusively retained objects</span>                        subject will be added to the                        <a href="First_Look_at_the_dotMemory_s_User_Interface.html#ui">Analysis Path</a>                        and the list of desired objects will be displayed in the                        <a href="Type_List.html">Group by Types</a>                        view.                    </p>                </li></ul></section>            </div>    <div class="last-modified" data-skip-index="skip">Last modified: 8 August 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="dotMemory_Call_Tree.html">Call Tree</a><a class="navigation-links__next" href="Back_Traces.html">Back Traces</a></div><section class="seealso" data-skip-index="skip"><div class="seealso__header"><h2>See Also</h2></div><div class="seealso__content"><div class="seealso__col" data-skip-index="skip"><h3>Reference:</h3><ul class="list"><li class="list__item"><a href="Reference__Views_Legend.html">Icons</a></li></ul></div></div></section></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>