<html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><meta charset="UTF-8"><title>API参考-帮助|点内存</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="API_Reference" data-disqus-id="API_Reference_dm"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索dotMemory帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>dotMemory 2019.2帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="rs" data-group="secondary">ReSharper 2.x / IntelliJ IDEA</option><option value="vs" data-group="primary" selected>视觉工作室</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="API_Reference.xml" data-toc="API_Reference">API参考</h1>        <div class="chapter"><h2 id="7bf5e1a3" data-toc="API_Reference#7bf5e1a3">MemoryProfiler类方法</h2>        <div class="table-wrapper"><table class=" wide" width="100%" id="77c20ef1"><thead><tr id="afa7005b" class="ijRowHead"><th id="f3d8801d" width="20%"><p>项目</p></th><th id="475c8cf7" width="20%"><p>退货</p></th><th id="a870e50f" width="60%"><p>描述</p></th></tr></thead><tbody><tr id="32d79589" class="ijRowOdd"><td id="5dd92abd">                    <code class="code">GetFeatures()</code>                </td><td id="895c4935">                    <code class="code">enum MemoryFeatures: uint</code>                </td><td id="fcf0f3cf">                    <p id="76073159">返回事件探查器中当前活动的一组功能： <code class="code">MemoryFeatures</code>值完全描述了当前探查器状态。每个位指示相应的功能当前是否可用：</p>                    <ul class="list _ul"><li class="list__item" id="2a38a5cc"><p><code class="code">Ready = 0x1</code> ：指示分析器是否已准备好工作。仅在将探查器附加到当前进程的情况下，才需要检查此标志：一旦探查器准备好接受命令，该标志就会被设置。如果您在概要分析中启动进程，则始终设置此标志。从流程中分离探查器之后，该标志将被清除。</p></li><li class="list__item" id="232ab273"><p><code class="code">Detach = 0x2</code> ：指示是否可以使用<code class="code">MemoryProfiler.Detach()</code> 。<br>                            <code class="code">0</code> ：探查器将忽略<code class="code">MemoryProfiler.Detach()</code> 。<br>                            <code class="code">1</code> ： <code class="code">MemoryProfiler.Detach()</code>将从探查进程中分离探查器。</p></li><li class="list__item" id="9b11369b"><p><code class="code">CollectAllocations = 0x4</code> ：指示是否可以使用<code class="code">CollectAllocations(bool enabled)</code> 。如果<code class="code">0</code> ，探查器会忽略<code class="code">CollectAllocations</code>呼叫。如果<code class="code">1</code> ， <code class="code">CollectAllocations</code>通话将生效。</p></li></ul>                </td></tr><tr id="cc606e18" class="ijRowEven"><td id="22a510a7">                    <code class="code">GetSnapshot()</code>                </td><td id="3af88463"></td><td id="f74d5196"><p>收集内存快照并将其保存到磁盘。此方法强制进行完整的垃圾收集。<br>即使在禁用概要分析的情况下运行应用程序，也不会引发任何错误。</p></td></tr><tr id="594d4e04" class="ijRowOdd"><td id="9da8420c">                    <code class="code">GetSnapshot(string name)</code>                </td><td id="fe20ed55"></td><td id="3fbb4d95"><p>[限内部使用]<br>收集内存快照并将其保存到磁盘。此方法强制进行完整的垃圾收集。<br>即使在禁用概要分析的情况下运行应用程序，也不会引发任何错误。<br>                    <code class="code">name</code>是内存快照的名称。它不是文件名。</p></td></tr><tr id="ee199262" class="ijRowEven"><td id="7281749e">                    <code class="code">ForceGc()</code>                </td><td id="138fbd99"></td><td id="2ae71374"><p>强制进行完整的垃圾收集。<br>即使在禁用概要分析的情况下运行应用程序，也不会引发任何错误。</p></td></tr><tr id="8a622496" class="ijRowOdd"><td id="34eae314">                    <code class="code">CollectAllocations(bool enable)</code>                </td><td id="22fe9fb3"></td><td id="be4e3843"><p>启用/禁用收集内存分配数据。如果在事件探查器中禁用了收集分配数据，则不执行任何操作。要检查是否启用了收集，请使用<code class="code">MemoryProfiler.GetFeatures()</code> 。<br>即使在禁用概要分析的情况下运行应用程序，也不会引发任何错误。</p></td></tr><tr id="a8777adf" class="ijRowEven"><td id="2425c7de">                    <code class="code">Detach()</code>                </td><td id="eab9c62d"></td><td id="728ebf25"><p>从概要分析过程中分离概要分析器。如果在事件探查器中禁用了分离，则不执行任何操作。要检查是否启用了分离，请使用<code class="code">MemoryProfiler.GetFeatures()</code>与<code class="code">MemoryFeatures.Detach</code>旗。即使在禁用概要分析的情况下运行应用程序，也不会引发任何错误。</p></td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="25cadb6f" data-toc="API_Reference#25cadb6f">SelfAttach类的属性</h2>        <div class="table-wrapper"><table class=" wide" width="100%" id="d7efb150"><thead><tr id="d5d55cf3" class="ijRowHead"><th id="1421a0ed" width="20%"><p>项目</p></th><th id="ced75438" width="20%"><p>类型</p></th><th id="295f66f1" width="60%"><p>描述</p></th></tr></thead><tbody><tr id="63c3f0be" class="ijRowOdd"><td id="d550ab64">                    <code class="code">State</code>                </td><td id="2f22de3c">                    <code class="code">enum SelfApiState {None, Inactive, Active}</code>                </td><td id="ac774bbb">                    <p id="80a66ece">指示探查器状态。</p>                    <ul class="list _ul"><li class="list__item" id="741d9293"><p>                            <code class="code">None</code> ：分析器不可用。</p></li><li class="list__item" id="edf1f15a"><p>                            <code class="code">Inactive</code> ：分析器可用。分析控制不可用。</p></li><li class="list__item" id="293ff3eb"><p>                            <code class="code">Active</code> ：分析器可用。可以通过API或控制器窗口来控制分析。</p></li></ul>                </td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="7d0f7bcd" data-toc="API_Reference#7d0f7bcd">SelfAttach类方法</h2>        <div class="table-wrapper"><table width="100%" id="343c5500"><thead><tr id="ba5033c7" class="ijRowHead"><th id="6088af5f" width="20%"><p>项目</p></th><th id="9c46d01c" width="80%"><p>描述</p></th></tr></thead><tbody><tr id="a042df3d" class="ijRowOdd"><td id="de2a2528">                    <code class="code">Attach(BaseProfilingConfig baseConfig)</code>                </td><td id="83d4b549"><p>使用提供的配置将探查器附加到调用应用程序<code class="code">baseConfig</code> 。</p></td></tr><tr id="8ebe41f2" class="ijRowEven"><td id="221ecbee">                    <code class="code">Show()</code>                </td><td id="bd2de773"><p>向用户显示配置控制器。</p></td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="4d0b7568" data-toc="API_Reference#4d0b7568">BaseProfilingConfig类的公共字段</h2>        <div class="table-wrapper"><table class=" wide" width="100%" id="e7714a4b"><thead><tr id="35877bd4" class="ijRowHead"><th id="310e0337" width="20%"><p>项目</p></th><th id="a256b006" width="20%"><p>类型</p></th><th id="42ec9aee" width="60%"><p>描述</p></th></tr></thead><tbody><tr id="d5596fd0" class="ijRowOdd"><td id="641f2055">                    <code class="code">ProfilingControlKind</code>                </td><td id="a308cbc3">                    <code class="code">enum ProfilingControlKind {None, Manual, Api}</code>                </td><td id="12c9f424">                    <p id="c9fc7d3b">定义分析控制方法。</p>                    <ul class="list _ul"><li class="list__item" id="ee5db45b"><p>                            <code class="code">None</code> ： 无控制。</p></li><li class="list__item" id="651acf5e"><p>                            <code class="code">Manual</code> ：通过“ <span class="control">控制器”</span>窗口进行<span class="control">控制</span> 。</p></li><li class="list__item" id="c14ff1ef"><p>                            <code class="code">Api</code> ：通过API控制。</p></li></ul>                </td></tr><tr id="6000c084" class="ijRowEven"><td id="99687604">                    <code class="code">ProfilingType</code>                </td><td id="466d914a">                    <code class="code">enum ProfilingType {Performance, Memory, Timeline}</code>                </td><td id="9fcae8f8">                                        <p id="c8cb6977">定义分析方法。</p>                                        <ul class="list _ul"><li class="list__item" id="9c7b3216"><p>                            <code class="code">Performance</code> ：性能分析（由dotTrace探查器使用）。</p></li><li class="list__item" id="b9d39caa"><p>                            <code class="code">Memory</code> ：内存分析。</p></li><li class="list__item" id="11473e48"><p>                            <code class="code">Timeline</code> ：时间轴分析（由dotTrace探查器使用）。</p></li></ul>                </td></tr><tr id="ec20956f" class="ijRowOdd"><td id="55839220">                    <code class="code">PerformaceMeterKind</code>                </td><td id="a52e2762">                    <code class="code">enum PerformaceMeterKind {Rdtsc, PerformanceCounter, ThreadTime, ThreadCycleTime}</code>                </td><td id="aa0e46f4">                                        <p id="9cf453b1">[仅用于性能分析]定义时间测量方法。</p>                    <ul class="list _ul"><li class="list__item" id="16ab5bf4"><p>                            <code class="code">Rdtsc</code> ：实时（CPU指令）。</p></li><li class="list__item" id="472eb13c"><p>                            <code class="code">PerformanceCounter</code> ：实时（性能计数器）。</p></li><li class="list__item" id="15c74986"><p>                            <code class="code">ThreadTime</code> ：线程时间。</p></li><li class="list__item" id="081cc933"><p>                            <code class="code">ThreadCycleTime</code> ：线程循环时间。</p></li></ul>                </td></tr><tr id="13758994" class="ijRowEven"><td id="fe023fd6">                    <code class="code">RedistDir</code>                </td><td id="7a882c62">                    <code class="code">string</code>                </td><td id="7940e785"><p>定义dotMemory SDK可再发行文件的位置。默认情况下，它们在与<span class="filepath">JetBrains相同的文件夹中搜索<span class="filepath">。探查器。视窗。Api.dll</span>位于。</span></p></td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="c141d342" data-toc="API_Reference#c141d342">BaseSnapshotProfilingConfig类的公共字段</h2>        <div class="table-wrapper"><table class=" wide" width="100%" id="fddb3c00"><thead><tr id="856a7d06" class="ijRowHead"><th id="0222f159" width="20%"><p>项目</p></th><th id="7237dd04" width="20%"><p>类型</p></th><th id="cc2b3d77" width="60%"><p>描述</p></th></tr></thead><tbody><tr id="ff69e454" class="ijRowOdd"><td id="61bd8835">                    <code class="code">SaveDir</code>                </td><td id="09daa204">                    <code class="code">string</code>                </td><td id="59ccd9a8"><p>为生成的快照定义路径和基本文件名。此配置必需。</p></td></tr><tr id="f6d753ec" class="ijRowEven"><td id="4a78050f">                    <code class="code">SnapshotFormat</code>                </td><td id="0091bf95">                    <code class="code">enum {Compressed, Uncompressed}</code>                </td><td id="3adf9065"><p>定义快照的文件格式：压缩或未压缩。默认情况下，它是压缩的。</p></td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="1a7504c8" data-toc="API_Reference#1a7504c8">SaveSnapshotProfilingConfig类的公共字段</h2>        <div class="table-wrapper"><table class=" wide" width="100%" id="bd322657"><thead><tr id="3563efeb" class="ijRowHead"><th id="5718d122" width="20%"><p>项目</p></th><th id="8295234e" width="20%"><p>类型</p></th><th id="43ffca67" width="60%"><p>描述</p></th></tr></thead><tbody><tr id="07b722b2" class="ijRowOdd"><td id="e6180e91">                    <code class="code">ListFile</code>                </td><td id="b3eb515c">                    <code class="code">string</code>                </td><td id="6ef9bb01"><p>为文件定义文件名，该文件列出在分析过程中收集的快照。此配置必需。<br>不要手动创建此文件，它会在分析过程中自动创建！<br>在打开文件之前，请勿打开此文件。 <code class="code">SelfAttach.State</code>在里面<code class="code">None</code>州！</p></td></tr></tbody></table></div>    </div>    <div class="chapter"><h2 id="80d48c0a" data-toc="API_Reference#80d48c0a">ExecutableSnapshotProfilingConfig类公共字段</h2>        <div class="table-wrapper"><table class=" wide" width="100%" id="1a84aeaa"><thead><tr id="0557e27f" class="ijRowHead"><th id="a4b6ee2a" width="20%"><p>项目</p></th><th id="8a3e9ecd" width="20%"><p>类型</p></th><th id="867ad198" width="60%"><p>描述</p></th></tr></thead><tbody><tr id="0fc14156" class="ijRowOdd"><td id="7af989b2">                    <code class="code">Executable</code>                </td><td id="6ff40570">                    <code class="code">string</code>                </td><td id="072667ec"><p>定义分析完成后要运行的可执行文件的路径。快照路径将作为参数传递到此可执行文件。此配置必需。</p></td></tr></tbody></table></div>    </div>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年8月8日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__next" href="Working_with_dotMemory_Command-Line_Profiler.html">使用dotMemory命令行事件探查器</a> <a class="navigation-links__prev" href="Profiling_Guidelines__Advanced_Profiling_Using_dotTrace_API.html">通过API控制分析会话</a></div><section class="seealso" data-skip-index="skip"><div class="seealso__header"><h2>也可以看看</h2></div><div class="seealso__content"><div class="seealso__col" data-skip-index="skip"><h3>概念：</h3><ul class="list"><li class="list__item"><a href="Profiling_Guidelines__Advanced_Profiling_Using_dotTrace_API.html">通过API控制分析会话</a></li></ul></div></div></section></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>