<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Docker-帮助|帮助里昂</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Docker_ps" data-breadcrumbs="Language and Framework-Specific Guidelines/Docker.xml|Docker" data-main-title="Docker"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索CLion帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>CLion 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_default_for_macos" data-group="primary">macOS的默认设置</option><option value="primary_intellij_idea_classic_macos" data-group="primary">IntelliJ IDEA经典版（macOS）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_macos" data-group="primary">Eclipse（macOS）</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_sublime_text_macos" data-group="primary">崇高文字（macOS）</option><option value="primary_xcode" data-group="primary">Xcode</option><option value="primary_resharper" data-group="primary">锐化器</option><option value="primary_resharper_macos" data-group="primary">ReSharper（macOS）</option><option value="secondary_default_for_windows" data-group="secondary">Windows的默认设置</option><option value="secondary_default_for_macos" data-group="secondary">macOS的默认设置</option><option value="secondary_intellij_idea_classic" data-group="secondary">IntelliJ IDEA经典版</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_macos" data-group="secondary">Eclipse（macOS）</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_sublime_text" data-group="secondary">崇高文字</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option><option value="secondary_xcode" data-group="secondary">Xcode</option><option value="secondary_resharper" data-group="secondary">锐化器</option><option value="secondary_resharper_macos" data-group="secondary">ReSharper（macOS）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Docker.xml" data-toc="Docker_ps">码头工人</h1>                                <p id="intro">        <a href="https://www.docker.com/what-docker" rel="noopener noreferrer" data-external="true" target="_blank">Docker</a>使开发人员能够在与生产相同的环境中在容器内部署应用程序以测试代码。CLion使用<a href="https://plugins.jetbrains.com/plugin/7724-docker" rel="noopener noreferrer" data-external="true" target="_blank">Docker</a>插件提供Docker支持。该插件默认捆绑并启用。</p><aside class="prompt" rel="intro" id="61f1bd32" data-type="warning" data-title="">        <p id="6d259a8b"><span class="emphasis">Docker</span>插件未与CLion捆绑在一起，应与JetBrains插件存储库分开安装。有关更多信息，请参见<a href="managing-plugins.html">插件</a> 。</p>    </aside>                    <section class="procedure-steps"><h3 id="enable_docker">启用Docker支持</h3><ol class="list _decimal"><li class="list__item" id="193de890">            <p id="10c904b0">安装并运行Docker。</p>            <p id="cac75614">有关更多信息，请参阅<a href="https://docs.docker.com/install/" rel="noopener noreferrer" data-external="true" target="_blank">Docker文档</a> 。</p>        </li><li class="list__item" id="daemon-connection">            <p id="f4dbf111">配置Docker守护程序连接设置。</p>            <ul class="list _alpha-lower"><li class="list__item" id="7d52eff7">                    <p id="30fd3f1f">                        <a name="open_settings"></a>在<a name="the_settings_dialog"></a> <span class="control">设置/首选项</span>对话框<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-primary_xcode="⌘+Comma" data-primary_resharper="Alt+F7" data-primary_resharper_macos="Alt+F7" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘," data-secondary_xcode="⌘," data-secondary_resharper="⌥F7" data-secondary_resharper_macos="⌥F7">Ctrl+Alt+S</kbd> ，选择<span class="menupath" data-skip-index="skip">构建，执行，部署|码头工人</span></p>                </li><li class="list__item" id="681ba7f7">                    <p id="b2a8a02d">请点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加按钮">添加Docker配置并指定如何连接到Docker守护程序。</p>                    <p id="18bffda3">连接设置取决于您的Docker版本和操作系统。有关更多信息，请参阅<a href="docker-connection-settings.html">Docker配置</a> 。</p>                    <p id="46b177fe"><span class="control">连接成功</span>消息应显示在对话框的底部。</p>                                                            <figure><img alt="Docker连接设置" title="Docker连接设置" src="/help/img/idea/2019.3/03_DockerSettings.png" id="783ade83" width="700" height="1026"></figure>                                                                                                    <aside class="prompt" rel="783ade83" id="3f62cd01" data-type="note" data-title="">                        <p id="a28d4ffb"><span class="control">路径映射</span>表用于将本地文件夹映射到Docker虚拟机文件系统中的相应目录。仅指定的文件夹可用于<a href="#volume_bindings">卷绑定</a> 。</p>                        <p id="52677057">该表在Linux上不可用，因为在Linux上运行Docker时，任何文件夹均可用于卷绑定。</p>                    </aside>                </li></ul>        </li><li class="list__item" id="connect">            <p id="88867e4f">连接到Docker守护程序。</p>            <p id="c8f4a2e3">配置的Docker连接应出现在“ <span class="control">服务”</span>工具窗口（“ <span class="menupath" data-skip-index="skip">视图” |“工具”窗口|“服务”</span> ）中。选择Docker节点<img class="inline-icon-16" src="/help/img/idea/2019.3/Docker-core.icons.Docker@2x.png" width="16" alt="Docker节点">然后点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.execute@2x.png" width="16" alt="连接按钮"> ，或从上下文菜单中选择“ <span class="control">连接</span> ”。</p>            <figure><img alt="Docker工具窗口，已连接到Docker" title="Docker工具窗口，已连接到Docker" src="/help/img/idea/2019.3/51_DockerConnected.png" id="769b8fc2" width="598" height="394"></figure>                                                            <p id="fb9d08b0">要编辑Docker连接设置，请选择Docker节点并单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.editSource@2x.png" width="16" alt="编辑配置按钮">在工具栏上，或从上下文菜单中选择“ <span class="control">编辑配置</span> ”。</p>        </li></ol></section>    <p id="fad94aee">使用“ <span class="control">服务”</span>工具窗口（“ <span class="menupath" data-skip-index="skip">视图” |“工具窗口” |“服务”</span> ），您可以管理映像，运行容器以及使用Docker Compose。与其他工具窗口一样，您可以开始键入图像或容器的名称以突出显示匹配的项目。</p><figure><img alt="Docker工具窗口，文本搜索" title="Docker工具窗口，文本搜索" src="/help/img/idea/2019.3/55_DockerFindImage.png" id="6f88163c" width="598" height="394"></figure>                               <p></p>    <div class="chapter"><h2 id="managing-images">管理影像</h2>        <p id="1f657945">Docker映像是用于运行容器的可执行软件包。根据您的开发需求，可以将Docker用于以下用途：</p>        <ul class="list _bullet"><li class="list__item" id="e49fd888">                <a href="#pull-image">从Docker注册表中提取预构建的映像</a>                <p id="4d809a70">例如，您可以提取一个运行Postgres服务器容器的映像来测试您的应用程序如何与您的生产数据库交互。</p>            </li><li class="list__item" id="466e2697">                <a href="#build-image">从Dockerfile本地构建映像</a>                <p id="caf646aa">例如，您可以构建一个运行带有特定版本的Java Runtime Environment（JRE）的容器的映像，以在其中运行Java应用程序。</p>            </li><li class="list__item" id="f483091a">                <a href="#push-image">将映像推送到Docker注册表</a>                <p id="c23a2a2e">例如，如果您想向某人演示您的应用程序如何在JRE的某些特定版本中运行而不是设置适当的环境，则他们可以从您的映像中运行一个容器。</p>            </li></ul>        <p id="docker-registry">图像通过Docker注册表分发。<a href="https://hub.docker.com/" rel="noopener noreferrer" data-external="true" target="_blank">Docker Hub</a>是默认的公共注册表，其中包含所有最常见的映像：各种Linux版本，数据库管理系统，Web服务器，运行时等。还有其他公共和私有Docker注册表，您还可以部署自己的注册表服务器。</p>                <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="configure-registry">配置Docker注册表</h3></div><div class="collapse__content"><aside class="prompt" rel="configure-registry" id="a908c80b" data-type="note" data-title="">                <p id="751d515d">如果只使用<a href="https://hub.docker.com/" rel="noopener noreferrer" data-external="true" target="_blank">Docker Hub，</a>则不需要配置注册表。</p>            </aside><ol class="list _decimal"><li class="list__item" id="0c059c9d">                <p id="d48c6a9b"><a name="open_settings"></a>在<a name="the_settings_dialog"></a> <span class="control">设置/首选项</span>对话框<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-primary_xcode="⌘+Comma" data-primary_resharper="Alt+F7" data-primary_resharper_macos="Alt+F7" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘," data-secondary_xcode="⌘," data-secondary_resharper="⌥F7" data-secondary_resharper_macos="⌥F7">Ctrl+Alt+S</kbd> ，选择<span class="menupath" data-skip-index="skip">构建，执行，部署|码头工人|注册表</span> 。</p>            </li><li class="list__item" id="03de1f23">                <p id="f2a8135b">请点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加按钮">添加Docker注册表配置并指定如何连接到注册表。如果指定凭据，CLion将自动检查与注册表的连接。<span class="control">连接成功</span>消息应显示在对话框的底部。</p>                <figure><img alt="Docker注册表对话框" title="Docker注册表对话框" src="/help/img/idea/2019.3/59_DockerRegistryDialog.png" id="6d18f1c6" width="700" height="1026"></figure>                                                                                            </li></ol></div></div></section>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="pull-image">从Docker注册表中提取映像</h3></div><div class="collapse__content"><ol class="list _decimal"><li class="list__item" id="afd869fa">                <p id="63938932">在<span class="control">服务</span>工具窗口中，选择<span class="control">图像</span>节点，然后单击<img class="inline-icon-16" src="/help/img/idea/2019.3/Docker-core.icons.PullImage@2x.png" width="16" alt="拉图像按钮"> 。</p>            </li><li class="list__item" id="1762b2c6"><p>选择<a href="#configure-registry">Docker注册表</a>并指定存储库和标记（例如，映像的名称和版本， <code class="code">tomcat:latest</code> ）。</p><figure><img alt="拉图像对话框" title="拉图像对话框" src="/help/img/idea/2019.3/53_DockerPullImageDialog.png" id="26d5c2f3" width="373" height="350"></figure>                                                                            <p></p></li></ol><p id="010f22c6">单击<span class="control">确定时</span> ，CLion将运行<code class="code">docker pull</code>命令。有关更多信息，请参阅<a href="https://docs.docker.com/engine/reference/commandline/pull/" rel="noopener noreferrer" data-external="true" target="_blank">docker pull</a>命令参考。</p></div></div></section>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="build-image">从Dockerfile构建映像</h3></div><div class="collapse__content"><ol class="list _decimal"><li class="list__item" id="feaecc3b"><p>打开您要用来构建映像的<a href="https://docs.docker.com/engine/reference/builder/" rel="noopener noreferrer" data-external="true" target="_blank">Dockerfile</a> 。</p></li><li class="list__item" id="5274ec3c"><p>请点击<img class="inline-icon-12" src="/help/img/idea/2019.3/icons.runConfigurations.testState.run_run@2x.png" width="12" alt="在Docker上构建">在装订线中选择在特定Docker节点上构建映像。</p><figure><img alt="在Docker弹出窗口上构建映像" title="在Docker弹出窗口上构建映像" src="/help/img/idea/2019.3/56_DockerfileBuild.png" id="aab115a4" width="238" height="222"></figure>                                                                                            <p></p></li></ol><p id="56d472d8">CLion运行<code class="code">docker build</code>命令。有关更多信息，请参阅<a href="https://docs.docker.com/engine/reference/commandline/build/" rel="noopener noreferrer" data-external="true" target="_blank">docker build</a>命令参考。</p></div></div></section>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="push-image">将映像推送到Docker注册表</h3></div><div class="collapse__content"><ol class="list _decimal"><li class="list__item" id="ec1930da"><p>在<span class="control">服务</span>工具窗口中，选择要上传的图像，然后单击<img class="inline-icon-16" src="/help/img/idea/2019.3/Docker-core.icons.PushImage@2x.png" width="16" alt="推送图片按钮"> 。</p><figure><img alt="推送图像上下文菜单项" title="推送图像上下文菜单项" src="/help/img/idea/2019.3/57_DockerPushImage.png" id="eb9036d3" width="594" height="538"></figure>                                                                            <p></p></li><li class="list__item" id="a0f9d2f5"><p>选择<a href="#configure-registry">Docker注册表</a>并指定存储库和标记（例如，映像的名称和版本， <code class="code">my-app:v2</code> ）。</p><figure><img alt="推送图像对话框" title="推送图像对话框" src="/help/img/idea/2019.3/58_DockerPushDialog.png" id="8a2d4a3c" width="373" height="362"></figure>                                            <p></p></li></ol><p id="9c684a5c">单击<span class="control">确定时</span> ，CLion将运行<code class="code">docker push</code>命令。有关更多信息，请参阅<a href="https://docs.docker.com/engine/reference/commandline/push/" rel="noopener noreferrer" data-external="true" target="_blank">docker push</a>命令参考。</p></div></div></section>        <p id="a024adb3">您拉取或构建的图像存储在本地，并在“ <span class="control">服务”</span>工具窗口中的“ <span class="control">图像”下列出</span> 。选择图像后，您可以单击其ID查看其ID或将其复制到剪贴板。 <img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.copy@2x.png" width="16" alt="复制到剪贴板按钮"> <span class="control">属性</span>选项卡上的按钮。</p>        <figure><img alt="Docker映像属性" title="Docker映像属性" src="/help/img/idea/2019.3/54_DockerImageID.png" id="840879a4" width="594" height="392"></figure>                                              <p id="1dad3a25">没有标签的图像<code class="code"><none>:<none></code>可以是以下之一：</p>        <ul class="list _ul"><li class="list__item" id="c08c9167">                <p id="7da83e0a"><i id="aedad106">中间图像</i>充当其他图像的图层，并且不占用任何空间。</p>            </li><li class="list__item" id="67780d83">                <p id="09accefb">当您基于另一个图像的较新版本重建图像时，会保留<i id="b9d38a35">悬挂的</i>图像。悬挂的映像应该被修剪以节省磁盘空间。</p>            </li></ul>                <p id="958382d2">要从列表中隐藏未标记的图像，请单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.filter@2x.png" width="16" alt="过滤器菜单">在Docker工具栏上，然后单击<span class="control">显示未标记的图像</span>以删除复选标记。</p>        <p id="418b54e3">要删除一张或多张图像，请在列表中选择它们，然后单击<img class="inline-icon-16" src="/help/img/idea/2019.3/Docker-core.icons.DeleteImage@2x.png" width="16" alt="删除图像按钮"> 。</p>    </div>    <div class="chapter"><h2 id="run-containers">运行容器</h2>        <p id="af97bee2">容器是相应映像的运行时实例。有关更多信息，请参阅<a href="https://docs.docker.com/engine/reference/commandline/run/" rel="noopener noreferrer" data-external="true" target="_blank">docker run</a>命令参考。</p>        <p id="docker_deployment_run_configs">CLion使用<a href="run-debug-configuration.html">运行配置</a> （ <span class="menupath" data-skip-index="skip">“运行” |“编辑配置”</span> ）运行Docker容器。三种类型的Docker运行配置：</p>        <ul class="list _ul"><li class="list__item" id="534a55b6">                <p id="07b2956c">                    <span class="control">Docker映像</span> ： <a href="#run_image">从现有映像运行容器</a>时自动创建。您可以从先前<a href="#pull-image">拉出</a>或<a href="#build-image">构建</a>的本地现有Docker映像中运行它。</p>            </li><li class="list__item" id="12016009">                <p id="8a040501">                    <span class="control">Dockerfile</span> ：当您<a href="#run_image_dockerfile">从Dockerfile运行容器</a>时自动创建。此配置从Dockerfile构建映像，然后从该映像派生容器。</p>            </li><li class="list__item" id="6f534bce"><p>                <span class="control">Docker-compose</span> ：从<a href="https://docs.docker.com/compose/overview/" rel="noopener noreferrer" data-external="true" target="_blank">Docker Compose文件</a> <a href="#using-docker-compose">运行多容器Docker应用程序</a>时自动创建。</p></li></ul>        <aside class="prompt" rel="2d95ed3a" id="81956cbf" data-type="note" data-title="">            <p id="3b877eaf">任何Docker运行配置也可以手动创建。从主菜单中，选择<span class="menupath" data-skip-index="skip">运行|编辑配置</span> 。然后点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加按钮"> ，指向<span class="control">Docker</span> ，然后选择所需的运行配置类型。</p>                    </aside>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="run_image">从现有映像运行容器</h3></div><div class="collapse__content"><ol class="list _decimal"><li class="list__item" id="854283af"><p>在<span class="control">服务</span>工具窗口中，选择一个图像，然后单击<img class="inline-icon-16" src="/help/img/idea/2019.3/Docker-core.icons.CreateContainer@2x.png" width="16" alt="创建容器按钮"> 。</p><figure><img alt="创建容器上下文菜单项" title="创建容器上下文菜单项" src="/help/img/idea/2019.3/62_DockerCreateContainer.png" id="a77f8149" width="594" height="562"></figure>                                                                            <p></p></li><li class="list__item" id="create_container">                <p id="6e45b7b5">在“ <span class="control">创建容器”</span>弹出窗口中，单击“ <span class="control">创建”</span> 。</p>                <aside class="prompt" rel="6e45b7b5" id="89b13087" data-type="tip" data-title="">                    <p id="7a41ca30">如果您已经对此映像具有<a href="#docker_deployment_run_configs">Docker运行配置</a> ，则“ <span class="control">创建”容器</span>弹出窗口还将包含该运行配置的名称作为选项。</p>                </aside>            </li><li class="list__item" id="c3180904"><p>在打开的“ <span class="control">创建Docker配置”</span>对话框中，您可以为配置提供唯一名称，并为容器指定名称。如果您将“ <span class="control">容器名称”</span>字段保留为空，则Docker将为其赋予一个随机的唯一名称。</p><figure><img alt="创建Docker配置对话框" title="创建Docker配置对话框" src="/help/img/idea/2019.3/63_DockerImageDeployment.png" id="ca61f6d1" width="509" height="332"></figure>                                                                            <p></p></li><li class="list__item" id="00abdb8f"><p>完成后，单击<span class="control">“运行”</span>以启动新配置。</p></li></ol></div></div></section>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="run_image_dockerfile">从Dockerfile运行容器</h3></div><div class="collapse__content"><ol class="list _decimal"><li class="list__item" id="e1784f23"><p>打开要从中运行容器的Dockerfile。</p></li><li class="list__item" id="96dbddf5"><p>请点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.rerun@2x.png" width="16" alt="在Docker上运行">在装订线中选择运行在特定Docker节点上的容器。</p><figure><img alt="在Docker上运行弹出窗口" title="在Docker上运行弹出窗口" src="/help/img/idea/2019.3/56_DockerfileRun.png" id="9c637134" width="237" height="222"></figure>                                                                                            <p></p></li></ol><p id="211ab1eb">这将使用默认设置创建并启动运行配置，该配置将基于Dockerfile生成映像，然后基于该映像运行容器。</p><p id="85edba4a">要使用自定义设置创建运行配置，请单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.rerun@2x.png" width="16" alt="在Docker上运行">在装订线中，选择“ <span class="control">新建运行配置”</span> 。您可以为构建的映像指定自定义标签，为容器指定名称，以及从中读取Dockerfile的上下文文件夹。例如，如果您有一些想要添加到映像文件系统中的工件，则该上下文文件夹会很有用。</p><aside class="prompt" rel="85edba4a" id="ec2f016d" data-type="tip" data-title="">                <p id="2f5500de">您可以在“ <span class="control">项目”</span>工具窗口中右键单击Dockerfile以执行以下有用操作：</p>                <ul class="list _ul"><li class="list__item" id="168a461d"><p>从Dockerfile <i id="fa3068fb">运行</i>容器</p></li><li class="list__item" id="e82f3e84"><p><i id="c5a66ed2">保存</i> Dockerfile的运行配置</p></li><li class="list__item" id="b87f6471"><p><i id="e0dad778">选择</i>此Dockerfile的运行配置以使其活动</p></li></ul>            </aside></div></div></section>        <div class="chapter"><h3 id="command-line-options">命令行选项</h3>            <p id="7933087c">在命令行上运行容器时，使用以下语法：</p>            <div class="code-block" data-lang="bash">泊坞窗运行[选项]图像[命令] [ARG ...]</div>            <p id="edit-run-config">可以在相应的<a href="#docker_deployment_run_configs">Docker运行配置</a>字段中指定所有可选参数。</p>                            <p id="54df4909">要打开运行配置，请右键单击容器，或使用Dockerfile中的装订线图标菜单，或选择<span class="menupath" data-skip-index="skip">“运行” |“运行”。</span>从主菜单<span class="menupath" data-skip-index="skip">编辑配置</span> 。</p>                        <figure><img alt="带有命令行选项的“编辑部署配置”对话框" title="带有命令行选项的“编辑部署配置”对话框" src="/help/img/idea/2019.3/66_DockerContainerCLI.png" id="9bc36c36" width="529" height="1172"></figure>                                                            <p id="67dcf99c">在<span class="control">命令行选项</span>字段中指定<span class="control">选项</span> 。在上面的屏幕截图中，容器已连接到<code class="code">my-net</code>网络并为其分配了别名<code class="code">my-app</code> 。</p>            <p id="b22e068a">启动容器时要执行的命令和参数在<span class="control">Entrypoint</span>和<span class="control">Command</span>字段中指定。这些字段将覆盖<span class="control">Dockerfile</span>中相应的<span class="control">ENTRYPOINT</span>和<span class="control">CMD</span>指令。</p>            <p id="39725843">在上一个屏幕截图中，当容器启动时，它将使用以下命令执行<span class="filepath">docker-entrypoint.sh</span>脚本： <code class="code">postgres</code>作为争论。</p>                        <aside class="prompt" rel="39725843" id="f63d658f" data-type="note" data-title="">                <p id="843bdf20">不是全部<code class="code">docker run</code>支持选项。如果您想请求某些选项的支持，请在<a href="https://youtrack.jetbrains.com/issue/IDEA-181088" rel="noopener noreferrer" data-external="true" target="_blank">IDEA-181088中</a>发表评论。</p>            </aside>            <p id="f6521eac"><span class="control">命令预览</span>字段显示用于此运行配置的实际Docker命令。</p>            <p id="2522faef">您还可以在运行配置中配置以下容器设置：</p>            <ul class="list _ul"><li class="list__item" id="d0fa2017"><a href="#volume_bindings">绑定坐骑</a></li><li class="list__item" id="f4aeaf74"><a href="#port_bindings">绑定端口</a></li><li class="list__item" id="b25b65e0"><a href="#using_env_vars">环境变量</a></li><li class="list__item" id="09f22f1f"><a href="#using_build_args">生成时参数</a></li></ul>        </div>        <div class="chapter"><h3 id="volume_bindings">绑定坐骑</h3>            <p id="bind-mounts-intro">Docker可以使用以下命令从主机将文件或目录挂载到容器<code class="code">-v</code>要么<code class="code">--volume</code>选项。您可以使用<span class="control">Bind mounts</span>字段在<a href="#docker_deployment_run_configs">Docker运行配置中</a>进行<a href="#docker_deployment_run_configs">配置</a> 。</p><aside class="prompt" rel="bind-mounts-intro" id="9e81d997" data-type="note" data-title="">                                <p id="f0dc45c7">确保在<a href="#daemon-connection">Docker连接设置</a> （ <span class="control">路径映射</span>表）中配置了相应的路径映射。</p>            </aside>                        <figure><img alt="具有绑定安装的“编辑部署配置”对话框" title="具有绑定安装的“编辑部署配置”对话框" src="/help/img/idea/2019.3/69_DockerVolumeBindings.png" id="a93ae534" width="529" height="1188"></figure>                                                            <p id="fd4775d7">请点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.openDisk@2x.png" width="16" alt="浏览">在“ <span class="control">绑定挂载”</span>字段中，并通过指定主机目录以及应在其中挂载容器的容器中的相应路径来添加绑定。如果要禁用写入容器卷，请选择“ <span class="control">只读”</span> 。例如，如果要将某些本地PostgreSQL数据目录（ <span class="filepath">/ Users / Shared / pg-data</span> ）挂载到容器（ <span class="filepath">/ var / lib / pgsql / data</span> ）内的PostgreSQL数据目录中，则可以按以下说明进行配置之前的屏幕截图。</p>                        <p id="82e2b756">如果展开<span class="control">命令预览</span>字段，您将看到添加了以下行：</p>            <div class="code-block" data-lang="none">-v /用户/共享/ pg数据：/ var / lib / pgsql / data</div>                                                            <p id="65b361d9">可以在“ <span class="control">命令行选项”</span>字段中使用它，而不必使用“ <span class="control">绑定安装”</span>对话框创建卷绑定列表。</p>            <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="view-volume-bindings">查看和修改正在运行的容器的卷绑定</h3></div><div class="collapse__content"><ol class="list _decimal"><li class="list__item" id="b7f31a92"><p>在“ <span class="control">服务”</span>工具窗口中，选择容器，然后选择“ <span class="control">卷绑定”</span>选项卡。</p><figure><img alt="卷绑定选项卡" title="卷绑定选项卡" src="/help/img/idea/2019.3/70_DockerVolumeBindingsTomcatDTW.png" id="76503ee2" width="1048" height="490"></figure>                                                                            <p></p></li><li class="list__item" id="e63ff875"><p>要创建新的绑定，请单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加按钮"> 。要编辑现有的，请选择绑定并单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.edit@2x.png" width="16" alt="编辑按钮"> 。</p></li><li class="list__item" id="aac06d57"><p>根据需要指定设置，然后单击“ <span class="control">保存”</span>以应用更改。</p></li></ol><p id="4bdfc4e2">停止并删除该容器，并使用指定的更改创建一个新的容器。但是，更改不会保存在相应的运行配置中。</p></div></div></section>        </div>        <div class="chapter"><h3 id="port_bindings">绑定端口</h3>            <p id="daf4340d">Docker可以使用以下命令将主机上的特定端口映射到容器中的端口<code class="code">-p</code>要么<code class="code">--publish</code>选项。这可用于使容器可从外部访问。在<a href="#docker_deployment_run_configs">Docker运行配置中</a> ，您可以选择将所有容器端口公开给主机，或使用“ <span class="control">绑定端口”</span>字段指定端口映射。</p>            <figure><img alt="带有绑定端口的“编辑部署配置”对话框" title="带有绑定端口的“编辑部署配置”对话框" src="/help/img/idea/2019.3/71_DockerPortBindings.png" id="c46193d0" width="529" height="1188"></figure>                                                            <p id="5cecce7f">请点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.openDisk@2x.png" width="16" alt="浏览">通过指定应将主机上的哪些端口映射到容器中的哪些端口，在“ <span class="control">绑定端口”</span>字段中进行<span class="control">绑定</span>和绑定。您还可以提供一个特定的主机IP，该端口应该可以从该主机IP进行访问（例如，可以将其设置为<span class="filepath">127.0.0.1</span>以使其只能在本地访问，或者可以将其设置为<span class="filepath">0.0.0.0</span>以为网络中的所有计算机打开该IP。 ）。</p>            <p id="cdea360f">如果您已经在Docker主机端口％5432％上运行PostgreSQL，则可以将主机上的端口％5433％映射到容器内的％5432％，如前面的屏幕快照所示。这将使容器中运行的PostgreSQL可通过主机上的端口％5433％进行访问。</p>            <p id="4656a97d">如果展开<span class="control">命令预览</span>字段，您将看到添加了以下行：</p>            <div class="code-block" data-lang="none">-p 5433：5432</div>                        <p id="432c7e88">可以在“ <span class="control">命令行选项”</span>字段中使用它，而不是使用“ <span class="control">端口绑定”</span>对话框创建端口绑定列表。</p>            <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="view-port-bindings">查看和修改正在运行的容器的端口绑定</h3></div><div class="collapse__content"><ol class="list _decimal"><li class="list__item" id="9b9105b5"><p>在“ <span class="control">服务”</span>工具窗口中，选择容器，然后选择“ <span class="control">端口绑定”</span>选项卡。</p><figure><img alt="端口绑定选项卡" title="端口绑定选项卡" src="/help/img/idea/2019.3/72_DockerPortBindingsTomcatDTW.png" id="996bf5a0" width="1048" height="490"></figure>                                                                            <p></p></li><li class="list__item" id="f79ce15c"><p>要创建新的绑定，请单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加按钮"> 。要编辑现有的，请选择绑定并单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.edit@2x.png" width="16" alt="编辑按钮"> 。如果选中了“ <span class="control">发布所有端口”</span>复选框，请清除它以指定单个端口映射。</p></li><li class="list__item" id="03aa4cf8"><p>根据需要指定设置，然后单击“ <span class="control">保存”</span>以应用更改。</p></li></ol><p id="7da9870d">停止并删除该容器，并使用指定的更改创建一个新的容器。但是，更改不会保存在相应的运行配置中。</p></div></div></section>        </div>        <div class="chapter"><h3 id="using_env_vars">环境变量</h3>            <p id="db5a73f2">通常在与您使用的基本映像相关联的<a href="https://docs.docker.com/engine/reference/builder/" rel="noopener noreferrer" data-external="true" target="_blank">Dockerfile</a>中设置环境变量。<a href="https://docs.docker.com/engine/reference/run/#env-environment-variables" rel="noopener noreferrer" data-external="true" target="_blank">Docker</a>还为每个新容器<a href="https://docs.docker.com/engine/reference/run/#env-environment-variables" rel="noopener noreferrer" data-external="true" target="_blank">自动设置了环境变量</a> 。您可以指定其他变量，然后使用重新定义Docker设置的变量。 <code class="code">-e</code>要么<code class="code">--env</code>选项。在<a href="#docker_deployment_run_configs">Docker运行配置中</a> ，您可以使用<span class="control">环境变量</span>字段来配置环境变量。</p>            <figure><img alt="使用环境变量的“编辑部署配置”对话框" title="使用环境变量的“编辑部署配置”对话框" src="/help/img/idea/2019.3/73_DockerEnvVar.png" id="66763703" width="529" height="1188"></figure>                                                            <p id="8b4871a1">请点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.openDisk@2x.png" width="16" alt="浏览">在<span class="control">环境变量</span>字段中添加<span class="control">变量的</span>名称和值。例如，如果要默认使用特定的用户名（而不是运行应用程序的用户的操作系统名称）连接到PostgreSQL，则可以定义<code class="code">PGUSER</code>变量，如上一个屏幕截图所示。</p>            <p id="250cf190">如果展开<span class="control">命令预览</span>字段，您将看到添加了以下行：</p>            <div class="code-block" data-lang="none">--env PGUSER = pg-admin</div>                                                <p id="5a02a8d6">可以在“ <span class="control">命令行选项”</span>字段中使用它，而不是使用“ <span class="control">环境变量”</span>对话框创建名称和值的列表。如果您需要将敏感信息（密码，机密信息等）作为环境变量传递，则可以使用<code class="code">--env-file</code>选项以指定包含此信息的文件。</p>            <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="view-env-variables">查看和修改正在运行的容器的环境变量</h3></div><div class="collapse__content"><ol class="list _decimal"><li class="list__item" id="db019053">                    <p id="85a75a90">在“ <span class="control">服务”</span>工具窗口中，选择容器，然后选择“ <span class="control">环境变量”</span>选项卡。</p>                    <figure><img alt="环境变量选项卡" title="环境变量选项卡" src="/help/img/idea/2019.3/74_DockerEnvVarJarDTW.png" id="42f1fef0" width="1048" height="490"></figure>                                                                            </li><li class="list__item" id="12c6ddbb"><p>要添加新变量，请单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加按钮"> 。要编辑现有变量，请选择变量，然后单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.edit@2x.png" width="16" alt="编辑按钮"> 。</p></li><li class="list__item" id="63647ba8"><p>根据需要指定设置，然后单击“ <span class="control">保存”</span>以应用更改。</p></li></ol><p id="6579e24e">停止并删除该容器，并使用指定的更改创建一个新的容器。但是，更改不会保存在相应的运行配置中。</p></div></div></section>        </div>        <div class="chapter"><h3 id="using_build_args">生成时参数</h3>                                                            <p id="f753cba5">Docker可以为某些环境变量定义生成时值，这些值不会在中间映像或最终映像中持续存在。 <code class="code">--build-arg</code>的选项<code class="code">docker build</code> 。这些必须在<code class="code">ARG</code> Dockerfile指令的默认值。您可以使用<span class="control">Build args</span>字段在<a href="#docker_deployment_run_configs">Docker运行配置中配置</a> <span class="control">构建时参数</span> 。</p>            <p id="e592df80">例如，您可以使用构建时参数来使用特定版本的PostgreSQL构建映像。为此，请添加<code class="code">ARG</code> Dockerfile开头的指令：</p>            <div class="code-block" data-lang="none">ARG PGTAG =最新来自postgres：$ PGTAG</div>                                                <p id="7ac49bca">的<code class="code">PGTAG</code>在这种情况下，变量将默认为<code class="code">latest</code>如果不将其重新定义为构建时参数。因此，默认情况下，此Dockerfile将生成具有最新可用PostgreSQL版本的映像。但是，您可以使用<span class="control">Build Args</span>字段重新定义<code class="code">PGTAG</code>变量。</p>            <figure><img alt="具有构建时参数的“编辑部署配置”对话框" title="具有构建时参数的“编辑部署配置”对话框" src="/help/img/idea/2019.3/74_DockerBuildArgs.png" id="468819cc" width="529" height="1188"></figure>                                                            <p id="f0fe45b8">在上一个屏幕截图中， <code class="code">PGTAG</code>被设定为<code class="code">9</code> ，这将指示Docker拉<code class="code">postgres:9</code> 。部署此运行配置时，它将构建映像并使用PostgreSQL版本9运行容器。</p>            <p id="f48b1d3d">要检查这一点，执行<code class="code">postgres --version</code>在容器内并查看输出：应该是<code class="code">postgres (PostgreSQL) 9.6.6</code>或某些更高版本。</p>                        <p id="55d7eee8">如果您展开“ <span class="control">命令预览”</span>字段，则会看到以下选项已添加到<code class="code">docker build</code>命令：</p>            <div class="code-block" data-lang="none">--build-arg PGTAG = 9</div>                                            </div>    </div>    <div class="chapter"><h2 id="interacting-with-containers">与容器互动</h2>        <p id="329ce4ca">在“ <span class="control">服务”</span>工具窗口中列出了创建的容器。选择容器后，您可以查看其ID（以及相应图像的ID）并将其复制到剪贴板<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.copy@2x.png" width="16" alt="复制到剪贴板按钮">在<span class="control">属性</span>选项卡上。您也可以为容器指定一个新名称，然后单击“ <span class="control">保存”</span>以从同一映像中使用该新名称启动另一个容器。</p>        <p id="fe290726">默认情况下，“ <span class="control">服务”</span>工具窗口显示所有容器，包括未运行的容器。要从列表中隐藏停止的容器，请单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.filter@2x.png" width="16" alt="筛选器按钮"> ，然后单击<span class="control">显示停止的容器</span>以删除该复选框。</p>        <p id="239dc617">如果使用<a href="#docker_deployment_run_configs">Docker运行配置</a>创建了一个容器，要查看其部署日志，请选择它并打开<span class="control">Deploy log</span>选项卡。查看来自容器的日志消息<code class="code">STDOUT</code>和<code class="code">STDERR</code> ，选择它并打开“ <span class="control">日志”</span>选项卡。有关更多信息，请参阅<a href="https://docs.docker.com/engine/reference/commandline/logs/" rel="noopener noreferrer" data-external="true" target="_blank">docker logs</a>命令参考。</p>        <p id="5100477e">您可以使用“ <span class="control">文件”</span>选项卡浏览正在运行的容器中的<span class="control">文件</span> 。选择任何文件，然后单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.preview@2x.png" width="16" alt="在编辑器中查看按钮">在编辑器中远程打开它或单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.download@2x.png" width="16" alt="下载至暂存按钮">创建文件的副本作为<a href="scratches.html">临时</a>文件。</p>        <aside class="prompt" rel="5100477e" id="903027bb" data-type="note" data-title="">            <p id="b7502b45">默认情况下，文件浏览器可能不适用于没有完整浏览器的容器<code class="code">ls</code>包，例如，基于Alpine，Photon和BusyBox的图像。要使用它，可以在Dockerfile中添加以下命令：</p>            <p id="5c2e940a">                </p><div class="code-block" data-lang="dockerfile">从高山：3.10运行apk添加coreutils</div>            <p></p>            <p id="76471c93">                </p><div class="code-block" data-lang="dockerfile">来自光子：3.0 RUN echo y | tdnf删除玩具箱</div>            <p></p>        </aside>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="execute-command">在正在运行的容器中执行命令</h3></div><div class="collapse__content"><ol class="list _decimal"><li class="list__item" id="0c7429b1"><p>在“ <span class="control">服务”</span>工具窗口中，右键单击容器名称，然后单击“ <span class="control">执行”</span> 。</p></li><li class="list__item" id="aaef0419"><p>在<span class="control">“在容器中运行命令”</span>弹出窗口中，单击“ <span class="control">创建”</span> 。</p></li><li class="list__item" id="0cef776f">                <p id="725f963b">在“ <span class="control">执行”</span>对话框中，键入命令，然后单击“ <span class="control">确定”</span> 。例如：</p>                <div class="table-wrapper"><table class=" no_header" width="100%" id="f2bdc0d8"><tbody><tr id="8fdd0f15" class="ijRowOdd"><td id="f8729d49"><code class="code">ls /tmp</code></td><td id="f9ea8d10"><p id="7a24233f">列出<span class="filepath">/ tmp</span>目录的内容</p></td></tr><tr id="96c771f7" class="ijRowEven"><td id="03d96ebb"><code class="code">mkdir /tmp/my-new-dir</code></td><td id="573a370e"><p id="4f11f524">在<span class="filepath">/ tmp</span>目录中创建<span class="filepath">my-new-dir</span>目录</p></td></tr><tr id="a51d185b" class="ijRowOdd"><td id="dee33f64"><code class="code">/bin/bash</code></td><td id="0a5a692e"><p>开始一个<code class="code">bash</code>会议</p></td></tr></tbody></table></div>                <figure><img alt="运行/ bin / bash的Exec选项卡" title="运行/ bin / bash的Exec选项卡" src="/help/img/idea/2019.3/67_DockerExecBinBash_1.png" id="29476de8" width="600" height="396"></figure>                                                                            </li></ol><p id="087d89f2">有关更多信息，请参阅<a href="https://docs.docker.com/engine/reference/commandline/exec/" rel="noopener noreferrer" data-external="true" target="_blank">docker exec</a>命令参考。</p></div></div></section>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="inspect">查看有关正在运行的容器的详细信息</h3></div><div class="collapse__content"><ul class="list "><li class="list__item" id="9eda51ab">                <p id="eae0645d">在“ <span class="control">服务”</span>工具窗口中，右键单击容器名称，然后单击“ <span class="control">检查”</span> 。</p>                <p id="298303bf">输出在“ <span class="control">检查”</span>选项卡上呈现为JSON数组。</p>                <figure><img alt="检查标签" title="检查标签" src="/help/img/idea/2019.3/68_DockerInspect.png" id="e3041204" width="600" height="396"></figure>                                                                            </li></ul><p id="25d141a7">有关更多信息，请参阅<a href="https://docs.docker.com/engine/reference/commandline/inspect/" rel="noopener noreferrer" data-external="true" target="_blank">docker inspect</a>命令参考。</p></div></div></section>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="view-processes">查看在容器中运行的进程</h3></div><div class="collapse__content"><ul class="list "><li class="list__item" id="bcf06a08">                <p id="1446402a">在<span class="control">服务</span>工具窗口中，右键单击容器名称，然后单击<span class="control">显示进程</span> 。</p>                <p id="65b41418">输出在“ <span class="control">进程”</span>选项卡上呈现为JSON数组。</p>            </li></ul><p id="6ceb0350">有关更多信息，请参阅<a href="https://docs.docker.com/engine/reference/commandline/top/" rel="noopener noreferrer" data-external="true" target="_blank">docker top</a>命令参考。</p></div></div></section>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="attach-console">将控制台附加到可执行容器的输出</h3></div><div class="collapse__content"><ul class="list "><li class="list__item" id="95af45b1">                <p id="b246cb30">在<span class="control">服务</span>工具窗口中，右键单击容器，然后单击<span class="control">附加</span> 。</p>                <p id="2947551a">控制台附加到在容器内运行的<a href="https://docs.docker.com/engine/reference/builder/#entrypoint" rel="noopener noreferrer" data-external="true" target="_blank">ENTRYPOINT</a>进程的输出，并在“ <span class="control">附加的控制台”</span>选项卡上呈现。</p>            </li></ul><p id="38d1465a">有关更多信息，请参阅<a href="https://docs.docker.com/engine/reference/commandline/attach/" rel="noopener noreferrer" data-external="true" target="_blank">docker attach</a>命令参考。</p></div></div></section>    </div>    <div class="chapter"><h2 id="using-docker-compose">Docker撰写</h2>        <p id="3ac8a666">            <a href="https://docs.docker.com/compose/overview/" rel="noopener noreferrer" data-external="true" target="_blank">Docker Compose</a>用于运行多容器应用程序。例如，您可以将Web服务器，后端数据库和应用程序代码作为独立的服务运行。如有必要，可以通过添加更多容器来扩展每个服务。这使您能够在类似于生产的动态环境中执行有效的开发和测试。</p>        <section class="procedure-steps"><h3 id="docker-compose-run-configuration">运行多容器Docker应用程序</h3><ol class="list _decimal"><li class="list__item" id="a82a0e4b"><p>在一个或几个<a href="https://docs.docker.com/compose/compose-file/" rel="noopener noreferrer" data-external="true" target="_blank">Docker Compose文件中</a>定义必要的服务。</p></li><li class="list__item" id="4e94c1bf"><p>从主菜单中，选择<span class="menupath" data-skip-index="skip">运行|编辑配置</span> 。</p></li><li class="list__item" id="2c32b4d5"><p>请点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加图标"> ，指向<span class="control">Docker</span> ，然后单击<span class="control">Docker-compose</span> 。</p></li><li class="list__item" id="ad8b2641"><p>指定用于定义要在容器中运行的服务的Docker Compose文件。如有必要，您可以限制此配置将启动的服务，指定<a href="https://docs.docker.com/compose/environment-variables/" rel="noopener noreferrer" data-external="true" target="_blank">环境变量</a> ，并在启动相应的容器之前强制构建映像（即，添加<code class="code">--build</code> <a href="https://docs.docker.com/compose/reference/up/" rel="noopener noreferrer" data-external="true" target="_blank">docker-compose up</a>命令的选项）。</p></li><li class="list__item" id="72418fb7"><p>运行配置准备就绪后，执行它。</p></li></ol></section><aside class="prompt" rel="docker-compose-run-configuration" id="a17eda9e" data-type="note" data-title="">            <p id="42b7984b">要快速创建由<span class="emphasis">Docker组成的</span>运行配置并以默认设置运行，请在“ <span class="control">项目”</span>工具窗口中右键单击Docker Compose文件，然后在上下文菜单中单击<span class="control">“运行”</span> 。您还可以使用Docker Compose文件中的装订线图标和上下文菜单来控制服务。</p>        </aside>                <p id="90f0825e">当Docker Compose运行您的多容器应用程序时，您可以使用“ <span class="control">服务”</span>工具窗口来控制特定服务并<a href="#interacting-with-containers">与容器进行交互</a> 。容器在专用的“ <span class="control">撰写”</span>节点下列出，而不在“ <span class="control">容器”</span>节点下列出（仅适用于独立容器）。</p>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="scale-service">扩展服务</h3></div><div class="collapse__content"><ol class="list _decimal"><li class="list__item" id="b9d96935"><p>在“ <span class="control">服务”</span>工具窗口中，选择要扩展的服务，然后单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.expandall@2x.png" width="16" alt="比例按钮"> 。</p><figure><img alt="比例上下文菜单项" title="比例上下文菜单项" src="/help/img/idea/2019.3/96_DockerComposeScaleService.png" id="2cdbb295" width="600" height="490"></figure>                                            <p></p></li><li class="list__item" id="2e26eaff"><p>指定要为此服务使用多少个容器，然后单击“ <span class="control">确定”</span> 。</p></li></ol></div></div></section>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="stop-service">停止正在运行的服务</h3></div><div class="collapse__content"><ul class="list "><li class="list__item" id="9d2fcd1c"><p>在“ <span class="control">服务”</span>工具窗口中，选择服务，然后单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.suspend@2x.png" width="16" alt="停止按钮"> 。</p><figure><img alt="停止上下文菜单项" title="停止上下文菜单项" src="/help/img/idea/2019.3/98_DockerComposeServiceStart.png" id="6768f74f" width="600" height="490"></figure>                                            <p></p></li></ul></div></div></section>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="stop-all-services">停止所有正在运行的服务</h3></div><div class="collapse__content"><ul class="list "><li class="list__item" id="efd0174a"><p>在“ <span class="control">服务”</span>工具窗口中，选择“ <span class="control">撰写”</span>节点，然后单击“确定”。 <img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.suspend@2x.png" width="16" alt="停止按钮"> 。</p><figure><img alt="Docker Compose停止所有服务" title="Docker Compose停止所有服务" src="/help/img/idea/2019.3/DockerComposeStopApp.png" id="53ee3cd8" width="743" height="488"></figure>                                            <p></p></li></ul></div></div></section>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="down-app">降低您的应用程序</h3></div><div class="collapse__content"><ul class="list "><li class="list__item" id="d41b83a4"><p>在“ <span class="control">服务”</span>工具窗口中，选择“ <span class="control">撰写”</span>节点，然后单击“确定”。 <img class="inline-icon-16" src="/help/img/idea/2019.3/icons.nodes.undeploy@2x.png" width="16" alt="向下按钮"> 。</p><figure><img alt="Docker Compose删除应用程序" title="Docker Compose删除应用程序" src="/help/img/idea/2019.3/DockerComposeDownApp.png" id="f8b90bb1" width="743" height="488"></figure>                                            <p></p></li></ul><p id="7d7108f8">这将停止并删除容器以及所有相关的网络，卷和映像。</p></div></div></section>        <section class="procedure-steps"><div class="collapse"><div class="collapse__title"><h3 id="open-docker-compose-file">打开用于运行应用程序的Docker Compose文件</h3></div><div class="collapse__content"><ul class="list "><li class="list__item" id="61cfc491"><p>在<span class="control">服务</span>工具窗口中，右键单击<span class="control">撰写</span>节点或嵌套的服务节点，然后点击<span class="control">跳转到源</span>在上下文菜单<kbd data-primary_default_for_windows="F4" data-primary_default_for_macos="⌘+Down" data-primary_intellij_idea_classic_macos="F4" data-primary_emacs="F4" data-primary_visual_studio="F4" data-primary_default_for_xwin="F4" data-primary_default_for_gnome="F4" data-primary_default_for_kde="F4" data-primary_eclipse="F12" data-primary_eclipse_macos="F3" data-primary_netbeans="F4" data-primary_sublime_text="F4" data-primary_sublime_text_macos="N/A" data-primary_xcode="⌘+Down" data-primary_resharper="F4" data-primary_resharper_macos="F4" data-secondary_default_for_windows="F4" data-secondary_default_for_macos="⌘↓" data-secondary_intellij_idea_classic="F4" data-secondary_emacs="F4" data-secondary_visual_studio="F4" data-secondary_default_for_xwin="F4" data-secondary_default_for_gnome="F4" data-secondary_default_for_kde="F4" data-secondary_eclipse="F12" data-secondary_eclipse_macos="F3" data-secondary_netbeans="F4" data-secondary_sublime_text="F4" data-secondary_sublime_text_macos="N/A" data-secondary_xcode="⌘↓" data-secondary_resharper="F4" data-secondary_resharper_macos="F4">F4</kbd> 。</p></li></ul></div></div></section>        <p id="0c46a999">如果<span class="control">Docker-compose</span>运行配置与Docker Compose文件位于同一目录中，则它们将标识后缀为<span class="filepath">.env的</span> <a href="https://docs.docker.com/compose/env-file/" rel="noopener noreferrer" data-external="true" target="_blank">环境</a>文件。</p>    </div>        <div class="chapter"><h2 id="docker_troubleshooting">故障排除</h2>        <p id="408189e4">如果遇到以下问题之一，请尝试相应的建议解决方案。</p>                            <div class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="docker_unable_to_connect">无法连接到Docker</h3></div><div class="collapse__content">                <p id="17c4ffa8">确保：</p>                <ul class="list _ul"><li class="list__item" id="30153bc5"><p>Docker正在运行。</p></li><li class="list__item" id="2e8a43a1"><p>您的<a href="#daemon-connection">Docker连接设置</a>正确。</p></li></ul>                <p id="970fe98a">如果您正在使用Windows的Docker，请在Docker设置的`` <span class="control">常规''</span>部分中启用<span class="control">tcp：// localhost：2375上没有TLS</span>选项的<span class="control">Expose守护程序</span> 。</p>                <p id="2ed17e30">如果您正在使用Docker Toolbox，请确保Docker Machine正在运行，并且在`` <span class="control">设置/首选项''</span>对话框中正确指定了其可执行文件<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-primary_xcode="⌘+Comma" data-primary_resharper="Alt+F7" data-primary_resharper_macos="Alt+F7" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘," data-secondary_xcode="⌘," data-secondary_resharper="⌥F7" data-secondary_resharper_macos="⌥F7">Ctrl+Alt+S</kbd>在“ <span class="control">构建，执行，部署”下|码头工人|工具</span> 。</p>            </div></div></div>                        <div class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="docker_compose_unable_to_use">无法使用Docker Compose</h3></div><div class="collapse__content">                <p id="b2e37334">确保在`` <span class="control">设置/首选项''</span>对话框中正确指定了Docker Compose可执行文件<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-primary_xcode="⌘+Comma" data-primary_resharper="Alt+F7" data-primary_resharper_macos="Alt+F7" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘," data-secondary_xcode="⌘," data-secondary_resharper="⌥F7" data-secondary_resharper_macos="⌥F7">Ctrl+Alt+S</kbd>在“ <span class="control">构建，执行，部署”下|码头工人|工具</span> 。</p>            </div></div></div>            <div class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="port_bindings_unable_to_use">无法使用端口绑定</h3></div><div class="collapse__content">                <p id="2e11fa70">确保相应的容器端口是裸露的。使用<a href="https://docs.docker.com/engine/reference/builder/#expose" rel="noopener noreferrer" data-external="true" target="_blank">EXPOSE</a>在命令<a href="https://docs.docker.com/engine/reference/builder/" rel="noopener noreferrer" data-external="true" target="_blank">Dockerfile</a> 。</p>            </div></div></div>            <div class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="associate-files">无法将现有Dockerfile或Docker Compose文件与相关类型相关联</h3></div><div class="collapse__content">                <p id="fe72db8f">当您创建新的Dockerfile或Docker compose文件时，CLion会自动识别它们的类型。如果从名称中看不到文件类型，将提示您手动选择文件类型。要将现有文件与正确的类型关联，请在“ <span class="control">项目”</span>视图中右键单击该文件，然后从上下文菜单中选择“ <span class="control">与文件类型</span>关联”。</p>                <p id="20a8337a">如果禁用了“ <span class="control">与文件类型关联”</span>操作，则可能意味着文件名已注册为当前文件类型的模式。例如，如果您的Dockerfile具有可识别为文本文件的自定义名称，则无法将其与Dockerfile类型关联。要删除文件类型模式，请执行以下操作：</p>                <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="75750798">                        <p id="47486fb1"><a name="open_settings"></a>在<a name="the_settings_dialog"></a> <span class="control">设置/首选项</span>对话框<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-primary_xcode="⌘+Comma" data-primary_resharper="Alt+F7" data-primary_resharper_macos="Alt+F7" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘," data-secondary_xcode="⌘," data-secondary_resharper="⌥F7" data-secondary_resharper_macos="⌥F7">Ctrl+Alt+S</kbd> ，选择<span class="control">编辑器|文件类型</span> 。</p>                    </li><li class="list__item" id="d7e8b916"><p>选择相关的文件类型（在这种情况下： <span class="control">Text</span> ），然后删除带有文件名的模式。</p></li><li class="list__item" id="ee309094"><p>单击<span class="control">确定</span>以应用更改。</p></li></ol><p id="7eaf1441">现在，您应该可以使用上下文菜单中的“ <span class="control">与文件类型关联”</span>来设置正确的文件类型。</p></section>            </div></div></div>            </div>    <div class="chapter"><h2 id="docker_limitations">局限性</h2>                <p id="3b9dbcf8"><span class="emphasis">Docker集成</span>插件具有一定的局限性和错误，但是JetBrains一直在对其进行修复和改进。您可以在我们的错误跟踪系统中找到<a href="https://youtrack.jetbrains.com/issues?q=tag:docker-limitations" rel="noopener noreferrer" data-external="true" target="_blank">Docker问题</a>的<a href="https://youtrack.jetbrains.com/issues?q=tag:docker-limitations" rel="noopener noreferrer" data-external="true" target="_blank">列表，</a>并投票给那些对您影响最大的问题。您还可以提交自己的错误和功能请求。</p>    </div>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年12月1日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__next" href="using-zen-coding-support.html">Emmet</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>