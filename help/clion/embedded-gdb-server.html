<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>Embedded GDB Server - Help | CLion</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="Embedded_GDB_Server" data-breadcrumbs="Build, Run, Debug/Embedded Development/Embedded_GDB_Server.xml|Embedded GDB Server" data-main-title="Embedded GDB Server"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search CLion Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>CLion 2019.3 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default_for_windows" selected>Default for Windows</option><option data-group="primary" value="primary_default_for_macos">Default for macOS</option><option data-group="primary" value="primary_intellij_idea_classic_macos">IntelliJ IDEA Classic (macOS)</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="primary" value="primary_default_for_xwin">Default for XWin</option><option data-group="primary" value="primary_default_for_gnome">Default for GNOME</option><option data-group="primary" value="primary_default_for_kde">Default for KDE</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="primary" value="primary_eclipse_macos">Eclipse (macOS)</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_sublime_text">Sublime Text</option><option data-group="primary" value="primary_sublime_text_macos">Sublime Text (macOS)</option><option data-group="primary" value="primary_xcode">Xcode</option><option data-group="primary" value="primary_resharper">ReSharper</option><option data-group="primary" value="primary_resharper_macos">ReSharper (macOS)</option><option data-group="secondary" value="secondary_default_for_windows">Default for Windows</option><option data-group="secondary" value="secondary_default_for_macos">Default for macOS</option><option data-group="secondary" value="secondary_intellij_idea_classic">IntelliJ IDEA Classic</option><option data-group="secondary" value="secondary_emacs">Emacs</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_default_for_xwin">Default for XWin</option><option data-group="secondary" value="secondary_default_for_gnome">Default for GNOME</option><option data-group="secondary" value="secondary_default_for_kde">Default for KDE</option><option data-group="secondary" value="secondary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_eclipse_macos">Eclipse (macOS)</option><option data-group="secondary" value="secondary_netbeans">NetBeans</option><option data-group="secondary" value="secondary_sublime_text">Sublime Text</option><option data-group="secondary" value="secondary_sublime_text_macos">Sublime Text (macOS)</option><option data-group="secondary" value="secondary_xcode">Xcode</option><option data-group="secondary" value="secondary_resharper">ReSharper</option><option data-group="secondary" value="secondary_resharper_macos">ReSharper (macOS)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Embedded_GDB_Server" id="Embedded_GDB_Server.xml">Embedded GDB Server</h1>    <p id="ba80f4c8">To debug on-chip with <a href="https://sourceware.org/gdb/onlinedocs/gdb/Server.html" data-external="true" target="_blank" rel="noopener noreferrer">GDB server</a>, use the dedicated <span class="control">Embedded GDB Server</span> run/debug configuration which covers the following use cases:</p>    <ul class="list _ul"><li class="list__item" id="ceb42582"><p>            <a href="https://www.st.com/en/development-tools/st-link-v2.html" data-external="true" target="_blank" rel="noopener noreferrer">ST-Link</a> GDB servers (you can find the open-source version of the tools on <a href="https://github.com/texane/stlink" data-external="true" target="_blank" rel="noopener noreferrer">GitHub</a>).        </p></li><li class="list__item" id="9ed319ab"><p>            <a href="https://www.segger.com/downloads/jlink/#J-LinkSoftwareAndDocumentationPack" data-external="true" target="_blank" rel="noopener noreferrer">Segger J-Link</a> GDB server.        </p></li><li class="list__item" id="ea1a90ec"><p>            <a href="https://en.wikibooks.org/wiki/QEMU/Debugging_with_QEMU" data-external="true" target="_blank" rel="noopener noreferrer">Qemu</a> as a GDB server.        </p></li><li class="list__item" id="3c772923"><p>OpenOCD as a standalone GDB server, as an alternative to <a href="openocd-support.html">OpenOCD Download &amp; Run</a> configuration.</p></li><li class="list__item" id="84c1494a"><p>Any other boards or specific GDB stubs that comply with the GDB server protocol.</p></li></ul>    <p id="defe6b04">Currently, this configuration works with <span class="control">CMake</span>-based projects only.</p>    <section class="procedure-steps"><h3 id="tools" data-toc="Embedded_GDB_Server#tools">Required tools</h3><ol class="list _decimal"><li class="list__item" id="f254e25b">            <p id="b5204abd"><span class="control">Toolchain</span></p>            <p id="7e81e773"> The Embedded GDB Server configuration requires the cross-compiler toolchain to be configured in advance.</p>            <p id="9e48c7cc">For ARM <a href="https://developer.arm.com/ip-products/processors/cortex-m" data-external="true" target="_blank" rel="noopener noreferrer">Cortex-M</a> and <a href="https://developer.arm.com/ip-products/processors/cortex-r" data-external="true" target="_blank" rel="noopener noreferrer">Cortex-R</a> MCUs, install <a href="https://developer.arm.com/open-source/gnu-toolchain/gnu-rm" data-external="true" target="_blank" rel="noopener noreferrer">GNU ARM toolchain</a>.                After the installation, make sure the toolchain is presented in the system PATH: run <code class="code">arm-none-eabi-gcc</code> from the command line, and your system should recognize this command.</p>            <p id="4889e379">For all other platforms, install the platform-specific toolchain and set up the tools in <span data-skip-index="skip" class="menupath">Settings/Preferences | Build, Execution, Deployment | Toolchain</span> or in your CMake script (take a look at the template <a href="https://github.com/elmot/clion-embedded-arm/blob/master/resources/xyz/elmot/clion/cubemx/tmpl_CMakeLists.txt" data-external="true" target="_blank" rel="noopener noreferrer">CMakeLists.txt</a>).</p>            <p id="b56e5f6e">Also, you need to provide the linker file:  obtain it from your chip vendor or create it manually, and specify through CMake settings.</p>            <p id="8125ebf3">If you are working with an <a href="embedded-development.html">STM32CubeMX project</a>, installing the <span class="control">GNU ARM toolchain</span> is a part of the project set up, and CubeMX generates the linker file automatically.</p>            <aside data-type="note" class="prompt" data-title="" rel="8125ebf3" id="1bd9c71b"><p id="a1bf4029"><span class="control">Windows</span>-specific requirements:</p>                <ul class="list _ul"><li class="list__item" id="7a22b7e1"><p>Only the <span class="control">MinGW</span> and <span class="control">MinGW-w64</span> environments are supported (<a href="https://youtrack.jetbrains.com/issue/CPP-15034" data-external="true" target="_blank" rel="noopener noreferrer">CPP-15034</a>).</p></li><li class="list__item" id="6a5e4caf"><p>For <span class="control">GNU ARM Toolchain</span>, use version 2019-q3 or 2018-q2 (and earlier). See the <a href="https://bugs.launchpad.net/gcc-arm-embedded/+bug/1810274" data-external="true" target="_blank" rel="noopener noreferrer">issue</a> with 2018-q4.</p></li></ul>            </aside>        </li><li class="list__item" id="11641d40">            <p id="78898f8a"><span class="control">GDB client</span></p>            <p id="07222f61">GDB client is the debugger that runs on CLion's side and connects to the remote GDB server. You can use either the bundled GDB or your toolchain's debugger as a GDB client.</p>            <aside data-type="note" class="prompt" data-title="" rel="07222f61" id="035d571d"><p>Note that LLDB (default debugger for macOS) can't be used as a GDB client.</p></aside>            <p id="e4f710d8">By default, the configuration employs the debugger selected in the toolchain of the current CMake profile. You can check or change it in the <span class="control">Debugger</span> field of the toolchain that is chosen in <span data-skip-index="skip" class="menupath">Settings/Preferences | Build, Execution, Deployment | CMake</span>.</p>        </li><li class="list__item" id="13695e4d">        <p id="8af3de0c"><span class="control">GDB server</span></p>            <p id="d8608e52">The chosen GDB server should be installed on your machine. There is no need to launch it manually - the configuration will <a href="#run-debug">run the GDB server</a> automatically when you start a debug session.</p>    </li></ol></section>    <section class="procedure-steps"><h3 id="gdbserver-config" data-toc="Embedded_GDB_Server#gdbserver-config">Create an Embedded GDB Server configuration</h3><p id="4fc7f7be">Go to <span data-skip-index="skip" class="menupath">Run | Edit Configurations</span>, click <img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="icons general add"> and select <span class="control">Embedded GDB Server</span>.</p><figure><img alt="Embedded GDB Server configuration" title="Embedded GDB Server configuration" src="/help/img/idea/2019.3/cl_gdbserver_embedded_config.png" id="13063e31" width="750" height="1022"></figure><p id="88222d9b">            Configure the following settings:            <ul class="list _ul"><li class="list__item" id="f64f1540">                    <p id="36b5ff35">                        <span class="control">'target remote' args</span></p>                         <p id="28ab6b2f">Provide the medium to carry debugging packets                        (serial line or an IP network using TCP or UDP). See <a href="https://sourceware.org/gdb/onlinedocs/gdb/Connecting.html#Connecting" data-external="true" target="_blank" rel="noopener noreferrer">gdb documentation</a>                        for more details on connecting to a remote target.                    </p>                </li><li class="list__item" id="be851a87">                    <p id="2bbd97cf">                    <span class="control">GDB Server</span></p>                     <p id="8d0ed67a">Specify the binary to be used as GDB server.                    </p>                </li><li class="list__item" id="420c8f80">                    <p id="42a0fb80">                        <span class="control">GDB Server args</span>                        </p>                    <p id="4fe13a2e">Provide the GDB server-specific arguments (for example, port number or board config file).                    </p>                </li><li class="list__item" id="3a5a000b">                    <p id="cdba1420">                        <span class="control">Advanced options: reset command</span></p>                    <p id="7f4199fe">The command to be sent when you press <img class="inline-icon-16" src="/help/img/idea/2019.3/clion-embedded.icons.ResetMcu@2x.png" width="16" alt="MCU reset"> during a debug session.                    </p>                </li><li class="list__item" id="0c5270d6">                    <p id="2d8e47ae">                        <span class="control">Advanced options: startup delay</span></p>                    <p id="1ce9a800">The amount of time CLion will wait after starting the GDB server before attempting to connect.                    </p>                </li></ul>        </p></section>    <section class="procedure-steps"><h3 id="run-debug" data-toc="Embedded_GDB_Server#run-debug">Debug an Embedded GDB Server configuration</h3><p id="cf7a3ed6">When you <span class="control">Debug</span><img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.startDebugger@2x.png" width="16" alt="icons actions startDebugger"> this configuration, CLion performs a sequence of steps:</p><ol class="list _decimal"><li class="list__item" id="4f2b50c9"><p>Start GDB server with the specified environment.</p></li><li class="list__item" id="08812f6c"><p>Wait until the configured startup delay time passes.</p></li><li class="list__item" id="9ac96749"><p>Start GDB client and connect to the GDB server.</p></li><li class="list__item" id="1ce2b0b8"><p>Upload the binary as specified by the <span class="control">Download</span> option in the configuration settings.</p></li><li class="list__item" id="2abf93bf"><p id="231cf3b2">Start the debug session.</p>                    <p id="dad66ef3">At this point, you can use all the CLion debugging features for your firmware running on-chip:                    <figure data-theme="light" id="de11e553" width="621"><img class="js-gif" src="/help/img/idea/2019.3/cl_embedded_gdbserver_debug.png" data-gif-src="/help/img/idea/2019.3/cl_embedded_gdbserver_debug.animated.gif" width="621" style="width:621px;"></figure>                </p>                    <p id="87f47311">Notice the <img class="inline-icon-16" src="/help/img/idea/2019.3/clion-embedded.icons.ResetMcu@2x.png" width="16" alt="MCU reset"> button on the left-hand bar of the Debugger tool window. When pressed, it sends the chip reset command specified in the <span class="control">Reset command</span> field of the configuration settings.</p></li></ol></section>    <div class="last-modified" data-skip-index="skip">Last modified: 1 December 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="openocd-support.html">OpenOCD Support</a><a class="navigation-links__next" href="peripheral-view.html">Peripheral View</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>