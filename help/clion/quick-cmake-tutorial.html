<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>快速CMake教程-帮助|里昂</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Quick_CMake_Tutorial" data-breadcrumbs="Configure Projects/Project_Models.xml|Project Formats/CMake/Quick_CMake_Tutorial.xml|Quick CMake Tutorial" data-main-title="Quick CMake Tutorial"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索CLion帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>CLion 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_default_for_macos" data-group="primary">macOS的默认设置</option><option value="primary_intellij_idea_classic_macos" data-group="primary">IntelliJ IDEA经典版（macOS）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_macos" data-group="primary">Eclipse（macOS）</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_sublime_text_macos" data-group="primary">崇高文字（macOS）</option><option value="primary_xcode" data-group="primary">Xcode</option><option value="primary_resharper" data-group="primary">锐化器</option><option value="primary_resharper_macos" data-group="primary">ReSharper（macOS）</option><option value="secondary_default_for_windows" data-group="secondary">Windows的默认设置</option><option value="secondary_default_for_macos" data-group="secondary">macOS的默认设置</option><option value="secondary_intellij_idea_classic" data-group="secondary">IntelliJ IDEA经典版</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_macos" data-group="secondary">Eclipse（macOS）</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_sublime_text" data-group="secondary">崇高文字</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option><option value="secondary_xcode" data-group="secondary">Xcode</option><option value="secondary_resharper" data-group="secondary">锐化器</option><option value="secondary_resharper_macos" data-group="secondary">ReSharper（macOS）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Quick_CMake_Tutorial.xml" data-toc="Quick_CMake_Tutorial">快速CMake教程</h1>    <p id="basics">本教程将指导您完成创建和开发简单CMake项目的过程。我们将逐步学习<a href="https://cmake.org/" rel="noopener noreferrer" data-external="true" target="_blank">CMake</a>作为构建系统的基础知识，以及CMake项目的CLion设置和操作。</p>    <aside class="prompt" rel="basics" id="6e8521bd" data-type="note" data-title=""><p><a href="https://github.com/MarinaKalashina/CMake-Tutorial-sample" rel="noopener noreferrer" data-external="true" target="_blank">GitHub上</a>提供了以下示例项目的源代码。</p></aside>                <div class="chapter"><h2 id="new-project" data-toc="Quick_CMake_Tutorial#new-project">1。基本的CMake项目</h2>        <p id="3a4af3eb"><a href="https://cmake.org/" rel="noopener noreferrer" data-external="true" target="_blank">CMake</a>是一个元构建系统，它使用称为<span class="control">CMakeLists的</span>脚本为特定环境生成构建文件（例如，Unix计算机上的makefile）。在CLion中创建新的CMake项目时，将在项目根目录下自动生成<span class="filepath">CMakeLists.txt</span>文件。</p>        <p id="91e480f0">让我们开始创建一个新的CMake项目。为此，转到<span class="menupath" data-skip-index="skip">文件|新建项目，</span>然后选择<span class="control">C ++ Executable</span> 。在我们的示例中，项目名称为<i id="e7ec19d5">cmake_testapp</i> ，并且所选语言标准为<i id="ff177340">C ++ 14</i> 。</p>        <p id="98390f9b">默认情况下，我们使用单个源文件<span class="filepath">main.cpp</span>和自动创建的包含以下命令的根<a href="cmakelists-txt-file.html">CMakeLists.txt来</a>获得项目：</p><figure><img alt="新的cmake项目" title="新的cmake项目" src="/help/img/idea/2019.3/cl_simple_cmakeprj.png" id="f48a79ac" width="600" height="360"></figure>        <p></p>        <div class="table-wrapper"><table width="100%" id="5d790af3"><thead><tr id="52bcf72e" class="ijRowHead"><th id="d8eea738" width="40%"><p>命令</p></th><th id="89b9b0f7"><p>描述</p></th></tr></thead><tbody><tr id="2c1566f4" class="ijRowOdd"><td id="240c00fe"><code class="code">cmake_minimum_required(VERSION 3.13)</code></td><td id="c47fa32b"><p><a href="https://cmake.org/cmake/help/latest/command/cmake_minimum_required.html" rel="noopener noreferrer" data-external="true" target="_blank">指定</a>最低要求的CMake版本。它设置为CLion中捆绑的CMake版本（始终是可用的最新版本之一）。</p></td></tr><tr id="b9f8afd0" class="ijRowEven"><td id="39d274fc"><code class="code">project(cmake_testapp)</code></td><td id="93adf01d"><p>根据我们在项目创建期间提供的内容来定义项目名称。</p></td></tr><tr id="d48f07e4" class="ijRowOdd"><td id="381a1344"><code class="code">set(CMAKE_CXX_STANDARD 14)</code></td><td id="fcfdb1b7"><p id="266a0533">将创建项目时选择的<i id="9bca0895">CMAKE_CXX_STANDARD</i>变量<a href="https://cmake.org/cmake/help/latest/command/set.html" rel="noopener noreferrer" data-external="true" target="_blank">设置</a>为<i id="80187494">14</i>的值。</p>                                    </td></tr><tr id="8c2dfff5" class="ijRowEven"><td id="b2ddd856"><code class="code">add_executable(cmake_testapp main.cpp)</code></td><td id="326bb914"><p><a href="https://cmake.org/cmake/help/latest/command/add_executable.html" rel="noopener noreferrer" data-external="true" target="_blank">添加</a>将从<span class="filepath">main.cpp</span>构建的<i id="ef23fa5d">cmake_testapp</i>可执行目标。</p></td></tr></tbody></table></div>    </div>        <div class="chapter"><h2 id="targets-configs" data-toc="Quick_CMake_Tutorial#targets-configs">2。构建目标和运行/调试配置</h2>        <p id="47db961f"><a href="https://cmake.org/cmake/help/latest/manual/cmake-buildsystem.7.html#binary-targets" rel="noopener noreferrer" data-external="true" target="_blank">目标</a>是使用CMake脚本构建的可执行文件或库。您可以在一个脚本中定义多个构建目标。</p>        <p id="8655e871">目前，我们的测试项目只有一个构建目标<i id="5ef77ffc">cmake_testapp</i> 。首次加载项目时，CLion自动添加与此目标关联的运行/调试配置：</p><figure><img alt="新cmake项目的默认配置" title="新cmake项目的默认配置" src="/help/img/idea/2019.3/cl_cmake_defaultconf1.png" id="7191cafb" width="376" height="312"></figure>        <p></p>                <p id="632f27f3">单击切换器中的“ <span class="control">编辑配置”</span> ，或选择<span class="menupath" data-skip-index="skip">“运行” |“</span> <span class="control">配置</span> <span class="menupath" data-skip-index="skip">”。</span>从主菜单中<span class="menupath" data-skip-index="skip">编辑配置</span>以查看详细信息。目标名称和可执行文件名称直接来自<span class="filepath">CMakeLists.txt</span> ：</p><figure><img alt="新的cmake项目的默认配置的详细信息" title="新的cmake项目的默认配置的详细信息" src="/help/img/idea/2019.3/cl_cmake_defaultconf2.png" id="aaa1f88b" width="706" height="738"></figure>        <p></p>        <p id="7d4341d2">注意此对话框的“ <span class="control">启动前”</span>区域：默认情况下，将<span class="control">构建</span>设置为启动前步骤。因此，我们不仅可以使用此配置来调试或运行目标，还可以执行构建。要了解有关CLion中可用的各种构建操作的更多信息，请参见<a href="build-actions.html">Build and Rebuild Projects</a> 。</p>            </div>    <div class="chapter"><h2 id="addtargets-reload" data-toc="Quick_CMake_Tutorial#addtargets-reload">3。添加目标并重新加载项目</h2>                <p id="a42af3e8">现在，让我们添加另一个源文件<span class="filepath">calc.cpp</span>并<span class="filepath">从中</span>创建一个新的可执行目标。</p>        <p id="3bf5d358">右键单击“项目”树中的根文件夹，然后选择“ <span class="control">新建” |“新建”。 C / C ++源文件</span> 。CLion提示将文件添加到现有目标：</p><figure><img alt="添加一个新的源文件" title="添加一个新的源文件" src="/help/img/idea/2019.3/cl_cmake_newfile_addtotargets.png" id="c16f3d5a" width="534" height="417"></figure>        <p></p>        <p id="95ea44dd">由于我们的目标是创建新目标，因此请清除“ <span class="control">添加到目标”</span>复选框。因此，CLion通知我们新文件当前不属于任何目标：</p><figure><img alt="文件不属于该项目" title="文件不属于该项目" src="/help/img/idea/2019.3/cl_cmake_notbelong_warning.png" id="2610e4e3" width="706" height="269"></figure>        <p></p>        <p id="cmake-edit">现在，让我们在<span class="filepath">CMakeLists.txt中</span>手动声明一个新目标。请注意，CLion将<span class="control">CMake脚本视为常规代码</span>文件，因此我们可以使用代码辅助功能，例如语法突出显示，自动完成和导航：</p><figure><img alt="在cmake脚本中完成" title="在cmake脚本中完成" src="/help/img/idea/2019.3/cl_cmakelists_completion.png" id="a982862f" width="524" height="137"></figure>当我们在<span class="filepath">CMakeLists.txt中</span>进行更改时，CLion需要重新加载它以更新项目结构：<figure><img alt="添加新目标后重新加载cmake项目" title="添加新目标后重新加载cmake项目" src="/help/img/idea/2019.3/cl_cmake_addfile_reload.png" id="8cecc96f" width="500" height="288"></figure>        <p></p>                        <p id="80799441">我们既可以重新加载项目一次（ <span class="control">重新加载更改</span> ），也可以启用自动重新加载以使CLion静默应用<span class="filepath">CMakeLists.txt中的</span>所有更改。<span class="menupath" data-skip-index="skip">设置/首选项|选项卡中</span>也提供了启用/禁用自动重新加载的<span class="menupath" data-skip-index="skip">选项。构建，执行，部署| CMake的</span> 。</p>        <p id="27297ae6">重新加载项目后，CLion为新目标添加运行/调试配置：</p><figure><img alt="新添加目标的配置" title="新添加目标的配置" src="/help/img/idea/2019.3/cl_cmake_addtarget_conf.png" id="427663d5" width="424" height="344"></figure>        <p></p>        <div class="chapter"><h3 id="lib-targets" data-toc="Quick_CMake_Tutorial#lib-targets">图书馆目标</h3>            <p id="19b912c9">到目前为止，我们添加的目标是可执行文件，并且我们使用了<code class="code">add_executable</code>宣布他们。对于库目标，我们需要另一个命令<a href="https://cmake.org/cmake/help/latest/command/add_library.html" rel="noopener noreferrer" data-external="true" target="_blank">-add_library</a> 。例如，让我们从<span class="filepath">calc.cpp</span>源文件创建一个静态库：</p><div class="code-block" data-lang="makefile">add_library（test_library STATIC calc.cpp）</div>            <p></p>            <p id="8322f1bb">与可执行文件一样，CLion在重新加载项目后为库目标添加运行/调试配置：</p><figure><img alt="新添加的库目标的配置" title="新添加的库目标的配置" src="/help/img/idea/2019.3/cl_cmake_addlibrary_conf.png" id="7c1cfa21" width="423" height="376"></figure>            <p></p>            <p id="c9b23940">但是，这是不可执行的配置，因此，如果我们尝试运行或调试它，我们将获得<img class="inline-icon-16" src="/help/img/idea/2019.3/artwork.studio.icons.common.error@2x.png" width="16" alt="图稿工作室图标常见错误"> <i id="7f6b10b1">可执行文件未指定</i>错误消息。</p>            <p id="4b77de85">要获取库文件，我们需要构建<span class="control">test_library</span>目标。为此，我们可以切换到相应的配置，然后按<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.compile@2x.png" width="16" alt="图标动作编译"> ，或致电<span class="control">Build |构建“ test_library”</span> 。<span class="filepath">libtest_library.a</span>文件将出现在<span class="filepath">cmake-build-debug</span>文件夹中。</p>        </div>    </div>    <div class="chapter"><h2 id="profiles" data-toc="Quick_CMake_Tutorial#profiles">4。构建类型和CMake配置文件</h2>        <p id="31b79aa8">到目前为止创建的所有“运行/调试”配置都是“ <i id="d69f8a2f">调试”</i>配置，这是为我们的项目自动配置的<a href="cmake-profile.html">CMake配置文件</a>的默认构建类型。<span class="control">CMake配置文件</span>是项目构建的一组选项。它指定了<a href="how-to-create-toolchain-in-clion.html">工具链</a> ，构建类型，CMake标志，用于存储构建工件的路径， <i id="3e35d3c0">make生成</i>选项以及环境变量。</p> <p id="de794eea">例如，要分离<i id="cf6f4090">Debug</i>和<i id="e3f86f70">Release</i>版本，我们需要添加<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.inlineAddHover@2x.png" width="16" alt="图标常规inlineAddHover"> <span class="menupath" data-skip-index="skip">设置/首选项|中</span>的新CMake配置文件<span class="menupath" data-skip-index="skip">|构建，执行，部署| CMake</span>并将其构建类型设置为<span class="control">Release</span> ：</p><figure><img alt="添加一个cmake配置文件" title="添加一个cmake配置文件" src="/help/img/idea/2019.3/cl_cmake_addprofile.png" id="991e142f" width="706" height="644"></figure>        <p></p>        <p id="34a81113">注意， <span class="control">Generation path</span>字段指定了构建结果的位置。对于<i id="3c866d36">调试</i>配置文件，默认文件夹是<span class="filepath">cmake-build-debug</span> ；对于<i id="f8805d56">发布</i>配置文件，默认文件夹是<span class="filepath">cmake-</span> <span class="filepath">build-release</span> 。您可以随时设置<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.menu-open@2x.png" width="16" alt="图标操作菜单打开">您选择的其他位置。</p>        <p id="a429f49c">现在，“运行/调试”配置切换器显示两个可用的配置文件：</p><figure><img alt="配置切换器中的cmake配置文件" title="配置切换器中的cmake配置文件" src="/help/img/idea/2019.3/cl_cmake_profiles_configs.png" id="32a8a053" width="422" height="369"></figure>        <p></p>        <p id="f960717c">切换配置或CMake配置文件可能会影响解析代码时使用的预处理器定义。例如，当有针对Debug和Release构建的单独标志时，或者某些变量根据构建类型采用不同的值时。这称为<a href="switching-resolve-context.html">解析上下文</a> 。</p>        <p id="41728c3d">解析上下文定义CLion如何执行语法突出显示和其他代码见解，例如“查找用法”，重构和代码完成。在配置之间切换时，当前文件的解析上下文会自动更改。另外，您可以在上下文切换器中手动选择它（<span class="control"><select automatically=""></select></span>恢复自动选择）：</p><figure id="ffb88e32" width="549" data-theme="light"><img class="js-gif" src="/help/img/idea/2019.3/cl_cmake_resolvecontext.png" width="549" data-gif-src="/help/img/idea/2019.3/cl_cmake_resolvecontext.animated.gif" style="width:549px"></figure>        <p></p>    </div>    <div class="chapter"><h2 id="inc-dirs" data-toc="Quick_CMake_Tutorial#inc-dirs">5，添加包含目录</h2>        <p id="c54e7521">为了使用位于单独目录中的其他标题，我们需要将它们添加到所有目标或某些特定目标中。</p>        <p id="5f73ed42">例如，让我们在项目根目录下创建三个目录， <span class="filepath">包括include</span> ， <span class="filepath">includes / general</span> ， <span class="filepath">includes / math</span> ，并在<span class="filepath">CMakeLists.txt中</span>编写以下命令：</p><div class="code-block" data-lang="makefile">include_directories（包含/数学）include_directories（包含/常规）</div>                    <p></p>        <p id="b8b3ac1f">这两个命令使位于<span class="filepath">一般</span>和<span class="filepath">数学中</span>的标头可用于包括来自所有目标源的标头。例如，我们可以写<code class="code">#include "header_math.h"</code>在<span class="filepath">calc.cpp中</span> 。</p>        <aside class="prompt" rel="b8b3ac1f" id="8e913773" data-type="note" data-title=""><p>仅当您将标题和源明确包含在<span class="filepath">CMakeLists.txt中</span>或将其包含在已经属于该项目的其他文件中时，才能正确解析添加到该项目的标题和源（请参阅<a href="managing-cmake-project-files.html">管理CMake项目文件</a> ）。</p></aside>    </div>    <div class="chapter"><h2 id="link-libs" data-toc="Quick_CMake_Tutorial#link-libs">6。链接库</h2>        <div class="chapter"><h3 id="static-libs" data-toc="Quick_CMake_Tutorial#static-libs">静态库</h3>            <p id="3609e073">在<a href="#lib-targets">第3步中</a> ，我们创建了一个名为<i id="272bc5ad">test_library</i>的静态库（默认文件名为<span class="filepath">libtest_library.a</span> ）。</p>            <p id="b5271348">让我们在项目根目录下创建一个<span class="filepath">lib</span>目录，并将<span class="filepath">libtest_library.a</span>从其默认位置（ <span class="filepath">cmake-build-debug</span> ）复制到此文件夹。</p>            <p id="90b13787">我们将使用两个命令将静态库链接到<i id="23649c2d">cmake_testapp</i>目标： <a href="https://cmake.org/cmake/help/latest/command/find_library.html" rel="noopener noreferrer" data-external="true" target="_blank">find_library</a>提供完整路径，然后我们通过以下路径将其直接传递到<a href="https://cmake.org/cmake/help/latest/command/target_link_libraries.html" rel="noopener noreferrer" data-external="true" target="_blank">target_link_libraries</a>命令中： <code class="code">${TEST_LIBRARY}</code>变量：</p><figure><img alt="链接静态库" title="链接静态库" src="/help/img/idea/2019.3/cl_cmake_link_staticlib.png" id="19e1edeb" width="706" height="520"></figure>            <p></p>            <p id="6f43e825"><span class="control">注意</span> ：请确保放置<code class="code">target_link_libraries</code>之后<code class="code">add_executable</code>命令，以便CMake在链接库之前实际构建目标。</p>        </div>        <div class="chapter"><h3 id="boost" data-toc="Quick_CMake_Tutorial#boost">动态库（Boost示例）</h3>            <p id="4440845e">为了说明链接动态库，我们将举一个使用<a href="https://www.boost.org/doc/libs/1_45_0/libs/test/doc/html/utf.html" rel="noopener noreferrer" data-external="true" target="_blank">Boost的例子</a><a href="https://www.boost.org/doc/libs/1_45_0/libs/test/doc/html/utf.html" rel="noopener noreferrer" data-external="true" target="_blank">。测试框架</a> 。</p>            <p id="86c17712">让我们写一个简单的函数<code class="code">int add_values (int a, int b) { return a+b;}</code>在<span class="filepath">calc.cpp中，</span>并使用函数声明创建关联的标头<span class="filepath">calc.h。</span>我们将在Boost的帮助下测试此功能。测试框架。</p>            <aside class="prompt" rel="86c17712" id="a890a182" data-type="tip" data-title=""><p>有关使用Boost的详细信息。测试，请参阅<a href="unit-testing-tutorial.html">单元测试教程</a> 。</p></aside>            <p id="f51fe6c0">随着我们的项目变得越来越复杂，根<span class="filepath">CMakeLists.txt</span>文件可能变得难以维护。为避免这种情况并建立透明的项目结构，我们将测试提取到子项目中。</p>            <p id="410913bf">让我们添加一个名为<span class="control">test</span>的目录，并在其中创建源文件<span class="filepath">tests.cpp</span> 。另外，我们需要为该目录提供其自己的<span class="filepath">CMakeLists.txt</span>文件（在“项目”树中右键单击<span class="control">test</span> ，然后选择<span class="menupath" data-skip-index="skip">New | CMakeLists.txt</span> ）：</p><figure><img alt="测试子项目" title="测试子项目" src="/help/img/idea/2019.3/cl_cmake_subprojects.png" id="9cdb1fda" width="255" height="590"></figure>            <p></p>            <p id="2efc2f7f">子目录<span class="filepath">test / CMakeLists.txt</span>脚本最初为空。我们可以通过<span class="emphasis">使用libs</span>为<span class="emphasis">Boost</span>插入一个<a href="using-live-templates.html">实时模板</a>来开始填充它。按<kbd data-primary_default_for_windows="Ctrl+J" data-primary_default_for_macos="⌘+J" data-primary_intellij_idea_classic_macos="⌘+J" data-primary_emacs="Ctrl+J" data-primary_visual_studio="Ctrl+J" data-primary_default_for_xwin="Ctrl+J" data-primary_default_for_gnome="Ctrl+J" data-primary_default_for_kde="Ctrl+J" data-primary_eclipse="Ctrl+Shift+Alt+J" data-primary_eclipse_macos="N/A" data-primary_netbeans="Ctrl+J" data-primary_sublime_text="N/A" data-primary_sublime_text_macos="N/A" data-primary_xcode="⌘+J" data-primary_resharper="Ctrl+E, L" data-primary_resharper_macos="Ctrl+E, L" data-secondary_default_for_windows="⌃J" data-secondary_default_for_macos="⌘J" data-secondary_intellij_idea_classic="⌘J" data-secondary_emacs="⌃J" data-secondary_visual_studio="⌃J" data-secondary_default_for_xwin="⌃J" data-secondary_default_for_gnome="⌃J" data-secondary_default_for_kde="⌃J" data-secondary_eclipse="⌃⌥⇧J" data-secondary_eclipse_macos="N/A" data-secondary_netbeans="⌃J" data-secondary_sublime_text="N/A" data-secondary_sublime_text_macos="N/A" data-secondary_xcode="⌘J" data-secondary_resharper="⌃E, L" data-secondary_resharper_macos="⌃E, L">Ctrl+J</kbd>或单击<span class="menupath" data-skip-index="skip">代码|插入实时模板</span> ，然后选择<code class="code">boost_with_libs</code> ：</p><figure><img alt="提升现场模板" title="提升现场模板" src="/help/img/idea/2019.3/cl_cmake_boosttemplate.png" id="c9d63cc8" width="800" height="775"></figure>            <p></p>            <p id="e2816612">将插入的代码调整为以下内容：</p><div class="code-block" data-lang="makefile">设置（Boost_USE_STATIC_LIBS OFF）＃启用动态链接＃搜索unit_test_framework find_package（Boost所需组件unit_test_framework）include_directories（$ {Boost_INCLUDE_DIR}）＃从test.cpp add_executable创建一个cmake_testapp_boost目标。 target target_link_libraries（cmake_testapp_boost $ {Boost_LIBRARIES}）＃通过代码库target_link_libraries链接Boost（cmake_testapp_boost test_library）</div>            <p></p>                                    <aside class="prompt" rel="e2816612" id="57b81c08" data-type="note" data-title="">                <p id="09fb62a0">另外，我们需要将<code class="code">add_subdirectory(test)</code> <span class="control">根</span> <span class="filepath">CMakeLists.txt</span>中的命令以使我们的测试目标<i id="ce1b66ac">cmake_testapp_boost</i>可用于主版本。</p>                <p id="e8ca7906">放置在根CMake脚本中时，此命令声明一个子项目<i id="573ecb3f">test</i> ，该子项目具有自己的<span class="filepath">CMakeLists.txt</span> 。</p>            </aside>            <p id="dba8076d">在两个<span class="filepath">CMakeLists.txt</span>文件中重新加载更改后，CLion为<i id="160dcc62">cmake_testapp_boost</i>目标创建运行/调试配置。这是常规的CMake应用程序配置，我们可以立即运行/调试。但是，为了能够使用内置的测试运行器，让我们在<a href="boost-test-support.html">Boost中创建另一个配置</a><a href="boost-test-support.html">。测试</a>模板：</p><figure><img alt="增强测试运行/调试配置" title="增强测试运行/调试配置" src="/help/img/idea/2019.3/cl_cmake_boosttest_config.png" id="3e68a4ab" width="706" height="871"></figure>            <p></p>            <p id="72673ca2">现在，我们可以运行此配置并获取测试结果。测试运行器显示套件中的测试树，它们的输出，状态和持续时间：</p><figure><img alt="助推器" title="助推器" src="/help/img/idea/2019.3/cl_cmake_boost_testrunner.png" id="3dfcd555" width="706" height="1385"></figure>            <p></p>        </div>    </div>    <div class="chapter"><h2 id="seealso" data-toc="Quick_CMake_Tutorial#seealso">7。学到更多</h2>        <p id="2f84da33">要深入了解CLion中的CMake，请学习如何：</p>        <ul class="list _ul"><li class="list__item" id="0f1afac3"><a href="change-project-root-directory.html">更改项目根目录</a>            </li><li class="list__item" id="5db67b06"><a href="cmake-cache.html">重置CMake缓存</a>            </li><li class="list__item" id="6e1bd276"><a href="how-to-switch-compilers-in-clion.html">切换编译器</a>            </li><li class="list__item" id="6aeb6907"><p>运行<a href="build-actions.html">构建操作</a>和<a href="using-cmake-install.html">CMake安装</a>            </p></li><li class="list__item" id="eff3e9f1"><p>使用<a href="cmake-profile.html#EnvVariables">环境变量</a>和<a href="detecting-origin-of-cmake-invocation.html">CLION_IDE</a>宏。</p></li></ul>    </div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年12月1日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>