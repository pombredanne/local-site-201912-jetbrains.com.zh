<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>自定义构建目标和应用程序-帮助|帮助里昂</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Custom_Build_Targets" data-breadcrumbs="Configure Projects/Project_Models.xml|Project Formats/Custom_Build_Targets.xml|Custom Build Targets and Applications" data-main-title="Custom Build Targets and Applications"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索CLion帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>CLion 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_default_for_macos" data-group="primary">macOS的默认设置</option><option value="primary_intellij_idea_classic_macos" data-group="primary">IntelliJ IDEA经典版（macOS）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_macos" data-group="primary">Eclipse（macOS）</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_sublime_text_macos" data-group="primary">崇高文字（macOS）</option><option value="primary_xcode" data-group="primary">Xcode</option><option value="primary_resharper" data-group="primary">锐化器</option><option value="primary_resharper_macos" data-group="primary">ReSharper（macOS）</option><option value="secondary_default_for_windows" data-group="secondary">Windows的默认设置</option><option value="secondary_default_for_macos" data-group="secondary">macOS的默认设置</option><option value="secondary_intellij_idea_classic" data-group="secondary">IntelliJ IDEA经典版</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_macos" data-group="secondary">Eclipse（macOS）</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_sublime_text" data-group="secondary">崇高文字</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option><option value="secondary_xcode" data-group="secondary">Xcode</option><option value="secondary_resharper" data-group="secondary">锐化器</option><option value="secondary_resharper_macos" data-group="secondary">ReSharper（macOS）</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Custom_Build_Targets.xml" data-toc="Custom_Build_Targets">定制构建目标和应用</h1>    <p id="ade7a738">定制构建目标<span class="control">独立</span>于任何特定的构建系统或项目模型：CLion使用您选择的外部工具来构建源代码和清理构建工件。</p>    <p id="36626871">定制目标<span class="control">对于编译数据库项目</span>特别<span class="control">有用</span> 。尽管<span class="filepath">compile_commands.json</span>本身缺少构建和运行应用程序所需的信息，但自定义目标和自定义“运行/调试”配置有助于绕过此限制。</p>    <p id="e7054278">在下面的示例中，我们将向编译数据库项目中添加目标，获取构建结果，然后创建自定义配置以直接从CLion运行可执行文件。</p>    <section class="procedure-steps"><h3 id="customtarget-compdb" data-toc="Custom_Build_Targets#customtarget-compdb">创建自定义构建目标</h3><ol class="list _decimal"><li class="list__item" id="38c5138b"><p id="45396c96">让我们打开一个编译数据库项目。单击<span class="menupath" data-skip-index="skip">文件|打开</span> ，将CLion指向<span class="filepath">compile_commands.json</span> ，然后选择<span class="control">Open as Project</span> 。</p>            <p id="d7b91419">请注意，默认情况下，“ <a href="build-actions.html">生成”</a>菜单除“重新<a href="compilation-database.html#compdb_recompile">编译”</a>外不显示任何可用操作（您可以使用它来编译当前打开的源文件）：</p><figure><img alt="compdb项目的空构建菜单" title="compdb项目的空构建菜单" src="/help/img/idea/2019.3/cl_customtargets_buildmenu_init.png" id="d15edf51" width="378" height="343"></figure>            <p></p>        </li><li class="list__item" id="7e761583"><p>转到<span class="menupath" data-skip-index="skip">设置/首选项|构建，执行，部署|自定义构建目标</span> ，然后单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="图标一般添加">添加一个新目标。也可以从“ <a href="#custom-rundebug">定制运行/调试”配置</a>编辑器访问此对话框。</p></li><li class="list__item" id="82c00337">            <p id="4b14d2e5">指定以下设置：</p><figure><img alt="自定义构建标签设置" title="自定义构建标签设置" src="/help/img/idea/2019.3/cl_custombuildtargets_settings.png" id="82ae8676" width="520" height="843"></figure>            <p></p>            <ul class="list _ul"><li class="list__item" id="bd67c2b9">                <p id="18b07791">                <span class="control">工具链</span>                    </p>                <p id="c52fd337">此处选择的工具链将为我们将为此目标创建的<a href="#custom-rundebug">自定义运行/调试配置</a>提供环境和调试器。</p>                <aside class="prompt" rel="c52fd337" id="47724c66" data-type="note" data-title=""><p id="7ceeb6e7">在使用编译数据库项目和自定义构建目标时，需要配置<span class="control">两个单独的工具链</span> ：</p><ul class="list _ul"><li class="list__item" id="ed9a9800"><p>第一个用于解析项目文件。在<span class="menupath" data-skip-index="skip">“设置/首选项”中</span>选择它。 <span class="menupath" data-skip-index="skip">构建，执行，部署|编译数据库</span> 。</p></li><li class="list__item" id="67c6e630"><p>第二个是目标的工具链。它为自定义“运行/调试”配置定义<span class="control">了环境和调试器</span> 。</p></li></ul>                <p></p>                    </aside>                                                         </li><li class="list__item" id="0782c37a">                    <p id="ce8c0edc">                    <span class="control">建造</span>和<span class="control">清洁</span>                    </p>                    <p id="a3457616">设置用于构建和清理项目的工具：从可用工具列表中选择或单击<img class="inline-icon-9" src="/help/img/idea/2019.3/icons.general.ellipsis@2x.png" width="9" alt="浏览按钮">并使用<img class="inline-icon-16" src="/help/img/idea/2019.3/artwork.studio.icons.common.edit@2x.png" width="16" alt="艺术品工作室图标常见编辑">和<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="图标一般添加">按钮来编辑或添加新工具。</p>                    <p id="9f6ff569">在我们的示例中， <span class="control">构建</span>工具（名为<span class="control">build_with_make</span> ）调用<span class="emphasis">make</span> ， <span class="control">清洁</span>工具（ <span class="control">clean_with_make</span> ）调用<code class="code">make clean</code> ：</p><figure><img alt="用于构建和清理的外部工具" title="用于构建和清理的外部工具" src="/help/img/idea/2019.3/cl_externaltool_makeclean.png" id="888efce8" width="800" height="570"></figure>                    <p></p>                    <aside class="prompt" rel="9f6ff569" id="4d312bdf" data-type="note" data-title="">                        <p id="42fcee60">与<span class="menupath" data-skip-index="skip">“设置/首选项”中</span>配置的常规<a href="configuring-third-party-tools.html">外部工具</a>不同<span class="menupath" data-skip-index="skip">工具|外部工具</span> ，自定义目标工具<span class="control">存储在每个项目中</span> ，并且无法通过“ <span class="menupath" data-skip-index="skip">工具” |“工具”</span>访问<span class="menupath" data-skip-index="skip">。</span>主菜单上的“ <span class="menupath" data-skip-index="skip">外部工具</span> ”。反过来，您<span class="control">不能将IDE范围的外部工具设置</span>为自定义目标的构建/清理工具。</p>                    </aside>            </li></ul>        </li><li class="list__item" id="2c6be633"><p id="bc97dea4">保存目标后，我们可以开始使用“ <span class="control">构建项目”</span>和“ <span class="control">重建项目”</span>操作。请注意，在有多个自定义目标的情况下，这些操作与列表中的<span class="control">第一个目标</span>相关联。</p><figure><img alt="自定义构建目标的构建菜单" title="自定义构建目标的构建菜单" src="/help/img/idea/2019.3/cl_customtargets-buildmenu.png" id="d81953d5" width="407" height="342"></figure>        <p></p>        </li><li class="list__item" id="d023fba6"><p>如果选择<span class="control">Build Project</span> ，CLion将运行<span class="emphasis">build_with_make</span>工具，该工具调用<code class="code">make</code>对于项目来源：</p><figure><img alt="建立自定义目标" title="建立自定义目标" src="/help/img/idea/2019.3/cl_customtargets_runbuild.png" id="8c2e313b" width="800" height="475"></figure>        <p></p></li></ol></section>    <section class="procedure-steps"><h3 id="custom-rundebug" data-toc="Custom_Build_Targets#custom-rundebug">创建自定义的运行/调试配置</h3><p id="f758c117">现在我们有了一个构建目标，我们可以创建一个配置来运行和调试可执行文件。</p><ol class="list _decimal"><li class="list__item" id="6405b312"><p>去<span class="menupath" data-skip-index="skip">运行|编辑配置</span> ，单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="图标一般添加">然后从配置模板列表中选择“ <span class="control">定制构建应用程序</span> ”。</p></li><li class="list__item" id="c2038811">            <p id="263ba829">在“ <span class="control">目标”</span>字段中选择新创建的自定义目标，然后在“ <span class="control">可执行文件”</span>字段中指定应用程序二进制<span class="control">文件</span> 。要在不离开配置编辑器的情况下添加或编辑目标，请单击“ <span class="control"><i id="a89e0f7f">配置自定义构建目标”</i></span> 。</p>            <p id="679b8d19">对于我们的示例，我们还添加了一个程序参数<span class="control">func.cpp</span> ：</p><figure><img alt="自定义运行调试配置" title="自定义运行调试配置" src="/help/img/idea/2019.3/cl_customapplication.png" id="81e36dae" width="600" height="507"></figure>            <p></p>                    </li><li class="list__item" id="c23f3914"><p>保存配置后，我们可以在“ <span class="control">构建”</span>菜单中看到新的构建操作：</p><figure><img alt="定制应用程序构建菜单" title="定制应用程序构建菜单" src="/help/img/idea/2019.3/cl_customapp_buildmenu.png" id="08703dfe" width="390" height="351"></figure>        <p></p></li><li class="list__item" id="5e460ef3">            <p id="2d1e6b40">我们现在可以<span class="control">运行</span> <img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.execute@2x.png" width="16" alt="图标动作执行">或<span class="control">调试</span> <img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.startDebugger@2x.png" width="16" alt="图标操作startDebugger">此配置并使用所有CLion <a href="debugging-code.html">调试</a>和<a href="profiling-tools.html">动态分析</a>功能。</p>            <p id="4b3666cc">让我们运行示例并查看程序结果：</p>        <figure><img alt="运行自定义运行调试配置的结果" title="运行自定义运行调试配置的结果" src="/help/img/idea/2019.3/cl_customapp_runresult.png" id="18fdd2c8" width="755" height="365"></figure>        </li></ol></section>  <div class="last-modified" data-skip-index="skip">上次修改时间：2019年12月1日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="compilation-database.html">编译数据库</a> <a class="navigation-links__next" href="gradle-support.html">Gradle</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>