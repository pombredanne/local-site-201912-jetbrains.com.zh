<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-US"><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>WSL - Help | CLion</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body data-id="How_to_use_WSL_development_environment_in_CLion" data-breadcrumbs="Build, Run, Debug/Remote_Development.xml|Remote Development/How_to_use_WSL_development_environment_in_CLion.xml|WSL" data-main-title="WSL"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label for="search-box__input" class="search-box__label"><input type="text" class="search-box__input" id="search-box__input" placeholder="Search CLion Help"></label><div class="search-box__clear" title="Clear"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">Send feedback</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>CLion 2019.3 Help</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option data-group="primary" value="primary_default_for_windows" selected>Default for Windows</option><option data-group="primary" value="primary_default_for_macos">Default for macOS</option><option data-group="primary" value="primary_intellij_idea_classic_macos">IntelliJ IDEA Classic (macOS)</option><option data-group="primary" value="primary_emacs">Emacs</option><option data-group="primary" value="primary_visual_studio">Visual Studio</option><option data-group="primary" value="primary_default_for_xwin">Default for XWin</option><option data-group="primary" value="primary_default_for_gnome">Default for GNOME</option><option data-group="primary" value="primary_default_for_kde">Default for KDE</option><option data-group="primary" value="primary_eclipse">Eclipse</option><option data-group="primary" value="primary_eclipse_macos">Eclipse (macOS)</option><option data-group="primary" value="primary_netbeans">NetBeans</option><option data-group="primary" value="primary_sublime_text">Sublime Text</option><option data-group="primary" value="primary_sublime_text_macos">Sublime Text (macOS)</option><option data-group="primary" value="primary_xcode">Xcode</option><option data-group="primary" value="primary_resharper">ReSharper</option><option data-group="primary" value="primary_resharper_macos">ReSharper (macOS)</option><option data-group="secondary" value="secondary_default_for_windows">Default for Windows</option><option data-group="secondary" value="secondary_default_for_macos">Default for macOS</option><option data-group="secondary" value="secondary_intellij_idea_classic">IntelliJ IDEA Classic</option><option data-group="secondary" value="secondary_emacs">Emacs</option><option data-group="secondary" value="secondary_visual_studio">Visual Studio</option><option data-group="secondary" value="secondary_default_for_xwin">Default for XWin</option><option data-group="secondary" value="secondary_default_for_gnome">Default for GNOME</option><option data-group="secondary" value="secondary_default_for_kde">Default for KDE</option><option data-group="secondary" value="secondary_eclipse">Eclipse</option><option data-group="secondary" value="secondary_eclipse_macos">Eclipse (macOS)</option><option data-group="secondary" value="secondary_netbeans">NetBeans</option><option data-group="secondary" value="secondary_sublime_text">Sublime Text</option><option data-group="secondary" value="secondary_sublime_text_macos">Sublime Text (macOS)</option><option data-group="secondary" value="secondary_xcode">Xcode</option><option data-group="secondary" value="secondary_resharper">ReSharper</option><option data-group="secondary" value="secondary_resharper_macos">ReSharper (macOS)</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="How_to_use_WSL_development_environment_in_CLion" id="How_to_use_WSL_development_environment_in_CLion.xml">WSL</h1>        <p id="a9a47bee">            <a href="https://docs.microsoft.com/en-us/windows/wsl/about" data-external="true" target="_blank" rel="noopener noreferrer">WSL</a> (<a href="https://docs.microsoft.com/en-us/windows/wsl/wsl2-index" data-external="true" target="_blank" rel="noopener noreferrer">WSL 2</a>) - Windows Subsystem for Linux - is a compatibility layer for running Linux binary executables natively on Windows 10. Currently, it supports            several <a href="https://docs.microsoft.com/ru-ru/windows/wsl/install-win10#windows-10-fall-creators-update-and-later-install-from-the-microsoft-store" data-external="true" target="_blank" rel="noopener noreferrer">Linux distributions</a>, such as Ubuntu, OpenSUSE, and SLES.        </p>    <p id="e0e56192">With <i id="82afe7a1">WSL toolchain</i> set up for your project, you can build using CMake and compilers from Linux, and run/debug on WSL, without leaving CLion running on your Windows machine.</p>    <section class="procedure-steps"><h3 id="wsl-general" data-toc="How_to_use_WSL_development_environment_in_CLion#wsl-general">Configure WSL</h3><ol class="list _decimal"><li class="list__item" id="step1">                <p id="6d332cb0">                    Download and install WSL distribution (for instance, Ubuntu) from                    <a href="https://www.microsoft.com/store/productId/9NBLGGH4MSV6" data-external="true" target="_blank" rel="noopener noreferrer">Microsoft Store</a>.                </p>                    <p id="e5c5141e">                        For this step, be sure to use Windows 10 with the latest “Fall Creators Update” (minimum version 1709, build 16299.15). See the official guide                        <a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10" data-external="true" target="_blank" rel="noopener noreferrer">Install the Windows Subsystem for Linux</a> for instructions.                    </p>                        <p id="e911e9bc">To work with <span class="control">WSL 2</span>, your Windows version should be 10 build 18917 or later. Follow <a href="https://docs.microsoft.com/windows/wsl/wsl2-install#set-a-distro-to-be-backed-by-wsl-2-using-the-command-line" data-external="true" target="_blank" rel="noopener noreferrer">these instructions</a> to switch the distributive.</p>                        <p id="b3fc0894">                            Note that CLion does not support <span class="control">legacy WSL</span>, which you may have installed before upgrading your system to the build 16299.15 or later of Windows 10.                            In this case, you need to update your WSL distribution.                        </p>                </li><li class="list__item" id="d9a0dc60">                    <p id="47c26df5">                    Run Ubuntu.</p>                    <p id="39eb9317">Upon the first lunch of Ubuntu, the system may prompt you to                    enable the Windows optional feature. In this case, you need to:</p>                               <ul class="list _ul"><li class="list__item" id="4447fbe9"><p>                            Open Windows Power Shell as Administrator and run                            <div class="code-block" data-lang="bash">
                                Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux
    </div>                        </p></li><li class="list__item" id="4e205351"><p>                            Restart your computer.                        </p></li></ul>                </li><li class="list__item" id="a48f303d"><p id="ba71ac93">                    Set up the WSL Ubuntu environment:                    <ul class="list _ul"><li class="list__item" id="80fd6658"><p>                            Install cmake, gcc, or/and clang (and optionally <span class="emphasis">build-essentials</span> package),                            as follows:                            <div class="code-block" data-lang="bash">
sudo apt-get install cmake gcc clang gdb build-essential
    </div>                        </p></li><li class="list__item" id="ee478635">                            <p id="ddc24aa3">Configure and run open ssh-server.</p>                            <p id="84f64d71">                                You can set the configuration manually or by using our <a href="https://github.com/JetBrains/clion-wsl/blob/master/ubuntu_setup_env.sh" data-external="true" target="_blank" rel="noopener noreferrer">script</a>                                (<span class="control">note</span> that if your Linux distribution is different from Ubuntu, the script might need adjustments). To download and run the script, use the following command line:                                <div class="code-block" data-lang="bash">
                                    wget https://raw.githubusercontent.com/JetBrains/clion-wsl/master/ubuntu_setup_env.sh &amp;&amp; bash ubuntu_setup_env.sh
    </div>                            </p>                        </li></ul>                </p>                </li><li class="list__item" id="3011e8c5">                    <p id="d158f14c">                    Next, check the <span class="emphasis">ssh</span> connection:                    <div class="code-block" data-lang="bash">
                        ssh username@localhost -p2222
    </div>                </p>                    <p id="6bf8f0df">Port number 2222 is valid for our configuration script. If you are not using                        our script, the port number can be different.</p>                </li></ol></section>    <p id="25e13a60">If you have <span class="control">upgraded</span> a previously configured WSL to <span class="control">WSL 2</span>, you need to bind your application to <code class="code">0.0.0.0</code> instead of <code class="code">127.0.0.1</code> (see <a href="https://docs.microsoft.com/en-us/windows/wsl/wsl2-ux-changes#other-networking-considerations" data-external="true" target="_blank" rel="noopener noreferrer">User Experience Changes Between WSL 1 and WSL 2</a>):</p>    <ul class="list _none"><li class="list__item" id="a0d3b3ad"><p>1) Open <span class="filepath">/etc/ssh/sshd_config</span> as <code class="code">sudo</code>.</p></li><li class="list__item" id="dc93b408"><p>2) In the <code class="code">ListenAddress 127.0.0.1</code> line, replace <code class="code">127.0.0.1</code> with <code class="code">0.0.0.0</code>.</p></li><li class="list__item" id="605003b2"><p>3) Save the changes and run <code class="code">sudo service ssh restart</code>.</p></li></ul>    <section class="procedure-steps"><h3 id="wsl-tooclhain" data-toc="How_to_use_WSL_development_environment_in_CLion#wsl-tooclhain">Configure a WSL toolchain for your project</h3><ol class="list _decimal"><li class="list__item" id="e36f44bb"> <p id="639d487f">                    In CLion, go to <span data-skip-index="skip" class="menupath">Settings / Preferences | Build, Execution, Deployment | Toolchains</span>                    and click <img class="inline-icon-14" src="/help/img/idea/2019.3/icons.toolbarDecorator.mac.add@2x.png" width="14" alt="plus icon"> to create a new toolchain. Select <span class="control">WSL</span> from the <span class="control">Environment</span> list. CLion automatically detects the installed distribution, or you can set the path manually.                    </p>                    <p id="06ac4a4d">Provide the remote <span class="control">credentials</span> (in case of unexpected errors, try the <a href="#troubleshoot">troubleshooting</a> instructions):                    <figure><img alt="WSL toolchain" title="WSL toolchain" src="/help/img/idea/2019.3/cl_WSL_Credentials.png" id="905cc982" width="706" height="810"></figure>                    </p>                    <aside data-type="note" class="prompt" data-title="" rel="06ac4a4d" id="dc0d4cfe"><p>If you specified the path to <span class="filepath">ubuntu.exe</span> correctly, but CLion still cannot find the executable, the reason might be the <a href="https://github.com/Microsoft/WSL/issues/2592" data-external="true" target="_blank" rel="noopener noreferrer">WSL issue</a> fixed in <span class="control">Windows 10 version 1803</span>. You need to either update your system to the version 1803 or later, or enable the <code class="code">wsl.close.process.input</code> key in the Registry (go to <span data-skip-index="skip" class="menupath">Help | Find Action</span>, type <i id="392e12c2">Registry</i>, and search by the key name).                    </p></aside>                </li><li class="list__item" id="wsl-toolchain">                    <p id="4b3b2196">                    Now to start using the toolchain, do one of the following:                <ul class="list _ul"><li class="list__item" id="d5a26164"><p>                        Set the WSL toolchain as <span class="control">default</span>. This way, it will automatically connect to the default CMake profile.                                            </p></li><li class="list__item" id="12fb9057"><p>Create a <span class="control">separate CMake profile</span>, connect it to the WSL toolchain, and select this profile in the configurations switcher:                        <figure><img alt="cmake profile for wsl toolchain" title="cmake profile for wsl toolchain" src="/help/img/idea/2019.3/cl_wsl_cmakeprofile.png" id="df66c193" width="850" height="609"></figure>                    </p></li></ul>                    </p>                </li></ol><aside data-type="tip" class="prompt" data-title="" rel="wsl-toolchain" id="5fd9a581"><p>            In order to run <span class="control">Valgrind</span> on WSL, make sure to select the CMake profile associated with the WSL toolchain.            See <a href="memory-profiling-with-valgrind.html#valgrind-wsl">this instruction</a> for details.        </p></aside></section>    <section class="procedure-steps"><h3 id="troubleshoot" data-toc="How_to_use_WSL_development_environment_in_CLion#troubleshoot">Troubleshooting</h3><ul class="list "><li class="list__item" id="cace17b7"><p>            Make sure that two bundled plugins, <span class="control">FTP/SFTP Connectivity</span> and <span class="control">Remote Hosts Data Access</span>, are enabled in <span data-skip-index="skip" class="menupath">Settings / Preferences | Plugins</span>.        </p></li><li class="list__item" id="5aef1a7b"><p>                If you get the <i id="200fac85">Credentials are not valid for this WSL distribution</i> error when creating a toolchain,                check the value of <span class="filepath">HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Lxss{ubuntu_id                }\BasePath</span> in the Windows Registry Editor (to access it, launch <span class="emphasis">regedit</span> from the Start menu). In case the value contains non-ASCII characters, use the workaround described in <a href="https://youtrack.jetbrains.com/issue/CPP-13614" data-external="true" target="_blank" rel="noopener noreferrer">this issue</a>.            </p></li><li class="list__item" id="5ce0173f">            <p id="PList">                Due to the                <a href="https://youtrack.jetbrains.com/issue/IDEA-135546" data-external="true" target="_blank" rel="noopener noreferrer">IntelliJ platform issue</a>,                there are problems with using WSL file-system which is case-sensitive and Windows file system which is not.                As a workaround, you can do the following:                <ul class="list _ul"><li class="list__item" id="4038a9bc"><p>                        Go to <span data-skip-index="skip" class="menupath">Help | Edit Custom properties...</span> menu option and specify                        <div class="code-block" data-lang="shell">
                            idea.case.sensitive.fs=true
    </div>                    </p></li><li class="list__item" id="eb0af14e"><p>                        Invalidate caches and restart the IDE using                        <span data-skip-index="skip" class="menupath">File | Invalidate Caches and Restart</span> menu option.                    </p></li></ul>            </p><aside data-type="tip" class="prompt" data-title="" rel="PList" id="b7c2ae6e"><p>                If you can’t open the <span class="control">Edit Custom Properties</span> popup from the Welcome screen, open any project                and edit properties from <span data-skip-index="skip" class="menupath">Help | Edit Custom Properties… </span> main menu option.            </p></aside>                    </li></ul></section>        <div class="last-modified" data-skip-index="skip">Last modified: 1 December 2019 </div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="remote-debug.html">GDB Remote Debug</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>