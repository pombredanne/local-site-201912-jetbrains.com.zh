<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="//resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>使用Docker的Node.js-帮助|帮助红宝石矿</title><link rel="stylesheet" href="//resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="Node_with_docker" data-breadcrumbs="Framework-specific guidelines/Developing_Node_JS_Applications.xml|Node.js/Running_and_Debugging_Node_JS.xml|Running and Debugging Node.js/Node_with_docker.xml|Node.js with Docker" data-main-title="Node.js with Docker"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索RubyMine帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>RubyMine 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_default_for_macos" data-group="primary">macOS的默认设置</option><option value="primary_intellij_idea_classic_macos" data-group="primary">IntelliJ IDEA经典版（macOS）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_macos" data-group="primary">Eclipse（macOS）</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_sublime_text_macos" data-group="primary">崇高文字（macOS）</option><option value="primary_textmate" data-group="primary">TextMate</option><option value="secondary_default_for_windows" data-group="secondary">Windows的默认设置</option><option value="secondary_default_for_macos" data-group="secondary">macOS的默认设置</option><option value="secondary_intellij_idea_classic" data-group="secondary">IntelliJ IDEA经典版</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_macos" data-group="secondary">Eclipse（macOS）</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_sublime_text" data-group="secondary">崇高文字</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option><option value="secondary_textmate" data-group="secondary">TextMate</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 id="Node_with_docker.xml" data-toc="Node_with_docker">使用Docker的Node.js</h1>            <p id="64ec32d3">您可以使用Docker快速引导Node.js应用程序，以从RubyMine运行，调试和分析它。IDE将通过自动创建新的<span class="filepath">Dockerfile</span> ，构建和运行映像，同步源代码以及在容器中安装<span class="emphasis">npm</span>依赖项来进行初始配置。</p>    <p id="cbc9fd17">您可以在<a href="https://blog.jetbrains.com/webstorm/2017/04/quick-tour-of-webstorm-and-docker/" rel="noopener noreferrer" data-external="true" target="_blank">WebStorm和Docker快速浏览中</a>找到一些示例<a href="https://blog.jetbrains.com/webstorm/2017/04/quick-tour-of-webstorm-and-docker/" rel="noopener noreferrer" data-external="true" target="_blank">。</a>    </p>                            <section class="procedure-steps"><h3 id="9557a544">在你开始前</h3><ol class="list _decimal"><li class="list__item" id="install_plugins">                                    <p id="0d7bfd3f">                                        <a name="ws_install_repo_plugin"></a>如“ <a href="managing-plugins.html">管理插件”中</a>所述，在“ <a href="plugins-settings.html">插件”页面</a>上安装并启用NodeJS和NodeJS Remote Interpreter存储库<a href="managing-plugins.html">插件</a> 。</p>                                </li><li class="list__item" id="bundled_plugins">                                    <p id="4d22178e">                                        <a name="ws_make_sure_bundled_plugin_enabled"></a>确保在“ <a href="plugins-settings.html">插件”页面</a>上启用了Docker捆绑插件，有关详细信息，请参阅<a href="managing-plugins.html">管理插件</a> 。</p>                                </li><li class="list__item" id="download_docker">                        <p id="1ad632c2">如<span class="emphasis">Docker</span>中所述下载，安装和配置<a href="docker.html">Docker</a>                        </p>                    </li></ol></section>                    <section class="procedure-steps"><h3 id="ws_node_docker_run_config">创建一个Node.js运行/调试配置</h3><ol class="list _decimal"><li class="list__item" id="653f77a1">                            <p id="32493243">                                <a name="start_creating_run_config_short_0"></a>从主菜单中，选择<span class="menupath" data-skip-index="skip">运行|编辑配置</span> ，然后在“ <span class="control">编辑配置”</span>对话框中， <a name="start_creating_run_config_short_2"></a>点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加按钮">在工具栏上，然后从列表中选择<span class="control">Node.js。</span>将打开“ <span>运行/调试配置：Node.js”</span>对话框。</p>                        </li><li class="list__item" id="ba44f1e0">                            <p id="4cb5abb2">在“ <span class="control">JavaScript文件”</span>字段中，指定启动它的应用程序主文件的路径（例如，对于<a href="http://expressjs.com/" rel="noopener noreferrer" data-external="true" target="_blank">Node.js Express应用程序</a> ，为<span class="filepath">bin / www</span> ）。</p>                        </li><li class="list__item" id="c9823245">                            <p id="7feb9b7e">如有必要，请按照“ <a href="running-and-debugging-node-js.html#ws_node_run_config_optionally">运行和调试Node.js应用程序”中</a>所述指定一些可选设置。</p>                        </li></ol></section>    <section class="procedure-steps"><h3 id="7dd1dc00">指定一个Node.js解释器</h3><p id="3a900bc2">从<span class="control">节点解释器</span>列表中选择一种类型为<span class="emphasis">Remote Interpreter-Docker</span>的已配置Node.js解释器，或配置一个新的。</p><ol class="list _decimal"><li class="list__item" id="41d0d43a">                <p id="a5af5b72">在“ <span>运行/调试配置：Node.js”</span>对话框中，单击<img class="inline-icon-9" src="/help/img/idea/2019.3/icons.general.ellipsis@2x.png" width="9" alt="浏览按钮"> <span class="control">节点解释器</span>字段旁边。</p>            </li><li class="list__item" id="10bc7768">                <p id="24d6d19d">                <a name="configure_node_interpreter_add_new"></a>在打开的<span>Node.js解释器</span>对话框中，其中列出了所有当前配置的解释器，单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加按钮">在工具栏上。在打开的对话框中，从上下文菜单中选择“ <span class="control">添加远程</span> ”。</p>            </li><li class="list__item" id="925d3853">                <p id="d85d7316">在打开的“ <span>配置Node.js远程解释器”对话框</span>中，选择<span class="control">Docker</span>选项。</p>                <ol class="list _decimal"><li class="list__item" id="acbf7956">            <p id="2525f9d8">在<span class="control">服务器</span>字段中， <a name="docker_configure_remote_interpreter_server_field"></a>指定要使用的<span class="emphasis">Docker配置</span> ，有关详细信息，请参阅<a href="docker.html">使用Docker：过程概述</a> 。从列表中选择配置或单击<img class="inline-icon-9" src="/help/img/idea/2019.3/icons.general.ellipsis@2x.png" width="9" alt="浏览按钮">并在打开的<a href="docker-connection-settings.html">Docker页面</a>上创建新配置。</p>        </li><li class="list__item" id="0b4b16e1">            <p id="b39f989d">在<span class="control">图片名称</span>字段中， <a name="docker_configure_remote_interpreter_image_name_field"></a>指定要使用的基本Docker映像。从列表中选择以前下载的图像或您的自定义图像之一，或手动键入图像名称，例如， <code class="code">node:argon</code>要么<code class="code">mhart/alpine-node</code> 。当您稍后启动运行配置时，Docker将在您的机器上搜索指定的映像。如果搜索失败，将从<a href="settings-docker-registry.html">Docker Registry页面</a>上的<a href="settings-docker-registry.html">Docker</a> <a href="https://hub.docker.com/_/node/" rel="noopener noreferrer" data-external="true" target="_blank">Official Images</a>存储库中下载<a href="https://hub.docker.com/_/node/" rel="noopener noreferrer" data-external="true" target="_blank">映像</a> 。</p>        </li><li class="list__item" id="691f08e8"><p><span class="control">Node.js解释器路径</span>字段显示指定图像中默认Node.js解释器的位置。</p></li><li class="list__item" id="fd4df2c1"><p>当您单击<span class="control">OK时</span> ，RubyMine将关闭<span>Configure Node.js Remote Interpreter对话框，</span>并带您到<span>Node.js Interpreters</span>对话框，在该对话框中将新的解释器配置添加到列表中。单击“ <span class="control">确定”</span>返回到运行配置。</p></li></ol>            </li></ol></section>                    <section class="procedure-steps"><h3 id="ws_node_debug_docker_container_settings">指定Docker容器设置</h3><ul class="list "><li class="list__item" id="42e2d63d">                            <p id="ee2d8488">请点击<img class="inline-icon-9" src="/help/img/idea/2019.3/icons.general.ellipsis@2x.png" width="9" alt="浏览按钮">在“ <span class="control">编辑Docker容器设置”</span>字段旁边，并在打开的“ <span class="control">编辑Docker容器设置”</span>对话框中指定设置。</p>                        </li><li class="list__item" id="a051a37d">                            <p id="b2dfc77c">或者，选择<span class="control">自动配置</span>复选框以自动执行。在<a href="https://blog.jetbrains.com/webstorm/2017/04/quick-tour-of-webstorm-and-docker/" rel="noopener noreferrer" data-external="true" target="_blank">WebStorm和Docker快速入门中</a>了解有关<span class="control">自动配置</span>模式的更多信息<a href="https://blog.jetbrains.com/webstorm/2017/04/quick-tour-of-webstorm-and-docker/" rel="noopener noreferrer" data-external="true" target="_blank">：每次运行时会发生什么</a> 。</p>                        </li></ul></section>                        <p id="fabf57fd">                            <a name="ws_docker_remote_node_interpreter_port_binding_explanation"></a>即使使用自动配置，您仍然需要将运行应用程序的端口与容器的端口绑定。这些暴露的端口在Docker主机的IP地址上可用（默认为192.168.99.100）。在调试<span class="emphasis">Node.js Express</span>应用程序的客户端时，需要这种绑定。在这种情况下，您需要从计算机打开浏览器，并通过应用程序中指定的端口访问容器主机上的应用程序。</p>                    <a name="ws_docker_remote_node_interpreter_bind_ports_procedure"></a>        <section class="procedure-steps"><h3 id="7f2279ca">配置端口绑定</h3><ol class="list _decimal"><li class="list__item" id="62810caf">                <p id="8c90b0fd">请点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.openDisk@2x.png" width="16" alt="浏览按钮">在“ <span class="control">Docker容器设置”</span>字段中，并在打开的“ <span class="control">编辑Docker容器设置”</span>对话框中展开“ <span class="control">端口绑定”</span>区域。</p>            </li><li class="list__item" id="b72fc392">                <p id="8cf8cb91">请点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加按钮">在打开的“ <span class="control">端口绑定”</span>对话框中，如下映射端口：</p>                <ul class="list _bullet"><li class="list__item" id="1cf67d0c"><p>在“ <span class="control">容器端口”</span>字段中，键入在应用程序中指定的端口。</p></li><li class="list__item" id="454e7ba6"><p>在“ <span class="control">主机端口”</span>字段中，键入要从计算机在浏览器中打开应用程序的端口。</p></li><li class="list__item" id="762e135f"><p>在<span class="control">主机IP</span>字段中，输入Docker主机的IP地址，默认IP为192.168.99.100。在<a href="settings-preferences-dialog.html">Settings / Preferences对话框</a>的<a href="docker-connection-settings.html">Docker页面</a>的<span class="control">API URL</span>字段中指定主机。</p></li><li class="list__item" id="49a80053"><p>单击“ <span class="control">确定”</span>返回到“ <span class="control">编辑Docker容器设置”</span>对话框，其中新端口映射已添加到列表中。</p></li></ul>            </li><li class="list__item" id="b50c991a"><p>单击“ <span class="control">确定”</span>返回到“ <span>运行/调试配置：Node.js”</span>对话框。</p></li></ol></section>        <section class="procedure-steps"><h3 id="5e46b1f8">运行你的应用程序</h3><ol class="list _decimal"><li class="list__item" id="2c41ad1a">            <p id="32f86a1b"><a href="#ws_node_docker_run_config">如上所述</a>创建<span class="control">Node.js</span>配置。</p>        </li><li class="list__item" id="24c1a52e">            <p id="5371b320">从工具栏上的“ <span class="control">选择运行/调试配置”</span>列表中，选择<a href="#ws_node_docker_run_config">新创建的Node.js配置</a> 。</p>        </li><li class="list__item" id="04ccf16e">            <p id="5cf6a7d7">请点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.execute@2x.png" width="16" alt="运行按钮">到“ <span class="control">选择运行/调试配置”</span>列表。</p>        </li></ol></section>                    <section class="procedure-steps"><h3 id="99cf4bd7">开始调试</h3><ol class="list _decimal"><li class="list__item" id="2a0190e4">                            <p id="efe6d6c7">根据需要在Node.js代码中设置断点。</p>                        </li><li class="list__item" id="98ce8c92">                            <p id="6bcc5fc7"><a href="#ws_node_docker_run_config">如上所述</a>创建<span class="control">Node.js</span>配置，从工具栏上的“ <span class="control">选择运行/调试配置”</span>列表中选择它，然后单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.actions.startDebugger@2x.png" width="16" alt="调试按钮">在列表旁边。</p>                        </li><li class="list__item" id="6813d38c">                            <p id="72ab7ebb"><a href="running-and-debugging-node-js.html#debugLocal">与与Node.js应用程序一起启动调试器时的过程相同</a> 。</p>                        </li></ol></section>    <div class="chapter"><h2 id="ws_node_configure_remote_node_interpreter_docker_compose">在具有Docker Compose定义的Docker容器中使用远程Node.js解释器</h2>        <p id="16d2c4d2">使用<a href="https://docs.docker.com/compose/overview/" rel="noopener noreferrer" data-external="true" target="_blank">Docker Compose</a> ，您可以将Node.js服务器和应用程序代码作为独立的服务运行。如有必要，可以通过添加更多容器来扩展每个服务。这使您能够在类似于生产环境的动态环境中执行有效的开发和测试。</p>    </div>    <div class="chapter"><h2 id="ws_node_configure_remote_node_interpreter_mappings">配置映射</h2>    <p id="b52d4736">当您使用远程Node.js解释器调试应用程序时，调试器会告诉RubyMine当前正在处理的文件的名称以及要处理的行号。RubyMine打开此文件的本地副本，并使用提供的编号指示该行。通过指定服务器上的文件和文件夹及其本地副本之间的对应关系来启用此行为。这种对应关系称为<span class="keyword">映射</span> ，它在调试配置中设置。</p>    <section class="procedure-steps"><h3 id="86dd5f01">配置映射</h3><ol class="list _decimal"><li class="list__item" id="285eec6a">            <p id="6e0300bf">            <a name="run_config_creation_start"></a>从主菜单中，选择<span class="menupath" data-skip-index="skip">运行|编辑配置</span> 。在打开的“ <span class="control">编辑配置”</span>对话框中，单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加新配置按钮">在工具栏上，然后从上下文菜单中选择<span class="control">Node.js。</span></p>        </li><li class="list__item" id="92524842">            <p id="9bdca3f6">在打开的<span>“运行/调试配置：Node.js”</span>对话框中，从“ <span class="control">节点解释器”</span>列表中选择所需的远程解释<span class="control">器</span> 。</p>        </li><li class="list__item" id="772c36fe">            <p id="3c17ce49">请点击<img class="inline-icon-9" src="/help/img/idea/2019.3/icons.general.ellipsis@2x.png" width="9" alt="浏览按钮"> <span class="control">路径映射</span>字段旁边。</p>        </li><li class="list__item" id="9bc66097">            <p id="a61e816f">打开的“ <a href="edit-project-path-mappings-dialog.html">编辑项目路径映射”对话框</a> ，显示从部署配置或<span class="filepath">Vagrantfile</span>检索的路径映射。这些映射是只读的。</p>            <ul class="list _bullet"><li class="list__item" id="1a52a253">                    <p id="e0ef2abd">                    <a name="node_mapping_add_custom"></a>要添加自定义映射，请单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加按钮">并分别在“ <span class="control">本地路径”</span>和“ <span class="control">远程路径”</span>字段中指定项目中的路径以及远程运行时环境中的相应路径。手动输入路径或单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.openDisk@2x.png" width="16" alt="浏览按钮">然后在打开的对话框中选择相关文件或文件夹。</p>                </li><li class="list__item" id="7954b1aa">                    <p id="31a7d37e">                        <a name="node_mapping_remove_custom"></a>要删除自定义映射，请在列表中选择它，然后单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.remove@2x.png" width="16" alt="删除按钮"> 。</p>                </li></ul>        </li></ol></section></div><div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月28日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__next" href="live-editing-in-node-js-applications.html">在Node.js应用程序中</a> <a class="navigation-links__prev" href="node-interactive-debugger-console.html">使用交互式调试器控制台</a> <a class="navigation-links__next" href="live-editing-in-node-js-applications.html">实时编辑</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="//resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>