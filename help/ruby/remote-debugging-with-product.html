<html lang="en-US" ><head><meta charset="UTF-8"><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><script src="/resources.jetbrains.com/storage/help-app/v3/analytics.js"></script><title>教程：使用“ Ruby远程调试”调试应用程序-帮助|帮助红宝石矿</title><link rel="stylesheet" href="/resources.jetbrains.com/storage/help-app/v3/app.css"></head><body  data-id="reference.dialogs.rundebug.RubyRemoteDebugConfigurationType" data-breadcrumbs="Running, debugging, testing, deploying/Debugging_Code.xml|Debugging/Remote_Debugging_with__product_.xml|Tutorial: Debug the application using 'Ruby remote debug'" data-main-title="Tutorial: Debug the application using 'Ruby remote debug'"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><div class="wrapper"><section class="panel _nav" data-skip-index="skip"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索RubyMine帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header" data-skip-index="skip"><div class="container"><h3>RubyMine 2019.3帮助</h3><div class="shortcuts-switcher" data-skip-index="skip"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"><option value="primary_default_for_windows" data-group="primary" selected>Windows的默认设置</option><option value="primary_default_for_macos" data-group="primary">macOS的默认设置</option><option value="primary_intellij_idea_classic_macos" data-group="primary">IntelliJ IDEA经典版（macOS）</option><option value="primary_emacs" data-group="primary">埃马克斯</option><option value="primary_visual_studio" data-group="primary">视觉工作室</option><option value="primary_default_for_xwin" data-group="primary">XWin的默认设置</option><option value="primary_default_for_gnome" data-group="primary">GNOME的默认设置</option><option value="primary_default_for_kde" data-group="primary">KDE的默认值</option><option value="primary_eclipse" data-group="primary">日食</option><option value="primary_eclipse_macos" data-group="primary">Eclipse（macOS）</option><option value="primary_netbeans" data-group="primary">NetBeans</option><option value="primary_sublime_text" data-group="primary">崇高文字</option><option value="primary_sublime_text_macos" data-group="primary">崇高文字（macOS）</option><option value="primary_textmate" data-group="primary">TextMate</option><option value="secondary_default_for_windows" data-group="secondary">Windows的默认设置</option><option value="secondary_default_for_macos" data-group="secondary">macOS的默认设置</option><option value="secondary_intellij_idea_classic" data-group="secondary">IntelliJ IDEA经典版</option><option value="secondary_emacs" data-group="secondary">埃马克斯</option><option value="secondary_visual_studio" data-group="secondary">视觉工作室</option><option value="secondary_default_for_xwin" data-group="secondary">XWin的默认设置</option><option value="secondary_default_for_gnome" data-group="secondary">GNOME的默认设置</option><option value="secondary_default_for_kde" data-group="secondary">KDE的默认值</option><option value="secondary_eclipse" data-group="secondary">日食</option><option value="secondary_eclipse_macos" data-group="secondary">Eclipse（macOS）</option><option value="secondary_netbeans" data-group="secondary">NetBeans</option><option value="secondary_sublime_text" data-group="secondary">崇高文字</option><option value="secondary_sublime_text_macos" data-group="secondary">崇高文字（macOS）</option><option value="secondary_textmate" data-group="secondary">TextMate</option></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="active"><h1 id="Remote_Debugging_with__product_.xml" data-toc="reference.dialogs.rundebug.RubyRemoteDebugConfigurationType">教程：使用“ Ruby远程调试”调试应用程序</h1>                        <p id="f7f388d0">RubyMine为您提供了两种方法来调试在远程计算机上运行的应用程序：</p>        <ul class="list _ul"><li class="list__item" id="3f73dd17"><p>添加一个<a href="configuring-language-interpreter.html#add_remote_ruby_interpreter">远程Ruby解释器</a> ，配置本地和远程项目的文件之间的映射，并<a href="starting-the-debugger-session.html">启动调试会话</a> 。</p></li><li class="list__item" id="d405a7fd"><p>在远程机器上运行该应用程序，添加一个远程Ruby解释器，配置映射， <a href="attaching-to-remote-process.html">并附加到正在运行的进程</a> 。</p></li></ul>        <p id="a5444f78">指定的方式可能不适合调试某些项目，例如<a href="https://github.com/SketchUp/sketchup-ruby-api-tutorials/wiki/RubyMine-Debugger-Setup" rel="noopener noreferrer" data-external="true" target="_blank">SketchUp</a> 。在这种情况下，您可以使用<span class="control">Ruby远程调试</span>运行/调试配置。</p>        <p id="41ccc0ec">在本教程中，我们将向您展示如何使用<span class="control">Ruby remote debug调试</span> <a href="https://github.com/JetBrains/sample_rails_app" rel="noopener noreferrer" data-external="true" target="_blank">示例Rails应用程序</a> 。</p>        <div class="chapter"><h2 id="prereq" data-toc="reference.dialogs.rundebug.RubyRemoteDebugConfigurationType#prereq">先决条件</h2>        <p id="5f554cf4">在本教程中，我们将使用两台机器来演示远程应用程序的调试：</p>        <ul class="list _ul"><li class="list__item" id="735836bd"><p>                <span class="emphasis">本地计算机</span> ：Mac（装有macOS）和RubyMine。</p></li><li class="list__item" id="dc4db8de">                <p id="bc61cc0e">                    <span class="emphasis">远程机器</span> ：启用了<a href="https://help.ubuntu.com/lts/serverguide/openssh-server.html" rel="noopener noreferrer" data-external="true" target="_blank">SSH访问</a>并安装了Ruby解释器的Ubuntu机器。<br>在我们的教程中，远程计算机具有<span class="filepath">示例Web服务器</span>名称。</p>                            </li></ul>        <p id="e3865823">在两台机器上，我们将使用<i id="00a60dfe" origin="intellij-platform">jetbrains</i>用户的主目录来存储源代码。</p>    </div>        <div class="chapter"><h2 id="create_ruby_remote_debug" data-toc="reference.dialogs.rundebug.RubyRemoteDebugConfigurationType#create_ruby_remote_debug">创建“ Ruby远程调试”配置</h2>            <p id="d5a48478">首先，让我们在RubyMine中创建并设置<span class="control">Ruby远程调试</span>配置：</p>            <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="3bc8b51a">                    <p id="e9501e76">去<span class="menupath" data-skip-index="skip">运行|</span>从主菜单中<span class="menupath" data-skip-index="skip">编辑配置</span> ，单击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="添加图标"> ，然后从列表中选择<span class="control">Ruby remote debug</span> 。</p>                </li><li class="list__item" id="eed8a479">                    <p id="f7753992">指定以下设置：</p>                    <figure><img alt="Ruby远程调试" title="Ruby远程调试" src="/help/img/idea/2019.3/rm_ruby_remote_debug_example.png" id="bd820a28" width="700" height="746"></figure>                    <ul class="list _ul"><li class="list__item" id="5a376b4b"><p>                            <span class="control">名称</span> ：输入运行/调试配置名称。<br>示例： <span class="emphasis">远程调试：sample_rails_app</span>                        </p></li><li class="list__item" id="c4cf51df"><p>                            <span class="control">远程主机</span> ：指定远程计算机的主机名或IP地址。<br>示例： <span class="filepath">sample-web-server</span> ， <span class="filepath">172.30.163.90</span>                        </p></li><li class="list__item" id="9a3a2d17"><p>                            <span class="control">远程端口</span> ：指定用于在IDE和调试器之间建立连接的远程端口。<br>示例： <span class="emphasis">1234</span>                        </p></li><li class="list__item" id="5ac02909"><p>                            <span class="control">远程根文件夹</span> ：在远程计算机上指定要调试的应用程序所在的根文件夹。<br>示例： <span class="filepath">/ home / jetbrains / apps / sample_rails_app</span>                        </p></li><li class="list__item" id="6e4bd419"><p>                            <span class="control">本地端口</span> ：指定用于在IDE和调试器之间建立连接的本地端口。<br>示例： <span class="emphasis">26162</span>                        </p></li><li class="list__item" id="1f29d628"><p>                            <span class="control">本地根文件夹</span> ：在本地计算机上指定应用程序的根文件夹。<br>示例： <span class="filepath">/ Users / jetbrains / RubymineProjects / sample_rails_app</span>                        </p></li></ul>                </li><li class="list__item" id="429ea543">                    <p id="ca6ea08d">指定所有设置后，将在“ <span class="control">服务器命令”</span>字段中生成的命令复制到剪贴板。</p>                    <div class="code-block" data-lang="bash">rdebug-ide --host 0.0.0.0 --port 1234 --dispatcher-port 26162-$ COMMAND $</div>                    <p id="1f3a5078">稍后将使用它在远程计算机上<a href="#start_debug_remote">启动调试器</a> 。$ COMMAND $部分将由运行该应用程序的实际命令替换。</p>                    <p id="160f044a">在“ <span class="control">运行/调试配置”</span>对话框中单击“ <span class="control">确定</span> <span class="control">”</span> 。</p>                </li></ol></section>        </div>        <div class="chapter"><h2 id="configure_remote_interpreter" data-toc="reference.dialogs.rundebug.RubyRemoteDebugConfigurationType#configure_remote_interpreter">配置远程解释器</h2>        <p id="a0897117">在这一部分中，我们将<a href="configuring-remote-interpreters-using-ssh.html">使用SSH</a>配置远程解释<a href="configuring-remote-interpreters-using-ssh.html">器</a> 。</p>        <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="8c62da1b">                <p id="fe083811">打开<span class="control">设置/首选项</span>对话框<kbd data-primary_default_for_windows="Ctrl+Alt+S" data-primary_default_for_macos="⌘+Comma" data-primary_intellij_idea_classic_macos="⌘+Comma" data-primary_emacs="Ctrl+Alt+S" data-primary_visual_studio="Alt+F7" data-primary_default_for_xwin="Ctrl+Alt+S" data-primary_default_for_gnome="Ctrl+Alt+S" data-primary_default_for_kde="Ctrl+Alt+S" data-primary_eclipse="Ctrl+Alt+S" data-primary_eclipse_macos="⌘+Comma" data-primary_netbeans="Ctrl+Alt+S" data-primary_sublime_text="Ctrl+Alt+S" data-primary_sublime_text_macos="⌘+Comma" data-primary_textmate="⌘+Comma" data-secondary_default_for_windows="⌃⌥S" data-secondary_default_for_macos="⌘," data-secondary_intellij_idea_classic="⌘," data-secondary_emacs="⌃⌥S" data-secondary_visual_studio="⌥F7" data-secondary_default_for_xwin="⌃⌥S" data-secondary_default_for_gnome="⌃⌥S" data-secondary_default_for_kde="⌃⌥S" data-secondary_eclipse="⌃⌥S" data-secondary_eclipse_macos="⌘," data-secondary_netbeans="⌃⌥S" data-secondary_sublime_text="⌃⌥S" data-secondary_sublime_text_macos="⌘," data-secondary_textmate="⌘,">Ctrl+Alt+S</kbd> ，请转到<span class="control">语言和框架| Ruby SDK and Gems</span>页面，点击<img class="inline-icon-16" src="/help/img/idea/2019.3/icons.general.add@2x.png" width="16" alt="加">按钮，然后从列表中选择“ <span class="control">新建遥控器</span> ”：</p>                <figure><img alt="新遥控器" title="新遥控器" src="/help/img/idea/2019.3/rm_remote_attach_new_remote.png" id="b5a12f6a" width="773" height="391"></figure>            </li><li class="list__item" id="bb619aba">                <p id="382bdd1d">在调用的对话框中，选择“ <span class="control">SSH凭据”</span>并通过以下方式指定参数：</p>                <figure><img alt="配置远程Ruby解释器" title="配置远程Ruby解释器" src="/help/img/idea/2019.3/rm_remote_attach_ssh_credentials.png" id="b9474a15" width="637" height="566"></figure>                <ul class="list _ul"><li class="list__item" id="797273d0"><p>                        <span class="control">主机</span> ：远程计算机的主机名或IP地址。在我们的教程中，主机名是<span class="filepath">sample-web-server</span> ， <span class="control">端口</span>设置为默认值。</p></li><li class="list__item" id="448548ac"><p>                        <span class="control">用户名</span> ：用于在远程计算机上进行身份验证的用户名。</p></li><li class="list__item" id="ec9ecb49"><p>                        <span class="control">身份验证类型</span> ：在此字段中，选择“ <i id="d85278a1" origin="intellij-platform">密码”</i>值以使用密码对用户进行身份验证。</p></li><li class="list__item" id="384a7712"><p>                        <span class="control">密码</span> ：指定用户的密码。</p></li><li class="list__item" id="7dec3ea3"><p>                        <span class="control">Ruby或版本管理器路径</span> ：在这里，您应该指定Ruby解释器或<a href="ruby-version-managers.html">版本管理器</a>可执行文件的路径。在本教程中，我们在远程计算机上使用RVM。</p></li></ul>                <p id="bb52ff23">指定所有设置后，单击<span class="control">确定</span> 。</p>            </li><li class="list__item" id="b4c610af">                <p id="67d1bedd">如果在上一个对话框中指定了版本管理器可执行文件的路径，则RubyMine建议您选择所需的Ruby解释器。在此步骤中，您需要选择用于运行远程应用程序的解释器。</p>                <figure><img alt="选择分布" title="选择分布" src="/help/img/idea/2019.3/rm_remote_attach_select_distribution.png" id="2364f82b" width="246" height="214"></figure>                <p id="26b38a28">单击<span class="control">确定，</span>然后在<span class="control">Ruby SDK and Gems</span>页面中选择添加的SDK。</p>                <figure><img alt="Ruby SDK和Gems" title="Ruby SDK和Gems" src="/help/img/idea/2019.3/rm_remote_attach_select_remote_sdk.png" id="261f0fba" width="738" height="708"></figure>            </li><li class="list__item" id="28bbc285">                <p id="mapping_note">您需要做的最后一件事是指定本地和远程项目的文件之间的映射。为此，请单击“ <span class="control">编辑路径映射”。</span> <img class="inline-icon-16" src="/help/img/idea/2019.3/icons.vcs.folders@2x.png" width="16" alt="编辑路径映射">按钮。在“ <span class="control">编辑项目路径映射”</span>对话框中，指定本地和远程项目根路径。</p><aside class="prompt" rel="mapping_note" id="411f944f" data-type="tip" data-title="">                    <p id="7f3c898c">如有必要，可以不指定项目根路径，而仅指定包含<a href="#debug">调试</a>所需源的文件夹。</p>                </aside>                <figure><img alt="编辑项目路径映射" title="编辑项目路径映射" src="/help/img/idea/2019.3/rm_remote_attach_path_mappings.png" id="699fca28" width="626" height="458"></figure>                                <p id="6bbc825f">在我们的例子中，路径将如下所示：</p>                <ul class="list _ul"><li class="list__item" id="6afdab8f"><p>                        <span class="control">本地路径</span> ： <span class="filepath">/ Users / jetbrains / RubymineProjects / sample_rails_app</span>                    </p></li><li class="list__item" id="12e75000"><p>                        <span class="control">远程路径</span> ： <span class="filepath">/ home / jetbrains / apps / sample_rails_app</span>                    </p></li></ul>                <p id="a1ae8274">单击<span class="control">确定</span>在此对话框，然后单击<span class="control">设置/首选项</span>对话框中<span class="control">单击OK。</span>现在，我们准备连接到远程进程并调试应用程序。</p>            </li></ol></section>    </div>        <div class="chapter"><h2 id="start_debug_remote" data-toc="reference.dialogs.rundebug.RubyRemoteDebugConfigurationType#start_debug_remote">在远程机器上开始调试</h2>            <p id="b1987d00">在这一部分中，我们将安装调试工具，并在远程计算机上启动调试会话。</p>            <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="72755b37">                    <p id="b3f2b096">（可选）RubyMine允许您使用Spring <a href="debugging-code.html">调试</a> Rails应用程序。这可能需要更新系统或项目Spring配置文件，以将调试器加载到Spring <a href="https://github.com/rails/spring#running-code-after-forking" rel="noopener noreferrer" data-external="true" target="_blank">派生</a>的每个进程中。为此，请将以下代码添加到<span class="filepath">〜/ .spring.rb</span>或<span class="filepath">config /</span> <span class="filepath">spring.rb</span>文件中：</p>                    <div class="code-block" data-lang="ruby">如果ENV ['DEBUGGER_STORED_RUBYLIB'] ENV ['DEBUGGER_STORED_RUBYLIB']。split（File :: PATH_SEPARATOR）.spring（）做Spring.after_fork。除非路径=〜/ ruby-debug-ide /加载路径+'/ruby-debug-ide/multiprocess/starter.rb'</div>                </li><li class="list__item" id="9ec6f399">                    <p id="2698e189">将调试工具安装到目标Ruby解释器。要做到这一点，添加<span class="emphasis">贬低</span>和<span class="emphasis">红宝石调试IDE</span>的<span class="filepath">Gemfile文件</span>并运行<code class="code">bundle install</code> 。</p>                    <div class="code-block" data-lang="ruby">gem'debase'gem'ruby-debug-ide'</div>                </li><li class="list__item" id="367ecc96">                    <p id="fcbbab84">转到应用程序的文件夹，并使用以下命令在附加了调试器的情况下运行它。</p>                    <div class="code-block" data-lang="bash">rdebug-ide --host 0.0.0.0 --port 1234 --dispatcher-port 26162-bin / rails</div>                    <aside class="prompt" rel="2c700e2c" id="354ef149" data-type="tip" data-title="">                        <p id="4f3fd101">如果要调试纯Ruby脚本，该命令将以以下方式显示：</p>                        <p id="314bb43b">                            </p><div class="code-block" data-lang="none">rdebug-ide --host 0.0.0.0 --port 1234 --dispatcher-port 26162-lib / script.rb</div>                        <p></p>                    </aside>                </li></ol></section>        </div>        <div class="chapter"><h2 id="start_debug_local" data-toc="reference.dialogs.rundebug.RubyRemoteDebugConfigurationType#start_debug_local">在本地计算机上开始调试</h2>            <p id="01ae31c7">现在，我们准备开始在IDE中进行调试。</p>            <section class="procedure-steps"><ol class="list _decimal"><li class="list__item" id="4f9719c6"><p>在您的应用程序中设置<a href="using-breakpoints.html#set-line-breakpoint">断点</a> 。</p></li><li class="list__item" id="ceb7c5e9">                    <p id="435a69a3">运行调试会话。为此，请按<kbd data-primary_default_for_windows="Ctrl" data-primary_default_for_macos="Ctrl" data-primary_intellij_idea_classic_macos="Ctrl" data-primary_emacs="Ctrl" data-primary_visual_studio="Ctrl" data-primary_default_for_xwin="Ctrl" data-primary_default_for_gnome="Ctrl" data-primary_default_for_kde="Ctrl" data-primary_eclipse="Ctrl" data-primary_eclipse_macos="Ctrl" data-primary_netbeans="Ctrl" data-primary_sublime_text="Ctrl" data-primary_sublime_text_macos="Ctrl" data-primary_textmate="Ctrl" data-secondary_default_for_windows="^" data-secondary_default_for_macos="^" data-secondary_intellij_idea_classic="^" data-secondary_emacs="^" data-secondary_visual_studio="^" data-secondary_default_for_xwin="^" data-secondary_default_for_gnome="^" data-secondary_default_for_kde="^" data-secondary_eclipse="^" data-secondary_eclipse_macos="^" data-secondary_netbeans="^" data-secondary_sublime_text="^" data-secondary_sublime_text_macos="^" data-secondary_textmate="^">Ctrl</kbd>两次，然后在弹出窗口中输入配置名称（ <span class="emphasis">远程调试：sample_rails_app</span> ）。按住<kbd data-primary_default_for_windows="Shift" data-primary_default_for_macos="Shift" data-primary_intellij_idea_classic_macos="Shift" data-primary_emacs="Shift" data-primary_visual_studio="Shift" data-primary_default_for_xwin="Shift" data-primary_default_for_gnome="Shift" data-primary_default_for_kde="Shift" data-primary_eclipse="Shift" data-primary_eclipse_macos="Shift" data-primary_netbeans="Shift" data-primary_sublime_text="Shift" data-primary_sublime_text_macos="Shift" data-primary_textmate="Shift" data-secondary_default_for_windows="⇧" data-secondary_default_for_macos="⇧" data-secondary_intellij_idea_classic="⇧" data-secondary_emacs="⇧" data-secondary_visual_studio="⇧" data-secondary_default_for_xwin="⇧" data-secondary_default_for_gnome="⇧" data-secondary_default_for_kde="⇧" data-secondary_eclipse="⇧" data-secondary_eclipse_macos="⇧" data-secondary_netbeans="⇧" data-secondary_sublime_text="⇧" data-secondary_sublime_text_macos="⇧" data-secondary_textmate="⇧">Shift</kbd>键（对话框标题更改为<span class="control">Debug</span> ），然后按<kbd data-primary_default_for_windows="Enter" data-primary_default_for_macos="Enter" data-primary_intellij_idea_classic_macos="Enter" data-primary_emacs="Enter" data-primary_visual_studio="Enter" data-primary_default_for_xwin="Enter" data-primary_default_for_gnome="Enter" data-primary_default_for_kde="Enter" data-primary_eclipse="Enter" data-primary_eclipse_macos="Enter" data-primary_netbeans="Enter" data-primary_sublime_text="Enter" data-primary_sublime_text_macos="Enter" data-primary_textmate="Enter" data-secondary_default_for_windows="⏎" data-secondary_default_for_macos="⏎" data-secondary_intellij_idea_classic="⏎" data-secondary_emacs="⏎" data-secondary_visual_studio="⏎" data-secondary_default_for_xwin="⏎" data-secondary_default_for_gnome="⏎" data-secondary_default_for_kde="⏎" data-secondary_eclipse="⏎" data-secondary_eclipse_macos="⏎" data-secondary_netbeans="⏎" data-secondary_sublime_text="⏎" data-secondary_sublime_text_macos="⏎" data-secondary_textmate="⏎">Enter</kbd> 。</p>                    <aside class="prompt" rel="435a69a3" id="19a81461" data-type="tip" data-title="">                        <p id="a66a4e20">您可以从以下教程中了解有关如何调试<a href="https://github.com/JetBrains/sample_rails_app" rel="noopener noreferrer" data-external="true" target="_blank">示例Rails应用程序的</a>更多信息： <a href="get-started.html#debug">调试应用程序</a> 。</p>                    </aside>                </li></ol></section>        </div>    <div class="last-modified" data-skip-index="skip">上次修改时间：2019年11月28日</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom" data-skip-index="skip"><a class="navigation-links__prev" href="debugging-in-console.html">教程：在IRB / Rails控制台中进行调试</a></div></article><div id="disqus_thread" data-skip-index="skip"></div></div></section></main></div><script src="/resources.jetbrains.com/storage/help-app/v3/app.js"></script></body></html>