<html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><title>Hub 2.5帮助:: OAuth 2.0授权</title><link rel="stylesheet" href="/help/app/app.css"></head><body  data-id="OAuth-2.0-Authorization"><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P98" height="0" width="0" style="display:none"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                        })(window,document,'script','dataLayer','GTM-5P98');
                    </script><div class="wrapper"><section class="panel _nav"><header class="panel__header"><div class="container"><form class="search-box"><label class="search-box__label" for="search-box__input"><input type="text" class="search-box__input" id="search-box__input" placeholder="搜索中心帮助"></label><div class="search-box__clear" title="明确"></div></form></div></header><nav class="panel__content"><div class="container _nav"><menu class="nav-tree"></menu></div><div class="container _footer panel__footer"><p><a href="#">发送反馈</a></p></div></nav></section><main class="panel _main"><header class="panel__header"><div class="container"><h3>Hub 2.5帮助</h3><div class="shortcuts-switcher"><label for="switch-shortcuts">按键图：</label><select id="switch-shortcuts" class="select _shortcuts" height="1"></select></div><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="false"><div class="navigation-links _top"><a class="navigation-links__prev" href="Hub-Rest-Api-URL.html">REST API URL和</a> <a class="navigation-links__next" href="Implicit.html">隐式</a> <a class="navigation-links__prev" href="Hub-Rest-Api-URL.html">端点</a></div><h1>OAuth 2.0授权</h1><a name="d68759e3"></a><p>集线器的实现<a name="d68759e5"></a> <a href="https://tools.ietf.org/html/rfc6749" data-external="true"><span>OAuth 2.0</span></a>支持多种身份验证/授权流程。要访问集线器本身的资源以及连接到集线器的服务，客户端应获取访问令牌。客户端可以使用的流取决于：</p><ul class="list _ul"><li class="list__item"><a name="d68759e11"></a>客户端拥有什么信息（服务凭证/用户凭证）。</li><li class="list__item"><a name="d68759e14"></a>从客户端访问资源（从浏览器/从服务器端/从独立应用程序）。</li></ul><ul><li class="list__item"><a href="#d68759e20">使用什么流程？</a></li><li class="list__item"><a href="#d68759e145">您应该拥有什么信息</a></li><li class="list__item"><a href="#HubOauthEndpoints">适用于集线器的OAuth 2.0端点</a></li><li class="list__item"><a href="#d68759e314">将客户注册为服务</a><ul class="list _bullet"><li class="list__item"><a href="#SampleScriptForRegisteringClientAsService">用于将客户端注册为服务的示例脚本</a><ul class="list _bullet"><li class="list__item"><a href="#d68759e342">请求</a></li><li class="list__item"><a href="#d68759e348">响应</a></li></ul></li></ul></li></ul><a name="d68759e20"></a><h2>使用什么流程？</h2>

        <table class=" wide" width="100%" id="d68759e22"><thead><tr id="d68759e24" class="ijRowHead"><td><a name="d68759e24"></a></td><th><a name="d68759e26"></a>你发展...</th><th><a name="d68759e29"></a>使用流程</th><th><a name="d68759e32"></a>必要参数</th><th><a name="d68759e35"></a>附加要求</th></tr></thead><tbody><tr id="d68759e39" class="ijRowOdd"><td><a name="d68759e39"></a></td><td><a name="d68759e41"></a>具有浏览器中所有授权逻辑的富客户端Web应用程序</td><td><a name="d68759e44"></a><a name="d68759e45"></a> <a href="Implicit.html"><span>隐式流</span></a></td><td><a name="d68759e48"></a><code class="code" data-lang="Java">service id</code></td><td><a name="d68759e52"></a>通过Hub的授权处理浏览器请求</td></tr><tr id="d68759e56" class="ijRowEven"><td><a name="d68759e56"></a></td><td><a name="d68759e58"></a>在服务器端具有授权登录名的Web应用程序</td><td><a name="d68759e61"></a><a name="d68759e62"></a> <a href="Authorization-Code.html"><span>授权码流程</span></a></td><td><a name="d68759e65"></a> <code class="code" data-lang="Java">service id</code> ， <code class="code" data-lang="Java">service secret</code></td><td><a name="d68759e72"></a>使用服务器端集线器服务器的授权处理请求</td></tr><tr id="d68759e76" class="ijRowOdd"><td><a name="d68759e76"></a></td><td><a name="d68759e78"></a>能够非交互地请求授权令牌的桌面或移动应用程序</td><td><a name="d68759e81"></a><a name="d68759e82"></a> <a href="Refresh-Token.html"><span>刷新令牌流</span></a></td><td><a name="d68759e85"></a> <code class="code" data-lang="Java">service id</code> ， <code class="code" data-lang="Java">service secret</code></td><td><a name="d68759e92"></a>使用服务器端集线器服务器的授权处理请求</td></tr><tr id="d68759e96" class="ijRowEven"><td><a name="d68759e96"></a></td><td><a name="d68759e98"></a>需要代表自己访问资源的脚本</td><td><a name="d68759e101"></a><a name="d68759e102"></a> <a href="Client-Credentials.html"><span>客户凭证流</span></a></td><td><a name="d68759e105"></a> <code class="code" data-lang="Java">service id</code> ， <code class="code" data-lang="Java">service secret</code></td><td><a name="d68759e112"></a>没有</td></tr><tr id="d68759e117" class="ijRowOdd"><td><a name="d68759e117"></a></td><td><a name="d68759e119"></a>需要代表某些用户访问资源的脚本</td><td><a name="d68759e122"></a><a name="d68759e123"></a> <a href="Resource-Owner-Password-Credentials.html"><span>资源所有者密码凭证流</span></a></td><td><a name="d68759e126"></a> <code class="code" data-lang="Java">service id</code> ， <code class="code" data-lang="Java">service secret</code> ， <code class="code" data-lang="Java">username</code>和<code class="code" data-lang="Java">password</code></td><td><a name="d68759e139"></a>没有</td></tr></tbody></table>
    <a name="d68759e145"></a><h2>您应该拥有什么信息</h2>


        <table class=" wide" width="100%" id="d68759e147"><thead><tr id="d68759e149" class="ijRowHead"><td><a name="d68759e149"></a></td><th><a name="d68759e151"></a>参数</th><th><a name="d68759e154"></a>需要吗？</th><th><a name="d68759e157"></a>描述</th></tr></thead><tbody><tr id="d68759e161" class="ijRowOdd"><td><a name="d68759e161"></a></td><td><a name="d68759e163"></a><code class="code" data-lang="Java">Client service ID</code></td><td><a name="d68759e167"></a><a name="d68759e168"></a> <b id="d68759e168">总是</b></td><td><a name="d68759e171"></a>与集线器中的客户端关联的服务的标识符（ID）。</td></tr><tr id="d68759e175" class="ijRowEven"><td><a name="d68759e175"></a></td><td><a name="d68759e177"></a><code class="code" data-lang="Java">Client service secret</code></td><td><a name="d68759e181"></a>取决于流量</td><td><a name="d68759e184"></a>与集线器中的客户端关联的服务的机密。</td></tr><tr id="d68759e188" class="ijRowOdd"><td><a name="d68759e188"></a></td><td><a name="d68759e190"></a><code class="code" data-lang="Java">Scope</code></td><td><a name="d68759e194"></a><a name="d68759e195"></a> <b id="d68759e195">总是</b></td><td><a name="d68759e198"></a><a name="d68759e199"></a><p>与资源服务器关联的在中心服务中注册的ID。例如，如果客户端要访问YouTrack中的问题，则应在Hub中找出YouTrack服务的ID。</p>
                    <a name="d68759e202"></a><p>客户端可以使用单个访问令牌访问超过一个资源服务器。在这种情况下，范围是在集线器中注册的服务的ID的空格分隔列表。</p>
                </td></tr><tr id="d68759e207" class="ijRowEven"><td><a name="d68759e207"></a></td><td><a name="d68759e209"></a><code class="code" data-lang="Java">Client redirect URI</code></td><td><a name="d68759e213"></a>取决于流量</td><td><a name="d68759e216"></a>客户端应用程序上的URI，可以处理来自授权服务器（Hub）的响应。</td></tr><tr id="d68759e221" class="ijRowOdd"><td><a name="d68759e221"></a></td><td><a name="d68759e223"></a><code class="code" data-lang="Java">Username</code></td><td><a name="d68759e227"></a>取决于流量</td><td><a name="d68759e230"></a>最终用户的用户名或ID，或电子邮件。</td></tr><tr id="d68759e234" class="ijRowEven"><td><a name="d68759e234"></a></td><td><a name="d68759e236"></a><code class="code" data-lang="Java">Password</code></td><td><a name="d68759e240"></a>取决于流量</td><td><a name="d68759e243"></a>最终用户的密码。</td></tr></tbody></table>

         

    <a name="HubOauthEndpoints"></a><h2>适用于集线器的OAuth 2.0端点</h2>

        <a name="d68759e254"></a><p>对于集线器服务，用于身份验证和令牌的OAuth 2.0端点为：</p>
        <ul class="list _bullet"><li class="list__item"><a name="d68759e259"></a>身份验证端点URL： <code class="code" data-lang="Java">&lt;Hub Service URL&gt;/api/rest/oauth2/auth</code></li><li class="list__item"><a name="d68759e264"></a>令牌端点URL： <code class="code" data-lang="Java">&lt;Hub Service URL&gt;/api/rest/oauth2/token</code></li></ul>

        <a name="d68759e270"></a><p><code class="code" data-lang="Java">&lt;Hub Service URL&gt;</code>是为集线器配置的URL <a name="d68759e274"></a>您的网络环境中的<i id="d68759e274">服务</i> 。例如，您有公司的服务器<code class="code" data-lang="Java">www.mycompany.com</code>和集线器服务。您可以将Hub配置为可通过<code class="code" data-lang="Java">www.mycompany.com/hub</code>进行访问，或者可以说<code class="code" data-lang="Java">hub.mycompany.com</code>进行访问。随后，OAuth 2.0端点分别如下：</p>

        <ul class="list _bullet"><li class="list__item"><a name="d68759e289"></a>对于<code class="code" data-lang="Java">www.mycompany.com/hub</code> ： <code class="code" data-lang="Java">https://www.mycompany.com/hub/api/rest/oauth2/auth</code>和<code class="code" data-lang="Java">https://www.mycompany.com/hub/api/rest/oauth2/token</code></li><li class="list__item"><a name="d68759e300"></a>对于<code class="code" data-lang="Java">hub.mycompany.com</code> ： <code class="code" data-lang="Java">https://hub.mycompany.com/api/rest/oauth2/auth</code>和<code class="code" data-lang="Java">https://hub.mycompany.com/api/rest/oauth2/token</code> 。</li></ul>


    <a name="d68759e314"></a><h2>将客户注册为服务</h2>

        <a name="d68759e316"></a><p>要启用授权，您应该将客户端注册为中心服务。您可以在<a name="d68759e318"></a> <a href="Managing-Services.html"><span>管理界面</span></a>或<a name="d68759e321"></a> <a href="HUB-REST-API_Services_Create-New-Service.html"><span>以编程方式</span></a> 。基本上，您只是在<code class="code" data-lang="Java">/services</code> URL上发送<code class="code" data-lang="Java">POST</code>请求，并获得新创建的服务的凭据作为响应。
        </p>

        <a name="SampleScriptForRegisteringClientAsService"></a><h3>用于将客户端注册为服务的示例脚本</h3>
           <a name="d68759e333"></a><p>以下示例脚本考虑将集线器服务安装到<code class="code" data-lang="Java">https://hub.company.com</code> ，将客户端OAuth 2.0服务安装到<code class="code" data-lang="Java">https://myservice.company.com</code> 。</p>

           <a name="d68759e342"></a><h4>请求</h4>
               <a name="d68759e344"></a><div class="code-block" data-lang="HTML"><code class="code-block__wrapper">POST / api / rest / services？fields = id，秘密HTTP / 1.1主机：hub.company.com接受：application / json内容类型：application / json {“名称”：“我的服务”，“ homeUrl”：“ https://myservice.company。 com“，” redirectUris“：[” https://myservice.company.com/authorized“]，” applicationName“：”我的服务“，”供应商“：” Company Inc.“，”版本“：” 1.0“}</code></div>
            

           <a name="d68759e348"></a><h4>响应</h4>
               <a name="d68759e350"></a><div class="code-block" data-lang="HTML"><code class="code-block__wrapper">{“ id”：“ 98071167-004c-4ddf-ba37-5d4599fdf319”，“ secret”：“ eAUyKgVfhSbV”}</code></div>

               <a name="d68759e353"></a><p>您以后可以使用服务的<code class="code" data-lang="Java">id</code>和<code class="code" data-lang="Java">secret</code>进行授权。</p>
               <a name="d68759e362"></a><p>集线器中的服务可以是受信任的，也可以是不受信任的。如果服务是<a name="d68759e364"></a> <i id="d68759e364">受信任</i> ，则它可以代表自己访问Hub资源服务器。同样，当用户从可信服务发送以授权自己时，该用户不会看到其他警告。
               </p>
            
         
    <div class="last-modified">上次修改时间：2017年1月31日</div></article><div id="disqus_thread"></div></div></section></main></div><script></script><script src="/help/app/app.js"></script></body></html>